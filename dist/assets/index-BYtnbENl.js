var HL=Object.defineProperty;var qL=(t,e,r)=>e in t?HL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var fn=(t,e,r)=>qL(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $L(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oN={exports:{}},X1={},lN={exports:{}},Dr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp=Symbol.for("react.element"),WL=Symbol.for("react.portal"),GL=Symbol.for("react.fragment"),KL=Symbol.for("react.strict_mode"),YL=Symbol.for("react.profiler"),XL=Symbol.for("react.provider"),QL=Symbol.for("react.context"),JL=Symbol.for("react.forward_ref"),ZL=Symbol.for("react.suspense"),eR=Symbol.for("react.memo"),tR=Symbol.for("react.lazy"),zb=Symbol.iterator;function rR(t){return t===null||typeof t!="object"?null:(t=zb&&t[zb]||t["@@iterator"],typeof t=="function"?t:null)}var cN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uN=Object.assign,hN={};function Bd(t,e,r){this.props=t,this.context=e,this.refs=hN,this.updater=r||cN}Bd.prototype.isReactComponent={};Bd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dN(){}dN.prototype=Bd.prototype;function Rw(t,e,r){this.props=t,this.context=e,this.refs=hN,this.updater=r||cN}var jw=Rw.prototype=new dN;jw.constructor=Rw;uN(jw,Bd.prototype);jw.isPureReactComponent=!0;var Hb=Array.isArray,fN=Object.prototype.hasOwnProperty,Fw={current:null},pN={key:!0,ref:!0,__self:!0,__source:!0};function mN(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)fN.call(e,n)&&!pN.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:lp,type:t,key:s,ref:a,props:i,_owner:Fw.current}}function nR(t,e){return{$$typeof:lp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Dw(t){return typeof t=="object"&&t!==null&&t.$$typeof===lp}function iR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var qb=/\/+/g;function fx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iR(""+t.key):e.toString(36)}function Zm(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case lp:case WL:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+fx(a,0):n,Hb(i)?(r="",t!=null&&(r=t.replace(qb,"$&/")+"/"),Zm(i,e,r,"",function(u){return u})):i!=null&&(Dw(i)&&(i=nR(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(qb,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",Hb(t))for(var o=0;o<t.length;o++){s=t[o];var l=n+fx(s,o);a+=Zm(s,e,r,l,i)}else if(l=rR(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=n+fx(s,o++),a+=Zm(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function nm(t,e,r){if(t==null)return t;var n=[],i=0;return Zm(t,n,"","",function(s){return e.call(r,s,i++)}),n}function sR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Hs={current:null},eg={transition:null},aR={ReactCurrentDispatcher:Hs,ReactCurrentBatchConfig:eg,ReactCurrentOwner:Fw};function gN(){throw Error("act(...) is not supported in production builds of React.")}Dr.Children={map:nm,forEach:function(t,e,r){nm(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return nm(t,function(){e++}),e},toArray:function(t){return nm(t,function(e){return e})||[]},only:function(t){if(!Dw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Dr.Component=Bd;Dr.Fragment=GL;Dr.Profiler=YL;Dr.PureComponent=Rw;Dr.StrictMode=KL;Dr.Suspense=ZL;Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aR;Dr.act=gN;Dr.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=uN({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Fw.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)fN.call(e,l)&&!pN.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:lp,type:t.type,key:i,ref:s,props:n,_owner:a}};Dr.createContext=function(t){return t={$$typeof:QL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:XL,_context:t},t.Consumer=t};Dr.createElement=mN;Dr.createFactory=function(t){var e=mN.bind(null,t);return e.type=t,e};Dr.createRef=function(){return{current:null}};Dr.forwardRef=function(t){return{$$typeof:JL,render:t}};Dr.isValidElement=Dw;Dr.lazy=function(t){return{$$typeof:tR,_payload:{_status:-1,_result:t},_init:sR}};Dr.memo=function(t,e){return{$$typeof:eR,type:t,compare:e===void 0?null:e}};Dr.startTransition=function(t){var e=eg.transition;eg.transition={};try{t()}finally{eg.transition=e}};Dr.unstable_act=gN;Dr.useCallback=function(t,e){return Hs.current.useCallback(t,e)};Dr.useContext=function(t){return Hs.current.useContext(t)};Dr.useDebugValue=function(){};Dr.useDeferredValue=function(t){return Hs.current.useDeferredValue(t)};Dr.useEffect=function(t,e){return Hs.current.useEffect(t,e)};Dr.useId=function(){return Hs.current.useId()};Dr.useImperativeHandle=function(t,e,r){return Hs.current.useImperativeHandle(t,e,r)};Dr.useInsertionEffect=function(t,e){return Hs.current.useInsertionEffect(t,e)};Dr.useLayoutEffect=function(t,e){return Hs.current.useLayoutEffect(t,e)};Dr.useMemo=function(t,e){return Hs.current.useMemo(t,e)};Dr.useReducer=function(t,e,r){return Hs.current.useReducer(t,e,r)};Dr.useRef=function(t){return Hs.current.useRef(t)};Dr.useState=function(t){return Hs.current.useState(t)};Dr.useSyncExternalStore=function(t,e,r){return Hs.current.useSyncExternalStore(t,e,r)};Dr.useTransition=function(){return Hs.current.useTransition()};Dr.version="18.3.1";lN.exports=Dr;var we=lN.exports;const Sc=$L(we);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oR=we,lR=Symbol.for("react.element"),cR=Symbol.for("react.fragment"),uR=Object.prototype.hasOwnProperty,hR=oR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dR={key:!0,ref:!0,__self:!0,__source:!0};function xN(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)uR.call(e,n)&&!dR.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:lR,type:t,key:s,ref:a,props:i,_owner:hR.current}}X1.Fragment=cR;X1.jsx=xN;X1.jsxs=xN;oN.exports=X1;var c=oN.exports,Hy={},yN={exports:{}},Pa={},vN={exports:{}},wN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(he,_e){var Ue=he.length;he.push(_e);e:for(;0<Ue;){var Ie=Ue-1>>>1,P=he[Ie];if(0<i(P,_e))he[Ie]=_e,he[Ue]=P,Ue=Ie;else break e}}function r(he){return he.length===0?null:he[0]}function n(he){if(he.length===0)return null;var _e=he[0],Ue=he.pop();if(Ue!==_e){he[0]=Ue;e:for(var Ie=0,P=he.length,O=P>>>1;Ie<O;){var B=2*(Ie+1)-1,z=he[B],Z=B+1,de=he[Z];if(0>i(z,Ue))Z<P&&0>i(de,z)?(he[Ie]=de,he[Z]=Ue,Ie=Z):(he[Ie]=z,he[B]=Ue,Ie=B);else if(Z<P&&0>i(de,Ue))he[Ie]=de,he[Z]=Ue,Ie=Z;else break e}}return _e}function i(he,_e){var Ue=he.sortIndex-_e.sortIndex;return Ue!==0?Ue:he.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],h=1,f=null,p=3,d=!1,v=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(he){for(var _e=r(u);_e!==null;){if(_e.callback===null)n(u);else if(_e.startTime<=he)n(u),_e.sortIndex=_e.expirationTime,e(l,_e);else break;_e=r(u)}}function j(he){if(y=!1,C(he),!v)if(r(l)!==null)v=!0,ve(q);else{var _e=r(u);_e!==null&&ye(j,_e.startTime-he)}}function q(he,_e){v=!1,y&&(y=!1,w(k),k=-1),d=!0;var Ue=p;try{for(C(_e),f=r(l);f!==null&&(!(f.expirationTime>_e)||he&&!N());){var Ie=f.callback;if(typeof Ie=="function"){f.callback=null,p=f.priorityLevel;var P=Ie(f.expirationTime<=_e);_e=t.unstable_now(),typeof P=="function"?f.callback=P:f===r(l)&&n(l),C(_e)}else n(l);f=r(l)}if(f!==null)var O=!0;else{var B=r(u);B!==null&&ye(j,B.startTime-_e),O=!1}return O}finally{f=null,p=Ue,d=!1}}var G=!1,E=null,k=-1,A=5,D=-1;function N(){return!(t.unstable_now()-D<A)}function R(){if(E!==null){var he=t.unstable_now();D=he;var _e=!0;try{_e=E(!0,he)}finally{_e?L():(G=!1,E=null)}}else G=!1}var L;if(typeof S=="function")L=function(){S(R)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ge=se.port2;se.port1.onmessage=R,L=function(){ge.postMessage(null)}}else L=function(){_(R,0)};function ve(he){E=he,G||(G=!0,L())}function ye(he,_e){k=_(function(){he(t.unstable_now())},_e)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(he){he.callback=null},t.unstable_continueExecution=function(){v||d||(v=!0,ve(q))},t.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<he?Math.floor(1e3/he):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(he){switch(p){case 1:case 2:case 3:var _e=3;break;default:_e=p}var Ue=p;p=_e;try{return he()}finally{p=Ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(he,_e){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var Ue=p;p=he;try{return _e()}finally{p=Ue}},t.unstable_scheduleCallback=function(he,_e,Ue){var Ie=t.unstable_now();switch(typeof Ue=="object"&&Ue!==null?(Ue=Ue.delay,Ue=typeof Ue=="number"&&0<Ue?Ie+Ue:Ie):Ue=Ie,he){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=Ue+P,he={id:h++,callback:_e,priorityLevel:he,startTime:Ue,expirationTime:P,sortIndex:-1},Ue>Ie?(he.sortIndex=Ue,e(u,he),r(l)===null&&he===r(u)&&(y?(w(k),k=-1):y=!0,ye(j,Ue-Ie))):(he.sortIndex=P,e(l,he),v||d||(v=!0,ve(q))),he},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(he){var _e=p;return function(){var Ue=p;p=_e;try{return he.apply(this,arguments)}finally{p=Ue}}}})(wN);vN.exports=wN;var fR=vN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pR=we,Ca=fR;function vt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _N=new Set,b0={};function th(t,e){Sd(t,e),Sd(t+"Capture",e)}function Sd(t,e){for(b0[t]=e,t=0;t<e.length;t++)_N.add(e[t])}var Tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qy=Object.prototype.hasOwnProperty,mR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$b={},Wb={};function gR(t){return qy.call(Wb,t)?!0:qy.call($b,t)?!1:mR.test(t)?Wb[t]=!0:($b[t]=!0,!1)}function xR(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yR(t,e,r,n){if(e===null||typeof e>"u"||xR(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qs(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var cs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cs[t]=new qs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cs[e]=new qs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cs[t]=new qs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cs[t]=new qs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cs[t]=new qs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cs[t]=new qs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cs[t]=new qs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cs[t]=new qs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cs[t]=new qs(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mw=/[\-:]([a-z])/g;function Ow(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mw,Ow);cs[e]=new qs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mw,Ow);cs[e]=new qs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mw,Ow);cs[e]=new qs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cs[t]=new qs(t,1,!1,t.toLowerCase(),null,!1,!1)});cs.xlinkHref=new qs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cs[t]=new qs(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bw(t,e,r,n){var i=cs.hasOwnProperty(e)?cs[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yR(e,r,i,n)&&(r=null),n||i===null?gR(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Bl=pR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,im=Symbol.for("react.element"),Dh=Symbol.for("react.portal"),Mh=Symbol.for("react.fragment"),Uw=Symbol.for("react.strict_mode"),$y=Symbol.for("react.profiler"),bN=Symbol.for("react.provider"),SN=Symbol.for("react.context"),Vw=Symbol.for("react.forward_ref"),Wy=Symbol.for("react.suspense"),Gy=Symbol.for("react.suspense_list"),zw=Symbol.for("react.memo"),dc=Symbol.for("react.lazy"),AN=Symbol.for("react.offscreen"),Gb=Symbol.iterator;function Sf(t){return t===null||typeof t!="object"?null:(t=Gb&&t[Gb]||t["@@iterator"],typeof t=="function"?t:null)}var Xn=Object.assign,px;function Mf(t){if(px===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);px=e&&e[1]||""}return`
`+px+t}var mx=!1;function gx(t,e){if(!t||mx)return"";mx=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{mx=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Mf(t):""}function vR(t){switch(t.tag){case 5:return Mf(t.type);case 16:return Mf("Lazy");case 13:return Mf("Suspense");case 19:return Mf("SuspenseList");case 0:case 2:case 15:return t=gx(t.type,!1),t;case 11:return t=gx(t.type.render,!1),t;case 1:return t=gx(t.type,!0),t;default:return""}}function Ky(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mh:return"Fragment";case Dh:return"Portal";case $y:return"Profiler";case Uw:return"StrictMode";case Wy:return"Suspense";case Gy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case SN:return(t.displayName||"Context")+".Consumer";case bN:return(t._context.displayName||"Context")+".Provider";case Vw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zw:return e=t.displayName||null,e!==null?e:Ky(t.type)||"Memo";case dc:e=t._payload,t=t._init;try{return Ky(t(e))}catch{}}return null}function wR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ky(e);case 8:return e===Uw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function EN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _R(t){var e=EN(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sm(t){t._valueTracker||(t._valueTracker=_R(t))}function NN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=EN(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ig(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yy(t,e){var r=e.checked;return Xn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Kb(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Gc(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TN(t,e){e=e.checked,e!=null&&Bw(t,"checked",e,!1)}function Xy(t,e){TN(t,e);var r=Gc(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qy(t,e.type,r):e.hasOwnProperty("defaultValue")&&Qy(t,e.type,Gc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Yb(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Qy(t,e,r){(e!=="number"||Ig(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Of=Array.isArray;function ed(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Gc(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Jy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(vt(91));return Xn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xb(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(vt(92));if(Of(r)){if(1<r.length)throw Error(vt(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Gc(r)}}function kN(t,e){var r=Gc(e.value),n=Gc(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Qb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function CN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?CN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var am,IN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(am=am||document.createElement("div"),am.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=am.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function S0(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Wf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bR=["Webkit","ms","Moz","O"];Object.keys(Wf).forEach(function(t){bR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wf[e]=Wf[t]})});function PN(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Wf.hasOwnProperty(t)&&Wf[t]?(""+e).trim():e+"px"}function LN(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=PN(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var SR=Xn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ev(t,e){if(e){if(SR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(vt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(vt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(vt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(vt(62))}}function tv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rv=null;function Hw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nv=null,td=null,rd=null;function Jb(t){if(t=hp(t)){if(typeof nv!="function")throw Error(vt(280));var e=t.stateNode;e&&(e=t2(e),nv(t.stateNode,t.type,e))}}function RN(t){td?rd?rd.push(t):rd=[t]:td=t}function jN(){if(td){var t=td,e=rd;if(rd=td=null,Jb(t),e)for(t=0;t<e.length;t++)Jb(e[t])}}function FN(t,e){return t(e)}function DN(){}var xx=!1;function MN(t,e,r){if(xx)return t(e,r);xx=!0;try{return FN(t,e,r)}finally{xx=!1,(td!==null||rd!==null)&&(DN(),jN())}}function A0(t,e){var r=t.stateNode;if(r===null)return null;var n=t2(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(vt(231,e,typeof r));return r}var iv=!1;if(Tl)try{var Af={};Object.defineProperty(Af,"passive",{get:function(){iv=!0}}),window.addEventListener("test",Af,Af),window.removeEventListener("test",Af,Af)}catch{iv=!1}function AR(t,e,r,n,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var Gf=!1,Pg=null,Lg=!1,sv=null,ER={onError:function(t){Gf=!0,Pg=t}};function NR(t,e,r,n,i,s,a,o,l){Gf=!1,Pg=null,AR.apply(ER,arguments)}function TR(t,e,r,n,i,s,a,o,l){if(NR.apply(this,arguments),Gf){if(Gf){var u=Pg;Gf=!1,Pg=null}else throw Error(vt(198));Lg||(Lg=!0,sv=u)}}function rh(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function ON(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zb(t){if(rh(t)!==t)throw Error(vt(188))}function kR(t){var e=t.alternate;if(!e){if(e=rh(t),e===null)throw Error(vt(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Zb(i),t;if(s===n)return Zb(i),e;s=s.sibling}throw Error(vt(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(vt(189))}}if(r.alternate!==n)throw Error(vt(190))}if(r.tag!==3)throw Error(vt(188));return r.stateNode.current===r?t:e}function BN(t){return t=kR(t),t!==null?UN(t):null}function UN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=UN(t);if(e!==null)return e;t=t.sibling}return null}var VN=Ca.unstable_scheduleCallback,e4=Ca.unstable_cancelCallback,CR=Ca.unstable_shouldYield,IR=Ca.unstable_requestPaint,wi=Ca.unstable_now,PR=Ca.unstable_getCurrentPriorityLevel,qw=Ca.unstable_ImmediatePriority,zN=Ca.unstable_UserBlockingPriority,Rg=Ca.unstable_NormalPriority,LR=Ca.unstable_LowPriority,HN=Ca.unstable_IdlePriority,Q1=null,$o=null;function RR(t){if($o&&typeof $o.onCommitFiberRoot=="function")try{$o.onCommitFiberRoot(Q1,t,void 0,(t.current.flags&128)===128)}catch{}}var _o=Math.clz32?Math.clz32:DR,jR=Math.log,FR=Math.LN2;function DR(t){return t>>>=0,t===0?32:31-(jR(t)/FR|0)|0}var om=64,lm=4194304;function Bf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jg(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=Bf(o):(s&=a,s!==0&&(n=Bf(s)))}else a=r&~i,a!==0?n=Bf(a):s!==0&&(n=Bf(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-_o(e),i=1<<r,n|=t[r],e&=~i;return n}function MR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OR(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-_o(s),o=1<<a,l=i[a];l===-1?(!(o&r)||o&n)&&(i[a]=MR(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function av(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qN(){var t=om;return om<<=1,!(om&4194240)&&(om=64),t}function yx(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function cp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_o(e),t[e]=r}function BR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-_o(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function $w(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-_o(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var yn=0;function $N(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WN,Ww,GN,KN,YN,ov=!1,cm=[],Lc=null,Rc=null,jc=null,E0=new Map,N0=new Map,gc=[],UR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function t4(t,e){switch(t){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Rc=null;break;case"mouseover":case"mouseout":jc=null;break;case"pointerover":case"pointerout":E0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":N0.delete(e.pointerId)}}function Ef(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=hp(e),e!==null&&Ww(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function VR(t,e,r,n,i){switch(e){case"focusin":return Lc=Ef(Lc,t,e,r,n,i),!0;case"dragenter":return Rc=Ef(Rc,t,e,r,n,i),!0;case"mouseover":return jc=Ef(jc,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return E0.set(s,Ef(E0.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,N0.set(s,Ef(N0.get(s)||null,t,e,r,n,i)),!0}return!1}function XN(t){var e=ku(t.target);if(e!==null){var r=rh(e);if(r!==null){if(e=r.tag,e===13){if(e=ON(r),e!==null){t.blockedOn=e,YN(t.priority,function(){GN(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=lv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);rv=n,r.target.dispatchEvent(n),rv=null}else return e=hp(r),e!==null&&Ww(e),t.blockedOn=r,!1;e.shift()}return!0}function r4(t,e,r){tg(t)&&r.delete(e)}function zR(){ov=!1,Lc!==null&&tg(Lc)&&(Lc=null),Rc!==null&&tg(Rc)&&(Rc=null),jc!==null&&tg(jc)&&(jc=null),E0.forEach(r4),N0.forEach(r4)}function Nf(t,e){t.blockedOn===e&&(t.blockedOn=null,ov||(ov=!0,Ca.unstable_scheduleCallback(Ca.unstable_NormalPriority,zR)))}function T0(t){function e(i){return Nf(i,t)}if(0<cm.length){Nf(cm[0],t);for(var r=1;r<cm.length;r++){var n=cm[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Lc!==null&&Nf(Lc,t),Rc!==null&&Nf(Rc,t),jc!==null&&Nf(jc,t),E0.forEach(e),N0.forEach(e),r=0;r<gc.length;r++)n=gc[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<gc.length&&(r=gc[0],r.blockedOn===null);)XN(r),r.blockedOn===null&&gc.shift()}var nd=Bl.ReactCurrentBatchConfig,Fg=!0;function HR(t,e,r,n){var i=yn,s=nd.transition;nd.transition=null;try{yn=1,Gw(t,e,r,n)}finally{yn=i,nd.transition=s}}function qR(t,e,r,n){var i=yn,s=nd.transition;nd.transition=null;try{yn=4,Gw(t,e,r,n)}finally{yn=i,nd.transition=s}}function Gw(t,e,r,n){if(Fg){var i=lv(t,e,r,n);if(i===null)kx(t,e,n,Dg,r),t4(t,n);else if(VR(i,t,e,r,n))n.stopPropagation();else if(t4(t,n),e&4&&-1<UR.indexOf(t)){for(;i!==null;){var s=hp(i);if(s!==null&&WN(s),s=lv(t,e,r,n),s===null&&kx(t,e,n,Dg,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else kx(t,e,n,null,r)}}var Dg=null;function lv(t,e,r,n){if(Dg=null,t=Hw(n),t=ku(t),t!==null)if(e=rh(t),e===null)t=null;else if(r=e.tag,r===13){if(t=ON(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Dg=t,null}function QN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PR()){case qw:return 1;case zN:return 4;case Rg:case LR:return 16;case HN:return 536870912;default:return 16}default:return 16}}var Ac=null,Kw=null,rg=null;function JN(){if(rg)return rg;var t,e=Kw,r=e.length,n,i="value"in Ac?Ac.value:Ac.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return rg=i.slice(t,1<n?1-n:void 0)}function ng(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function um(){return!0}function n4(){return!1}function La(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?um:n4,this.isPropagationStopped=n4,this}return Xn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=um)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=um)},persist:function(){},isPersistent:um}),e}var Ud={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yw=La(Ud),up=Xn({},Ud,{view:0,detail:0}),$R=La(up),vx,wx,Tf,J1=Xn({},up,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tf&&(Tf&&t.type==="mousemove"?(vx=t.screenX-Tf.screenX,wx=t.screenY-Tf.screenY):wx=vx=0,Tf=t),vx)},movementY:function(t){return"movementY"in t?t.movementY:wx}}),i4=La(J1),WR=Xn({},J1,{dataTransfer:0}),GR=La(WR),KR=Xn({},up,{relatedTarget:0}),_x=La(KR),YR=Xn({},Ud,{animationName:0,elapsedTime:0,pseudoElement:0}),XR=La(YR),QR=Xn({},Ud,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JR=La(QR),ZR=Xn({},Ud,{data:0}),s4=La(ZR),ej={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rj[t])?!!e[t]:!1}function Xw(){return nj}var ij=Xn({},up,{key:function(t){if(t.key){var e=ej[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ng(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xw,charCode:function(t){return t.type==="keypress"?ng(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ng(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sj=La(ij),aj=Xn({},J1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a4=La(aj),oj=Xn({},up,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xw}),lj=La(oj),cj=Xn({},Ud,{propertyName:0,elapsedTime:0,pseudoElement:0}),uj=La(cj),hj=Xn({},J1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dj=La(hj),fj=[9,13,27,32],Qw=Tl&&"CompositionEvent"in window,Kf=null;Tl&&"documentMode"in document&&(Kf=document.documentMode);var pj=Tl&&"TextEvent"in window&&!Kf,ZN=Tl&&(!Qw||Kf&&8<Kf&&11>=Kf),o4=" ",l4=!1;function eT(t,e){switch(t){case"keyup":return fj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oh=!1;function mj(t,e){switch(t){case"compositionend":return tT(e);case"keypress":return e.which!==32?null:(l4=!0,o4);case"textInput":return t=e.data,t===o4&&l4?null:t;default:return null}}function gj(t,e){if(Oh)return t==="compositionend"||!Qw&&eT(t,e)?(t=JN(),rg=Kw=Ac=null,Oh=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZN&&e.locale!=="ko"?null:e.data;default:return null}}var xj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c4(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xj[t.type]:e==="textarea"}function rT(t,e,r,n){RN(n),e=Mg(e,"onChange"),0<e.length&&(r=new Yw("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Yf=null,k0=null;function yj(t){fT(t,0)}function Z1(t){var e=Vh(t);if(NN(e))return t}function vj(t,e){if(t==="change")return e}var nT=!1;if(Tl){var bx;if(Tl){var Sx="oninput"in document;if(!Sx){var u4=document.createElement("div");u4.setAttribute("oninput","return;"),Sx=typeof u4.oninput=="function"}bx=Sx}else bx=!1;nT=bx&&(!document.documentMode||9<document.documentMode)}function h4(){Yf&&(Yf.detachEvent("onpropertychange",iT),k0=Yf=null)}function iT(t){if(t.propertyName==="value"&&Z1(k0)){var e=[];rT(e,k0,t,Hw(t)),MN(yj,e)}}function wj(t,e,r){t==="focusin"?(h4(),Yf=e,k0=r,Yf.attachEvent("onpropertychange",iT)):t==="focusout"&&h4()}function _j(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Z1(k0)}function bj(t,e){if(t==="click")return Z1(e)}function Sj(t,e){if(t==="input"||t==="change")return Z1(e)}function Aj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ao=typeof Object.is=="function"?Object.is:Aj;function C0(t,e){if(Ao(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!qy.call(e,i)||!Ao(t[i],e[i]))return!1}return!0}function d4(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function f4(t,e){var r=d4(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=d4(r)}}function sT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aT(){for(var t=window,e=Ig();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ig(t.document)}return e}function Jw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ej(t){var e=aT(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&sT(r.ownerDocument.documentElement,r)){if(n!==null&&Jw(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=f4(r,s);var a=f4(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Nj=Tl&&"documentMode"in document&&11>=document.documentMode,Bh=null,cv=null,Xf=null,uv=!1;function p4(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;uv||Bh==null||Bh!==Ig(n)||(n=Bh,"selectionStart"in n&&Jw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xf&&C0(Xf,n)||(Xf=n,n=Mg(cv,"onSelect"),0<n.length&&(e=new Yw("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Bh)))}function hm(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Uh={animationend:hm("Animation","AnimationEnd"),animationiteration:hm("Animation","AnimationIteration"),animationstart:hm("Animation","AnimationStart"),transitionend:hm("Transition","TransitionEnd")},Ax={},oT={};Tl&&(oT=document.createElement("div").style,"AnimationEvent"in window||(delete Uh.animationend.animation,delete Uh.animationiteration.animation,delete Uh.animationstart.animation),"TransitionEvent"in window||delete Uh.transitionend.transition);function e2(t){if(Ax[t])return Ax[t];if(!Uh[t])return t;var e=Uh[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in oT)return Ax[t]=e[r];return t}var lT=e2("animationend"),cT=e2("animationiteration"),uT=e2("animationstart"),hT=e2("transitionend"),dT=new Map,m4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ou(t,e){dT.set(t,e),th(e,[t])}for(var Ex=0;Ex<m4.length;Ex++){var Nx=m4[Ex],Tj=Nx.toLowerCase(),kj=Nx[0].toUpperCase()+Nx.slice(1);ou(Tj,"on"+kj)}ou(lT,"onAnimationEnd");ou(cT,"onAnimationIteration");ou(uT,"onAnimationStart");ou("dblclick","onDoubleClick");ou("focusin","onFocus");ou("focusout","onBlur");ou(hT,"onTransitionEnd");Sd("onMouseEnter",["mouseout","mouseover"]);Sd("onMouseLeave",["mouseout","mouseover"]);Sd("onPointerEnter",["pointerout","pointerover"]);Sd("onPointerLeave",["pointerout","pointerover"]);th("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));th("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));th("onBeforeInput",["compositionend","keypress","textInput","paste"]);th("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));th("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));th("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uf));function g4(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,TR(n,e,void 0,t),t.currentTarget=null}function fT(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;g4(i,o,u),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;g4(i,o,u),s=l}}}if(Lg)throw t=sv,Lg=!1,sv=null,t}function Mn(t,e){var r=e[mv];r===void 0&&(r=e[mv]=new Set);var n=t+"__bubble";r.has(n)||(pT(e,t,2,!1),r.add(n))}function Tx(t,e,r){var n=0;e&&(n|=4),pT(r,t,n,e)}var dm="_reactListening"+Math.random().toString(36).slice(2);function I0(t){if(!t[dm]){t[dm]=!0,_N.forEach(function(r){r!=="selectionchange"&&(Cj.has(r)||Tx(r,!1,t),Tx(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dm]||(e[dm]=!0,Tx("selectionchange",!1,e))}}function pT(t,e,r,n){switch(QN(e)){case 1:var i=HR;break;case 4:i=qR;break;default:i=Gw}r=i.bind(null,e,r,t),i=void 0,!iv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function kx(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=ku(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}MN(function(){var u=s,h=Hw(r),f=[];e:{var p=dT.get(t);if(p!==void 0){var d=Yw,v=t;switch(t){case"keypress":if(ng(r)===0)break e;case"keydown":case"keyup":d=sj;break;case"focusin":v="focus",d=_x;break;case"focusout":v="blur",d=_x;break;case"beforeblur":case"afterblur":d=_x;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=i4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=GR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=lj;break;case lT:case cT:case uT:d=XR;break;case hT:d=uj;break;case"scroll":d=$R;break;case"wheel":d=dj;break;case"copy":case"cut":case"paste":d=JR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=a4}var y=(e&4)!==0,_=!y&&t==="scroll",w=y?p!==null?p+"Capture":null:p;y=[];for(var S=u,C;S!==null;){C=S;var j=C.stateNode;if(C.tag===5&&j!==null&&(C=j,w!==null&&(j=A0(S,w),j!=null&&y.push(P0(S,j,C)))),_)break;S=S.return}0<y.length&&(p=new d(p,v,null,r,h),f.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",p&&r!==rv&&(v=r.relatedTarget||r.fromElement)&&(ku(v)||v[kl]))break e;if((d||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,d?(v=r.relatedTarget||r.toElement,d=u,v=v?ku(v):null,v!==null&&(_=rh(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(d=null,v=u),d!==v)){if(y=i4,j="onMouseLeave",w="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(y=a4,j="onPointerLeave",w="onPointerEnter",S="pointer"),_=d==null?p:Vh(d),C=v==null?p:Vh(v),p=new y(j,S+"leave",d,r,h),p.target=_,p.relatedTarget=C,j=null,ku(h)===u&&(y=new y(w,S+"enter",v,r,h),y.target=C,y.relatedTarget=_,j=y),_=j,d&&v)t:{for(y=d,w=v,S=0,C=y;C;C=gh(C))S++;for(C=0,j=w;j;j=gh(j))C++;for(;0<S-C;)y=gh(y),S--;for(;0<C-S;)w=gh(w),C--;for(;S--;){if(y===w||w!==null&&y===w.alternate)break t;y=gh(y),w=gh(w)}y=null}else y=null;d!==null&&x4(f,p,d,y,!1),v!==null&&_!==null&&x4(f,_,v,y,!0)}}e:{if(p=u?Vh(u):window,d=p.nodeName&&p.nodeName.toLowerCase(),d==="select"||d==="input"&&p.type==="file")var q=vj;else if(c4(p))if(nT)q=Sj;else{q=_j;var G=wj}else(d=p.nodeName)&&d.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(q=bj);if(q&&(q=q(t,u))){rT(f,q,r,h);break e}G&&G(t,p,u),t==="focusout"&&(G=p._wrapperState)&&G.controlled&&p.type==="number"&&Qy(p,"number",p.value)}switch(G=u?Vh(u):window,t){case"focusin":(c4(G)||G.contentEditable==="true")&&(Bh=G,cv=u,Xf=null);break;case"focusout":Xf=cv=Bh=null;break;case"mousedown":uv=!0;break;case"contextmenu":case"mouseup":case"dragend":uv=!1,p4(f,r,h);break;case"selectionchange":if(Nj)break;case"keydown":case"keyup":p4(f,r,h)}var E;if(Qw)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Oh?eT(t,r)&&(k="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(ZN&&r.locale!=="ko"&&(Oh||k!=="onCompositionStart"?k==="onCompositionEnd"&&Oh&&(E=JN()):(Ac=h,Kw="value"in Ac?Ac.value:Ac.textContent,Oh=!0)),G=Mg(u,k),0<G.length&&(k=new s4(k,t,null,r,h),f.push({event:k,listeners:G}),E?k.data=E:(E=tT(r),E!==null&&(k.data=E)))),(E=pj?mj(t,r):gj(t,r))&&(u=Mg(u,"onBeforeInput"),0<u.length&&(h=new s4("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:u}),h.data=E))}fT(f,e)})}function P0(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Mg(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=A0(t,r),s!=null&&n.unshift(P0(t,s,i)),s=A0(t,e),s!=null&&n.push(P0(t,s,i))),t=t.return}return n}function gh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function x4(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,i?(l=A0(r,s),l!=null&&a.unshift(P0(r,l,o))):i||(l=A0(r,s),l!=null&&a.push(P0(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var Ij=/\r\n?/g,Pj=/\u0000|\uFFFD/g;function y4(t){return(typeof t=="string"?t:""+t).replace(Ij,`
`).replace(Pj,"")}function fm(t,e,r){if(e=y4(e),y4(t)!==e&&r)throw Error(vt(425))}function Og(){}var hv=null,dv=null;function fv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pv=typeof setTimeout=="function"?setTimeout:void 0,Lj=typeof clearTimeout=="function"?clearTimeout:void 0,v4=typeof Promise=="function"?Promise:void 0,Rj=typeof queueMicrotask=="function"?queueMicrotask:typeof v4<"u"?function(t){return v4.resolve(null).then(t).catch(jj)}:pv;function jj(t){setTimeout(function(){throw t})}function Cx(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),T0(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);T0(e)}function Fc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function w4(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Vd=Math.random().toString(36).slice(2),zo="__reactFiber$"+Vd,L0="__reactProps$"+Vd,kl="__reactContainer$"+Vd,mv="__reactEvents$"+Vd,Fj="__reactListeners$"+Vd,Dj="__reactHandles$"+Vd;function ku(t){var e=t[zo];if(e)return e;for(var r=t.parentNode;r;){if(e=r[kl]||r[zo]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=w4(t);t!==null;){if(r=t[zo])return r;t=w4(t)}return e}t=r,r=t.parentNode}return null}function hp(t){return t=t[zo]||t[kl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(vt(33))}function t2(t){return t[L0]||null}var gv=[],zh=-1;function lu(t){return{current:t}}function Un(t){0>zh||(t.current=gv[zh],gv[zh]=null,zh--)}function jn(t,e){zh++,gv[zh]=t.current,t.current=e}var Kc={},Is=lu(Kc),Zs=lu(!1),Bu=Kc;function Ad(t,e){var r=t.type.contextTypes;if(!r)return Kc;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ea(t){return t=t.childContextTypes,t!=null}function Bg(){Un(Zs),Un(Is)}function _4(t,e,r){if(Is.current!==Kc)throw Error(vt(168));jn(Is,e),jn(Zs,r)}function mT(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(vt(108,wR(t)||"Unknown",i));return Xn({},r,n)}function Ug(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kc,Bu=Is.current,jn(Is,t),jn(Zs,Zs.current),!0}function b4(t,e,r){var n=t.stateNode;if(!n)throw Error(vt(169));r?(t=mT(t,e,Bu),n.__reactInternalMemoizedMergedChildContext=t,Un(Zs),Un(Is),jn(Is,t)):Un(Zs),jn(Zs,r)}var pl=null,r2=!1,Ix=!1;function gT(t){pl===null?pl=[t]:pl.push(t)}function Mj(t){r2=!0,gT(t)}function cu(){if(!Ix&&pl!==null){Ix=!0;var t=0,e=yn;try{var r=pl;for(yn=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}pl=null,r2=!1}catch(i){throw pl!==null&&(pl=pl.slice(t+1)),VN(qw,cu),i}finally{yn=e,Ix=!1}}return null}var Hh=[],qh=0,Vg=null,zg=0,Wa=[],Ga=0,Uu=null,xl=1,yl="";function vu(t,e){Hh[qh++]=zg,Hh[qh++]=Vg,Vg=t,zg=e}function xT(t,e,r){Wa[Ga++]=xl,Wa[Ga++]=yl,Wa[Ga++]=Uu,Uu=t;var n=xl;t=yl;var i=32-_o(n)-1;n&=~(1<<i),r+=1;var s=32-_o(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,xl=1<<32-_o(e)+i|r<<i|n,yl=s+t}else xl=1<<s|r<<i|n,yl=t}function Zw(t){t.return!==null&&(vu(t,1),xT(t,1,0))}function e5(t){for(;t===Vg;)Vg=Hh[--qh],Hh[qh]=null,zg=Hh[--qh],Hh[qh]=null;for(;t===Uu;)Uu=Wa[--Ga],Wa[Ga]=null,yl=Wa[--Ga],Wa[Ga]=null,xl=Wa[--Ga],Wa[Ga]=null}var Na=null,Sa=null,Hn=!1,mo=null;function yT(t,e){var r=Ka(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function S4(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Na=t,Sa=Fc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Na=t,Sa=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Uu!==null?{id:xl,overflow:yl}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ka(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Na=t,Sa=null,!0):!1;default:return!1}}function xv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yv(t){if(Hn){var e=Sa;if(e){var r=e;if(!S4(t,e)){if(xv(t))throw Error(vt(418));e=Fc(r.nextSibling);var n=Na;e&&S4(t,e)?yT(n,r):(t.flags=t.flags&-4097|2,Hn=!1,Na=t)}}else{if(xv(t))throw Error(vt(418));t.flags=t.flags&-4097|2,Hn=!1,Na=t}}}function A4(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Na=t}function pm(t){if(t!==Na)return!1;if(!Hn)return A4(t),Hn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fv(t.type,t.memoizedProps)),e&&(e=Sa)){if(xv(t))throw vT(),Error(vt(418));for(;e;)yT(t,e),e=Fc(e.nextSibling)}if(A4(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(vt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Sa=Fc(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Sa=null}}else Sa=Na?Fc(t.stateNode.nextSibling):null;return!0}function vT(){for(var t=Sa;t;)t=Fc(t.nextSibling)}function Ed(){Sa=Na=null,Hn=!1}function t5(t){mo===null?mo=[t]:mo.push(t)}var Oj=Bl.ReactCurrentBatchConfig;function kf(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(vt(309));var n=r.stateNode}if(!n)throw Error(vt(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(vt(284));if(!r._owner)throw Error(vt(290,t))}return t}function mm(t,e){throw t=Object.prototype.toString.call(e),Error(vt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function E4(t){var e=t._init;return e(t._payload)}function wT(t){function e(w,S){if(t){var C=w.deletions;C===null?(w.deletions=[S],w.flags|=16):C.push(S)}}function r(w,S){if(!t)return null;for(;S!==null;)e(w,S),S=S.sibling;return null}function n(w,S){for(w=new Map;S!==null;)S.key!==null?w.set(S.key,S):w.set(S.index,S),S=S.sibling;return w}function i(w,S){return w=Bc(w,S),w.index=0,w.sibling=null,w}function s(w,S,C){return w.index=C,t?(C=w.alternate,C!==null?(C=C.index,C<S?(w.flags|=2,S):C):(w.flags|=2,S)):(w.flags|=1048576,S)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,S,C,j){return S===null||S.tag!==6?(S=Mx(C,w.mode,j),S.return=w,S):(S=i(S,C),S.return=w,S)}function l(w,S,C,j){var q=C.type;return q===Mh?h(w,S,C.props.children,j,C.key):S!==null&&(S.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===dc&&E4(q)===S.type)?(j=i(S,C.props),j.ref=kf(w,S,C),j.return=w,j):(j=ug(C.type,C.key,C.props,null,w.mode,j),j.ref=kf(w,S,C),j.return=w,j)}function u(w,S,C,j){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=Ox(C,w.mode,j),S.return=w,S):(S=i(S,C.children||[]),S.return=w,S)}function h(w,S,C,j,q){return S===null||S.tag!==7?(S=ju(C,w.mode,j,q),S.return=w,S):(S=i(S,C),S.return=w,S)}function f(w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Mx(""+S,w.mode,C),S.return=w,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case im:return C=ug(S.type,S.key,S.props,null,w.mode,C),C.ref=kf(w,null,S),C.return=w,C;case Dh:return S=Ox(S,w.mode,C),S.return=w,S;case dc:var j=S._init;return f(w,j(S._payload),C)}if(Of(S)||Sf(S))return S=ju(S,w.mode,C,null),S.return=w,S;mm(w,S)}return null}function p(w,S,C,j){var q=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return q!==null?null:o(w,S,""+C,j);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case im:return C.key===q?l(w,S,C,j):null;case Dh:return C.key===q?u(w,S,C,j):null;case dc:return q=C._init,p(w,S,q(C._payload),j)}if(Of(C)||Sf(C))return q!==null?null:h(w,S,C,j,null);mm(w,C)}return null}function d(w,S,C,j,q){if(typeof j=="string"&&j!==""||typeof j=="number")return w=w.get(C)||null,o(S,w,""+j,q);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case im:return w=w.get(j.key===null?C:j.key)||null,l(S,w,j,q);case Dh:return w=w.get(j.key===null?C:j.key)||null,u(S,w,j,q);case dc:var G=j._init;return d(w,S,C,G(j._payload),q)}if(Of(j)||Sf(j))return w=w.get(C)||null,h(S,w,j,q,null);mm(S,j)}return null}function v(w,S,C,j){for(var q=null,G=null,E=S,k=S=0,A=null;E!==null&&k<C.length;k++){E.index>k?(A=E,E=null):A=E.sibling;var D=p(w,E,C[k],j);if(D===null){E===null&&(E=A);break}t&&E&&D.alternate===null&&e(w,E),S=s(D,S,k),G===null?q=D:G.sibling=D,G=D,E=A}if(k===C.length)return r(w,E),Hn&&vu(w,k),q;if(E===null){for(;k<C.length;k++)E=f(w,C[k],j),E!==null&&(S=s(E,S,k),G===null?q=E:G.sibling=E,G=E);return Hn&&vu(w,k),q}for(E=n(w,E);k<C.length;k++)A=d(E,w,k,C[k],j),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?k:A.key),S=s(A,S,k),G===null?q=A:G.sibling=A,G=A);return t&&E.forEach(function(N){return e(w,N)}),Hn&&vu(w,k),q}function y(w,S,C,j){var q=Sf(C);if(typeof q!="function")throw Error(vt(150));if(C=q.call(C),C==null)throw Error(vt(151));for(var G=q=null,E=S,k=S=0,A=null,D=C.next();E!==null&&!D.done;k++,D=C.next()){E.index>k?(A=E,E=null):A=E.sibling;var N=p(w,E,D.value,j);if(N===null){E===null&&(E=A);break}t&&E&&N.alternate===null&&e(w,E),S=s(N,S,k),G===null?q=N:G.sibling=N,G=N,E=A}if(D.done)return r(w,E),Hn&&vu(w,k),q;if(E===null){for(;!D.done;k++,D=C.next())D=f(w,D.value,j),D!==null&&(S=s(D,S,k),G===null?q=D:G.sibling=D,G=D);return Hn&&vu(w,k),q}for(E=n(w,E);!D.done;k++,D=C.next())D=d(E,w,k,D.value,j),D!==null&&(t&&D.alternate!==null&&E.delete(D.key===null?k:D.key),S=s(D,S,k),G===null?q=D:G.sibling=D,G=D);return t&&E.forEach(function(R){return e(w,R)}),Hn&&vu(w,k),q}function _(w,S,C,j){if(typeof C=="object"&&C!==null&&C.type===Mh&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case im:e:{for(var q=C.key,G=S;G!==null;){if(G.key===q){if(q=C.type,q===Mh){if(G.tag===7){r(w,G.sibling),S=i(G,C.props.children),S.return=w,w=S;break e}}else if(G.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===dc&&E4(q)===G.type){r(w,G.sibling),S=i(G,C.props),S.ref=kf(w,G,C),S.return=w,w=S;break e}r(w,G);break}else e(w,G);G=G.sibling}C.type===Mh?(S=ju(C.props.children,w.mode,j,C.key),S.return=w,w=S):(j=ug(C.type,C.key,C.props,null,w.mode,j),j.ref=kf(w,S,C),j.return=w,w=j)}return a(w);case Dh:e:{for(G=C.key;S!==null;){if(S.key===G)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){r(w,S.sibling),S=i(S,C.children||[]),S.return=w,w=S;break e}else{r(w,S);break}else e(w,S);S=S.sibling}S=Ox(C,w.mode,j),S.return=w,w=S}return a(w);case dc:return G=C._init,_(w,S,G(C._payload),j)}if(Of(C))return v(w,S,C,j);if(Sf(C))return y(w,S,C,j);mm(w,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(r(w,S.sibling),S=i(S,C),S.return=w,w=S):(r(w,S),S=Mx(C,w.mode,j),S.return=w,w=S),a(w)):r(w,S)}return _}var Nd=wT(!0),_T=wT(!1),Hg=lu(null),qg=null,$h=null,r5=null;function n5(){r5=$h=qg=null}function i5(t){var e=Hg.current;Un(Hg),t._currentValue=e}function vv(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function id(t,e){qg=t,r5=$h=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Js=!0),t.firstContext=null)}function Qa(t){var e=t._currentValue;if(r5!==t)if(t={context:t,memoizedValue:e,next:null},$h===null){if(qg===null)throw Error(vt(308));$h=t,qg.dependencies={lanes:0,firstContext:t}}else $h=$h.next=t;return e}var Cu=null;function s5(t){Cu===null?Cu=[t]:Cu.push(t)}function bT(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,s5(e)):(r.next=i.next,i.next=r),e.interleaved=r,Cl(t,n)}function Cl(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var fc=!1;function a5(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ST(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dc(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Jr&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Cl(t,r)}return i=n.interleaved,i===null?(e.next=e,s5(n)):(e.next=i.next,i.next=e),n.interleaved=e,Cl(t,r)}function ig(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,$w(t,r)}}function N4(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function $g(t,e,r,n){var i=t.updateQueue;fc=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;a=0,h=u=l=null,o=s;do{var p=o.lane,d=o.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,y=o;switch(p=e,d=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(d,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(d,f,p):v,p==null)break e;f=Xn({},f,p);break e;case 2:fc=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else d={eventTime:d,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=d,l=f):h=h.next=d,a|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);zu|=a,t.lanes=a,t.memoizedState=f}}function T4(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(vt(191,i));i.call(n)}}}var dp={},Wo=lu(dp),R0=lu(dp),j0=lu(dp);function Iu(t){if(t===dp)throw Error(vt(174));return t}function o5(t,e){switch(jn(j0,e),jn(R0,t),jn(Wo,dp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zy(e,t)}Un(Wo),jn(Wo,e)}function Td(){Un(Wo),Un(R0),Un(j0)}function AT(t){Iu(j0.current);var e=Iu(Wo.current),r=Zy(e,t.type);e!==r&&(jn(R0,t),jn(Wo,r))}function l5(t){R0.current===t&&(Un(Wo),Un(R0))}var Gn=lu(0);function Wg(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Px=[];function c5(){for(var t=0;t<Px.length;t++)Px[t]._workInProgressVersionPrimary=null;Px.length=0}var sg=Bl.ReactCurrentDispatcher,Lx=Bl.ReactCurrentBatchConfig,Vu=0,Yn=null,Oi=null,Hi=null,Gg=!1,Qf=!1,F0=0,Bj=0;function ys(){throw Error(vt(321))}function u5(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ao(t[r],e[r]))return!1;return!0}function h5(t,e,r,n,i,s){if(Vu=s,Yn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sg.current=t===null||t.memoizedState===null?Hj:qj,t=r(n,i),Qf){s=0;do{if(Qf=!1,F0=0,25<=s)throw Error(vt(301));s+=1,Hi=Oi=null,e.updateQueue=null,sg.current=$j,t=r(n,i)}while(Qf)}if(sg.current=Kg,e=Oi!==null&&Oi.next!==null,Vu=0,Hi=Oi=Yn=null,Gg=!1,e)throw Error(vt(300));return t}function d5(){var t=F0!==0;return F0=0,t}function Bo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hi===null?Yn.memoizedState=Hi=t:Hi=Hi.next=t,Hi}function Ja(){if(Oi===null){var t=Yn.alternate;t=t!==null?t.memoizedState:null}else t=Oi.next;var e=Hi===null?Yn.memoizedState:Hi.next;if(e!==null)Hi=e,Oi=t;else{if(t===null)throw Error(vt(310));Oi=t,t={memoizedState:Oi.memoizedState,baseState:Oi.baseState,baseQueue:Oi.baseQueue,queue:Oi.queue,next:null},Hi===null?Yn.memoizedState=Hi=t:Hi=Hi.next=t}return Hi}function D0(t,e){return typeof e=="function"?e(t):e}function Rx(t){var e=Ja(),r=e.queue;if(r===null)throw Error(vt(311));r.lastRenderedReducer=t;var n=Oi,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,u=s;do{var h=u.lane;if((Vu&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,a=n):l=l.next=f,Yn.lanes|=h,zu|=h}u=u.next}while(u!==null&&u!==s);l===null?a=n:l.next=o,Ao(n,e.memoizedState)||(Js=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Yn.lanes|=s,zu|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function jx(t){var e=Ja(),r=e.queue;if(r===null)throw Error(vt(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Ao(s,e.memoizedState)||(Js=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function ET(){}function NT(t,e){var r=Yn,n=Ja(),i=e(),s=!Ao(n.memoizedState,i);if(s&&(n.memoizedState=i,Js=!0),n=n.queue,f5(CT.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Hi!==null&&Hi.memoizedState.tag&1){if(r.flags|=2048,M0(9,kT.bind(null,r,n,i,e),void 0,null),Yi===null)throw Error(vt(349));Vu&30||TT(r,e,i)}return i}function TT(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function kT(t,e,r,n){e.value=r,e.getSnapshot=n,IT(e)&&PT(t)}function CT(t,e,r){return r(function(){IT(e)&&PT(t)})}function IT(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ao(t,r)}catch{return!0}}function PT(t){var e=Cl(t,1);e!==null&&bo(e,t,1,-1)}function k4(t){var e=Bo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:D0,lastRenderedState:t},e.queue=t,t=t.dispatch=zj.bind(null,Yn,t),[e.memoizedState,t]}function M0(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function LT(){return Ja().memoizedState}function ag(t,e,r,n){var i=Bo();Yn.flags|=t,i.memoizedState=M0(1|e,r,void 0,n===void 0?null:n)}function n2(t,e,r,n){var i=Ja();n=n===void 0?null:n;var s=void 0;if(Oi!==null){var a=Oi.memoizedState;if(s=a.destroy,n!==null&&u5(n,a.deps)){i.memoizedState=M0(e,r,s,n);return}}Yn.flags|=t,i.memoizedState=M0(1|e,r,s,n)}function C4(t,e){return ag(8390656,8,t,e)}function f5(t,e){return n2(2048,8,t,e)}function RT(t,e){return n2(4,2,t,e)}function jT(t,e){return n2(4,4,t,e)}function FT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DT(t,e,r){return r=r!=null?r.concat([t]):null,n2(4,4,FT.bind(null,e,t),r)}function p5(){}function MT(t,e){var r=Ja();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&u5(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function OT(t,e){var r=Ja();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&u5(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function BT(t,e,r){return Vu&21?(Ao(r,e)||(r=qN(),Yn.lanes|=r,zu|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Js=!0),t.memoizedState=r)}function Uj(t,e){var r=yn;yn=r!==0&&4>r?r:4,t(!0);var n=Lx.transition;Lx.transition={};try{t(!1),e()}finally{yn=r,Lx.transition=n}}function UT(){return Ja().memoizedState}function Vj(t,e,r){var n=Oc(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},VT(t))zT(e,r);else if(r=bT(t,e,r,n),r!==null){var i=Vs();bo(r,t,n,i),HT(r,e,n)}}function zj(t,e,r){var n=Oc(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(VT(t))zT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,Ao(o,a)){var l=e.interleaved;l===null?(i.next=i,s5(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=bT(t,e,i,n),r!==null&&(i=Vs(),bo(r,t,n,i),HT(r,e,n))}}function VT(t){var e=t.alternate;return t===Yn||e!==null&&e===Yn}function zT(t,e){Qf=Gg=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function HT(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,$w(t,r)}}var Kg={readContext:Qa,useCallback:ys,useContext:ys,useEffect:ys,useImperativeHandle:ys,useInsertionEffect:ys,useLayoutEffect:ys,useMemo:ys,useReducer:ys,useRef:ys,useState:ys,useDebugValue:ys,useDeferredValue:ys,useTransition:ys,useMutableSource:ys,useSyncExternalStore:ys,useId:ys,unstable_isNewReconciler:!1},Hj={readContext:Qa,useCallback:function(t,e){return Bo().memoizedState=[t,e===void 0?null:e],t},useContext:Qa,useEffect:C4,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ag(4194308,4,FT.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ag(4194308,4,t,e)},useInsertionEffect:function(t,e){return ag(4,2,t,e)},useMemo:function(t,e){var r=Bo();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Bo();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Vj.bind(null,Yn,t),[n.memoizedState,t]},useRef:function(t){var e=Bo();return t={current:t},e.memoizedState=t},useState:k4,useDebugValue:p5,useDeferredValue:function(t){return Bo().memoizedState=t},useTransition:function(){var t=k4(!1),e=t[0];return t=Uj.bind(null,t[1]),Bo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Yn,i=Bo();if(Hn){if(r===void 0)throw Error(vt(407));r=r()}else{if(r=e(),Yi===null)throw Error(vt(349));Vu&30||TT(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,C4(CT.bind(null,n,s,t),[t]),n.flags|=2048,M0(9,kT.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Bo(),e=Yi.identifierPrefix;if(Hn){var r=yl,n=xl;r=(n&~(1<<32-_o(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=F0++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Bj++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qj={readContext:Qa,useCallback:MT,useContext:Qa,useEffect:f5,useImperativeHandle:DT,useInsertionEffect:RT,useLayoutEffect:jT,useMemo:OT,useReducer:Rx,useRef:LT,useState:function(){return Rx(D0)},useDebugValue:p5,useDeferredValue:function(t){var e=Ja();return BT(e,Oi.memoizedState,t)},useTransition:function(){var t=Rx(D0)[0],e=Ja().memoizedState;return[t,e]},useMutableSource:ET,useSyncExternalStore:NT,useId:UT,unstable_isNewReconciler:!1},$j={readContext:Qa,useCallback:MT,useContext:Qa,useEffect:f5,useImperativeHandle:DT,useInsertionEffect:RT,useLayoutEffect:jT,useMemo:OT,useReducer:jx,useRef:LT,useState:function(){return jx(D0)},useDebugValue:p5,useDeferredValue:function(t){var e=Ja();return Oi===null?e.memoizedState=t:BT(e,Oi.memoizedState,t)},useTransition:function(){var t=jx(D0)[0],e=Ja().memoizedState;return[t,e]},useMutableSource:ET,useSyncExternalStore:NT,useId:UT,unstable_isNewReconciler:!1};function ho(t,e){if(t&&t.defaultProps){e=Xn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function wv(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Xn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var i2={isMounted:function(t){return(t=t._reactInternals)?rh(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Vs(),i=Oc(t),s=Sl(n,i);s.payload=e,r!=null&&(s.callback=r),e=Dc(t,s,i),e!==null&&(bo(e,t,i,n),ig(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Vs(),i=Oc(t),s=Sl(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Dc(t,s,i),e!==null&&(bo(e,t,i,n),ig(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Vs(),n=Oc(t),i=Sl(r,n);i.tag=2,e!=null&&(i.callback=e),e=Dc(t,i,n),e!==null&&(bo(e,t,n,r),ig(e,t,n))}};function I4(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!C0(r,n)||!C0(i,s):!0}function qT(t,e,r){var n=!1,i=Kc,s=e.contextType;return typeof s=="object"&&s!==null?s=Qa(s):(i=ea(e)?Bu:Is.current,n=e.contextTypes,s=(n=n!=null)?Ad(t,i):Kc),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=i2,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function P4(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&i2.enqueueReplaceState(e,e.state,null)}function _v(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},a5(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Qa(s):(s=ea(e)?Bu:Is.current,i.context=Ad(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(wv(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&i2.enqueueReplaceState(i,i.state,null),$g(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function kd(t,e){try{var r="",n=e;do r+=vR(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Fx(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function bv(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Wj=typeof WeakMap=="function"?WeakMap:Map;function $T(t,e,r){r=Sl(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Xg||(Xg=!0,Lv=n),bv(t,e)},r}function WT(t,e,r){r=Sl(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){bv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){bv(t,e),typeof n!="function"&&(Mc===null?Mc=new Set([this]):Mc.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function L4(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Wj;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=a7.bind(null,t,e,r),e.then(t,t))}function R4(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function j4(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Sl(-1,1),e.tag=2,Dc(r,e,1))),r.lanes|=1),t)}var Gj=Bl.ReactCurrentOwner,Js=!1;function Ms(t,e,r,n){e.child=t===null?_T(e,null,r,n):Nd(e,t.child,r,n)}function F4(t,e,r,n,i){r=r.render;var s=e.ref;return id(e,i),n=h5(t,e,r,n,s,i),r=d5(),t!==null&&!Js?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Il(t,e,i)):(Hn&&r&&Zw(e),e.flags|=1,Ms(t,e,n,i),e.child)}function D4(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!b5(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,GT(t,e,s,n,i)):(t=ug(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:C0,r(a,n)&&t.ref===e.ref)return Il(t,e,i)}return e.flags|=1,t=Bc(s,n),t.ref=e.ref,t.return=e,e.child=t}function GT(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(C0(s,n)&&t.ref===e.ref)if(Js=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Js=!0);else return e.lanes=t.lanes,Il(t,e,i)}return Sv(t,e,r,n,i)}function KT(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},jn(Gh,ya),ya|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,jn(Gh,ya),ya|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,jn(Gh,ya),ya|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,jn(Gh,ya),ya|=n;return Ms(t,e,i,r),e.child}function YT(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Sv(t,e,r,n,i){var s=ea(r)?Bu:Is.current;return s=Ad(e,s),id(e,i),r=h5(t,e,r,n,s,i),n=d5(),t!==null&&!Js?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Il(t,e,i)):(Hn&&n&&Zw(e),e.flags|=1,Ms(t,e,r,i),e.child)}function M4(t,e,r,n,i){if(ea(r)){var s=!0;Ug(e)}else s=!1;if(id(e,i),e.stateNode===null)og(t,e),qT(e,r,n),_v(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Qa(u):(u=ea(r)?Bu:Is.current,u=Ad(e,u));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&P4(e,a,n,u),fc=!1;var p=e.memoizedState;a.state=p,$g(e,n,a,i),l=e.memoizedState,o!==n||p!==l||Zs.current||fc?(typeof h=="function"&&(wv(e,r,h,n),l=e.memoizedState),(o=fc||I4(e,r,o,n,p,l,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,ST(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:ho(e.type,o),a.props=u,f=e.pendingProps,p=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Qa(l):(l=ea(r)?Bu:Is.current,l=Ad(e,l));var d=r.getDerivedStateFromProps;(h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||p!==l)&&P4(e,a,n,l),fc=!1,p=e.memoizedState,a.state=p,$g(e,n,a,i);var v=e.memoizedState;o!==f||p!==v||Zs.current||fc?(typeof d=="function"&&(wv(e,r,d,n),v=e.memoizedState),(u=fc||I4(e,r,u,n,p,v,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return Av(t,e,r,n,s,i)}function Av(t,e,r,n,i,s){YT(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&b4(e,r,!1),Il(t,e,s);n=e.stateNode,Gj.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Nd(e,t.child,null,s),e.child=Nd(e,null,o,s)):Ms(t,e,o,s),e.memoizedState=n.state,i&&b4(e,r,!0),e.child}function XT(t){var e=t.stateNode;e.pendingContext?_4(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_4(t,e.context,!1),o5(t,e.containerInfo)}function O4(t,e,r,n,i){return Ed(),t5(i),e.flags|=256,Ms(t,e,r,n),e.child}var Ev={dehydrated:null,treeContext:null,retryLane:0};function Nv(t){return{baseLanes:t,cachePool:null,transitions:null}}function QT(t,e,r){var n=e.pendingProps,i=Gn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),jn(Gn,i&1),t===null)return yv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=o2(a,n,0,null),t=ju(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Nv(r),e.memoizedState=Ev,t):m5(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Kj(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Bc(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Bc(o,s):(s=ju(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?Nv(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=Ev,n}return s=t.child,t=s.sibling,n=Bc(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function m5(t,e){return e=o2({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gm(t,e,r,n){return n!==null&&t5(n),Nd(e,t.child,null,r),t=m5(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Kj(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=Fx(Error(vt(422))),gm(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=o2({mode:"visible",children:n.children},i,0,null),s=ju(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Nd(e,t.child,null,a),e.child.memoizedState=Nv(a),e.memoizedState=Ev,s);if(!(e.mode&1))return gm(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(vt(419)),n=Fx(s,n,void 0),gm(t,e,a,n)}if(o=(a&t.childLanes)!==0,Js||o){if(n=Yi,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Cl(t,i),bo(n,t,i,-1))}return _5(),n=Fx(Error(vt(421))),gm(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=o7.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Sa=Fc(i.nextSibling),Na=e,Hn=!0,mo=null,t!==null&&(Wa[Ga++]=xl,Wa[Ga++]=yl,Wa[Ga++]=Uu,xl=t.id,yl=t.overflow,Uu=e),e=m5(e,n.children),e.flags|=4096,e)}function B4(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),vv(t.return,e,r)}function Dx(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function JT(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Ms(t,e,n.children,r),n=Gn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&B4(t,r,e);else if(t.tag===19)B4(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(jn(Gn,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Wg(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Dx(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wg(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Dx(e,!0,r,null,s);break;case"together":Dx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function og(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Il(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),zu|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(vt(153));if(e.child!==null){for(t=e.child,r=Bc(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Bc(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Yj(t,e,r){switch(e.tag){case 3:XT(e),Ed();break;case 5:AT(e);break;case 1:ea(e.type)&&Ug(e);break;case 4:o5(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;jn(Hg,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(jn(Gn,Gn.current&1),e.flags|=128,null):r&e.child.childLanes?QT(t,e,r):(jn(Gn,Gn.current&1),t=Il(t,e,r),t!==null?t.sibling:null);jn(Gn,Gn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return JT(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),jn(Gn,Gn.current),n)break;return null;case 22:case 23:return e.lanes=0,KT(t,e,r)}return Il(t,e,r)}var ZT,Tv,e6,t6;ZT=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Tv=function(){};e6=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Iu(Wo.current);var s=null;switch(r){case"input":i=Yy(t,i),n=Yy(t,n),s=[];break;case"select":i=Xn({},i,{value:void 0}),n=Xn({},n,{value:void 0}),s=[];break;case"textarea":i=Jy(t,i),n=Jy(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Og)}ev(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(b0.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(b0.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Mn("scroll",t),s||o===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};t6=function(t,e,r,n){r!==n&&(e.flags|=4)};function Cf(t,e){if(!Hn)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function vs(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Xj(t,e,r){var n=e.pendingProps;switch(e5(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vs(e),null;case 1:return ea(e.type)&&Bg(),vs(e),null;case 3:return n=e.stateNode,Td(),Un(Zs),Un(Is),c5(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(pm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mo!==null&&(Fv(mo),mo=null))),Tv(t,e),vs(e),null;case 5:l5(e);var i=Iu(j0.current);if(r=e.type,t!==null&&e.stateNode!=null)e6(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(vt(166));return vs(e),null}if(t=Iu(Wo.current),pm(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[zo]=e,n[L0]=s,t=(e.mode&1)!==0,r){case"dialog":Mn("cancel",n),Mn("close",n);break;case"iframe":case"object":case"embed":Mn("load",n);break;case"video":case"audio":for(i=0;i<Uf.length;i++)Mn(Uf[i],n);break;case"source":Mn("error",n);break;case"img":case"image":case"link":Mn("error",n),Mn("load",n);break;case"details":Mn("toggle",n);break;case"input":Kb(n,s),Mn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Mn("invalid",n);break;case"textarea":Xb(n,s),Mn("invalid",n)}ev(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&fm(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&fm(n.textContent,o,t),i=["children",""+o]):b0.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Mn("scroll",n)}switch(r){case"input":sm(n),Yb(n,s,!0);break;case"textarea":sm(n),Qb(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Og)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=CN(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[zo]=e,t[L0]=n,ZT(t,e,!1,!1),e.stateNode=t;e:{switch(a=tv(r,n),r){case"dialog":Mn("cancel",t),Mn("close",t),i=n;break;case"iframe":case"object":case"embed":Mn("load",t),i=n;break;case"video":case"audio":for(i=0;i<Uf.length;i++)Mn(Uf[i],t);i=n;break;case"source":Mn("error",t),i=n;break;case"img":case"image":case"link":Mn("error",t),Mn("load",t),i=n;break;case"details":Mn("toggle",t),i=n;break;case"input":Kb(t,n),i=Yy(t,n),Mn("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Xn({},n,{value:void 0}),Mn("invalid",t);break;case"textarea":Xb(t,n),i=Jy(t,n),Mn("invalid",t);break;default:i=n}ev(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?LN(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&IN(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&S0(t,l):typeof l=="number"&&S0(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(b0.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Mn("scroll",t):l!=null&&Bw(t,s,l,a))}switch(r){case"input":sm(t),Yb(t,n,!1);break;case"textarea":sm(t),Qb(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Gc(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?ed(t,!!n.multiple,s,!1):n.defaultValue!=null&&ed(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Og)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vs(e),null;case 6:if(t&&e.stateNode!=null)t6(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(vt(166));if(r=Iu(j0.current),Iu(Wo.current),pm(e)){if(n=e.stateNode,r=e.memoizedProps,n[zo]=e,(s=n.nodeValue!==r)&&(t=Na,t!==null))switch(t.tag){case 3:fm(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fm(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[zo]=e,e.stateNode=n}return vs(e),null;case 13:if(Un(Gn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Hn&&Sa!==null&&e.mode&1&&!(e.flags&128))vT(),Ed(),e.flags|=98560,s=!1;else if(s=pm(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(vt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(vt(317));s[zo]=e}else Ed(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vs(e),s=!1}else mo!==null&&(Fv(mo),mo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Gn.current&1?Bi===0&&(Bi=3):_5())),e.updateQueue!==null&&(e.flags|=4),vs(e),null);case 4:return Td(),Tv(t,e),t===null&&I0(e.stateNode.containerInfo),vs(e),null;case 10:return i5(e.type._context),vs(e),null;case 17:return ea(e.type)&&Bg(),vs(e),null;case 19:if(Un(Gn),s=e.memoizedState,s===null)return vs(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Cf(s,!1);else{if(Bi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Wg(t),a!==null){for(e.flags|=128,Cf(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return jn(Gn,Gn.current&1|2),e.child}t=t.sibling}s.tail!==null&&wi()>Cd&&(e.flags|=128,n=!0,Cf(s,!1),e.lanes=4194304)}else{if(!n)if(t=Wg(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Cf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Hn)return vs(e),null}else 2*wi()-s.renderingStartTime>Cd&&r!==1073741824&&(e.flags|=128,n=!0,Cf(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wi(),e.sibling=null,r=Gn.current,jn(Gn,n?r&1|2:r&1),e):(vs(e),null);case 22:case 23:return w5(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ya&1073741824&&(vs(e),e.subtreeFlags&6&&(e.flags|=8192)):vs(e),null;case 24:return null;case 25:return null}throw Error(vt(156,e.tag))}function Qj(t,e){switch(e5(e),e.tag){case 1:return ea(e.type)&&Bg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Td(),Un(Zs),Un(Is),c5(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return l5(e),null;case 13:if(Un(Gn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(vt(340));Ed()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Un(Gn),null;case 4:return Td(),null;case 10:return i5(e.type._context),null;case 22:case 23:return w5(),null;case 24:return null;default:return null}}var xm=!1,Ns=!1,Jj=typeof WeakSet=="function"?WeakSet:Set,zt=null;function Wh(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){oi(t,e,n)}else r.current=null}function kv(t,e,r){try{r()}catch(n){oi(t,e,n)}}var U4=!1;function Zj(t,e){if(hv=Fg,t=aT(),Jw(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var d;f!==r||i!==0&&f.nodeType!==3||(o=a+i),f!==s||n!==0&&f.nodeType!==3||(l=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(d=f.firstChild)!==null;)p=f,f=d;for(;;){if(f===t)break t;if(p===r&&++u===i&&(o=a),p===s&&++h===n&&(l=a),(d=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=d}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(dv={focusedElem:t,selectionRange:r},Fg=!1,zt=e;zt!==null;)if(e=zt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,zt=t;else for(;zt!==null;){e=zt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,_=v.memoizedState,w=e.stateNode,S=w.getSnapshotBeforeUpdate(e.elementType===e.type?y:ho(e.type,y),_);w.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(vt(163))}}catch(j){oi(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,zt=t;break}zt=e.return}return v=U4,U4=!1,v}function Jf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&kv(e,r,s)}i=i.next}while(i!==n)}}function s2(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Cv(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function r6(t){var e=t.alternate;e!==null&&(t.alternate=null,r6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zo],delete e[L0],delete e[mv],delete e[Fj],delete e[Dj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function n6(t){return t.tag===5||t.tag===3||t.tag===4}function V4(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||n6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Iv(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Og));else if(n!==4&&(t=t.child,t!==null))for(Iv(t,e,r),t=t.sibling;t!==null;)Iv(t,e,r),t=t.sibling}function Pv(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Pv(t,e,r),t=t.sibling;t!==null;)Pv(t,e,r),t=t.sibling}var ts=null,fo=!1;function oc(t,e,r){for(r=r.child;r!==null;)i6(t,e,r),r=r.sibling}function i6(t,e,r){if($o&&typeof $o.onCommitFiberUnmount=="function")try{$o.onCommitFiberUnmount(Q1,r)}catch{}switch(r.tag){case 5:Ns||Wh(r,e);case 6:var n=ts,i=fo;ts=null,oc(t,e,r),ts=n,fo=i,ts!==null&&(fo?(t=ts,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ts.removeChild(r.stateNode));break;case 18:ts!==null&&(fo?(t=ts,r=r.stateNode,t.nodeType===8?Cx(t.parentNode,r):t.nodeType===1&&Cx(t,r),T0(t)):Cx(ts,r.stateNode));break;case 4:n=ts,i=fo,ts=r.stateNode.containerInfo,fo=!0,oc(t,e,r),ts=n,fo=i;break;case 0:case 11:case 14:case 15:if(!Ns&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&kv(r,e,a),i=i.next}while(i!==n)}oc(t,e,r);break;case 1:if(!Ns&&(Wh(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){oi(r,e,o)}oc(t,e,r);break;case 21:oc(t,e,r);break;case 22:r.mode&1?(Ns=(n=Ns)||r.memoizedState!==null,oc(t,e,r),Ns=n):oc(t,e,r);break;default:oc(t,e,r)}}function z4(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Jj),e.forEach(function(n){var i=l7.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function oo(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ts=o.stateNode,fo=!1;break e;case 3:ts=o.stateNode.containerInfo,fo=!0;break e;case 4:ts=o.stateNode.containerInfo,fo=!0;break e}o=o.return}if(ts===null)throw Error(vt(160));i6(s,a,i),ts=null,fo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){oi(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)s6(e,t),e=e.sibling}function s6(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(oo(e,t),jo(t),n&4){try{Jf(3,t,t.return),s2(3,t)}catch(y){oi(t,t.return,y)}try{Jf(5,t,t.return)}catch(y){oi(t,t.return,y)}}break;case 1:oo(e,t),jo(t),n&512&&r!==null&&Wh(r,r.return);break;case 5:if(oo(e,t),jo(t),n&512&&r!==null&&Wh(r,r.return),t.flags&32){var i=t.stateNode;try{S0(i,"")}catch(y){oi(t,t.return,y)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&TN(i,s),tv(o,a);var u=tv(o,s);for(a=0;a<l.length;a+=2){var h=l[a],f=l[a+1];h==="style"?LN(i,f):h==="dangerouslySetInnerHTML"?IN(i,f):h==="children"?S0(i,f):Bw(i,h,f,u)}switch(o){case"input":Xy(i,s);break;case"textarea":kN(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?ed(i,!!s.multiple,d,!1):p!==!!s.multiple&&(s.defaultValue!=null?ed(i,!!s.multiple,s.defaultValue,!0):ed(i,!!s.multiple,s.multiple?[]:"",!1))}i[L0]=s}catch(y){oi(t,t.return,y)}}break;case 6:if(oo(e,t),jo(t),n&4){if(t.stateNode===null)throw Error(vt(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){oi(t,t.return,y)}}break;case 3:if(oo(e,t),jo(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{T0(e.containerInfo)}catch(y){oi(t,t.return,y)}break;case 4:oo(e,t),jo(t);break;case 13:oo(e,t),jo(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(y5=wi())),n&4&&z4(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Ns=(u=Ns)||h,oo(e,t),Ns=u):oo(e,t),jo(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(zt=t,h=t.child;h!==null;){for(f=zt=h;zt!==null;){switch(p=zt,d=p.child,p.tag){case 0:case 11:case 14:case 15:Jf(4,p,p.return);break;case 1:Wh(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){oi(n,r,y)}}break;case 5:Wh(p,p.return);break;case 22:if(p.memoizedState!==null){q4(f);continue}}d!==null?(d.return=p,zt=d):q4(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=PN("display",a))}catch(y){oi(t,t.return,y)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){oi(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:oo(e,t),jo(t),n&4&&z4(t);break;case 21:break;default:oo(e,t),jo(t)}}function jo(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(n6(r)){var n=r;break e}r=r.return}throw Error(vt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(S0(i,""),n.flags&=-33);var s=V4(t);Pv(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=V4(t);Iv(t,o,a);break;default:throw Error(vt(161))}}catch(l){oi(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function e7(t,e,r){zt=t,a6(t)}function a6(t,e,r){for(var n=(t.mode&1)!==0;zt!==null;){var i=zt,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||xm;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Ns;o=xm;var u=Ns;if(xm=a,(Ns=l)&&!u)for(zt=i;zt!==null;)a=zt,l=a.child,a.tag===22&&a.memoizedState!==null?$4(i):l!==null?(l.return=a,zt=l):$4(i);for(;s!==null;)zt=s,a6(s),s=s.sibling;zt=i,xm=o,Ns=u}H4(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,zt=s):H4(t)}}function H4(t){for(;zt!==null;){var e=zt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ns||s2(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ns)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:ho(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&T4(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}T4(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&T0(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(vt(163))}Ns||e.flags&512&&Cv(e)}catch(p){oi(e,e.return,p)}}if(e===t){zt=null;break}if(r=e.sibling,r!==null){r.return=e.return,zt=r;break}zt=e.return}}function q4(t){for(;zt!==null;){var e=zt;if(e===t){zt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,zt=r;break}zt=e.return}}function $4(t){for(;zt!==null;){var e=zt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{s2(4,e)}catch(l){oi(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){oi(e,i,l)}}var s=e.return;try{Cv(e)}catch(l){oi(e,s,l)}break;case 5:var a=e.return;try{Cv(e)}catch(l){oi(e,a,l)}}}catch(l){oi(e,e.return,l)}if(e===t){zt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,zt=o;break}zt=e.return}}var t7=Math.ceil,Yg=Bl.ReactCurrentDispatcher,g5=Bl.ReactCurrentOwner,Xa=Bl.ReactCurrentBatchConfig,Jr=0,Yi=null,Ni=null,os=0,ya=0,Gh=lu(0),Bi=0,O0=null,zu=0,a2=0,x5=0,Zf=null,Qs=null,y5=0,Cd=1/0,fl=null,Xg=!1,Lv=null,Mc=null,ym=!1,Ec=null,Qg=0,e0=0,Rv=null,lg=-1,cg=0;function Vs(){return Jr&6?wi():lg!==-1?lg:lg=wi()}function Oc(t){return t.mode&1?Jr&2&&os!==0?os&-os:Oj.transition!==null?(cg===0&&(cg=qN()),cg):(t=yn,t!==0||(t=window.event,t=t===void 0?16:QN(t.type)),t):1}function bo(t,e,r,n){if(50<e0)throw e0=0,Rv=null,Error(vt(185));cp(t,r,n),(!(Jr&2)||t!==Yi)&&(t===Yi&&(!(Jr&2)&&(a2|=r),Bi===4&&xc(t,os)),ta(t,n),r===1&&Jr===0&&!(e.mode&1)&&(Cd=wi()+500,r2&&cu()))}function ta(t,e){var r=t.callbackNode;OR(t,e);var n=jg(t,t===Yi?os:0);if(n===0)r!==null&&e4(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&e4(r),e===1)t.tag===0?Mj(W4.bind(null,t)):gT(W4.bind(null,t)),Rj(function(){!(Jr&6)&&cu()}),r=null;else{switch($N(n)){case 1:r=qw;break;case 4:r=zN;break;case 16:r=Rg;break;case 536870912:r=HN;break;default:r=Rg}r=p6(r,o6.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function o6(t,e){if(lg=-1,cg=0,Jr&6)throw Error(vt(327));var r=t.callbackNode;if(sd()&&t.callbackNode!==r)return null;var n=jg(t,t===Yi?os:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Jg(t,n);else{e=n;var i=Jr;Jr|=2;var s=c6();(Yi!==t||os!==e)&&(fl=null,Cd=wi()+500,Ru(t,e));do try{i7();break}catch(o){l6(t,o)}while(!0);n5(),Yg.current=s,Jr=i,Ni!==null?e=0:(Yi=null,os=0,e=Bi)}if(e!==0){if(e===2&&(i=av(t),i!==0&&(n=i,e=jv(t,i))),e===1)throw r=O0,Ru(t,0),xc(t,n),ta(t,wi()),r;if(e===6)xc(t,n);else{if(i=t.current.alternate,!(n&30)&&!r7(i)&&(e=Jg(t,n),e===2&&(s=av(t),s!==0&&(n=s,e=jv(t,s))),e===1))throw r=O0,Ru(t,0),xc(t,n),ta(t,wi()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(vt(345));case 2:wu(t,Qs,fl);break;case 3:if(xc(t,n),(n&130023424)===n&&(e=y5+500-wi(),10<e)){if(jg(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Vs(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=pv(wu.bind(null,t,Qs,fl),e);break}wu(t,Qs,fl);break;case 4:if(xc(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-_o(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=wi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*t7(n/1960))-n,10<n){t.timeoutHandle=pv(wu.bind(null,t,Qs,fl),n);break}wu(t,Qs,fl);break;case 5:wu(t,Qs,fl);break;default:throw Error(vt(329))}}}return ta(t,wi()),t.callbackNode===r?o6.bind(null,t):null}function jv(t,e){var r=Zf;return t.current.memoizedState.isDehydrated&&(Ru(t,e).flags|=256),t=Jg(t,e),t!==2&&(e=Qs,Qs=r,e!==null&&Fv(e)),t}function Fv(t){Qs===null?Qs=t:Qs.push.apply(Qs,t)}function r7(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Ao(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xc(t,e){for(e&=~x5,e&=~a2,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-_o(e),n=1<<r;t[r]=-1,e&=~n}}function W4(t){if(Jr&6)throw Error(vt(327));sd();var e=jg(t,0);if(!(e&1))return ta(t,wi()),null;var r=Jg(t,e);if(t.tag!==0&&r===2){var n=av(t);n!==0&&(e=n,r=jv(t,n))}if(r===1)throw r=O0,Ru(t,0),xc(t,e),ta(t,wi()),r;if(r===6)throw Error(vt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wu(t,Qs,fl),ta(t,wi()),null}function v5(t,e){var r=Jr;Jr|=1;try{return t(e)}finally{Jr=r,Jr===0&&(Cd=wi()+500,r2&&cu())}}function Hu(t){Ec!==null&&Ec.tag===0&&!(Jr&6)&&sd();var e=Jr;Jr|=1;var r=Xa.transition,n=yn;try{if(Xa.transition=null,yn=1,t)return t()}finally{yn=n,Xa.transition=r,Jr=e,!(Jr&6)&&cu()}}function w5(){ya=Gh.current,Un(Gh)}function Ru(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Lj(r)),Ni!==null)for(r=Ni.return;r!==null;){var n=r;switch(e5(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Bg();break;case 3:Td(),Un(Zs),Un(Is),c5();break;case 5:l5(n);break;case 4:Td();break;case 13:Un(Gn);break;case 19:Un(Gn);break;case 10:i5(n.type._context);break;case 22:case 23:w5()}r=r.return}if(Yi=t,Ni=t=Bc(t.current,null),os=ya=e,Bi=0,O0=null,x5=a2=zu=0,Qs=Zf=null,Cu!==null){for(e=0;e<Cu.length;e++)if(r=Cu[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}Cu=null}return t}function l6(t,e){do{var r=Ni;try{if(n5(),sg.current=Kg,Gg){for(var n=Yn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Gg=!1}if(Vu=0,Hi=Oi=Yn=null,Qf=!1,F0=0,g5.current=null,r===null||r.return===null){Bi=1,O0=e,Ni=null;break}e:{var s=t,a=r.return,o=r,l=e;if(e=os,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=o,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=R4(a);if(d!==null){d.flags&=-257,j4(d,a,o,s,e),d.mode&1&&L4(s,u,e),e=d,l=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){L4(s,u,e),_5();break e}l=Error(vt(426))}}else if(Hn&&o.mode&1){var _=R4(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),j4(_,a,o,s,e),t5(kd(l,o));break e}}s=l=kd(l,o),Bi!==4&&(Bi=2),Zf===null?Zf=[s]:Zf.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=$T(s,l,e);N4(s,w);break e;case 1:o=l;var S=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Mc===null||!Mc.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=WT(s,o,e);N4(s,j);break e}}s=s.return}while(s!==null)}h6(r)}catch(q){e=q,Ni===r&&r!==null&&(Ni=r=r.return);continue}break}while(!0)}function c6(){var t=Yg.current;return Yg.current=Kg,t===null?Kg:t}function _5(){(Bi===0||Bi===3||Bi===2)&&(Bi=4),Yi===null||!(zu&268435455)&&!(a2&268435455)||xc(Yi,os)}function Jg(t,e){var r=Jr;Jr|=2;var n=c6();(Yi!==t||os!==e)&&(fl=null,Ru(t,e));do try{n7();break}catch(i){l6(t,i)}while(!0);if(n5(),Jr=r,Yg.current=n,Ni!==null)throw Error(vt(261));return Yi=null,os=0,Bi}function n7(){for(;Ni!==null;)u6(Ni)}function i7(){for(;Ni!==null&&!CR();)u6(Ni)}function u6(t){var e=f6(t.alternate,t,ya);t.memoizedProps=t.pendingProps,e===null?h6(t):Ni=e,g5.current=null}function h6(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Qj(r,e),r!==null){r.flags&=32767,Ni=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Bi=6,Ni=null;return}}else if(r=Xj(r,e,ya),r!==null){Ni=r;return}if(e=e.sibling,e!==null){Ni=e;return}Ni=e=t}while(e!==null);Bi===0&&(Bi=5)}function wu(t,e,r){var n=yn,i=Xa.transition;try{Xa.transition=null,yn=1,s7(t,e,r,n)}finally{Xa.transition=i,yn=n}return null}function s7(t,e,r,n){do sd();while(Ec!==null);if(Jr&6)throw Error(vt(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(vt(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(BR(t,s),t===Yi&&(Ni=Yi=null,os=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ym||(ym=!0,p6(Rg,function(){return sd(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Xa.transition,Xa.transition=null;var a=yn;yn=1;var o=Jr;Jr|=4,g5.current=null,Zj(t,r),s6(r,t),Ej(dv),Fg=!!hv,dv=hv=null,t.current=r,e7(r),IR(),Jr=o,yn=a,Xa.transition=s}else t.current=r;if(ym&&(ym=!1,Ec=t,Qg=i),s=t.pendingLanes,s===0&&(Mc=null),RR(r.stateNode),ta(t,wi()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Xg)throw Xg=!1,t=Lv,Lv=null,t;return Qg&1&&t.tag!==0&&sd(),s=t.pendingLanes,s&1?t===Rv?e0++:(e0=0,Rv=t):e0=0,cu(),null}function sd(){if(Ec!==null){var t=$N(Qg),e=Xa.transition,r=yn;try{if(Xa.transition=null,yn=16>t?16:t,Ec===null)var n=!1;else{if(t=Ec,Ec=null,Qg=0,Jr&6)throw Error(vt(331));var i=Jr;for(Jr|=4,zt=t.current;zt!==null;){var s=zt,a=s.child;if(zt.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(zt=u;zt!==null;){var h=zt;switch(h.tag){case 0:case 11:case 15:Jf(8,h,s)}var f=h.child;if(f!==null)f.return=h,zt=f;else for(;zt!==null;){h=zt;var p=h.sibling,d=h.return;if(r6(h),h===u){zt=null;break}if(p!==null){p.return=d,zt=p;break}zt=d}}}var v=s.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}zt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,zt=a;else e:for(;zt!==null;){if(s=zt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Jf(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,zt=w;break e}zt=s.return}}var S=t.current;for(zt=S;zt!==null;){a=zt;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,zt=C;else e:for(a=S;zt!==null;){if(o=zt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:s2(9,o)}}catch(q){oi(o,o.return,q)}if(o===a){zt=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,zt=j;break e}zt=o.return}}if(Jr=i,cu(),$o&&typeof $o.onPostCommitFiberRoot=="function")try{$o.onPostCommitFiberRoot(Q1,t)}catch{}n=!0}return n}finally{yn=r,Xa.transition=e}}return!1}function G4(t,e,r){e=kd(r,e),e=$T(t,e,1),t=Dc(t,e,1),e=Vs(),t!==null&&(cp(t,1,e),ta(t,e))}function oi(t,e,r){if(t.tag===3)G4(t,t,r);else for(;e!==null;){if(e.tag===3){G4(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Mc===null||!Mc.has(n))){t=kd(r,t),t=WT(e,t,1),e=Dc(e,t,1),t=Vs(),e!==null&&(cp(e,1,t),ta(e,t));break}}e=e.return}}function a7(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Vs(),t.pingedLanes|=t.suspendedLanes&r,Yi===t&&(os&r)===r&&(Bi===4||Bi===3&&(os&130023424)===os&&500>wi()-y5?Ru(t,0):x5|=r),ta(t,e)}function d6(t,e){e===0&&(t.mode&1?(e=lm,lm<<=1,!(lm&130023424)&&(lm=4194304)):e=1);var r=Vs();t=Cl(t,e),t!==null&&(cp(t,e,r),ta(t,r))}function o7(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),d6(t,r)}function l7(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(vt(314))}n!==null&&n.delete(e),d6(t,r)}var f6;f6=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zs.current)Js=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Js=!1,Yj(t,e,r);Js=!!(t.flags&131072)}else Js=!1,Hn&&e.flags&1048576&&xT(e,zg,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;og(t,e),t=e.pendingProps;var i=Ad(e,Is.current);id(e,r),i=h5(null,e,n,t,i,r);var s=d5();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ea(n)?(s=!0,Ug(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,a5(e),i.updater=i2,e.stateNode=i,i._reactInternals=e,_v(e,n,t,r),e=Av(null,e,n,!0,s,r)):(e.tag=0,Hn&&s&&Zw(e),Ms(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(og(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=u7(n),t=ho(n,t),i){case 0:e=Sv(null,e,n,t,r);break e;case 1:e=M4(null,e,n,t,r);break e;case 11:e=F4(null,e,n,t,r);break e;case 14:e=D4(null,e,n,ho(n.type,t),r);break e}throw Error(vt(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ho(n,i),Sv(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ho(n,i),M4(t,e,n,i,r);case 3:e:{if(XT(e),t===null)throw Error(vt(387));n=e.pendingProps,s=e.memoizedState,i=s.element,ST(t,e),$g(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=kd(Error(vt(423)),e),e=O4(t,e,n,r,i);break e}else if(n!==i){i=kd(Error(vt(424)),e),e=O4(t,e,n,r,i);break e}else for(Sa=Fc(e.stateNode.containerInfo.firstChild),Na=e,Hn=!0,mo=null,r=_T(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ed(),n===i){e=Il(t,e,r);break e}Ms(t,e,n,r)}e=e.child}return e;case 5:return AT(e),t===null&&yv(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,fv(n,i)?a=null:s!==null&&fv(n,s)&&(e.flags|=32),YT(t,e),Ms(t,e,a,r),e.child;case 6:return t===null&&yv(e),null;case 13:return QT(t,e,r);case 4:return o5(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Nd(e,null,n,r):Ms(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ho(n,i),F4(t,e,n,i,r);case 7:return Ms(t,e,e.pendingProps,r),e.child;case 8:return Ms(t,e,e.pendingProps.children,r),e.child;case 12:return Ms(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,jn(Hg,n._currentValue),n._currentValue=a,s!==null)if(Ao(s.value,a)){if(s.children===i.children&&!Zs.current){e=Il(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Sl(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),vv(s.return,r,e),o.lanes|=r;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(vt(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),vv(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ms(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,id(e,r),i=Qa(i),n=n(i),e.flags|=1,Ms(t,e,n,r),e.child;case 14:return n=e.type,i=ho(n,e.pendingProps),i=ho(n.type,i),D4(t,e,n,i,r);case 15:return GT(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ho(n,i),og(t,e),e.tag=1,ea(n)?(t=!0,Ug(e)):t=!1,id(e,r),qT(e,n,i),_v(e,n,i,r),Av(null,e,n,!0,t,r);case 19:return JT(t,e,r);case 22:return KT(t,e,r)}throw Error(vt(156,e.tag))};function p6(t,e){return VN(t,e)}function c7(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ka(t,e,r,n){return new c7(t,e,r,n)}function b5(t){return t=t.prototype,!(!t||!t.isReactComponent)}function u7(t){if(typeof t=="function")return b5(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vw)return 11;if(t===zw)return 14}return 2}function Bc(t,e){var r=t.alternate;return r===null?(r=Ka(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ug(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")b5(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Mh:return ju(r.children,i,s,e);case Uw:a=8,i|=8;break;case $y:return t=Ka(12,r,e,i|2),t.elementType=$y,t.lanes=s,t;case Wy:return t=Ka(13,r,e,i),t.elementType=Wy,t.lanes=s,t;case Gy:return t=Ka(19,r,e,i),t.elementType=Gy,t.lanes=s,t;case AN:return o2(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bN:a=10;break e;case SN:a=9;break e;case Vw:a=11;break e;case zw:a=14;break e;case dc:a=16,n=null;break e}throw Error(vt(130,t==null?t:typeof t,""))}return e=Ka(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function ju(t,e,r,n){return t=Ka(7,t,n,e),t.lanes=r,t}function o2(t,e,r,n){return t=Ka(22,t,n,e),t.elementType=AN,t.lanes=r,t.stateNode={isHidden:!1},t}function Mx(t,e,r){return t=Ka(6,t,null,e),t.lanes=r,t}function Ox(t,e,r){return e=Ka(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function h7(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yx(0),this.expirationTimes=yx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yx(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function S5(t,e,r,n,i,s,a,o,l){return t=new h7(t,e,r,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ka(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},a5(s),t}function d7(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dh,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function m6(t){if(!t)return Kc;t=t._reactInternals;e:{if(rh(t)!==t||t.tag!==1)throw Error(vt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ea(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(vt(171))}if(t.tag===1){var r=t.type;if(ea(r))return mT(t,r,e)}return e}function g6(t,e,r,n,i,s,a,o,l){return t=S5(r,n,!0,t,i,s,a,o,l),t.context=m6(null),r=t.current,n=Vs(),i=Oc(r),s=Sl(n,i),s.callback=e??null,Dc(r,s,i),t.current.lanes=i,cp(t,i,n),ta(t,n),t}function l2(t,e,r,n){var i=e.current,s=Vs(),a=Oc(i);return r=m6(r),e.context===null?e.context=r:e.pendingContext=r,e=Sl(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Dc(i,e,a),t!==null&&(bo(t,i,a,s),ig(t,i,a)),a}function Zg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function K4(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function A5(t,e){K4(t,e),(t=t.alternate)&&K4(t,e)}function f7(){return null}var x6=typeof reportError=="function"?reportError:function(t){console.error(t)};function E5(t){this._internalRoot=t}c2.prototype.render=E5.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(vt(409));l2(t,e,null,null)};c2.prototype.unmount=E5.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hu(function(){l2(null,t,null,null)}),e[kl]=null}};function c2(t){this._internalRoot=t}c2.prototype.unstable_scheduleHydration=function(t){if(t){var e=KN();t={blockedOn:null,target:t,priority:e};for(var r=0;r<gc.length&&e!==0&&e<gc[r].priority;r++);gc.splice(r,0,t),r===0&&XN(t)}};function N5(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Y4(){}function p7(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Zg(a);s.call(u)}}var a=g6(e,n,t,0,null,!1,!1,"",Y4);return t._reactRootContainer=a,t[kl]=a.current,I0(t.nodeType===8?t.parentNode:t),Hu(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=Zg(l);o.call(u)}}var l=S5(t,0,!1,null,null,!1,!1,"",Y4);return t._reactRootContainer=l,t[kl]=l.current,I0(t.nodeType===8?t.parentNode:t),Hu(function(){l2(e,l,r,n)}),l}function h2(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Zg(a);o.call(l)}}l2(e,a,t,i)}else a=p7(r,e,t,i,n);return Zg(a)}WN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Bf(e.pendingLanes);r!==0&&($w(e,r|1),ta(e,wi()),!(Jr&6)&&(Cd=wi()+500,cu()))}break;case 13:Hu(function(){var n=Cl(t,1);if(n!==null){var i=Vs();bo(n,t,1,i)}}),A5(t,1)}};Ww=function(t){if(t.tag===13){var e=Cl(t,134217728);if(e!==null){var r=Vs();bo(e,t,134217728,r)}A5(t,134217728)}};GN=function(t){if(t.tag===13){var e=Oc(t),r=Cl(t,e);if(r!==null){var n=Vs();bo(r,t,e,n)}A5(t,e)}};KN=function(){return yn};YN=function(t,e){var r=yn;try{return yn=t,e()}finally{yn=r}};nv=function(t,e,r){switch(e){case"input":if(Xy(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=t2(n);if(!i)throw Error(vt(90));NN(n),Xy(n,i)}}}break;case"textarea":kN(t,r);break;case"select":e=r.value,e!=null&&ed(t,!!r.multiple,e,!1)}};FN=v5;DN=Hu;var m7={usingClientEntryPoint:!1,Events:[hp,Vh,t2,RN,jN,v5]},If={findFiberByHostInstance:ku,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g7={bundleType:If.bundleType,version:If.version,rendererPackageName:If.rendererPackageName,rendererConfig:If.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=BN(t),t===null?null:t.stateNode},findFiberByHostInstance:If.findFiberByHostInstance||f7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vm.isDisabled&&vm.supportsFiber)try{Q1=vm.inject(g7),$o=vm}catch{}}Pa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m7;Pa.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N5(e))throw Error(vt(200));return d7(t,e,null,r)};Pa.createRoot=function(t,e){if(!N5(t))throw Error(vt(299));var r=!1,n="",i=x6;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=S5(t,1,!1,null,null,r,!1,n,i),t[kl]=e.current,I0(t.nodeType===8?t.parentNode:t),new E5(e)};Pa.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(vt(188)):(t=Object.keys(t).join(","),Error(vt(268,t)));return t=BN(e),t=t===null?null:t.stateNode,t};Pa.flushSync=function(t){return Hu(t)};Pa.hydrate=function(t,e,r){if(!u2(e))throw Error(vt(200));return h2(null,t,e,!0,r)};Pa.hydrateRoot=function(t,e,r){if(!N5(t))throw Error(vt(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=x6;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=g6(e,null,t,1,r??null,i,!1,s,a),t[kl]=e.current,I0(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new c2(e)};Pa.render=function(t,e,r){if(!u2(e))throw Error(vt(200));return h2(null,t,e,!1,r)};Pa.unmountComponentAtNode=function(t){if(!u2(t))throw Error(vt(40));return t._reactRootContainer?(Hu(function(){h2(null,null,t,!1,function(){t._reactRootContainer=null,t[kl]=null})}),!0):!1};Pa.unstable_batchedUpdates=v5;Pa.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!u2(r))throw Error(vt(200));if(t==null||t._reactInternals===void 0)throw Error(vt(38));return h2(t,e,r,!1,n)};Pa.version="18.3.1-next-f1338f8080-20240426";function y6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y6)}catch(t){console.error(t)}}y6(),yN.exports=Pa;var x7=yN.exports,X4=x7;Hy.createRoot=X4.createRoot,Hy.hydrateRoot=X4.hydrateRoot;const y7="modulepreload",v7=function(t){return"/"+t},Q4={},hg=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=v7(l),l in Q4)return;Q4[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":y7,u||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((p,d)=>{f.addEventListener("load",p),f.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},w7=()=>{};var J4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},_7=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],a=t[r++],o=t[r++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},w6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|o>>4;let p=(o&15)<<2|u>>6,d=u&63;l||(d=64,a||(p=64)),n.push(r[h],r[f],r[p],r[d])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(v6(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0;++i;const u=i<t.length?r[t.charAt(i)]:64;++i;const f=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||o==null||u==null||f==null)throw new b7;const p=s<<2|o>>4;if(n.push(p),u!==64){const d=o<<4&240|u>>2;if(n.push(d),f!==64){const v=u<<6&192|f;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class b7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const S7=function(t){const e=v6(t);return w6.encodeByteArray(e,!0)},e1=function(t){return S7(t).replace(/\./g,"")},_6=function(t){try{return w6.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7=()=>A7().__FIREBASE_DEFAULTS__,N7=()=>{if(typeof process>"u"||typeof J4>"u")return;const t=J4.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},T7=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_6(t[1]);return e&&JSON.parse(e)},d2=()=>{try{return w7()||E7()||N7()||T7()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},b6=t=>{var e,r;return(r=(e=d2())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},k7=t=>{const e=b6(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},S6=()=>{var t;return(t=d2())==null?void 0:t.config},A6=t=>{var e;return(e=d2())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function E6(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[e1(JSON.stringify(r)),e1(JSON.stringify(a)),""].join(".")}const t0={};function P7(){const t={prod:[],emulator:[]};for(const e of Object.keys(t0))t0[e]?t.emulator.push(e):t.prod.push(e);return t}function L7(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let Z4=!1;function N6(t,e){if(typeof window>"u"||typeof document>"u"||!zd(window.location.host)||t0[t]===e||t0[t]||Z4)return;t0[t]=e;function r(p){return`__firebase__banner__${p}`}const n="__firebase__banner",s=P7().prod.length>0;function a(){const p=document.getElementById(n);p&&p.remove()}function o(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,d){p.setAttribute("width","24"),p.setAttribute("id",d),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Z4=!0,a()},p}function h(p,d){p.setAttribute("id",d),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=L7(n),d=r("text"),v=document.getElementById(d)||document.createElement("span"),y=r("learnmore"),_=document.getElementById(y)||document.createElement("a"),w=r("preprendIcon"),S=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const C=p.element;o(C),h(_,y);const j=u();l(S,w),C.append(S,v,_,j),document.body.appendChild(C)}s?(v.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",d)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function R7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ps())}function j7(){var e;const t=(e=d2())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function F7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function D7(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function M7(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function O7(){const t=Ps();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function B7(){return!j7()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U7(){try{return typeof indexedDB=="object"}catch{return!1}}function V7(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z7="FirebaseError";class Ul extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=z7,Object.setPrototypeOf(this,Ul.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fp.prototype.create)}}class fp{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?H7(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Ul(i,o,n)}}function H7(t,e){return t.replace(q7,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const q7=/\{\$([^}]+)}/g;function $7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qu(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const s=t[i],a=e[i];if(eS(s)&&eS(a)){if(!qu(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function eS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function W7(t,e){const r=new G7(t,e);return r.subscribe.bind(r)}class G7{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");K7(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Bx),i.error===void 0&&(i.error=Bx),i.complete===void 0&&(i.complete=Bx);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function K7(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Bx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t){return t&&t._delegate?t._delegate:t}class $u{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new C7;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Q7(e))try{this.getOrInitializeService({instanceIdentifier:_u})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=_u){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_u){return this.instances.has(e)}getOptions(e=_u){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:X7(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=_u){return this.component?this.component.multipleInstances?e:_u:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function X7(t){return t===_u?void 0:t}function Q7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Y7(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Vr||(Vr={}));const Z7={debug:Vr.DEBUG,verbose:Vr.VERBOSE,info:Vr.INFO,warn:Vr.WARN,error:Vr.ERROR,silent:Vr.SILENT},eF=Vr.INFO,tF={[Vr.DEBUG]:"log",[Vr.VERBOSE]:"log",[Vr.INFO]:"info",[Vr.WARN]:"warn",[Vr.ERROR]:"error"},rF=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=tF[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class T5{constructor(e){this.name=e,this._logLevel=eF,this._logHandler=rF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Vr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Z7[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Vr.DEBUG,...e),this._logHandler(this,Vr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Vr.VERBOSE,...e),this._logHandler(this,Vr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Vr.INFO,...e),this._logHandler(this,Vr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Vr.WARN,...e),this._logHandler(this,Vr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Vr.ERROR,...e),this._logHandler(this,Vr.ERROR,...e)}}const nF=(t,e)=>e.some(r=>t instanceof r);let tS,rS;function iF(){return tS||(tS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sF(){return rS||(rS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const T6=new WeakMap,Dv=new WeakMap,k6=new WeakMap,Ux=new WeakMap,k5=new WeakMap;function aF(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{r(Uc(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&T6.set(r,t)}).catch(()=>{}),k5.set(e,t),e}function oF(t){if(Dv.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Dv.set(t,e)}let Mv={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Dv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||k6.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Uc(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lF(t){Mv=t(Mv)}function cF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Vx(this),e,...r);return k6.set(n,e.sort?e.sort():[e]),Uc(n)}:sF().includes(t)?function(...e){return t.apply(Vx(this),e),Uc(T6.get(this))}:function(...e){return Uc(t.apply(Vx(this),e))}}function uF(t){return typeof t=="function"?cF(t):(t instanceof IDBTransaction&&oF(t),nF(t,iF())?new Proxy(t,Mv):t)}function Uc(t){if(t instanceof IDBRequest)return aF(t);if(Ux.has(t))return Ux.get(t);const e=uF(t);return e!==t&&(Ux.set(t,e),k5.set(e,t)),e}const Vx=t=>k5.get(t);function hF(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=Uc(a);return n&&a.addEventListener("upgradeneeded",l=>{n(Uc(a.result),l.oldVersion,l.newVersion,Uc(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const dF=["get","getKey","getAll","getAllKeys","count"],fF=["put","add","delete","clear"],zx=new Map;function nS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zx.get(e))return zx.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=fF.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||dF.includes(r)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),i&&l.done]))[0]};return zx.set(e,s),s}lF(t=>({...t,get:(e,r,n)=>nS(e,r)||t.get(e,r,n),has:(e,r)=>!!nS(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(mF(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function mF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ov="@firebase/app",iS="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=new T5("@firebase/app"),gF="@firebase/app-compat",xF="@firebase/analytics-compat",yF="@firebase/analytics",vF="@firebase/app-check-compat",wF="@firebase/app-check",_F="@firebase/auth",bF="@firebase/auth-compat",SF="@firebase/database",AF="@firebase/data-connect",EF="@firebase/database-compat",NF="@firebase/functions",TF="@firebase/functions-compat",kF="@firebase/installations",CF="@firebase/installations-compat",IF="@firebase/messaging",PF="@firebase/messaging-compat",LF="@firebase/performance",RF="@firebase/performance-compat",jF="@firebase/remote-config",FF="@firebase/remote-config-compat",DF="@firebase/storage",MF="@firebase/storage-compat",OF="@firebase/firestore",BF="@firebase/ai",UF="@firebase/firestore-compat",VF="firebase",zF="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="[DEFAULT]",HF={[Ov]:"fire-core",[gF]:"fire-core-compat",[yF]:"fire-analytics",[xF]:"fire-analytics-compat",[wF]:"fire-app-check",[vF]:"fire-app-check-compat",[_F]:"fire-auth",[bF]:"fire-auth-compat",[SF]:"fire-rtdb",[AF]:"fire-data-connect",[EF]:"fire-rtdb-compat",[NF]:"fire-fn",[TF]:"fire-fn-compat",[kF]:"fire-iid",[CF]:"fire-iid-compat",[IF]:"fire-fcm",[PF]:"fire-fcm-compat",[LF]:"fire-perf",[RF]:"fire-perf-compat",[jF]:"fire-rc",[FF]:"fire-rc-compat",[DF]:"fire-gcs",[MF]:"fire-gcs-compat",[OF]:"fire-fst",[UF]:"fire-fst-compat",[BF]:"fire-vertex","fire-js":"fire-js",[VF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=new Map,qF=new Map,Uv=new Map;function sS(t,e){try{t.container.addComponent(e)}catch(r){Pl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Id(t){const e=t.name;if(Uv.has(e))return Pl.debug(`There were multiple attempts to register component ${e}.`),!1;Uv.set(e,t);for(const r of t1.values())sS(r,t);for(const r of qF.values())sS(r,t);return!0}function C5(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function go(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vc=new fp("app","Firebase",$F);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new $u("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=zF;function C6(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:Bv,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw Vc.create("bad-app-name",{appName:String(i)});if(r||(r=S6()),!r)throw Vc.create("no-options");const s=t1.get(i);if(s){if(qu(r,s.options)&&qu(n,s.config))return s;throw Vc.create("duplicate-app",{appName:i})}const a=new J7(i);for(const l of Uv.values())a.addComponent(l);const o=new WF(r,n,a);return t1.set(i,o),o}function I6(t=Bv){const e=t1.get(t);if(!e&&t===Bv&&S6())return C6();if(!e)throw Vc.create("no-app",{appName:t});return e}function zc(t,e,r){let n=HF[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${n}" with version "${e}":`];i&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pl.warn(a.join(" "));return}Id(new $u(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF="firebase-heartbeat-database",KF=1,B0="firebase-heartbeat-store";let Hx=null;function P6(){return Hx||(Hx=hF(GF,KF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(B0)}catch(r){console.warn(r)}}}}).catch(t=>{throw Vc.create("idb-open",{originalErrorMessage:t.message})})),Hx}async function YF(t){try{const r=(await P6()).transaction(B0),n=await r.objectStore(B0).get(L6(t));return await r.done,n}catch(e){if(e instanceof Ul)Pl.warn(e.message);else{const r=Vc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pl.warn(r.message)}}}async function aS(t,e){try{const n=(await P6()).transaction(B0,"readwrite");await n.objectStore(B0).put(e,L6(t)),await n.done}catch(r){if(r instanceof Ul)Pl.warn(r.message);else{const n=Vc.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Pl.warn(n.message)}}}function L6(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=1024,QF=30;class JF{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new eD(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=oS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>QF){const a=tD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Pl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=oS(),{heartbeatsToSend:n,unsentEntries:i}=ZF(this._heartbeatsCache.heartbeats),s=e1(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Pl.warn(r),""}}}function oS(){return new Date().toISOString().substring(0,10)}function ZF(t,e=XF){const r=[];let n=t.slice();for(const i of t){const s=r.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),lS(r)>e){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),lS(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class eD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return U7()?V7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await YF(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return aS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return aS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function lS(t){return e1(JSON.stringify({version:2,heartbeats:t})).length}function tD(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){Id(new $u("platform-logger",e=>new pF(e),"PRIVATE")),Id(new $u("heartbeat",e=>new JF(e),"PRIVATE")),zc(Ov,iS,t),zc(Ov,iS,"esm2020"),zc("fire-js","")}rD("");var nD="firebase",iD="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zc(nD,iD,"app");var cS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hc,R6;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,k){function A(){}A.prototype=k.prototype,E.F=k.prototype,E.prototype=new A,E.prototype.constructor=E,E.D=function(D,N,R){for(var L=Array(arguments.length-2),se=2;se<arguments.length;se++)L[se-2]=arguments[se];return k.prototype[N].apply(D,L)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,k,A){A||(A=0);const D=Array(16);if(typeof k=="string")for(var N=0;N<16;++N)D[N]=k.charCodeAt(A++)|k.charCodeAt(A++)<<8|k.charCodeAt(A++)<<16|k.charCodeAt(A++)<<24;else for(N=0;N<16;++N)D[N]=k[A++]|k[A++]<<8|k[A++]<<16|k[A++]<<24;k=E.g[0],A=E.g[1],N=E.g[2];let R=E.g[3],L;L=k+(R^A&(N^R))+D[0]+3614090360&4294967295,k=A+(L<<7&4294967295|L>>>25),L=R+(N^k&(A^N))+D[1]+3905402710&4294967295,R=k+(L<<12&4294967295|L>>>20),L=N+(A^R&(k^A))+D[2]+606105819&4294967295,N=R+(L<<17&4294967295|L>>>15),L=A+(k^N&(R^k))+D[3]+3250441966&4294967295,A=N+(L<<22&4294967295|L>>>10),L=k+(R^A&(N^R))+D[4]+4118548399&4294967295,k=A+(L<<7&4294967295|L>>>25),L=R+(N^k&(A^N))+D[5]+1200080426&4294967295,R=k+(L<<12&4294967295|L>>>20),L=N+(A^R&(k^A))+D[6]+2821735955&4294967295,N=R+(L<<17&4294967295|L>>>15),L=A+(k^N&(R^k))+D[7]+4249261313&4294967295,A=N+(L<<22&4294967295|L>>>10),L=k+(R^A&(N^R))+D[8]+1770035416&4294967295,k=A+(L<<7&4294967295|L>>>25),L=R+(N^k&(A^N))+D[9]+2336552879&4294967295,R=k+(L<<12&4294967295|L>>>20),L=N+(A^R&(k^A))+D[10]+4294925233&4294967295,N=R+(L<<17&4294967295|L>>>15),L=A+(k^N&(R^k))+D[11]+2304563134&4294967295,A=N+(L<<22&4294967295|L>>>10),L=k+(R^A&(N^R))+D[12]+1804603682&4294967295,k=A+(L<<7&4294967295|L>>>25),L=R+(N^k&(A^N))+D[13]+4254626195&4294967295,R=k+(L<<12&4294967295|L>>>20),L=N+(A^R&(k^A))+D[14]+2792965006&4294967295,N=R+(L<<17&4294967295|L>>>15),L=A+(k^N&(R^k))+D[15]+1236535329&4294967295,A=N+(L<<22&4294967295|L>>>10),L=k+(N^R&(A^N))+D[1]+4129170786&4294967295,k=A+(L<<5&4294967295|L>>>27),L=R+(A^N&(k^A))+D[6]+3225465664&4294967295,R=k+(L<<9&4294967295|L>>>23),L=N+(k^A&(R^k))+D[11]+643717713&4294967295,N=R+(L<<14&4294967295|L>>>18),L=A+(R^k&(N^R))+D[0]+3921069994&4294967295,A=N+(L<<20&4294967295|L>>>12),L=k+(N^R&(A^N))+D[5]+3593408605&4294967295,k=A+(L<<5&4294967295|L>>>27),L=R+(A^N&(k^A))+D[10]+38016083&4294967295,R=k+(L<<9&4294967295|L>>>23),L=N+(k^A&(R^k))+D[15]+3634488961&4294967295,N=R+(L<<14&4294967295|L>>>18),L=A+(R^k&(N^R))+D[4]+3889429448&4294967295,A=N+(L<<20&4294967295|L>>>12),L=k+(N^R&(A^N))+D[9]+568446438&4294967295,k=A+(L<<5&4294967295|L>>>27),L=R+(A^N&(k^A))+D[14]+3275163606&4294967295,R=k+(L<<9&4294967295|L>>>23),L=N+(k^A&(R^k))+D[3]+4107603335&4294967295,N=R+(L<<14&4294967295|L>>>18),L=A+(R^k&(N^R))+D[8]+1163531501&4294967295,A=N+(L<<20&4294967295|L>>>12),L=k+(N^R&(A^N))+D[13]+2850285829&4294967295,k=A+(L<<5&4294967295|L>>>27),L=R+(A^N&(k^A))+D[2]+4243563512&4294967295,R=k+(L<<9&4294967295|L>>>23),L=N+(k^A&(R^k))+D[7]+1735328473&4294967295,N=R+(L<<14&4294967295|L>>>18),L=A+(R^k&(N^R))+D[12]+2368359562&4294967295,A=N+(L<<20&4294967295|L>>>12),L=k+(A^N^R)+D[5]+4294588738&4294967295,k=A+(L<<4&4294967295|L>>>28),L=R+(k^A^N)+D[8]+2272392833&4294967295,R=k+(L<<11&4294967295|L>>>21),L=N+(R^k^A)+D[11]+1839030562&4294967295,N=R+(L<<16&4294967295|L>>>16),L=A+(N^R^k)+D[14]+4259657740&4294967295,A=N+(L<<23&4294967295|L>>>9),L=k+(A^N^R)+D[1]+2763975236&4294967295,k=A+(L<<4&4294967295|L>>>28),L=R+(k^A^N)+D[4]+1272893353&4294967295,R=k+(L<<11&4294967295|L>>>21),L=N+(R^k^A)+D[7]+4139469664&4294967295,N=R+(L<<16&4294967295|L>>>16),L=A+(N^R^k)+D[10]+3200236656&4294967295,A=N+(L<<23&4294967295|L>>>9),L=k+(A^N^R)+D[13]+681279174&4294967295,k=A+(L<<4&4294967295|L>>>28),L=R+(k^A^N)+D[0]+3936430074&4294967295,R=k+(L<<11&4294967295|L>>>21),L=N+(R^k^A)+D[3]+3572445317&4294967295,N=R+(L<<16&4294967295|L>>>16),L=A+(N^R^k)+D[6]+76029189&4294967295,A=N+(L<<23&4294967295|L>>>9),L=k+(A^N^R)+D[9]+3654602809&4294967295,k=A+(L<<4&4294967295|L>>>28),L=R+(k^A^N)+D[12]+3873151461&4294967295,R=k+(L<<11&4294967295|L>>>21),L=N+(R^k^A)+D[15]+530742520&4294967295,N=R+(L<<16&4294967295|L>>>16),L=A+(N^R^k)+D[2]+3299628645&4294967295,A=N+(L<<23&4294967295|L>>>9),L=k+(N^(A|~R))+D[0]+4096336452&4294967295,k=A+(L<<6&4294967295|L>>>26),L=R+(A^(k|~N))+D[7]+1126891415&4294967295,R=k+(L<<10&4294967295|L>>>22),L=N+(k^(R|~A))+D[14]+2878612391&4294967295,N=R+(L<<15&4294967295|L>>>17),L=A+(R^(N|~k))+D[5]+4237533241&4294967295,A=N+(L<<21&4294967295|L>>>11),L=k+(N^(A|~R))+D[12]+1700485571&4294967295,k=A+(L<<6&4294967295|L>>>26),L=R+(A^(k|~N))+D[3]+2399980690&4294967295,R=k+(L<<10&4294967295|L>>>22),L=N+(k^(R|~A))+D[10]+4293915773&4294967295,N=R+(L<<15&4294967295|L>>>17),L=A+(R^(N|~k))+D[1]+2240044497&4294967295,A=N+(L<<21&4294967295|L>>>11),L=k+(N^(A|~R))+D[8]+1873313359&4294967295,k=A+(L<<6&4294967295|L>>>26),L=R+(A^(k|~N))+D[15]+4264355552&4294967295,R=k+(L<<10&4294967295|L>>>22),L=N+(k^(R|~A))+D[6]+2734768916&4294967295,N=R+(L<<15&4294967295|L>>>17),L=A+(R^(N|~k))+D[13]+1309151649&4294967295,A=N+(L<<21&4294967295|L>>>11),L=k+(N^(A|~R))+D[4]+4149444226&4294967295,k=A+(L<<6&4294967295|L>>>26),L=R+(A^(k|~N))+D[11]+3174756917&4294967295,R=k+(L<<10&4294967295|L>>>22),L=N+(k^(R|~A))+D[2]+718787259&4294967295,N=R+(L<<15&4294967295|L>>>17),L=A+(R^(N|~k))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+k&4294967295,E.g[1]=E.g[1]+(N+(L<<21&4294967295|L>>>11))&4294967295,E.g[2]=E.g[2]+N&4294967295,E.g[3]=E.g[3]+R&4294967295}n.prototype.v=function(E,k){k===void 0&&(k=E.length);const A=k-this.blockSize,D=this.C;let N=this.h,R=0;for(;R<k;){if(N==0)for(;R<=A;)i(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<k;)if(D[N++]=E.charCodeAt(R++),N==this.blockSize){i(this,D),N=0;break}}else for(;R<k;)if(D[N++]=E[R++],N==this.blockSize){i(this,D),N=0;break}}this.h=N,this.o+=k},n.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var k=1;k<E.length-8;++k)E[k]=0;k=this.o*8;for(var A=E.length-8;A<E.length;++A)E[A]=k&255,k/=256;for(this.v(E),E=Array(16),k=0,A=0;A<4;++A)for(let D=0;D<32;D+=8)E[k++]=this.g[A]>>>D&255;return E};function s(E,k){var A=o;return Object.prototype.hasOwnProperty.call(A,E)?A[E]:A[E]=k(E)}function a(E,k){this.h=k;const A=[];let D=!0;for(let N=E.length-1;N>=0;N--){const R=E[N]|0;D&&R==k||(A[N]=R,D=!1)}this.g=A}var o={};function l(E){return-128<=E&&E<128?s(E,function(k){return new a([k|0],k<0?-1:0)}):new a([E|0],E<0?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(E<0)return _(u(-E));const k=[];let A=1;for(let D=0;E>=A;D++)k[D]=E/A|0,A*=4294967296;return new a(k,0)}function h(E,k){if(E.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(E.charAt(0)=="-")return _(h(E.substring(1),k));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=u(Math.pow(k,8));let D=f;for(let R=0;R<E.length;R+=8){var N=Math.min(8,E.length-R);const L=parseInt(E.substring(R,R+N),k);N<8?(N=u(Math.pow(k,N)),D=D.j(N).add(u(L))):(D=D.j(A),D=D.add(u(L)))}return D}var f=l(0),p=l(1),d=l(16777216);t=a.prototype,t.m=function(){if(y(this))return-_(this).m();let E=0,k=1;for(let A=0;A<this.g.length;A++){const D=this.i(A);E+=(D>=0?D:4294967296+D)*k,k*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(v(this))return"0";if(y(this))return"-"+_(this).toString(E);const k=u(Math.pow(E,6));var A=this;let D="";for(;;){const N=j(A,k).g;A=w(A,N.j(k));let R=((A.g.length>0?A.g[0]:A.h)>>>0).toString(E);if(A=N,v(A))return R+D;for(;R.length<6;)R="0"+R;D=R+D}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function v(E){if(E.h!=0)return!1;for(let k=0;k<E.g.length;k++)if(E.g[k]!=0)return!1;return!0}function y(E){return E.h==-1}t.l=function(E){return E=w(this,E),y(E)?-1:v(E)?0:1};function _(E){const k=E.g.length,A=[];for(let D=0;D<k;D++)A[D]=~E.g[D];return new a(A,~E.h).add(p)}t.abs=function(){return y(this)?_(this):this},t.add=function(E){const k=Math.max(this.g.length,E.g.length),A=[];let D=0;for(let N=0;N<=k;N++){let R=D+(this.i(N)&65535)+(E.i(N)&65535),L=(R>>>16)+(this.i(N)>>>16)+(E.i(N)>>>16);D=L>>>16,R&=65535,L&=65535,A[N]=L<<16|R}return new a(A,A[A.length-1]&-2147483648?-1:0)};function w(E,k){return E.add(_(k))}t.j=function(E){if(v(this)||v(E))return f;if(y(this))return y(E)?_(this).j(_(E)):_(_(this).j(E));if(y(E))return _(this.j(_(E)));if(this.l(d)<0&&E.l(d)<0)return u(this.m()*E.m());const k=this.g.length+E.g.length,A=[];for(var D=0;D<2*k;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(let N=0;N<E.g.length;N++){const R=this.i(D)>>>16,L=this.i(D)&65535,se=E.i(N)>>>16,ge=E.i(N)&65535;A[2*D+2*N]+=L*ge,S(A,2*D+2*N),A[2*D+2*N+1]+=R*ge,S(A,2*D+2*N+1),A[2*D+2*N+1]+=L*se,S(A,2*D+2*N+1),A[2*D+2*N+2]+=R*se,S(A,2*D+2*N+2)}for(E=0;E<k;E++)A[E]=A[2*E+1]<<16|A[2*E];for(E=k;E<2*k;E++)A[E]=0;return new a(A,0)};function S(E,k){for(;(E[k]&65535)!=E[k];)E[k+1]+=E[k]>>>16,E[k]&=65535,k++}function C(E,k){this.g=E,this.h=k}function j(E,k){if(v(k))throw Error("division by zero");if(v(E))return new C(f,f);if(y(E))return k=j(_(E),k),new C(_(k.g),_(k.h));if(y(k))return k=j(E,_(k)),new C(_(k.g),k.h);if(E.g.length>30){if(y(E)||y(k))throw Error("slowDivide_ only works with positive integers.");for(var A=p,D=k;D.l(E)<=0;)A=q(A),D=q(D);var N=G(A,1),R=G(D,1);for(D=G(D,2),A=G(A,2);!v(D);){var L=R.add(D);L.l(E)<=0&&(N=N.add(A),R=L),D=G(D,1),A=G(A,1)}return k=w(E,N.j(k)),new C(N,k)}for(N=f;E.l(k)>=0;){for(A=Math.max(1,Math.floor(E.m()/k.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),R=u(A),L=R.j(k);y(L)||L.l(E)>0;)A-=D,R=u(A),L=R.j(k);v(R)&&(R=p),N=N.add(R),E=w(E,L)}return new C(N,E)}t.B=function(E){return j(this,E).h},t.and=function(E){const k=Math.max(this.g.length,E.g.length),A=[];for(let D=0;D<k;D++)A[D]=this.i(D)&E.i(D);return new a(A,this.h&E.h)},t.or=function(E){const k=Math.max(this.g.length,E.g.length),A=[];for(let D=0;D<k;D++)A[D]=this.i(D)|E.i(D);return new a(A,this.h|E.h)},t.xor=function(E){const k=Math.max(this.g.length,E.g.length),A=[];for(let D=0;D<k;D++)A[D]=this.i(D)^E.i(D);return new a(A,this.h^E.h)};function q(E){const k=E.g.length+1,A=[];for(let D=0;D<k;D++)A[D]=E.i(D)<<1|E.i(D-1)>>>31;return new a(A,E.h)}function G(E,k){const A=k>>5;k%=32;const D=E.g.length-A,N=[];for(let R=0;R<D;R++)N[R]=k>0?E.i(R+A)>>>k|E.i(R+A+1)<<32-k:E.i(R+A);return new a(N,E.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,R6=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,Hc=a}).apply(typeof cS<"u"?cS:typeof self<"u"?self:typeof window<"u"?window:{});var wm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j6,Vf,F6,dg,Vv,D6,M6,O6;(function(){var t,e=Object.defineProperty;function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof wm=="object"&&wm];for(var I=0;I<g.length;++I){var M=g[I];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var n=r(this);function i(g,I){if(I)e:{var M=n;g=g.split(".");for(var J=0;J<g.length-1;J++){var Fe=g[J];if(!(Fe in M))break e;M=M[Fe]}g=g[g.length-1],J=M[g],I=I(J),I!=J&&I!=null&&e(M,g,{configurable:!0,writable:!0,value:I})}}i("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(g){return g||function(I){var M=[],J;for(J in I)Object.prototype.hasOwnProperty.call(I,J)&&M.push([J,I[J]]);return M}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(g){var I=typeof g;return I=="object"&&g!=null||I=="function"}function l(g,I,M){return g.call.apply(g.bind,arguments)}function u(g,I,M){return u=l,u.apply(null,arguments)}function h(g,I){var M=Array.prototype.slice.call(arguments,1);return function(){var J=M.slice();return J.push.apply(J,arguments),g.apply(this,J)}}function f(g,I){function M(){}M.prototype=I.prototype,g.Z=I.prototype,g.prototype=new M,g.prototype.constructor=g,g.Ob=function(J,Fe,We){for(var bt=Array(arguments.length-2),gr=2;gr<arguments.length;gr++)bt[gr-2]=arguments[gr];return I.prototype[Fe].apply(J,bt)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function d(g){const I=g.length;if(I>0){const M=Array(I);for(let J=0;J<I;J++)M[J]=g[J];return M}return[]}function v(g,I){for(let J=1;J<arguments.length;J++){const Fe=arguments[J];var M=typeof Fe;if(M=M!="object"?M:Fe?Array.isArray(Fe)?"array":M:"null",M=="array"||M=="object"&&typeof Fe.length=="number"){M=g.length||0;const We=Fe.length||0;g.length=M+We;for(let bt=0;bt<We;bt++)g[M+bt]=Fe[bt]}else g.push(Fe)}}class y{constructor(I,M){this.i=I,this.j=M,this.h=0,this.g=null}get(){let I;return this.h>0?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function _(g){a.setTimeout(()=>{throw g},0)}function w(){var g=E;let I=null;return g.g&&(I=g.g,g.g=g.g.next,g.g||(g.h=null),I.next=null),I}class S{constructor(){this.h=this.g=null}add(I,M){const J=C.get();J.set(I,M),this.h?this.h.next=J:this.g=J,this.h=J}}var C=new y(()=>new j,g=>g.reset());class j{constructor(){this.next=this.g=this.h=null}set(I,M){this.h=I,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let q,G=!1,E=new S,k=()=>{const g=Promise.resolve(void 0);q=()=>{g.then(A)}};function A(){for(var g;g=w();){try{g.h.call(g.g)}catch(M){_(M)}var I=C;I.j(g),I.h<100&&(I.h++,g.next=I.g,I.g=g)}G=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(g,I){this.type=g,this.g=this.target=I,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var g=!1,I=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const M=()=>{};a.addEventListener("test",M,I),a.removeEventListener("test",M,I)}catch{}return g}();function L(g){return/^[\s\xa0]*$/.test(g)}function se(g,I){N.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,I)}f(se,N),se.prototype.init=function(g,I){const M=this.type=g.type,J=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=I,I=g.relatedTarget,I||(M=="mouseover"?I=g.fromElement:M=="mouseout"&&(I=g.toElement)),this.relatedTarget=I,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),ve=0;function ye(g,I,M,J,Fe){this.listener=g,this.proxy=null,this.src=I,this.type=M,this.capture=!!J,this.ha=Fe,this.key=++ve,this.da=this.fa=!1}function he(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function _e(g,I,M){for(const J in g)I.call(M,g[J],J,g)}function Ue(g,I){for(const M in g)I.call(void 0,g[M],M,g)}function Ie(g){const I={};for(const M in g)I[M]=g[M];return I}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(g,I){let M,J;for(let Fe=1;Fe<arguments.length;Fe++){J=arguments[Fe];for(M in J)g[M]=J[M];for(let We=0;We<P.length;We++)M=P[We],Object.prototype.hasOwnProperty.call(J,M)&&(g[M]=J[M])}}function B(g){this.src=g,this.g={},this.h=0}B.prototype.add=function(g,I,M,J,Fe){const We=g.toString();g=this.g[We],g||(g=this.g[We]=[],this.h++);const bt=Z(g,I,J,Fe);return bt>-1?(I=g[bt],M||(I.fa=!1)):(I=new ye(I,this.src,We,!!J,Fe),I.fa=M,g.push(I)),I};function z(g,I){const M=I.type;if(M in g.g){var J=g.g[M],Fe=Array.prototype.indexOf.call(J,I,void 0),We;(We=Fe>=0)&&Array.prototype.splice.call(J,Fe,1),We&&(he(I),g.g[M].length==0&&(delete g.g[M],g.h--))}}function Z(g,I,M,J){for(let Fe=0;Fe<g.length;++Fe){const We=g[Fe];if(!We.da&&We.listener==I&&We.capture==!!M&&We.ha==J)return Fe}return-1}var de="closure_lm_"+(Math.random()*1e6|0),Se={};function Ae(g,I,M,J,Fe){if(Array.isArray(I)){for(let We=0;We<I.length;We++)Ae(g,I[We],M,J,Fe);return null}return M=me(M),g&&g[ge]?g.J(I,M,o(J)?!!J.capture:!1,Fe):Ne(g,I,M,!1,J,Fe)}function Ne(g,I,M,J,Fe,We){if(!I)throw Error("Invalid event type");const bt=o(Fe)?!!Fe.capture:!!Fe;let gr=ke(g);if(gr||(g[de]=gr=new B(g)),M=gr.add(I,M,J,bt,We),M.proxy)return M;if(J=Xe(),M.proxy=J,J.src=g,J.listener=M,g.addEventListener)R||(Fe=bt),Fe===void 0&&(Fe=!1),g.addEventListener(I.toString(),J,Fe);else if(g.attachEvent)g.attachEvent(mt(I.toString()),J);else if(g.addListener&&g.removeListener)g.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return M}function Xe(){function g(M){return I.call(g.src,g.listener,M)}const I=te;return g}function et(g,I,M,J,Fe){if(Array.isArray(I))for(var We=0;We<I.length;We++)et(g,I[We],M,J,Fe);else J=o(J)?!!J.capture:!!J,M=me(M),g&&g[ge]?(g=g.i,We=String(I).toString(),We in g.g&&(I=g.g[We],M=Z(I,M,J,Fe),M>-1&&(he(I[M]),Array.prototype.splice.call(I,M,1),I.length==0&&(delete g.g[We],g.h--)))):g&&(g=ke(g))&&(I=g.g[I.toString()],g=-1,I&&(g=Z(I,M,J,Fe)),(M=g>-1?I[g]:null)&&ot(M))}function ot(g){if(typeof g!="number"&&g&&!g.da){var I=g.src;if(I&&I[ge])z(I.i,g);else{var M=g.type,J=g.proxy;I.removeEventListener?I.removeEventListener(M,J,g.capture):I.detachEvent?I.detachEvent(mt(M),J):I.addListener&&I.removeListener&&I.removeListener(J),(M=ke(I))?(z(M,g),M.h==0&&(M.src=null,I[de]=null)):he(g)}}}function mt(g){return g in Se?Se[g]:Se[g]="on"+g}function te(g,I){if(g.da)g=!0;else{I=new se(I,this);const M=g.listener,J=g.ha||g.src;g.fa&&ot(g),g=M.call(J,I)}return g}function ke(g){return g=g[de],g instanceof B?g:null}var X="__closure_events_fn_"+(Math.random()*1e9>>>0);function me(g){return typeof g=="function"?g:(g[X]||(g[X]=function(I){return g.handleEvent(I)}),g[X])}function fe(){D.call(this),this.i=new B(this),this.M=this,this.G=null}f(fe,D),fe.prototype[ge]=!0,fe.prototype.removeEventListener=function(g,I,M,J){et(this,g,I,M,J)};function qe(g,I){var M,J=g.G;if(J)for(M=[];J;J=J.G)M.push(J);if(g=g.M,J=I.type||I,typeof I=="string")I=new N(I,g);else if(I instanceof N)I.target=I.target||g;else{var Fe=I;I=new N(J,g),O(I,Fe)}Fe=!0;let We,bt;if(M)for(bt=M.length-1;bt>=0;bt--)We=I.g=M[bt],Fe=Ke(We,J,!0,I)&&Fe;if(We=I.g=g,Fe=Ke(We,J,!0,I)&&Fe,Fe=Ke(We,J,!1,I)&&Fe,M)for(bt=0;bt<M.length;bt++)We=I.g=M[bt],Fe=Ke(We,J,!1,I)&&Fe}fe.prototype.N=function(){if(fe.Z.N.call(this),this.i){var g=this.i;for(const I in g.g){const M=g.g[I];for(let J=0;J<M.length;J++)he(M[J]);delete g.g[I],g.h--}}this.G=null},fe.prototype.J=function(g,I,M,J){return this.i.add(String(g),I,!1,M,J)},fe.prototype.K=function(g,I,M,J){return this.i.add(String(g),I,!0,M,J)};function Ke(g,I,M,J){if(I=g.i.g[String(I)],!I)return!0;I=I.concat();let Fe=!0;for(let We=0;We<I.length;++We){const bt=I[We];if(bt&&!bt.da&&bt.capture==M){const gr=bt.listener,In=bt.ha||bt.src;bt.fa&&z(g.i,bt),Fe=gr.call(In,J)!==!1&&Fe}}return Fe&&!J.defaultPrevented}function st(g,I){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=u(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(I)>2147483647?-1:a.setTimeout(g,I||0)}function yt(g){g.g=st(()=>{g.g=null,g.i&&(g.i=!1,yt(g))},g.l);const I=g.h;g.h=null,g.m.apply(null,I)}class Ht extends D{constructor(I,M){super(),this.m=I,this.l=M,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:yt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function be(g){D.call(this),this.h=g,this.g={}}f(be,D);var tt=[];function ct(g){_e(g.g,function(I,M){this.g.hasOwnProperty(M)&&ot(I)},g),g.g={}}be.prototype.N=function(){be.Z.N.call(this),ct(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var St=a.JSON.stringify,Rt=a.JSON.parse,jt=class{stringify(g){return a.JSON.stringify(g,void 0)}parse(g){return a.JSON.parse(g,void 0)}};function Dt(){}function Wr(){}var hr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ge(){N.call(this,"d")}f(Ge,N);function Lt(){N.call(this,"c")}f(Lt,N);var mr={},Kt=null;function Pr(){return Kt=Kt||new fe}mr.Ia="serverreachability";function Qt(g){N.call(this,mr.Ia,g)}f(Qt,N);function Zt(g){const I=Pr();qe(I,new Qt(I))}mr.STAT_EVENT="statevent";function qr(g,I){N.call(this,mr.STAT_EVENT,g),this.stat=I}f(qr,N);function Wt(g){const I=Pr();qe(I,new qr(I,g))}mr.Ja="timingevent";function Ye(g,I){N.call(this,mr.Ja,g),this.size=I}f(Ye,N);function Tt(g,I){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){g()},I)}function on(){this.g=!0}on.prototype.ua=function(){this.g=!1};function Sr(g,I,M,J,Fe,We){g.info(function(){if(g.g)if(We){var bt="",gr=We.split("&");for(let Br=0;Br<gr.length;Br++){var In=gr[Br].split("=");if(In.length>1){const Pn=In[0];In=In[1];const Vi=Pn.split("_");bt=Vi.length>=2&&Vi[1]=="type"?bt+(Pn+"="+In+"&"):bt+(Pn+"=redacted&")}}}else bt=null;else bt=We;return"XMLHTTP REQ ("+J+") [attempt "+Fe+"]: "+I+`
`+M+`
`+bt})}function yr(g,I,M,J,Fe,We,bt){g.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+Fe+"]: "+I+`
`+M+`
`+We+" "+bt})}function Fn(g,I,M,J){g.info(function(){return"XMLHTTP TEXT ("+I+"): "+qn(g,M)+(J?" "+J:"")})}function Jt(g,I){g.info(function(){return"TIMEOUT: "+I})}on.prototype.info=function(){};function qn(g,I){if(!g.g)return I;if(!I)return null;try{const We=JSON.parse(I);if(We){for(g=0;g<We.length;g++)if(Array.isArray(We[g])){var M=We[g];if(!(M.length<2)){var J=M[1];if(Array.isArray(J)&&!(J.length<1)){var Fe=J[0];if(Fe!="noop"&&Fe!="stop"&&Fe!="close")for(let bt=1;bt<J.length;bt++)J[bt]=""}}}}return St(We)}catch{return I}}var rn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ln={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},kn;function Mr(){}f(Mr,Dt),Mr.prototype.g=function(){return new XMLHttpRequest},kn=new Mr;function Zr(g){return encodeURIComponent(String(g))}function W(g){var I=1;g=g.split(":");const M=[];for(;I>0&&g.length;)M.push(g.shift()),I--;return g.length&&M.push(g.join(":")),M}function ie(g,I,M,J){this.j=g,this.i=I,this.l=M,this.S=J||1,this.V=new be(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ee}function ee(){this.i=null,this.g="",this.h=!1}var ne={},oe={};function le(g,I,M){g.M=1,g.A=Ra(Lr(I)),g.u=M,g.R=!0,De(g,null)}function De(g,I){g.F=Date.now(),Oe(g),g.B=Lr(g.A);var M=g.B,J=g.S;Array.isArray(J)||(J=[String(J)]),$l(M.i,"t",J),g.C=0,M=g.j.L,g.h=new ee,g.g=Ft(g.j,M?I:null,!g.u),g.P>0&&(g.O=new Ht(u(g.Y,g,g.g),g.P)),I=g.V,M=g.g,J=g.ba;var Fe="readystatechange";Array.isArray(Fe)||(Fe&&(tt[0]=Fe.toString()),Fe=tt);for(let We=0;We<Fe.length;We++){const bt=Ae(M,Fe[We],J||I.handleEvent,!1,I.h||I);if(!bt)break;I.g[bt.key]=bt}I=g.J?Ie(g.J):{},g.u?(g.v||(g.v="POST"),I["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,I)):(g.v="GET",g.g.ea(g.B,g.v,null,I)),Zt(),Sr(g.i,g.v,g.B,g.l,g.S,g.u)}ie.prototype.ba=function(g){g=g.target;const I=this.O;I&&Ot(g)==3?I.j():this.Y(g)},ie.prototype.Y=function(g){try{if(g==this.g)e:{const gr=Ot(this.g),In=this.g.ya(),Br=this.g.ca();if(!(gr<3)&&(gr!=3||this.g&&(this.h.h||this.g.la()||ut(this.g)))){this.K||gr!=4||In==7||(In==8||Br<=0?Zt(3):Zt(2)),gt(this);var I=this.g.ca();this.X=I;var M=Te(this);if(this.o=I==200,yr(this.i,this.v,this.B,this.l,this.S,gr,I),this.o){if(this.U&&!this.L){t:{if(this.g){var J,Fe=this.g;if((J=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(J)){var We=J;break t}}We=null}if(g=We)Fn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Et(this,g);else{this.o=!1,this.m=3,Wt(12),pt(this),kt(this);break e}}if(this.R){g=!0;let Pn;for(;!this.K&&this.C<M.length;)if(Pn=Me(this,M),Pn==oe){gr==4&&(this.m=4,Wt(14),g=!1),Fn(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==ne){this.m=4,Wt(15),Fn(this.i,this.l,M,"[Invalid Chunk]"),g=!1;break}else Fn(this.i,this.l,Pn,null),Et(this,Pn);if(je(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gr!=4||M.length!=0||this.h.h||(this.m=1,Wt(16),g=!1),this.o=this.o&&g,!g)Fn(this.i,this.l,M,"[Invalid Chunked Response]"),pt(this),kt(this);else if(M.length>0&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.aa&&!bt.P&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),ni(bt),bt.P=!0,Wt(11))}}else Fn(this.i,this.l,M,null),Et(this,M);gr==4&&pt(this),this.o&&!this.K&&(gr==4?ae(this.j,this):(this.o=!1,Oe(this)))}else sr(this.g),I==400&&M.indexOf("Unknown SID")>0?(this.m=3,Wt(12)):(this.m=0,Wt(13)),pt(this),kt(this)}}}catch{}finally{}};function Te(g){if(!je(g))return g.g.la();const I=ut(g.g);if(I==="")return"";let M="";const J=I.length,Fe=Ot(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return pt(g),kt(g),"";g.h.i=new a.TextDecoder}for(let We=0;We<J;We++)g.h.h=!0,M+=g.h.i.decode(I[We],{stream:!(Fe&&We==J-1)});return I.length=0,g.h.g+=M,g.C=0,g.h.g}function je(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Me(g,I){var M=g.C,J=I.indexOf(`
`,M);return J==-1?oe:(M=Number(I.substring(M,J)),isNaN(M)?ne:(J+=1,J+M>I.length?oe:(I=I.slice(J,J+M),g.C=J+M,I)))}ie.prototype.cancel=function(){this.K=!0,pt(this)};function Oe(g){g.T=Date.now()+g.H,ht(g,g.H)}function ht(g,I){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Tt(u(g.aa,g),I)}function gt(g){g.D&&(a.clearTimeout(g.D),g.D=null)}ie.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Jt(this.i,this.B),this.M!=2&&(Zt(),Wt(17)),pt(this),this.m=2,kt(this)):ht(this,this.T-g)};function kt(g){g.j.I==0||g.K||ae(g.j,g)}function pt(g){gt(g);var I=g.O;I&&typeof I.dispose=="function"&&I.dispose(),g.O=null,ct(g.V),g.g&&(I=g.g,g.g=null,I.abort(),I.dispose())}function Et(g,I){try{var M=g.j;if(M.I!=0&&(M.g==g||$n(M.h,g))){if(!g.L&&$n(M.h,g)&&M.I==3){try{var J=M.Ba.g.parse(I)}catch{J=null}if(Array.isArray(J)&&J.length==3){var Fe=J;if(Fe[0]==0){e:if(!M.v){if(M.g)if(M.g.F+3e3<g.F)U(M),jr(M);else break e;ar(M),Wt(18)}}else M.xa=Fe[1],0<M.xa-M.K&&Fe[2]<37500&&M.F&&M.A==0&&!M.C&&(M.C=Tt(u(M.Va,M),6e3));nn(M.h)<=1&&M.ta&&(M.ta=void 0)}else Le(M,11)}else if((g.L||M.g==g)&&U(M),!L(I))for(Fe=M.Ba.g.parse(I),I=0;I<Fe.length;I++){let Br=Fe[I];const Pn=Br[0];if(!(Pn<=M.K))if(M.K=Pn,Br=Br[1],M.I==2)if(Br[0]=="c"){M.M=Br[1],M.ba=Br[2];const Vi=Br[3];Vi!=null&&(M.ka=Vi,M.j.info("VER="+M.ka));const ms=Br[4];ms!=null&&(M.za=ms,M.j.info("SVER="+M.za));const Ln=Br[5];Ln!=null&&typeof Ln=="number"&&Ln>0&&(J=1.5*Ln,M.O=J,M.j.info("backChannelRequestTimeoutMs_="+J)),J=M;const gs=g.g;if(gs){const Oa=gs.g?gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oa){var We=J.h;We.g||Oa.indexOf("spdy")==-1&&Oa.indexOf("quic")==-1&&Oa.indexOf("h2")==-1||(We.j=We.l,We.g=new Set,We.h&&(hi(We,We.h),We.h=null))}if(J.G){const il=gs.g?gs.g.getResponseHeader("X-HTTP-Session-Id"):null;il&&(J.wa=il,Or(J.J,J.G,il))}}M.I=3,M.l&&M.l.ra(),M.aa&&(M.T=Date.now()-g.F,M.j.info("Handshake RTT: "+M.T+"ms")),J=M;var bt=g;if(J.na=$e(J,J.L?J.ba:null,J.W),bt.L){di(J.h,bt);var gr=bt,In=J.O;In&&(gr.H=In),gr.D&&(gt(gr),Oe(gr)),J.g=bt}else ri(J);M.i.length>0&&Ls(M)}else Br[0]!="stop"&&Br[0]!="close"||Le(M,7);else M.I==3&&(Br[0]=="stop"||Br[0]=="close"?Br[0]=="stop"?Le(M,7):Ar(M):Br[0]!="noop"&&M.l&&M.l.qa(Br),M.A=0)}}Zt(4)}catch{}}var rr=class{constructor(g,I){this.g=g,this.map=I}};function Tr(g){this.l=g||10,a.PerformanceNavigationTiming?(g=a.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vr(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function nn(g){return g.h?1:g.g?g.g.size:0}function $n(g,I){return g.h?g.h==I:g.g?g.g.has(I):!1}function hi(g,I){g.g?g.g.add(I):g.h=I}function di(g,I){g.h&&g.h==I?g.h=null:g.g&&g.g.has(I)&&g.g.delete(I)}Tr.prototype.cancel=function(){if(this.i=Jn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Jn(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let I=g.i;for(const M of g.g.values())I=I.concat(M.G);return I}return d(g.i)}var cn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cn(g,I){if(g){g=g.split("&");for(let M=0;M<g.length;M++){const J=g[M].indexOf("=");let Fe,We=null;J>=0?(Fe=g[M].substring(0,J),We=g[M].substring(J+1)):Fe=g[M],I(Fe,We?decodeURIComponent(We.replace(/\+/g," ")):"")}}}function Xr(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let I;g instanceof Xr?(this.l=g.l,br(this,g.j),this.o=g.o,this.g=g.g,Wn(this,g.u),this.h=g.h,wn(this,ro(g.i)),this.m=g.m):g&&(I=String(g).match(cn))?(this.l=!1,br(this,I[1]||"",!0),this.o=Zn(I[2]||""),this.g=Zn(I[3]||"",!0),Wn(this,I[4]),this.h=Zn(I[5]||"",!0),wn(this,I[6]||"",!0),this.m=Zn(I[7]||"")):(this.l=!1,this.i=new ja(null,this.l))}Xr.prototype.toString=function(){const g=[];var I=this.j;I&&g.push(Sn(I,Io,!0),":");var M=this.g;return(M||I=="file")&&(g.push("//"),(I=this.o)&&g.push(Sn(I,Io,!0),"@"),g.push(Zr(M).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.u,M!=null&&g.push(":",String(M))),(M=this.h)&&(this.g&&M.charAt(0)!="/"&&g.push("/"),g.push(Sn(M,M.charAt(0)=="/"?to:fu,!0))),(M=this.i.toString())&&g.push("?",M),(M=this.m)&&g.push("#",Sn(M,ei)),g.join("")},Xr.prototype.resolve=function(g){const I=Lr(this);let M=!!g.j;M?br(I,g.j):M=!!g.o,M?I.o=g.o:M=!!g.g,M?I.g=g.g:M=g.u!=null;var J=g.h;if(M)Wn(I,g.u);else if(M=!!g.h){if(J.charAt(0)!="/")if(this.g&&!this.h)J="/"+J;else{var Fe=I.h.lastIndexOf("/");Fe!=-1&&(J=I.h.slice(0,Fe+1)+J)}if(Fe=J,Fe==".."||Fe==".")J="";else if(Fe.indexOf("./")!=-1||Fe.indexOf("/.")!=-1){J=Fe.lastIndexOf("/",0)==0,Fe=Fe.split("/");const We=[];for(let bt=0;bt<Fe.length;){const gr=Fe[bt++];gr=="."?J&&bt==Fe.length&&We.push(""):gr==".."?((We.length>1||We.length==1&&We[0]!="")&&We.pop(),J&&bt==Fe.length&&We.push("")):(We.push(gr),J=!0)}J=We.join("/")}else J=Fe}return M?I.h=J:M=g.i.toString()!=="",M?wn(I,ro(g.i)):M=!!g.m,M&&(I.m=g.m),I};function Lr(g){return new Xr(g)}function br(g,I,M){g.j=M?Zn(I,!0):I,g.j&&(g.j=g.j.replace(/:$/,""))}function Wn(g,I){if(I){if(I=Number(I),isNaN(I)||I<0)throw Error("Bad port number "+I);g.u=I}else g.u=null}function wn(g,I,M){I instanceof ja?(g.i=I,fs(g.i,g.l)):(M||(I=Sn(I,Ws)),g.i=new ja(I,g.l))}function Or(g,I,M){g.i.set(I,M)}function Ra(g){return Or(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Zn(g,I){return g?I?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Sn(g,I,M){return typeof g=="string"?(g=encodeURI(g).replace(I,$s),M&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function $s(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Io=/[#\/\?@]/g,fu=/[#\?:]/g,to=/[#\?]/g,Ws=/[#\?@]/g,ei=/#/g;function ja(g,I){this.h=this.g=null,this.i=g||null,this.j=!!I}function ds(g){g.g||(g.g=new Map,g.h=0,g.i&&Cn(g.i,function(I,M){g.add(decodeURIComponent(I.replace(/\+/g," ")),M)}))}t=ja.prototype,t.add=function(g,I){ds(this),this.i=null,g=Gs(this,g);let M=this.g.get(g);return M||this.g.set(g,M=[]),M.push(I),this.h+=1,this};function Fa(g,I){ds(g),I=Gs(g,I),g.g.has(I)&&(g.i=null,g.h-=g.g.get(I).length,g.g.delete(I))}function Hl(g,I){return ds(g),I=Gs(g,I),g.g.has(I)}t.forEach=function(g,I){ds(this),this.g.forEach(function(M,J){M.forEach(function(Fe){g.call(I,Fe,J,this)},this)},this)};function ql(g,I){ds(g);let M=[];if(typeof I=="string")Hl(g,I)&&(M=M.concat(g.g.get(Gs(g,I))));else for(g=Array.from(g.g.values()),I=0;I<g.length;I++)M=M.concat(g[I]);return M}t.set=function(g,I){return ds(this),this.i=null,g=Gs(this,g),Hl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[I]),this.h+=1,this},t.get=function(g,I){return g?(g=ql(this,g),g.length>0?String(g[0]):I):I};function $l(g,I,M){Fa(g,I),M.length>0&&(g.i=null,g.g.set(Gs(g,I),d(M)),g.h+=M.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],I=Array.from(this.g.keys());for(let J=0;J<I.length;J++){var M=I[J];const Fe=Zr(M);M=ql(this,M);for(let We=0;We<M.length;We++){let bt=Fe;M[We]!==""&&(bt+="="+Zr(M[We])),g.push(bt)}}return this.i=g.join("&")};function ro(g){const I=new ja;return I.i=g.i,g.g&&(I.g=new Map(g.g),I.h=g.h),I}function Gs(g,I){return I=String(I),g.j&&(I=I.toLowerCase()),I}function fs(g,I){I&&!g.j&&(ds(g),g.i=null,g.g.forEach(function(M,J){const Fe=J.toLowerCase();J!=Fe&&(Fa(this,J),$l(this,Fe,M))},g)),g.j=I}function Wl(g,I){const M=new on;if(a.Image){const J=new Image;J.onload=h(Xi,M,"TestLoadImage: loaded",!0,I,J),J.onerror=h(Xi,M,"TestLoadImage: error",!1,I,J),J.onabort=h(Xi,M,"TestLoadImage: abort",!1,I,J),J.ontimeout=h(Xi,M,"TestLoadImage: timeout",!1,I,J),a.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=g}else I(!1)}function Da(g,I){const M=new on,J=new AbortController,Fe=setTimeout(()=>{J.abort(),Xi(M,"TestPingServer: timeout",!1,I)},1e4);fetch(g,{signal:J.signal}).then(We=>{clearTimeout(Fe),We.ok?Xi(M,"TestPingServer: ok",!0,I):Xi(M,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(Fe),Xi(M,"TestPingServer: error",!1,I)})}function Xi(g,I,M,J,Fe){try{Fe&&(Fe.onload=null,Fe.onerror=null,Fe.onabort=null,Fe.ontimeout=null),J(M)}catch{}}function Gl(){this.g=new jt}function cr(g){this.i=g.Sb||null,this.h=g.ab||!1}f(cr,Dt),cr.prototype.g=function(){return new no(this.i,this.h)};function no(g,I){fe.call(this),this.H=g,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(no,fe),t=no.prototype,t.open=function(g,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=I,this.readyState=1,V(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const I={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(I.body=g),(this.H||a).fetch(new Request(this.D,I)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ma(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,V(this)),this.g&&(this.readyState=3,V(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;nl(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function nl(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var I=g.value?g.value:new Uint8Array(0);(I=this.B.decode(I,{stream:!g.done}))&&(this.response=this.responseText+=I)}g.done?Ma(this):V(this),this.readyState==3&&nl(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,Ma(this))},t.Na=function(g){this.g&&(this.response=g,Ma(this))},t.ga=function(){this.g&&Ma(this)};function Ma(g){g.readyState=4,g.l=null,g.j=null,g.B=null,V(g)}t.setRequestHeader=function(g,I){this.A.append(g,I)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],I=this.h.entries();for(var M=I.next();!M.done;)M=M.value,g.push(M[0]+": "+M[1]),M=I.next();return g.join(`\r
`)};function V(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(no.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function pe(g){let I="";return _e(g,function(M,J){I+=J,I+=":",I+=M,I+=`\r
`}),I}function Re(g,I,M){e:{for(J in M){var J=!1;break e}J=!0}J||(M=pe(M),typeof g=="string"?M!=null&&Zr(M):Or(g,I,M))}function Ve(g){fe.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Ve,fe);var it=/^https?$/i,Qe=["POST","PUT"];t=Ve.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,I,M,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);I=I?I.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kn.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(I,String(g),!0),this.B=!1}catch(We){er(this,We);return}if(g=M||"",M=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var Fe in J)M.set(Fe,J[Fe]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const We of J.keys())M.set(We,J.get(We));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(M.keys()).find(We=>We.toLowerCase()=="content-type"),Fe=a.FormData&&g instanceof a.FormData,!(Array.prototype.indexOf.call(Qe,I,void 0)>=0)||J||Fe||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[We,bt]of M)this.g.setRequestHeader(We,bt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(We){er(this,We)}};function er(g,I){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=I,g.o=5,Mt(g),ur(g)}function Mt(g){g.A||(g.A=!0,qe(g,"complete"),qe(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,qe(this,"complete"),qe(this,"abort"),ur(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ur(this,!0)),Ve.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?At(this):this.Xa())},t.Xa=function(){At(this)};function At(g){if(g.h&&typeof s<"u"){if(g.v&&Ot(g)==4)setTimeout(g.Ca.bind(g),0);else if(qe(g,"readystatechange"),Ot(g)==4){g.h=!1;try{const We=g.ca();e:switch(We){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var M;if(!(M=I)){var J;if(J=We===0){let bt=String(g.D).match(cn)[1]||null;!bt&&a.self&&a.self.location&&(bt=a.self.location.protocol.slice(0,-1)),J=!it.test(bt?bt.toLowerCase():"")}M=J}if(M)qe(g,"complete"),qe(g,"success");else{g.o=6;try{var Fe=Ot(g)>2?g.g.statusText:""}catch{Fe=""}g.l=Fe+" ["+g.ca()+"]",Mt(g)}}finally{ur(g)}}}}function ur(g,I){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const M=g.g;g.g=null,I||qe(g,"ready");try{M.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ot(g){return g.g?g.g.readyState:0}t.ca=function(){try{return Ot(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var I=this.g.responseText;return g&&I.indexOf(g)==0&&(I=I.substring(g.length)),Rt(I)}};function ut(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function sr(g){const I={};g=(g.g&&Ot(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<g.length;J++){if(L(g[J]))continue;var M=W(g[J]);const Fe=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const We=I[Fe]||[];I[Fe]=We,We.push(M)}Ue(I,function(J){return J.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wt(g,I,M){return M&&M.internalChannelParams&&M.internalChannelParams[g]||I}function Rr(g){this.za=0,this.i=[],this.j=new on,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wt("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wt("baseRetryDelayMs",5e3,g),this.Za=wt("retryDelaySeedMs",1e4,g),this.Ta=wt("forwardChannelMaxRetries",2,g),this.va=wt("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Tr(g&&g.concurrentRequestLimit),this.Ba=new Gl,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Rr.prototype,t.ka=8,t.I=1,t.connect=function(g,I,M,J){Wt(0),this.W=g,this.H=I||{},M&&J!==void 0&&(this.H.OSID=M,this.H.OAID=J),this.F=this.X,this.J=$e(this,null,this.W),Ls(this)};function Ar(g){if(An(g),g.I==3){var I=g.V++,M=Lr(g.J);if(Or(M,"SID",g.M),Or(M,"RID",I),Or(M,"TYPE","terminate"),ti(g,M),I=new ie(g,g.j,I),I.M=2,I.A=Ra(Lr(M)),M=!1,a.navigator&&a.navigator.sendBeacon)try{M=a.navigator.sendBeacon(I.A.toString(),"")}catch{}!M&&a.Image&&(new Image().src=I.A,M=!0),M||(I.g=Ft(I.j,null),I.g.ea(I.A)),I.F=Date.now(),Oe(I)}Ee(g)}function jr(g){g.g&&(ni(g),g.g.cancel(),g.g=null)}function An(g){jr(g),g.v&&(a.clearTimeout(g.v),g.v=null),U(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&a.clearTimeout(g.m),g.m=null)}function Ls(g){if(!vr(g.h)&&!g.m){g.m=!0;var I=g.Ea;q||k(),G||(q(),G=!0),E.add(I,g),g.D=0}}function kr(g,I){return nn(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=I.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Tt(u(g.Ea,g,I),xe(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const Fe=new ie(this,this.j,g);let We=this.o;if(this.U&&(We?(We=Ie(We),O(We,this.U)):We=this.U),this.u!==null||this.R||(Fe.J=We,We=null),this.S)e:{for(var I=0,M=0;M<this.i.length;M++){t:{var J=this.i[M];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(I+=J,I>4096){I=M;break e}if(I===4096||M===this.i.length-1){I=M+1;break e}}I=1e3}else I=1e3;I=ps(this,Fe,I),M=Lr(this.J),Or(M,"RID",g),Or(M,"CVER",22),this.G&&Or(M,"X-HTTP-Session-Id",this.G),ti(this,M),We&&(this.R?I="headers="+Zr(pe(We))+"&"+I:this.u&&Re(M,this.u,We)),hi(this.h,Fe),this.Ra&&Or(M,"TYPE","init"),this.S?(Or(M,"$req",I),Or(M,"SID","null"),Fe.U=!0,le(Fe,M,null)):le(Fe,M,I),this.I=2}}else this.I==3&&(g?aa(this,g):this.i.length==0||vr(this.h)||aa(this))};function aa(g,I){var M;I?M=I.l:M=g.V++;const J=Lr(g.J);Or(J,"SID",g.M),Or(J,"RID",M),Or(J,"AID",g.K),ti(g,J),g.u&&g.o&&Re(J,g.u,g.o),M=new ie(g,g.j,M,g.D+1),g.u===null&&(M.J=g.o),I&&(g.i=I.G.concat(g.i)),I=ps(g,M,1e3),M.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),hi(g.h,M),le(M,J,I)}function ti(g,I){g.H&&_e(g.H,function(M,J){Or(I,J,M)}),g.l&&_e({},function(M,J){Or(I,J,M)})}function ps(g,I,M){M=Math.min(g.i.length,M);const J=g.l?u(g.l.Ka,g.l,g):null;e:{var Fe=g.i;let gr=-1;for(;;){const In=["count="+M];gr==-1?M>0?(gr=Fe[0].g,In.push("ofs="+gr)):gr=0:In.push("ofs="+gr);let Br=!0;for(let Pn=0;Pn<M;Pn++){var We=Fe[Pn].g;const Vi=Fe[Pn].map;if(We-=gr,We<0)gr=Math.max(0,Fe[Pn].g-100),Br=!1;else try{We="req"+We+"_"||"";try{var bt=Vi instanceof Map?Vi:Object.entries(Vi);for(const[ms,Ln]of bt){let gs=Ln;o(Ln)&&(gs=St(Ln)),In.push(We+ms+"="+encodeURIComponent(gs))}}catch(ms){throw In.push(We+"type="+encodeURIComponent("_badmap")),ms}}catch{J&&J(Vi)}}if(Br){bt=In.join("&");break e}}bt=void 0}return g=g.i.splice(0,M),I.G=g,bt}function ri(g){if(!g.g&&!g.v){g.Y=1;var I=g.Da;q||k(),G||(q(),G=!0),E.add(I,g),g.A=0}}function ar(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Tt(u(g.Da,g),xe(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,b(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Tt(u(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Wt(10),jr(this),b(this))};function ni(g){g.B!=null&&(a.clearTimeout(g.B),g.B=null)}function b(g){g.g=new ie(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var I=Lr(g.na);Or(I,"RID","rpc"),Or(I,"SID",g.M),Or(I,"AID",g.K),Or(I,"CI",g.F?"0":"1"),!g.F&&g.ia&&Or(I,"TO",g.ia),Or(I,"TYPE","xmlhttp"),ti(g,I),g.u&&g.o&&Re(I,g.u,g.o),g.O&&(g.g.H=g.O);var M=g.g;g=g.ba,M.M=1,M.A=Ra(Lr(I)),M.u=null,M.R=!0,De(M,g)}t.Va=function(){this.C!=null&&(this.C=null,jr(this),ar(this),Wt(19))};function U(g){g.C!=null&&(a.clearTimeout(g.C),g.C=null)}function ae(g,I){var M=null;if(g.g==I){U(g),ni(g),g.g=null;var J=2}else if($n(g.h,I))M=I.G,di(g.h,I),J=1;else return;if(g.I!=0){if(I.o)if(J==1){M=I.u?I.u.length:0,I=Date.now()-I.F;var Fe=g.D;J=Pr(),qe(J,new Ye(J,M)),Ls(g)}else ri(g);else if(Fe=I.m,Fe==3||Fe==0&&I.X>0||!(J==1&&kr(g,I)||J==2&&ar(g)))switch(M&&M.length>0&&(I=g.h,I.i=I.i.concat(M)),Fe){case 1:Le(g,5);break;case 4:Le(g,10);break;case 3:Le(g,6);break;default:Le(g,2)}}}function xe(g,I){let M=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(M*=2),M*I}function Le(g,I){if(g.j.info("Error code "+I),I==2){var M=u(g.bb,g),J=g.Ua;const Fe=!J;J=new Xr(J||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||br(J,"https"),Ra(J),Fe?Wl(J.toString(),M):Da(J.toString(),M)}else Wt(2);g.I=0,g.l&&g.l.pa(I),Ee(g),An(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function Ee(g){if(g.I=0,g.ja=[],g.l){const I=Jn(g.h);(I.length!=0||g.i.length!=0)&&(v(g.ja,I),v(g.ja,g.i),g.h.i.length=0,d(g.i),g.i.length=0),g.l.oa()}}function $e(g,I,M){var J=M instanceof Xr?Lr(M):new Xr(M);if(J.g!="")I&&(J.g=I+"."+J.g),Wn(J,J.u);else{var Fe=a.location;J=Fe.protocol,I=I?I+"."+Fe.hostname:Fe.hostname,Fe=+Fe.port;const We=new Xr(null);J&&br(We,J),I&&(We.g=I),Fe&&Wn(We,Fe),M&&(We.h=M),J=We}return M=g.G,I=g.wa,M&&I&&Or(J,M,I),Or(J,"VER",g.ka),ti(g,J),J}function Ft(g,I,M){if(I&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return I=g.Aa&&!g.ma?new Ve(new cr({ab:M})):new Ve(g.ma),I.Fa(g.L),I}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bt(){}t=Bt.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function _t(){}_t.prototype.g=function(g,I){return new qt(g,I)};function qt(g,I){fe.call(this),this.g=new Rr(I),this.l=g,this.h=I&&I.messageUrlParams||null,g=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(g?g["X-WebChannel-Content-Type"]=I.messageContentType:g={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.sa&&(g?g["X-WebChannel-Client-Profile"]=I.sa:g={"X-WebChannel-Client-Profile":I.sa}),this.g.U=g,(g=I&&I.Qb)&&!L(g)&&(this.g.u=g),this.A=I&&I.supportsCrossDomainXhr||!1,this.v=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!L(I)&&(this.g.G=I,g=this.h,g!==null&&I in g&&(g=this.h,I in g&&delete g[I])),this.j=new un(this)}f(qt,fe),qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Ar(this.g)},qt.prototype.o=function(g){var I=this.g;if(typeof g=="string"){var M={};M.__data__=g,g=M}else this.v&&(M={},M.__data__=St(g),g=M);I.i.push(new rr(I.Ya++,g)),I.I==3&&Ls(I)},qt.prototype.N=function(){this.g.l=null,delete this.j,Ar(this.g),delete this.g,qt.Z.N.call(this)};function Cr(g){Ge.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var I=g.__sm__;if(I){e:{for(const M in I){g=M;break e}g=void 0}(this.i=g)&&(g=this.i,I=I!==null&&g in I?I[g]:void 0),this.data=I}else this.data=g}f(Cr,Ge);function sn(){Lt.call(this),this.status=1}f(sn,Lt);function un(g){this.g=g}f(un,Bt),un.prototype.ra=function(){qe(this.g,"a")},un.prototype.qa=function(g){qe(this.g,new Cr(g))},un.prototype.pa=function(g){qe(this.g,new sn)},un.prototype.oa=function(){qe(this.g,"b")},_t.prototype.createWebChannel=_t.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,O6=function(){return new _t},M6=function(){return Pr()},D6=mr,Vv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},rn.NO_ERROR=0,rn.TIMEOUT=8,rn.HTTP_ERROR=6,dg=rn,ln.COMPLETE="complete",F6=ln,Wr.EventType=hr,hr.OPEN="a",hr.CLOSE="b",hr.ERROR="c",hr.MESSAGE="d",fe.prototype.listen=fe.prototype.J,Vf=Wr,Ve.prototype.listenOnce=Ve.prototype.K,Ve.prototype.getLastError=Ve.prototype.Ha,Ve.prototype.getLastErrorCode=Ve.prototype.ya,Ve.prototype.getStatus=Ve.prototype.ca,Ve.prototype.getResponseJson=Ve.prototype.La,Ve.prototype.getResponseText=Ve.prototype.la,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Fa,j6=Ve}).apply(typeof wm<"u"?wm:typeof self<"u"?self:typeof window<"u"?window:{});const uS="@firebase/firestore",hS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Es.UNAUTHENTICATED=new Es(null),Es.GOOGLE_CREDENTIALS=new Es("google-credentials-uid"),Es.FIRST_PARTY=new Es("first-party-uid"),Es.MOCK_USER=new Es("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=new T5("@firebase/firestore");function Eh(){return Wu.logLevel}function Ut(t,...e){if(Wu.logLevel<=Vr.DEBUG){const r=e.map(I5);Wu.debug(`Firestore (${qd}): ${t}`,...r)}}function Ll(t,...e){if(Wu.logLevel<=Vr.ERROR){const r=e.map(I5);Wu.error(`Firestore (${qd}): ${t}`,...r)}}function Pd(t,...e){if(Wu.logLevel<=Vr.WARN){const r=e.map(I5);Wu.warn(`Firestore (${qd}): ${t}`,...r)}}function I5(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,B6(t,n,r)}function B6(t,e,r){let n=`FIRESTORE (${qd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Ll(n),new Error(n)}function Yr(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||B6(e,i,n)}function xr(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class It extends Ul{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Es.UNAUTHENTICATED))}shutdown(){}}class aD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class oD{constructor(e){this.t=e,this.currentUser=Es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Yr(this.o===void 0,42304);let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new Go;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Go,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{Ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Go)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Yr(typeof n.accessToken=="string",31837,{l:n}),new U6(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Yr(e===null||typeof e=="string",2055,{h:e}),new Es(e)}}class lD{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Es.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cD{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new lD(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Es.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uD{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,go(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Yr(this.o===void 0,3512);const n=s=>{s.error!=null&&Ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Ut("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{Ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Yr(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new dS(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=hD(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=e.charAt(i[s]%62))}return n}}function zr(t,e){return t<e?-1:t>e?1:0}function zv(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t.charAt(n),s=e.charAt(n);if(i!==s)return qx(i)===qx(s)?zr(i,s):qx(i)?1:-1}return zr(t.length,e.length)}const dD=55296,fD=57343;function qx(t){const e=t.charCodeAt(0);return e>=dD&&e<=fD}function Ld(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="__name__";class Uo{constructor(e,r,n){r===void 0?r=0:r>e.length&&lr(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&lr(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Uo.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Uo?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const s=Uo.compareSegments(e.get(i),r.get(i));if(s!==0)return s}return zr(e.length,r.length)}static compareSegments(e,r){const n=Uo.isNumericId(e),i=Uo.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?Uo.extractNumericId(e).compare(Uo.extractNumericId(r)):zv(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hc.fromString(e.substring(4,e.length-2))}}class bn extends Uo{construct(e,r,n){return new bn(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new It(nt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new bn(r)}static emptyPath(){return new bn([])}}const pD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class is extends Uo{construct(e,r,n){return new is(e,r,n)}static isValidIdentifier(e){return pD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),is.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fS}static keyField(){return new is([fS])}static fromServerFormat(e){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new It(nt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new It(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new It(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new It(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new is(r)}static emptyPath(){return new is([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.path=e}static fromPath(e){return new or(bn.fromString(e))}static fromName(e){return new or(bn.fromString(e).popFirst(5))}static empty(){return new or(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return bn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new or(new bn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t,e,r){if(!r)throw new It(nt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mD(t,e,r,n){if(e===!0&&n===!0)throw new It(nt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function pS(t){if(!or.isDocumentKey(t))throw new It(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mS(t){if(or.isDocumentKey(t))throw new It(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function z6(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function f2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":lr(12329,{type:typeof t})}function Ts(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new It(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=f2(t);throw new It(nt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function gD(t,e){if(e<=0)throw new It(nt.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t,e){const r={typeString:t};return e&&(r.value=e),r}function mp(t,e){if(!z6(t))throw new It(nt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const i=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const a=t[n];if(i&&typeof a!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new It(nt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=-62135596800,xS=1e6;class On{static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*xS);return new On(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new It(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new It(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<gS)throw new It(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xS}_compareTo(e){return this.seconds===e.seconds?zr(this.nanoseconds,e.nanoseconds):zr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:On._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(mp(e,On._jsonSchema))return new On(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}On._jsonSchemaVersion="firestore/timestamp/1.0",On._jsonSchema={type:Ci("string",On._jsonSchemaVersion),seconds:Ci("number"),nanoseconds:Ci("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{static fromTimestamp(e){return new dr(e)}static min(){return new dr(new On(0,0))}static max(){return new dr(new On(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=-1;function xD(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=dr.fromTimestamp(n===1e9?new On(r+1,0):new On(r,n));return new Yc(i,or.empty(),e)}function yD(t){return new Yc(t.readTime,t.key,U0)}class Yc{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Yc(dr.min(),or.empty(),U0)}static max(){return new Yc(dr.max(),or.empty(),U0)}}function vD(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=or.comparator(t.documentKey,e.documentKey),r!==0?r:zr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _D{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $d(t){if(t.code!==nt.FAILED_PRECONDITION||t.message!==wD)throw t;Ut("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&lr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new lt((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof lt?r:lt.resolve(r)}catch(r){return lt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):lt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):lt.reject(r)}static resolve(e){return new lt((r,n)=>{r(e)})}static reject(e){return new lt((r,n)=>{n(e)})}static waitFor(e){return new lt((r,n)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&r()},l=>n(l))}),a=!0,s===i&&r()})}static or(e){let r=lt.resolve(!1);for(const n of e)r=r.next(i=>i?lt.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,s)=>{n.push(r.call(this,i,s))}),this.waitFor(n)}static mapArray(e,r){return new lt((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;r(e[u]).next(h=>{a[u]=h,++o,o===s&&n(a)},h=>i(h))}})}static doWhile(e,r){return new lt((n,i)=>{const s=()=>{e()===!0?r().next(()=>{s()},i):n()};s()})}}function bD(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Wd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}p2.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=-1;function gp(t){return t==null}function r1(t){return t===0&&1/t==-1/0}function SD(t){return typeof t=="number"&&Number.isInteger(t)&&!r1(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6="";function AD(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=yS(e)),e=ED(t.get(r),e);return yS(e)}function ED(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const s=t.charAt(i);switch(s){case"\0":r+="";break;case H6:r+="";break;default:r+=s}}return r}function yS(t){return t+H6+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function uu(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function q6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,r){this.comparator=e,this.root=r||ns.EMPTY}insert(e,r){return new Qn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(e){return new Qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ns.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _m(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _m(this.root,e,this.comparator,!1)}getReverseIterator(){return new _m(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _m(this.root,e,this.comparator,!0)}}class _m{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ns{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n??ns.RED,this.left=i??ns.EMPTY,this.right=s??ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,s){return new ns(e??this.key,r??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return ns.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lr(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw lr(27949);return e+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1;ns.EMPTY=new class{constructor(){this.size=0}get key(){throw lr(57766)}get value(){throw lr(16141)}get color(){throw lr(16727)}get left(){throw lr(29726)}get right(){throw lr(36894)}copy(e,r,n,i,s){return this}insert(e,r,n){return new ns(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.comparator=e,this.data=new Qn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new wS(this.data.getIterator())}getIteratorFrom(e){return new wS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ui)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ui(this.comparator);return r.data=e,r}}class wS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.fields=e,e.sort(is.comparator)}static empty(){return new Aa([])}unionWith(e){let r=new Ui(is.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Aa(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ld(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new $6("Invalid base64 string: "+s):s}}(e);return new us(r)}static fromUint8Array(e){const r=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new us(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}us.EMPTY_BYTE_STRING=new us("");const ND=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xc(t){if(Yr(!!t,39018),typeof t=="string"){let e=0;const r=ND.exec(t);if(Yr(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:vi(t.seconds),nanos:vi(t.nanos)}}function vi(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qc(t){return typeof t=="string"?us.fromBase64String(t):us.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6="server_timestamp",G6="__type__",K6="__previous_value__",Y6="__local_write_time__";function R5(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[G6])==null?void 0:n.stringValue)===W6}function m2(t){const e=t.mapValue.fields[K6];return R5(e)?m2(e):e}function V0(t){const e=Xc(t.mapValue.fields[Y6].timestampValue);return new On(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,r,n,i,s,a,o,l,u,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Hv="(default)";class z0{constructor(e,r){this.projectId=e,this.database=r||Hv}static empty(){return new z0("","")}get isDefaultDatabase(){return this.database===Hv}isEqual(e){return e instanceof z0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6="__type__",kD="__max__",bm={mapValue:{}},Q6="__vector__",n1="value";function Jc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?R5(t)?4:ID(t)?9007199254740991:CD(t)?10:11:lr(28295,{value:t})}function Zo(t,e){if(t===e)return!0;const r=Jc(t);if(r!==Jc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return V0(t).isEqual(V0(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Xc(i.timestampValue),o=Xc(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Qc(i.bytesValue).isEqual(Qc(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return vi(i.geoPointValue.latitude)===vi(s.geoPointValue.latitude)&&vi(i.geoPointValue.longitude)===vi(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return vi(i.integerValue)===vi(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=vi(i.doubleValue),o=vi(s.doubleValue);return a===o?r1(a)===r1(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Ld(t.arrayValue.values||[],e.arrayValue.values||[],Zo);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(vS(a)!==vS(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Zo(a[l],o[l])))return!1;return!0}(t,e);default:return lr(52216,{left:t})}}function H0(t,e){return(t.values||[]).find(r=>Zo(r,e))!==void 0}function Rd(t,e){if(t===e)return 0;const r=Jc(t),n=Jc(e);if(r!==n)return zr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return zr(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=vi(s.integerValue||s.doubleValue),l=vi(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return _S(t.timestampValue,e.timestampValue);case 4:return _S(V0(t),V0(e));case 5:return zv(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Qc(s),l=Qc(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const h=zr(o[u],l[u]);if(h!==0)return h}return zr(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=zr(vi(s.latitude),vi(a.latitude));return o!==0?o:zr(vi(s.longitude),vi(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return bS(t.arrayValue,e.arrayValue);case 10:return function(s,a){var p,d,v,y;const o=s.fields||{},l=a.fields||{},u=(p=o[n1])==null?void 0:p.arrayValue,h=(d=l[n1])==null?void 0:d.arrayValue,f=zr(((v=u==null?void 0:u.values)==null?void 0:v.length)||0,((y=h==null?void 0:h.values)==null?void 0:y.length)||0);return f!==0?f:bS(u,h)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===bm.mapValue&&a===bm.mapValue)return 0;if(s===bm.mapValue)return 1;if(a===bm.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=zv(l[f],h[f]);if(p!==0)return p;const d=Rd(o[l[f]],u[h[f]]);if(d!==0)return d}return zr(l.length,h.length)}(t.mapValue,e.mapValue);default:throw lr(23264,{he:r})}}function _S(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return zr(t,e);const r=Xc(t),n=Xc(e),i=zr(r.seconds,n.seconds);return i!==0?i:zr(r.nanos,n.nanos)}function bS(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const s=Rd(r[i],n[i]);if(s)return s}return zr(r.length,n.length)}function jd(t){return qv(t)}function qv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Xc(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Qc(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return or.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const s of r.values||[])i?i=!1:n+=",",n+=qv(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${qv(r.fields[a])}`;return i+"}"}(t.mapValue):lr(61005,{value:t})}function fg(t){switch(Jc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=m2(t);return e?16+fg(e):16;case 5:return 2*t.stringValue.length;case 6:return Qc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,s)=>i+fg(s),0)}(t.arrayValue);case 10:case 11:return function(n){let i=0;return uu(n.fields,(s,a)=>{i+=s.length+fg(a)}),i}(t.mapValue);default:throw lr(13486,{value:t})}}function SS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $v(t){return!!t&&"integerValue"in t}function j5(t){return!!t&&"arrayValue"in t}function AS(t){return!!t&&"nullValue"in t}function ES(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pg(t){return!!t&&"mapValue"in t}function CD(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[X6])==null?void 0:n.stringValue)===Q6}function r0(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return uu(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=r0(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=r0(t.arrayValue.values[r]);return e}return{...t}}function ID(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.value=e}static empty(){return new Us({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!pg(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=r0(r)}setAll(e){let r=is.emptyPath(),n={},i=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=o.popLast()}a?n[o.lastSegment()]=r0(a):i.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(e){const r=this.field(e.popLast());pg(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Zo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];pg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){uu(r,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new Us(r0(this.value))}}function J6(t){const e=[];return uu(t.fields,(r,n)=>{const i=new is([r]);if(pg(n)){const s=J6(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Aa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,r,n,i,s,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new $i(e,0,dr.min(),dr.min(),dr.min(),Us.empty(),0)}static newFoundDocument(e,r,n,i){return new $i(e,1,r,dr.min(),n,i,0)}static newNoDocument(e,r){return new $i(e,2,r,dr.min(),dr.min(),Us.empty(),0)}static newUnknownDocument(e,r){return new $i(e,3,r,dr.min(),dr.min(),Us.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(dr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Us.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Us.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $i&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $i(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,r){this.position=e,this.inclusive=r}}function NS(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?n=or.comparator(or.fromName(a.referenceValue),r.key):n=Rd(a,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function TS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Zo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,r="asc"){this.field=e,this.dir=r}}function PD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z6=class{};class Ti extends Z6{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new RD(e,r,n):r==="array-contains"?new DD(e,n):r==="in"?new MD(e,n):r==="not-in"?new OD(e,n):r==="array-contains-any"?new BD(e,n):new Ti(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new jD(e,n):new FD(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Rd(r,this.value)):r!==null&&Jc(this.value)===Jc(r)&&this.matchesComparison(Rd(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Eo extends Z6{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Eo(e,r)}matches(e){return ek(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ek(t){return t.op==="and"}function tk(t){return LD(t)&&ek(t)}function LD(t){for(const e of t.filters)if(e instanceof Eo)return!1;return!0}function Wv(t){if(t instanceof Ti)return t.field.canonicalString()+t.op.toString()+jd(t.value);if(tk(t))return t.filters.map(e=>Wv(e)).join(",");{const e=t.filters.map(r=>Wv(r)).join(",");return`${t.op}(${e})`}}function rk(t,e){return t instanceof Ti?function(n,i){return i instanceof Ti&&n.op===i.op&&n.field.isEqual(i.field)&&Zo(n.value,i.value)}(t,e):t instanceof Eo?function(n,i){return i instanceof Eo&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,a,o)=>s&&rk(a,i.filters[o]),!0):!1}(t,e):void lr(19439)}function nk(t){return t instanceof Ti?function(r){return`${r.field.canonicalString()} ${r.op} ${jd(r.value)}`}(t):t instanceof Eo?function(r){return r.op.toString()+" {"+r.getFilters().map(nk).join(" ,")+"}"}(t):"Filter"}class RD extends Ti{constructor(e,r,n){super(e,r,n),this.key=or.fromName(n.referenceValue)}matches(e){const r=or.comparator(e.key,this.key);return this.matchesComparison(r)}}class jD extends Ti{constructor(e,r){super(e,"in",r),this.keys=ik("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class FD extends Ti{constructor(e,r){super(e,"not-in",r),this.keys=ik("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function ik(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>or.fromName(n.referenceValue))}class DD extends Ti{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return j5(r)&&H0(r.arrayValue,this.value)}}class MD extends Ti{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&H0(this.value.arrayValue,r)}}class OD extends Ti{constructor(e,r){super(e,"not-in",r)}matches(e){if(H0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!H0(this.value.arrayValue,r)}}class BD extends Ti{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!j5(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>H0(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,r=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function kS(t,e=null,r=[],n=[],i=null,s=null,a=null){return new UD(t,e,r,n,i,s,a)}function F5(t){const e=xr(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Wv(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),gp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>jd(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>jd(n)).join(",")),e.Te=r}return e.Te}function D5(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!PD(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!rk(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TS(t.startAt,e.startAt)&&TS(t.endAt,e.endAt)}function Gv(t){return or.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,r=null,n=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function VD(t,e,r,n,i,s,a,o){return new Gd(t,e,r,n,i,s,a,o)}function g2(t){return new Gd(t)}function CS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sk(t){return t.collectionGroup!==null}function n0(t){const e=xr(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Ui(is.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new q0(s,n))}),r.has(is.keyField().canonicalString())||e.Ie.push(new q0(is.keyField(),n))}return e.Ie}function Ko(t){const e=xr(t);return e.Ee||(e.Ee=zD(e,n0(t))),e.Ee}function zD(t,e){if(t.limitType==="F")return kS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new q0(i.field,s)});const r=t.endAt?new i1(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new i1(t.startAt.position,t.startAt.inclusive):null;return kS(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Kv(t,e){const r=t.filters.concat([e]);return new Gd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function s1(t,e,r){return new Gd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function x2(t,e){return D5(Ko(t),Ko(e))&&t.limitType===e.limitType}function ak(t){return`${F5(Ko(t))}|lt:${t.limitType}`}function Nh(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>nk(i)).join(", ")}]`),gp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>jd(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>jd(i)).join(",")),`Target(${n})`}(Ko(t))}; limitType=${t.limitType})`}function y2(t,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):or.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,i){for(const s of n0(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(a,o,l){const u=NS(a,o,l);return a.inclusive?u<=0:u<0}(n.startAt,n0(n),i)||n.endAt&&!function(a,o,l){const u=NS(a,o,l);return a.inclusive?u>=0:u>0}(n.endAt,n0(n),i))}(t,e)}function HD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ok(t){return(e,r)=>{let n=!1;for(const i of n0(t)){const s=qD(i,e,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function qD(t,e,r){const n=t.field.isKeyField()?or.comparator(e.key,r.key):function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?Rd(l,u):lr(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return lr(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){uu(this.inner,(r,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return q6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=new Qn(or.comparator);function Rl(){return $D}const lk=new Qn(or.comparator);function zf(...t){let e=lk;for(const r of t)e=e.insert(r.key,r);return e}function ck(t){let e=lk;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Pu(){return i0()}function uk(){return i0()}function i0(){return new nh(t=>t.toString(),(t,e)=>t.isEqual(e))}const WD=new Qn(or.comparator),GD=new Ui(or.comparator);function Hr(...t){let e=GD;for(const r of t)e=e.add(r);return e}const KD=new Ui(zr);function YD(){return KD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:r1(e)?"-0":e}}function hk(t){return{integerValue:""+t}}function dk(t,e){return SD(e)?hk(e):M5(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this._=void 0}}function XD(t,e,r){return t instanceof $0?function(i,s){const a={fields:{[G6]:{stringValue:W6},[Y6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&R5(s)&&(s=m2(s)),s&&(a.fields[K6]=s),{mapValue:a}}(r,e):t instanceof W0?pk(t,e):t instanceof G0?mk(t,e):function(i,s){const a=fk(i,s),o=IS(a)+IS(i.Ae);return $v(a)&&$v(i.Ae)?hk(o):M5(i.serializer,o)}(t,e)}function QD(t,e,r){return t instanceof W0?pk(t,e):t instanceof G0?mk(t,e):r}function fk(t,e){return t instanceof K0?function(n){return $v(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class $0 extends v2{}class W0 extends v2{constructor(e){super(),this.elements=e}}function pk(t,e){const r=gk(e);for(const n of t.elements)r.some(i=>Zo(i,n))||r.push(n);return{arrayValue:{values:r}}}class G0 extends v2{constructor(e){super(),this.elements=e}}function mk(t,e){let r=gk(e);for(const n of t.elements)r=r.filter(i=>!Zo(i,n));return{arrayValue:{values:r}}}class K0 extends v2{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function IS(t){return vi(t.integerValue||t.doubleValue)}function gk(t){return j5(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,r){this.field=e,this.transform=r}}function JD(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof W0&&i instanceof W0||n instanceof G0&&i instanceof G0?Ld(n.elements,i.elements,Zo):n instanceof K0&&i instanceof K0?Zo(n.Ae,i.Ae):n instanceof $0&&i instanceof $0}(t.transform,e.transform)}class ZD{constructor(e,r){this.version=e,this.transformResults=r}}class ki{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ki}static exists(e){return new ki(void 0,e)}static updateTime(e){return new ki(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class w2{}function yk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yp(t.key,ki.none()):new xp(t.key,t.data,ki.none());{const r=t.data,n=Us.empty();let i=new Ui(is.comparator);for(let s of e.fields)if(!i.has(s)){let a=r.field(s);a===null&&s.length>1&&(s=s.popLast(),a=r.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new hu(t.key,n,new Aa(i.toArray()),ki.none())}}function eM(t,e,r){t instanceof xp?function(i,s,a){const o=i.value.clone(),l=LS(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof hu?function(i,s,a){if(!mg(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=LS(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(vk(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function s0(t,e,r,n){return t instanceof xp?function(s,a,o,l){if(!mg(s.precondition,a))return o;const u=s.value.clone(),h=RS(s.fieldTransforms,l,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof hu?function(s,a,o,l){if(!mg(s.precondition,a))return o;const u=RS(s.fieldTransforms,l,a),h=a.data;return h.setAll(vk(s)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(s,a,o){return mg(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function tM(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),s=fk(n.transform,i||null);s!=null&&(r===null&&(r=Us.empty()),r.set(n.field,s))}return r||null}function PS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Ld(n,i,(s,a)=>JD(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xp extends w2{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hu extends w2{constructor(e,r,n,i,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function vk(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function LS(t,e,r){const n=new Map;Yr(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,QD(a,o,r[i]))}return n}function RS(t,e,r){const n=new Map;for(const i of t){const s=i.transform,a=r.data.field(i.field);n.set(i.field,XD(s,a,e))}return n}class yp extends w2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wk extends w2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&eM(s,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=s0(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=s0(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=uk();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=r.has(i.key)?null:o;const l=yk(a,o);l!==null&&n.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(dr.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Hr())}isEqual(e){return this.batchId===e.batchId&&Ld(this.mutations,e.mutations,(r,n)=>PS(r,n))&&Ld(this.baseMutations,e.baseMutations,(r,n)=>PS(r,n))}}class O5{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Yr(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=function(){return WD}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new O5(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ei,Kr;function _k(t){switch(t){case nt.OK:return lr(64938);case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0;default:return lr(15467,{code:t})}}function bk(t){if(t===void 0)return Ll("GRPC error has no .code"),nt.UNKNOWN;switch(t){case Ei.OK:return nt.OK;case Ei.CANCELLED:return nt.CANCELLED;case Ei.UNKNOWN:return nt.UNKNOWN;case Ei.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case Ei.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case Ei.INTERNAL:return nt.INTERNAL;case Ei.UNAVAILABLE:return nt.UNAVAILABLE;case Ei.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case Ei.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case Ei.NOT_FOUND:return nt.NOT_FOUND;case Ei.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case Ei.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case Ei.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case Ei.ABORTED:return nt.ABORTED;case Ei.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case Ei.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case Ei.DATA_LOSS:return nt.DATA_LOSS;default:return lr(39323,{code:t})}}(Kr=Ei||(Ei={}))[Kr.OK=0]="OK",Kr[Kr.CANCELLED=1]="CANCELLED",Kr[Kr.UNKNOWN=2]="UNKNOWN",Kr[Kr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kr[Kr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kr[Kr.NOT_FOUND=5]="NOT_FOUND",Kr[Kr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kr[Kr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kr[Kr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kr[Kr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kr[Kr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kr[Kr.ABORTED=10]="ABORTED",Kr[Kr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kr[Kr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kr[Kr.INTERNAL=13]="INTERNAL",Kr[Kr.UNAVAILABLE=14]="UNAVAILABLE",Kr[Kr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=new Hc([4294967295,4294967295],0);function jS(t){const e=sM().encode(t),r=new R6;return r.update(e),new Uint8Array(r.digest())}function FS(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Hc([r,n],0),new Hc([i,s],0)]}class B5{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Hf(`Invalid padding: ${r}`);if(n<0)throw new Hf(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Hf(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Hf(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Hc.fromNumber(this.ge)}ye(e,r,n){let i=e.add(r.multiply(Hc.fromNumber(n)));return i.compare(aM)===1&&(i=new Hc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=jS(e),[n,i]=FS(r);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);if(!this.we(a))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new B5(s,i,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const r=jS(e),[n,i]=FS(r);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);this.Se(a)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Hf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,r,n,i,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,vp.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new _2(dr.min(),i,new Qn(zr),Rl(),Hr())}}class vp{constructor(e,r,n,i,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new vp(n,r,Hr(),Hr(),Hr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,r,n,i){this.be=e,this.removedTargetIds=r,this.key=n,this.De=i}}class Sk{constructor(e,r){this.targetId=e,this.Ce=r}}class Ak{constructor(e,r,n=us.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class DS{constructor(){this.ve=0,this.Fe=MS(),this.Me=us.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Hr(),r=Hr(),n=Hr();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:lr(38017,{changeType:s})}}),new vp(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=MS()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Yr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class oM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rl(),this.Je=Sm(),this.He=Sm(),this.Ye=new Qn(zr)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:lr(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,i)=>{this.rt(i)&&r(i)})}st(e){const r=e.targetId,n=e.Ce.count,i=this.ot(r);if(i){const s=i.target;if(Gv(s))if(n===0){const a=new or(s.path);this.et(r,a,$i.newNoDocument(a,dr.min()))}else Yr(n===1,20013,{expectedCount:n});else{const a=this._t(r);if(a!==n){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=r;let a,o;try{a=Qc(n).toUint8Array()}catch(l){if(l instanceof $6)return Pd("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new B5(a,i,s)}catch(l){return Pd(l instanceof Hf?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let i=0;return n.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(r,s,null),i++)}),i}Tt(e){const r=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&Gv(o.target)){const l=new or(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,$i.newNoDocument(l,e))}s.Be&&(r.set(a,s.ke()),s.qe())}});let n=Hr();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new _2(e,r,this.Ye,this.je,n);return this.je=Rl(),this.Je=Sm(),this.He=Sm(),this.Ye=new Qn(zr),i}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new DS,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Ui(zr),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Ui(zr),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Ut("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new DS),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Sm(){return new Qn(or.comparator)}function MS(){return new Qn(or.comparator)}const lM={asc:"ASCENDING",desc:"DESCENDING"},cM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uM={and:"AND",or:"OR"};class hM{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Yv(t,e){return t.useProto3Json||gp(e)?e:{value:e}}function a1(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ek(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dM(t,e){return a1(t,e.toTimestamp())}function Ta(t){return Yr(!!t,49232),dr.fromTimestamp(function(r){const n=Xc(r);return new On(n.seconds,n.nanos)}(t))}function U5(t,e){return Xv(t,e).canonicalString()}function Xv(t,e){const r=function(i){return new bn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function Nk(t){const e=bn.fromString(t);return Yr(Lk(e),10190,{key:e.toString()}),e}function o1(t,e){return U5(t.databaseId,e.path)}function a0(t,e){const r=Nk(e);if(r.get(1)!==t.databaseId.projectId)throw new It(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new It(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new or(kk(r))}function Tk(t,e){return U5(t.databaseId,e)}function fM(t){const e=Nk(t);return e.length===4?bn.emptyPath():kk(e)}function Qv(t){return new bn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kk(t){return Yr(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function OS(t,e,r){return{name:o1(t,e),fields:r.value.mapValue.fields}}function pM(t,e){return"found"in e?function(n,i){Yr(!!i.found,43571),i.found.name,i.found.updateTime;const s=a0(n,i.found.name),a=Ta(i.found.updateTime),o=i.found.createTime?Ta(i.found.createTime):dr.min(),l=new Us({mapValue:{fields:i.found.fields}});return $i.newFoundDocument(s,a,o,l)}(t,e):"missing"in e?function(n,i){Yr(!!i.missing,3894),Yr(!!i.readTime,22933);const s=a0(n,i.missing),a=Ta(i.readTime);return $i.newNoDocument(s,a)}(t,e):lr(7234,{result:e})}function mM(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:lr(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Yr(h===void 0||typeof h=="string",58123),us.fromBase64String(h||"")):(Yr(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),us.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const h=u.code===void 0?nt.UNKNOWN:bk(u.code);return new It(h,u.message||"")}(a);r=new Ak(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=a0(t,n.document.name),s=Ta(n.document.updateTime),a=n.document.createTime?Ta(n.document.createTime):dr.min(),o=new Us({mapValue:{fields:n.document.fields}}),l=$i.newFoundDocument(i,s,a,o),u=n.targetIds||[],h=n.removedTargetIds||[];r=new gg(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=a0(t,n.document),s=n.readTime?Ta(n.readTime):dr.min(),a=$i.newNoDocument(i,s),o=n.removedTargetIds||[];r=new gg([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=a0(t,n.document),s=n.removedTargetIds||[];r=new gg([],s,i,null)}else{if(!("filter"in e))return lr(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new iM(i,s),o=n.targetId;r=new Sk(o,a)}}return r}function Ck(t,e){let r;if(e instanceof xp)r={update:OS(t,e.key,e.value)};else if(e instanceof yp)r={delete:o1(t,e.key)};else if(e instanceof hu)r={update:OS(t,e.key,e.data),updateMask:AM(e.fieldMask)};else{if(!(e instanceof wk))return lr(16599,{Vt:e.type});r={verify:o1(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,a){const o=a.transform;if(o instanceof $0)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof W0)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof G0)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof K0)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw lr(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:dM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:lr(27497)}(t,e.precondition)),r}function gM(t,e){return t&&t.length>0?(Yr(e!==void 0,14353),t.map(r=>function(i,s){let a=i.updateTime?Ta(i.updateTime):Ta(s);return a.isEqual(dr.min())&&(a=Ta(s)),new ZD(a,i.transformResults||[])}(r,e))):[]}function xM(t,e){return{documents:[Tk(t,e.path)]}}function yM(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Tk(t,i);const s=function(u){if(u.length!==0)return Pk(Eo.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Th(p.field),direction:_M(p.dir)}}(h))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=Yv(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:r,parent:i}}function vM(t){let e=fM(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Yr(n===1,65062);const h=r.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];r.where&&(s=function(f){const p=Ik(f);return p instanceof Eo&&tk(p)?p.getFilters():[p]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(p=>function(v){return new q0(kh(v.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(r.orderBy));let o=null;r.limit&&(o=function(f){let p;return p=typeof f=="object"?f.value:f,gp(p)?null:p}(r.limit));let l=null;r.startAt&&(l=function(f){const p=!!f.before,d=f.values||[];return new i1(d,p)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const p=!f.before,d=f.values||[];return new i1(d,p)}(r.endAt)),VD(e,i,a,s,o,"F",l,u)}function wM(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lr(28987,{purpose:i})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Ik(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=kh(r.unaryFilter.field);return Ti.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=kh(r.unaryFilter.field);return Ti.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=kh(r.unaryFilter.field);return Ti.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=kh(r.unaryFilter.field);return Ti.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lr(61313);default:return lr(60726)}}(t):t.fieldFilter!==void 0?function(r){return Ti.create(kh(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lr(58110);default:return lr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Eo.create(r.compositeFilter.filters.map(n=>Ik(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return lr(1026)}}(r.compositeFilter.op))}(t):lr(30097,{filter:t})}function _M(t){return lM[t]}function bM(t){return cM[t]}function SM(t){return uM[t]}function Th(t){return{fieldPath:t.canonicalString()}}function kh(t){return is.fromServerFormat(t.fieldPath)}function Pk(t){return t instanceof Ti?function(r){if(r.op==="=="){if(ES(r.value))return{unaryFilter:{field:Th(r.field),op:"IS_NAN"}};if(AS(r.value))return{unaryFilter:{field:Th(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(ES(r.value))return{unaryFilter:{field:Th(r.field),op:"IS_NOT_NAN"}};if(AS(r.value))return{unaryFilter:{field:Th(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Th(r.field),op:bM(r.op),value:r.value}}}(t):t instanceof Eo?function(r){const n=r.getFilters().map(i=>Pk(i));return n.length===1?n[0]:{compositeFilter:{op:SM(r.op),filters:n}}}(t):lr(54877,{filter:t})}function AM(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Lk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,r,n,i,s=dr.min(),a=dr.min(),o=us.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Nc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.yt=e}}function NM(t){const e=vM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?s1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.Cn=new kM}addToCollectionParentIndex(e,r){return this.Cn.add(r),lt.resolve()}getCollectionParents(e,r){return lt.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return lt.resolve()}deleteFieldIndex(e,r){return lt.resolve()}deleteAllFieldIndexes(e){return lt.resolve()}createTargetIndexes(e,r){return lt.resolve()}getDocumentsMatchingTarget(e,r){return lt.resolve(null)}getIndexType(e,r){return lt.resolve(0)}getFieldIndexes(e,r){return lt.resolve([])}getNextCollectionGroupToUpdate(e){return lt.resolve(null)}getMinOffset(e,r){return lt.resolve(Yc.min())}getMinOffsetFromCollectionGroup(e,r){return lt.resolve(Yc.min())}updateCollectionGroup(e,r,n){return lt.resolve()}updateIndexEntries(e,r){return lt.resolve()}}class kM{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Ui(bn.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Ui(bn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rk=41943040;class Xs{static withCacheSize(e){return new Xs(e,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xs.DEFAULT_COLLECTION_PERCENTILE=10,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xs.DEFAULT=new Xs(Rk,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xs.DISABLED=new Xs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fd(0)}static cr(){return new Fd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="LruGarbageCollector",CM=1048576;function VS([t,e],[r,n]){const i=zr(t,r);return i===0?zr(e,n):i}class IM{constructor(e){this.Ir=e,this.buffer=new Ui(VS),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();VS(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class PM{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ut(US,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Wd(r)?Ut(US,"Ignoring IndexedDB error during garbage collection: ",r):await $d(r)}await this.Vr(3e5)})}}class LM{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return lt.resolve(p2.ce);const n=new IM(r);return this.mr.forEachTarget(e,i=>n.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>n.Ar(i))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ut("LruGarbageCollector","Garbage collection skipped; disabled"),lt.resolve(BS)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BS):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,i,s,a,o,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,a=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(n=f,o=Date.now(),this.removeTargets(e,n,r))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),Eh()<=Vr.DEBUG&&Ut("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),lt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function RM(t,e){return new LM(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(){this.changes=new nh(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,$i.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?lt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&s0(n.mutation,i,Aa.empty(),On.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Hr()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Hr()){const i=Pu();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(s=>{let a=zf();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Pu();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Hr()))}populateOverlays(e,r,n){const i=[];return n.forEach(s=>{r.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,i){let s=Rl();const a=i0(),o=function(){return i0()}();return r.forEach((l,u)=>{const h=n.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof hu)?s=s.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),s0(h.mutation,u,h.mutation.getFieldMask(),On.now())):a.set(u.key,Aa.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>a.set(u,h)),r.forEach((u,h)=>o.set(u,new FM(h,a.get(u)??null))),o))}recalculateAndSaveOverlays(e,r){const n=i0();let i=new Qn((a,o)=>a-o),s=Hr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(l=>{const u=r.get(l);if(u===null)return;let h=n.get(l)||Aa.empty();h=o.applyToLocalView(u,h),n.set(l,h);const f=(i.get(o.batchId)||Hr()).add(l);i=i.insert(o.batchId,f)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,h=l.value,f=uk();h.forEach(p=>{if(!s.has(p)){const d=yk(r.get(p),n.get(p));d!==null&&f.set(p,d),s=s.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return lt.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(a){return or.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):sk(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-s.size):lt.resolve(Pu());let o=U0,l=s;return a.next(u=>lt.forEach(u,(h,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(h)?lt.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Hr())).next(h=>({batchId:o,changes:ck(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new or(r)).next(n=>{let i=zf();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const s=r.collectionGroup;let a=zf();return this.indexManager.getCollectionParents(e,s).next(o=>lt.forEach(o,l=>{const u=function(f,p){return new Gd(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next(h=>{h.forEach((f,p)=>{a=a.insert(f,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,i))).next(a=>{s.forEach((l,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,$i.newInvalidDocument(h)))});let o=zf();return a.forEach((l,u)=>{const h=s.get(l);h!==void 0&&s0(h.mutation,u,Aa.empty(),On.now()),y2(r,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return lt.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Ta(i.createTime)}}(r)),lt.resolve()}getNamedQuery(e,r){return lt.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(i){return{name:i.name,query:NM(i.bundledQuery),readTime:Ta(i.readTime)}}(r)),lt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(){this.overlays=new Qn(or.comparator),this.qr=new Map}getOverlay(e,r){return lt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Pu();return lt.forEach(r,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,s)=>{this.St(e,r,s)}),lt.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),lt.resolve()}getOverlaysForCollection(e,r,n){const i=Pu(),s=r.length+1,a=new or(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>n&&i.set(l.getKey(),l)}return lt.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let s=new Qn((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let h=s.get(u.largestBatchId);h===null&&(h=Pu(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const o=Pu(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>o.set(u,h)),!(o.size()>=i)););return lt.resolve(o)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new nM(r,n));let s=this.qr.get(r);s===void 0&&(s=Hr(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(){this.sessionToken=us.EMPTY_BYTE_STRING}getSessionToken(e){return lt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,lt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(){this.Qr=new Ui(zi.$r),this.Ur=new Ui(zi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new zi(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new zi(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new or(new bn([])),n=new zi(r,e),i=new zi(r,e+1),s=[];return this.Ur.forEachInRange([n,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new or(new bn([])),n=new zi(r,e),i=new zi(r,e+1);let s=Hr();return this.Ur.forEachInRange([n,i],a=>{s=s.add(a.key)}),s}containsKey(e){const r=new zi(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class zi{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return or.comparator(e.key,r.key)||zr(e.Yr,r.Yr)}static Kr(e,r){return zr(e.Yr,r.Yr)||or.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ui(zi.$r)}checkEmpty(e){return lt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new rM(s,r,n,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new zi(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return lt.resolve(a)}lookupMutationBatch(e,r){return lt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ei(n),s=i<0?0:i;return lt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return lt.resolve(this.mutationQueue.length===0?L5:this.tr-1)}getAllMutationBatches(e){return lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new zi(r,0),i=new zi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,i],a=>{const o=this.Xr(a.Yr);s.push(o)}),lt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ui(zr);return r.forEach(i=>{const s=new zi(i,0),a=new zi(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{n=n.add(o.Yr)})}),lt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let s=n;or.isDocumentKey(s)||(s=s.child(""));const a=new zi(new or(s),0);let o=new Ui(zr);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)},a),lt.resolve(this.ti(o))}ti(e){const r=[];return e.forEach(n=>{const i=this.Xr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){Yr(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return lt.forEach(r.mutations,i=>{const s=new zi(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new zi(r,0),i=this.Zr.firstAfterOrEqual(n);return lt.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,lt.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.ri=e,this.docs=function(){return new Qn(or.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),s=i?i.size:0,a=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return lt.resolve(n?n.document.mutableCopy():$i.newInvalidDocument(r))}getEntries(e,r){let n=Rl();return r.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():$i.newInvalidDocument(i))}),lt.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let s=Rl();const a=r.path,o=new or(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||vD(yD(h),n)<=0||(i.has(h.key)||y2(r,h))&&(s=s.insert(h.key,h.mutableCopy()))}return lt.resolve(s)}getAllFromCollectionGroup(e,r,n,i){lr(9500)}ii(e,r){return lt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new zM(this)}getSize(e){return lt.resolve(this.size)}}class zM extends jM{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),lt.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.persistence=e,this.si=new nh(r=>F5(r),D5),this.lastRemoteSnapshotVersion=dr.min(),this.highestTargetId=0,this.oi=0,this._i=new V5,this.targetCount=0,this.ai=Fd.ur()}forEachTarget(e,r){return this.si.forEach((n,i)=>r(i)),lt.resolve()}getLastRemoteSnapshotVersion(e){return lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return lt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),lt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),lt.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Fd(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,lt.resolve()}updateTargetData(e,r){return this.Pr(r),lt.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,lt.resolve()}removeTargets(e,r,n){let i=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),lt.waitFor(s).next(()=>i)}getTargetCount(e){return lt.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return lt.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),lt.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),lt.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),lt.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return lt.resolve(n)}containsKey(e,r){return lt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,r){this.ui={},this.overlays={},this.ci=new p2(0),this.li=!1,this.li=!0,this.hi=new BM,this.referenceDelegate=e(this),this.Pi=new HM(this),this.indexManager=new TM,this.remoteDocumentCache=function(i){return new VM(i)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new EM(r),this.Ii=new MM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new OM,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new UM(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Ut("MemoryPersistence","Starting transaction:",e);const i=new qM(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,r){return lt.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class qM extends _D{constructor(e){super(),this.currentSequenceNumber=e}}class z5{constructor(e){this.persistence=e,this.Ri=new V5,this.Vi=null}static mi(e){return new z5(e)}get fi(){if(this.Vi)return this.Vi;throw lr(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),lt.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),lt.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),lt.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(i=>this.fi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.fi,n=>{const i=or.fromPath(n);return this.gi(e,i).next(s=>{s||r.removeEntry(i,dr.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return lt.or([()=>lt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class l1{constructor(e,r){this.persistence=e,this.pi=new nh(n=>AD(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=RM(this,r)}static mi(e,r){return new l1(e,r)}Ei(){}di(e){return lt.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(i=>n+i))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return lt.forEach(this.pi,(n,i)=>this.br(e,n,i).next(s=>s?lt.resolve():r(i)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,r).next(o=>{o||(n++,s.removeEntry(a,dr.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),lt.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),lt.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),lt.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),lt.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=fg(e.data.value)),r}br(e,r,n){return lt.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return lt.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=i}static As(e,r){let n=Hr(),i=Hr();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new H5(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return B7()?8:bD(Ps())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,i){const s={result:null};return this.ys(e,r).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,r,i,n).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new $M;return this.Ss(e,r,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,r,a,o.size)})}).next(()=>s.result)}bs(e,r,n,i){return n.documentReadCount<this.fs?(Eh()<=Vr.DEBUG&&Ut("QueryEngine","SDK will not create cache indexes for query:",Nh(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),lt.resolve()):(Eh()<=Vr.DEBUG&&Ut("QueryEngine","Query:",Nh(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(Eh()<=Vr.DEBUG&&Ut("QueryEngine","The SDK decides to create cache indexes for query:",Nh(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ko(r))):lt.resolve())}ys(e,r){if(CS(r))return lt.resolve(null);let n=Ko(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=s1(r,null,"F"),n=Ko(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const a=Hr(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const u=this.Ds(r,o);return this.Cs(r,u,a,l.readTime)?this.ys(e,s1(r,null,"F")):this.vs(e,u,r,l)}))})))}ws(e,r,n,i){return CS(r)||i.isEqual(dr.min())?lt.resolve(null):this.ps.getDocuments(e,n).next(s=>{const a=this.Ds(r,s);return this.Cs(r,a,n,i)?lt.resolve(null):(Eh()<=Vr.DEBUG&&Ut("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Nh(r)),this.vs(e,a,r,xD(i,U0)).next(o=>o))})}Ds(e,r){let n=new Ui(ok(e));return r.forEach((i,s)=>{y2(e,s)&&(n=n.add(s))}),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,r,n){return Eh()<=Vr.DEBUG&&Ut("QueryEngine","Using full collection scan to execute query:",Nh(r)),this.ps.getDocumentsMatchingQuery(e,r,Yc.min(),n)}vs(e,r,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(s=>(r.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5="LocalStore",GM=3e8;class KM{constructor(e,r,n,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new Qn(zr),this.xs=new nh(s=>F5(s),D5),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function YM(t,e,r,n){return new KM(t,e,r,n)}async function Fk(t,e){const r=xr(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const a=[],o=[];let l=Hr();for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return r.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:a,addedBatchIds:o}))})})}function XM(t,e){const r=xr(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,h){const f=u.batch,p=f.keys();let d=lt.resolve();return p.forEach(v=>{d=d.next(()=>h.getEntry(l,v)).next(y=>{const _=u.docVersions.get(v);Yr(_!==null,48541),y.version.compareTo(_)<0&&(f.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),h.addEntry(y)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Hr();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function Dk(t){const e=xr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function QM(t,e){const r=xr(t),n=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const o=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;o.push(r.Pi.removeMatchingKeys(s,h.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,h.addedDocuments,f)));let d=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?d=d.withResumeToken(us.EMPTY_BYTE_STRING,dr.min()).withLastLimboFreeSnapshotVersion(dr.min()):h.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(h.resumeToken,n)),i=i.insert(f,d),function(y,_,w){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=GM?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,d,h)&&o.push(r.Pi.updateTargetData(s,d))});let l=Rl(),u=Hr();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,h))}),o.push(JM(s,a,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!n.isEqual(dr.min())){const h=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(h)}return lt.waitFor(o).next(()=>a.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(r.Ms=i,s))}function JM(t,e,r){let n=Hr(),i=Hr();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let a=Rl();return r.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(dr.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Ut(q5,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:a,qs:i}})}function ZM(t,e){const r=xr(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=L5),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function eO(t,e){const r=xr(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Pi.getTargetData(n,e).next(s=>s?(i=s,lt.resolve(i)):r.Pi.allocateTargetId(n).next(a=>(i=new Nc(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function Jv(t,e,r){const n=xr(t),i=n.Ms.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Wd(a))throw a;Ut(q5,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function zS(t,e,r){const n=xr(t);let i=dr.min(),s=Hr();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,u,h){const f=xr(l),p=f.xs.get(h);return p!==void 0?lt.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(n,a,Ko(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(a,e,r?i:dr.min(),r?s:Hr())).next(o=>(tO(n,HD(e),o),{documents:o,Qs:s})))}function tO(t,e,r){let n=t.Os.get(e)||dr.min();r.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.Os.set(e,n)}class HS{constructor(){this.activeTargetIds=YD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rO{constructor(){this.Mo=new HS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new HS,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="ConnectivityMonitor";class $S{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ut(qS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ut(qS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Am=null;function Zv(){return Am===null?Am=function(){return 268435456+Math.round(2147483648*Math.random())}():Am++,"0x"+Am.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="RestConnection",iO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===Hv?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,r,n,i,s){const a=Zv(),o=this.zo(e,r.toUriEncodedString());Ut($x,`Sending RPC '${e}' ${a}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(o),h=zd(u);return this.Jo(e,o,l,n,h).then(f=>(Ut($x,`Received RPC '${e}' ${a}: `,f),f),f=>{throw Pd($x,`RPC '${e}' ${a} failed with error: `,f,"url: ",o,"request:",n),f})}Ho(e,r,n,i,s,a){return this.Go(e,r,n,i,s)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}zo(e,r){const n=iO[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="WebChannelConnection";class oO extends sO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,s){const a=Zv();return new Promise((o,l)=>{const u=new j6;u.setWithCredentials(!0),u.listenOnce(F6.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case dg.NO_ERROR:const f=u.getResponseJson();Ut(ws,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),o(f);break;case dg.TIMEOUT:Ut(ws,`RPC '${e}' ${a} timed out`),l(new It(nt.DEADLINE_EXCEEDED,"Request time out"));break;case dg.HTTP_ERROR:const p=u.getStatus();if(Ut(ws,`RPC '${e}' ${a} failed with status:`,p,"response text:",u.getResponseText()),p>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const v=d==null?void 0:d.error;if(v&&v.status&&v.message){const y=function(w){const S=w.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(S)>=0?S:nt.UNKNOWN}(v.status);l(new It(y,v.message))}else l(new It(nt.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new It(nt.UNAVAILABLE,"Connection failed."));break;default:lr(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ut(ws,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(i);Ut(ws,`RPC '${e}' ${a} sending request:`,i),u.send(r,"POST",h,n,15)})}T_(e,r,n){const i=Zv(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=O6(),o=M6(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const h=s.join("");Ut(ws,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=a.createWebChannel(h,l);this.I_(f);let p=!1,d=!1;const v=new aO({Yo:_=>{d?Ut(ws,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(p||(Ut(ws,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),Ut(ws,`RPC '${e}' stream ${i} sending:`,_),f.send(_))},Zo:()=>f.close()}),y=(_,w,S)=>{_.listen(w,C=>{try{S(C)}catch(j){setTimeout(()=>{throw j},0)}})};return y(f,Vf.EventType.OPEN,()=>{d||(Ut(ws,`RPC '${e}' stream ${i} transport opened.`),v.o_())}),y(f,Vf.EventType.CLOSE,()=>{d||(d=!0,Ut(ws,`RPC '${e}' stream ${i} transport closed`),v.a_(),this.E_(f))}),y(f,Vf.EventType.ERROR,_=>{d||(d=!0,Pd(ws,`RPC '${e}' stream ${i} transport errored. Name:`,_.name,"Message:",_.message),v.a_(new It(nt.UNAVAILABLE,"The operation could not be completed")))}),y(f,Vf.EventType.MESSAGE,_=>{var w;if(!d){const S=_.data[0];Yr(!!S,16349);const C=S,j=(C==null?void 0:C.error)||((w=C[0])==null?void 0:w.error);if(j){Ut(ws,`RPC '${e}' stream ${i} received error:`,j);const q=j.status;let G=function(A){const D=Ei[A];if(D!==void 0)return bk(D)}(q),E=j.message;G===void 0&&(G=nt.INTERNAL,E="Unknown error status: "+q+" with message "+j.message),d=!0,v.a_(new It(G,E)),f.close()}else Ut(ws,`RPC '${e}' stream ${i} received:`,S),v.u_(S)}}),y(o,D6.STAT_EVENT,_=>{_.stat===Vv.PROXY?Ut(ws,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===Vv.NOPROXY&&Ut(ws,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function Wx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t){return new hM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,r,n=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-n);i>0&&Ut("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="PersistentStream";class Mk{constructor(e,r,n,i,s,a,o,l){this.Mi=e,this.S_=n,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $5(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===nt.RESOURCE_EXHAUSTED?(Ll(r.toString()),Ll("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.D_===r&&this.G_(n,i)},n=>{e(()=>{const i=new It(nt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{n(()=>this.z_(i))}),this.stream.onMessage(i=>{n(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ut(WS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Ut(WS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lO extends Mk{constructor(e,r,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=mM(this.serializer,e),n=function(s){if(!("targetChange"in s))return dr.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?dr.min():a.readTime?Ta(a.readTime):dr.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=Qv(this.serializer),r.addTarget=function(s,a){let o;const l=a.target;if(o=Gv(l)?{documents:xM(s,l)}:{query:yM(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=Ek(s,a.resumeToken);const u=Yv(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(dr.min())>0){o.readTime=a1(s,a.snapshotVersion.toTimestamp());const u=Yv(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=wM(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=Qv(this.serializer),r.removeTarget=e,this.q_(r)}}class cO extends Mk{constructor(e,r,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Yr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Yr(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Yr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=gM(e.writeResults,e.commitTime),n=Ta(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=Qv(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Ck(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{}class hO extends uO{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new It(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,Xv(r,n),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new It(nt.UNKNOWN,s.toString())})}Ho(e,r,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,Xv(r,n),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new It(nt.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class dO{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ll(r),this.aa=!1):Ut("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu="RemoteStore";class fO{constructor(e,r,n,i,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{n.enqueueAndForget(async()=>{ih(this)&&(Ut(Gu,"Restarting streams for network reachability change."),await async function(l){const u=xr(l);u.Ea.add(4),await wp(u),u.Ra.set("Unknown"),u.Ea.delete(4),await S2(u)}(this))})}),this.Ra=new dO(n,i)}}async function S2(t){if(ih(t))for(const e of t.da)await e(!0)}async function wp(t){for(const e of t.da)await e(!1)}function Ok(t,e){const r=xr(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),Y5(r)?K5(r):Kd(r).O_()&&G5(r,e))}function W5(t,e){const r=xr(t),n=Kd(r);r.Ia.delete(e),n.O_()&&Bk(r,e),r.Ia.size===0&&(n.O_()?n.L_():ih(r)&&r.Ra.set("Unknown"))}function G5(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(dr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Kd(t).Y_(e)}function Bk(t,e){t.Va.Ue(e),Kd(t).Z_(e)}function K5(t){t.Va=new oM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Kd(t).start(),t.Ra.ua()}function Y5(t){return ih(t)&&!Kd(t).x_()&&t.Ia.size>0}function ih(t){return xr(t).Ea.size===0}function Uk(t){t.Va=void 0}async function pO(t){t.Ra.set("Online")}async function mO(t){t.Ia.forEach((e,r)=>{G5(t,e)})}async function gO(t,e){Uk(t),Y5(t)?(t.Ra.ha(e),K5(t)):t.Ra.set("Unknown")}async function xO(t,e,r){if(t.Ra.set("Online"),e instanceof Ak&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))}(t,e)}catch(n){Ut(Gu,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await c1(t,n)}else if(e instanceof gg?t.Va.Ze(e):e instanceof Sk?t.Va.st(e):t.Va.tt(e),!r.isEqual(dr.min()))try{const n=await Dk(t.localStore);r.compareTo(n)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(u);h&&s.Ia.set(u,h.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,u)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(us.EMPTY_BYTE_STRING,h.snapshotVersion)),Bk(s,l);const f=new Nc(h.target,l,u,h.sequenceNumber);G5(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Ut(Gu,"Failed to raise snapshot:",n),await c1(t,n)}}async function c1(t,e,r){if(!Wd(e))throw e;t.Ea.add(1),await wp(t),t.Ra.set("Offline"),r||(r=()=>Dk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ut(Gu,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await S2(t)})}function Vk(t,e){return e().catch(r=>c1(t,r,e))}async function A2(t){const e=xr(t),r=Zc(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:L5;for(;yO(e);)try{const i=await ZM(e.localStore,n);if(i===null){e.Ta.length===0&&r.L_();break}n=i.batchId,vO(e,i)}catch(i){await c1(e,i)}zk(e)&&Hk(e)}function yO(t){return ih(t)&&t.Ta.length<10}function vO(t,e){t.Ta.push(e);const r=Zc(t);r.O_()&&r.X_&&r.ea(e.mutations)}function zk(t){return ih(t)&&!Zc(t).x_()&&t.Ta.length>0}function Hk(t){Zc(t).start()}async function wO(t){Zc(t).ra()}async function _O(t){const e=Zc(t);for(const r of t.Ta)e.ea(r.mutations)}async function bO(t,e,r){const n=t.Ta.shift(),i=O5.from(n,e,r);await Vk(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await A2(t)}async function SO(t,e){e&&Zc(t).X_&&await async function(n,i){if(function(a){return _k(a)&&a!==nt.ABORTED}(i.code)){const s=n.Ta.shift();Zc(n).B_(),await Vk(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await A2(n)}}(t,e),zk(t)&&Hk(t)}async function GS(t,e){const r=xr(t);r.asyncQueue.verifyOperationInProgress(),Ut(Gu,"RemoteStore received new credentials");const n=ih(r);r.Ea.add(3),await wp(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await S2(r)}async function AO(t,e){const r=xr(t);e?(r.Ea.delete(2),await S2(r)):e||(r.Ea.add(2),await wp(r),r.Ra.set("Unknown"))}function Kd(t){return t.ma||(t.ma=function(r,n,i){const s=xr(r);return s.sa(),new lO(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:pO.bind(null,t),t_:mO.bind(null,t),r_:gO.bind(null,t),H_:xO.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Y5(t)?K5(t):t.Ra.set("Unknown")):(await t.ma.stop(),Uk(t))})),t.ma}function Zc(t){return t.fa||(t.fa=function(r,n,i){const s=xr(r);return s.sa(),new cO(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:wO.bind(null,t),r_:SO.bind(null,t),ta:_O.bind(null,t),na:bO.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await A2(t)):(await t.fa.stop(),t.Ta.length>0&&(Ut(Gu,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,r,n,i,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new Go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,s){const a=Date.now()+n,o=new X5(e,r,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new It(nt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Q5(t,e){if(Ll("AsyncQueue",`${e}: ${t}`),Wd(t))return new It(nt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{static emptySet(e){return new ad(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||or.comparator(r.key,n.key):(r,n)=>or.comparator(r.key,n.key),this.keyedMap=zf(),this.sortedSet=new Qn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof ad)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new ad;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(){this.ga=new Qn(or.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):lr(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Dd{constructor(e,r,n,i,s,a,o,l,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,i,s){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new Dd(e,r,ad.emptySet(r),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&x2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class NO{constructor(){this.queries=YS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=xr(r),s=i.queries;i.queries=YS(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new It(nt.ABORTED,"Firestore shutting down"))}}function YS(){return new nh(t=>ak(t),x2)}async function J5(t,e){const r=xr(t);let n=3;const i=e.query;let s=r.queries.get(i);s?!s.ba()&&e.Da()&&(n=2):(s=new EO,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(i,!0);break;case 1:s.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(a){const o=Q5(a,`Initialization of query '${Nh(e.query)}' failed`);return void e.onError(o)}r.queries.set(i,s),s.Sa.push(e),e.va(r.onlineState),s.wa&&e.Fa(s.wa)&&e_(r)}async function Z5(t,e){const r=xr(t),n=e.query;let i=3;const s=r.queries.get(n);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function TO(t,e){const r=xr(t);let n=!1;for(const i of e){const s=i.query,a=r.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(n=!0);a.wa=i}}n&&e_(r)}function kO(t,e,r){const n=xr(t),i=n.queries.get(e);if(i)for(const s of i.Sa)s.onError(r);n.queries.delete(e)}function e_(t){t.Ca.forEach(e=>{e.next()})}var ew,XS;(XS=ew||(ew={})).Ma="default",XS.Cache="cache";class t_{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Dd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ew.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.key=e}}class $k{constructor(e){this.key=e}}class CO{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Hr(),this.mutatedKeys=Hr(),this.eu=ok(e),this.tu=new ad(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new KS,i=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),d=y2(this.query,f)?f:null,v=!!p&&this.mutatedKeys.has(p.key),y=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let _=!1;p&&d?p.data.isEqual(d.data)?v!==y&&(n.track({type:3,doc:d}),_=!0):this.su(p,d)||(n.track({type:2,doc:d}),_=!0,(l&&this.eu(d,l)>0||u&&this.eu(d,u)<0)&&(o=!0)):!p&&d?(n.track({type:0,doc:d}),_=!0):p&&!d&&(n.track({type:1,doc:p}),_=!0,(l||u)&&(o=!0)),_&&(d?(a=a.add(d),s=y?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{tu:a,iu:n,Cs:o,mutatedKeys:s}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(d,v){const y=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lr(20277,{Rt:_})}};return y(d)-y(v)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(n),i=i??!1;const o=r&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,a.length!==0||u?{snapshot:new Dd(this.query,e.tu,s,a,e.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new KS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Hr(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new $k(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new qk(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=Hr();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Dd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const r_="SyncEngine";class IO{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class PO{constructor(e){this.key=e,this.hu=!1}}class LO{constructor(e,r,n,i,s,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new nh(o=>ak(o),x2),this.Iu=new Map,this.Eu=new Set,this.du=new Qn(or.comparator),this.Au=new Map,this.Ru=new V5,this.Vu={},this.mu=new Map,this.fu=Fd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function RO(t,e,r=!0){const n=Qk(t);let i;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Wk(n,e,r,!0),i}async function jO(t,e){const r=Qk(t);await Wk(r,e,!0,!1)}async function Wk(t,e,r,n){const i=await eO(t.localStore,Ko(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await FO(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&r&&Ok(t.remoteStore,i),o}async function FO(t,e,r,n,i){t.pu=(f,p,d)=>async function(y,_,w,S){let C=_.view.ru(w);C.Cs&&(C=await zS(y.localStore,_.query,!1).then(({documents:E})=>_.view.ru(E,C)));const j=S&&S.targetChanges.get(_.targetId),q=S&&S.targetMismatches.get(_.targetId)!=null,G=_.view.applyChanges(C,y.isPrimaryClient,j,q);return JS(y,_.targetId,G.au),G.snapshot}(t,f,p,d);const s=await zS(t.localStore,e,!0),a=new CO(e,s.Qs),o=a.ru(s.documents),l=vp.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),u=a.applyChanges(o,t.isPrimaryClient,l);JS(t,r,u.au);const h=new IO(e,r,a);return t.Tu.set(e,h),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),u.snapshot}async function DO(t,e,r){const n=xr(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);if(s.length>1)return n.Iu.set(i.targetId,s.filter(a=>!x2(a,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Jv(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&W5(n.remoteStore,i.targetId),tw(n,i.targetId)}).catch($d)):(tw(n,i.targetId),await Jv(n.localStore,i.targetId,!0))}async function MO(t,e){const r=xr(t),n=r.Tu.get(e),i=r.Iu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),W5(r.remoteStore,n.targetId))}async function OO(t,e,r){const n=$O(t);try{const i=await function(a,o){const l=xr(a),u=On.now(),h=o.reduce((d,v)=>d.add(v.key),Hr());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",d=>{let v=Rl(),y=Hr();return l.Ns.getEntries(d,h).next(_=>{v=_,v.forEach((w,S)=>{S.isValidDocument()||(y=y.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(d,v)).next(_=>{f=_;const w=[];for(const S of o){const C=tM(S,f.get(S.key).overlayedDocument);C!=null&&w.push(new hu(S.key,C,J6(C.value.mapValue),ki.exists(!0)))}return l.mutationQueue.addMutationBatch(d,u,w,o)}).next(_=>{p=_;const w=_.applyToLocalDocumentSet(f,y);return l.documentOverlayCache.saveOverlays(d,_.batchId,w)})}).then(()=>({batchId:p.batchId,changes:ck(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let u=a.Vu[a.currentUser.toKey()];u||(u=new Qn(zr)),u=u.insert(o,l),a.Vu[a.currentUser.toKey()]=u}(n,i.batchId,r),await _p(n,i.changes),await A2(n.remoteStore)}catch(i){const s=Q5(i,"Failed to persist write");r.reject(s)}}async function Gk(t,e){const r=xr(t);try{const n=await QM(r.localStore,e);e.targetChanges.forEach((i,s)=>{const a=r.Au.get(s);a&&(Yr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Yr(a.hu,14607):i.removedDocuments.size>0&&(Yr(a.hu,42227),a.hu=!1))}),await _p(r,n,e)}catch(n){await $d(n)}}function QS(t,e,r){const n=xr(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=xr(a);l.onlineState=o;let u=!1;l.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(o)&&(u=!0)}),u&&e_(l)}(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function BO(t,e,r){const n=xr(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Au.get(e),s=i&&i.key;if(s){let a=new Qn(or.comparator);a=a.insert(s,$i.newNoDocument(s,dr.min()));const o=Hr().add(s),l=new _2(dr.min(),new Map,new Qn(zr),a,o);await Gk(n,l),n.du=n.du.remove(s),n.Au.delete(e),n_(n)}else await Jv(n.localStore,e,!1).then(()=>tw(n,e,r)).catch($d)}async function UO(t,e){const r=xr(t),n=e.batch.batchId;try{const i=await XM(r.localStore,e);Yk(r,n,null),Kk(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await _p(r,i)}catch(i){await $d(i)}}async function VO(t,e,r){const n=xr(t);try{const i=await function(a,o){const l=xr(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,o).next(f=>(Yr(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(n.localStore,e);Yk(n,e,r),Kk(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await _p(n,i)}catch(i){await $d(i)}}function Kk(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function Yk(t,e,r){const n=xr(t);let i=n.Vu[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(r?s.reject(r):s.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function tw(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||Xk(t,n)})}function Xk(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(W5(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),n_(t))}function JS(t,e,r){for(const n of r)n instanceof qk?(t.Ru.addReference(n.key,e),zO(t,n)):n instanceof $k?(Ut(r_,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||Xk(t,n.key)):lr(19791,{wu:n})}function zO(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Ut(r_,"New document in limbo: "+r),t.Eu.add(n),n_(t))}function n_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new or(bn.fromString(e)),n=t.fu.next();t.Au.set(n,new PO(r)),t.du=t.du.insert(r,n),Ok(t.remoteStore,new Nc(Ko(g2(r.path)),n,"TargetPurposeLimboResolution",p2.ce))}}async function _p(t,e,r){const n=xr(t),i=[],s=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{a.push(n.pu(l,e,r).then(u=>{var h;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(h=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:h.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=H5.As(l.targetId,u);s.push(f)}}))}),await Promise.all(a),n.Pu.H_(i),await async function(l,u){const h=xr(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>lt.forEach(u,p=>lt.forEach(p.Es,d=>h.persistence.referenceDelegate.addReference(f,p.targetId,d)).next(()=>lt.forEach(p.ds,d=>h.persistence.referenceDelegate.removeReference(f,p.targetId,d)))))}catch(f){if(!Wd(f))throw f;Ut(q5,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const d=h.Ms.get(p),v=d.snapshotVersion,y=d.withLastLimboFreeSnapshotVersion(v);h.Ms=h.Ms.insert(p,y)}}}(n.localStore,s))}async function HO(t,e){const r=xr(t);if(!r.currentUser.isEqual(e)){Ut(r_,"User change. New user:",e.toKey());const n=await Fk(r.localStore,e);r.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new It(nt.CANCELLED,a))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await _p(r,n.Ls)}}function qO(t,e){const r=xr(t),n=r.Au.get(e);if(n&&n.hu)return Hr().add(n.key);{let i=Hr();const s=r.Iu.get(e);if(!s)return i;for(const a of s){const o=r.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function Qk(t){const e=xr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BO.bind(null,e),e.Pu.H_=TO.bind(null,e.eventManager),e.Pu.yu=kO.bind(null,e.eventManager),e}function $O(t){const e=xr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VO.bind(null,e),e}class u1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=b2(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return YM(this.persistence,new WM,e.initialUser,this.serializer)}Cu(e){return new jk(z5.mi,this.serializer)}Du(e){return new rO}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}u1.provider={build:()=>new u1};class WO extends u1{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Yr(this.persistence.referenceDelegate instanceof l1,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new PM(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Xs.withCacheSize(this.cacheSizeBytes):Xs.DEFAULT;return new jk(n=>l1.mi(n,r),this.serializer)}}class rw{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>QS(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=HO.bind(null,this.syncEngine),await AO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NO}()}createDatastore(e){const r=b2(e.databaseInfo.databaseId),n=function(s){return new oO(s)}(e.databaseInfo);return function(s,a,o,l){return new hO(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,s,a,o){return new fO(n,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>QS(this.syncEngine,r,0),function(){return $S.v()?new $S:new nO}())}createSyncEngine(e,r){return function(i,s,a,o,l,u,h){const f=new LO(i,s,a,o,l,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const s=xr(i);Ut(Gu,"RemoteStore shutting down."),s.Ea.add(5),await wp(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}rw.provider={build:()=>new rw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ll("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new It(nt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(i,s){const a=xr(i),o={documents:s.map(f=>o1(a.serializer,f))},l=await a.Ho("BatchGetDocuments",a.serializer.databaseId,bn.emptyPath(),o,s.length),u=new Map;l.forEach(f=>{const p=pM(a.serializer,f);u.set(p.key.toString(),p)});const h=[];return s.forEach(f=>{const p=u.get(f.toString());Yr(!!p,55234,{key:f}),h.push(p)}),h}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new yp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const i=or.fromPath(n);this.mutations.push(new wk(i,this.precondition(i)))}),await async function(n,i){const s=xr(n),a={writes:i.map(o=>Ck(s.serializer,o))};await s.Go("Commit",s.serializer.databaseId,bn.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw lr(50498,{Gu:e.constructor.name});r=dr.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new It(nt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(dr.min())?ki.exists(!1):ki.updateTime(r):ki.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(dr.min()))throw new It(nt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ki.updateTime(r)}return ki.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,r,n,i,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=i,this.deferred=s,this.zu=n.maxAttempts,this.M_=new $5(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new GO(this.datastore),r=this.Hu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(i=>{this.Yu(i)}))}).catch(n=>{this.Yu(n)})})}Hu(e){try{const r=this.updateFunction(e);return!gp(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!_k(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu="FirestoreClient";class YO{constructor(e,r,n,i,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Es.UNAUTHENTICATED,this.clientId=P5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async a=>{Ut(eu,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Ut(eu,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Q5(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Gx(t,e){t.asyncQueue.verifyOperationInProgress(),Ut(eu,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await Fk(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ZS(t,e){t.asyncQueue.verifyOperationInProgress();const r=await XO(t);Ut(eu,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>GS(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>GS(e.remoteStore,i)),t._onlineComponents=e}async function XO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ut(eu,"Using user provided OfflineComponentProvider");try{await Gx(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===nt.FAILED_PRECONDITION||i.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Pd("Error using user provided cache. Falling back to memory cache: "+r),await Gx(t,new u1)}}else Ut(eu,"Using default OfflineComponentProvider"),await Gx(t,new WO(void 0));return t._offlineComponents}async function s_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ut(eu,"Using user provided OnlineComponentProvider"),await ZS(t,t._uninitializedComponentsProvider._online)):(Ut(eu,"Using default OnlineComponentProvider"),await ZS(t,new rw))),t._onlineComponents}function QO(t){return s_(t).then(e=>e.syncEngine)}function JO(t){return s_(t).then(e=>e.datastore)}async function h1(t){const e=await s_(t),r=e.eventManager;return r.onListen=RO.bind(null,e.syncEngine),r.onUnlisten=DO.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=jO.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=MO.bind(null,e.syncEngine),r}function ZO(t,e,r={}){const n=new Go;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const h=new i_({next:p=>{h.Nu(),a.enqueueAndForget(()=>Z5(s,f));const d=p.docs.has(o);!d&&p.fromCache?u.reject(new It(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&p.fromCache&&l&&l.source==="server"?u.reject(new It(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new t_(g2(o.path),h,{includeMetadataChanges:!0,qa:!0});return J5(s,f)}(await h1(t),t.asyncQueue,e,r,n)),n.promise}function e9(t,e,r={}){const n=new Go;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const h=new i_({next:p=>{h.Nu(),a.enqueueAndForget(()=>Z5(s,f)),p.fromCache&&l.source==="server"?u.reject(new It(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new t_(o,h,{includeMetadataChanges:!0,qa:!0});return J5(s,f)}(await h1(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="firestore.googleapis.com",t3=!0;class r3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new It(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Zk,this.ssl=t3}else this.host=e.host,this.ssl=e.ssl??t3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CM)throw new It(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jk(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new It(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new It(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new It(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class E2{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new It(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new It(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new sD;switch(n.type){case"firstParty":return new cD(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new It(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=e3.get(r);n&&(Ut("ComponentProvider","Removing Datastore"),e3.delete(r),n.terminate())}(this),Promise.resolve()}}function t9(t,e,r,n={}){var u;t=Ts(t,E2);const i=zd(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${r}`;i&&(E6(`https://${o}`),N6("Firestore",!0)),s.host!==Zk&&s.host!==o&&Pd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:n};if(!qu(l,a)&&(t._setSettings(l),n.mockUserToken)){let h,f;if(typeof n.mockUserToken=="string")h=n.mockUserToken,f=Es.MOCK_USER;else{h=I7(n.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new It(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Es(p)}t._authCredentials=new aD(new U6(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Vl(this.firestore,e,this._query)}}class Kn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kn(this.firestore,e,this._key)}toJSON(){return{type:Kn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(mp(r,Kn._jsonSchema))return new Kn(e,n||null,new or(bn.fromString(r.referencePath)))}}Kn._jsonSchemaVersion="firestore/documentReference/1.0",Kn._jsonSchema={type:Ci("string",Kn._jsonSchemaVersion),referencePath:Ci("string")};class qc extends Vl{constructor(e,r,n){super(e,r,g2(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new or(e))}withConverter(e){return new qc(this.firestore,e,this._path)}}function yi(t,e,...r){if(t=Pi(t),V6("collection","path",e),t instanceof E2){const n=bn.fromString(e,...r);return mS(n),new qc(t,null,n)}{if(!(t instanceof Kn||t instanceof qc))throw new It(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(bn.fromString(e,...r));return mS(n),new qc(t.firestore,null,n)}}function Ur(t,e,...r){if(t=Pi(t),arguments.length===1&&(e=P5.newId()),V6("doc","path",e),t instanceof E2){const n=bn.fromString(e,...r);return pS(n),new Kn(t,null,new or(n))}{if(!(t instanceof Kn||t instanceof qc))throw new It(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(bn.fromString(e,...r));return pS(n),new Kn(t.firestore,t instanceof qc?t.converter:null,new or(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3="AsyncQueue";class i3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $5(this,"async_queue_retry"),this._c=()=>{const n=Wx();n&&Ut(n3,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=Wx();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Wx();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Go;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wd(e))throw e;Ut(n3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,Ll("INTERNAL UNHANDLED ERROR: ",s3(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=X5.createAndSchedule(this,e,r,n,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&lr(47125,{Pc:s3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function s3(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class No extends E2{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new i3,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new i3(e),this._firestoreClient=void 0,await e}}}function r9(t,e){const r=typeof t=="object"?t:I6(),n=typeof t=="string"?t:e,i=C5(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=k7("firestore");s&&t9(i,...s)}return i}function Yd(t){if(t._terminated)throw new It(nt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||n9(t),t._firestoreClient}function n9(t){var n,i,s;const e=t._freezeSettings(),r=function(o,l,u,h){return new TD(o,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Jk(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new YO(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ba(us.fromBase64String(e))}catch(r){throw new It(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ba(us.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ba._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(mp(e,ba._jsonSchema))return ba.fromBase64String(e.bytes)}}ba._jsonSchemaVersion="firestore/bytes/1.0",ba._jsonSchema={type:Ci("string",ba._jsonSchemaVersion),bytes:Ci("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new It(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new is(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new It(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new It(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return zr(this._lat,e._lat)||zr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yo._jsonSchemaVersion}}static fromJSON(e){if(mp(e,Yo._jsonSchema))return new Yo(e.latitude,e.longitude)}}Yo._jsonSchemaVersion="firestore/geoPoint/1.0",Yo._jsonSchema={type:Ci("string",Yo._jsonSchemaVersion),latitude:Ci("number"),longitude:Ci("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Xo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(mp(e,Xo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Xo(e.vectorValues);throw new It(nt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xo._jsonSchemaVersion="firestore/vectorValue/1.0",Xo._jsonSchema={type:Ci("string",Xo._jsonSchemaVersion),vectorValues:Ci("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9=/^__.*__$/;class s9{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new hu(e,this.data,this.fieldMask,r,this.fieldTransforms):new xp(e,this.data,r,this.fieldTransforms)}}class eC{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new hu(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function tC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lr(40011,{Ac:t})}}class a_{constructor(e,r,n,i,s,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new a_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return d1(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tC(this.Ac)&&i9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class a9{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||b2(e)}Cc(e,r,n,i=!1){return new a_({Ac:e,methodName:r,Dc:n,path:is.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qd(t){const e=t._freezeSettings(),r=b2(t._databaseId);return new a9(t._databaseId,!!e.ignoreUndefinedProperties,r)}function N2(t,e,r,n,i,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,r,i);h_("Data must be an object, but it was:",a,n);const o=rC(n,a);let l,u;if(s.merge)l=new Aa(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=nw(e,f,r);if(!a.contains(p))throw new It(nt.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);iC(h,p)||h.push(p)}l=new Aa(h),u=a.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=a.fieldTransforms;return new s9(new Us(o),l,u)}class T2 extends bp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof T2}}class o_ extends bp{_toFieldTransform(e){return new xk(e.path,new $0)}isEqual(e){return e instanceof o_}}class l_ extends bp{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new K0(e.serializer,dk(e.serializer,this.Fc));return new xk(e.path,r)}isEqual(e){return e instanceof l_&&this.Fc===e.Fc}}function c_(t,e,r,n){const i=t.Cc(1,e,r);h_("Data must be an object, but it was:",i,n);const s=[],a=Us.empty();uu(n,(l,u)=>{const h=d_(e,l,r);u=Pi(u);const f=i.yc(h);if(u instanceof T2)s.push(h);else{const p=Sp(u,f);p!=null&&(s.push(h),a.set(h,p))}});const o=new Aa(s);return new eC(a,o,i.fieldTransforms)}function u_(t,e,r,n,i,s){const a=t.Cc(1,e,r),o=[nw(e,n,r)],l=[i];if(s.length%2!=0)throw new It(nt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)o.push(nw(e,s[p])),l.push(s[p+1]);const u=[],h=Us.empty();for(let p=o.length-1;p>=0;--p)if(!iC(u,o[p])){const d=o[p];let v=l[p];v=Pi(v);const y=a.yc(d);if(v instanceof T2)u.push(d);else{const _=Sp(v,y);_!=null&&(u.push(d),h.set(d,_))}}const f=new Aa(u);return new eC(h,f,a.fieldTransforms)}function o9(t,e,r,n=!1){return Sp(r,t.Cc(n?4:3,e))}function Sp(t,e){if(nC(t=Pi(t)))return h_("Unsupported field value:",e,t),rC(t,e);if(t instanceof bp)return function(n,i){if(!tC(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,i){const s=[];let a=0;for(const o of n){let l=Sp(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(n,i){if((n=Pi(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return dk(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=On.fromDate(n);return{timestampValue:a1(i.serializer,s)}}if(n instanceof On){const s=new On(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:a1(i.serializer,s)}}if(n instanceof Yo)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ba)return{bytesValue:Ek(i.serializer,n._byteString)};if(n instanceof Kn){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:U5(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Xo)return function(a,o){return{mapValue:{fields:{[X6]:{stringValue:Q6},[n1]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return M5(o.serializer,u)})}}}}}}(n,i);throw i.Sc(`Unsupported field value: ${f2(n)}`)}(t,e)}function rC(t,e){const r={};return q6(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uu(t,(n,i)=>{const s=Sp(i,e.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function nC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof On||t instanceof Yo||t instanceof ba||t instanceof Kn||t instanceof bp||t instanceof Xo)}function h_(t,e,r){if(!nC(r)||!z6(r)){const n=f2(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function nw(t,e,r){if((e=Pi(e))instanceof Xd)return e._internalPath;if(typeof e=="string")return d_(t,e);throw d1("Field path arguments must be of type string or ",t,!1,void 0,r)}const l9=new RegExp("[~\\*/\\[\\]]");function d_(t,e,r){if(e.search(l9)>=0)throw d1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Xd(...e.split("."))._internalPath}catch{throw d1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function d1(t,e,r,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new It(nt.INVALID_ARGUMENT,o+t+l)}function iC(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,r,n,i,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new c9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(k2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class c9 extends f1{data(){return super.data()}}function k2(t,e){return typeof e=="string"?d_(t,e):e instanceof Xd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new It(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f_{}class p_ extends f_{}function Kh(t,e,...r){let n=[];e instanceof f_&&n.push(e),n=n.concat(r),function(s){const a=s.filter(l=>l instanceof m_).length,o=s.filter(l=>l instanceof C2).length;if(a>1||a>0&&o>0)throw new It(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class C2 extends p_{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new C2(e,r,n)}_apply(e){const r=this._parse(e);return aC(e._query,r),new Vl(e.firestore,e.converter,Kv(e._query,r))}_parse(e){const r=Qd(e.firestore);return function(s,a,o,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new It(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){l3(f,h);const v=[];for(const y of f)v.push(o3(l,s,y));p={arrayValue:{values:v}}}else p=o3(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||l3(f,h),p=o9(o,a,f,h==="in"||h==="not-in");return Ti.create(u,h,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function u9(t,e,r){const n=e,i=k2("where",t);return C2._create(i,n,r)}class m_ extends f_{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new m_(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Eo.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)aC(a,l),a=Kv(a,l)}(e._query,r),new Vl(e.firestore,e.converter,Kv(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class g_ extends p_{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new g_(e,r)}_apply(e){const r=function(i,s,a){if(i.startAt!==null)throw new It(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new It(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new q0(s,a)}(e._query,this._field,this._direction);return new Vl(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new Gd(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function h9(t,e="asc"){const r=e,n=k2("orderBy",t);return g_._create(n,r)}class x_ extends p_{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new x_(e,r,n)}_apply(e){return new Vl(e.firestore,e.converter,s1(e._query,this._limit,this._limitType))}}function d9(t){return gD("limit",t),x_._create("limit",t,"F")}function o3(t,e,r){if(typeof(r=Pi(r))=="string"){if(r==="")throw new It(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sk(e)&&r.indexOf("/")!==-1)throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(bn.fromString(r));if(!or.isDocumentKey(n))throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return SS(t,new or(n))}if(r instanceof Kn)return SS(t,r._key);throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${f2(r)}.`)}function l3(t,e){if(!Array.isArray(t)||t.length===0)throw new It(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aC(t,e){const r=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new It(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new It(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class oC{convertValue(e,r="none"){switch(Jc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Qc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw lr(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return uu(e,(i,s)=>{n[i]=this.convertValue(s,r)}),n}convertVectorValue(e){var n,i,s;const r=(s=(i=(n=e.fields)==null?void 0:n[n1].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>vi(a.doubleValue));return new Xo(r)}convertGeoPoint(e){return new Yo(vi(e.latitude),vi(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=m2(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(V0(e));default:return null}}convertTimestamp(e){const r=Xc(e);return new On(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=bn.fromString(e);Yr(Lk(n),9688,{name:e});const i=new z0(n.get(1),n.get(3)),s=new or(n.popFirst(5));return i.isEqual(r)||Ll(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class f9 extends oC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,r)}}class Yh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $c extends f1{constructor(e,r,n,i,s,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new xg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(k2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new It(nt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=$c._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}$c._jsonSchemaVersion="firestore/documentSnapshot/1.0",$c._jsonSchema={type:Ci("string",$c._jsonSchemaVersion),bundleSource:Ci("string","DocumentSnapshot"),bundleName:Ci("string"),bundle:Ci("string")};class xg extends $c{data(e={}){return super.data(e)}}class Fu{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Yh(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new xg(this._firestore,this._userDataWriter,n.key,n,new Yh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new It(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new xg(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Yh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new xg(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Yh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:p9(o.type),doc:l,oldIndex:u,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new It(nt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=P5.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function p9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lr(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t){t=Ts(t,Kn);const e=Ts(t.firestore,No);return ZO(Yd(e),t._key).then(r=>lC(e,t,r))}Fu._jsonSchemaVersion="firestore/querySnapshot/1.0",Fu._jsonSchema={type:Ci("string",Fu._jsonSchemaVersion),bundleSource:Ci("string","QuerySnapshot"),bundleName:Ci("string"),bundle:Ci("string")};class P2 extends oC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,r)}}function Y0(t){t=Ts(t,Vl);const e=Ts(t.firestore,No),r=Yd(e),n=new P2(e);return sC(t._query),e9(r,t._query).then(i=>new Fu(e,n,t,i))}function Jd(t,e,r){t=Ts(t,Kn);const n=Ts(t.firestore,No),i=I2(t.converter,e,r);return Ep(n,[N2(Qd(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,ki.none())])}function Ha(t,e,r,...n){t=Ts(t,Kn);const i=Ts(t.firestore,No),s=Qd(i);let a;return a=typeof(e=Pi(e))=="string"||e instanceof Xd?u_(s,"updateDoc",t._key,e,r,n):c_(s,"updateDoc",t._key,e),Ep(i,[a.toMutation(t._key,ki.exists(!0))])}function pc(t){return Ep(Ts(t.firestore,No),[new yp(t._key,ki.none())])}function Vo(t,e){const r=Ts(t.firestore,No),n=Ur(t),i=I2(t.converter,e);return Ep(r,[N2(Qd(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,ki.exists(!1))]).then(()=>n)}function xh(t,...e){var l,u,h;t=Pi(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||a3(e[n])||(r=e[n++]);const i={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(a3(e[n])){const f=e[n];e[n]=(l=f.next)==null?void 0:l.bind(f),e[n+1]=(u=f.error)==null?void 0:u.bind(f),e[n+2]=(h=f.complete)==null?void 0:h.bind(f)}let s,a,o;if(t instanceof Kn)a=Ts(t.firestore,No),o=g2(t._key.path),s={next:f=>{e[n]&&e[n](lC(a,t,f))},error:e[n+1],complete:e[n+2]};else{const f=Ts(t,Vl);a=Ts(f.firestore,No),o=f._query;const p=new P2(a);s={next:d=>{e[n]&&e[n](new Fu(a,p,f,d))},error:e[n+1],complete:e[n+2]},sC(t._query)}return function(p,d,v,y){const _=new i_(y),w=new t_(d,_,v);return p.asyncQueue.enqueueAndForget(async()=>J5(await h1(p),w)),()=>{_.Nu(),p.asyncQueue.enqueueAndForget(async()=>Z5(await h1(p),w))}}(Yd(a),o,i,s)}function Ep(t,e){return function(n,i){const s=new Go;return n.asyncQueue.enqueueAndForget(async()=>OO(await QO(n),i,s)),s.promise}(Yd(t),e)}function lC(t,e,r){const n=r.docs.get(e._key),i=new P2(t);return new $c(t,i,e._key,n,new Yh(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Qd(e)}set(e,r,n){this._verifyNotCommitted();const i=Tc(e,this._firestore),s=I2(i.converter,r,n),a=N2(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(a.toMutation(i._key,ki.none())),this}update(e,r,n,...i){this._verifyNotCommitted();const s=Tc(e,this._firestore);let a;return a=typeof(r=Pi(r))=="string"||r instanceof Xd?u_(this._dataReader,"WriteBatch.update",s._key,r,n,i):c_(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(a.toMutation(s._key,ki.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Tc(e,this._firestore);return this._mutations=this._mutations.concat(new yp(r._key,ki.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new It(nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tc(t,e){if((t=Pi(t)).firestore!==e)throw new It(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=Qd(e)}get(e){const r=Tc(e,this._firestore),n=new f9(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return lr(24041);const s=i[0];if(s.isFoundDocument())return new f1(this._firestore,n,s.key,s,r.converter);if(s.isNoDocument())return new f1(this._firestore,n,r._key,null,r.converter);throw lr(18433,{doc:s})})}set(e,r,n){const i=Tc(e,this._firestore),s=I2(i.converter,r,n),a=N2(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,n);return this._transaction.set(i._key,a),this}update(e,r,n,...i){const s=Tc(e,this._firestore);let a;return a=typeof(r=Pi(r))=="string"||r instanceof Xd?u_(this._dataReader,"Transaction.update",s._key,r,n,i):c_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(e){const r=Tc(e,this._firestore);return this._transaction.delete(r._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9 extends x9{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Tc(e,this._firestore),n=new P2(this._firestore);return super.get(e).then(i=>new $c(this._firestore,n,r._key,i._document,new Yh(!1,!1),r.converter))}}function cC(t,e,r){t=Ts(t,No);const n={...m9,...r};return function(s){if(s.maxAttempts<1)throw new It(nt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,a,o){const l=new Go;return s.asyncQueue.enqueueAndForget(async()=>{const u=await JO(s);new KO(s.asyncQueue,u,o,a,l).ju()}),l.promise}(Yd(t),i=>e(new y9(t,i)),n)}function xi(){return new o_("serverTimestamp")}function uC(t){return new l_("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){return Yd(t=Ts(t,No)),new g9(t,e=>Ep(t,e))}(function(e,r=!0){(function(i){qd=i})(Hd),Id(new $u("firestore",(n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new No(new oD(n.getProvider("auth-internal")),new uD(a,n.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new It(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new z0(u.options.projectId,h)}(a,i),a);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),zc(uS,hS,e),zc(uS,hS,"esm2020")})();function hC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const v9=hC,dC=new fp("auth","Firebase",hC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new T5("@firebase/auth");function w9(t,...e){p1.logLevel<=Vr.WARN&&p1.warn(`Auth (${Hd}): ${t}`,...e)}function yg(t,...e){p1.logLevel<=Vr.ERROR&&p1.error(`Auth (${Hd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(t,...e){throw y_(t,...e)}function Qo(t,...e){return y_(t,...e)}function fC(t,e,r){const n={...v9(),[e]:r};return new fp("auth","Firebase",n).create(e,{appName:t.name})}function Wc(t){return fC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y_(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return dC.create(t,...e)}function pr(t,e,...r){if(!t)throw y_(e,...r)}function vl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yg(e),new Error(e)}function Fl(t,e){t||vl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function _9(){return c3()==="http:"||c3()==="https:"}function c3(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_9()||D7()||"connection"in navigator)?navigator.onLine:!0}function S9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,r){this.shortDelay=e,this.longDelay=r,Fl(r>e,"Short delay should be less than long delay!"),this.isMobile=R7()||M7()}get(){return b9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t,e){Fl(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N9=new Np(3e4,6e4);function L2(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Zd(t,e,r,n,i={}){return mC(t,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=pp({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return F7()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&zd(t.emulatorConfig.host)&&(u.credentials="include"),pC.fetch()(await xC(t,t.config.apiHost,r,o),u)})}async function mC(t,e,r){t._canInitEmulator=!1;const n={...A9,...e};try{const i=new T9(t),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Em(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Em(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Em(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Em(t,"user-disabled",a);const h=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw fC(t,h,u);jl(t,h)}}catch(i){if(i instanceof Ul)throw i;jl(t,"network-request-failed",{message:String(i)})}}async function gC(t,e,r,n,i={}){const s=await Zd(t,e,r,n,i);return"mfaPendingCredential"in s&&jl(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function xC(t,e,r,n){const i=`${e}${r}?${n}`,s=t,a=s.config.emulator?v_(t.config,i):`${t.config.apiScheme}://${i}`;return E9.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class T9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Qo(this.auth,"network-request-failed")),N9.get())})}}function Em(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Qo(t,e,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k9(t,e){return Zd(t,"POST","/v1/accounts:delete",e)}async function m1(t,e){return Zd(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function C9(t,e=!1){const r=Pi(t),n=await r.getIdToken(e),i=w_(n);pr(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:o0(Yx(i.auth_time)),issuedAtTime:o0(Yx(i.iat)),expirationTime:o0(Yx(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Yx(t){return Number(t)*1e3}function w_(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return yg("JWT malformed, contained fewer than 3 sections"),null;try{const i=_6(r);return i?JSON.parse(i):(yg("Failed to decode base64 JWT payload"),null)}catch(i){return yg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function u3(t){const e=w_(t);return pr(e,"internal-error"),pr(typeof e.exp<"u","internal-error"),pr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X0(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Ul&&I9(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function I9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=o0(this.lastLoginAt),this.creationTime=o0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(t){var f;const e=t.auth,r=await t.getIdToken(),n=await X0(t,m1(e,{idToken:r}));pr(n==null?void 0:n.users.length,e,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const s=(f=i.providerUserInfo)!=null&&f.length?yC(i.providerUserInfo):[],a=R9(t.providerData,s),o=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=o?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new sw(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function L9(t){const e=Pi(t);await g1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function R9(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function yC(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j9(t,e){const r=await mC(t,{},async()=>{const n=pp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await xC(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return t.emulatorConfig&&zd(t.emulatorConfig.host)&&(l.credentials="include"),pC.fetch()(a,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function F9(t,e){return Zd(t,"POST","/v2/accounts:revokeToken",L2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pr(e.idToken,"internal-error"),pr(typeof e.idToken<"u","internal-error"),pr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){pr(e.length!==0,"internal-error");const r=u3(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(pr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await j9(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,a=new od;return n&&(pr(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(pr(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(pr(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new od,this.toJSON())}_performRefresh(){return vl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t,e){pr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vo{constructor({uid:e,auth:r,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new P9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new sw(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await X0(this,this.stsTokenManager.getToken(this.auth,e));return pr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return C9(this,e)}reload(){return L9(this)}_assign(e){this!==e&&(pr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new vo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){pr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await g1(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(go(this.auth.app))return Promise.reject(Wc(this.auth));const e=await this.getIdToken();return await X0(this,k9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,i=r.email??void 0,s=r.phoneNumber??void 0,a=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,u=r.createdAt??void 0,h=r.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:d,providerData:v,stsTokenManager:y}=r;pr(f&&y,e,"internal-error");const _=od.fromJSON(this.name,y);pr(typeof f=="string",e,"internal-error"),lc(n,e.name),lc(i,e.name),pr(typeof p=="boolean",e,"internal-error"),pr(typeof d=="boolean",e,"internal-error"),lc(s,e.name),lc(a,e.name),lc(o,e.name),lc(l,e.name),lc(u,e.name),lc(h,e.name);const w=new vo({uid:f,auth:e,email:i,emailVerified:p,displayName:n,isAnonymous:d,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:_,createdAt:u,lastLoginAt:h});return v&&Array.isArray(v)&&(w.providerData=v.map(S=>({...S}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,r,n=!1){const i=new od;i.updateFromServerResponse(r);const s=new vo({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await g1(s),s}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];pr(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?yC(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new od;o.updateFromIdToken(n);const l=new vo({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new sw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3=new Map;function wl(t){Fl(t instanceof Function,"Expected a class definition");let e=h3.get(t);return e?(Fl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,h3.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}vC.type="NONE";const d3=vC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t,e,r){return`firebase:${t}:${e}:${r}`}class ld{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=vg(this.userKey,i.apiKey,s),this.fullPersistenceKey=vg("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await m1(this.auth,{idToken:e}).catch(()=>{});return r?vo._fromGetAccountInfoResponse(this.auth,r,e):null}return vo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new ld(wl(d3),e,n);const i=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||wl(d3);const a=vg(n,e.config.apiKey,e.name);let o=null;for(const u of r)try{const h=await u._get(a);if(h){let f;if(typeof h=="string"){const p=await m1(e,{idToken:h}).catch(()=>{});if(!p)break;f=await vo._fromGetAccountInfoResponse(e,p,h)}else f=vo._fromJSON(e,h);u!==s&&(o=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ld(s,e,n):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new ld(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EC(e))return"Blackberry";if(NC(e))return"Webos";if(_C(e))return"Safari";if((e.includes("chrome/")||bC(e))&&!e.includes("edge/"))return"Chrome";if(AC(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function wC(t=Ps()){return/firefox\//i.test(t)}function _C(t=Ps()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bC(t=Ps()){return/crios\//i.test(t)}function SC(t=Ps()){return/iemobile/i.test(t)}function AC(t=Ps()){return/android/i.test(t)}function EC(t=Ps()){return/blackberry/i.test(t)}function NC(t=Ps()){return/webos/i.test(t)}function __(t=Ps()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function D9(t=Ps()){var e;return __(t)&&!!((e=window.navigator)!=null&&e.standalone)}function M9(){return O7()&&document.documentMode===10}function TC(t=Ps()){return __(t)||AC(t)||NC(t)||EC(t)||/windows phone/i.test(t)||SC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t,e=[]){let r;switch(t){case"Browser":r=f3(Ps());break;case"Worker":r=`${f3(Ps())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Hd}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B9(t,e={}){return Zd(t,"GET","/v2/passwordPolicy",L2(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9=6;class V9{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??U9,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new p3(this),this.idTokenSubscription=new p3(this),this.beforeStateQueue=new O9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=wl(r)),this._initializationPromise=this.queue(async()=>{var n,i,s;if(!this._deleted&&(this.persistenceManager=await ld.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await m1(this,{idToken:e}),n=await vo._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(go(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(n=l.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return pr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await g1(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=S9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(go(this.app))return Promise.reject(Wc(this));const r=e?Pi(e):null;return r&&pr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&pr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return go(this.app)?Promise.reject(Wc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return go(this.app)?Promise.reject(Wc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await B9(this),r=new V9(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fp("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await F9(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&wl(e)||this._popupRedirectResolver;pr(r,this,"argument-error"),this.redirectPersistenceManager=await ld.create(this,[wl(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(pr(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,i);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(go(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&w9(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function R2(t){return Pi(t)}class p3{constructor(e){this.auth=e,this.observer=null,this.addObserver=W7(r=>this.observer=r)}get next(){return pr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H9(t){b_=t}function q9(t){return b_.loadJS(t)}function $9(){return b_.gapiScript}function W9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(t,e){const r=C5(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),s=r.getOptions();if(qu(s,e??{}))return i;jl(i,"already-initialized")}return r.initialize({options:e})}function K9(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(wl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Y9(t,e,r){const n=R2(t);pr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=CC(e),{host:a,port:o}=X9(e),l=o===null?"":`:${o}`,u={url:`${s}//${a}${l}/`},h=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){pr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),pr(qu(u,n.config.emulator)&&qu(h,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,zd(a)?(E6(`${s}//${a}${l}`),N6("Auth",!0)):Q9()}function CC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function X9(t){const e=CC(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:m3(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:m3(a)}}}function m3(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Q9(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return vl("not implemented")}_getIdTokenResponse(e){return vl("not implemented")}_linkToIdToken(e,r){return vl("not implemented")}_getReauthenticationResolver(e){return vl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cd(t,e){return gC(t,"POST","/v1/accounts:signInWithIdp",L2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9="http://localhost";class Ku extends IC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ku(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):jl("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...s}=r;if(!n||!i)return null;const a=new Ku(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return cd(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,cd(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,cd(e,r)}buildRequest(){const e={requestUri:J9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=pp(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp extends PC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends Tp{constructor(){super("facebook.com")}static credential(e){return Ku._fromParams({providerId:yc.PROVIDER_ID,signInMethod:yc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yc.credentialFromTaggedObject(e)}static credentialFromError(e){return yc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yc.credential(e.oauthAccessToken)}catch{return null}}}yc.FACEBOOK_SIGN_IN_METHOD="facebook.com";yc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends Tp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ku._fromParams({providerId:vc.PROVIDER_ID,signInMethod:vc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return vc.credentialFromTaggedObject(e)}static credentialFromError(e){return vc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return vc.credential(r,n)}catch{return null}}}vc.GOOGLE_SIGN_IN_METHOD="google.com";vc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends Tp{constructor(){super("github.com")}static credential(e){return Ku._fromParams({providerId:wc.PROVIDER_ID,signInMethod:wc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wc.credentialFromTaggedObject(e)}static credentialFromError(e){return wc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wc.credential(e.oauthAccessToken)}catch{return null}}}wc.GITHUB_SIGN_IN_METHOD="github.com";wc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends Tp{constructor(){super("twitter.com")}static credential(e,r){return Ku._fromParams({providerId:_c.PROVIDER_ID,signInMethod:_c.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return _c.credentialFromTaggedObject(e)}static credentialFromError(e){return _c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return _c.credential(r,n)}catch{return null}}}_c.TWITTER_SIGN_IN_METHOD="twitter.com";_c.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z9(t,e){return gC(t,"POST","/v1/accounts:signUp",L2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const s=await vo._fromIdTokenResponse(e,n,i),a=g3(n);return new tu({user:s,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=g3(n);return new tu({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function g3(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(t){var i;if(go(t.app))return Promise.reject(Wc(t));const e=R2(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new tu({user:e.currentUser,providerId:null,operationType:"signIn"});const r=await Z9(e,{returnSecureToken:!0}),n=await tu._fromIdTokenResponse(e,"signIn",r,!0);return await e._updateCurrentUser(n.user),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1 extends Ul{constructor(e,r,n,i){super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,x1.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new x1(e,r,n,i)}}function RC(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?x1._fromErrorAndOperation(t,s,e,n):s})}async function eB(t,e,r=!1){const n=await X0(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return tu._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tB(t,e,r=!1){const{auth:n}=t;if(go(n.app))return Promise.reject(Wc(n));const i="reauthenticate";try{const s=await X0(t,RC(n,i,e,t),r);pr(s.idToken,n,"internal-error");const a=w_(s.idToken);pr(a,n,"internal-error");const{sub:o}=a;return pr(t.uid===o,n,"user-mismatch"),tu._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&jl(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rB(t,e,r=!1){if(go(t.app))return Promise.reject(Wc(t));const n="signIn",i=await RC(t,n,e),s=await tu._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(s.user),s}function nB(t,e,r,n){return Pi(t).onIdTokenChanged(e,r,n)}function iB(t,e,r){return Pi(t).beforeAuthStateChanged(e,r)}function sB(t,e,r,n){return Pi(t).onAuthStateChanged(e,r,n)}const y1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(y1,"1"),this.storage.removeItem(y1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB=1e3,oB=10;class FC extends jC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);M9()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,oB):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},aB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}FC.type="LOCAL";const lB=FC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC extends jC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}DC.type="SESSION";const MC=DC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new j2(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:s}=r.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async u=>u(r.origin,s)),l=await cB(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}j2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const u=S_("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(){return window}function hB(t){Jo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(){return typeof Jo().WorkerGlobalScope<"u"&&typeof Jo().importScripts=="function"}async function dB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function pB(){return OC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="firebaseLocalStorageDb",mB=1,v1="firebaseLocalStorage",UC="fbase_key";class kp{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function F2(t,e){return t.transaction([v1],e?"readwrite":"readonly").objectStore(v1)}function gB(){const t=indexedDB.deleteDatabase(BC);return new kp(t).toPromise()}function aw(){const t=indexedDB.open(BC,mB);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(v1,{keyPath:UC})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(v1)?e(n):(n.close(),await gB(),e(await aw()))})})}async function x3(t,e,r){const n=F2(t,!0).put({[UC]:e,value:r});return new kp(n).toPromise()}async function xB(t,e){const r=F2(t,!1).get(e),n=await new kp(r).toPromise();return n===void 0?null:n.value}function y3(t,e){const r=F2(t,!0).delete(e);return new kp(r).toPromise()}const yB=800,vB=3;class VC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await aw(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>vB)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=j2._getInstance(pB()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await dB(),!this.activeServiceWorker)return;this.sender=new uB(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await aw();return await x3(e,y1,"1"),await y3(e,y1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>x3(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>xB(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>y3(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=F2(i,!1).getAll();return new kp(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VC.type="LOCAL";const wB=VC;new Np(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _B(t,e){return e?wl(e):(pr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_ extends IC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cd(e,this._buildIdpRequest())}_linkToIdToken(e,r){return cd(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return cd(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function bB(t){return rB(t.auth,new A_(t),t.bypassAuthState)}function SB(t){const{auth:e,user:r}=t;return pr(r,e,"internal-error"),tB(r,new A_(t),t.bypassAuthState)}async function AB(t){const{auth:e,user:r}=t;return pr(r,e,"internal-error"),eB(r,new A_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,r,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bB;case"linkViaPopup":case"linkViaRedirect":return AB;case"reauthViaPopup":case"reauthViaRedirect":return SB;default:jl(this.auth,"internal-error")}}resolve(e){Fl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=new Np(2e3,1e4);class Xh extends zC{constructor(e,r,n,i,s){super(e,r,i,s),this.provider=n,this.authWindow=null,this.pollId=null,Xh.currentPopupAction&&Xh.currentPopupAction.cancel(),Xh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pr(e,this.auth,"internal-error"),e}async onExecution(){Fl(this.filter.length===1,"Popup operations only handle one event");const e=S_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Qo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EB.get())};e()}}Xh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB="pendingRedirect",wg=new Map;class TB extends zC{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=wg.get(this.auth._key());if(!e){try{const n=await kB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}wg.set(this.auth._key(),e)}return this.bypassAuthState||wg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kB(t,e){const r=PB(e),n=IB(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function CB(t,e){wg.set(t._key(),e)}function IB(t){return wl(t._redirectPersistence)}function PB(t){return vg(NB,t.config.apiKey,t.name)}async function LB(t,e,r=!1){if(go(t.app))return Promise.reject(Wc(t));const n=R2(t),i=_B(n,e),a=await new TB(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB=10*60*1e3;class jB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FB(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!HC(e)){const i=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Qo(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RB&&this.cachedEventUids.clear(),this.cachedEventUids.has(v3(e))}saveEventToCache(e){this.cachedEventUids.add(v3(e)),this.lastProcessedEventTime=Date.now()}}function v3(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DB(t,e={}){return Zd(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OB=/^https?/;async function BB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DB(t);for(const r of e)try{if(UB(r))return}catch{}jl(t,"unauthorized-domain")}function UB(t){const e=iw(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!OB.test(r))return!1;if(MB.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB=new Np(3e4,6e4);function w3(){const t=Jo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function zB(t){return new Promise((e,r)=>{var i,s,a;function n(){w3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{w3(),r(Qo(t,"network-request-failed"))},timeout:VB.get()})}if((s=(i=Jo().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=Jo().gapi)!=null&&a.load)n();else{const o=W9("iframefcb");return Jo()[o]=()=>{gapi.load?n():r(Qo(t,"network-request-failed"))},q9(`${$9()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw _g=null,e})}let _g=null;function HB(t){return _g=_g||zB(t),_g}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB=new Np(5e3,15e3),$B="__/auth/iframe",WB="emulator/auth/iframe",GB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YB(t){const e=t.config;pr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?v_(e,WB):`https://${t.config.authDomain}/${$B}`,n={apiKey:e.apiKey,appName:t.name,v:Hd},i=KB.get(t.config.apiHost);i&&(n.eid=i);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${pp(n).slice(1)}`}async function XB(t){const e=await HB(t),r=Jo().gapi;return pr(r,t,"internal-error"),e.open({where:document.body,url:YB(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GB,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Qo(t,"network-request-failed"),o=Jo().setTimeout(()=>{s(a)},qB.get());function l(){Jo().clearTimeout(o),i(n)}n.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JB=500,ZB=600,eU="_blank",tU="http://localhost";class _3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rU(t,e,r,n=JB,i=ZB){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...QB,width:n.toString(),height:i.toString(),top:s,left:a},u=Ps().toLowerCase();r&&(o=bC(u)?eU:r),wC(u)&&(e=e||tU,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[d,v])=>`${p}${d}=${v},`,"");if(D9(u)&&o!=="_self")return nU(e||"",o),new _3(null);const f=window.open(e||"",o,h);pr(f,t,"popup-blocked");try{f.focus()}catch{}return new _3(f)}function nU(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU="__/auth/handler",sU="emulator/auth/handler",aU=encodeURIComponent("fac");async function b3(t,e,r,n,i,s){pr(t.config.authDomain,t,"auth-domain-config-required"),pr(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Hd,eventId:i};if(e instanceof PC){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",$7(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof Tp){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await t._getAppCheckToken(),u=l?`#${aU}=${encodeURIComponent(l)}`:"";return`${oU(t)}?${pp(o).slice(1)}${u}`}function oU({config:t}){return t.emulator?v_(t,sU):`https://${t.authDomain}/${iU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="webStorageSupport";class lU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MC,this._completeRedirectFn=LB,this._overrideRedirectResult=CB}async _openPopup(e,r,n,i){var a;Fl((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await b3(e,r,n,iw(),i);return rU(e,s,S_())}async _openRedirect(e,r,n,i){await this._originValidation(e);const s=await b3(e,r,n,iw(),i);return hB(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:s}=this.eventManagers[r];return i?Promise.resolve(i):(Fl(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await XB(e),n=new jB(e);return r.register("authEvent",i=>(pr(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Xx,{type:Xx},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[Xx];s!==void 0&&r(!!s),jl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=BB(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return TC()||_C()||__()}}const cU=lU;var S3="@firebase/auth",A3="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){pr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dU(t){Id(new $u("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;pr(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kC(t)},u=new z9(n,i,s,l);return K9(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Id(new $u("auth-internal",e=>{const r=R2(e.getProvider("auth").getImmediate());return(n=>new uU(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),zc(S3,A3,hU(t)),zc(S3,A3,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=5*60,pU=A6("authIdTokenMaxAge")||fU;let E3=null;const mU=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>pU)return;const i=r==null?void 0:r.token;E3!==i&&(E3=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function gU(t=I6()){const e=C5(t,"auth");if(e.isInitialized())return e.getImmediate();const r=G9(t,{popupRedirectResolver:cU,persistence:[wB,lB,MC]}),n=A6("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=mU(s.toString());iB(r,a,()=>a(r.currentUser)),nB(r,o=>a(o))}}const i=b6("auth");return i&&Y9(r,`http://${i}`),r}function xU(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}H9({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const s=Qo("internal-error");s.customData=i,r(s)},n.type="text/javascript",n.charset="UTF-8",xU().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dU("Browser");const yU={apiKey:"AIzaSyCrUZenvUEPbAsZ2zXh27SuZAoBArvos5E",authDomain:"instaspec-dev.firebaseapp.com",projectId:"instaspec-dev",storageBucket:"instaspec-dev.firebasestorage.app",messagingSenderId:"847536725528",appId:"1:847536725528:web:0d10c3c1d405a292482d6d"},qC=C6(yU),vU="(default)",tr=r9(qC,vU),Au=gU(qC);let ow,$C;const wU=new Promise((t,e)=>{ow=t,$C=e});let kc=!1,N3=!1;sB(Au,async t=>{if(!N3)if(N3=!0,!t&&!kc){kc=!0;try{const e=await LC(Au);ow(e.user),kc=!1}catch(e){console.error("[Firebase Auth] Anonymous sign-in failed:",e),$C(e),kc=!1}}else t&&ow(t)});const Fr=async()=>{if(Au.currentUser)return Au.currentUser;try{await wU}catch(t){throw console.error("[ensureAuth] Auth initialization failed:",t),new Error("Authentication initialization failed")}if(!Au.currentUser){if(kc)return await new Promise(t=>setTimeout(t,100)),Fr();kc=!0;try{const t=await LC(Au);return kc=!1,t.user}catch(t){throw kc=!1,console.error("[ensureAuth] Failed to sign in anonymously:",t),new Error("Authentication required for Firestore access")}}return Au.currentUser},ef={loginLog:"instaspec:betaLoginLog",feedback:"instaspec:betaFeedback",accessRequests:"instaspec:betaAccessRequests"},WC=typeof window<"u",E_="betaUsage",l0=10,GC="betaLoginLogs",D2=(t,e)=>{if(!WC)return e;try{const r=window.localStorage.getItem(t);return r?JSON.parse(r):e}catch(r){return console.warn(`Failed to parse localStorage key ${t}`,r),e}},M2=(t,e)=>{if(WC)try{window.localStorage.setItem(t,JSON.stringify(e))}catch(r){console.warn(`Failed to persist localStorage key ${t}`,r)}},lw=["admin@techarix.com"],KC=["tester1@techarix.com"],w1="INSTASPECMASTER@2025",ui=(t="")=>t.trim().toLowerCase(),T3=()=>Math.random().toString(36).substring(2,6).toUpperCase(),k3=()=>`BETA-${T3()}-${T3()}`,ka=new Map,Du=t=>t&&(KC.includes(t.email)?{...t,expiresAt:null}:t),YC="instaspec:betaUsers";let Ho=D2(YC,[]).map(t=>({...t,email:ui(t.email)}));const XC=()=>M2(YC,Ho),C3=t=>Ho.find(e=>e.email===t)||null,_U=t=>(Ho=[...Ho.filter(r=>r.email!==t.email),t],XC(),t),bU=t=>{Ho=Ho.filter(e=>e.email!==t),XC()};async function N_(t){const e=ui(t);if(!e)return null;try{await Fr();const r=Ur(tr,"betaUsers",e),n=await Ap(r);if(!n.exists()){const s=C3(e);if(!s)return null;const a=Du(s);return ka.set(e,a),a}const i=Du({...n.data(),email:e});return ka.set(e,i),i}catch(r){console.warn("Falling back to local beta user store",r);const n=C3(e);if(!n)return null;const i=Du(n);return ka.set(e,i),i}}async function SU(){try{return await Fr(),(await Y0(yi(tr,"betaUsers"))).docs.map(r=>{const n=r.data(),i=n.email||r.id,s=ui(i),a=Du({...n,email:s});return ka.set(s,a),a})}catch(t){return console.warn("Failed to load beta users from Firestore, using local store.",t),Ho=(Ho||[]).map(e=>Du(e)),Ho.forEach(e=>ka.set(e.email,e)),Ho}}async function bg({email:t,code:e,plan:r="beta_tester",isAdmin:n=!1,hours:i=1,expiresAt:s}){const a=ui(t);if(!a)throw new Error("Missing email");await Fr();const o=Ur(tr,"betaUsers",a),l=Date.now(),u=await Ap(o),h=u.exists()?u.data():null,f=(h==null?void 0:h.createdAt)||l,d=KC.includes(a)?null:typeof s=="number"?s:l+i*60*60*1e3,v={email:a,code:e,plan:r,isAdmin:n,expiresAt:d,updatedAt:l,createdAt:f};try{await Jd(o,v,{merge:!0});const y=Du(v);return ka.set(a,y),y}catch(y){console.warn("Failed to save beta user to Firestore. Using local store.",y);const _=Du(v);return _U(_),ka.set(a,_),_}}async function AU(t){const e=ui(t);if(e){await Fr();try{await pc(Ur(tr,"betaUsers",e)),ka.delete(e)}catch(r){console.warn("Failed to delete beta user from Firestore. Removing locally.",r),bU(e),ka.delete(e)}}}async function EU(t,e){if(!t||!e)return{status:"missing",user:null};const r=ui(t);if(e===w1&&lw.includes(r)){const i={email:r,code:w1,plan:"beta_admin",isAdmin:!0,expiresAt:null,createdAt:Date.now(),updatedAt:Date.now()};return ka.set(r,i),{status:"success",user:i}}const n=await N_(r);return n?n.code!==e?{status:"invalid_code",user:null}:n.expiresAt&&Date.now()>n.expiresAt?{status:"expired",user:null}:{status:"success",user:n}:{status:"not_found",user:null}}function NU(t){const e=ui(t);if(!e)return!1;if(ka.has(e)){const r=ka.get(e)||{};return typeof r.isAdmin=="boolean"?r.isAdmin:lw.includes(e)||String(r.plan||"").toLowerCase()==="beta_admin"}return lw.includes(e)}const I3=50,QC=20,_l=D2(ef.loginLog,[]),TU=()=>M2(ef.loginLog,_l),JC=()=>Ur(tr,"betaMetadata","loginStats"),kU=()=>_l.reduce((t,e)=>{const r=ui(e==null?void 0:e.email);return r&&(t[r]=(t[r]||0)+1),t},{}),CU=async t=>{try{await Fr(),await Vo(yi(tr,GC),t),await Jd(JC(),{totalLogins:uC(1)},{merge:!0})}catch(e){console.warn("Failed to persist login log to Firestore",e)}},IU=()=>{const t=_l.slice(-QC).reverse().map(e=>({...e}));return{totalLogins:_l.length,recentLogins:t}},PU=async(t={})=>{await Fr();const e=JC();let r=0;try{const n=await Ap(e);n.exists()&&(r=n.data().totalLogins||0)}catch(n){console.warn("Failed to read login stats summary",n)}try{const n=Kh(yi(tr,GC),h9("timestamp","desc"),d9(t.limit||QC)),s=(await Y0(n)).docs.map(a=>a.data());return{totalLogins:r,recentLogins:s}}catch(n){console.warn("Failed to load login logs from Firestore",n);const i=IU();return{totalLogins:r,recentLogins:i.recentLogins}}};async function LU(t,e){if(!t)return;const r={email:ui(t),isAdmin:!!e,timestamp:Date.now()};_l.push(r),_l.length>I3&&_l.splice(0,_l.length-I3),TU(),CU(r);try{await Fr(),await Jd(Ur(tr,"betaUsers",r.email),{loginCount:uC(1)},{merge:!0})}catch(n){console.warn("Failed to increment loginCount",n)}}const P3=t=>{const e=ui(t);return e?_l.some(r=>r.email===e):!1},RU=()=>{const t=D2(ef.feedback,[]);return Array.isArray(t)?t.map(e=>({id:(e==null?void 0:e.id)||`fdbk_${Date.now()}`,email:ui((e==null?void 0:e.email)||""),createdAt:typeof(e==null?void 0:e.createdAt)=="number"?e.createdAt:Date.now(),context:(e==null?void 0:e.context)||"Other",message:(e==null?void 0:e.message)||"",imageDataUrl:(e==null?void 0:e.imageDataUrl)||null})):[]};let _1=RU();const jU=()=>M2(ef.feedback,_1),FU=()=>[..._1].sort((t,e)=>(e.createdAt||0)-(t.createdAt||0)),DU=({email:t,context:e,message:r,imageDataUrl:n})=>{const i={id:`fdbk_${Date.now()}`,email:ui(t),createdAt:Date.now(),context:e||"Other",message:r||"",imageDataUrl:n||null};return _1=[i,..._1],jU(),i},MU=()=>{const t=D2(ef.accessRequests,[]);return Array.isArray(t)?t.map(e=>({id:(e==null?void 0:e.id)||`request_${Date.now()}`,email:ui((e==null?void 0:e.email)||""),name:(e==null?void 0:e.name)||"",organization:(e==null?void 0:e.organization)||"",reason:(e==null?void 0:e.reason)||"",createdAt:typeof(e==null?void 0:e.createdAt)=="number"?e.createdAt:Date.now()})):[]};let Md=MU();const ZC=()=>M2(ef.accessRequests,Md),OU=()=>[...Md].sort((t,e)=>(e.createdAt||0)-(t.createdAt||0)),BU=({email:t,name:e,organization:r,reason:n})=>{const i={id:`request_${Date.now()}`,email:ui(t),name:(e==null?void 0:e.trim())||"",organization:(r==null?void 0:r.trim())||"",reason:(n==null?void 0:n.trim())||"",createdAt:Date.now()};return Md=[i,...Md],ZC(),i},UU=t=>{t&&(Md=Md.filter(e=>e.id!==t),ZC())};async function eI(t){const e=ui(t);if(!e)return{count:0,limit:l0};await Fr();const r=Ur(tr,E_,e),n=await Ap(r);if(!n.exists())return{count:0,limit:l0};const i=n.data()||{};return{count:i.count||0,limit:i.limit||l0}}async function VU(t,e=l0){const r=ui(t);if(!r)return{allowed:!1,count:0,limit:e};await Fr();const n=Ur(tr,E_,r);return cC(tr,async i=>{const s=await i.get(n),a=s.exists()&&s.data().count||0;if(a>=e)return{allowed:!1,count:a,limit:e};const o=a+1;return i.set(n,{email:r,count:o,limit:e,updatedAt:Date.now()},{merge:!0}),{allowed:!0,count:o,limit:e}})}async function zU(t,e=24){const r=ui(t),n=Number(e);if(!r)throw new Error("Missing email");if(!Number.isFinite(n)||n<=0)throw new Error("Hours to extend must be a positive number.");const s=ka.get(r)||await N_(r);if(!s)throw new Error("Beta user not found.");const a=Date.now(),l=(typeof s.expiresAt=="number"?Math.max(s.expiresAt,a):a)+n*60*60*1e3;return bg({email:r,code:s.code,plan:s.plan||"beta_tester",isAdmin:!!s.isAdmin,expiresAt:l})}async function HU(t,e=5){const r=ui(t),n=Number(e);if(!r)throw new Error("Missing email");if(!Number.isFinite(n)||n<=0)throw new Error("Increment must be a positive number.");await Fr();const i=Ur(tr,E_,r);return cC(tr,async s=>{const a=await s.get(i),o=a.exists()?a.data():{},u=(o.limit||l0)+n,h=o.count||0;return s.set(i,{email:r,count:h,limit:u,updatedAt:Date.now()},{merge:!0}),{count:h,limit:u}})}async function qU(t){const e=ui(t);if(!e)throw new Error("Invalid email");const r=await Fr();if(!r)throw new Error("Not authenticated");const n=Ur(tr,"userProfiles",r.uid);try{return await Jd(n,{uid:r.uid,email:e,updatedAt:Date.now()},{merge:!0}),{uid:r.uid,email:e}}catch(i){throw console.error("[UserProfile] Failed to create/update profile:",i),i}}const Nm="instaspec:user",tI=we.createContext({user:null,login:()=>{},logout:()=>{}}),$U=({children:t})=>{const[e,r]=we.useState(()=>{if(typeof window>"u")return null;try{const u=window.localStorage.getItem(Nm);if(!u)return null;const h=JSON.parse(u);return h.expiresAt&&h.expiresAt<=Date.now()?(window.localStorage.removeItem(Nm),null):h}catch{return null}}),n=we.useRef(null),i=we.useCallback(u=>{if(!(u!=null&&u.email))return null;const h=u.email.trim().toLowerCase();if(!h)return null;const f=u.plan||(u.isAdmin?"beta_admin":"beta_tester");return{email:h,plan:f,isAdmin:typeof u.isAdmin=="boolean"?u.isAdmin:f==="beta_admin",expiresAt:typeof u.expiresAt=="number"?u.expiresAt:null}},[]),s=we.useCallback((u,h={})=>(r(null),null),[]),a=we.useCallback(async u=>{const h=(u||"").trim().toLowerCase();if(!h)return null;try{const f=await N_(h),p=!1;if(!f||f.expiresAt&&f.expiresAt<=Date.now())return s("expired-or-missing-latest",{latest:f});const d=i({...f,email:h});return d?(r(v=>v&&v.email===d.email&&v.plan===d.plan&&v.isAdmin===d.isAdmin&&v.expiresAt===d.expiresAt?v:d),d):s("mapped-user-invalid",{latest:f})}catch(f){return console.warn("Failed to verify beta session",f),null}},[s,i,e]);we.useEffect(()=>{typeof window>"u"||(e?window.localStorage.setItem(Nm,JSON.stringify(e)):window.localStorage.removeItem(Nm))},[e]),we.useEffect(()=>{if(n.current&&(clearTimeout(n.current),n.current=null),!e||!e.expiresAt)return;const u=e.expiresAt-Date.now();return u<=0?s("expired-timer",{msLeft:u}):(n.current=setTimeout(()=>{s("timer-signout")},u),()=>{n.current&&(clearTimeout(n.current),n.current=null)})},[e,s]),we.useEffect(()=>{e!=null&&e.email&&a(e.email)},[e==null?void 0:e.email,a]);const o=we.useCallback(async u=>{const h=i(u);if(h){try{await qU(h.email)}catch(f){console.error("[Auth] Failed to create user profile:",f)}r(h),LU(h.email,h.isAdmin)}},[i]),l=we.useCallback(()=>{s("manual-logout")},[s]);return c.jsx(tI.Provider,{value:{user:e,login:o,logout:l},children:t})},Cp=()=>{const t=we.useContext(tI);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},L3=t=>{switch(t){case"missing":return"Enter your email and beta code to sign in.";case"invalid_code":case"not_found":return"We couldn't find a match for that email and beta code. Please check both and try again.";case"expired":return"Your beta code has expired. Please contact the admin for an extension or extended access.";default:return"We couldn't verify your beta access. Please try again."}},WU=({isOpen:t,onClose:e,onSuccess:r})=>{const{user:n,login:i}=Cp(),[s,a]=we.useState(""),[o,l]=we.useState(""),[u,h]=we.useState(""),[f,p]=we.useState(!1),[d,v]=we.useState(!1),[y,_]=we.useState("form"),[w,S]=we.useState(""),[C,j]=we.useState("first"),q=we.useRef(!1),[G,E]=we.useState(!1),[k,A]=we.useState({email:"",name:"",organization:"",reason:""}),[D,N]=we.useState(""),[R,L]=we.useState(""),[se,ge]=we.useState(!1),ve=Ie=>{if(!Ie){S("");return}const P=Ie-Date.now();if(P<=0){S("Session has expired.");return}const O=Math.floor(P/(60*1e3)),B=Math.floor(O/60),z=O%60;B<=0?S(`Expires in ${z} min`):S(`Expires in ${B}h ${z.toString().padStart(2,"0")}m`)};if(we.useEffect(()=>{if(!t){a(""),l(""),h(""),p(!1),v(!1),_("form"),S(""),E(!1),A({email:"",name:"",organization:"",reason:""}),N(""),q.current=!1,j("first");return}n&&n.expiresAt&&(_("success"),ve(n.expiresAt),n.email&&!q.current&&(q.current=!0,j(P3(n.email)?"returning":"first")))},[t,n]),!t)return null;const ye=async Ie=>{Ie.preventDefault(),h("");const P=s.trim().toLowerCase(),O=o.trim();if(!P||!O){h(L3("missing"));return}v(!0);try{const{status:B,user:z}=await EU(P,O);if(B!=="success"){h(L3(B));return}q.current=!0,j(P3(P)?"returning":"first"),i({email:z.email,plan:z.plan||(z.isAdmin?"beta_admin":"beta_tester"),isAdmin:!!z.isAdmin,expiresAt:z.expiresAt}),_("success")}catch(B){console.error("Beta login failed:",B),h("We couldn't verify your beta access right now. Please try again.")}finally{v(!1)}},he=()=>{A(Ie=>({...Ie,email:s.trim()||Ie.email})),N(""),ge(!1),E(!0),L("")},_e=Ie=>{Ie.preventDefault();const P=k.email.trim().toLowerCase();if(!/\S+@\S+\.\S+/.test(P)){N("Enter a valid email so we can process your request.");return}ge(!0);try{BU({email:P,name:k.name,organization:k.organization,reason:k.reason}),N(""),E(!1),L(`Thank you for showing your interest!
Our team will contact you with a beta access code.
Alternatively, you can contact Mr. Riyasudeen via LinkedIn and share this email address for a beta access code.`)}catch(O){console.error("Failed to record access request",O),N("Could not submit your request right now. Please try again.")}finally{ge(!1)}},Ue=()=>{typeof r=="function"&&r(),e()};return c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:[c.jsx("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl transform transition-all duration-200 ease-out scale-95 opacity-0 animate-[fadeInUp_0.2s_ease-out_forwards]",children:y==="success"&&n?c.jsxs(c.Fragment,{children:[C==="returning"?c.jsxs(c.Fragment,{children:[c.jsxs("h2",{className:"mb-2 text-xl font-semibold text-gray-900",children:["Hey"," ",c.jsx("span",{className:"font-medium text-gray-900",children:n.email}),", welcome back!"]}),c.jsx("p",{className:"mb-2 text-sm text-gray-700",children:"We're excited to have you in the Beta again."}),c.jsx("p",{className:"mb-4 text-sm text-gray-700",children:"Pick up where you left off, your projects are waiting."})]}):c.jsxs(c.Fragment,{children:[c.jsxs("h2",{className:"mb-2 text-xl font-semibold text-gray-900",children:["You made it,"," ",c.jsx("span",{className:"font-medium text-gray-900",children:n.email}),"!"]}),c.jsx("p",{className:"mb-2 text-sm text-gray-700",children:"InstaSpec Beta access: Unlocked."}),c.jsx("p",{className:"mb-2 text-sm text-gray-700",children:"Start creating projects, exploring features, and shaping how teams build specs."}),c.jsx("p",{className:"mb-4 text-sm text-gray-700",children:"Your voice matters, hit that feedback button anytime!"})]}),w&&c.jsx("p",{className:"mb-4 text-xs text-gray-500",children:w}),c.jsx("div",{className:"mt-4 flex justify-end",children:c.jsx("button",{type:"button",onClick:Ue,className:"rounded-lg bg-blue-600 px-4 py-1.5 text-sm font-medium text-white hover:bg-blue-700",children:"Continue to InstaSpec"})})]}):c.jsxs(c.Fragment,{children:[c.jsx("h2",{className:"mb-1 text-xl font-semibold",children:"Sign in to the InstaSpec Beta"}),c.jsx("p",{className:"mb-4 text-sm text-gray-600",children:"You're early and that's awesome. Enter your email and your beta code to step inside and start exploring what's next."}),c.jsxs("form",{onSubmit:ye,className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Email"}),c.jsx("input",{type:"email",className:"w-full rounded-lg border px-3 py-2 text-sm text-gray-900 placeholder-gray-500 border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:s,onChange:Ie=>a(Ie.target.value),placeholder:"you@company.com",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Beta access code"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:f?"text":"password",className:"w-full rounded-lg border px-3 py-2 text-sm text-gray-900 placeholder-gray-500 border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 pr-20",value:o,onChange:Ie=>l(Ie.target.value),placeholder:"Enter the code you received",required:!0}),c.jsx("button",{type:"button",onClick:()=>p(Ie=>!Ie),className:"absolute inset-y-0 right-2 my-auto rounded-md px-2 text-xs font-medium text-gray-600 hover:bg-gray-100",children:f?"Hide":"Show"})]}),c.jsx("button",{type:"button",onClick:he,className:"mt-1 text-xs text-blue-600 hover:underline",children:"Need a new code? Request another."})]}),u&&c.jsx("p",{className:"text-xs text-red-600",children:u}),R&&c.jsx("div",{className:"mt-2 rounded-lg border border-green-100 bg-green-50 p-3 text-xs text-green-700 whitespace-pre-line",children:R}),c.jsxs("div",{className:"mt-2 flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:e,className:"rounded-lg px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:d,className:`rounded-lg bg-blue-600 px-4 py-1.5 text-sm font-medium text-white hover:bg-blue-700 ${d?"opacity-60 cursor-not-allowed":""}`,children:d?"Checking...":"Beta Login"})]})]})]})}),G&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 px-4",children:c.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Request Early Access"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Share a few details and we'll queue your beta invite."})]}),c.jsx("button",{onClick:()=>E(!1),className:"text-xs uppercase tracking-wide text-gray-500 hover:text-gray-900",children:"Close"})]}),c.jsxs("form",{onSubmit:_e,className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Email"}),c.jsx("input",{type:"email",value:k.email,onChange:Ie=>A(P=>({...P,email:Ie.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400",placeholder:"tester@example.com",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Your name"}),c.jsx("input",{type:"text",value:k.name,onChange:Ie=>A(P=>({...P,name:Ie.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400",placeholder:"Full name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Organization / Role"}),c.jsx("input",{type:"text",value:k.organization,onChange:Ie=>A(P=>({...P,organization:Ie.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400",placeholder:"Design Studio, Architect, etc."})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"What will you explore?"}),c.jsx("textarea",{value:k.reason,onChange:Ie=>A(P=>({...P,reason:Ie.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 h-24",placeholder:"Tell us why you need InstaSpec access."})]}),D&&c.jsx("p",{className:"text-xs text-red-600",children:D}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[c.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 text-sm rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:se,className:`px-4 py-2 text-sm rounded-lg bg-indigo-600 text-white hover:bg-indigo-500 ${se?"opacity-60 cursor-not-allowed":""}`,children:se?"Submitting...":"Join Beta Waitlist"})]})]})]})})]})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Vt=(t,e)=>{const r=we.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,...u},h)=>we.createElement("svg",{ref:h,...GU,width:i,height:i,stroke:n,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${KU(t)}`,o].join(" "),...u},[...e.map(([f,p])=>we.createElement(f,p)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=Vt("Accessibility",[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=Vt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=Vt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=Vt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=Vt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=Vt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=Vt("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=Vt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=Vt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=Vt("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=Vt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=Vt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=Vt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=Vt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=Vt("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=Vt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=Vt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=Vt("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=Vt("DoorClosed",[["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14",key:"36qu9e"}],["path",{d:"M2 20h20",key:"owomy5"}],["path",{d:"M14 12v.01",key:"xfcn54"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=Vt("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=Vt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=Vt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=Vt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=Vt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=Vt("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=Vt("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=Vt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=Vt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=Vt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=Vt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=Vt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=Vt("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=Vt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=Vt("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=Vt("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=Vt("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=Vt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=Vt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=Vt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=Vt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=Vt("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=Vt("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=Vt("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=Vt("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=Vt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=Vt("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=Vt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=Vt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=Vt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=Vt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=Vt("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=Vt("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=Vt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=Vt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=Vt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=Vt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=Vt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=Vt("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=Vt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=Vt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=Vt("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=Vt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=Vt("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=Vt("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=Vt("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=Vt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=Vt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=Vt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),AV=t=>{if(!t)return"Just now";const e=Date.now()-t,r=Math.floor(e/(1e3*60));if(r<1)return"Just now";if(r<60)return`${r}m ago`;const n=Math.floor(r/60);return n<24?`${n}h ago`:`${Math.floor(n/24)}d ago`},ey=10,Pf={hours:"24",downloads:"5"},aI=({isOpen:t,onClose:e})=>{const[r,n]=we.useState([]),[i,s]=we.useState({totalLogins:0,recentLogins:[]}),[a,o]=we.useState([]),[l,u]=we.useState([]),[h,f]=we.useState(null),[p,d]=we.useState(""),[v,y]=we.useState(!1),[_,w]=we.useState(null),[S,C]=we.useState("access"),[j,q]=we.useState("expiring"),[G,E]=we.useState(!1),[k,A]=we.useState({}),[D,N]=we.useState({}),[R,L]=we.useState({}),[se,ge]=we.useState({}),ve=we.useRef(null);we.useEffect(()=>{r.length&&N(be=>{const tt={...be};return r.forEach(ct=>{tt[ct.email]||(tt[ct.email]={...Pf})}),tt})},[r]);const ye=we.useMemo(()=>{const be=r.length,tt=r.filter(ct=>ct.isAdmin).length;return{totalUsers:be,totalAdmins:tt,totalLogins:i.totalLogins}},[r,i.totalLogins]),he=we.useMemo(()=>r.filter(be=>!!be.expiresAt&&(!be.expiresAt||be.expiresAt>Date.now())),[r]),_e=we.useMemo(()=>r.filter(be=>!!be.expiresAt&&be.expiresAt<=Date.now()),[r]),Ue=we.useMemo(()=>r.filter(be=>!be.expiresAt),[r]),Ie=j==="noExpiry"?Ue:j==="expired"?_e:he,P=we.useCallback(()=>{ge(kU())},[]);we.useEffect(()=>{if(t)return w(null),d(""),y(!1),C("access"),q("expiring"),N({}),L({}),Ne(),et(),Xe(),P(),()=>{ve.current&&clearTimeout(ve.current)}},[t,P]);const O=(be,tt="success")=>{const ct=Date.now();ve.current&&clearTimeout(ve.current),w({message:be,tone:tt,key:ct}),ve.current=setTimeout(()=>{w(St=>(St==null?void 0:St.key)===ct?null:St)},3500)},B=be=>k[be]||{count:0,limit:ey},z=(be,tt)=>{var ct;return((ct=D[be])==null?void 0:ct[tt])??Pf[tt]},Z=(be,tt,ct)=>{N(St=>({...St,[be]:{...Pf,...St[be],[tt]:ct}}))},de=(be,tt)=>{L(ct=>({...ct,[be]:tt}))},Se=async be=>{try{const tt=await Promise.all(be.map(async ct=>{try{const St=await eI(ct.email);return[ct.email,St]}catch(St){return console.error("Failed to load usage for",ct.email,St),[ct.email,{count:0,limit:ey}]}}));A(Object.fromEntries(tt))}catch(tt){console.error("Failed to load usage map",tt)}},Ae=async()=>{try{const be=await PU();s(be)}catch(be){console.error("Failed to refresh login stats",be)}},Ne=async()=>{E(!0);try{const be=await SU();be.sort((tt,ct)=>tt.email.localeCompare(ct.email)),n(be),await Se(be),await Ae()}catch(be){console.error("Failed to load beta users",be),O("Failed to load beta users.","error")}finally{E(!1)}},Xe=()=>{o(FU())},et=()=>{u(OU())},ot=be=>/\S+@\S+\.\S+/.test(be||""),mt=be=>{n(tt=>[...tt.filter(St=>St.email!==be.email),be].sort((St,Rt)=>St.email.localeCompare(Rt.email)))},te=async be=>{be.preventDefault();const tt=p.trim().toLowerCase();if(!ot(tt)){O("Enter a valid email before adding.","error");return}if(r.some(St=>St.email===tt)){O("This email already exists in Firestore.","error");return}try{const St=k3(),Rt=await bg({email:tt,code:St,plan:v?"beta_admin":"beta_tester",isAdmin:v});mt(Rt),A(jt=>({...jt,[Rt.email]:{count:0,limit:ey}})),d(""),y(!1),O(`Added ${tt}${v?" as admin":""}.`)}catch(St){console.error("Failed to add beta user",St),O("Unable to add user. Check console for details.","error")}},ke=async be=>{try{const tt=await bg({email:be.email,code:be.code,plan:be.isAdmin?"beta_tester":"beta_admin",isAdmin:!be.isAdmin,expiresAt:be.expiresAt});mt(tt),O(`${tt.email} is now ${tt.isAdmin?"an admin":"a beta tester"}.`)}catch(tt){console.error("Failed to toggle admin",tt),O("Unable to update admin state.","error")}},X=async be=>{var tt;try{const ct=k3(),St=await bg({email:be.email,code:ct,plan:be.plan,isAdmin:be.isAdmin,expiresAt:be.expiresAt});mt(St);try{await((tt=navigator.clipboard)==null?void 0:tt.writeText(ct)),O("New code generated & copied.")}catch{O("New code generated. Copy it manually.","error")}}catch(ct){console.error("Failed to regenerate code",ct),O("Unable to regenerate code.","error")}},me=async be=>{if(window.confirm(`Remove ${be.email} from the beta list?`))try{await AU(be.email),n(tt=>tt.filter(ct=>ct.email!==be.email)),A(tt=>{const ct={...tt};return delete ct[be.email],ct}),O(`${be.email} removed.`)}catch(tt){console.error("Failed to delete user",tt),O("Unable to delete user.","error")}},fe=async be=>{const tt=`expiry:${be.email}`;if(R[tt])return;const ct=Number(z(be.email,"hours"));if(!Number.isFinite(ct)||ct<=0){O("Enter a positive number of hours.","error");return}de(tt,!0);try{const St=await zU(be.email,ct);mt(St),O(`Extended expiry for ${be.email} by ${ct}h.`)}catch(St){console.error("Failed to extend expiry",St),O("Unable to extend expiry.","error")}finally{de(tt,!1)}},qe=async be=>{if(be.isAdmin)return;const tt=`downloads:${be.email}`;if(R[tt])return;const ct=Number(z(be.email,"downloads"));if(!Number.isFinite(ct)||ct<=0){O("Enter a positive download amount.","error");return}de(tt,!0);try{const St=await HU(be.email,ct);A(Rt=>({...Rt,[be.email]:St})),O(`Added ${ct} downloads to ${be.email}.`)}catch(St){console.error("Failed to extend download limit",St),O("Unable to extend download limit.","error")}finally{de(tt,!1)}},Ke=be=>{UU(be),et(),O("Request archived.")};if(!t)return null;const st=[{id:"access",label:"Access & Users"},{id:"feedback",label:"Feedback"}],yt=[{id:"expiring",label:"Expiring",description:"Active beta users whose expiry is in the future",count:he.length},{id:"expired",label:"Expired",description:"Users whose access dates have passed",count:_e.length},{id:"noExpiry",label:"No expiry",description:"Unlimited access users",count:Ue.length}],Ht=yt.find(be=>be.id===j)||yt[0];return c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:[c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl mx-4 p-6 relative max-h-[95vh] overflow-y-auto",children:[c.jsx("button",{onClick:e,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:c.jsx(ml,{size:18})}),c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(E1,{className:"text-indigo-600",size:22}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Beta Access Admin Console"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Manage Firestore-stored beta users, admin privileges, personalized codes, and login activity."})]})]}),_&&c.jsxs("div",{className:`mb-4 flex items-center gap-2 rounded-lg border px-3 py-2 text-sm ${_.tone==="error"?"border-red-200 bg-red-50 text-red-700":"border-green-200 bg-green-50 text-green-700"}`,children:[_.tone==="error"?c.jsx(xo,{size:16}):c.jsx(Ya,{size:16}),c.jsx("span",{children:_.message})]}),c.jsx("div",{className:"flex gap-2 border-b border-gray-200 mb-4",children:st.map(be=>c.jsx("button",{onClick:()=>C(be.id),className:`px-3 py-2 text-sm font-semibold rounded-t-lg ${S===be.id?"text-indigo-600 border-b-2 border-indigo-600 bg-white":"text-gray-500"}`,children:be.label},be.id))}),S==="access"&&c.jsxs(c.Fragment,{children:[c.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-5",children:[c.jsxs("div",{className:"rounded-xl border border-gray-200 p-4 bg-gray-50",children:[c.jsx("p",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Beta Users"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:ye.totalUsers})]}),c.jsxs("div",{className:"rounded-xl border border-gray-200 p-4 bg-gray-50",children:[c.jsx("p",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Admins"}),c.jsx("p",{className:"text-2xl font-bold text-indigo-600 mt-1",children:ye.totalAdmins})]}),c.jsxs("div",{className:"rounded-xl border border-gray-200 p-4 bg-gray-50",children:[c.jsx("p",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Recorded Logins"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:ye.totalLogins})]})]}),c.jsxs("section",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 bg-gray-50 flex flex-col gap-2",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Admin master code"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Read-only constant for admin emails."})]}),c.jsxs("button",{type:"button",onClick:async()=>{var be;try{await((be=navigator.clipboard)==null?void 0:be.writeText(w1)),O("Master code copied.")}catch{O("Unable to copy master code.","error")}},className:"px-3 py-1.5 text-xs border rounded-lg text-gray-700 hover:bg-gray-100 flex items-center gap-1",children:[c.jsx(rI,{size:12})," Copy"]})]}),c.jsx("div",{className:"rounded-lg border border-gray-200 bg-white px-3 py-2 font-mono text-xs tracking-[0.2em] text-gray-900",children:w1})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 bg-gray-50 flex flex-col gap-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Default tester code"}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Legacy fallback from ",c.jsx("code",{children:"VITE_BETA_ACCESS_CODE"}),". Share only if needed."]})]}),c.jsx("div",{className:"rounded-lg border border-gray-200 bg-white px-3 py-2 font-mono text-xs tracking-[0.2em] text-gray-900",children:"INSTAspecbeta@2025"})]})]}),c.jsxs("section",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Access Requests"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Submitted from the beta login modal."})]}),c.jsxs("button",{onClick:et,className:"px-3 py-1.5 text-xs rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-100 flex items-center gap-1",children:[c.jsx(h0,{size:12})," Refresh"]})]}),c.jsx("div",{className:"border border-gray-200 rounded-xl divide-y divide-gray-100 bg-white",children:l.length===0?c.jsxs("div",{className:"p-4 text-xs text-gray-500 flex items-center gap-2",children:[c.jsx(xo,{size:16})," No pending access requests."]}):l.map(be=>c.jsxs("div",{className:"p-4 flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-900 break-all",children:be.email}),c.jsxs("p",{className:"text-xs text-gray-500",children:[(be.name||"Unnamed").trim()||"Unnamed"," "," ",be.organization||"No organization provided"]}),be.reason&&c.jsx("p",{className:"text-xs text-gray-700 mt-1 whitespace-pre-line",children:be.reason}),c.jsx("p",{className:"text-[11px] text-gray-400 mt-1",children:new Date(be.createdAt).toLocaleString()})]}),c.jsxs("button",{onClick:()=>Ke(be.id),className:"self-start md:self-auto px-3 py-1.5 text-xs font-semibold rounded-lg border border-green-200 text-green-700 hover:bg-green-50 flex items-center gap-1",children:[c.jsx(Ya,{size:12})," Mark reviewed"]})]},be.id))})]}),c.jsxs("section",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Manage Beta Users"}),c.jsx("span",{className:"text-xs text-gray-500",children:"Users load directly from Firestore."})]}),c.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:yt.map(be=>c.jsxs("button",{type:"button",onClick:()=>q(be.id),className:`px-3 py-1 text-xs font-semibold rounded-full border ${j===be.id?"bg-indigo-600 text-white border-indigo-600":"text-gray-600 border-gray-200 hover:border-gray-300"}`,children:[be.label," ",c.jsx("span",{className:"font-mono text-[11px]",children:be.count})]},be.id))}),c.jsx("p",{className:"text-[11px] text-gray-500 mb-4",children:Ht.description}),c.jsxs("form",{onSubmit:te,className:"flex flex-col md:flex-row gap-3 items-start md:items-end mb-4 bg-gray-50 border border-gray-200 rounded-xl p-3",children:[c.jsxs("div",{className:"w-full",children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Email"}),c.jsx("input",{type:"email",value:p,onChange:be=>d(be.target.value),className:"w-full mt-1 rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-500 bg-white",placeholder:"beta-user@example.com",required:!0})]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs font-semibold text-gray-600",children:[c.jsx("input",{type:"checkbox",checked:v,onChange:be=>y(be.target.checked),className:"rounded border-gray-300"}),"Make admin too"]}),c.jsxs("button",{type:"submit",className:"inline-flex items-center gap-1 rounded-lg bg-indigo-600 text-white text-sm px-4 py-2 hover:bg-indigo-500",disabled:G,children:[c.jsx(T_,{size:14})," Add beta user"]})]}),c.jsx("div",{className:"border border-gray-200 rounded-xl divide-y divide-gray-100",children:G?c.jsxs("div",{className:"p-4 text-sm text-gray-500 flex items-center gap-2",children:[c.jsx(h0,{size:16,className:"animate-spin"})," Loading users"]}):r.length===0?c.jsxs("div",{className:"p-4 text-sm text-gray-500 flex items-center gap-2",children:[c.jsx(xo,{size:16})," No beta users yet."]}):Ie.length===0?c.jsxs("div",{className:"p-4 text-sm text-gray-500 flex items-center gap-2",children:[c.jsx(xo,{size:16})," No ",Ht.label.toLowerCase()," users found."]}):Ie.map(be=>{const tt=B(be.email),ct=!be.isAdmin&&tt.count>=tt.limit,St=!be.isAdmin&&!ct&&tt.count>=Math.max(0,tt.limit-2),Rt=be.isAdmin?"text-gray-500":ct?"text-red-600 font-semibold":St?"text-orange-600":"text-gray-500",jt=`expiry:${be.email}`,Dt=`downloads:${be.email}`,Wr=typeof be.loginCount=="number"?be.loginCount:se[be.email]||0;return c.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center justify-between gap-3",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center",children:c.jsx(aV,{size:16})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-900 break-all",children:be.email}),be.isAdmin&&c.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-indigo-600 font-semibold",children:[c.jsx(D3,{size:12})," Admin"]}),c.jsxs("div",{className:"text-xs text-gray-600 font-mono mt-1",children:["Code: ",c.jsx("span",{className:"text-gray-900",children:be.code||""})]}),c.jsxs("div",{className:"text-xs text-gray-500",children:["Expires: ",be.expiresAt?new Date(be.expiresAt).toLocaleString():"No expiry"]}),c.jsxs("div",{className:`text-xs mt-1 ${Rt}`,children:["Downloads:"," ",be.isAdmin?"Unlimited":`${tt.count} / ${tt.limit}`]}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Logins: ",Wr]}),c.jsxs("div",{className:"mt-3 space-y-2",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("span",{className:"text-[11px] font-semibold text-gray-600 uppercase",children:"Extend expiry"}),c.jsx("input",{type:"number",min:"1",value:z(be.email,"hours"),onChange:hr=>Z(be.email,"hours",hr.target.value),placeholder:Pf.hours,className:"w-20 rounded border border-gray-300 px-2 py-1 text-xs text-gray-900 font-semibold"}),c.jsx("button",{type:"button",onClick:()=>fe(be),disabled:R[jt],className:"px-3 py-1 text-xs font-semibold rounded-lg border border-blue-200 text-blue-600 hover:bg-blue-50 disabled:opacity-60",children:R[jt]?"Extending...":"+ Hours"})]}),!be.isAdmin&&c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("span",{className:"text-[11px] font-semibold text-gray-600 uppercase",children:"Extend downloads"}),c.jsx("input",{type:"number",min:"1",value:z(be.email,"downloads"),onChange:hr=>Z(be.email,"downloads",hr.target.value),placeholder:Pf.downloads,className:"w-20 rounded border border-gray-300 px-2 py-1 text-xs text-gray-900 font-semibold"}),c.jsx("button",{type:"button",onClick:()=>qe(be),disabled:R[Dt],className:"px-3 py-1 text-xs font-semibold rounded-lg border border-green-200 text-green-700 hover:bg-green-50 disabled:opacity-60",children:R[Dt]?"Updating...":"+ Downloads"}),ct&&c.jsx("span",{className:"text-[11px] font-semibold text-red-600",children:"Limit reached"})]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsxs("button",{onClick:()=>X(be),className:"px-3 py-1.5 text-xs font-semibold rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-100 flex items-center gap-1",children:[c.jsx(dw,{size:12})," Regenerate code"]}),c.jsxs("button",{onClick:()=>ke(be),className:`px-3 py-1.5 text-xs font-semibold rounded-lg border flex items-center gap-1 ${be.isAdmin?"text-gray-600 border-gray-200 hover:bg-gray-100":"text-indigo-600 border-indigo-200 hover:bg-indigo-50"}`,children:[c.jsx(D3,{size:12})," ",be.isAdmin?"Remove admin":"Promote to admin"]}),c.jsxs("button",{onClick:()=>me(be),className:"px-3 py-1.5 text-xs font-semibold rounded-lg border border-red-200 text-red-600 hover:bg-red-50 flex items-center gap-1",children:[c.jsx(hd,{size:12})," Remove"]})]})]},be.email)})})]}),c.jsxs("section",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Recent Logins"}),c.jsxs("span",{className:"text-xs text-gray-500",children:["Last ",i.recentLogins.length," sessions"]})]}),c.jsx("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-gray-50 text-left text-xs uppercase text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2",children:"Email"}),c.jsx("th",{className:"px-3 py-2",children:"Role"}),c.jsx("th",{className:"px-3 py-2",children:"Time"})]})}),c.jsx("tbody",{children:i.recentLogins.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"3",className:"px-3 py-4 text-center text-xs text-gray-500",children:"No logins tracked yet."})}):i.recentLogins.map((be,tt)=>c.jsxs("tr",{className:"border-t border-gray-100",children:[c.jsx("td",{className:"px-3 py-2 font-medium text-gray-800 break-all",children:be.email}),c.jsx("td",{className:"px-3 py-2",children:c.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-semibold ${be.isAdmin?"text-indigo-600":"text-gray-600"}`,children:[c.jsx(E1,{size:12}),be.isAdmin?"Admin":"Beta"]})}),c.jsx("td",{className:"px-3 py-2 text-xs text-gray-500",children:AV(be.timestamp)})]},`${be.email}-${be.timestamp}-${tt}`))})]})})]})]}),S==="feedback"&&c.jsxs("section",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Beta Feedback"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Submissions from the feedback modal."})]}),c.jsxs("button",{onClick:Xe,className:"px-3 py-1.5 text-xs rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-100 flex items-center gap-1",children:[c.jsx(h0,{size:12})," Refresh"]})]}),c.jsx("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:a.length===0?c.jsxs("div",{className:"p-4 text-sm text-gray-500 flex items-center gap-2",children:[c.jsx(xo,{size:16})," No feedback submitted yet."]}):c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-gray-50 text-left text-xs uppercase text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2",children:"Date"}),c.jsx("th",{className:"px-3 py-2",children:"Email"}),c.jsx("th",{className:"px-3 py-2",children:"Context"}),c.jsx("th",{className:"px-3 py-2",children:"Message"}),c.jsx("th",{className:"px-3 py-2",children:"Image"}),c.jsx("th",{className:"px-3 py-2",children:"Details"})]})}),c.jsx("tbody",{children:a.map(be=>c.jsxs("tr",{className:"border-t border-gray-100",children:[c.jsx("td",{className:"px-3 py-2 text-xs text-gray-500",children:new Date(be.createdAt).toLocaleString()}),c.jsx("td",{className:"px-3 py-2 break-all",children:be.email}),c.jsx("td",{className:"px-3 py-2",children:be.context}),c.jsx("td",{className:"px-3 py-2",children:c.jsx("div",{className:"text-xs text-gray-700 max-w-[220px] truncate",children:be.message||""})}),c.jsx("td",{className:"px-3 py-2 text-xs text-gray-500",children:be.imageDataUrl?"Attached":""}),c.jsx("td",{className:"px-3 py-2",children:c.jsx("button",{onClick:()=>f(be),className:"text-xs text-indigo-600 underline",children:"View"})})]},be.id))})]})})]}),c.jsx("p",{className:"mt-4 text-[11px] text-gray-500",children:"Beta user data lives in Firestore. Use the Firebase console to perform full resets or to audit history."})]}),h&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-2xl max-h-[90vh] overflow-auto space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Feedback Details"}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Submitted ",new Date(h.createdAt).toLocaleString()]})]}),c.jsx("button",{onClick:()=>f(null),className:"text-xs uppercase tracking-wide text-gray-500 hover:text-gray-800",children:"Close"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Email"}),c.jsx("div",{className:"text-gray-900",children:h.email})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Context"}),c.jsx("div",{className:"text-gray-900",children:h.context})]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs uppercase text-gray-500 font-semibold mb-1",children:"Message"}),c.jsx("div",{className:"text-sm text-gray-800 whitespace-pre-wrap bg-gray-50 border border-gray-200 rounded-lg p-3",children:h.message||""})]}),h.imageDataUrl&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs uppercase text-gray-500 font-semibold mb-1",children:"Screenshot"}),c.jsx("img",{src:h.imageDataUrl,alt:"Feedback attachment",className:"rounded-lg max-h-[60vh] object-contain border border-gray-200"})]})]})})]})},ty=["Landing","Step 1  Project Setup","Step 2  Door Schedule","Step 3  Hardware Sets","Step 4  Validation & Exports","Other"],EV=({isOpen:t,onClose:e})=>{const{user:r}=Cp(),[n,i]=we.useState(ty[0]),[s,a]=we.useState(""),[o,l]=we.useState(null),[u,h]=we.useState(!1),[f,p]=we.useState(""),[d,v]=we.useState("");if(we.useEffect(()=>{t||(i(ty[0]),a(""),l(null),h(!1),p(""),v(""))},[t]),!t||!r)return null;const y=w=>{var j;const S=(j=w.target.files)==null?void 0:j[0];if(!S){l(null);return}const C=new FileReader;C.onloadend=()=>{l(C.result)},C.readAsDataURL(S)},_=w=>{if(w.preventDefault(),!s.trim()){p("Please enter your feedback.");return}h(!0),DU({email:r.email,context:n,message:s.trim(),imageDataUrl:o}),h(!1),v("Thank you! Your feedback just made InstaSpec smarter. Were on it!")};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6",children:c.jsxs("div",{className:"w-full max-w-lg rounded-xl sm:rounded-2xl bg-white p-4 sm:p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Share Feedback"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-sm uppercase tracking-wide",children:"Close"})]}),d?c.jsxs("div",{className:"space-y-4 py-8 text-center",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-green-100 text-green-600 mx-auto",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:d}),c.jsx("p",{className:"text-sm text-gray-500",children:"Got another idea? Keep them coming anytime."}),c.jsx("button",{onClick:e,className:"mt-4 px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700",children:"Close"})]}):c.jsxs("form",{className:"space-y-4",onSubmit:_,children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email"}),c.jsx("input",{type:"email",value:r.email,readOnly:!0,className:"w-full rounded-lg border border-gray-200 bg-gray-100 px-3 py-2 text-sm text-gray-700"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Context"}),c.jsx("select",{className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm",value:n,onChange:w=>i(w.target.value),children:ty.map(w=>c.jsx("option",{value:w,children:w},w))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Feedback"}),c.jsx("textarea",{className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm h-28",placeholder:"Tell us what's working, what isn't, or what you'd love to see.",value:s,onChange:w=>{a(w.target.value),p("")},required:!0}),f&&c.jsx("p",{className:"text-xs text-red-600 mt-1",children:f})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Screenshot (optional)"}),c.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"text-sm"}),o&&c.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Image attached."," ",c.jsx("button",{type:"button",onClick:()=>l(null),className:"text-indigo-600 underline",children:"Remove"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:u,className:`px-4 py-2 text-sm rounded-lg bg-indigo-600 text-white hover:bg-indigo-500 ${u?"opacity-60 cursor-not-allowed":""}`,children:u?"Sending...":"Submit Feedback"})]})]})]})})},NV="feedback";async function TV({email:t,context:e,message:r,imageDataUrl:n=null}){const i=ui(t);if(!i)throw new Error("Feedback must include an email.");if(!r||!r.trim())throw new Error("Feedback must include a message.");await Fr();const s={email:i,context:e||"Other",message:r.trim(),imageDataUrl:n||null,createdAt:Date.now(),createdAtServer:xi()};return{id:(await Vo(yi(tr,NV),s)).id,...s}}const ry=["Step 1 - Project Setup","Step 2 - Door Schedule","Step 3 - Hardware Sets","Step 4 - Validation & Exports","Dashboard / Landing","Other"],kV=({isOpen:t,onClose:e})=>{const{user:r}=Cp(),[n,i]=we.useState(ry[0]),[s,a]=we.useState(""),[o,l]=we.useState(null),[u,h]=we.useState(!1),[f,p]=we.useState(""),[d,v]=we.useState("");if(we.useEffect(()=>{t||(i(ry[0]),a(""),l(null),h(!1),p(""),v(""))},[t]),!t||!r)return null;const y=w=>{var j;const S=(j=w.target.files)==null?void 0:j[0];if(!S){l(null);return}const C=new FileReader;C.onload=()=>{l(C.result)},C.onerror=()=>{p("Unable to read the selected file. Please try a different image.")},C.readAsDataURL(S)},_=async w=>{if(w.preventDefault(),p(""),v(""),!s.trim()){p("Please share a quick description of the issue or suggestion.");return}h(!0);try{await TV({email:r.email,context:n,message:s.trim(),imageDataUrl:o}),v(`Thanks for the feedback!
You're feedback helps InstaSpec to serve better.`)}catch(S){console.error("Feedback submission failed",S),p("Could not send feedback right now. Please try again in a moment.")}finally{h(!1)}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6",children:c.jsxs("div",{className:"w-full max-w-lg rounded-xl sm:rounded-2xl bg-white p-4 sm:p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Report an Error"}),c.jsx("button",{onClick:e,className:"text-sm uppercase tracking-wide text-gray-500 hover:text-gray-800",children:"Close"})]}),d?c.jsxs("div",{className:"space-y-4 py-10 text-center",children:[c.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-green-100 text-green-600",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("p",{className:"text-lg font-semibold text-gray-900 whitespace-pre-line",children:d}),c.jsx("p",{className:"text-sm text-gray-500",children:"Need to flag another issue? You can share more feedback anytime."}),c.jsx("button",{onClick:e,className:"mt-2 px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-500",children:"Close"})]}):c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Email"}),c.jsx("input",{type:"email",value:r.email,readOnly:!0,className:"mt-1 w-full rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-700"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Where did this occur?"}),c.jsx("select",{value:n,onChange:w=>i(w.target.value),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm",children:ry.map(w=>c.jsx("option",{value:w,children:w},w))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Feedback"}),c.jsx("textarea",{value:s,onChange:w=>a(w.target.value),placeholder:"Tell us what happened or what you would improve.",className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm h-28",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Screenshot (optional)"}),c.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"text-sm"}),o&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Image attached. You can replace it by choosing another file."})]}),f&&c.jsx("p",{className:"text-xs text-red-600",children:f}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:u,className:`px-4 py-2 text-sm rounded-lg bg-indigo-600 text-white hover:bg-indigo-500 ${u?"opacity-60 cursor-not-allowed":""}`,children:u?"Sending...":"Submit"})]})]})]})})};async function U3(t){if(!ui(t))return[];const r=await Fr(),n=Kh(yi(tr,"projects"),u9("owner","==",r.uid));return(await Y0(n)).docs.map(s=>({id:s.id,...s.data()}))}async function Lf(t,e){const r=ui(t);if(!r)throw new Error("Missing owner email");const n=await Fr(),i=Date.now(),s={...e,owner:n.uid,userEmail:r,updatedAt:i};if(e.id){const o=Ur(tr,"projects",e.id);return await Jd(o,{...s,createdAt:e.createdAt||i},{merge:!0}),{...e,updatedAt:i}}const a=await Vo(yi(tr,"projects"),{...s,createdAt:i});return{...e,id:a.id,createdAt:i,updatedAt:i}}async function V3(t){if(!t)return;await Fr();const e=Ur(tr,"projects",t);await pc(e)}const ru={ANSI_BHMA:{id:"ANSI_BHMA",name:"ANSI/BHMA A156.28",version:"2023",region:"North America",pinConfig:{pins:6,depths:7,macs:4},maxDiffers:117649,hierarchyLevels:[{id:"GGM",name:"Great Grand Master",symbol:"A",order:0},{id:"GMK",name:"Grand Master",symbol:"AA",order:1},{id:"MK",name:"Master Key",symbol:"AAA",order:2},{id:"SMK",name:"Sub-Master",symbol:"AAAA",order:3},{id:"CK",name:"Change Key",symbol:"AAAAA",order:4}],securityGrades:["Grade 1","Grade 2","Grade 3"],recommendations:{"Commercial Office":{depth:3,levels:["GMK","MK","CK"]},"Hospital / Healthcare":{depth:4,levels:["GMK","MK","SMK","CK"]},"Education / School":{depth:3,levels:["GMK","MK","CK"]},"Airport / Transport":{depth:4,levels:["GMK","MK","SMK","CK"]},"Hospitality / Hotel":{depth:4,levels:["GMK","MK","SMK","CK"]},Residential:{depth:2,levels:["MK","CK"]}}},EN:{id:"EN",name:"EN 1303",version:"2015",region:"Europe",pinConfig:{pins:5,depths:6,macs:3},maxDiffers:7776,hierarchyLevels:[{id:"GM",name:"General Master",symbol:"GM",order:0},{id:"MK",name:"Master Key",symbol:"M",order:1},{id:"SK",name:"Sub-Key",symbol:"S",order:2},{id:"UK",name:"User Key",symbol:"U",order:3}],securityGrades:["Class 1","Class 2","Class 3","Class 4","Class 5","Class 6"],recommendations:{"Commercial Office":{depth:2,levels:["MK","UK"]},"Hospital / Healthcare":{depth:3,levels:["GM","MK","UK"]},"Education / School":{depth:2,levels:["MK","UK"]},"Airport / Transport":{depth:3,levels:["GM","MK","UK"]},"Hospitality / Hotel":{depth:3,levels:["GM","MK","UK"]},Residential:{depth:2,levels:["MK","UK"]}}}},z3=t=>ru[t]||ru.ANSI_BHMA,CV=(t,e)=>{const r=ru[t]||ru.ANSI_BHMA,n=r.recommendations[e];return n?n.levels.map(i=>r.hierarchyLevels.find(s=>s.id===i)):r.recommendations["Commercial Office"].levels.map(i=>r.hierarchyLevels.find(s=>s.id===i))},IV=(t,e)=>{const r=[],n=[];return e===0?t!=="GMK"&&r.push({type:"invalid_gmk_symbol",message:'EN 1303 requires General Master Key to use symbol "GMK"',expected:"GMK",actual:t}):e===1?/^MK-\d+$/.test(t)||r.push({type:"invalid_mk_format",message:'EN 1303 Master Key must follow format "MK-X" (e.g., MK-1, MK-2)',expected:"MK-[number]",actual:t}):e===2?/^SK-\d+$/.test(t)||r.push({type:"invalid_sk_format",message:'EN 1303 Sub-Key must follow format "SK-X" (e.g., SK-1, SK-2)',expected:"SK-[number]",actual:t}):/^CK-\d{3,}$/.test(t)||r.push({type:"invalid_ck_format",message:'EN 1303 Change Key must follow format "CK-XXX" (e.g., CK-101, CK-201)',expected:"CK-[3+ digits]",actual:t}),{errors:r,warnings:n,isValid:r.length===0}},PV=(t,e)=>{const r=[],n=[],i=["I","O","Q","X"];for(const s of i)t.includes(s)&&r.push({type:"restricted_letter",message:`ANSI/BHMA prohibits using letters ${i.join(", ")} in key symbols`,letter:s,symbol:t});if(e===0)(t.length!==1||!/^[A-Z]$/.test(t))&&r.push({type:"invalid_top_level_format",message:"ANSI/BHMA top-level master must be single letter (e.g., A)",expected:"Single letter A-Z",actual:t});else if(e===1){if((t.length!==2||!/^[A-Z]{2}$/.test(t))&&r.push({type:"invalid_level1_format",message:"ANSI/BHMA Level 1 master must be two letters (e.g., AA, AB)",expected:"Two letters",actual:t}),t.length===2){const s=t[0],a=t[1],o=s.charCodeAt(0),l=a.charCodeAt(0);Math.abs(l-o)>10&&n.push({type:"unusual_pairing",message:`Unusual letter pairing "${t}". Standard practice uses consecutive letters (AA, AB, AC)`,symbol:t})}}else e===2?(t.length!==3||!/^[A-Z]{3}$/.test(t))&&r.push({type:"invalid_level2_format",message:"ANSI/BHMA Level 2 keys must be three letters (e.g., AAA, AAB)",expected:"Three letters",actual:t}):/^[A-Z]{2,3}\d+$/.test(t)||r.push({type:"invalid_change_key_format",message:"ANSI/BHMA Change Key must be letters followed by numbers (e.g., AA1, AAA1)",expected:"[Letters][Numbers]",actual:t});return{errors:r,warnings:n,isValid:r.length===0}},LV=(t,e)=>{const r=[],n=[];if(e==="EN"){const i=t.filter(o=>o.keySymbol.startsWith("MK-")).sort((o,l)=>{const u=parseInt(o.keySymbol.split("-")[1]),h=parseInt(l.keySymbol.split("-")[1]);return u-h});for(let o=0;o<i.length;o++){const l=o+1;parseInt(i[o].keySymbol.split("-")[1])!==l&&n.push({type:"sequence_gap",message:`EN 1303 recommends sequential numbering. Expected MK-${l}, found ${i[o].keySymbol}`,expected:`MK-${l}`,actual:i[o].keySymbol})}const s=t.filter(o=>o.keySymbol.startsWith("CK-")),a={};s.forEach(o=>{const l=o.keySymbol.substring(3,4);a[l]||(a[l]=[]),a[l].push(o)}),Object.entries(a).forEach(([o,l])=>{const u=l.sort((f,p)=>{const d=parseInt(f.keySymbol.split("-")[1]),v=parseInt(p.keySymbol.split("-")[1]);return d-v}),h=parseInt(o)*100+1;for(let f=0;f<u.length;f++){const p=h+f;parseInt(u[f].keySymbol.split("-")[1])!==p&&n.push({type:"change_key_gap",message:`Change key numbering gap detected. Expected CK-${String(p).padStart(3,"0")}, found ${u[f].keySymbol}`,master:`MK-${o}`})}})}else if(e==="ANSI_BHMA"){const s=t.filter(a=>a.hierarchyLevel===1&&/^[A-Z]{2}$/.test(a.keySymbol)).sort((a,o)=>a.keySymbol.localeCompare(o.keySymbol));for(let a=1;a<s.length;a++){const o=s[a-1].keySymbol[1],l=s[a].keySymbol[1],u=String.fromCharCode(o.charCodeAt(0)+1);l!==u&&n.push({type:"letter_sequence_gap",message:`ANSI/BHMA recommends consecutive letters. After ${s[a-1].keySymbol}, expected ${s[a-1].keySymbol[0]}${u}, found ${s[a].keySymbol}`,expected:`${s[a-1].keySymbol[0]}${u}`,actual:s[a].keySymbol})}}return{errors:r,warnings:n,isValid:r.length===0}},RV=(t,e,r)=>{const n=[],i=[];e==="EN"?(t>4&&i.push({type:"excessive_depth",message:"EN 1303 typically uses 2-4 hierarchy levels. More than 4 levels may complicate system management",current:t,recommended:"2-4 levels"}),t<2&&n.push({type:"insufficient_depth",message:"EN 1303 requires at least 2 hierarchy levels (Master and User keys)",current:t,minimum:2})):e==="ANSI_BHMA"&&(t>5&&n.push({type:"exceeds_maximum_depth",message:"ANSI/BHMA practical limit is 5 hierarchy levels",current:t,maximum:5}),t<2&&n.push({type:"insufficient_depth",message:"ANSI/BHMA requires at least 2 hierarchy levels",current:t,minimum:2}));const a={"Commercial Office":{min:2,max:3,optimal:3},"Hospital / Healthcare":{min:3,max:4,optimal:4},"Education / School":{min:2,max:3,optimal:3},"Airport / Transport":{min:3,max:4,optimal:4},"Hospitality / Hotel":{min:3,max:4,optimal:4},Residential:{min:2,max:2,optimal:2}}[r];return a&&(t<a.min&&i.push({type:"below_facility_minimum",message:`${r} facilities typically require at least ${a.min} levels`,facility:r,current:t,recommended:a.optimal}),t>a.max&&i.push({type:"above_facility_maximum",message:`${r} facilities rarely need more than ${a.max} levels`,facility:r,current:t,recommended:a.optimal})),{errors:n,warnings:i,isValid:n.length===0}},jV=(t,e)=>{const r=[],n=[];return e!=="ANSI_BHMA"?{errors:r,warnings:n,isValid:!0}:(t.forEach(i=>{if(i.parentHierarchyId){const s=t.find(a=>a.hierarchyId===i.parentHierarchyId);s&&(i.keySymbol.startsWith(s.keySymbol)||r.push({type:"invalid_parent_child_pairing",message:"ANSI/BHMA requires child keys to start with parent symbol",parent:s.keySymbol,child:i.keySymbol,expected:`${s.keySymbol}[letter/number]`}))}}),{errors:r,warnings:n,isValid:r.length===0})},FV=(t,e,r,n)=>{const i=[],s=[],a=[...t.map(u=>({keySymbol:u.keySymbol,hierarchyLevel:u.order,levelType:u.levelType})),...e.map(u=>({keySymbol:u.keySymbol,hierarchyLevel:3,levelType:"CK"}))];a.forEach(u=>{let h;r==="EN"?h=IV(u.keySymbol,u.hierarchyLevel):h=PV(u.keySymbol,u.hierarchyLevel),i.push(...h.errors),s.push(...h.warnings)});const o=LV(a,r);i.push(...o.errors),s.push(...o.warnings);const l=RV(t.length,r,n);if(i.push(...l.errors),s.push(...l.warnings),r==="ANSI_BHMA"){const u=jV(t,r);i.push(...u.errors),s.push(...u.warnings)}return{errors:i,warnings:s,isValid:i.length===0}},oI=we.createContext(null),tl=()=>{const t=we.useContext(oI);if(!t)throw new Error("useMasterKey must be used within MasterKeyProvider");return t},ny=({children:t,projectId:e,projectDoors:r=[]})=>{const[n,i]=we.useState(null),[s,a]=we.useState([]),[o,l]=we.useState([]),[u,h]=we.useState([]),[f,p]=we.useState([]),[d,v]=we.useState([]),[y,_]=we.useState([]),[w,S]=we.useState(!1),[C,j]=we.useState(null),[q,G]=we.useState(!1),[E,k]=we.useState("zone_based"),[A,D]=we.useState("ANSI_BHMA"),N=we.useCallback(ke=>ke?xh(Ur(tr,"mk_projects",ke),me=>{if(me.exists()){const fe={id:me.id,...me.data()};i(fe),console.log(" MK Project updated:",{differsUsed:fe.differsUsed,totalPhysicalKeys:fe.totalPhysicalKeys,totalCylinders:fe.totalCylinders})}else console.log(" MK Project document does not exist:",ke),i(null)},me=>{console.error("Error listening to MK project:",me),j(me.message)}):void 0,[]);we.useEffect(()=>{if(!e)return;S(!0);let ke=null;const X=xh(Ur(tr,"projects",e),me=>{if(me.exists()){const fe=me.data();G(!!fe.mkSystemEnabled),k(fe.mkApproach||"zone_based"),D(fe.mkStandard||"ANSI_BHMA"),fe.mkSystemEnabled&&fe.mkProjectId?(ke&&ke(),ke=N(fe.mkProjectId)):(ke&&(ke(),ke=null),i(null))}S(!1)},me=>{console.error("Error listening to project:",me),j(me.message),S(!1)});return()=>{X(),ke&&ke()}},[e,N]);const R=we.useCallback(async ke=>{try{if(S(!0),j(null),await Fr(),console.log("toggleMKSystem called with:",ke),ke){const X=Ur(yi(tr,"mk_projects")),me=z3(A),fe=me.pinConfig,qe=me.maxDiffers;await Jd(X,{projectId:e,keyingApproach:E||"zone_based",standard:A,standardVersion:me.version,hierarchyLevels:4,maxDiffersAvailable:qe,differsUsed:0,manufacturer:"Schlage",keyway:"C Keyway",pinConfiguration:fe,securityLevel:"standard",constructionKeyingEnabled:!1,constructionMasterKey:null,statistics:{totalDoors:0,keyedDoors:0,unkeyedDoors:0,totalKeys:0,zonesDefined:0},mkSystemStatus:"in_progress",createdAt:xi(),updatedAt:xi(),completedAt:null}),await Ha(Ur(tr,"projects",e),{mkSystemEnabled:!0,mkSystemStatus:"not_started",mkApproach:E,mkStandard:A,mkProjectId:X.id}),console.log(`MK project created: ${X.id}`)}else{const me=(await Ap(Ur(tr,"projects",e))).data();me!=null&&me.mkProjectId?(await Ha(Ur(tr,"projects",e),{mkSystemEnabled:!1,mkSystemStatus:null,mkApproach:null,mkProjectId:null}),console.log(`MK project disabled for project ${e}`)):await Ha(Ur(tr,"projects",e),{mkSystemEnabled:!1,mkSystemStatus:null,mkApproach:null})}G(ke),console.log("MK system toggled successfully")}catch(X){throw console.error("Error toggling MK system:",X),j(X.message),X}finally{S(!1)}},[e,E,A]),L=we.useCallback(async ke=>{try{j(null),await Fr(),console.log("updateMKApproach called with:",ke),await Ha(Ur(tr,"projects",e),{mkApproach:ke}),n!=null&&n.id&&await Ha(Ur(tr,"mk_projects",n.id),{keyingApproach:ke,updatedAt:xi()}),k(ke),console.log("MK approach updated successfully")}catch(X){throw console.error("Error updating MK approach:",X),j(X.message),X}},[e,n]),se=we.useCallback(async ke=>{try{if(j(null),await Fr(),console.log("updateStandard called with:",ke),await Ha(Ur(tr,"projects",e),{mkStandard:ke}),n!=null&&n.id){const X=z3(ke);await Ha(Ur(tr,"mk_projects",n.id),{standard:ke,standardVersion:X.version,pinConfiguration:X.pinConfig,maxDiffersAvailable:X.maxDiffers,updatedAt:xi()})}D(ke),console.log("Standard updated successfully")}catch(X){throw console.error("Error updating standard:",X),j(X.message),X}},[e,n]),ge=we.useCallback(async ke=>{try{if(j(null),await Fr(),!(n!=null&&n.id))throw new Error("No MK project found");console.log("updateMKProject called with:",ke),await Ha(Ur(tr,"mk_projects",n.id),{...ke,updatedAt:xi()}),console.log("MK Project updated successfully")}catch(X){throw console.error("Error updating MK project:",X),j(X.message),X}},[n]);we.useEffect(()=>{if(!(n!=null&&n.id))return;const ke=Kh(yi(tr,"mk_projects",n.id,"hierarchies")),X=xh(ke,me=>{const fe=me.docs.map(Ke=>({hierarchyId:Ke.id,...Ke.data()}));a(fe);const qe=ve(fe);l(qe)});return()=>X()},[n==null?void 0:n.id]),we.useEffect(()=>{if(!(n!=null&&n.id))return;const ke=Kh(yi(tr,"mk_projects",n.id,"zones")),X=xh(ke,me=>{const fe=me.docs.map(qe=>({zoneId:qe.id,...qe.data()}));h(fe),console.log(" Zones updated:",fe.length,"zones")});return()=>X()},[n==null?void 0:n.id]),we.useEffect(()=>{if(!(n!=null&&n.id))return;const ke=Kh(yi(tr,"mk_projects",n.id,"assignments")),X=xh(ke,me=>{const fe=me.docs.map(qe=>({assignmentId:qe.id,...qe.data()}));p(fe),console.log(" Assignments updated:",fe.length,"assignments")});return()=>X()},[n==null?void 0:n.id]),we.useEffect(()=>{if(!(n!=null&&n.id)){v([]);return}const ke=Kh(yi(tr,"mk_projects",n.id,"ka_groups")),X=xh(ke,me=>{const fe=me.docs.map(qe=>({id:qe.id,...qe.data()}));v(fe),console.log(" KA Groups updated:",fe.length,"groups")});return()=>X()},[n==null?void 0:n.id]);const ve=ke=>{const X=new Map,me=[];return ke.forEach(fe=>{X.set(fe.hierarchyId,{...fe,children:[]})}),ke.forEach(fe=>{const qe=X.get(fe.hierarchyId);if(fe.parentHierarchyId){const Ke=X.get(fe.parentHierarchyId);Ke&&Ke.children.push(qe)}else me.push(qe)}),me},ye=we.useCallback(async ke=>{if(n!=null&&n.id){await Fr();try{const X=yi(tr,"mk_projects",n.id,"hierarchies");await Vo(X,{...ke,createdAt:xi(),updatedAt:xi()}),console.log("Hierarchy level added successfully")}catch(X){throw console.error("Failed to add hierarchy level:",X),X}}},[n]),he=we.useCallback(async(ke,X)=>{if(n!=null&&n.id){await Fr();try{const me=Ur(tr,"mk_projects",n.id,"hierarchies",ke);await Ha(me,{...X,updatedAt:xi()}),console.log("Hierarchy level updated successfully")}catch(me){throw console.error("Failed to update hierarchy level:",me),me}}},[n]),_e=we.useCallback(async ke=>{if(n!=null&&n.id){await Fr();try{const X=s.some(qe=>qe.parentHierarchyId===ke),me=f.some(qe=>qe.hierarchyId===ke);if(X||me)throw new Error("Cannot delete level with children or door assignments");const fe=Ur(tr,"mk_projects",n.id,"hierarchies",ke);await pc(fe),console.log("Hierarchy level deleted successfully")}catch(X){throw console.error("Failed to delete hierarchy level:",X),X}}},[n,s,f]),Ue=we.useCallback(async ke=>{if(n!=null&&n.id){await Fr();try{const X=CV(A,ke),me=await Y0(yi(tr,"mk_projects",n.id,"hierarchies")),fe=Kx(tr);me.docs.forEach(Ke=>{fe.delete(Ke.ref)}),await fe.commit();let qe=null;for(let Ke=0;Ke<X.length;Ke++){const st=X[Ke],yt=yi(tr,"mk_projects",n.id,"hierarchies");qe=(await Vo(yt,{levelName:st.name,levelType:st.id,keySymbol:st.symbol,order:Ke,parentHierarchyId:qe,description:`${st.name} for ${ke}`,createdAt:xi(),updatedAt:xi()})).id}console.log("Hierarchy template applied successfully")}catch(X){throw console.error("Failed to apply hierarchy template:",X),X}}},[n,A]),Ie=we.useCallback(async ke=>{if(n!=null&&n.id){await Fr();try{const X=yi(tr,"mk_projects",n.id,"zones"),me=await Vo(X,{...ke,createdAt:xi(),updatedAt:xi()});return console.log("Zone created successfully"),me.id}catch(X){throw console.error("Failed to create zone:",X),X}}},[n]),P=we.useCallback(async(ke,X)=>{if(n!=null&&n.id){await Fr();try{const me={};X==="zone_based"?ke.forEach(Ke=>{me[Ke.zone]||(me[Ke.zone]={name:Ke.zone,doors:[]}),me[Ke.zone].doors.push(Ke.id)}):X==="floor_based"?ke.forEach(Ke=>{const st=`Floor ${Ke.level}`;me[st]||(me[st]={name:st,doors:[]}),me[st].doors.push(Ke.id)}):X==="functional"&&ke.forEach(Ke=>{me[Ke.use]||(me[Ke.use]={name:Ke.use,doors:[]}),me[Ke.use].doors.push(Ke.id)});const fe=["#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899"];let qe=0;for(const[Ke,st]of Object.entries(me))await Ie({zoneName:st.name,color:fe[qe%fe.length],doorCount:st.doors.length}),qe++;console.log("Zones auto-generated successfully")}catch(me){throw console.error("Failed to auto-generate zones:",me),me}}},[n,Ie]),O=we.useCallback(async ke=>{if(n!=null&&n.id){await Fr();try{const X=Ur(tr,"mk_projects",n.id,"zones",ke);await pc(X),console.log("Zone deleted successfully")}catch(X){throw console.error("Failed to delete zone:",X),X}}},[n]),B=we.useCallback(async()=>{if(n!=null&&n.id){await Fr();try{const ke=new Set;s.forEach(st=>{ke.add(st.keySymbol)}),f.forEach(st=>{ke.add(st.keySymbol)});const X=ke.size;let me=0,fe=0;s.forEach(st=>{me+=st.keyQuantity||2});const qe=new Set;f.forEach(st=>{const yt=r.find(be=>be.id===st.doorId),Ht=(yt==null?void 0:yt.qty)||1;if(st.keyType==="KA"&&st.kaGroupId){if(!qe.has(st.kaGroupId)){const be=d.find(tt=>tt.id===st.kaGroupId);be&&(me+=be.keyQuantity||0,qe.add(st.kaGroupId))}}else st.keyType,me+=st.keyQuantity||2;fe+=Ht});const Ke=Ur(tr,"mk_projects",n.id);await Ha(Ke,{differsUsed:X,totalPhysicalKeys:me,totalCylinders:fe,updatedAt:xi()}),console.log(`Differs updated: ${X} unique keys, ${me} physical keys, ${fe} cylinders`)}catch(ke){console.error("Failed to update differs count:",ke)}}},[n,s,f,d,r]),z=we.useCallback(async(ke,X,me,fe={})=>{if(!(n!=null&&n.id))return;await Fr();const{keyType:qe="KD",keyQuantity:Ke=2,kaGroupId:st=null,kaGroupName:yt=null}=fe;try{const Ht=yi(tr,"mk_projects",n.id,"assignments");await Vo(Ht,{doorId:ke,hierarchyId:X,keySymbol:me,keyType:qe,keyQuantity:Ke,kaGroupId:st,kaGroupName:yt,assignedAt:xi()}),await B(),console.log("Door assigned to key successfully:",qe,me)}catch(Ht){throw console.error("Failed to assign door:",Ht),Ht}},[n,B]),Z=we.useCallback(async(ke,X,me)=>{if(n!=null&&n.id){await Fr();try{const fe=Kx(tr),qe=yi(tr,"mk_projects",n.id,"assignments");ke.forEach(Ke=>{const st=Ur(qe);fe.set(st,{doorId:Ke,hierarchyId:X,keySymbol:me,assignedAt:xi()})}),await fe.commit(),console.log("Bulk door assignment completed successfully")}catch(fe){throw console.error("Failed to bulk assign doors:",fe),fe}}},[n]),de=we.useCallback(async ke=>{if(n!=null&&n.id){await Fr();try{const X=yi(tr,"mk_projects",n.id,"assignments"),fe=(await Y0(X)).docs.find(qe=>qe.data().doorId===ke);fe&&(await pc(Ur(tr,"mk_projects",n.id,"assignments",fe.id)),await B(),console.log("Door unassigned successfully"))}catch(X){throw console.error("Failed to unassign door:",X),X}}},[n,B]),Se=we.useCallback((ke,X)=>A==="ANSI_BHMA"?`${ke}${(X+1)*10}`:`CK-${ke.split("-")[1]||"1"}${(X+1)*100}`,[A]),Ae=we.useCallback(async(ke,X,me,fe,qe=5)=>{if(n!=null&&n.id){if(X.length<2)throw new Error("KA group must have at least 2 doors");await Fr();try{const st=d.filter(tt=>tt.masterKeyId===me).length,yt=Se(fe,st),Ht=yi(tr,"mk_projects",n.id,"ka_groups"),be=await Vo(Ht,{name:ke,changeKeySymbol:yt,masterKeyId:me,masterKeySymbol:fe,doorIds:X,keyQuantity:qe,createdAt:xi(),updatedAt:xi()});for(const tt of X){const ct=f.find(St=>St.doorId===tt);ct&&await pc(Ur(tr,"mk_projects",n.id,"assignments",ct.assignmentId)),await z(tt,me,yt,{keyType:"KA",keyQuantity:0,kaGroupId:be.id,kaGroupName:ke})}return console.log("KA Group created:",ke,yt),be.id}catch(Ke){throw console.error("Failed to create KA group:",Ke),Ke}}},[n,d,f,Se,z,A]),Ne=we.useCallback(async(ke,X)=>{if(n!=null&&n.id){await Fr();try{const me=Ur(tr,"mk_projects",n.id,"ka_groups",ke);if(await Ha(me,{...X,updatedAt:xi()}),X.name){const fe=d.find(qe=>qe.id===ke);if(fe){const qe=Kx(tr);fe.doorIds.forEach(Ke=>{const st=f.find(yt=>yt.doorId===Ke);if(st){const yt=Ur(tr,"mk_projects",n.id,"assignments",st.assignmentId);qe.update(yt,{kaGroupName:X.name})}}),await qe.commit()}}console.log("KA Group updated")}catch(me){throw console.error("Failed to update KA group:",me),me}}},[n,d,f]),Xe=we.useCallback(async ke=>{if(n!=null&&n.id){await Fr();try{const X=d.find(me=>me.id===ke);if(!X)return;await pc(Ur(tr,"mk_projects",n.id,"ka_groups",ke));for(const me of X.doorIds){const fe=f.find(qe=>qe.doorId===me);fe&&await pc(Ur(tr,"mk_projects",n.id,"assignments",fe.assignmentId))}console.log("KA Group deleted")}catch(X){throw console.error("Failed to delete KA group:",X),X}}},[n,d,f]),et=we.useCallback(async(ke,X)=>{if(n!=null&&n.id){if(X<1)throw new Error("Key quantity must be at least 1");await Fr();try{const me=f.find(qe=>qe.doorId===ke);if(!me)throw new Error("Door not assigned");const fe=Ur(tr,"mk_projects",n.id,"assignments",me.assignmentId);await Ha(fe,{keyQuantity:X}),console.log("Key quantity updated:",ke,X)}catch(me){throw console.error("Failed to update key quantity:",me),me}}},[n,f]),ot=we.useCallback(async(ke,X)=>{if(n!=null&&n.id){await Fr();try{const me=[],fe=[],qe=ke.filter(be=>!f.some(tt=>tt.doorId===be.id));qe.length>0&&me.push({type:"unassigned_doors",severity:"error",message:`${qe.length} doors not assigned to any key`,count:qe.length}),n.differsUsed>n.maxDiffersAvailable&&me.push({type:"exceeds_differs",severity:"error",message:"Design exceeds available differs",details:`${n.differsUsed} > ${n.maxDiffersAvailable}`}),s.length===0&&me.push({type:"no_hierarchy",severity:"error",message:"No hierarchy levels defined"});const Ke=FV(s,f,A,X),st=Ke.errors.filter(be=>be.type==="exceeds_maximum_depth"||be.type==="insufficient_depth"||be.type==="invalid_parent_child_pairing");me.push(...st.map(be=>({...be,severity:"error"})));const yt=Ke.warnings.filter(be=>be.type==="excessive_depth"||be.type==="below_facility_minimum"||be.type==="above_facility_maximum");fe.push(...yt.map(be=>({...be,severity:"warning"})));const Ht=yi(tr,"mk_projects",n.id,"validations");return await Vo(Ht,{errors:me,warnings:fe,validatedAt:xi(),isValid:me.length===0}),console.log("Validation completed:",{errors:me.length,warnings:fe.length}),{errors:me,warnings:fe,isValid:me.length===0}}catch(me){throw console.error("Validation failed:",me),me}}},[n,f,s,A]),mt=we.useCallback(async(ke,X,me)=>{if(n!=null&&n.id){await Fr();try{const fe={project:n,hierarchies:s,zones:u,assignments:f,doors:me,standard:ru[A],generatedAt:new Date().toISOString()},qe=yi(tr,"mk_projects",n.id,"exports");return await Vo(qe,{format:ke,options:X,generatedAt:xi()}),console.log("Export generated successfully"),fe}catch(fe){throw console.error("Export generation failed:",fe),fe}}},[n,s,u,f,A]),te={projectId:e,mkSystemEnabled:q,mkApproach:E,standard:A,toggleMKSystem:R,updateMKApproach:L,updateStandard:se,updateMKProject:ge,mkProject:n,hierarchies:s,hierarchyTree:o,zones:u,assignments:f,kaGroups:d,validationIssues:y,loading:w,error:C,addHierarchyLevel:ye,updateHierarchyLevel:he,deleteHierarchyLevel:_e,applyHierarchyTemplate:Ue,createZone:Ie,autoGenerateZones:P,deleteZone:O,assignDoorToKey:z,bulkAssignDoors:Z,unassignDoor:de,createKAGroup:Ae,updateKAGroup:Ne,deleteKAGroup:Xe,updateKeyQuantity:et,generateKASymbol:Se,validateDesign:ot,generateExport:mt,statistics:(n==null?void 0:n.statistics)||{totalDoors:0,keyedDoors:0,unkeyedDoors:0,totalKeys:0,zonesDefined:0},isComplete:(n==null?void 0:n.mkSystemStatus)==="completed",differsRemaining:((n==null?void 0:n.maxDiffersAvailable)||0)-((n==null?void 0:n.differsUsed)||0),differsUsagePercentage:n!=null&&n.maxDiffersAvailable?(n.differsUsed/n.maxDiffersAvailable*100).toFixed(1):0};return c.jsx(oI.Provider,{value:te,children:t})},DV=({facilityType:t})=>{const[e,r]=we.useState(!1),{mkSystemEnabled:n,mkApproach:i,toggleMKSystem:s,updateMKApproach:a,loading:o}=tl(),l={"Commercial Office":"Standard 4-level hierarchy recommended","Hospital / Healthcare":"Departmental isolation with 4-5 levels","Education / School":"Complex 5-level hierarchy with wing separation","Airport / Transport":"Zone-based security with 3-4 levels","Hospitality / Hotel":"Floor-based hierarchy with 4 levels",Residential:"Simple 3-level hierarchy"},u=async()=>{try{await s(!n)}catch(f){console.error("Failed to toggle MK system:",f)}},h=async f=>{try{await a(f)}catch(p){console.error("Failed to update approach:",p)}};return c.jsxs("div",{children:[c.jsxs("div",{className:"mb-6 text-center",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Would you like to design a Master Key System?"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Design a professional master keying system for doors in this project with hierarchy levels, security zones, and key symbols."})]}),c.jsx("div",{className:"flex flex-col gap-1 mb-4",children:c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"Master Key System (Optional)"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Enable to start designing your master keying system."})]}),c.jsxs("div",{className:"flex items-center gap-3 self-start",children:[c.jsx("span",{className:"text-[11px] font-semibold text-gray-500 uppercase tracking-wide whitespace-nowrap",children:n?"Master key ON":"Master key OFF"}),c.jsx("button",{type:"button",role:"switch","aria-checked":n,onClick:u,disabled:o,className:`relative inline-flex h-5 w-10 shrink-0 items-center rounded-full transition-colors ${n?"bg-indigo-600":"bg-gray-300"} ${o?"opacity-50 cursor-not-allowed":""}`,children:c.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition ${n?"translate-x-[22px]":"translate-x-1"}`})})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("div",{className:`col-span-full text-xs font-bold uppercase tracking-wide rounded px-3 py-2 border ${n?"text-indigo-700 bg-indigo-50 border-indigo-100":"text-gray-500 bg-gray-50 border-gray-200"}`,children:n?`FACILITY: ${t.toUpperCase()}`:"MASTER KEY SYSTEM"}),n?c.jsxs("div",{className:"col-span-full space-y-3",children:[t&&c.jsxs("p",{className:"text-xs text-indigo-700 font-medium",children:[" ",l[t]||"Standard 4-level hierarchy recommended"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"Quick Setup Options:"}),c.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[c.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"mkApproach",value:"zone_based",checked:i==="zone_based",onChange:f=>h(f.target.value),className:"mt-0.5 text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{children:"Use building zones (automatic from doors)"})]}),c.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"mkApproach",value:"custom_hierarchy",checked:i==="custom_hierarchy",onChange:f=>h(f.target.value),className:"mt-0.5 text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{children:"Custom hierarchy design (step-by-step wizard)"})]}),c.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"mkApproach",value:"imported",checked:i==="imported",onChange:f=>h(f.target.value),className:"mt-0.5 text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{children:"Import existing keying schedule"})]})]})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-3 mt-3",children:[c.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"What you'll be able to do:"}),c.jsxs("ul",{className:"space-y-1 text-xs text-gray-600",children:[c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-indigo-600 mt-0.5",children:""}),c.jsx("span",{children:"Define access hierarchy and security zones"})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-indigo-600 mt-0.5",children:""}),c.jsx("span",{children:"Generate professional keying schedules"})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-indigo-600 mt-0.5",children:""}),c.jsx("span",{children:"Export key symbols and bitting lists"})]})]})]})]}):c.jsxs("div",{className:"col-span-full text-sm text-gray-500 border border-dashed border-gray-300 rounded-lg px-3 py-4 bg-gray-50",children:["Master Key System is currently turned off. Flip the toggle above if you want to design a professional keying system for your doors with hierarchy levels, security zones, and key symbols.",c.jsxs("button",{onClick:()=>r(!e),className:"text-xs text-indigo-600 hover:text-indigo-700 mt-3 flex items-center gap-1",children:["Learn more about Master Key Systems",c.jsx(u0,{className:`w-3 h-3 transition-transform ${e?"rotate-180":""}`})]}),e&&c.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-600 space-y-2",children:[c.jsx("p",{className:"font-semibold",children:"What is a Master Key System?"}),c.jsx("p",{children:'A master key system allows different keys to open different sets of locks, while "master" keys can open multiple locks in the hierarchy.'}),c.jsx("p",{children:"For example, a floor manager's key opens all rooms on their floor, while a building master key opens all floors."}),c.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[c.jsx("p",{className:"font-semibold mb-2",children:"Common Use Cases:"}),c.jsxs("ul",{className:"space-y-1 text-[11px]",children:[c.jsxs("li",{children:[c.jsx("span",{className:"font-semibold",children:"Commercial Offices:"})," Floor-based access with department suites"]}),c.jsxs("li",{children:[c.jsx("span",{className:"font-semibold",children:"Healthcare:"})," Department isolation with staff hierarchies"]}),c.jsxs("li",{children:[c.jsx("span",{className:"font-semibold",children:"Education:"})," Building and wing-based access control"]}),c.jsxs("li",{children:[c.jsx("span",{className:"font-semibold",children:"Hotels:"})," Guest rooms with floor master keys"]})]})]})]})]})]})]})},MV=({onNext:t,projectName:e="Untitled Project"})=>{var u;const{mkProject:r,mkApproach:n,standard:i,updateMKApproach:s,updateStandard:a}=tl(),o=[{id:"zone_based",title:"Zone-Based Keying",description:"Organize keys by functional zones (Admin, Classrooms, Labs)",icon:cw,recommended:["Education / School","Office Building","Healthcare"],features:["Easy to understand","Simple administration","Best for smaller buildings"]},{id:"floor_based",title:"Floor-Based Keying",description:"Organize keys by building floors (Floor 1, Floor 2, etc.)",icon:Zx,recommended:["Office Building","Apartment / Residential","Hotel / Lodging"],features:["Clear hierarchy","Vertical organization","Best for multi-story buildings"]},{id:"functional",title:"Functional Keying",description:"Organize keys by department or function (HR, IT, Maintenance)",icon:ud,recommended:["Office Building","Healthcare","Industrial / Warehouse"],features:["Role-based access","Flexible management","Best for complex organizations"]}],l=async h=>{await s(h)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:c.jsx(ud,{className:"w-8 h-8 text-indigo-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome to Master Key System Design"}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"This wizard will guide you through creating a complete master key system for your project. You'll define key levels, organize doors, and generate professional keying schedules."})]}),c.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-lg p-6 border border-indigo-100",children:[c.jsx("h3",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider mb-3",children:"Project Summary"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-indigo-600 font-semibold uppercase tracking-wider mb-1",children:"Project Name"}),c.jsx("div",{className:"text-sm font-bold text-indigo-900",children:e})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-indigo-600 font-semibold uppercase tracking-wider mb-1",children:"Keying Approach"}),c.jsx("div",{className:"text-sm font-bold text-indigo-900 capitalize",children:((u=r==null?void 0:r.keyingApproach)==null?void 0:u.replace("_"," "))||"Not Set"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-indigo-600 font-semibold uppercase tracking-wider mb-1",children:"System Capacity"}),c.jsx("div",{className:"text-sm font-bold text-indigo-900",children:"Professional"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-indigo-600 font-semibold uppercase tracking-wider mb-1",children:"Status"}),c.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-600 text-white text-xs font-semibold rounded-full",children:(r==null?void 0:r.mkSystemStatus)||"Not Started"})]})]})]}),c.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-2 flex items-center gap-2",children:[c.jsx(Zx,{className:"w-6 h-6 text-indigo-600"}),"Select Industry Standard"]}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose the standard that applies to your region and requirements. This determines pin configuration, key hierarchy levels, and compliance rules."}),c.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Object.values(ru).map(h=>{const f=i===h.id;return c.jsxs("button",{onClick:()=>a(h.id),className:`p-4 border-2 rounded-lg text-left transition-all ${f?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300"}`,children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsx("div",{className:"font-bold text-gray-900",children:h.name}),f&&c.jsx(Ya,{className:"text-indigo-600 flex-shrink-0",size:20})]}),c.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[h.region,"  Version ",h.version]}),c.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[h.pinConfig.pins,"-pin system, ",h.pinConfig.depths," depths, MACS ",h.pinConfig.macs]}),c.jsx("div",{className:"text-xs font-semibold text-indigo-600",children:"Professional grade master key system"})]},h.id)})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Choose Your Keying Approach"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select the organizational strategy that best fits your building and security needs. You can change this later if needed."}),c.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:o.map(h=>{const f=h.icon,p=n===h.id;return c.jsxs("button",{onClick:()=>l(h.id),className:`text-left p-5 rounded-xl border-2 transition-all ${p?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-200 bg-white hover:border-indigo-300 hover:shadow-sm"}`,children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${p?"bg-indigo-600":"bg-gray-100"}`,children:c.jsx(f,{className:p?"text-white":"text-gray-600",size:24})}),p&&c.jsx(Ya,{className:"text-indigo-600",size:24})]}),c.jsx("h4",{className:`text-base font-bold mb-2 ${p?"text-indigo-900":"text-gray-900"}`,children:h.title}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:h.description}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Best For:"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:h.recommended.map(d=>c.jsx("span",{className:"text-[10px] px-2 py-1 bg-gray-100 text-gray-600 rounded-full font-medium",children:d},d))}),c.jsx("div",{className:"space-y-1 mt-3",children:h.features.map((d,v)=>c.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[c.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),d]},v))})]})]},h.id)})})]}),c.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-6 border-2 border-indigo-200",children:[c.jsx("h3",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider mb-2",children:"Your Selected Workflow"}),n==="zone_based"&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(cw,{className:"w-5 h-5 text-indigo-600"}),c.jsx("span",{className:"font-bold text-indigo-900",children:"Zone-Based Keying"})]}),c.jsxs("p",{className:"text-sm text-indigo-800 mb-4",children:["Zones will be ",c.jsx("strong",{children:"automatically generated"})," from your door data. You'll skip the Zone Definition step and go straight to assigning doors."]}),c.jsx("div",{className:"space-y-2",children:[{step:1,title:"Hierarchy Planning",desc:"Plan your key hierarchy structure"},{step:2,title:"Hierarchy Setup",desc:"Define master key levels"},{step:3,title:"Door Assignment",desc:"Assign doors (zones auto-created)"},{step:4,title:"Validation",desc:"Review and validate design"},{step:5,title:"Export",desc:"Generate keying schedules"}].map(h=>c.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[c.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-indigo-600 text-white font-bold flex items-center justify-center",children:h.step}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-indigo-900",children:h.title}),c.jsxs("span",{className:"text-indigo-700",children:[" - ",h.desc]})]})]},h.step))})]}),n==="custom_hierarchy"&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(Zx,{className:"w-5 h-5 text-indigo-600"}),c.jsx("span",{className:"font-bold text-indigo-900",children:"Custom Hierarchy Design"})]}),c.jsxs("p",{className:"text-sm text-indigo-800 mb-4",children:["You'll go through the ",c.jsx("strong",{children:"complete wizard"})," with full control over hierarchy levels, zone creation, and door assignments."]}),c.jsx("div",{className:"space-y-2",children:[{step:1,title:"Hierarchy Planning",desc:"Plan your key hierarchy structure"},{step:2,title:"Hierarchy Setup",desc:"Define master key levels"},{step:3,title:"Zone Definition",desc:"Create custom security zones"},{step:4,title:"Door Assignment",desc:"Assign doors to keys and zones"},{step:5,title:"Validation",desc:"Review and validate design"},{step:6,title:"Export",desc:"Generate keying schedules"}].map(h=>c.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[c.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-indigo-600 text-white font-bold flex items-center justify-center",children:h.step}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-indigo-900",children:h.title}),c.jsxs("span",{className:"text-indigo-700",children:[" - ",h.desc]})]})]},h.step))})]}),n==="imported"&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(ud,{className:"w-5 h-5 text-indigo-600"}),c.jsx("span",{className:"font-bold text-indigo-900",children:"Import Existing Schedule"})]}),c.jsxs("p",{className:"text-sm text-indigo-800 mb-4",children:["You'll ",c.jsx("strong",{children:"skip design steps"})," and import an existing keying schedule. Then validate and export as needed."]}),c.jsx("div",{className:"space-y-2",children:[{step:1,title:"Validation",desc:"Validate imported keying schedule"},{step:2,title:"Export",desc:"Generate updated schedules"}].map(h=>c.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[c.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-indigo-600 text-white font-bold flex items-center justify-center",children:h.step}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-indigo-900",children:h.title}),c.jsxs("span",{className:"text-indigo-700",children:[" - ",h.desc]})]})]},h.step))})]}),!n&&c.jsx("p",{className:"text-sm text-gray-600",children:"Please select a keying approach above to see your workflow."})]})]})},iy=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n})=>{const{mkProject:i,standard:s,updateMKProject:a}=tl(),[o,l]=we.useState((i==null?void 0:i.hierarchyLevels)||null),[u,h]=we.useState(!1),f=ru[s],p=s==="ANSI_BHMA",d=r.length,v=q=>{if(d===0)return{total:0,breakdown:[]};switch(q){case 1:return{total:1,breakdown:[{label:"Single Key",count:1}]};case 2:const G=Math.max(2,Math.ceil(d/10));return{total:G+1,breakdown:[{label:"Master Key",count:1},{label:"Change Keys",count:G}]};case 3:const E=Math.max(3,Math.ceil(d/8)),k=Math.max(2,Math.ceil(E/3));return{total:1+k+E,breakdown:[{label:"Grand Master Key",count:1},{label:"Master Keys",count:k},{label:"Change Keys",count:E}]};case 4:const A=Math.max(4,Math.ceil(d/6)),D=Math.max(3,Math.ceil(A/4)),N=Math.max(2,Math.ceil(D/2));return{total:1+N+D+A,breakdown:[{label:"Great Grand Master",count:1},{label:"Grand Master Keys",count:N},{label:"Master Keys",count:D},{label:"Change Keys",count:A}]};default:return{total:0,breakdown:[]}}},y=q=>{switch(q){case 1:return`
  
     SKD / KD     Single Key Opens All Doors
                  (Keyed Alike or Keyed Different)
  
        
        
    All Doors`;case 2:return`
       
         A    Master Key (Opens All)
       
          
    
              
    
  AA1 AA2 AA3  Change Keys (Zone/Area Specific)
    
              
  Zone1 Zone2 Zone3`;case 3:return`
         
           A    Grand Master Key (Opens All)
         
            
      
                 
        
    AA        AB    Master Keys (Building/Floor)
        
                 
        
                
  
 AA1AA2 AB1AB2  Change Keys (Rooms/Doors)
  `;case 4:return`
           
             A    Great Grand Master (Opens All)
           
              
         
                  
         
       AA      AB    Grand Master Keys (Campus/Building)
         
                  
         
        
   AAA  AAB  ... ...  Master Keys (Floors/Wings)
    
            
    
  ... ...
 AAA1AAA2           Change Keys (Individual Rooms)
 `;default:return""}},_=q=>{switch(q){case 1:return`
  
     SKD / KD     Single Key Opens All Doors
                  (Keyed Alike or Keyed Different)
  
        
        
    All Doors`;case 2:return`
       
         MK    Master Key (Opens All)
       
          
    
              
  
  CK-1CK-2CK-3  User Keys (Zone/Area Specific)
  
              
  Zone1 Zone2 Zone3`;case 3:return`
         
          GMK    General Master Key (Opens All)
         
            
      
                 
      
    MK-1     MK-2   Master Keys (Building/Floor)
      
                 
        
                
 
 CK-1CK-2CK-3CK-4  User Keys (Rooms/Doors)
 `;case 4:return`
           
            GGMK   Great General Master (Opens All)
           
              
         
                  
       
      GMK-1  GMK-2   General Master Keys (Campus/Building)
       
                  
         
       
   MK-1 MK-2  ... ...  Master Keys (Floors/Wings)
   
            
    
  ... ...
 CK-1CK-2             User Keys (Individual Rooms)
 `;default:return""}},w=q=>({1:["Small residential","Storage units","Single-tenant facilities"],2:["Small offices","Retail stores","Apartment buildings","Small schools"],3:["Commercial offices","Hospitals","Universities","Hotels","Large schools"],4:["Multi-building campuses","Airport terminals","Hospital systems","Corporate headquarters"]})[q]||[],S=async q=>{l(q),h(!0);try{await a({hierarchyLevels:q})}catch(G){console.error("Failed to save hierarchy level:",G),n&&await n("Error",`Failed to save selection: ${G.message}`)}finally{h(!1)}},C=async()=>{await n(p?"ANSI/BHMA Key Symbols":"EN 1303 Key Symbols",p?`ANSI/BHMA Nomenclature:

 A = Great Grand Master Key (GGMK)
 AA = Grand Master Key (GMK)
 AAA = Master Key (MK)
 AAAA = Sub-Master Key (SMK)
 AAAAA = Change Key (CK)

Pattern: Each level adds one letter "A"

Example System:
  A  AA  AAA  AAA1

Keys are numbered sequentially:
  AA1, AA2, AA3...
  AAA1, AAA2, AAA3...`:`EN 1303 Nomenclature:

 GGMK = Great General Master Key
 GMK = General Master Key
 MK = Master Key
 SK = Sub-Key
 UK / CK = User Key / Change Key

Pattern: Descriptive abbreviations

Example System:
  GMK  MK-1  CK-101

Keys use zone/building codes:
  MK-1, MK-2, MK-3...
  CK-101, CK-102, CK-103...`)},j=[{level:1,title:"Single Key (SKD/KD)",subtitle:"All doors keyed alike or different",recommended:!1,icon:iV},{level:2,title:"2-Level System",subtitle:p?"Master  Change Keys":"Master  User Keys",recommended:!1,icon:cw},{level:3,title:"3-Level System",subtitle:p?"Grand Master  Master  Change":"General Master  Master  User",recommended:!0,icon:pV},{level:4,title:"4-Level System",subtitle:p?"Great GM  GM  Master  Change":"Great GM  GM  Master  User",recommended:!1,icon:cV}];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:c.jsx(Q0,{className:"w-8 h-8 text-indigo-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Hierarchy Planning"}),c.jsxs("p",{className:"text-gray-600 max-w-2xl mx-auto",children:["Choose the hierarchy depth for your master key system based on ",f.name,"."]})]}),c.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-4",children:c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(O2,{className:"w-5 h-5 text-indigo-600"}),c.jsxs("h3",{className:"font-bold text-indigo-900",children:["Current Standard: ",f.name]})]}),c.jsxs("p",{className:"text-sm text-indigo-700 mb-2",children:[p?"North American":"European"," standard  ",f.pinConfig.pins," pins, ",f.pinConfig.depths," depths"]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("button",{onClick:C,className:"text-xs text-indigo-600 hover:text-indigo-800 underline flex items-center gap-1",children:[c.jsx(nV,{size:14}),"View key naming conventions"]})})]}),d>0&&c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:d}),c.jsx("div",{className:"text-xs text-indigo-700",children:"Total Doors"})]})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:"Select Hierarchy Level"}),j.map(q=>{const G=q.icon,E=v(q.level),k=o===q.level,A=w(q.level);return c.jsxs("button",{onClick:()=>S(q.level),disabled:u,className:`w-full text-left transition-all ${k?"bg-indigo-50 border-2 border-indigo-600 shadow-lg scale-[1.02]":"bg-white border-2 border-gray-200 hover:border-indigo-300 hover:shadow-md"} rounded-xl p-6 relative`,children:[q.recommended&&c.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:c.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-600 text-white text-xs font-bold px-4 py-1 rounded-full shadow-lg flex items-center gap-1",children:[c.jsx("span",{children:""})," RECOMMENDED"]})}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[c.jsx("div",{className:`flex-shrink-0 w-14 h-14 rounded-lg flex items-center justify-center ${k?"bg-indigo-100":"bg-gray-100"}`,children:c.jsx(G,{className:`w-7 h-7 ${k?"text-indigo-600":"text-gray-600"}`})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:`text-lg font-bold mb-1 ${k?"text-indigo-900":"text-gray-900"}`,children:q.title}),c.jsx("p",{className:`text-sm ${k?"text-indigo-700":"text-gray-600"}`,children:q.subtitle})]}),k&&c.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),c.jsx("div",{className:`rounded-lg p-4 mb-4 ${k?"bg-white border border-indigo-200":"bg-gray-50 border border-gray-200"}`,children:c.jsx("pre",{className:`text-xs font-mono leading-relaxed overflow-x-auto ${k?"text-indigo-900":"text-gray-700"}`,children:p?y(q.level):_(q.level)})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h5",{className:`text-sm font-bold mb-2 ${k?"text-indigo-900":"text-gray-900"}`,children:"Typical Use Cases:"}),c.jsx("ul",{className:"space-y-1",children:A.map((D,N)=>c.jsxs("li",{className:`text-sm flex items-start gap-2 ${k?"text-indigo-700":"text-gray-600"}`,children:[c.jsx("span",{className:k?"text-indigo-500":"text-gray-400",children:""}),c.jsx("span",{children:D})]},N))})]}),d>0&&c.jsxs("div",{className:`rounded-lg p-4 ${k?"bg-white border border-indigo-200":"bg-gray-50 border border-gray-200"}`,children:[c.jsxs("h5",{className:`text-sm font-bold mb-3 ${k?"text-indigo-900":"text-gray-900"}`,children:["Estimated Key Count for ",d," doors:"]}),c.jsxs("div",{className:"space-y-2",children:[E.breakdown.map((D,N)=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:`text-xs ${k?"text-indigo-700":"text-gray-600"}`,children:D.label}),c.jsx("span",{className:`text-sm font-bold ${k?"text-indigo-900":"text-gray-900"}`,children:D.count})]},N)),c.jsx("div",{className:`pt-2 mt-2 border-t ${k?"border-indigo-200":"border-gray-200"}`,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:`text-sm font-bold ${k?"text-indigo-900":"text-gray-900"}`,children:"Total Keys:"}),c.jsx("span",{className:`text-xl font-bold ${k?"text-indigo-600":"text-gray-900"}`,children:E.total})]})})]})]})]})]})]},q.level)})]}),o&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Next Step:"})," You'll define the specific hierarchy levels and key symbols based on your ",o,"-level system selection."]})})]})},d0=(t,e,r,n="")=>{if(t==="ANSI_BHMA"){if(e===1)return"A";if(e===2)return"A"+String.fromCharCode(65+r);if(e===3)return n?n+String.fromCharCode(65+r):"AA"+String.fromCharCode(65+r);if(e===4)return n?`${n}${r+1}`:`AAA${r+1}`}else{if(e===1)return"GMK";if(e===2)return`MK-${r+1}`;if(e===3)return`SK-${r+1}`;if(e===4)return`CK-${r*100+1}`}return`KEY-${e}-${r}`},dd=(t,e,r,n,i=null)=>{const s=t==="ANSI_BHMA";if(e===1)return s?"Grand Master Key":"General Master Key";if(e===2){if(r==="zone_based"&&i)return`${i} Master`;if(r==="floor_based")return`Floor ${n+1} Master`;if(r==="functional"){const a=["Administration","Operations","Facilities","Security","Services","Staff"];return`${a[n%a.length]} Master`}else return`Master Key ${n+1}`}return e===3?i?`${i} Sub-Master`:s?"Sub-Master Key":"Sub-Key":e===4?s?"Change Key":"User Key":`Level ${e} Key`},lI=(t,e)=>{if(!t||t.length===0)return 3;let r=0;if(e==="zone_based")r=new Set(t.map(i=>i.zone).filter(Boolean)).size;else if(e==="floor_based")r=new Set(t.map(i=>i.level).filter(Boolean)).size;else if(e==="functional"){const n=new Set(t.map(i=>i.use).filter(Boolean));r=Math.min(n.size,6)}else r=Math.ceil(t.length/30);return Math.max(2,Math.min(r,10))},cI=(t,e)=>!t||t.length===0?[]:e==="zone_based"?[...new Set(t.map(n=>n.zone).filter(Boolean))].sort():e==="floor_based"?[...new Set(t.map(n=>n.level).filter(Boolean))].sort():e==="functional"?[...new Set(t.map(n=>n.use).filter(Boolean))].slice(0,6).sort():[],OV=(t,e,r)=>!t||t.length===0?0:e==="zone_based"?t.filter(n=>n.zone===r).length:e==="floor_based"?t.filter(n=>n.level===r).length:e==="functional"?t.filter(n=>n.use===r).length:Math.ceil(t.length/4),BV=(t,e,r,n,i)=>{const s={standard:t,hierarchyLevels:e,approach:r,totalDoors:(n==null?void 0:n.length)||0,levels:[],estimatedTotalKeys:0},a=lI(n,r),o=cI(n,r),l={level:1,name:dd(t,1,r,0),symbol:d0(t,1,0),description:`Opens all ${s.totalDoors} doors`,count:1,keys:[{symbol:d0(t,1,0),name:dd(t,1,r,0)}]};if(s.levels.push(l),s.estimatedTotalKeys+=1,e>=2){const u=[];for(let f=0;f<a;f++){const p=o[f]||null,d=p?OV(n,r,p):0;u.push({symbol:d0(t,2,f),name:dd(t,2,r,f,p),doorCount:d})}const h={level:2,name:"Master Keys",description:`${a} master keys for ${r.replace("_"," ")} organization`,count:a,keys:u};s.levels.push(h),s.estimatedTotalKeys+=a}if(e>=3){const u=s.totalDoors||a*30,h={level:3,name:t==="ANSI_BHMA"?"Change Keys":"User Keys",description:"Created automatically when doors are assigned",count:u,keys:[]};s.levels.push(h),s.estimatedTotalKeys+=u}if(e>=4){const u=s.totalDoors||a*30,h={level:4,name:t==="ANSI_BHMA"?"Change Keys":"User Keys",description:"Individual room/door keys",count:u,keys:[]};s.levels.push(h)}return s},UV=(t,e,r,n,i)=>{const s=[],a=lI(n,r),o=cI(n,r);if(s.push({levelName:dd(t,1,r,0),levelType:e===4?"GGM":"GMK",keySymbol:d0(t,1,0),order:0,parentHierarchyId:null,description:`${dd(t,1,r,0)} - Opens all doors in ${i}`,autoGenerated:!0}),e>=2)for(let l=0;l<a;l++){const u=o[l]||`Group ${l+1}`;s.push({levelName:dd(t,2,r,l,u),levelType:e===4?"GMK":"MK",keySymbol:d0(t,2,l),order:l+1,parentHierarchyId:null,description:`Master key for ${u}`,autoGenerated:!0})}return s},VV=(t,e)=>{const r=t==="ANSI_BHMA";return e===2?r?"2-Level System: Master  Change Keys":"2-Level System: Master  User Keys":e===3?r?"3-Level System: Grand Master  Master  Change":"3-Level System: General Master  Master  User":e===4?r?"4-Level System: Great GM  Grand Master  Master  Change":"4-Level System: Great GM  General Master  Master  User":"Single Key System (SKD/KD)"},sy=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n,showConfirm:i})=>{var se;const{mkProject:s,hierarchies:a,hierarchyTree:o,standard:l,mkApproach:u,addHierarchyLevel:h,deleteHierarchyLevel:f,applyHierarchyTemplate:p}=tl(),[d,v]=we.useState(!1),[y,_]=we.useState({levelName:"",keySymbol:"",parentHierarchyId:null}),[w,S]=we.useState(!1),[C,j]=we.useState(!1),q=ru[l],G=(s==null?void 0:s.facilityType)||"Commercial Office",E=(s==null?void 0:s.hierarchyLevels)||3,k=VV(l,E),A=async()=>{const ge=BV(l,E,u,r);let ve=`This will create:

`;if(ge.levels.forEach((he,_e)=>{ve+=`**Level ${he.level}: ${he.name}**
`,he.keys&&he.keys.length>0&&he.keys.length<=10?he.keys.forEach(Ue=>{const Ie=Ue.doorCount?` (${Ue.doorCount} doors)`:"";ve+=`   ${Ue.symbol} - ${Ue.name}${Ie}
`}):he.count&&(ve+=`   ${he.count} key${he.count!==1?"s":""} - ${he.description}
`),ve+=`
`}),ve+=`**Total Estimated Keys:** ${ge.estimatedTotalKeys}

`,ve+="Change keys will be created automatically when you assign doors in Step 4.",!!(i?await i("Auto-Generate Hierarchy",ve,"Generate Hierarchy","Cancel"):confirm(ve))){if(a.length>0){if(!(i?await i("Replace Existing","This will replace your existing hierarchy levels. Continue?","Yes, Replace","Cancel"):confirm("This will replace your existing hierarchy levels. Continue?")))return;for(const _e of a)await f(_e.hierarchyId)}j(!0);try{const he=UV(l,E,u,r,G);let _e=null;for(const Ue of he){const Ie={...Ue,parentHierarchyId:Ue.order===0?null:_e};if(await h(Ie),Ue.order===0){await new Promise(O=>setTimeout(O,300));const P=a;P.length>0&&(_e=P[0].hierarchyId)}}n&&await n("Success",`Hierarchy generated successfully!

${he.length} levels created based on your ${E}-level plan.`)}catch(he){n&&await n("Error",`Failed to generate hierarchy: ${he.message}`)}finally{j(!1)}}},D=async()=>{if(i?await i("Replace Hierarchy","This will replace your current hierarchy. Continue?","Yes, Replace","Cancel"):confirm("This will replace your current hierarchy. Continue?")){S(!0);try{await p(G),n&&await n("Success","Template applied successfully!")}catch(ve){n&&await n("Error",`Failed to apply template: ${ve.message}`)}finally{S(!1)}}},N=async ge=>{ge.preventDefault();try{await h({...y,order:a.length,levelType:"custom"}),v(!1),_({levelName:"",keySymbol:"",parentHierarchyId:null})}catch(ve){n&&await n("Error",`Failed to add level: ${ve.message}`)}},R=async ge=>{if(i?await i("Delete Level","Delete this hierarchy level?","Yes, Delete","Cancel"):confirm("Delete this hierarchy level?"))try{await f(ge)}catch(ye){n&&await n("Error",`Failed to delete: ${ye.message}`)}},L=(ge,ve=0)=>ge.map(ye=>c.jsxs("div",{style:{marginLeft:ve*24},children:[c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-lg mb-2 hover:shadow-sm transition-shadow",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:c.jsx("span",{className:"font-bold text-indigo-600",children:ye.keySymbol})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-gray-900",children:ye.levelName}),c.jsx("div",{className:"text-sm text-gray-500",children:ye.description||ye.levelType})]}),ve<2&&ye.children&&ye.children.length>0&&c.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500",children:[ye.children.length," child",ye.children.length!==1?"ren":""]}),c.jsx("button",{onClick:()=>R(ye.hierarchyId),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete level",children:c.jsx(hd,{size:16})})]}),ye.children&&ye.children.length>0&&L(ye.children,ve+1)]},ye.hierarchyId));return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:c.jsx(Q0,{className:"w-8 h-8 text-indigo-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Hierarchy Setup"}),c.jsxs("p",{className:"text-gray-600 max-w-2xl mx-auto",children:["Define your master key hierarchy levels based on ",q.name,"."]})]}),c.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-2 border-emerald-200 rounded-xl p-6",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center",children:c.jsx(Ya,{className:"w-7 h-7 text-emerald-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("h3",{className:"font-bold text-emerald-900",children:"Your Hierarchy Plan"}),c.jsx("span",{className:"px-2 py-0.5 bg-emerald-600 text-white text-xs font-bold rounded-full",children:"FROM STEP 1.5"})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-3",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-emerald-700 font-semibold mb-1",children:"Standard"}),c.jsx("div",{className:"text-sm font-bold text-emerald-900",children:q.name})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-emerald-700 font-semibold mb-1",children:"Hierarchy System"}),c.jsx("div",{className:"text-sm font-bold text-emerald-900",children:k})]})]}),c.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-emerald-200",children:[c.jsx("div",{className:"text-xs font-semibold text-emerald-800 mb-2",children:"Structure:"}),c.jsxs("div",{className:"grid gap-1 text-sm text-emerald-700",children:[E>=1&&c.jsxs("div",{children:[" Level 1: ",l==="ANSI_BHMA"?"Grand Master":"General Master"," (1 key)"]}),E>=2&&c.jsxs("div",{children:[" Level 2: ","Master Keys"," (estimated: ",Math.ceil(r.length/30)||3,"-",Math.ceil(r.length/20)||6," keys)"]}),E>=3&&c.jsxs("div",{children:[" Level 3: ",l==="ANSI_BHMA"?"Change Keys":"User Keys"," (created per door assignment)"]}),E>=4&&c.jsx("div",{children:" Level 4: Individual Room Keys (created per door assignment)"})]})]})]})]})}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-xl p-5",children:[c.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[c.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:c.jsx(Yu,{className:"w-6 h-6 text-indigo-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-indigo-900 mb-1",children:"Auto-Generate from Plan"}),c.jsxs("p",{className:"text-sm text-indigo-700",children:["Automatically create ",E,"-level hierarchy based on your Step 1.5 selection."]})]})]}),c.jsx("button",{onClick:A,disabled:C||!E,className:"w-full px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all font-semibold flex items-center justify-center gap-2 shadow-md",children:C?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Yu,{size:18}),"Generate Hierarchy"]})})]}),c.jsxs("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-xl p-5",children:[c.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[c.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:c.jsx(O2,{className:"w-6 h-6 text-gray-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:"Apply Template"}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Use facility-based template for ",G," (",((se=q.recommendations[G])==null?void 0:se.depth)||3," levels)."]})]})]}),c.jsx("button",{onClick:D,disabled:w,className:"w-full px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-semibold",children:w?"Applying...":"Apply Template"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:"Current Hierarchy"}),a.length===0?c.jsxs("div",{className:"text-center py-12 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl",children:[c.jsx(Q0,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"No hierarchy levels defined yet."}),c.jsx("p",{className:"text-sm text-gray-400",children:"Apply a template or add levels manually to get started."})]}):c.jsxs("div",{className:"space-y-2",children:[L(o),c.jsx("div",{className:"mt-4 p-3 bg-emerald-50 border border-emerald-200 rounded-lg",children:c.jsxs("div",{className:"text-sm text-emerald-800",children:[c.jsx("strong",{children:a.length})," hierarchy level",a.length!==1?"s":""," defined"]})})]})]}),!d&&c.jsxs("button",{onClick:()=>v(!0),className:"w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-indigo-400 hover:text-indigo-600 flex items-center justify-center gap-2 transition-colors",children:[c.jsx(T_,{size:20}),"Add Custom Level"]}),d&&c.jsxs("form",{onSubmit:N,className:"bg-gray-50 border border-gray-200 rounded-lg p-4 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:"Add Custom Hierarchy Level"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Level Name"}),c.jsx("input",{type:"text",value:y.levelName,onChange:ge=>_({...y,levelName:ge.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Master Key",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Key Symbol"}),c.jsx("input",{type:"text",value:y.keySymbol,onChange:ge=>_({...y,keySymbol:ge.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., AA",required:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For ANSI: Use A, AA, AAA pattern. For EN: Use GM, M, S pattern."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Parent Level"}),c.jsxs("select",{value:y.parentHierarchyId||"",onChange:ge=>_({...y,parentHierarchyId:ge.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[c.jsx("option",{value:"",children:"None (Top Level)"}),a.map(ge=>c.jsx("option",{value:ge.hierarchyId,children:ge.levelName},ge.hierarchyId))]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Add Level"}),c.jsx("button",{type:"button",onClick:()=>{v(!1),_({levelName:"",keySymbol:"",parentHierarchyId:null})},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})},H3=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n,showConfirm:i})=>{const{mkProject:s,zones:a,mkApproach:o,createZone:l,autoGenerateZones:u,deleteZone:h}=tl(),[f,p]=we.useState(!1),[d,v]=we.useState({zoneName:"",color:"#3B82F6"}),[y,_]=we.useState(!1),w=[{name:"Red",value:"#EF4444"},{name:"Orange",value:"#F59E0B"},{name:"Green",value:"#10B981"},{name:"Blue",value:"#3B82F6"},{name:"Purple",value:"#8B5CF6"},{name:"Pink",value:"#EC4899"},{name:"Indigo",value:"#6366F1"},{name:"Teal",value:"#14B8A6"}],S=async()=>{if(r.length===0){n&&await n("No Doors Found","No doors found in project. Please add doors in Step 1 first.");return}const G=a.length>0?"This will replace existing zones. Continue?":`Auto-generate ${r.length} zone${r.length!==1?"s":""} based on your door data?`,E=a.length>0?"Replace Zones":"Generate Zones";if(i?await i(E,G,a.length>0?"Yes, Replace":"Generate","Cancel"):confirm(G)){if(a.length>0)for(const A of a)await h(A.zoneId);_(!0);try{await u(r,o),n&&await n("Success","Zones generated successfully!")}catch(A){n&&await n("Error",`Failed to generate zones: ${A.message}`)}finally{_(!1)}}},C=async G=>{G.preventDefault();try{await l({...d,doorCount:0}),p(!1),v({zoneName:"",color:"#3B82F6"})}catch(E){n&&await n("Error",`Failed to create zone: ${E.message}`)}},j=async G=>{if(i?await i("Delete Zone","Delete this zone?","Yes, Delete","Cancel"):confirm("Delete this zone?"))try{await h(G)}catch(k){n&&await n("Error",`Failed to delete zone: ${k.message}`)}},q=()=>{switch(o){case"zone_based":return"by Building Zones";case"floor_based":return"by Floor Levels";case"functional":return"by Functional Use";default:return""}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:c.jsx(Qx,{className:"w-8 h-8 text-indigo-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Zone Definition"}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Create zones to organize your doors for master key assignment."})]}),c.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-white rounded-lg flex items-center justify-center shadow-sm",children:c.jsx(Yu,{className:"w-6 h-6 text-indigo-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:"Auto-Generate Zones"}),c.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Automatically create zones ",q()," from your project's ",r.length," door",r.length!==1?"s":"","."]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:S,disabled:y||r.length===0,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:y?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Yu,{size:16}),"Generate Zones"]})}),r.length===0&&c.jsx("span",{className:"text-sm text-gray-500 self-center",children:"No doors available in project"})]})]})]})}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[c.jsx(Ip,{className:"w-5 h-5 text-indigo-600"}),"Defined Zones"]}),a.length>0&&c.jsx("div",{className:"px-3 py-1 bg-emerald-50 border border-emerald-200 rounded-full",children:c.jsxs("span",{className:"text-sm font-semibold text-emerald-800",children:[a.length," zone",a.length!==1?"s":""]})})]}),a.length===0?c.jsxs("div",{className:"text-center py-12 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl",children:[c.jsx(Qx,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"No zones defined yet."}),c.jsx("p",{className:"text-sm text-gray-400",children:"Auto-generate zones or add them manually to get started."})]}):c.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:a.map(G=>c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white border-2 border-gray-200 rounded-lg hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center shadow-sm",style:{backgroundColor:G.color+"20",border:`2px solid ${G.color}`},children:c.jsx(Qx,{size:20,style:{color:G.color}})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-semibold text-gray-900 truncate",children:G.zoneName}),c.jsxs("div",{className:"text-sm text-gray-500",children:[G.doorCount||0," door",G.doorCount!==1?"s":""]})]}),c.jsx("button",{onClick:()=>j(G.zoneId),className:"flex-shrink-0 p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete zone",children:c.jsx(hd,{size:16})})]},G.zoneId))})]}),!f&&c.jsxs("button",{onClick:()=>p(!0),className:"w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-indigo-400 hover:text-indigo-600 flex items-center justify-center gap-2 transition-colors",children:[c.jsx(T_,{size:20}),"Add Custom Zone"]}),f&&c.jsxs("form",{onSubmit:C,className:"bg-gray-50 border border-gray-200 rounded-lg p-4 space-y-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:"Add Custom Zone"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Zone Name"}),c.jsx("input",{type:"text",value:d.zoneName,onChange:G=>v({...d,zoneName:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., East Wing, Admin Area, Building A",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Zone Color"}),c.jsx("div",{className:"grid grid-cols-8 gap-2",children:w.map(G=>c.jsx("button",{type:"button",onClick:()=>v({...d,color:G.value}),className:`w-10 h-10 rounded-lg border-2 transition-all ${d.color===G.value?"border-gray-900 scale-110 shadow-md":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:G.value},title:G.name},G.value))})]}),c.jsxs("div",{className:"flex gap-2 pt-2",children:[c.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Add Zone"}),c.jsx("button",{type:"button",onClick:()=>{p(!1),v({zoneName:"",color:"#3B82F6"})},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]}),a.length>0&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Next Step:"})," You'll assign doors to specific hierarchy levels within these zones."]})})]})},zV=(t,e)=>{let r=e.find(n=>n.levelName.toLowerCase()===t.toLowerCase()||n.levelName.toLowerCase().includes(t.toLowerCase()));if(!r){const n=t.toLowerCase().split(/\s+/);r=e.find(i=>{const s=i.levelName.toLowerCase().split(/\s+/);return n.some(a=>s.some(o=>o.includes(a)||a.includes(o)))})}return r},fw=(t,e,r,n)=>{if(t==="ANSI_BHMA")return`${e}${r+1}`;{const i=e.match(/(\d+)/),s=i?i[1]:"1",a=String(r+1).padStart(2,"0");return`CK-${s}${a}`}},HV=(t,e)=>t.mark?`Door ${t.mark} Key`:t.use?`${t.use} Key`:e?`${e} Key ${t.id.slice(-4)}`:`Change Key ${t.id.slice(-4)}`,qV=(t,e)=>{const r=[];let n=e.find(s=>s.hierarchyId===t);for(;n&&n.parentHierarchyId;){const s=e.find(a=>a.hierarchyId===n.parentHierarchyId);if(s)r.push(s),n=s;else break}const i=e.find(s=>!s.parentHierarchyId&&s.hierarchyId!==t);return i&&!r.some(s=>s.hierarchyId===i.hierarchyId)&&r.push(i),r},$V=(t,e,r,n)=>{const i={assignments:[],changeKeys:[],masterCounts:{},totalChangeKeys:0,unassignedDoors:[]},s=r.filter(o=>o.order>0&&o.order<=r.length-1),a={};return t.forEach(o=>{const l=o.zone||"Unassigned";a[l]||(a[l]=[]),a[l].push(o)}),Object.entries(a).forEach(([o,l])=>{const u=zV(o,s);if(!u){i.unassignedDoors.push(...l);return}i.masterCounts[u.hierarchyId]||(i.masterCounts[u.hierarchyId]={master:u,count:0,zoneName:o});const h=qV(u.hierarchyId,r);l.forEach((f,p)=>{const d=fw(n,u.keySymbol,i.masterCounts[u.hierarchyId].count,u.hierarchyId),v=HV(f,o),y={doorId:f.id,door:f,changeKeySymbol:d,changeKeyName:v,masterKeyId:u.hierarchyId,masterKeySymbol:u.keySymbol,masterKeyName:u.levelName,parentMasterKeys:h.map(_=>({id:_.hierarchyId,symbol:_.keySymbol,name:_.levelName})),zoneName:o};i.assignments.push(y),i.changeKeys.push({symbol:d,name:v,doorId:f.id,masterKeyId:u.hierarchyId,zoneName:o}),i.masterCounts[u.hierarchyId].count++,i.totalChangeKeys++})}),i},WV=(t,e,r)=>{const n=r==="ANSI_BHMA";let i=`This will create:

`;const s=e.find(l=>!l.parentHierarchyId);s&&(i+=`**${s.levelName} (${s.keySymbol})**
`,i+=` Opens all ${t.totalChangeKeys} door${t.totalChangeKeys!==1?"s":""}

`),i+=`**Master Keys:**
`,Object.values(t.masterCounts).forEach(({master:l,count:u,zoneName:h})=>{i+=` ${l.keySymbol} (${l.levelName}) - ${u} door${u!==1?"s":""}
`;const f=t.changeKeys.filter(p=>p.masterKeyId===l.hierarchyId).slice(0,3);f.length>0&&(i+=`   Change Keys: ${f.map(p=>p.symbol).join(", ")}`,u>3&&(i+=`... (${u-3} more)`),i+=`
`)}),t.unassignedDoors.length>0&&(i+=`
 **${t.unassignedDoors.length} door${t.unassignedDoors.length!==1?"s":""} could not be auto-assigned**
`,i+=`These doors have no matching zone/master. You'll need to assign them manually.
`),i+=`
**Total Change Keys:** ${t.totalChangeKeys}
`;const a=Object.keys(t.masterCounts).length,o=s?1:0;return i+=`**Total Keys in System:** ${o+a+t.totalChangeKeys}
`,i+=`(${o} GMK + ${a} MK + ${t.totalChangeKeys} CK)
`,i},GV=(t,e,r)=>{const n={totalDoors:r.length,assignedDoors:t.length,unassignedDoors:r.length-t.length,progressPercentage:r.length>0?Math.round(t.length/r.length*100):0,masterStats:{}};return e.forEach(i=>{const s=t.filter(a=>a.hierarchyId===i.hierarchyId);n.masterStats[i.hierarchyId]={hierarchy:i,assignedCount:s.length,symbol:i.keySymbol,name:i.levelName}}),n},ay=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n,showConfirm:i})=>{const{hierarchies:s,zones:a,assignments:o,kaGroups:l,standard:u,assignDoorToKey:h,bulkAssignDoors:f,unassignDoor:p,createKAGroup:d,updateKeyQuantity:v}=tl(),[y,_]=we.useState(""),[w,S]=we.useState("all"),[C,j]=we.useState("all"),[q,G]=we.useState([]),[E,k]=we.useState(null),[A,D]=we.useState(!1),[N,R]=we.useState(!1),[L,se]=we.useState(!1),[ge,ve]=we.useState(""),[ye,he]=we.useState(5),[_e,Ue]=we.useState([]);we.useMemo(()=>GV(o,s,r),[o,s,r]);const Ie=we.useMemo(()=>{const X=new Set(r.map(me=>me.level).filter(Boolean));return Array.from(X).sort()},[r]),P=we.useMemo(()=>{const X=new Set(r.map(me=>me.zone).filter(Boolean));return Array.from(X).sort()},[r]),O=X=>o.some(me=>me.doorId===X),B=X=>o.find(me=>me.doorId===X),z=we.useMemo(()=>r.filter(X=>{var Ke,st,yt;const me=!y||((Ke=X.mark)==null?void 0:Ke.toLowerCase().includes(y.toLowerCase()))||((st=X.use)==null?void 0:st.toLowerCase().includes(y.toLowerCase()))||((yt=X.zone)==null?void 0:yt.toLowerCase().includes(y.toLowerCase())),fe=w==="all"||X.zone===w,qe=C==="all"||X.level===C;return me&&fe&&qe}),[r,y,w,C]),Z=r.filter(X=>O(X.id)).length,de=r.length,Se=de>0?Math.round(Z/de*100):0,Ae=X=>{G(me=>me.includes(X)?me.filter(fe=>fe!==X):[...me,X])},Ne=()=>{const X=z.filter(me=>!O(me.id));G(X.map(me=>me.id))},Xe=()=>{G([])},et=async()=>{if(q.length===0||!E){n&&await n("Selection Required","Please select doors and a hierarchy level");return}D(!0);try{let X=o.filter(me=>me.hierarchyId===E.hierarchyId).length;for(const me of q){const fe=fw(u,E.keySymbol,X,E.hierarchyId);await h(me,E.hierarchyId,fe),X++}n&&await n("Success",`Successfully assigned ${q.length} door${q.length!==1?"s":""}`),Xe()}catch(X){n&&await n("Error",`Failed to assign doors: ${X.message}`)}finally{D(!1)}},ot=async(X,me)=>{D(!0);try{const fe=o.filter(Ke=>Ke.hierarchyId===me.hierarchyId).length,qe=fw(u,me.keySymbol,fe,me.hierarchyId);await h(X,me.hierarchyId,qe)}catch(fe){n&&await n("Error",`Failed to assign door: ${fe.message}`)}finally{D(!1)}},mt=async X=>{D(!0);try{await p(X),n&&await n("Success","Door unassigned successfully")}catch(me){n&&await n("Error",`Failed to unassign door: ${me.message}`)}finally{D(!1)}},te=async()=>{if(!ge.trim()){n&&await n("Name Required","Please enter a name for the KA group");return}if(_e.length<2){n&&await n("Selection Required","KA group must have at least 2 doors");return}if(!r.find(fe=>fe.id===_e[0]))return;const me=s.find(fe=>fe.order>0);if(!me){n&&await n("No Master Key","Please create master keys in Step 2 first");return}D(!0);try{await d(ge,_e,me.hierarchyId,me.keySymbol,ye),n&&await n("Success",`KA Group "${ge}" created with ${_e.length} doors`),se(!1),ve(""),he(5),Ue([]),Xe()}catch(fe){n&&await n("Error",`Failed to create KA group: ${fe.message}`)}finally{D(!1)}},ke=async()=>{if(r.length===0){n&&await n("No Doors","No doors found in project to assign.");return}if(s.length===0){n&&await n("No Hierarchy","Please create hierarchy levels in Step 2 first.");return}const X=$V(r,a,s,u);if(X.assignments.length===0){n&&await n("Cannot Auto-Assign","No zones could be matched to master keys. Please ensure your zones match your master key names.");return}const me=WV(X,s,u);if(i?await i("Auto-Assign Doors",me,"Confirm Assignment","Cancel"):confirm(me)){R(!0);try{for(const qe of X.assignments)await h(qe.doorId,qe.masterKeyId,qe.changeKeySymbol);n&&await n("Success",`Auto-assigned ${X.assignments.length} door${X.assignments.length!==1?"s":""} successfully!

${X.totalChangeKeys} change keys created.`)}catch(qe){n&&await n("Error",`Failed to auto-assign doors: ${qe.message}`)}finally{R(!1)}}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:c.jsx(Lu,{className:"w-8 h-8 text-indigo-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Door Assignment"}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Assign doors to hierarchy levels to define which keys open which doors."})]}),c.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-sm font-semibold text-indigo-900 mb-1",children:"Assignment Progress"}),c.jsxs("div",{className:"text-2xl font-bold text-indigo-600 mb-2",children:[Z," / ",de," doors"]}),Z>0&&c.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),c.jsxs("span",{className:"text-gray-700",children:[c.jsxs("strong",{children:[r.filter(X=>O(X.id)).reduce((X,me)=>X+(me.qty||1),0)," cylinders"]})," assigned"]})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),c.jsxs("span",{className:"text-gray-600",children:[r.reduce((X,me)=>X+(me.qty||1),0)," total cylinders in schedule"]})]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:"text-3xl font-bold text-indigo-600",children:[Se,"%"]}),c.jsx("div",{className:"text-sm text-indigo-700",children:"Complete"})]})]}),c.jsx("div",{className:"w-full bg-indigo-200 rounded-full h-3 overflow-hidden",children:c.jsx("div",{className:"bg-indigo-600 h-full rounded-full transition-all duration-500",style:{width:`${Se}%`}})})]}),s.length>0&&c.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(Q0,{className:"w-5 h-5 text-blue-600"}),c.jsx("h3",{className:"font-bold text-blue-900",children:"Master Key Hierarchy"})]}),c.jsx("div",{className:"space-y-3",children:s.map((X,me)=>{const fe=o.filter(Ke=>Ke.hierarchyId===X.hierarchyId).length,qe=X.order===0;return c.jsxs("div",{className:"flex items-center gap-3 bg-white bg-opacity-60 rounded-lg p-3",style:{marginLeft:`${X.order*16}px`},children:[c.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${qe?"bg-blue-100":"bg-cyan-100"}`,children:c.jsx("span",{className:`font-bold text-sm ${qe?"text-blue-700":"text-cyan-700"}`,children:X.keySymbol})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:X.levelName}),c.jsx("div",{className:"text-xs text-gray-600",children:qe?`Opens all ${de} doors`:`${fe} door${fe!==1?"s":""} assigned`})]}),!qe&&fe>0&&c.jsx("div",{className:"flex-shrink-0",children:c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700",children:fe})})]},X.hierarchyId)})})]}),r.length>0&&Z<de&&s.length>0&&c.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-xl p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Yu,{className:"w-5 h-5 text-indigo-600"}),c.jsx("h3",{className:"font-bold text-indigo-900",children:"Smart Auto-Assignment"})]}),c.jsx("p",{className:"text-sm text-indigo-700 mb-2",children:"Automatically assign all doors to master keys based on zones and hierarchy."}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-indigo-600",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(xV,{className:"w-4 h-4"}),c.jsxs("span",{children:[de-Z," unassigned doors"]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Q0,{className:"w-4 h-4"}),c.jsxs("span",{children:[s.filter(X=>X.order>0).length," master keys"]})]})]})]}),c.jsx("button",{onClick:ke,disabled:N||A,className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg flex items-center gap-2 font-semibold",children:N?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),c.jsx("span",{children:"Assigning..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Yu,{className:"w-5 h-5"}),c.jsx("span",{children:"Auto-Assign All Doors"})]})})]})}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[c.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx(iI,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),c.jsx("input",{type:"text",value:y,onChange:X=>_(X.target.value),placeholder:"Search doors...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),c.jsxs("div",{className:"relative",children:[c.jsx(O3,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),c.jsxs("select",{value:w,onChange:X=>S(X.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",children:[c.jsx("option",{value:"all",children:"All Zones"}),P.map(X=>c.jsx("option",{value:X,children:X},X))]})]}),c.jsxs("div",{className:"relative",children:[c.jsx(O3,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),c.jsxs("select",{value:C,onChange:X=>j(X.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",children:[c.jsx("option",{value:"all",children:"All Levels"}),Ie.map(X=>c.jsxs("option",{value:X,children:["Floor ",X]},X))]})]})]}),q.length>0&&c.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center gap-3",children:[c.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:[q.length," door",q.length!==1?"s":""," selected"]}),c.jsxs("select",{value:(E==null?void 0:E.hierarchyId)||"",onChange:X=>{const me=s.find(fe=>fe.hierarchyId===X.target.value);k(me)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[c.jsx("option",{value:"",children:"Select hierarchy level..."}),s.map(X=>c.jsxs("option",{value:X.hierarchyId,children:[X.keySymbol," - ",X.levelName]},X.hierarchyId))]}),c.jsx("button",{onClick:et,disabled:!E||A,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:A?"Assigning...":"Assign Selected"}),c.jsxs("button",{onClick:()=>{q.length>=2?(Ue(q),se(!0)):n==null||n("Selection Required","Please select at least 2 doors to create a KA group")},disabled:q.length<2,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[c.jsx(Tm,{size:16}),"Create KA Group"]}),c.jsx("button",{onClick:Xe,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear"})]})]}),z.some(X=>!O(X.id))&&c.jsxs("button",{onClick:Ne,className:"text-sm text-indigo-600 hover:text-indigo-700 font-semibold",children:["Select all unassigned (",z.filter(X=>!O(X.id)).length,")"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[c.jsx(Ip,{className:"w-5 h-5 text-indigo-600"}),"Doors (",z.length,")"]}),z.length===0?c.jsxs("div",{className:"text-center py-12 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl",children:[c.jsx(Lu,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500",children:"No doors match your filters."})]}):c.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:z.map(X=>{const me=O(X.id),fe=B(X.id),qe=q.includes(X.id),Ke=fe?s.find(st=>st.hierarchyId===fe.hierarchyId):null;return c.jsxs("div",{className:`flex items-center gap-3 p-4 border-2 rounded-lg transition-all ${me?"bg-emerald-50 border-emerald-200":qe?"bg-indigo-50 border-indigo-400":"bg-white border-gray-200 hover:border-gray-300"}`,children:[!me&&c.jsx("button",{onClick:()=>Ae(X.id),className:"flex-shrink-0",children:qe?c.jsx(Ya,{className:"text-indigo-600",size:20}):c.jsx(ZU,{className:"text-gray-400",size:20})}),c.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center ${me?"bg-emerald-100":"bg-gray-100"}`,children:c.jsx(Lu,{size:20,className:me?"text-emerald-600":"text-gray-600"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"font-semibold text-gray-900",children:X.mark}),X.qty>1&&c.jsxs("div",{className:"px-2 py-0.5 bg-orange-100 border border-orange-300 rounded text-xs font-bold text-orange-700",children:["QTY ",X.qty]})]}),c.jsxs("div",{className:"text-sm text-gray-600 truncate",children:[X.use,"  Floor ",X.level,"  ",X.zone]})]}),me&&Ke?c.jsxs("div",{className:"flex items-center gap-2",children:[fe.keyType==="KA"?c.jsx("div",{className:"flex-shrink-0 p-1.5 bg-purple-100 rounded-lg",title:"Keyed Alike - Shared key with other doors",children:c.jsx(Tm,{size:16,className:"text-purple-600"})}):c.jsx("div",{className:"flex-shrink-0 p-1.5 bg-blue-100 rounded-lg",title:"Keyed Differ - Unique key",children:c.jsx(ud,{size:16,className:"text-blue-600"})}),c.jsx("div",{className:"flex-shrink-0 px-3 py-1 bg-emerald-100 border border-emerald-300 rounded-full",children:c.jsx("span",{className:"text-sm font-semibold text-emerald-800",children:fe.keySymbol||Ke.keySymbol})}),c.jsx("div",{className:"flex-shrink-0 px-2 py-0.5 bg-cyan-50 border border-cyan-200 rounded text-xs text-cyan-700",children:Ke.keySymbol}),fe.keyType==="KA"?c.jsx("div",{className:"flex-shrink-0 px-2 py-1 bg-purple-50 border border-purple-200 rounded text-xs text-purple-700 font-medium",children:fe.kaGroupName||"KA Group"}):c.jsxs("div",{className:"flex-shrink-0 px-2 py-1 bg-gray-50 border border-gray-200 rounded text-xs text-gray-700",children:[fe.keyQuantity||2," keys"]}),c.jsx("button",{onClick:()=>mt(X.id),disabled:A,className:"flex-shrink-0 p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Unassign door",children:c.jsx(ml,{size:16})})]}):c.jsxs("select",{onChange:st=>{if(st.target.value){const yt=s.find(Ht=>Ht.hierarchyId===st.target.value);yt&&(ot(X.id,yt),st.target.value="")}},className:"flex-shrink-0 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",disabled:A,children:[c.jsx("option",{value:"",children:"Assign to..."}),s.map(st=>c.jsxs("option",{value:st.hierarchyId,children:[st.keySymbol," - ",st.levelName]},st.hierarchyId))]})]},X.id)})})]}),Z>0&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Progress:"})," ",Z," of ",de," doors assigned.",Z===de?" Ready for validation!":" Keep assigning to complete your design."]})}),L&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-t-2xl",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"p-2 bg-white bg-opacity-20 rounded-lg",children:c.jsx(Tm,{className:"w-6 h-6"})}),c.jsx("h2",{className:"text-2xl font-bold",children:"Create Keyed Alike Group"})]}),c.jsx("p",{className:"text-purple-100 text-sm",children:"Create a group of doors that share the same key - one key opens all doors in this group"})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"KA Group Name *"}),c.jsx("input",{type:"text",value:ge,onChange:X=>ve(X.target.value),placeholder:"e.g., Conference Rooms, Bathrooms, Storage Closets",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",autoFocus:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Give this group a descriptive name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Number of Physical Keys *"}),c.jsx("input",{type:"number",min:"1",max:"100",value:ye,onChange:X=>he(parseInt(X.target.value)||1),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Total number of keys to manufacture for this group (one key opens all ",_e.length," doors)"]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:["Selected Doors (",_e.length,")"]}),c.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 max-h-60 overflow-y-auto",children:c.jsx("div",{className:"space-y-2",children:_e.map(X=>{const me=r.find(fe=>fe.id===X);return me?c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-lg",children:[c.jsx(Lu,{size:18,className:"text-gray-600 flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-medium text-gray-900",children:me.mark}),c.jsx("div",{className:"text-xs text-gray-600 truncate",children:me.use})]}),c.jsx("button",{onClick:()=>Ue(_e.filter(fe=>fe!==X)),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:c.jsx(ml,{size:16})})]},X):null})})}),_e.length<2&&c.jsx("p",{className:"text-xs text-red-600 mt-2",children:" KA group must have at least 2 doors"})]}),c.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-semibold text-purple-900 mb-2 flex items-center gap-2",children:[c.jsx(vV,{size:18}),"Summary"]}),c.jsxs("ul",{className:"text-sm text-purple-800 space-y-1",children:[c.jsxs("li",{children:[" ",c.jsxs("strong",{children:[_e.length," doors"]})," will share the same key"]}),c.jsxs("li",{children:[" ",c.jsxs("strong",{children:[ye," physical keys"]})," will be manufactured"]}),c.jsxs("li",{children:[" One key opens all ",_e.length," doors in this group"]}),c.jsx("li",{children:" Cost-effective: Fewer unique keys to manage"})]})]})]}),c.jsxs("div",{className:"bg-gray-50 px-6 py-4 rounded-b-2xl flex items-center justify-end gap-3",children:[c.jsx("button",{onClick:()=>{se(!1),ve(""),he(5)},className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Cancel"}),c.jsx("button",{onClick:te,disabled:A||!ge.trim()||_e.length<2,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg font-semibold flex items-center gap-2",children:A?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Creating..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Tm,{size:18}),"Create KA Group"]})})]})]})})]})},km=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n})=>{const{mkProject:i,hierarchies:s,assignments:a,standard:o,validateDesign:l}=tl(),[u,h]=we.useState(null),[f,p]=we.useState(!1),d=(i==null?void 0:i.facilityType)||"Commercial Office";we.useEffect(()=>{v()},[]);const v=async()=>{p(!0);try{const E=await l(r,d);h(E)}catch(E){console.error("Validation error:",E),n&&await n("Validation Failed",`Validation failed: ${E.message}`)}finally{p(!1)}},y=r.length,_=r.filter(E=>a.some(k=>k.doorId===E.id)).length,w=s.length,S=(i==null?void 0:i.differsUsed)||0,C=(i==null?void 0:i.maxDiffersAvailable)||0,j=C-S,q=(i==null?void 0:i.totalPhysicalKeys)||0,G=(i==null?void 0:i.totalCylinders)||0;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:c.jsx(Ya,{className:"w-8 h-8 text-indigo-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Design Validation"}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Review your master key system design for errors and standards compliance."})]}),u&&c.jsx("div",{className:`border-2 rounded-xl p-6 ${u.isValid?"bg-emerald-50 border-emerald-300":"bg-amber-50 border-amber-300"}`,children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`flex-shrink-0 w-16 h-16 rounded-full flex items-center justify-center ${u.isValid?"bg-emerald-100":"bg-amber-100"}`,children:u.isValid?c.jsx(Ya,{className:"w-8 h-8 text-emerald-600"}):c.jsx(xo,{className:"w-8 h-8 text-amber-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-2xl font-bold mb-1 ${u.isValid?"text-emerald-900":"text-amber-900"}`,children:u.isValid?"Design Ready!":"Action Required"}),c.jsx("div",{className:`text-sm ${u.isValid?"text-emerald-700":"text-amber-700"}`,children:u.isValid?"Your master key system is complete and ready to export.":"Please address the items below before proceeding."})]}),c.jsxs("button",{onClick:v,disabled:f,className:"flex-shrink-0 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2 font-semibold",children:[c.jsx(h0,{size:16,className:f?"animate-spin":""}),"Re-validate"]})]})}),c.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:c.jsx(Ip,{size:20,className:"text-blue-600"})}),c.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Total Doors"})]}),c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:y})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:c.jsx(Ya,{size:20,className:"text-emerald-600"})}),c.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Assigned"})]}),c.jsx("div",{className:"text-3xl font-bold text-emerald-600",children:_}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[y>0?Math.round(_/y*100):0,"% Complete"]})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:c.jsx(ud,{size:20,className:"text-purple-600"})}),c.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Unique Keys"})]}),c.jsx("div",{className:"text-3xl font-bold text-purple-600",children:S}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["of ",C.toLocaleString()," available"]})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:c.jsx(nI,{size:20,className:"text-orange-600"})}),c.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Cylinders"})]}),c.jsx("div",{className:"text-3xl font-bold text-orange-600",children:G}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[q," keys to cut"]})]})]}),c.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"System Capacity"}),c.jsxs("div",{className:"mb-4",children:[S<=100&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-6xl mb-2",children:""}),c.jsx("div",{className:"text-2xl font-bold text-emerald-600 mb-2",children:"Excellent"}),c.jsxs("div",{className:"text-lg text-gray-700 mb-4",children:["Very High Capacity  ",j.toLocaleString()," keys available"]}),c.jsx("div",{className:"max-w-md mx-auto bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:c.jsxs("div",{className:"text-sm text-emerald-800 space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Unique Keys:"}),c.jsxs("strong",{children:[S," of ",C.toLocaleString()]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Physical Keys:"}),c.jsxs("strong",{children:[q," to manufacture"]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Cylinders:"}),c.jsxs("strong",{children:[G," in system"]})]})]})})]}),S>100&&S<=500&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-6xl mb-2",children:""}),c.jsx("div",{className:"text-2xl font-bold text-yellow-600 mb-1",children:"Good"}),c.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:[S," unique keys | Capacity: High"]}),c.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[c.jsxs("div",{children:[c.jsxs("strong",{children:[q," physical keys"]})," to manufacture"]}),c.jsxs("div",{children:[c.jsxs("strong",{children:[G," cylinders"]})," in system"]}),c.jsx("div",{className:"mt-2 text-gray-500",children:"System is performing well with room for expansion"})]})]}),S>500&&S<=1e3&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-6xl mb-2",children:""}),c.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:"Consult Locksmith"}),c.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:[S," unique keys | Capacity: Moderate"]}),c.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[c.jsxs("div",{children:[c.jsxs("strong",{children:[q," physical keys"]})," to manufacture"]}),c.jsxs("div",{children:[c.jsxs("strong",{children:[G," cylinders"]})," in system"]}),c.jsx("div",{className:"mt-2 text-orange-600",children:"Consider reviewing system design with a professional locksmith"})]})]}),S>1e3&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-6xl mb-2",children:""}),c.jsx("div",{className:"text-2xl font-bold text-red-600 mb-1",children:"At Capacity"}),c.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:[S," unique keys | Capacity: Critical"]}),c.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[c.jsxs("div",{children:[c.jsxs("strong",{children:[q," physical keys"]})," to manufacture"]}),c.jsxs("div",{children:[c.jsxs("strong",{children:[G," cylinders"]})," in system"]}),c.jsx("div",{className:"mt-2 text-red-600 font-semibold",children:"System approaching maximum capacity - professional review required"})]})]})]})]})}),u&&u.errors.length>0&&c.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[c.jsx(xo,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-bold text-red-900 text-lg mb-1",children:["Issues to Resolve (",u.errors.length,")"]}),c.jsx("p",{className:"text-sm text-red-700",children:"Please address these issues before exporting your design."})]})]}),c.jsx("div",{className:"space-y-3",children:u.errors.map((E,k)=>c.jsx("div",{className:"bg-white border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-red-600 font-bold text-sm",children:k+1})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-red-900 mb-1",children:E.message}),E.details&&c.jsx("div",{className:"text-sm text-red-700",children:E.details}),E.count&&c.jsxs("div",{className:"text-sm text-red-700 mt-1",children:["Affected items: ",c.jsx("strong",{children:E.count})]}),E.type==="unassigned_doors"&&c.jsx("div",{className:"mt-2",children:c.jsx("button",{onClick:e,className:"text-sm text-red-700 hover:text-red-900 font-semibold underline",children:" Go to Step 4 to assign remaining doors"})})]})]})},k))})]}),u&&u.warnings.length>0&&c.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[c.jsx(Qh,{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-bold text-amber-900 text-lg mb-1",children:["Recommendations (",u.warnings.length,")"]}),c.jsx("p",{className:"text-sm text-amber-700",children:"These are suggestions to improve your design (optional)."})]})]}),c.jsx("div",{className:"space-y-3",children:u.warnings.map((E,k)=>c.jsx("div",{className:"bg-white border border-amber-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Qh,{className:"flex-shrink-0 text-amber-600 mt-0.5",size:20}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-medium text-amber-900",children:E.message}),E.current!==void 0&&c.jsxs("div",{className:"text-sm text-amber-700 mt-1",children:["Current: ",E.current,E.recommended&&`  Recommended: ${E.recommended}`]})]})]})},k))})]}),u&&u.isValid&&c.jsx("div",{className:"bg-emerald-50 border-2 border-emerald-200 rounded-xl p-6",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx(Ya,{className:"flex-shrink-0 text-emerald-600 mt-0.5",size:28}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-emerald-900 text-xl mb-2",children:" All Systems Go!"}),c.jsx("div",{className:"text-emerald-800 mb-4",children:"Your master key system design is complete and meets all requirements. You're ready to export your keying schedule."}),c.jsxs("ul",{className:"text-sm text-emerald-800 space-y-1.5",children:[c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-600 rounded-full"}),"All ",y," doors have been assigned"]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-600 rounded-full"}),w," hierarchy levels configured"]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-600 rounded-full"}),S," unique keys within capacity limits"]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-600 rounded-full"}),G," cylinders ready for installation"]})]}),c.jsx("div",{className:"mt-4 pt-4 border-t border-emerald-300",children:c.jsx("button",{onClick:t,className:"px-6 py-3 bg-emerald-600 text-white rounded-lg font-semibold hover:bg-emerald-700 transition-colors shadow-md",children:"Proceed to Export "})})]})]})})]})};function gn(t){"@babel/helpers - typeof";return gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(t)}var To=Uint8Array,Ea=Uint16Array,k_=Int32Array,C_=new To([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),I_=new To([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),q3=new To([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),uI=function(t,e){for(var r=new Ea(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new k_(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return{b:r,r:i}},hI=uI(C_,2),KV=hI.b,pw=hI.r;KV[28]=258,pw[258]=28;var YV=uI(I_,0),$3=YV.r,mw=new Ea(32768);for(var Bn=0;Bn<32768;++Bn){var cc=(Bn&43690)>>1|(Bn&21845)<<1;cc=(cc&52428)>>2|(cc&13107)<<2,cc=(cc&61680)>>4|(cc&3855)<<4,mw[Bn]=((cc&65280)>>8|(cc&255)<<8)>>1}var f0=function(t,e,r){for(var n=t.length,i=0,s=new Ea(e);i<n;++i)t[i]&&++s[t[i]-1];var a=new Ea(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(r){o=new Ea(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var u=i<<4|t[i],h=e-t[i],f=a[t[i]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)o[mw[f]>>l]=u}else for(o=new Ea(n),i=0;i<n;++i)t[i]&&(o[i]=mw[a[t[i]-1]++]>>15-t[i]);return o},Xu=new To(288);for(var Bn=0;Bn<144;++Bn)Xu[Bn]=8;for(var Bn=144;Bn<256;++Bn)Xu[Bn]=9;for(var Bn=256;Bn<280;++Bn)Xu[Bn]=7;for(var Bn=280;Bn<288;++Bn)Xu[Bn]=8;var N1=new To(32);for(var Bn=0;Bn<32;++Bn)N1[Bn]=5;var XV=f0(Xu,9,0),QV=f0(N1,5,0),dI=function(t){return(t+7)/8|0},JV=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new To(t.subarray(e,r))},hl=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Rf=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},oy=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,s=r.slice();if(!i)return{t:pI,l:0};if(i==1){var a=new To(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(q,G){return q.f-G.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],u=0,h=1,f=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};h!=i-1;)o=r[r[u].f<r[f].f?u++:f++],l=r[u!=h&&r[u].f<r[f].f?u++:f++],r[h++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=s[0].s,n=1;n<i;++n)s[n].s>p&&(p=s[n].s);var d=new Ea(p+1),v=gw(r[h-1],d,0);if(v>e){var n=0,y=0,_=v-e,w=1<<_;for(s.sort(function(G,E){return d[E.s]-d[G.s]||G.f-E.f});n<i;++n){var S=s[n].s;if(d[S]>e)y+=w-(1<<v-d[S]),d[S]=e;else break}for(y>>=_;y>0;){var C=s[n].s;d[C]<e?y-=1<<e-d[C]++-1:++n}for(;n>=0&&y;--n){var j=s[n].s;d[j]==e&&(--d[j],++y)}v=e}return{t:new To(d),l:v}},gw=function(t,e,r){return t.s==-1?Math.max(gw(t.l,e,r+1),gw(t.r,e,r+1)):e[t.s]=r},W3=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Ea(++e),n=0,i=t[0],s=1,a=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[o]}return{c:r.subarray(0,n),n:e}},jf=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},fI=function(t,e,r){var n=r.length,i=dI(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<n;++s)t[i+s+4]=r[s];return(i+4+n)*8},G3=function(t,e,r,n,i,s,a,o,l,u,h){hl(e,h++,r),++i[256];for(var f=oy(i,15),p=f.t,d=f.l,v=oy(s,15),y=v.t,_=v.l,w=W3(p),S=w.c,C=w.n,j=W3(y),q=j.c,G=j.n,E=new Ea(19),k=0;k<S.length;++k)++E[S[k]&31];for(var k=0;k<q.length;++k)++E[q[k]&31];for(var A=oy(E,7),D=A.t,N=A.l,R=19;R>4&&!D[q3[R-1]];--R);var L=u+5<<3,se=jf(i,Xu)+jf(s,N1)+a,ge=jf(i,p)+jf(s,y)+a+14+3*R+jf(E,D)+2*E[16]+3*E[17]+7*E[18];if(l>=0&&L<=se&&L<=ge)return fI(e,h,t.subarray(l,l+u));var ve,ye,he,_e;if(hl(e,h,1+(ge<se)),h+=2,ge<se){ve=f0(p,d,0),ye=p,he=f0(y,_,0),_e=y;var Ue=f0(D,N,0);hl(e,h,C-257),hl(e,h+5,G-1),hl(e,h+10,R-4),h+=14;for(var k=0;k<R;++k)hl(e,h+3*k,D[q3[k]]);h+=3*R;for(var Ie=[S,q],P=0;P<2;++P)for(var O=Ie[P],k=0;k<O.length;++k){var B=O[k]&31;hl(e,h,Ue[B]),h+=D[B],B>15&&(hl(e,h,O[k]>>5&127),h+=O[k]>>12)}}else ve=XV,ye=Xu,he=QV,_e=N1;for(var k=0;k<o;++k){var z=n[k];if(z>255){var B=z>>18&31;Rf(e,h,ve[B+257]),h+=ye[B+257],B>7&&(hl(e,h,z>>23&31),h+=C_[B]);var Z=z&31;Rf(e,h,he[Z]),h+=_e[Z],Z>3&&(Rf(e,h,z>>5&8191),h+=I_[Z])}else Rf(e,h,ve[z]),h+=ye[z]}return Rf(e,h,ve[256]),h+ye[256]},ZV=new k_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),pI=new To(0),ez=function(t,e,r,n,i,s){var a=s.z||t.length,o=new To(n+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(n,o.length-i),u=s.l,h=(s.r||0)&7;if(e){h&&(l[0]=s.r>>3);for(var f=ZV[e-1],p=f>>13,d=f&8191,v=(1<<r)-1,y=s.p||new Ea(32768),_=s.h||new Ea(v+1),w=Math.ceil(r/3),S=2*w,C=function(mt){return(t[mt]^t[mt+1]<<w^t[mt+2]<<S)&v},j=new k_(25e3),q=new Ea(288),G=new Ea(32),E=0,k=0,A=s.i||0,D=0,N=s.w||0,R=0;A+2<a;++A){var L=C(A),se=A&32767,ge=_[L];if(y[se]=ge,_[L]=se,N<=A){var ve=a-A;if((E>7e3||D>24576)&&(ve>423||!u)){h=G3(t,l,0,j,q,G,k,D,R,A-R,h),D=E=k=0,R=A;for(var ye=0;ye<286;++ye)q[ye]=0;for(var ye=0;ye<30;++ye)G[ye]=0}var he=2,_e=0,Ue=d,Ie=se-ge&32767;if(ve>2&&L==C(A-Ie))for(var P=Math.min(p,ve)-1,O=Math.min(32767,A),B=Math.min(258,ve);Ie<=O&&--Ue&&se!=ge;){if(t[A+he]==t[A+he-Ie]){for(var z=0;z<B&&t[A+z]==t[A+z-Ie];++z);if(z>he){if(he=z,_e=Ie,z>P)break;for(var Z=Math.min(Ie,z-2),de=0,ye=0;ye<Z;++ye){var Se=A-Ie+ye&32767,Ae=y[Se],Ne=Se-Ae&32767;Ne>de&&(de=Ne,ge=Se)}}}se=ge,ge=y[se],Ie+=se-ge&32767}if(_e){j[D++]=268435456|pw[he]<<18|$3[_e];var Xe=pw[he]&31,et=$3[_e]&31;k+=C_[Xe]+I_[et],++q[257+Xe],++G[et],N=A+he,++E}else j[D++]=t[A],++q[t[A]]}}for(A=Math.max(A,N);A<a;++A)j[D++]=t[A],++q[t[A]];h=G3(t,l,u,j,q,G,k,D,R,A-R,h),u||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=_,s.p=y,s.i=A,s.w=N)}else{for(var A=s.w||0;A<a+u;A+=65535){var ot=A+65535;ot>=a&&(l[h/8|0]=u,ot=a),h=fI(l,h+1,t.subarray(A,ot))}s.i=a}return JV(o,0,n+dI(h)+i)},mI=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,s=r.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=n+=r[a];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},tz=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new To(s.length+t.length);a.set(s),a.set(t,s.length),t=a,i.w=s.length}return ez(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},gI=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},rz=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=mI();i.p(e.dictionary),gI(t,2,i.d())}};function xw(t,e){e||(e={});var r=mI();r.p(t);var n=tz(t,e,e.dictionary?6:2,4);return rz(n,e),gI(n,n.length-4,r.d()),n}var nz=typeof TextDecoder<"u"&&new TextDecoder,iz=0;try{nz.decode(pI,{stream:!0}),iz=1}catch{}function sz(t){if(Array.isArray(t))return t}function az(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(h){u=!0,i=h}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function K3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function oz(t,e){if(t){if(typeof t=="string")return K3(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K3(t,e):void 0}}function lz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y3(t,e){return sz(t)||az(t,e)||oz(t,e)||lz()}function X3(t,e="utf8"){return new TextDecoder(e).decode(t)}const cz=new TextEncoder;function uz(t){return cz.encode(t)}const hz=1024*8,dz=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),ly={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class P_{constructor(e=hz,r={}){fn(this,"buffer");fn(this,"byteLength");fn(this,"byteOffset");fn(this,"length");fn(this,"offset");fn(this,"lastWrittenByte");fn(this,"littleEndian");fn(this,"_data");fn(this,"_mark");fn(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=r.offset?r.offset>>>0:0,s=e.byteLength-i;let a=i;(ArrayBuffer.isView(e)||e instanceof P_)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=ly[r].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===dz&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const l=new ly[r](o.buffer);return this.offset+=n,l.reverse(),l}const a=new ly[r](s);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return X3(this.readBytes(e))}decodeText(e=1,r="utf8"){return X3(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(uz(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function tf(t){let e=t.length;for(;--e>=0;)t[e]=0}const fz=3,pz=258,xI=29,mz=256,gz=mz+1+xI,yI=30,xz=512,yz=new Array((gz+2)*2);tf(yz);const vz=new Array(yI*2);tf(vz);const wz=new Array(xz);tf(wz);const _z=new Array(pz-fz+1);tf(_z);const bz=new Array(xI);tf(bz);const Sz=new Array(yI);tf(Sz);const Az=(t,e,r,n)=>{let i=t&65535|0,s=t>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do i=i+e[n++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0};var yw=Az;const Ez=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},Nz=new Uint32Array(Ez()),Tz=(t,e,r,n)=>{const i=Nz,s=n+r;t^=-1;for(let a=n;a<s;a++)t=t>>>8^i[(t^e[a])&255];return t^-1};var Fo=Tz,vw={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},vI={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const kz=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Cz=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)kz(r,n)&&(t[n]=r[n])}}return t},Iz=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,i=0,s=t.length;n<s;n++){let a=t[n];r.set(a,i),i+=a.length}return r},wI={assign:Cz,flattenChunks:Iz};let _I=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_I=!1}const J0=new Uint8Array(256);for(let t=0;t<256;t++)J0[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;J0[254]=J0[254]=1;var Pz=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,i,s,a=t.length,o=0;for(i=0;i<a;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),s=0,i=0;s<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const Lz=(t,e)=>{if(e<65534&&t.subarray&&_I)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var Rz=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,i;const s=new Array(r*2);for(i=0,n=0;n<r;){let a=t[n++];if(a<128){s[i++]=a;continue}let o=J0[a];if(o>4){s[i++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<r;)a=a<<6|t[n++]&63,o--;if(o>1){s[i++]=65533;continue}a<65536?s[i++]=a:(a-=65536,s[i++]=55296|a>>10&1023,s[i++]=56320|a&1023)}return Lz(s,i)},jz=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+J0[t[r]]>e?r:e},ww={string2buf:Pz,buf2string:Rz,utf8border:jz};function Fz(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Dz=Fz;const Cm=16209,Mz=16191;var Oz=function(e,r){let n,i,s,a,o,l,u,h,f,p,d,v,y,_,w,S,C,j,q,G,E,k,A,D;const N=e.state;n=e.next_in,A=e.input,i=n+(e.avail_in-5),s=e.next_out,D=e.output,a=s-(r-e.avail_out),o=s+(e.avail_out-257),l=N.dmax,u=N.wsize,h=N.whave,f=N.wnext,p=N.window,d=N.hold,v=N.bits,y=N.lencode,_=N.distcode,w=(1<<N.lenbits)-1,S=(1<<N.distbits)-1;e:do{v<15&&(d+=A[n++]<<v,v+=8,d+=A[n++]<<v,v+=8),C=y[d&w];t:for(;;){if(j=C>>>24,d>>>=j,v-=j,j=C>>>16&255,j===0)D[s++]=C&65535;else if(j&16){q=C&65535,j&=15,j&&(v<j&&(d+=A[n++]<<v,v+=8),q+=d&(1<<j)-1,d>>>=j,v-=j),v<15&&(d+=A[n++]<<v,v+=8,d+=A[n++]<<v,v+=8),C=_[d&S];r:for(;;){if(j=C>>>24,d>>>=j,v-=j,j=C>>>16&255,j&16){if(G=C&65535,j&=15,v<j&&(d+=A[n++]<<v,v+=8,v<j&&(d+=A[n++]<<v,v+=8)),G+=d&(1<<j)-1,G>l){e.msg="invalid distance too far back",N.mode=Cm;break e}if(d>>>=j,v-=j,j=s-a,G>j){if(j=G-j,j>h&&N.sane){e.msg="invalid distance too far back",N.mode=Cm;break e}if(E=0,k=p,f===0){if(E+=u-j,j<q){q-=j;do D[s++]=p[E++];while(--j);E=s-G,k=D}}else if(f<j){if(E+=u+f-j,j-=f,j<q){q-=j;do D[s++]=p[E++];while(--j);if(E=0,f<q){j=f,q-=j;do D[s++]=p[E++];while(--j);E=s-G,k=D}}}else if(E+=f-j,j<q){q-=j;do D[s++]=p[E++];while(--j);E=s-G,k=D}for(;q>2;)D[s++]=k[E++],D[s++]=k[E++],D[s++]=k[E++],q-=3;q&&(D[s++]=k[E++],q>1&&(D[s++]=k[E++]))}else{E=s-G;do D[s++]=D[E++],D[s++]=D[E++],D[s++]=D[E++],q-=3;while(q>2);q&&(D[s++]=D[E++],q>1&&(D[s++]=D[E++]))}}else if(j&64){e.msg="invalid distance code",N.mode=Cm;break e}else{C=_[(C&65535)+(d&(1<<j)-1)];continue r}break}}else if(j&64)if(j&32){N.mode=Mz;break e}else{e.msg="invalid literal/length code",N.mode=Cm;break e}else{C=y[(C&65535)+(d&(1<<j)-1)];continue t}break}}while(n<i&&s<o);q=v>>3,n-=q,v-=q<<3,d&=(1<<v)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<o?257+(o-s):257-(s-o),N.hold=d,N.bits=v};const yh=15,Q3=852,J3=592,Z3=0,cy=1,eA=2,Bz=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Uz=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Vz=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),zz=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Hz=(t,e,r,n,i,s,a,o)=>{const l=o.bits;let u=0,h=0,f=0,p=0,d=0,v=0,y=0,_=0,w=0,S=0,C,j,q,G,E,k=null,A;const D=new Uint16Array(yh+1),N=new Uint16Array(yh+1);let R=null,L,se,ge;for(u=0;u<=yh;u++)D[u]=0;for(h=0;h<n;h++)D[e[r+h]]++;for(d=l,p=yh;p>=1&&D[p]===0;p--);if(d>p&&(d=p),p===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<p&&D[f]===0;f++);for(d<f&&(d=f),_=1,u=1;u<=yh;u++)if(_<<=1,_-=D[u],_<0)return-1;if(_>0&&(t===Z3||p!==1))return-1;for(N[1]=0,u=1;u<yh;u++)N[u+1]=N[u]+D[u];for(h=0;h<n;h++)e[r+h]!==0&&(a[N[e[r+h]]++]=h);if(t===Z3?(k=R=a,A=20):t===cy?(k=Bz,R=Uz,A=257):(k=Vz,R=zz,A=0),S=0,h=0,u=f,E=s,v=d,y=0,q=-1,w=1<<d,G=w-1,t===cy&&w>Q3||t===eA&&w>J3)return 1;for(;;){L=u-y,a[h]+1<A?(se=0,ge=a[h]):a[h]>=A?(se=R[a[h]-A],ge=k[a[h]-A]):(se=96,ge=0),C=1<<u-y,j=1<<v,f=j;do j-=C,i[E+(S>>y)+j]=L<<24|se<<16|ge|0;while(j!==0);for(C=1<<u-1;S&C;)C>>=1;if(C!==0?(S&=C-1,S+=C):S=0,h++,--D[u]===0){if(u===p)break;u=e[r+a[h]]}if(u>d&&(S&G)!==q){for(y===0&&(y=d),E+=f,v=u-y,_=1<<v;v+y<p&&(_-=D[v+y],!(_<=0));)v++,_<<=1;if(w+=1<<v,t===cy&&w>Q3||t===eA&&w>J3)return 1;q=S&G,i[q]=d<<24|v<<16|E-s|0}}return S!==0&&(i[E+S]=u-y<<24|64<<16|0),o.bits=d,0};var p0=Hz;const qz=0,bI=1,SI=2,{Z_FINISH:tA,Z_BLOCK:$z,Z_TREES:Im,Z_OK:Qu,Z_STREAM_END:Wz,Z_NEED_DICT:Gz,Z_STREAM_ERROR:Za,Z_DATA_ERROR:AI,Z_MEM_ERROR:EI,Z_BUF_ERROR:Kz,Z_DEFLATED:rA}=vI,B2=16180,nA=16181,iA=16182,sA=16183,aA=16184,oA=16185,lA=16186,cA=16187,uA=16188,hA=16189,T1=16190,dl=16191,uy=16192,dA=16193,hy=16194,fA=16195,pA=16196,mA=16197,gA=16198,Pm=16199,Lm=16200,xA=16201,yA=16202,vA=16203,wA=16204,_A=16205,dy=16206,bA=16207,SA=16208,zn=16209,NI=16210,TI=16211,Yz=852,Xz=592,Qz=15,Jz=Qz,AA=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function Zz(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const sh=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<B2||e.mode>TI?1:0},kI=t=>{if(sh(t))return Za;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=B2,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Yz),e.distcode=e.distdyn=new Int32Array(Xz),e.sane=1,e.back=-1,Qu},CI=t=>{if(sh(t))return Za;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,kI(t)},II=(t,e)=>{let r;if(sh(t))return Za;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Za:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,CI(t))},PI=(t,e)=>{if(!t)return Za;const r=new Zz;t.state=r,r.strm=t,r.window=null,r.mode=B2;const n=II(t,e);return n!==Qu&&(t.state=null),n},eH=t=>PI(t,Jz);let EA=!0,fy,py;const tH=t=>{if(EA){fy=new Int32Array(512),py=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(p0(bI,t.lens,0,288,fy,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;p0(SI,t.lens,0,32,py,0,t.work,{bits:5}),EA=!1}t.lencode=fy,t.lenbits=9,t.distcode=py,t.distbits=5},LI=(t,e,r,n)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(r-n,r-n+i),s.wnext),n-=i,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},rH=(t,e)=>{let r,n,i,s,a,o,l,u,h,f,p,d,v,y,_=0,w,S,C,j,q,G,E,k;const A=new Uint8Array(4);let D,N;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(sh(t)||!t.output||!t.input&&t.avail_in!==0)return Za;r=t.state,r.mode===dl&&(r.mode=uy),a=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,u=r.hold,h=r.bits,f=o,p=l,k=Qu;e:for(;;)switch(r.mode){case B2:if(r.wrap===0){r.mode=uy;break}for(;h<16;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,A[0]=u&255,A[1]=u>>>8&255,r.check=Fo(r.check,A,2,0),u=0,h=0,r.mode=nA;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=zn;break}if((u&15)!==rA){t.msg="unknown compression method",r.mode=zn;break}if(u>>>=4,h-=4,E=(u&15)+8,r.wbits===0&&(r.wbits=E),E>15||E>r.wbits){t.msg="invalid window size",r.mode=zn;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?hA:dl,u=0,h=0;break;case nA:for(;h<16;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(r.flags=u,(r.flags&255)!==rA){t.msg="unknown compression method",r.mode=zn;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=zn;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(A[0]=u&255,A[1]=u>>>8&255,r.check=Fo(r.check,A,2,0)),u=0,h=0,r.mode=iA;case iA:for(;h<32;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(A[0]=u&255,A[1]=u>>>8&255,A[2]=u>>>16&255,A[3]=u>>>24&255,r.check=Fo(r.check,A,4,0)),u=0,h=0,r.mode=sA;case sA:for(;h<16;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(A[0]=u&255,A[1]=u>>>8&255,r.check=Fo(r.check,A,2,0)),u=0,h=0,r.mode=aA;case aA:if(r.flags&1024){for(;h<16;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(A[0]=u&255,A[1]=u>>>8&255,r.check=Fo(r.check,A,2,0)),u=0,h=0}else r.head&&(r.head.extra=null);r.mode=oA;case oA:if(r.flags&1024&&(d=r.length,d>o&&(d=o),d&&(r.head&&(E=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+d),E)),r.flags&512&&r.wrap&4&&(r.check=Fo(r.check,n,d,s)),o-=d,s+=d,r.length-=d),r.length))break e;r.length=0,r.mode=lA;case lA:if(r.flags&2048){if(o===0)break e;d=0;do E=n[s+d++],r.head&&E&&r.length<65536&&(r.head.name+=String.fromCharCode(E));while(E&&d<o);if(r.flags&512&&r.wrap&4&&(r.check=Fo(r.check,n,d,s)),o-=d,s+=d,E)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=cA;case cA:if(r.flags&4096){if(o===0)break e;d=0;do E=n[s+d++],r.head&&E&&r.length<65536&&(r.head.comment+=String.fromCharCode(E));while(E&&d<o);if(r.flags&512&&r.wrap&4&&(r.check=Fo(r.check,n,d,s)),o-=d,s+=d,E)break e}else r.head&&(r.head.comment=null);r.mode=uA;case uA:if(r.flags&512){for(;h<16;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=zn;break}u=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=dl;break;case hA:for(;h<32;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}t.adler=r.check=AA(u),u=0,h=0,r.mode=T1;case T1:if(r.havedict===0)return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=h,Gz;t.adler=r.check=1,r.mode=dl;case dl:if(e===$z||e===Im)break e;case uy:if(r.last){u>>>=h&7,h-=h&7,r.mode=dy;break}for(;h<3;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}switch(r.last=u&1,u>>>=1,h-=1,u&3){case 0:r.mode=dA;break;case 1:if(tH(r),r.mode=Pm,e===Im){u>>>=2,h-=2;break e}break;case 2:r.mode=pA;break;case 3:t.msg="invalid block type",r.mode=zn}u>>>=2,h-=2;break;case dA:for(u>>>=h&7,h-=h&7;h<32;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=zn;break}if(r.length=u&65535,u=0,h=0,r.mode=hy,e===Im)break e;case hy:r.mode=fA;case fA:if(d=r.length,d){if(d>o&&(d=o),d>l&&(d=l),d===0)break e;i.set(n.subarray(s,s+d),a),o-=d,s+=d,l-=d,a+=d,r.length-=d;break}r.mode=dl;break;case pA:for(;h<14;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(r.nlen=(u&31)+257,u>>>=5,h-=5,r.ndist=(u&31)+1,u>>>=5,h-=5,r.ncode=(u&15)+4,u>>>=4,h-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=zn;break}r.have=0,r.mode=mA;case mA:for(;r.have<r.ncode;){for(;h<3;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}r.lens[R[r.have++]]=u&7,u>>>=3,h-=3}for(;r.have<19;)r.lens[R[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,D={bits:r.lenbits},k=p0(qz,r.lens,0,19,r.lencode,0,r.work,D),r.lenbits=D.bits,k){t.msg="invalid code lengths set",r.mode=zn;break}r.have=0,r.mode=gA;case gA:for(;r.have<r.nlen+r.ndist;){for(;_=r.lencode[u&(1<<r.lenbits)-1],w=_>>>24,S=_>>>16&255,C=_&65535,!(w<=h);){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(C<16)u>>>=w,h-=w,r.lens[r.have++]=C;else{if(C===16){for(N=w+2;h<N;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(u>>>=w,h-=w,r.have===0){t.msg="invalid bit length repeat",r.mode=zn;break}E=r.lens[r.have-1],d=3+(u&3),u>>>=2,h-=2}else if(C===17){for(N=w+3;h<N;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}u>>>=w,h-=w,E=0,d=3+(u&7),u>>>=3,h-=3}else{for(N=w+7;h<N;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}u>>>=w,h-=w,E=0,d=11+(u&127),u>>>=7,h-=7}if(r.have+d>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=zn;break}for(;d--;)r.lens[r.have++]=E}}if(r.mode===zn)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=zn;break}if(r.lenbits=9,D={bits:r.lenbits},k=p0(bI,r.lens,0,r.nlen,r.lencode,0,r.work,D),r.lenbits=D.bits,k){t.msg="invalid literal/lengths set",r.mode=zn;break}if(r.distbits=6,r.distcode=r.distdyn,D={bits:r.distbits},k=p0(SI,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,D),r.distbits=D.bits,k){t.msg="invalid distances set",r.mode=zn;break}if(r.mode=Pm,e===Im)break e;case Pm:r.mode=Lm;case Lm:if(o>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=h,Oz(t,p),a=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,u=r.hold,h=r.bits,r.mode===dl&&(r.back=-1);break}for(r.back=0;_=r.lencode[u&(1<<r.lenbits)-1],w=_>>>24,S=_>>>16&255,C=_&65535,!(w<=h);){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(S&&!(S&240)){for(j=w,q=S,G=C;_=r.lencode[G+((u&(1<<j+q)-1)>>j)],w=_>>>24,S=_>>>16&255,C=_&65535,!(j+w<=h);){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}u>>>=j,h-=j,r.back+=j}if(u>>>=w,h-=w,r.back+=w,r.length=C,S===0){r.mode=_A;break}if(S&32){r.back=-1,r.mode=dl;break}if(S&64){t.msg="invalid literal/length code",r.mode=zn;break}r.extra=S&15,r.mode=xA;case xA:if(r.extra){for(N=r.extra;h<N;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=yA;case yA:for(;_=r.distcode[u&(1<<r.distbits)-1],w=_>>>24,S=_>>>16&255,C=_&65535,!(w<=h);){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(!(S&240)){for(j=w,q=S,G=C;_=r.distcode[G+((u&(1<<j+q)-1)>>j)],w=_>>>24,S=_>>>16&255,C=_&65535,!(j+w<=h);){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}u>>>=j,h-=j,r.back+=j}if(u>>>=w,h-=w,r.back+=w,S&64){t.msg="invalid distance code",r.mode=zn;break}r.offset=C,r.extra=S&15,r.mode=vA;case vA:if(r.extra){for(N=r.extra;h<N;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=zn;break}r.mode=wA;case wA:if(l===0)break e;if(d=p-l,r.offset>d){if(d=r.offset-d,d>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=zn;break}d>r.wnext?(d-=r.wnext,v=r.wsize-d):v=r.wnext-d,d>r.length&&(d=r.length),y=r.window}else y=i,v=a-r.offset,d=r.length;d>l&&(d=l),l-=d,r.length-=d;do i[a++]=y[v++];while(--d);r.length===0&&(r.mode=Lm);break;case _A:if(l===0)break e;i[a++]=r.length,l--,r.mode=Lm;break;case dy:if(r.wrap){for(;h<32;){if(o===0)break e;o--,u|=n[s++]<<h,h+=8}if(p-=l,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?Fo(r.check,i,p,a-p):yw(r.check,i,p,a-p)),p=l,r.wrap&4&&(r.flags?u:AA(u))!==r.check){t.msg="incorrect data check",r.mode=zn;break}u=0,h=0}r.mode=bA;case bA:if(r.wrap&&r.flags){for(;h<32;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=zn;break}u=0,h=0}r.mode=SA;case SA:k=Wz;break e;case zn:k=AI;break e;case NI:return EI;case TI:default:return Za}return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=h,(r.wsize||p!==t.avail_out&&r.mode<zn&&(r.mode<dy||e!==tA))&&LI(t,t.output,t.next_out,p-t.avail_out),f-=t.avail_in,p-=t.avail_out,t.total_in+=f,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?Fo(r.check,i,p,t.next_out-p):yw(r.check,i,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===dl?128:0)+(r.mode===Pm||r.mode===hy?256:0),(f===0&&p===0||e===tA)&&k===Qu&&(k=Kz),k},nH=t=>{if(sh(t))return Za;let e=t.state;return e.window&&(e.window=null),t.state=null,Qu},iH=(t,e)=>{if(sh(t))return Za;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Qu):Za},sH=(t,e)=>{const r=e.length;let n,i,s;return sh(t)||(n=t.state,n.wrap!==0&&n.mode!==T1)?Za:n.mode===T1&&(i=1,i=yw(i,e,r,0),i!==n.check)?AI:(s=LI(t,e,r,r),s?(n.mode=NI,EI):(n.havedict=1,Qu))};var aH=CI,oH=II,lH=kI,cH=eH,uH=PI,hH=rH,dH=nH,fH=iH,pH=sH,mH="pako inflate (from Nodeca project)",gl={inflateReset:aH,inflateReset2:oH,inflateResetKeep:lH,inflateInit:cH,inflateInit2:uH,inflate:hH,inflateEnd:dH,inflateGetHeader:fH,inflateSetDictionary:pH,inflateInfo:mH};function gH(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var xH=gH;const RI=Object.prototype.toString,{Z_NO_FLUSH:yH,Z_FINISH:vH,Z_OK:Z0,Z_STREAM_END:my,Z_NEED_DICT:gy,Z_STREAM_ERROR:wH,Z_DATA_ERROR:NA,Z_MEM_ERROR:_H}=vI;function Pp(t){this.options=wI.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Dz,this.strm.avail_out=0;let r=gl.inflateInit2(this.strm,e.windowBits);if(r!==Z0)throw new Error(vw[r]);if(this.header=new xH,gl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=ww.string2buf(e.dictionary):RI.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=gl.inflateSetDictionary(this.strm,e.dictionary),r!==Z0)))throw new Error(vw[r])}Pp.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?vH:yH,RI.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=gl.inflate(r,a),s===gy&&i&&(s=gl.inflateSetDictionary(r,i),s===Z0?s=gl.inflate(r,a):s===NA&&(s=gy));r.avail_in>0&&s===my&&r.state.wrap>0&&t[r.next_in]!==0;)gl.inflateReset(r),s=gl.inflate(r,a);switch(s){case wH:case NA:case gy:case _H:return this.onEnd(s),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||s===my))if(this.options.to==="string"){let l=ww.utf8border(r.output,r.next_out),u=r.next_out-l,h=ww.buf2string(r.output,l);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(l,l+u),0),this.onData(h)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===Z0&&o===0)){if(s===my)return s=gl.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Pp.prototype.onData=function(t){this.chunks.push(t)};Pp.prototype.onEnd=function(t){t===Z0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=wI.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function bH(t,e){const r=new Pp(e);if(r.push(t),r.err)throw r.msg||vw[r.err];return r.result}var SH=Pp,AH=bH,EH={Inflate:SH,inflate:AH};const{Inflate:NH,inflate:TH}=EH;var TA=NH,kH=TH;const jI=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;jI[t]=e}const kA=4294967295;function CH(t,e,r){let n=t;for(let i=0;i<r;i++)n=jI[(n^e[i])&255]^n>>>8;return n}function IH(t,e){return(CH(kA,t,e)^kA)>>>0}function CA(t,e,r){const n=t.readUint32(),i=IH(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function FI(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function DI(t,e,r,n){let i=0;for(;i<n;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-n]&255}function MI(t,e,r,n){let i=0;if(r.length===0)for(;i<n;i++)e[i]=t[i];else for(;i<n;i++)e[i]=t[i]+r[i]&255}function OI(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-i]+r[s]>>1)&255}}function BI(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+PH(e[s-i],r[s],r[s-i])&255}}function PH(t,e,r){const n=t+e-r,i=Math.abs(n-t),s=Math.abs(n-e),a=Math.abs(n-r);return i<=s&&i<=a?t:s<=a?e:r}function LH(t,e,r,n,i,s){switch(t){case 0:FI(e,r,i);break;case 1:DI(e,r,i,s);break;case 2:MI(e,r,n,i);break;case 3:OI(e,r,n,i,s);break;case 4:BI(e,r,n,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const RH=new Uint16Array([255]),jH=new Uint8Array(RH.buffer),FH=jH[0]===255;function DH(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*i,l=new Uint8Array(n*r*o);let u=0;for(let h=0;h<7;h++){const f=a[h],p=Math.ceil((r-f.x)/f.xStep),d=Math.ceil((n-f.y)/f.yStep);if(p<=0||d<=0)continue;const v=p*o,y=new Uint8Array(v);for(let _=0;_<d;_++){const w=e[u++],S=e.subarray(u,u+v);u+=v;const C=new Uint8Array(v);LH(w,S,C,y,v,o),y.set(C);for(let j=0;j<p;j++){const q=f.x+j*f.xStep,G=f.y+_*f.yStep;if(!(q>=r||G>=n))for(let E=0;E<o;E++)l[(G*r+q)*o+E]=C[j*o+E]}}}if(s===16){const h=new Uint16Array(l.buffer);if(FH)for(let f=0;f<h.length;f++)h[f]=MH(h[f]);return h}else return l}function MH(t){return(t&255)<<8|t>>8&255}const OH=new Uint16Array([255]),BH=new Uint8Array(OH.buffer),UH=BH[0]===255,VH=new Uint8Array(0);function IA(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,a=Math.ceil(s/8)*i,o=Math.ceil(s/8*i*r),l=new Uint8Array(n*o);let u=VH,h=0,f,p;for(let d=0;d<n;d++){switch(f=e.subarray(h+1,h+1+o),p=l.subarray(d*o,(d+1)*o),e[h]){case 0:FI(f,p,o);break;case 1:DI(f,p,o,a);break;case 2:MI(f,p,u,o);break;case 3:OI(f,p,u,o,a);break;case 4:BI(f,p,u,o,a);break;default:throw new Error(`Unsupported filter: ${e[h]}`)}u=p,h+=o+1}if(s===16){const d=new Uint16Array(l.buffer);if(UH)for(let v=0;v<d.length;v++)d[v]=zH(d[v]);return d}else return l}function zH(t){return(t&255)<<8|t>>8&255}const Sg=Uint8Array.of(137,80,78,71,13,10,26,10);function PA(t){if(!HH(t.readBytes(Sg.length)))throw new Error("wrong PNG signature")}function HH(t){if(t.length<Sg.length)return!1;for(let e=0;e<Sg.length;e++)if(t[e]!==Sg[e])return!1;return!0}const qH="tEXt",$H=0,UI=new TextDecoder("latin1");function WH(t){if(KH(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const GH=/^[\u0000-\u00FF]*$/;function KH(t){if(!GH.test(t))throw new Error("invalid latin1 text")}function YH(t,e,r){const n=VI(e);t[n]=XH(e,r-n.length-1)}function VI(t){for(t.mark();t.readByte()!==$H;);const e=t.offset;t.reset();const r=UI.decode(t.readBytes(e-t.offset-1));return t.skip(1),WH(r),r}function XH(t,e){return UI.decode(t.readBytes(e))}const ma={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},xy={UNKNOWN:-1,DEFLATE:0},LA={UNKNOWN:-1,ADAPTIVE:0},yy={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Rm={NONE:0,BACKGROUND:1,PREVIOUS:2},vy={SOURCE:0,OVER:1};class QH extends P_{constructor(r,n={}){super(r);fn(this,"_checkCrc");fn(this,"_inflator");fn(this,"_png");fn(this,"_apng");fn(this,"_end");fn(this,"_hasPalette");fn(this,"_palette");fn(this,"_hasTransparency");fn(this,"_transparency");fn(this,"_compressionMethod");fn(this,"_filterMethod");fn(this,"_interlaceMethod");fn(this,"_colorType");fn(this,"_isAnimated");fn(this,"_numberOfFrames");fn(this,"_numberOfPlays");fn(this,"_frames");fn(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new TA,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=xy.UNKNOWN,this._filterMethod=LA.UNKNOWN,this._interlaceMethod=yy.UNKNOWN,this._colorType=ma.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(PA(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(PA(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case qH:YH(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?CA(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=i+r;break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?CA(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=JH(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case ma.GREYSCALE:i=1;break;case ma.TRUECOLOUR:i=3;break;case ma.INDEXED_COLOUR:i=1;break;case ma.GREYSCALE_ALPHA:i=2;break;case ma.TRUECOLOUR_ALPHA:i=4;break;case ma.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==xy.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<n;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case ma.GREYSCALE:case ma.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case ma.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ma.UNKNOWN:case ma.GREYSCALE_ALPHA:case ma.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=VI(this),i=this.readUint8();if(i!==xy.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:kH(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:r,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(r);if(i){if(i.data=IA({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(i,s,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,i){switch(r.disposeOp){case Rm.NONE:break;case Rm.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let a=0;a<this._png.width;a++){const o=(s*r.width+a)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[o+l]=0}break;case Rm.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const i=1<<this._png.depth,s=(a,o)=>{const l=((a+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,u=(a*n.width+o)*this._png.channels;return{index:l,frameIndex:u}};switch(n.blendOp){case vy.SOURCE:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:u}=s(a,o);for(let h=0;h<this._png.channels;h++)r.data[l+h]=n.data[u+h]}break;case vy.OVER:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:u}=s(a,o);for(let h=0;h<this._png.channels;h++){const f=n.data[u+this._png.channels-1]/i,p=h%(this._png.channels-1)===0?1:n.data[u+h],d=Math.floor(f*p+(1-f)*r.data[l+h]);r.data[l+h]+=d}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==LA.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===yy.NO_INTERLACE)this._png.data=IA({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===yy.ADAM7)this._png.data=DH({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Rm.NONE,blendOp:vy.SOURCE,data:r}),this._inflator=new TA,this._writingDataChunks=!1}}function JH(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var RA;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(RA||(RA={}));function ZH(t,e){return new QH(t,e).decode()}var fr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function wy(){fr.console&&typeof fr.console.log=="function"&&fr.console.log.apply(fr.console,arguments)}var Tn={log:wy,warn:function(t){fr.console&&(typeof fr.console.warn=="function"?fr.console.warn.apply(fr.console,arguments):wy.call(null,arguments))},error:function(t){fr.console&&(typeof fr.console.error=="function"?fr.console.error.apply(fr.console,arguments):wy(t))}};function _y(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Su(n.response,e,r)},n.onerror=function(){Tn.error("could not download file")},n.send()}function jA(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function jm(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Su=fr.saveAs||((typeof window>"u"?"undefined":gn(window))!=="object"||window!==fr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=fr.URL||fr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?jA(i.href)?_y(t,e,r):jm(i,i.target="_blank"):jm(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){jm(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(jA(t))_y(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){jm(n)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:gn(s)!=="object"&&(Tn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return _y(t,e,r);var i=t.type==="application/octet-stream",s=/constructor/i.test(fr.HTMLElement)||fr.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":gn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var h=o.result;h=a?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=h:location=h,n=null},o.readAsDataURL(t)}else{var l=fr.URL||fr.webkitURL,u=l.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function zI(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,s=r[n].process,a=i.exec(t);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}var Ag=fr.atob.bind(fr),FA=fr.btoa.bind(fr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function by(t,e){var r=t[0],n=t[1],i=t[2],s=t[3];r=_s(r,n,i,s,e[0],7,-680876936),s=_s(s,r,n,i,e[1],12,-389564586),i=_s(i,s,r,n,e[2],17,606105819),n=_s(n,i,s,r,e[3],22,-1044525330),r=_s(r,n,i,s,e[4],7,-176418897),s=_s(s,r,n,i,e[5],12,1200080426),i=_s(i,s,r,n,e[6],17,-1473231341),n=_s(n,i,s,r,e[7],22,-45705983),r=_s(r,n,i,s,e[8],7,1770035416),s=_s(s,r,n,i,e[9],12,-1958414417),i=_s(i,s,r,n,e[10],17,-42063),n=_s(n,i,s,r,e[11],22,-1990404162),r=_s(r,n,i,s,e[12],7,1804603682),s=_s(s,r,n,i,e[13],12,-40341101),i=_s(i,s,r,n,e[14],17,-1502002290),r=bs(r,n=_s(n,i,s,r,e[15],22,1236535329),i,s,e[1],5,-165796510),s=bs(s,r,n,i,e[6],9,-1069501632),i=bs(i,s,r,n,e[11],14,643717713),n=bs(n,i,s,r,e[0],20,-373897302),r=bs(r,n,i,s,e[5],5,-701558691),s=bs(s,r,n,i,e[10],9,38016083),i=bs(i,s,r,n,e[15],14,-660478335),n=bs(n,i,s,r,e[4],20,-405537848),r=bs(r,n,i,s,e[9],5,568446438),s=bs(s,r,n,i,e[14],9,-1019803690),i=bs(i,s,r,n,e[3],14,-187363961),n=bs(n,i,s,r,e[8],20,1163531501),r=bs(r,n,i,s,e[13],5,-1444681467),s=bs(s,r,n,i,e[2],9,-51403784),i=bs(i,s,r,n,e[7],14,1735328473),r=Ss(r,n=bs(n,i,s,r,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Ss(s,r,n,i,e[8],11,-2022574463),i=Ss(i,s,r,n,e[11],16,1839030562),n=Ss(n,i,s,r,e[14],23,-35309556),r=Ss(r,n,i,s,e[1],4,-1530992060),s=Ss(s,r,n,i,e[4],11,1272893353),i=Ss(i,s,r,n,e[7],16,-155497632),n=Ss(n,i,s,r,e[10],23,-1094730640),r=Ss(r,n,i,s,e[13],4,681279174),s=Ss(s,r,n,i,e[0],11,-358537222),i=Ss(i,s,r,n,e[3],16,-722521979),n=Ss(n,i,s,r,e[6],23,76029189),r=Ss(r,n,i,s,e[9],4,-640364487),s=Ss(s,r,n,i,e[12],11,-421815835),i=Ss(i,s,r,n,e[15],16,530742520),r=As(r,n=Ss(n,i,s,r,e[2],23,-995338651),i,s,e[0],6,-198630844),s=As(s,r,n,i,e[7],10,1126891415),i=As(i,s,r,n,e[14],15,-1416354905),n=As(n,i,s,r,e[5],21,-57434055),r=As(r,n,i,s,e[12],6,1700485571),s=As(s,r,n,i,e[3],10,-1894986606),i=As(i,s,r,n,e[10],15,-1051523),n=As(n,i,s,r,e[1],21,-2054922799),r=As(r,n,i,s,e[8],6,1873313359),s=As(s,r,n,i,e[15],10,-30611744),i=As(i,s,r,n,e[6],15,-1560198380),n=As(n,i,s,r,e[13],21,1309151649),r=As(r,n,i,s,e[4],6,-145523070),s=As(s,r,n,i,e[11],10,-1120210379),i=As(i,s,r,n,e[2],15,718787259),n=As(n,i,s,r,e[9],21,-343485551),t[0]=Cc(r,t[0]),t[1]=Cc(n,t[1]),t[2]=Cc(i,t[2]),t[3]=Cc(s,t[3])}function U2(t,e,r,n,i,s){return e=Cc(Cc(e,t),Cc(n,s)),Cc(e<<i|e>>>32-i,r)}function _s(t,e,r,n,i,s,a){return U2(e&r|~e&n,t,e,i,s,a)}function bs(t,e,r,n,i,s,a){return U2(e&n|r&~n,t,e,i,s,a)}function Ss(t,e,r,n,i,s,a){return U2(e^r^n,t,e,i,s,a)}function As(t,e,r,n,i,s,a){return U2(r^(e|~n),t,e,i,s,a)}function HI(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)by(n,eq(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(by(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,by(n,i),n}function eq(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var DA="0123456789abcdef".split("");function tq(t){for(var e="",r=0;r<4;r++)e+=DA[t>>8*r+4&15]+DA[t>>8*r&15];return e}function rq(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function _w(t){return HI(t).map(rq).join("")}var nq=function(t){for(var e=0;e<t.length;e++)t[e]=tq(t[e]);return t.join("")}(HI("hello"))!="5d41402abc4b2a76b9719d911017c592";function Cc(t,e){if(nq){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function bw(t,e){var r,n,i,s;if(t!==r){for(var a=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var h=o[l];u=(u+h+a.charCodeAt(l))%256,o[l]=o[u],o[u]=h}r=t,n=o}else o=n;var f=e.length,p=0,d=0,v="";for(l=0;l<f;l++)d=(d+(h=o[p=(p+1)%256]))%256,o[p]=o[d],o[d]=h,a=o[(o[p]+o[d])%256],v+=String.fromCharCode(e.charCodeAt(l)^a);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var MA={print:4,modify:8,copy:16,"annot-forms":32};function Ch(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(MA.perm!==void 0)throw new Error("Invalid permission: "+o);i+=MA[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=_w(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=bw(this.encryptionKey,this.padding)}function Ih(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[n]}return e}function OA(t){if(gn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!i],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[r]){var a=e[r][s];try{a[0].apply(t,n)}catch(o){fr.console&&Tn.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function k1(t){if(!(this instanceof k1))return new k1(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function qI(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Eu(t,e,r,n,i){if(!(this instanceof Eu))return new Eu(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,qI.call(this,n,i)}function Jh(t,e,r,n,i){if(!(this instanceof Jh))return new Jh(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,qI.call(this,n,i)}function ir(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,u="S",h=null;gn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,s=t.compress||t.compressPdf||s,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,p={},d={internal:{},__private__:{}};d.__private__.PubSub=OA;var v="1.3",y=d.__private__.getPdfVersion=function(){return v};d.__private__.setPdfVersion=function(b){v=b};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return _};var w=d.__private__.getPageFormat=function(b){return _[b]};i=i||"a4";var S="compat",C="advanced",j=S;function q(){this.saveGraphicsState(),te(new Jt(jt,0,0,-jt,0,ar()*jt).toString()+" cm"),this.setFontSize(this.getFontSize()/jt),u="n",j=C}function G(){this.restoreGraphicsState(),u="S",j=S}var E=d.__private__.combineFontStyleAndFontWeight=function(b,U){if(b=="bold"&&U=="normal"||b=="bold"&&U==400||b=="normal"&&U=="italic"||b=="bold"&&U=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return U&&(b=U==400||U==="normal"?b==="italic"?"italic":"normal":U!=700&&U!=="bold"||b!=="normal"?(U==700?"bold":U)+""+b:"bold"),b};d.advancedAPI=function(b){var U=j===S;return U&&q.call(this),typeof b!="function"||(b(this),U&&G.call(this)),this},d.compatAPI=function(b){var U=j===C;return U&&G.call(this),typeof b!="function"||(b(this),U&&q.call(this)),this},d.isAdvancedAPI=function(){return j===C};var k,A=function(b){if(j!==C)throw new Error(b+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},D=d.roundToPrecision=d.__private__.roundToPrecision=function(b,U){var ae=e||U;if(isNaN(b)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return b.toFixed(ae).replace(/0+$/,"")};k=d.hpf=d.__private__.hpf=typeof l=="number"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return D(b,l)}:l==="smart"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return D(b,b>-1&&b<1?16:5)}:function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return D(b,16)};var N=d.f2=d.__private__.f2=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f2");return D(b,2)},R=d.__private__.f3=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f3");return D(b,3)},L=d.scale=d.__private__.scale=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.scale");return j===S?b*jt:j===C?b:void 0},se=function(b){return L(function(U){return j===S?ar()-U:j===C?U:void 0}(b))};d.__private__.setPrecision=d.setPrecision=function(b){typeof parseInt(b,10)=="number"&&(e=parseInt(b,10))};var ge,ve="00000000000000000000000000000000",ye=d.__private__.getFileId=function(){return ve},he=d.__private__.setFileId=function(b){return ve=b!==void 0&&/^[a-fA-F0-9]{32}$/.test(b)?b.toUpperCase():ve.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(Sn=new Ch(h.userPermissions,h.userPassword,h.ownerPassword,ve)),ve};d.setFileId=function(b){return he(b),this},d.getFileId=function(){return ye()};var _e=d.__private__.convertDateToPDFDate=function(b){var U=b.getTimezoneOffset(),ae=U<0?"+":"-",xe=Math.floor(Math.abs(U/60)),Le=Math.abs(U%60),Ee=[ae,B(xe),"'",B(Le),"'"].join("");return["D:",b.getFullYear(),B(b.getMonth()+1),B(b.getDate()),B(b.getHours()),B(b.getMinutes()),B(b.getSeconds()),Ee].join("")},Ue=d.__private__.convertPDFDateToDate=function(b){var U=parseInt(b.substr(2,4),10),ae=parseInt(b.substr(6,2),10)-1,xe=parseInt(b.substr(8,2),10),Le=parseInt(b.substr(10,2),10),Ee=parseInt(b.substr(12,2),10),$e=parseInt(b.substr(14,2),10);return new Date(U,ae,xe,Le,Ee,$e,0)},Ie=d.__private__.setCreationDate=function(b){var U;if(b===void 0&&(b=new Date),b instanceof Date)U=_e(b);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(b))throw new Error("Invalid argument passed to jsPDF.setCreationDate");U=b}return ge=U},P=d.__private__.getCreationDate=function(b){var U=ge;return b==="jsDate"&&(U=Ue(ge)),U};d.setCreationDate=function(b){return Ie(b),this},d.getCreationDate=function(b){return P(b)};var O,B=d.__private__.padd2=function(b){return("0"+parseInt(b)).slice(-2)},z=d.__private__.padd2Hex=function(b){return("00"+(b=b.toString())).substr(b.length)},Z=0,de=[],Se=[],Ae=0,Ne=[],Xe=[],et=!1,ot=Se;d.__private__.setCustomOutputDestination=function(b){et=!0,ot=b};var mt=function(b){et||(ot=b)};d.__private__.resetCustomOutputDestination=function(){et=!1,ot=Se};var te=d.__private__.out=function(b){return b=b.toString(),Ae+=b.length+1,ot.push(b),ot},ke=d.__private__.write=function(b){return te(arguments.length===1?b.toString():Array.prototype.join.call(arguments," "))},X=d.__private__.getArrayBuffer=function(b){for(var U=b.length,ae=new ArrayBuffer(U),xe=new Uint8Array(ae);U--;)xe[U]=b.charCodeAt(U);return ae},me=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return me};var fe=t.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(b){return fe=j===C?b/jt:b,this};var qe,Ke=d.__private__.getFontSize=d.getFontSize=function(){return j===S?fe:fe*jt},st=t.R2L||!1;d.__private__.setR2L=d.setR2L=function(b){return st=b,this},d.__private__.getR2L=d.getR2L=function(){return st};var yt,Ht=d.__private__.setZoomMode=function(b){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(b))qe=b;else if(isNaN(b)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(b)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+b+'" is not recognized.');qe=b}else qe=parseInt(b,10)};d.__private__.getZoomMode=function(){return qe};var be,tt=d.__private__.setPageMode=function(b){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(b)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+b+'" is not recognized.');yt=b};d.__private__.getPageMode=function(){return yt};var ct=d.__private__.setLayoutMode=function(b){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(b)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+b+'" is not recognized.');be=b};d.__private__.getLayoutMode=function(){return be},d.__private__.setDisplayMode=d.setDisplayMode=function(b,U,ae){return Ht(b),ct(U),tt(ae),this};var St={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(b){if(Object.keys(St).indexOf(b)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return St[b]},d.__private__.getDocumentProperties=function(){return St},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(b){for(var U in St)St.hasOwnProperty(U)&&b[U]&&(St[U]=b[U]);return this},d.__private__.setDocumentProperty=function(b,U){if(Object.keys(St).indexOf(b)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return St[b]=U};var Rt,jt,Dt,Wr,hr,Ge={},Lt={},mr=[],Kt={},Pr={},Qt={},Zt={},qr=null,Wt=0,Ye=[],Tt=new OA(d),on=t.hotfixes||[],Sr={},yr={},Fn=[],Jt=function b(U,ae,xe,Le,Ee,$e){if(!(this instanceof b))return new b(U,ae,xe,Le,Ee,$e);isNaN(U)&&(U=1),isNaN(ae)&&(ae=0),isNaN(xe)&&(xe=0),isNaN(Le)&&(Le=1),isNaN(Ee)&&(Ee=0),isNaN($e)&&($e=0),this._matrix=[U,ae,xe,Le,Ee,$e]};Object.defineProperty(Jt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Jt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Jt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Jt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Jt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Jt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Jt.prototype,"a",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Jt.prototype,"b",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Jt.prototype,"c",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Jt.prototype,"d",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Jt.prototype,"e",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Jt.prototype,"f",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Jt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Jt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Jt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Jt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Jt.prototype.join=function(b){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(b)},Jt.prototype.multiply=function(b){var U=b.sx*this.sx+b.shy*this.shx,ae=b.sx*this.shy+b.shy*this.sy,xe=b.shx*this.sx+b.sy*this.shx,Le=b.shx*this.shy+b.sy*this.sy,Ee=b.tx*this.sx+b.ty*this.shx+this.tx,$e=b.tx*this.shy+b.ty*this.sy+this.ty;return new Jt(U,ae,xe,Le,Ee,$e)},Jt.prototype.decompose=function(){var b=this.sx,U=this.shy,ae=this.shx,xe=this.sy,Le=this.tx,Ee=this.ty,$e=Math.sqrt(b*b+U*U),Ft=(b/=$e)*ae+(U/=$e)*xe;ae-=b*Ft,xe-=U*Ft;var Bt=Math.sqrt(ae*ae+xe*xe);return Ft/=Bt,b*(xe/=Bt)<U*(ae/=Bt)&&(b=-b,U=-U,Ft=-Ft,$e=-$e),{scale:new Jt($e,0,0,Bt,0,0),translate:new Jt(1,0,0,1,Le,Ee),rotate:new Jt(b,U,-U,b,0,0),skew:new Jt(1,0,Ft,1,0,0)}},Jt.prototype.toString=function(b){return this.join(" ")},Jt.prototype.inversed=function(){var b=this.sx,U=this.shy,ae=this.shx,xe=this.sy,Le=this.tx,Ee=this.ty,$e=1/(b*xe-U*ae),Ft=xe*$e,Bt=-U*$e,_t=-ae*$e,qt=b*$e;return new Jt(Ft,Bt,_t,qt,-Ft*Le-_t*Ee,-Bt*Le-qt*Ee)},Jt.prototype.applyToPoint=function(b){var U=b.x*this.sx+b.y*this.shx+this.tx,ae=b.x*this.shy+b.y*this.sy+this.ty;return new wt(U,ae)},Jt.prototype.applyToRectangle=function(b){var U=this.applyToPoint(b),ae=this.applyToPoint(new wt(b.x+b.w,b.y+b.h));return new Rr(U.x,U.y,ae.x-U.x,ae.y-U.y)},Jt.prototype.clone=function(){var b=this.sx,U=this.shy,ae=this.shx,xe=this.sy,Le=this.tx,Ee=this.ty;return new Jt(b,U,ae,xe,Le,Ee)},d.Matrix=Jt;var qn=d.matrixMult=function(b,U){return U.multiply(b)},rn=new Jt(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=rn;var ln=function(b,U){if(!Pr[b]){var ae=(U instanceof Eu?"Sh":"P")+(Object.keys(Kt).length+1).toString(10);U.id=ae,Pr[b]=ae,Kt[ae]=U,Tt.publish("addPattern",U)}};d.ShadingPattern=Eu,d.TilingPattern=Jh,d.addShadingPattern=function(b,U){return A("addShadingPattern()"),ln(b,U),this},d.beginTilingPattern=function(b){A("beginTilingPattern()"),jr(b.boundingBox[0],b.boundingBox[1],b.boundingBox[2]-b.boundingBox[0],b.boundingBox[3]-b.boundingBox[1],b.matrix)},d.endTilingPattern=function(b,U){A("endTilingPattern()"),U.stream=Xe[O].join(`
`),ln(b,U),Tt.publish("endTilingPattern",U),Fn.pop().restore()};var kn,Mr=d.__private__.newObject=function(){var b=Zr();return W(b,!0),b},Zr=d.__private__.newObjectDeferred=function(){return Z++,de[Z]=function(){return Ae},Z},W=function(b,U){return U=typeof U=="boolean"&&U,de[b]=Ae,U&&te(b+" 0 obj"),b},ie=d.__private__.newAdditionalObject=function(){var b={objId:Zr(),content:""};return Ne.push(b),b},ee=Zr(),ne=Zr(),oe=d.__private__.decodeColorString=function(b){var U=b.split(" ");if(U.length!==2||U[1]!=="g"&&U[1]!=="G")U.length!==5||U[4]!=="k"&&U[4]!=="K"||(U=[(1-U[0])*(1-U[3]),(1-U[1])*(1-U[3]),(1-U[2])*(1-U[3]),"r"]);else{var ae=parseFloat(U[0]);U=[ae,ae,ae,"r"]}for(var xe="#",Le=0;Le<3;Le++)xe+=("0"+Math.floor(255*parseFloat(U[Le])).toString(16)).slice(-2);return xe},le=d.__private__.encodeColorString=function(b){var U;typeof b=="string"&&(b={ch1:b});var ae=b.ch1,xe=b.ch2,Le=b.ch3,Ee=b.ch4,$e=b.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var Ft=new zI(ae);if(Ft.ok)ae=Ft.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var Bt=parseInt(ae.substr(1),16);ae=Bt>>16&255,xe=Bt>>8&255,Le=255&Bt}if(xe===void 0||Ee===void 0&&ae===xe&&xe===Le)U=typeof ae=="string"?ae+" "+$e[0]:b.precision===2?N(ae/255)+" "+$e[0]:R(ae/255)+" "+$e[0];else if(Ee===void 0||gn(Ee)==="object"){if(Ee&&!isNaN(Ee.a)&&Ee.a===0)return["1.","1.","1.",$e[1]].join(" ");U=typeof ae=="string"?[ae,xe,Le,$e[1]].join(" "):b.precision===2?[N(ae/255),N(xe/255),N(Le/255),$e[1]].join(" "):[R(ae/255),R(xe/255),R(Le/255),$e[1]].join(" ")}else U=typeof ae=="string"?[ae,xe,Le,Ee,$e[2]].join(" "):b.precision===2?[N(ae),N(xe),N(Le),N(Ee),$e[2]].join(" "):[R(ae),R(xe),R(Le),R(Ee),$e[2]].join(" ");return U},De=d.__private__.getFilters=function(){return a},Te=d.__private__.putStream=function(b){var U=(b=b||{}).data||"",ae=b.filters||De(),xe=b.alreadyAppliedFilters||[],Le=b.addLength1||!1,Ee=U.length,$e=b.objectId,Ft=function(I){return I};if(h!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Ft=Sn.encryptor($e,0));var Bt={};ae===!0&&(ae=["FlateEncode"]);var _t=b.additionalKeyValues||[],qt=(Bt=ir.API.processDataByFilters!==void 0?ir.API.processDataByFilters(U,ae):{data:U,reverseChain:[]}).reverseChain+(Array.isArray(xe)?xe.join(" "):xe.toString());if(Bt.data.length!==0&&(_t.push({key:"Length",value:Bt.data.length}),Le===!0&&_t.push({key:"Length1",value:Ee})),qt.length!=0)if(qt.split("/").length-1==1)_t.push({key:"Filter",value:qt});else{_t.push({key:"Filter",value:"["+qt+"]"});for(var Cr=0;Cr<_t.length;Cr+=1)if(_t[Cr].key==="DecodeParms"){for(var sn=[],un=0;un<Bt.reverseChain.split("/").length-1;un+=1)sn.push("null");sn.push(_t[Cr].value),_t[Cr].value="["+sn.join(" ")+"]"}}te("<<");for(var g=0;g<_t.length;g++)te("/"+_t[g].key+" "+_t[g].value);te(">>"),Bt.data.length!==0&&(te("stream"),te(Ft(Bt.data)),te("endstream"))},je=d.__private__.putPage=function(b){var U=b.number,ae=b.data,xe=b.objId,Le=b.contentsObjId;W(xe,!0),te("<</Type /Page"),te("/Parent "+b.rootDictionaryObjId+" 0 R"),te("/Resources "+b.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(k(b.mediaBox.bottomLeftX))+" "+parseFloat(k(b.mediaBox.bottomLeftY))+" "+k(b.mediaBox.topRightX)+" "+k(b.mediaBox.topRightY)+"]"),b.cropBox!==null&&te("/CropBox ["+k(b.cropBox.bottomLeftX)+" "+k(b.cropBox.bottomLeftY)+" "+k(b.cropBox.topRightX)+" "+k(b.cropBox.topRightY)+"]"),b.bleedBox!==null&&te("/BleedBox ["+k(b.bleedBox.bottomLeftX)+" "+k(b.bleedBox.bottomLeftY)+" "+k(b.bleedBox.topRightX)+" "+k(b.bleedBox.topRightY)+"]"),b.trimBox!==null&&te("/TrimBox ["+k(b.trimBox.bottomLeftX)+" "+k(b.trimBox.bottomLeftY)+" "+k(b.trimBox.topRightX)+" "+k(b.trimBox.topRightY)+"]"),b.artBox!==null&&te("/ArtBox ["+k(b.artBox.bottomLeftX)+" "+k(b.artBox.bottomLeftY)+" "+k(b.artBox.topRightX)+" "+k(b.artBox.topRightY)+"]"),typeof b.userUnit=="number"&&b.userUnit!==1&&te("/UserUnit "+b.userUnit),Tt.publish("putPage",{objId:xe,pageContext:Ye[U],pageNumber:U,page:ae}),te("/Contents "+Le+" 0 R"),te(">>"),te("endobj");var Ee=ae.join(`
`);return j===C&&(Ee+=`
Q`),W(Le,!0),Te({data:Ee,filters:De(),objectId:Le}),te("endobj"),xe},Me=d.__private__.putPages=function(){var b,U,ae=[];for(b=1;b<=Wt;b++)Ye[b].objId=Zr(),Ye[b].contentsObjId=Zr();for(b=1;b<=Wt;b++)ae.push(je({number:b,data:Xe[b],objId:Ye[b].objId,contentsObjId:Ye[b].contentsObjId,mediaBox:Ye[b].mediaBox,cropBox:Ye[b].cropBox,bleedBox:Ye[b].bleedBox,trimBox:Ye[b].trimBox,artBox:Ye[b].artBox,userUnit:Ye[b].userUnit,rootDictionaryObjId:ee,resourceDictionaryObjId:ne}));W(ee,!0),te("<</Type /Pages");var xe="/Kids [";for(U=0;U<Wt;U++)xe+=ae[U]+" 0 R ";te(xe+"]"),te("/Count "+Wt),te(">>"),te("endobj"),Tt.publish("postPutPages")},Oe=function(b){Tt.publish("putFont",{font:b,out:te,newObject:Mr,putStream:Te}),b.isAlreadyPutted!==!0&&(b.objectNumber=Mr(),te("<<"),te("/Type /Font"),te("/BaseFont /"+Ih(b.postScriptName)),te("/Subtype /Type1"),typeof b.encoding=="string"&&te("/Encoding /"+b.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},ht=function(b){b.objectNumber=Mr();var U=[];U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Form"}),U.push({key:"BBox",value:"["+[k(b.x),k(b.y),k(b.x+b.width),k(b.y+b.height)].join(" ")+"]"}),U.push({key:"Matrix",value:"["+b.matrix.toString()+"]"});var ae=b.pages[1].join(`
`);Te({data:ae,additionalKeyValues:U,objectId:b.objectNumber}),te("endobj")},gt=function(b,U){U||(U=21);var ae=Mr(),xe=function($e,Ft){var Bt,_t=[],qt=1/(Ft-1);for(Bt=0;Bt<1;Bt+=qt)_t.push(Bt);if(_t.push(1),$e[0].offset!=0){var Cr={offset:0,color:$e[0].color};$e.unshift(Cr)}if($e[$e.length-1].offset!=1){var sn={offset:1,color:$e[$e.length-1].color};$e.push(sn)}for(var un="",g=0,I=0;I<_t.length;I++){for(Bt=_t[I];Bt>$e[g+1].offset;)g++;var M=$e[g].offset,J=(Bt-M)/($e[g+1].offset-M),Fe=$e[g].color,We=$e[g+1].color;un+=z(Math.round((1-J)*Fe[0]+J*We[0]).toString(16))+z(Math.round((1-J)*Fe[1]+J*We[1]).toString(16))+z(Math.round((1-J)*Fe[2]+J*We[2]).toString(16))}return un.trim()}(b.colors,U),Le=[];Le.push({key:"FunctionType",value:"0"}),Le.push({key:"Domain",value:"[0.0 1.0]"}),Le.push({key:"Size",value:"["+U+"]"}),Le.push({key:"BitsPerSample",value:"8"}),Le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Te({data:xe,additionalKeyValues:Le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),te("endobj"),b.objectNumber=Mr(),te("<< /ShadingType "+b.type),te("/ColorSpace /DeviceRGB");var Ee="/Coords ["+k(parseFloat(b.coords[0]))+" "+k(parseFloat(b.coords[1]))+" ";b.type===2?Ee+=k(parseFloat(b.coords[2]))+" "+k(parseFloat(b.coords[3])):Ee+=k(parseFloat(b.coords[2]))+" "+k(parseFloat(b.coords[3]))+" "+k(parseFloat(b.coords[4]))+" "+k(parseFloat(b.coords[5])),te(Ee+="]"),b.matrix&&te("/Matrix ["+b.matrix.toString()+"]"),te("/Function "+ae+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},kt=function(b,U){var ae=Zr(),xe=Mr();U.push({resourcesOid:ae,objectOid:xe}),b.objectNumber=xe;var Le=[];Le.push({key:"Type",value:"/Pattern"}),Le.push({key:"PatternType",value:"1"}),Le.push({key:"PaintType",value:"1"}),Le.push({key:"TilingType",value:"1"}),Le.push({key:"BBox",value:"["+b.boundingBox.map(k).join(" ")+"]"}),Le.push({key:"XStep",value:k(b.xStep)}),Le.push({key:"YStep",value:k(b.yStep)}),Le.push({key:"Resources",value:ae+" 0 R"}),b.matrix&&Le.push({key:"Matrix",value:"["+b.matrix.toString()+"]"}),Te({data:b.stream,additionalKeyValues:Le,objectId:b.objectNumber}),te("endobj")},pt=function(b){for(var U in b.objectNumber=Mr(),te("<<"),b)switch(U){case"opacity":te("/ca "+N(b[U]));break;case"stroke-opacity":te("/CA "+N(b[U]))}te(">>"),te("endobj")},Et=function(b){W(b.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var U in te("/Font <<"),Ge)Ge.hasOwnProperty(U)&&(f===!1||f===!0&&p.hasOwnProperty(U))&&te("/"+U+" "+Ge[U].objectNumber+" 0 R");te(">>")}(),function(){if(Object.keys(Kt).length>0){for(var U in te("/Shading <<"),Kt)Kt.hasOwnProperty(U)&&Kt[U]instanceof Eu&&Kt[U].objectNumber>=0&&te("/"+U+" "+Kt[U].objectNumber+" 0 R");Tt.publish("putShadingPatternDict"),te(">>")}}(),function(U){if(Object.keys(Kt).length>0){for(var ae in te("/Pattern <<"),Kt)Kt.hasOwnProperty(ae)&&Kt[ae]instanceof d.TilingPattern&&Kt[ae].objectNumber>=0&&Kt[ae].objectNumber<U&&te("/"+ae+" "+Kt[ae].objectNumber+" 0 R");Tt.publish("putTilingPatternDict"),te(">>")}}(b.objectOid),function(){if(Object.keys(Qt).length>0){var U;for(U in te("/ExtGState <<"),Qt)Qt.hasOwnProperty(U)&&Qt[U].objectNumber>=0&&te("/"+U+" "+Qt[U].objectNumber+" 0 R");Tt.publish("putGStateDict"),te(">>")}}(),function(){for(var U in te("/XObject <<"),Sr)Sr.hasOwnProperty(U)&&Sr[U].objectNumber>=0&&te("/"+U+" "+Sr[U].objectNumber+" 0 R");Tt.publish("putXobjectDict"),te(">>")}(),te(">>"),te("endobj")},rr=function(b){Lt[b.fontName]=Lt[b.fontName]||{},Lt[b.fontName][b.fontStyle]=b.id},Tr=function(b,U,ae,xe,Le){var Ee={id:"F"+(Object.keys(Ge).length+1).toString(10),postScriptName:b,fontName:U,fontStyle:ae,encoding:xe,isStandardFont:Le||!1,metadata:{}};return Tt.publish("addFont",{font:Ee,instance:this}),Ge[Ee.id]=Ee,rr(Ee),Ee.id},vr=d.__private__.pdfEscape=d.pdfEscape=function(b,U){return function(ae,xe){var Le,Ee,$e,Ft,Bt,_t,qt,Cr,sn;if($e=(xe=xe||{}).sourceEncoding||"Unicode",Bt=xe.outputEncoding,(xe.autoencode||Bt)&&Ge[Rt].metadata&&Ge[Rt].metadata[$e]&&Ge[Rt].metadata[$e].encoding&&(Ft=Ge[Rt].metadata[$e].encoding,!Bt&&Ge[Rt].encoding&&(Bt=Ge[Rt].encoding),!Bt&&Ft.codePages&&(Bt=Ft.codePages[0]),typeof Bt=="string"&&(Bt=Ft[Bt]),Bt)){for(qt=!1,_t=[],Le=0,Ee=ae.length;Le<Ee;Le++)(Cr=Bt[ae.charCodeAt(Le)])?_t.push(String.fromCharCode(Cr)):_t.push(ae[Le]),_t[Le].charCodeAt(0)>>8&&(qt=!0);ae=_t.join("")}for(Le=ae.length;qt===void 0&&Le!==0;)ae.charCodeAt(Le-1)>>8&&(qt=!0),Le--;if(!qt)return ae;for(_t=xe.noBOM?[]:[254,255],Le=0,Ee=ae.length;Le<Ee;Le++){if((sn=(Cr=ae.charCodeAt(Le))>>8)>>8)throw new Error("Character at position "+Le+" of string '"+ae+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");_t.push(sn),_t.push(Cr-(sn<<8))}return String.fromCharCode.apply(void 0,_t)}(b,U).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nn=d.__private__.beginPage=function(b){Xe[++Wt]=[],Ye[Wt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(b[0]),topRightY:Number(b[1])}},di(Wt),mt(Xe[O])},$n=function(b,U){var ae,xe,Le;switch(r=U||r,typeof b=="string"&&(ae=w(b.toLowerCase()),Array.isArray(ae)&&(xe=ae[0],Le=ae[1])),Array.isArray(b)&&(xe=b[0]*jt,Le=b[1]*jt),isNaN(xe)&&(xe=i[0],Le=i[1]),(xe>14400||Le>14400)&&(Tn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),xe=Math.min(14400,xe),Le=Math.min(14400,Le)),i=[xe,Le],r.substr(0,1)){case"l":Le>xe&&(i=[Le,xe]);break;case"p":xe>Le&&(i=[Le,xe])}nn(i),cr(Xi),te(it),Ot!==0&&te(Ot+" J"),ut!==0&&te(ut+" j"),Tt.publish("addPage",{pageNumber:Wt})},hi=function(b){b>0&&b<=Wt&&(Xe.splice(b,1),Ye.splice(b,1),Wt--,O>Wt&&(O=Wt),this.setPage(O))},di=function(b){b>0&&b<=Wt&&(O=b)},Jn=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return Xe.length-1},cn=function(b,U,ae){var xe,Le=void 0;return ae=ae||{},b=b!==void 0?b:Ge[Rt].fontName,U=U!==void 0?U:Ge[Rt].fontStyle,xe=b.toLowerCase(),Lt[xe]!==void 0&&Lt[xe][U]!==void 0?Le=Lt[xe][U]:Lt[b]!==void 0&&Lt[b][U]!==void 0?Le=Lt[b][U]:ae.disableWarning===!1&&Tn.warn("Unable to look up font label for font '"+b+"', '"+U+"'. Refer to getFontList() for available fonts."),Le||ae.noFallback||(Le=Lt.times[U])==null&&(Le=Lt.times.normal),Le},Cn=d.__private__.putInfo=function(){var b=Mr(),U=function(xe){return xe};for(var ae in h!==null&&(U=Sn.encryptor(b,0)),te("<<"),te("/Producer ("+vr(U("jsPDF "+ir.version))+")"),St)St.hasOwnProperty(ae)&&St[ae]&&te("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+vr(U(St[ae]))+")");te("/CreationDate ("+vr(U(ge))+")"),te(">>"),te("endobj")},Xr=d.__private__.putCatalog=function(b){var U=(b=b||{}).rootDictionaryObjId||ee;switch(Mr(),te("<<"),te("/Type /Catalog"),te("/Pages "+U+" 0 R"),qe||(qe="fullwidth"),qe){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+qe;ae.substr(ae.length-1)==="%"&&(qe=parseInt(qe)/100),typeof qe=="number"&&te("/OpenAction [3 0 R /XYZ null null "+N(qe)+"]")}switch(be||(be="continuous"),be){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}yt&&te("/PageMode /"+yt),Tt.publish("putCatalog"),te(">>"),te("endobj")},Lr=d.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(Z+1)),te("/Root "+Z+" 0 R"),te("/Info "+(Z-1)+" 0 R"),h!==null&&te("/Encrypt "+Sn.oid+" 0 R"),te("/ID [ <"+ve+"> <"+ve+"> ]"),te(">>")},br=d.__private__.putHeader=function(){te("%PDF-"+v),te("%")},Wn=d.__private__.putXRef=function(){var b="0000000000";te("xref"),te("0 "+(Z+1)),te("0000000000 65535 f ");for(var U=1;U<=Z;U++)typeof de[U]=="function"?te((b+de[U]()).slice(-10)+" 00000 n "):de[U]!==void 0?te((b+de[U]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},wn=d.__private__.buildDocument=function(){var b;Z=0,Ae=0,Se=[],de=[],Ne=[],ee=Zr(),ne=Zr(),mt(Se),Tt.publish("buildDocument"),br(),Me(),function(){Tt.publish("putAdditionalObjects");for(var ae=0;ae<Ne.length;ae++){var xe=Ne[ae];W(xe.objId,!0),te(xe.content),te("endobj")}Tt.publish("postPutAdditionalObjects")}(),b=[],function(){for(var ae in Ge)Ge.hasOwnProperty(ae)&&(f===!1||f===!0&&p.hasOwnProperty(ae))&&Oe(Ge[ae])}(),function(){var ae;for(ae in Qt)Qt.hasOwnProperty(ae)&&pt(Qt[ae])}(),function(){for(var ae in Sr)Sr.hasOwnProperty(ae)&&ht(Sr[ae])}(),function(ae){var xe;for(xe in Kt)Kt.hasOwnProperty(xe)&&(Kt[xe]instanceof Eu?gt(Kt[xe]):Kt[xe]instanceof Jh&&kt(Kt[xe],ae))}(b),Tt.publish("putResources"),b.forEach(Et),Et({resourcesOid:ne,objectOid:Number.MAX_SAFE_INTEGER}),Tt.publish("postPutResources"),h!==null&&(Sn.oid=Mr(),te("<<"),te("/Filter /Standard"),te("/V "+Sn.v),te("/R "+Sn.r),te("/U <"+Sn.toHexString(Sn.U)+">"),te("/O <"+Sn.toHexString(Sn.O)+">"),te("/P "+Sn.P),te(">>"),te("endobj")),Cn(),Xr();var U=Ae;return Wn(),Lr(),te("startxref"),te(""+U),te("%%EOF"),mt(Xe[O]),Se.join(`
`)},Or=d.__private__.getBlob=function(b){return new Blob([X(b)],{type:"application/pdf"})},Ra=d.output=d.__private__.output=(kn=function(b,U){switch(typeof(U=U||{})=="string"?U={filename:U}:U.filename=U.filename||"generated.pdf",b){case void 0:return wn();case"save":d.save(U.filename);break;case"arraybuffer":return X(wn());case"blob":return Or(wn());case"bloburi":case"bloburl":if(fr.URL!==void 0&&typeof fr.URL.createObjectURL=="function")return fr.URL&&fr.URL.createObjectURL(Or(wn()))||void 0;Tn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",xe=wn();try{ae=FA(xe)}catch{ae=FA(unescape(encodeURIComponent(xe)))}return"data:application/pdf;filename="+U.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(fr)==="[object Window]"){var Le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ee=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';U.pdfObjectUrl&&(Le=U.pdfObjectUrl,Ee="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Le+'"'+Ee+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(U)+");<\/script></body></html>",Ft=fr.open();return Ft!==null&&Ft.document.write($e),Ft}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(fr)==="[object Window]"){var Bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(U.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+U.filename+'" width="500px" height="400px" /></body></html>',_t=fr.open();if(_t!==null){_t.document.write(Bt);var qt=this;_t.document.documentElement.querySelector("#pdfViewer").onload=function(){_t.document.title=U.filename,_t.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(qt.output("bloburl"))}}return _t}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(fr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Cr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",U)+'"></iframe></body></html>',sn=fr.open();if(sn!==null&&(sn.document.write(Cr),sn.document.title=U.filename),sn||typeof safari>"u")return sn;break;case"datauri":case"dataurl":return fr.document.location.href=this.output("datauristring",U);default:return null}},kn.foo=function(){try{return kn.apply(this,arguments)}catch(ae){var b=ae.stack||"";~b.indexOf(" at ")&&(b=b.split(" at ")[1]);var U="Error in function "+b.split(`
`)[0].split("<")[0]+": "+ae.message;if(!fr.console)throw new Error(U);fr.console.error(U,ae),fr.alert&&alert(U)}},kn.foo.bar=kn,kn.foo),Zn=function(b){return Array.isArray(on)===!0&&on.indexOf(b)>-1};switch(n){case"pt":jt=1;break;case"mm":jt=72/25.4;break;case"cm":jt=72/2.54;break;case"in":jt=72;break;case"px":jt=Zn("px_scaling")==1?.75:96/72;break;case"pc":case"em":jt=12;break;case"ex":jt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);jt=n}var Sn=null;Ie(),he();var $s=d.__private__.getPageInfo=d.getPageInfo=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ye[b].objId,pageNumber:b,pageContext:Ye[b]}},Io=d.__private__.getPageInfoByObjId=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var U in Ye)if(Ye[U].objId===b)break;return $s(U)},fu=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:Ye[O].objId,pageNumber:O,pageContext:Ye[O]}};d.addPage=function(){return $n.apply(this,arguments),this},d.setPage=function(){return di.apply(this,arguments),mt.call(this,Xe[O]),this},d.insertPage=function(b){return this.addPage(),this.movePage(O,b),this},d.movePage=function(b,U){var ae,xe;if(b>U){ae=Xe[b],xe=Ye[b];for(var Le=b;Le>U;Le--)Xe[Le]=Xe[Le-1],Ye[Le]=Ye[Le-1];Xe[U]=ae,Ye[U]=xe,this.setPage(U)}else if(b<U){ae=Xe[b],xe=Ye[b];for(var Ee=b;Ee<U;Ee++)Xe[Ee]=Xe[Ee+1],Ye[Ee]=Ye[Ee+1];Xe[U]=ae,Ye[U]=xe,this.setPage(U)}return this},d.deletePage=function(){return hi.apply(this,arguments),this},d.__private__.text=d.text=function(b,U,ae,xe,Le){var Ee,$e,Ft,Bt,_t,qt,Cr,sn,un,g=(xe=xe||{}).scope||this;if(typeof b=="number"&&typeof U=="number"&&(typeof ae=="string"||Array.isArray(ae))){var I=ae;ae=U,U=b,b=I}if(arguments[3]instanceof Jt==0?(Ft=arguments[4],Bt=arguments[5],gn(Cr=arguments[3])==="object"&&Cr!==null||(typeof Ft=="string"&&(Bt=Ft,Ft=null),typeof Cr=="string"&&(Bt=Cr,Cr=null),typeof Cr=="number"&&(Ft=Cr,Cr=null),xe={flags:Cr,angle:Ft,align:Bt})):(A("The transform parameter of text() with a Matrix value"),un=Le),isNaN(U)||isNaN(ae)||b==null)throw new Error("Invalid arguments passed to jsPDF.text");if(b.length===0)return g;var M,J="",Fe=typeof xe.lineHeightFactor=="number"?xe.lineHeightFactor:Da,We=g.internal.scaleFactor;function bt(an){return an=an.split("	").join(Array(xe.TabLen||9).join(" ")),vr(an,Cr)}function gr(an){for(var En,pi=an.concat(),Ri=[],ol=pi.length;ol--;)typeof(En=pi.shift())=="string"?Ri.push(En):Array.isArray(an)&&(En.length===1||En[1]===void 0&&En[2]===void 0)?Ri.push(En[0]):Ri.push([En[0],En[1],En[2]]);return Ri}function In(an,En){var pi;if(typeof an=="string")pi=En(an)[0];else if(Array.isArray(an)){for(var Ri,ol,mf=an.concat(),ph=[],Up=mf.length;Up--;)typeof(Ri=mf.shift())=="string"?ph.push(En(Ri)[0]):Array.isArray(Ri)&&typeof Ri[0]=="string"&&(ol=En(Ri[0],Ri[1],Ri[2]),ph.push([ol[0],ol[1],ol[2]]));pi=ph}return pi}var Br=!1,Pn=!0;if(typeof b=="string")Br=!0;else if(Array.isArray(b)){var Vi=b.concat();$e=[];for(var ms,Ln=Vi.length;Ln--;)(typeof(ms=Vi.shift())!="string"||Array.isArray(ms)&&typeof ms[0]!="string")&&(Pn=!1);Br=Pn}if(Br===!1)throw new Error('Type of text must be string or Array. "'+b+'" is not recognized.');typeof b=="string"&&(b=b.match(/[\r?\n]/)?b.split(/\r\n|\r|\n/g):[b]);var gs=fe/g.internal.scaleFactor,Oa=gs*(Fe-1);switch(xe.baseline){case"bottom":ae-=Oa;break;case"top":ae+=gs-Oa;break;case"hanging":ae+=gs-2*Oa;break;case"middle":ae+=gs/2-Oa}if((qt=xe.maxWidth||0)>0&&(typeof b=="string"?b=g.splitTextToSize(b,qt):Object.prototype.toString.call(b)==="[object Array]"&&(b=b.reduce(function(an,En){return an.concat(g.splitTextToSize(En,qt))},[]))),Ee={text:b,x:U,y:ae,options:xe,mutex:{pdfEscape:vr,activeFontKey:Rt,fonts:Ge,activeFontSize:fe}},Tt.publish("preProcessText",Ee),b=Ee.text,Ft=(xe=Ee.options).angle,un instanceof Jt==0&&Ft&&typeof Ft=="number"){Ft*=Math.PI/180,xe.rotationDirection===0&&(Ft=-Ft),j===C&&(Ft=-Ft);var il=Math.cos(Ft),of=Math.sin(Ft);un=new Jt(il,of,-of,il,0,0)}else Ft&&Ft instanceof Jt&&(un=Ft);j!==C||un||(un=rn),(_t=xe.charSpace||At)!==void 0&&(J+=k(L(_t))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(sn=xe.horizontalScale)!==void 0&&(J+=k(100*sn)+` Tz
`),xe.lang;var Rs=-1,sl=xe.renderingMode!==void 0?xe.renderingMode:xe.stroke,dh=g.internal.getCurrentPageInfo().pageContext;switch(sl){case 0:case!1:case"fill":Rs=0;break;case 1:case!0:case"stroke":Rs=1;break;case 2:case"fillThenStroke":Rs=2;break;case 3:case"invisible":Rs=3;break;case 4:case"fillAndAddForClipping":Rs=4;break;case 5:case"strokeAndAddPathForClipping":Rs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Rs=6;break;case 7:case"addToPathForClipping":Rs=7}var Op=dh.usedRenderingMode!==void 0?dh.usedRenderingMode:-1;Rs!==-1?J+=Rs+` Tr
`:Op!==-1&&(J+=`0 Tr
`),Rs!==-1&&(dh.usedRenderingMode=Rs),Bt=xe.align||"left";var Ba,pu=fe*Fe,lf=g.internal.pageSize.getWidth(),cf=Ge[Rt];_t=xe.charSpace||At,qt=xe.maxWidth||0,Cr=Object.assign({autoencode:!0,noBOM:!0},xe.flags);var Kl=[],mu=function(an){return g.getStringUnitWidth(an,{font:cf,charSpace:_t,fontSize:fe,doKerning:!1})*fe/We};if(Object.prototype.toString.call(b)==="[object Array]"){var oa;$e=gr(b),Bt!=="left"&&(Ba=$e.map(mu));var la,Yl=0;if(Bt==="right"){U-=Ba[0],b=[],Ln=$e.length;for(var al=0;al<Ln;al++)al===0?(la=V(U),oa=pe(ae)):(la=L(Yl-Ba[al]),oa=-pu),b.push([$e[al],la,oa]),Yl=Ba[al]}else if(Bt==="center"){U-=Ba[0]/2,b=[],Ln=$e.length;for(var Xl=0;Xl<Ln;Xl++)Xl===0?(la=V(U),oa=pe(ae)):(la=L((Yl-Ba[Xl])/2),oa=-pu),b.push([$e[Xl],la,oa]),Yl=Ba[Xl]}else if(Bt==="left"){b=[],Ln=$e.length;for(var uf=0;uf<Ln;uf++)b.push($e[uf])}else if(Bt==="justify"&&cf.encoding==="Identity-H"){b=[],Ln=$e.length,qt=qt!==0?qt:lf;for(var fh=0,fi=0;fi<Ln;fi++)if(oa=fi===0?pe(ae):-pu,la=fi===0?V(U):fh,fi<Ln-1){var Bp=L((qt-Ba[fi])/($e[fi].split(" ").length-1)),Po=$e[fi].split(" ");b.push([Po[0]+" ",la,oa]),fh=0;for(var Lo=1;Lo<Po.length;Lo++){var hf=(mu(Po[Lo-1]+" "+Po[Lo])-mu(Po[Lo]))*We+Bp;Lo==Po.length-1?b.push([Po[Lo],hf,0]):b.push([Po[Lo]+" ",hf,0]),fh-=hf}}else b.push([$e[fi],la,oa]);b.push(["",fh,0])}else{if(Bt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(b=[],Ln=$e.length,qt=qt!==0?qt:lf,fi=0;fi<Ln;fi++){oa=fi===0?pe(ae):-pu,la=fi===0?V(U):0;var df=$e[fi].split(" ").length-1,ff=df>0?(qt-Ba[fi])/df:0;fi<Ln-1?Kl.push(k(L(ff))):Kl.push(0),b.push([$e[fi],la,oa])}}}(typeof xe.R2L=="boolean"?xe.R2L:st)===!0&&(b=In(b,function(an,En,pi){return[an.split("").reverse().join(""),En,pi]})),Ee={text:b,x:U,y:ae,options:xe,mutex:{pdfEscape:vr,activeFontKey:Rt,fonts:Ge,activeFontSize:fe}},Tt.publish("postProcessText",Ee),b=Ee.text,M=Ee.mutex.isHex||!1;var pf=Ge[Rt].encoding;pf!=="WinAnsiEncoding"&&pf!=="StandardEncoding"||(b=In(b,function(an,En,pi){return[bt(an),En,pi]})),$e=gr(b),b=[];for(var Ql,Jl,Zl,gu=Array.isArray($e[0])?1:0,ec="",xu=function(an,En,pi){var Ri="";return pi instanceof Jt?(pi=typeof xe.angle=="number"?qn(pi,new Jt(1,0,0,1,an,En)):qn(new Jt(1,0,0,1,an,En),pi),j===C&&(pi=qn(new Jt(1,0,0,-1,0,0),pi)),Ri=pi.join(" ")+` Tm
`):Ri=k(an)+" "+k(En)+` Td
`,Ri},Ua=0;Ua<$e.length;Ua++){switch(ec="",gu){case 1:Zl=(M?"<":"(")+$e[Ua][0]+(M?">":")"),Ql=parseFloat($e[Ua][1]),Jl=parseFloat($e[Ua][2]);break;case 0:Zl=(M?"<":"(")+$e[Ua]+(M?">":")"),Ql=V(U),Jl=pe(ae)}Kl!==void 0&&Kl[Ua]!==void 0&&(ec=Kl[Ua]+` Tw
`),Ua===0?b.push(ec+xu(Ql,Jl,un)+Zl):gu===0?b.push(ec+Zl):gu===1&&b.push(ec+xu(Ql,Jl,un)+Zl)}b=gu===0?b.join(` Tj
T* `):b.join(` Tj
`),b+=` Tj
`;var Ro=`BT
/`;return Ro+=Rt+" "+fe+` Tf
`,Ro+=k(fe*Fe)+` TL
`,Ro+=er+`
`,Ro+=J,Ro+=b,te(Ro+="ET"),p[Rt]=!0,g};var to=d.__private__.clip=d.clip=function(b){return te(b==="evenodd"?"W*":"W"),this};d.clipEvenOdd=function(){return to("evenodd")},d.__private__.discardPath=d.discardPath=function(){return te("n"),this};var Ws=d.__private__.isValidStyle=function(b){var U=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(b)!==-1&&(U=!0),U};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(b){return Ws(b)&&(u=b),this};var ei=d.__private__.getStyle=d.getStyle=function(b){var U=u;switch(b){case"D":case"S":U="S";break;case"F":U="f";break;case"FD":case"DF":U="B";break;case"f":case"f*":case"B":case"B*":U=b}return U},ja=d.close=function(){return te("h"),this};d.stroke=function(){return te("S"),this},d.fill=function(b){return ds("f",b),this},d.fillEvenOdd=function(b){return ds("f*",b),this},d.fillStroke=function(b){return ds("B",b),this},d.fillStrokeEvenOdd=function(b){return ds("B*",b),this};var ds=function(b,U){gn(U)==="object"?ql(U,b):te(b)},Fa=function(b){b===null||j===C&&b===void 0||(b=ei(b),te(b))};function Hl(b,U,ae,xe,Le){var Ee=new Jh(U||this.boundingBox,ae||this.xStep,xe||this.yStep,this.gState,Le||this.matrix);Ee.stream=this.stream;var $e=b+"$$"+this.cloneIndex+++"$$";return ln($e,Ee),Ee}var ql=function(b,U){var ae=Pr[b.key],xe=Kt[ae];if(xe instanceof Eu)te("q"),te($l(U)),xe.gState&&d.setGState(xe.gState),te(b.matrix.toString()+" cm"),te("/"+ae+" sh"),te("Q");else if(xe instanceof Jh){var Le=new Jt(1,0,0,-1,0,ar());b.matrix&&(Le=Le.multiply(b.matrix||rn),ae=Hl.call(xe,b.key,b.boundingBox,b.xStep,b.yStep,Le).id),te("q"),te("/Pattern cs"),te("/"+ae+" scn"),xe.gState&&d.setGState(xe.gState),te(U),te("Q")}},$l=function(b){switch(b){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ro=d.moveTo=function(b,U){return te(k(L(b))+" "+k(se(U))+" m"),this},Gs=d.lineTo=function(b,U){return te(k(L(b))+" "+k(se(U))+" l"),this},fs=d.curveTo=function(b,U,ae,xe,Le,Ee){return te([k(L(b)),k(se(U)),k(L(ae)),k(se(xe)),k(L(Le)),k(se(Ee)),"c"].join(" ")),this};d.__private__.line=d.line=function(b,U,ae,xe,Le){if(isNaN(b)||isNaN(U)||isNaN(ae)||isNaN(xe)||!Ws(Le))throw new Error("Invalid arguments passed to jsPDF.line");return j===S?this.lines([[ae-b,xe-U]],b,U,[1,1],Le||"S"):this.lines([[ae-b,xe-U]],b,U,[1,1]).stroke()},d.__private__.lines=d.lines=function(b,U,ae,xe,Le,Ee){var $e,Ft,Bt,_t,qt,Cr,sn,un,g,I,M,J;if(typeof b=="number"&&(J=ae,ae=U,U=b,b=J),xe=xe||[1,1],Ee=Ee||!1,isNaN(U)||isNaN(ae)||!Array.isArray(b)||!Array.isArray(xe)||!Ws(Le)||typeof Ee!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ro(U,ae),$e=xe[0],Ft=xe[1],_t=b.length,I=U,M=ae,Bt=0;Bt<_t;Bt++)(qt=b[Bt]).length===2?(I=qt[0]*$e+I,M=qt[1]*Ft+M,Gs(I,M)):(Cr=qt[0]*$e+I,sn=qt[1]*Ft+M,un=qt[2]*$e+I,g=qt[3]*Ft+M,I=qt[4]*$e+I,M=qt[5]*Ft+M,fs(Cr,sn,un,g,I,M));return Ee&&ja(),Fa(Le),this},d.path=function(b){for(var U=0;U<b.length;U++){var ae=b[U],xe=ae.c;switch(ae.op){case"m":ro(xe[0],xe[1]);break;case"l":Gs(xe[0],xe[1]);break;case"c":fs.apply(this,xe);break;case"h":ja()}}return this},d.__private__.rect=d.rect=function(b,U,ae,xe,Le){if(isNaN(b)||isNaN(U)||isNaN(ae)||isNaN(xe)||!Ws(Le))throw new Error("Invalid arguments passed to jsPDF.rect");return j===S&&(xe=-xe),te([k(L(b)),k(se(U)),k(L(ae)),k(L(xe)),"re"].join(" ")),Fa(Le),this},d.__private__.triangle=d.triangle=function(b,U,ae,xe,Le,Ee,$e){if(isNaN(b)||isNaN(U)||isNaN(ae)||isNaN(xe)||isNaN(Le)||isNaN(Ee)||!Ws($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-b,xe-U],[Le-ae,Ee-xe],[b-Le,U-Ee]],b,U,[1,1],$e,!0),this},d.__private__.roundedRect=d.roundedRect=function(b,U,ae,xe,Le,Ee,$e){if(isNaN(b)||isNaN(U)||isNaN(ae)||isNaN(xe)||isNaN(Le)||isNaN(Ee)||!Ws($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ft=4/3*(Math.SQRT2-1);return Le=Math.min(Le,.5*ae),Ee=Math.min(Ee,.5*xe),this.lines([[ae-2*Le,0],[Le*Ft,0,Le,Ee-Ee*Ft,Le,Ee],[0,xe-2*Ee],[0,Ee*Ft,-Le*Ft,Ee,-Le,Ee],[2*Le-ae,0],[-Le*Ft,0,-Le,-Ee*Ft,-Le,-Ee],[0,2*Ee-xe],[0,-Ee*Ft,Le*Ft,-Ee,Le,-Ee]],b+Le,U,[1,1],$e,!0),this},d.__private__.ellipse=d.ellipse=function(b,U,ae,xe,Le){if(isNaN(b)||isNaN(U)||isNaN(ae)||isNaN(xe)||!Ws(Le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ee=4/3*(Math.SQRT2-1)*ae,$e=4/3*(Math.SQRT2-1)*xe;return ro(b+ae,U),fs(b+ae,U-$e,b+Ee,U-xe,b,U-xe),fs(b-Ee,U-xe,b-ae,U-$e,b-ae,U),fs(b-ae,U+$e,b-Ee,U+xe,b,U+xe),fs(b+Ee,U+xe,b+ae,U+$e,b+ae,U),Fa(Le),this},d.__private__.circle=d.circle=function(b,U,ae,xe){if(isNaN(b)||isNaN(U)||isNaN(ae)||!Ws(xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(b,U,ae,ae,xe)},d.setFont=function(b,U,ae){return ae&&(U=E(U,ae)),Rt=cn(b,U,{disableWarning:!1}),this};var Wl=d.__private__.getFont=d.getFont=function(){return Ge[cn.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var b,U,ae={};for(b in Lt)if(Lt.hasOwnProperty(b))for(U in ae[b]=[],Lt[b])Lt[b].hasOwnProperty(U)&&ae[b].push(U);return ae},d.addFont=function(b,U,ae,xe,Le){var Ee=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ee.indexOf(arguments[3])!==-1?Le=arguments[3]:arguments[3]&&Ee.indexOf(arguments[3])==-1&&(ae=E(ae,xe)),Tr.call(this,b,U,ae,Le=Le||"Identity-H")};var Da,Xi=t.lineWidth||.200025,Gl=d.__private__.getLineWidth=d.getLineWidth=function(){return Xi},cr=d.__private__.setLineWidth=d.setLineWidth=function(b){return Xi=b,te(k(L(b))+" w"),this};d.__private__.setLineDash=ir.API.setLineDash=ir.API.setLineDashPattern=function(b,U){if(b=b||[],U=U||0,isNaN(U)||!Array.isArray(b))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return b=b.map(function(ae){return k(L(ae))}).join(" "),U=k(L(U)),te("["+b+"] "+U+" d"),this};var no=d.__private__.getLineHeight=d.getLineHeight=function(){return fe*Da};d.__private__.getLineHeight=d.getLineHeight=function(){return fe*Da};var nl=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(b){return typeof(b=b||1.15)=="number"&&(Da=b),this},Ma=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return Da};nl(t.lineHeight);var V=d.__private__.getHorizontalCoordinate=function(b){return L(b)},pe=d.__private__.getVerticalCoordinate=function(b){return j===C?b:Ye[O].mediaBox.topRightY-Ye[O].mediaBox.bottomLeftY-L(b)},Re=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(b){return k(V(b))},Ve=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(b){return k(pe(b))},it=t.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return oe(it)},d.__private__.setStrokeColor=d.setDrawColor=function(b,U,ae,xe){return it=le({ch1:b,ch2:U,ch3:ae,ch4:xe,pdfColorType:"draw",precision:2}),te(it),this};var Qe=t.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return oe(Qe)},d.__private__.setFillColor=d.setFillColor=function(b,U,ae,xe){return Qe=le({ch1:b,ch2:U,ch3:ae,ch4:xe,pdfColorType:"fill",precision:2}),te(Qe),this};var er=t.textColor||"0 g",Mt=d.__private__.getTextColor=d.getTextColor=function(){return oe(er)};d.__private__.setTextColor=d.setTextColor=function(b,U,ae,xe){return er=le({ch1:b,ch2:U,ch3:ae,ch4:xe,pdfColorType:"text",precision:3}),this};var At=t.charSpace,ur=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(At||0)};d.__private__.setCharSpace=d.setCharSpace=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return At=b,this};var Ot=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(b){var U=d.CapJoinStyles[b];if(U===void 0)throw new Error("Line cap style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ot=U,te(U+" J"),this};var ut=0;d.__private__.setLineJoin=d.setLineJoin=function(b){var U=d.CapJoinStyles[b];if(U===void 0)throw new Error("Line join style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ut=U,te(U+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(b){if(b=b||0,isNaN(b))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(k(L(b))+" M"),this},d.GState=k1,d.setGState=function(b){(b=typeof b=="string"?Qt[Zt[b]]:sr(null,b)).equals(qr)||(te("/"+b.id+" gs"),qr=b)};var sr=function(b,U){if(!b||!Zt[b]){var ae=!1;for(var xe in Qt)if(Qt.hasOwnProperty(xe)&&Qt[xe].equals(U)){ae=!0;break}if(ae)U=Qt[xe];else{var Le="GS"+(Object.keys(Qt).length+1).toString(10);Qt[Le]=U,U.id=Le}return b&&(Zt[b]=U.id),Tt.publish("addGState",U),U}};d.addGState=function(b,U){return sr(b,U),this},d.saveGraphicsState=function(){return te("q"),mr.push({key:Rt,size:fe,color:er}),this},d.restoreGraphicsState=function(){te("Q");var b=mr.pop();return Rt=b.key,fe=b.size,er=b.color,qr=null,this},d.setCurrentTransformationMatrix=function(b){return te(b.toString()+" cm"),this},d.comment=function(b){return te("#"+b),this};var wt=function(b,U){var ae=b||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(Ee){isNaN(Ee)||(ae=parseFloat(Ee))}});var xe=U||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return xe},set:function(Ee){isNaN(Ee)||(xe=parseFloat(Ee))}});var Le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Le},set:function(Ee){Le=Ee.toString()}}),this},Rr=function(b,U,ae,xe){wt.call(this,b,U),this.type="rect";var Le=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Le},set:function($e){isNaN($e)||(Le=parseFloat($e))}});var Ee=xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ee},set:function($e){isNaN($e)||(Ee=parseFloat($e))}}),this},Ar=function(){this.page=Wt,this.currentPage=O,this.pages=Xe.slice(0),this.pagesContext=Ye.slice(0),this.x=Dt,this.y=Wr,this.matrix=hr,this.width=Ls(O),this.height=aa(O),this.outputDestination=ot,this.id="",this.objectNumber=-1};Ar.prototype.restore=function(){Wt=this.page,O=this.currentPage,Ye=this.pagesContext,Xe=this.pages,Dt=this.x,Wr=this.y,hr=this.matrix,kr(O,this.width),ti(O,this.height),ot=this.outputDestination};var jr=function(b,U,ae,xe,Le){Fn.push(new Ar),Wt=O=0,Xe=[],Dt=b,Wr=U,hr=Le,nn([ae,xe])};for(var An in d.beginFormObject=function(b,U,ae,xe,Le){return jr(b,U,ae,xe,Le),this},d.endFormObject=function(b){return function(U){if(yr[U])Fn.pop().restore();else{var ae=new Ar,xe="Xo"+(Object.keys(Sr).length+1).toString(10);ae.id=xe,yr[U]=xe,Sr[xe]=ae,Tt.publish("addFormObject",ae),Fn.pop().restore()}}(b),this},d.doFormObject=function(b,U){var ae=Sr[yr[b]];return te("q"),te(U.toString()+" cm"),te("/"+ae.id+" Do"),te("Q"),this},d.getFormObject=function(b){var U=Sr[yr[b]];return{x:U.x,y:U.y,width:U.width,height:U.height,matrix:U.matrix}},d.save=function(b,U){return b=b||"generated.pdf",(U=U||{}).returnPromise=U.returnPromise||!1,U.returnPromise===!1?(Su(Or(wn()),b),typeof Su.unload=="function"&&fr.setTimeout&&setTimeout(Su.unload,911),this):new Promise(function(ae,xe){try{var Le=Su(Or(wn()),b);typeof Su.unload=="function"&&fr.setTimeout&&setTimeout(Su.unload,911),ae(Le)}catch(Ee){xe(Ee.message)}})},ir.API)ir.API.hasOwnProperty(An)&&(An==="events"&&ir.API.events.length?function(b,U){var ae,xe,Le;for(Le=U.length-1;Le!==-1;Le--)ae=U[Le][0],xe=U[Le][1],b.subscribe.apply(b,[ae].concat(typeof xe=="function"?[xe]:xe))}(Tt,ir.API.events):d[An]=ir.API[An]);function Ls(b){return Ye[b].mediaBox.topRightX-Ye[b].mediaBox.bottomLeftX}function kr(b,U){Ye[b].mediaBox.topRightX=U+Ye[b].mediaBox.bottomLeftX}function aa(b){return Ye[b].mediaBox.topRightY-Ye[b].mediaBox.bottomLeftY}function ti(b,U){Ye[b].mediaBox.topRightY=U+Ye[b].mediaBox.bottomLeftY}var ps=d.getPageWidth=function(b){return Ls(b=b||O)/jt},ri=d.setPageWidth=function(b,U){kr(b,U*jt)},ar=d.getPageHeight=function(b){return aa(b=b||O)/jt},ni=d.setPageHeight=function(b,U){ti(b,U*jt)};return d.internal={pdfEscape:vr,getStyle:ei,getFont:Wl,getFontSize:Ke,getCharSpace:ur,getTextColor:Mt,getLineHeight:no,getLineHeightFactor:Ma,getLineWidth:Gl,write:ke,getHorizontalCoordinate:V,getVerticalCoordinate:pe,getCoordinateString:Re,getVerticalCoordinateString:Ve,collections:{},newObject:Mr,newAdditionalObject:ie,newObjectDeferred:Zr,newObjectDeferredBegin:W,getFilters:De,putStream:Te,events:Tt,scaleFactor:jt,pageSize:{getWidth:function(){return ps(O)},setWidth:function(b){ri(O,b)},getHeight:function(){return ar(O)},setHeight:function(b){ni(O,b)}},encryptionOptions:h,encryption:Sn,getEncryptor:function(b){return h!==null?Sn.encryptor(b,0):function(U){return U}},output:Ra,getNumberOfPages:Jn,get pages(){return Xe},out:te,f2:N,f3:R,getPageInfo:$s,getPageInfoByObjId:Io,getCurrentPageInfo:fu,getPDFVersion:y,Point:wt,Rectangle:Rr,Matrix:Jt,hasHotfix:Zn},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return ps(O)},set:function(b){ri(O,b)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return ar(O)},set:function(b){ni(O,b)},enumerable:!0,configurable:!0}),(function(b){for(var U=0,ae=me.length;U<ae;U++){var xe=Tr.call(this,b[U][0],b[U][1],b[U][2],me[U][3],!0);f===!1&&(p[xe]=!0);var Le=b[U][0].split("-");rr({id:xe,fontName:Le[0],fontStyle:Le[1]||""})}Tt.publish("addFonts",{fonts:Ge,dictionary:Lt})}).call(d,me),Rt="F1",$n(i,r),Tt.publish("initialized"),d}Ch.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Ch.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ch.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Ch.prototype.processOwnerPassword=function(t,e){return bw(_w(e).substr(0,5),t)},Ch.prototype.encryptor=function(t,e){var r=_w(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return bw(r,n)}},k1.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||gn(t)!==gn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},ir.API={events:[]},ir.version="4.0.0";var ai=ir.API,L_=1,ah=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},vh=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},wr=function(t){return t.toFixed(2)},uc=function(t){return t.toFixed(5)};ai.__acroform__={};var sa=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},BA=function(t){return t*L_},Do=function(t){var e=new WI,r=Gt.internal.getHeight(t)||0,n=Gt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(wr(n)),Number(wr(r))],e},iq=ai.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},sq=ai.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},aq=ai.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},_i=ai.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return aq(t,e-1)},bi=ai.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return iq(t,e-1)},Si=ai.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return sq(t,e-1)},oq=ai.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],s=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=r(i)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(i+a)||0,l.upperRight_Y=n(s)||0,[Number(wr(l.lowerLeft_X)),Number(wr(l.lowerLeft_Y)),Number(wr(l.upperRight_X)),Number(wr(l.upperRight_Y))]},lq=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Sw(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+wr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Do(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Sw=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(N){return N.split(`
`)}):i.map(function(N){return[N]});var s=r,a=Gt.internal.getHeight(t)||0;a=a<0?-a:a;var o=Gt.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(N,R,L){if(N+1<i.length){var se=R+" "+i[N+1][0];return Fm(se,t,L).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,h,f=Fm("3",t,s).height,p=t.multiline?a-s:(a-f)/2,d=p+=2,v=0,y=0,_=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Fm(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var w="",S=0,C=0;C<i.length;C++)if(i.hasOwnProperty(C)){var j=!1;if(i[C].length!==1&&_!==i[C].length-1){if((f+2)*(S+2)+2>a)continue e;w+=i[C][_],j=!0,y=C,C--}else{w=(w+=i[C][_]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var q=parseInt(C),G=l(q,w,s),E=C>=i.length-1;if(G&&!E){w+=" ",_=0;continue}if(G||E){if(E)y=q;else if(t.multiline&&(f+2)*(S+2)+2>a)continue e}else{if(!t.multiline||(f+2)*(S+2)+2>a)continue e;y=q}}for(var k="",A=v;A<=y;A++){var D=i[A];if(t.multiline){if(A===y){k+=D[_]+" ",_=(_+1)%D.length;continue}if(A===v){k+=D[D.length-1]+" ";continue}}k+=D[0]+" "}switch(k=k.substr(k.length-1)==" "?k.substr(0,k.length-1):k,h=Fm(k,t,s).width,t.textAlign){case"right":u=o-h-2;break;case"center":u=(o-h)/2;break;default:u=2}e+=wr(u)+" "+wr(d)+` Td
`,e+="("+ah(k)+`) Tj
`,e+=-wr(u)+` 0 Td
`,d=-(s+2),h=0,v=j?y:y+1,S++,w=""}break}return n.text=e,n.fontSize=s,n},Fm=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},cq={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},uq=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},hq=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ko.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(cq)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");L_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new GI,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&uq(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var s=!n;for(var a in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],l=[],u=o.Rect;if(o.Rect&&(o.Rect=oq(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Gt.createDefaultAppearanceStream(o),gn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var h=lq(o);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(o.appearanceStreamContent){var f="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var d=o.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var a in d)if(d.hasOwnProperty(a)){var v=d[a];typeof v=="function"&&(v=v.call(i,o)),f+="/"+a+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=d)=="function"&&(v=v.call(i,o)),f+="/"+a+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}s&&function(y,_){for(var w in y)if(y.hasOwnProperty(w)){var S=w,C=y[w];_.internal.newObjectDeferredBegin(C.objId,!0),gn(C)==="object"&&typeof C.putStream=="function"&&C.putStream(),delete y[S]}}(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},$I=ai.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),gn(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+ah(n(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Sy=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+ah(n(t))+")"},qo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qo.prototype.toString=function(){return this.objId+" 0 R"},qo.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},qo.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:$I(i,this.objId,this.scope)}):i instanceof qo?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var WI=function(){qo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};sa(WI,qo);var GI=function(){qo.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+ah(r(t))+")"}},set:function(r){t=r}})};sa(GI,qo);var ko=function t(){qo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!_i(e,3)},set:function(w){w?this.F=bi(e,3):this.F=Si(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');r=w}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(w){n=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(w){n[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(w){n[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(w){n[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(w){n[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof C1)return;s="FieldObject"+t.FieldNum++}var w=function(S){return S};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+ah(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/L_:u},set:function(w){u=w}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(w){h=w}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof C1||this instanceof Mu))return Sy(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=w}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof qi==0?Sy(p,this.objId,this.scope):p},set:function(w){w=w.toString(),p=this instanceof qi==0?w.substr(0,1)==="("?vh(w.substr(1,w.length-2)):vh(w):w}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof qi==1?vh(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof qi==1?"/"+w:w}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof qi==0?Sy(d,this.objId,this.scope):d},set:function(w){w=w.toString(),d=this instanceof qi==0?w.substr(0,1)==="("?vh(w.substr(1,w.length-2)):vh(w):w}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof qi==1?vh(d.substr(1,d.length-1)):d},set:function(w){w=w.toString(),d=this instanceof qi==1?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(w){w=!!w,y=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(w){v=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,1)},set:function(w){w?this.Ff=bi(this.Ff,1):this.Ff=Si(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,2)},set:function(w){w?this.Ff=bi(this.Ff,2):this.Ff=Si(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,3)},set:function(w){w?this.Ff=bi(this.Ff,3):this.Ff=Si(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');_=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(_){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:_=2;break;case"center":case 1:_=1;break;default:_=0}}})};sa(ko,qo);var fd=function(){ko.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return $I(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(s,a,o){o||(o=1);for(var l,u=[];l=a.exec(s);)u.push(l[o]);return u}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,18)},set:function(r){r?this.Ff=bi(this.Ff,18):this.Ff=Si(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=bi(this.Ff,19):this.Ff=Si(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,20)},set:function(r){r?(this.Ff=bi(this.Ff,20),e.sort()):this.Ff=Si(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,22)},set:function(r){r?this.Ff=bi(this.Ff,22):this.Ff=Si(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,23)},set:function(r){r?this.Ff=bi(this.Ff,23):this.Ff=Si(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,27)},set:function(r){r?this.Ff=bi(this.Ff,27):this.Ff=Si(this.Ff,27)}}),this.hasAppearanceStream=!1};sa(fd,ko);var pd=function(){fd.call(this),this.fontName="helvetica",this.combo=!1};sa(pd,fd);var md=function(){pd.call(this),this.combo=!0};sa(md,pd);var Eg=function(){md.call(this),this.edit=!0};sa(Eg,md);var qi=function(){ko.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,15)},set:function(r){r?this.Ff=bi(this.Ff,15):this.Ff=Si(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,16)},set:function(r){r?this.Ff=bi(this.Ff,16):this.Ff=Si(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,17)},set:function(r){r?this.Ff=bi(this.Ff,17):this.Ff=Si(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,26)},set:function(r){r?this.Ff=bi(this.Ff,26):this.Ff=Si(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+ah(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){gn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};sa(qi,ko);var Ng=function(){qi.call(this),this.pushButton=!0};sa(Ng,qi);var gd=function(){qi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};sa(gd,qi);var C1=function(){var t,e;ko.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),n)a.push("/"+s+" ("+ah(i(n[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){gn(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Gt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};sa(C1,ko),gd.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},gd.prototype.createOption=function(t){var e=new C1;return e.Parent=this,e.optionName=t,this.Kids.push(e),dq.call(this.scope,e),e};var Tg=function(){qi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Gt.CheckBox.createAppearanceStream()};sa(Tg,qi);var Mu=function(){ko.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,13)},set:function(e){e?this.Ff=bi(this.Ff,13):this.Ff=Si(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,21)},set:function(e){e?this.Ff=bi(this.Ff,21):this.Ff=Si(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,23)},set:function(e){e?this.Ff=bi(this.Ff,23):this.Ff=Si(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,24)},set:function(e){e?this.Ff=bi(this.Ff,24):this.Ff=Si(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,25)},set:function(e){e?this.Ff=bi(this.Ff,25):this.Ff=Si(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,26)},set:function(e){e?this.Ff=bi(this.Ff,26):this.Ff=Si(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};sa(Mu,ko);var kg=function(){Mu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,14)},set:function(t){t?this.Ff=bi(this.Ff,14):this.Ff=Si(this.Ff,14)}}),this.password=!0};sa(kg,Mu);var Gt={CheckBox:{createAppearanceStream:function(){return{N:{On:Gt.CheckBox.YesNormal},D:{On:Gt.CheckBox.YesPushDown,Off:Gt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Do(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=Sw(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+wr(Gt.internal.getWidth(t))+" "+wr(Gt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+wr(s.fontSize)+" Tf "+i),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Do(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],s=Gt.internal.getHeight(t),a=Gt.internal.getWidth(t),o=Sw(t,t.caption);return i.push("1 g"),i.push("0 0 "+wr(a)+" "+wr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+wr(a-1)+" "+wr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+wr(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Do(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+wr(Gt.internal.getWidth(t))+" "+wr(Gt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Gt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Gt.RadioButton.Circle.YesNormal,e.D[t]=Gt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Do(t);e.scope=t.scope;var r=[],n=Gt.internal.getWidth(t)<=Gt.internal.getHeight(t)?Gt.internal.getWidth(t)/4:Gt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Gt.internal.Bezier_C,s=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+uc(Gt.internal.getWidth(t)/2)+" "+uc(Gt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Do(t);e.scope=t.scope;var r=[],n=Gt.internal.getWidth(t)<=Gt.internal.getHeight(t)?Gt.internal.getWidth(t)/4:Gt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*Gt.internal.Bezier_C).toFixed(5)),a=Number((n*Gt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+uc(Gt.internal.getWidth(t)/2)+" "+uc(Gt.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+uc(Gt.internal.getWidth(t)/2)+" "+uc(Gt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Do(t);e.scope=t.scope;var r=[],n=Gt.internal.getWidth(t)<=Gt.internal.getHeight(t)?Gt.internal.getWidth(t)/4:Gt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*Gt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+uc(Gt.internal.getWidth(t)/2)+" "+uc(Gt.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Gt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Gt.RadioButton.Cross.YesNormal,e.D[t]=Gt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Do(t);e.scope=t.scope;var r=[],n=Gt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+wr(Gt.internal.getWidth(t)-2)+" "+wr(Gt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(wr(n.x1.x)+" "+wr(n.x1.y)+" m"),r.push(wr(n.x2.x)+" "+wr(n.x2.y)+" l"),r.push(wr(n.x4.x)+" "+wr(n.x4.y)+" m"),r.push(wr(n.x3.x)+" "+wr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Do(t);e.scope=t.scope;var r=Gt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+wr(Gt.internal.getWidth(t))+" "+wr(Gt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+wr(Gt.internal.getWidth(t)-2)+" "+wr(Gt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(wr(r.x1.x)+" "+wr(r.x1.y)+" m"),n.push(wr(r.x2.x)+" "+wr(r.x2.y)+" l"),n.push(wr(r.x4.x)+" "+wr(r.x4.y)+" m"),n.push(wr(r.x3.x)+" "+wr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Do(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+wr(Gt.internal.getWidth(t))+" "+wr(Gt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Gt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Gt.internal.getWidth(t),r=Gt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Gt.internal.getWidth=function(t){var e=0;return gn(t)==="object"&&(e=BA(t.Rect[2])),e},Gt.internal.getHeight=function(t){var e=0;return gn(t)==="object"&&(e=BA(t.Rect[3])),e};var dq=ai.addField=function(t){if(hq(this,t),!(t instanceof ko))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ai.AcroFormChoiceField=fd,ai.AcroFormListBox=pd,ai.AcroFormComboBox=md,ai.AcroFormEditBox=Eg,ai.AcroFormButton=qi,ai.AcroFormPushButton=Ng,ai.AcroFormRadioButton=gd,ai.AcroFormCheckBox=Tg,ai.AcroFormTextField=Mu,ai.AcroFormPasswordField=kg,ai.AcroFormAppearance=Gt,ai.AcroForm={ChoiceField:fd,ListBox:pd,ComboBox:md,EditBox:Eg,Button:qi,PushButton:Ng,RadioButton:gd,CheckBox:Tg,TextField:Mu,PasswordField:kg,Appearance:Gt},ir.AcroForm={ChoiceField:fd,ListBox:pd,ComboBox:md,EditBox:Eg,Button:qi,PushButton:Ng,RadioButton:gd,CheckBox:Tg,TextField:Mu,PasswordField:kg,Appearance:Gt};ir.AcroForm;function KI(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(N,R){var L,se,ge,ve,ye,he=r;if((R=R||r)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(G(N))for(ye in n)for(ge=n[ye],L=0;L<ge.length;L+=1){for(ve=!0,se=0;se<ge[L].length;se+=1)if(ge[L][se]!==void 0&&ge[L][se]!==N[se]){ve=!1;break}if(ve===!0){he=ye;break}}else for(ye in n)for(ge=n[ye],L=0;L<ge.length;L+=1){for(ve=!0,se=0;se<ge[L].length;se+=1)if(ge[L][se]!==void 0&&ge[L][se]!==N.charCodeAt(se)){ve=!1;break}if(ve===!0){he=ye;break}}return he===r&&R!==r&&(he=R),he},s=function N(R){for(var L=this.internal.write,se=this.internal.putStream,ge=(0,this.internal.getFilters)();ge.indexOf("FlateEncode")!==-1;)ge.splice(ge.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var ve=[];if(ve.push({key:"Type",value:"/XObject"}),ve.push({key:"Subtype",value:"/Image"}),ve.push({key:"Width",value:R.width}),ve.push({key:"Height",value:R.height}),R.colorSpace===w.INDEXED?ve.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(ve.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===w.DEVICE_CMYK&&ve.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ve.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&ve.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)&&R.transparency.length>0){for(var ye="",he=0,_e=R.transparency.length;he<_e;he++)ye+=R.transparency[he]+" "+R.transparency[he]+" ";ve.push({key:"Mask",value:"["+ye+"]"})}R.sMask!==void 0&&ve.push({key:"SMask",value:R.objectId+1+" 0 R"});var Ue=R.filter!==void 0?["/"+R.filter]:void 0;if(se({data:R.data,additionalKeyValues:ve,alreadyAppliedFilters:Ue,objectId:R.objectId}),L("endobj"),"sMask"in R&&R.sMask!==void 0){var Ie,P=(Ie=R.sMaskBitsPerComponent)!==null&&Ie!==void 0?Ie:R.bitsPerComponent,O={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:P,data:R.sMask};"filter"in R&&(O.decodeParameters="/Predictor ".concat(R.predictor," /Colors 1 /BitsPerComponent ").concat(P," /Columns ").concat(R.width),O.filter=R.filter),N.call(this,O)}if(R.colorSpace===w.INDEXED){var B=this.internal.newObject();se({data:k(new Uint8Array(R.palette)),objectId:B}),L("endobj")}},a=function(){var N=this.internal.collections[e+"images"];for(var R in N)s.call(this,N[R])},o=function(){var N,R=this.internal.collections[e+"images"],L=this.internal.write;for(var se in R)L("/I"+(N=R[se]).index,N.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var N=this.internal.collections[e+"images"];return l.call(this),N},h=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(N){return typeof t["process"+N.toUpperCase()]=="function"},p=function(N){return gn(N)==="object"&&N.nodeType===1},d=function(N,R){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var L=""+N.getAttribute("src");if(L.indexOf("data:image/")===0)return Ag(unescape(L).split("base64,").pop());var se=t.loadFile(L,!0);if(se!==void 0)return se}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var ge;switch(R){case"PNG":ge="image/png";break;case"WEBP":ge="image/webp";break;default:ge="image/jpeg"}return Ag(N.toDataURL(ge,1).split("base64,").pop())}},v=function(N){var R=this.internal.collections[e+"images"];if(R){for(var L in R)if(N===R[L].alias)return R[L]}},y=function(N,R,L){return N||R||(N=-96,R=-96),N<0&&(N=-1*L.width*72/N/this.internal.scaleFactor),R<0&&(R=-1*L.height*72/R/this.internal.scaleFactor),N===0&&(N=R*L.width/L.height),R===0&&(R=N*L.height/L.width),[N,R]},_=function(N,R,L,se,ge,ve){var ye=y.call(this,L,se,ge),he=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,Ue=u.call(this);if(L=ye[0],se=ye[1],Ue[ge.index]=ge,ve){ve*=Math.PI/180;var Ie=Math.cos(ve),P=Math.sin(ve),O=function(z){return z.toFixed(4)},B=[O(Ie),O(P),O(-1*P),O(Ie),0,0,"cm"]}this.internal.write("q"),ve?(this.internal.write([1,"0","0",1,he(N),_e(R+se),"cm"].join(" ")),this.internal.write(B.join(" ")),this.internal.write([he(L),"0","0",he(se),"0","0","cm"].join(" "))):this.internal.write([he(L),"0","0",he(se),he(N),_e(R+se),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ge.index+" Do"),this.internal.write("Q")},w=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=t.__addimage__.sHashCode=function(N){var R,L,se=0;if(typeof N=="string")for(L=N.length,R=0;R<L;R++)se=(se<<5)-se+N.charCodeAt(R),se|=0;else if(G(N))for(L=N.byteLength/2,R=0;R<L;R++)se=(se<<5)-se+N[R],se|=0;return se},j=t.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var R=!0;return N.length===0&&(R=!1),N.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(R=!1),R},q=t.__addimage__.extractImageFromDataUrl=function(N){if(N==null||!(N=N.trim()).startsWith("data:"))return null;var R=N.indexOf(",");return R<0?null:N.substring(0,R).trim().endsWith("base64")?N.substring(R+1):null};t.__addimage__.isArrayBuffer=function(N){return N instanceof ArrayBuffer};var G=t.__addimage__.isArrayBufferView=function(N){return N instanceof Int8Array||N instanceof Uint8Array||N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array},E=t.__addimage__.binaryStringToUint8Array=function(N){for(var R=N.length,L=new Uint8Array(R),se=0;se<R;se++)L[se]=N.charCodeAt(se);return L},k=t.__addimage__.arrayBufferToBinaryString=function(N){for(var R="",L=G(N)?N:new Uint8Array(N),se=0;se<L.length;se+=8192)R+=String.fromCharCode.apply(null,L.subarray(se,se+8192));return R};t.addImage=function(){var N,R,L,se,ge,ve,ye,he,_e;if(typeof arguments[1]=="number"?(R=r,L=arguments[1],se=arguments[2],ge=arguments[3],ve=arguments[4],ye=arguments[5],he=arguments[6],_e=arguments[7]):(R=arguments[1],L=arguments[2],se=arguments[3],ge=arguments[4],ve=arguments[5],ye=arguments[6],he=arguments[7],_e=arguments[8]),gn(N=arguments[0])==="object"&&!p(N)&&"imageData"in N){var Ue=N;N=Ue.imageData,R=Ue.format||R||r,L=Ue.x||L||0,se=Ue.y||se||0,ge=Ue.w||Ue.width||ge,ve=Ue.h||Ue.height||ve,ye=Ue.alias||ye,he=Ue.compression||he,_e=Ue.rotation||Ue.angle||_e}var Ie=this.internal.getFilters();if(he===void 0&&Ie.indexOf("FlateEncode")!==-1&&(he="SLOW"),isNaN(L)||isNaN(se))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var P=A.call(this,N,R,ye,he);return _.call(this,L,se,ge,ve,P,_e),this};var A=function(N,R,L,se){var ge,ve,ye;if(typeof N=="string"&&i(N)===r){N=unescape(N);var he=D(N,!1);(he!==""||(he=t.loadFile(N,!0))!==void 0)&&(N=he)}if(p(N)&&(N=d(N,R)),R=i(N,R),!f(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((ye=L)==null||ye.length===0)&&(L=function(_e){return typeof _e=="string"||G(_e)?C(_e):G(_e.data)?C(_e.data):null}(N)),(ge=v.call(this,L))||(N instanceof Uint8Array||R==="RGBA"||(ve=N,N=E(N)),ge=this["process"+R.toUpperCase()](N,h.call(this),L,function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in t.image_compression?_e:S.NONE}(se),ve)),!ge)throw new Error("An unknown error occurred whilst processing the image.");return ge},D=t.__addimage__.convertBase64ToBinaryString=function(N,R){R=typeof R!="boolean"||R;var L,se="";if(typeof N=="string"){var ge;L=(ge=q(N))!==null&&ge!==void 0?ge:N;try{se=Ag(L)}catch(ve){if(R)throw j(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ve.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return se};t.getImageProperties=function(N){var R,L,se="";if(p(N)&&(N=d(N)),typeof N=="string"&&i(N)===r&&((se=D(N,!1))===""&&(se=t.loadFile(N)||""),N=se),L=i(N),!f(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(N instanceof Uint8Array||(N=E(N)),!(R=this["process"+L.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=L,R}})(ir.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};ir.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,h=!1,f=0;f<u.length&&!h;f++)switch((n=u[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){n=u[p];var d=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(y.objId),S=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+d(w(n.contents))+")",s+=" /Popup "+_.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+d(w(S))+") >>",y.content=s;var C=y.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+C,n.open&&(s+=" /Open true"),s+=" >>",_.content=s,this.internal.write(y.objId,"0 R",_.objId,"0 R");break;case"freetext":i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var j=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+d(v(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var q=this.annotations._nameMap[n.options.name];n.options.pageNumber=q.page,n.options.top=q.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+d(v(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var G=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+G+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+i),h:u(n+s)},options:a,type:"link"})},t.textWithLink=function(r,n,i,s){var a,o,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var h=this.splitTextToSize(r,o).length;a=Math.ceil(u*h)}else o=l,a=u;return this.text(r,n,i,s),i+=.2*u,s.align==="center"&&(n-=l/2),s.align==="right"&&(n-=l),this.link(n,i-u,o,a,s),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(ir.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=t.__arabicParser__.isArabicEndLetter=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(y){return a(y)&&i.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(y){var _=0,w=r,S="",C=0;for(_=0;_<y.length;_+=1)w[y.charCodeAt(_)]!==void 0?(C++,typeof(w=w[y.charCodeAt(_)])=="number"&&(S+=String.fromCharCode(w),w=r,C=0),_===y.length-1&&(w=r,S+=y.charAt(_-(C-1)),_-=C-1,C=0)):(w=r,S+=y.charAt(_-C),_-=C,C=0);return S};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(y,_,w){return a(y)?s(y)===!1?-1:!u(y)||!a(_)&&!a(w)||!a(w)&&o(_)||o(y)&&!a(_)||o(y)&&l(_)||o(y)&&o(_)?0:h(y)&&a(_)&&!o(_)&&a(w)&&u(w)?3:o(y)||!a(w)?1:2:-1},d=function(y){var _=0,w=0,S=0,C="",j="",q="",G=(y=y||"").split("\\s+"),E=[];for(_=0;_<G.length;_+=1){for(E.push(""),w=0;w<G[_].length;w+=1)C=G[_][w],j=G[_][w-1],q=G[_][w+1],a(C)?(S=p(C,j,q),E[_]+=S!==-1?String.fromCharCode(e[C.charCodeAt(0)][S]):C):E[_]+=C;E[_]=f(E[_])}return E.join(" ")},v=t.__arabicParser__.processArabic=t.processArabic=function(){var y,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(_)){var S=0;for(w=[],S=0;S<_.length;S+=1)Array.isArray(_[S])?w.push([d(_[S][0]),_[S][1],_[S][2]]):w.push([d(_[S])]);y=w}else y=d(_);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",v])}(ir.API),ir.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ir.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var d=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(y){v=y}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){n.call(this);var h=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,d=0,v=0,y=0,_=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=u.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(C,j){return C.concat(_.splitTextToSize(j,w))},[])):l=Array.isArray(l)?l:[l];for(var S=0;S<l.length;S++)d<(y=this.getStringUnitWidth(l[S],{font:f})*h)&&(d=y);return d!==0&&(v=l.length),{w:d/=p,h:Math.max((v*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,d=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,d&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,h,f,p){if(n.call(this),!h)throw new Error("No data for PDF table.");var d,v,y,_,w=[],S=[],C=[],j={},q={},G=[],E=[],k=(p=p||{}).autoSize||!1,A=p.printHeaders!==!1,D=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,N=p.margins||Object.assign({width:this.getPageWidth()},e),R=typeof p.padding=="number"?p.padding:3,L=p.headerBackgroundColor||"#c8c8c8",se=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=A,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=se,this.setFontSize(D),f==null)S=w=Object.keys(h[0]),C=w.map(function(){return"left"});else if(Array.isArray(f)&&gn(f[0])==="object")for(w=f.map(function(Ue){return Ue.name}),S=f.map(function(Ue){return Ue.prompt||Ue.name||""}),C=f.map(function(Ue){return Ue.align||"left"}),d=0;d<f.length;d+=1)q[f[d].name]=.7499990551181103*f[d].width;else Array.isArray(f)&&typeof f[0]=="string"&&(S=w=f,C=w.map(function(){return"left"}));if(k||Array.isArray(f)&&typeof f[0]=="string")for(d=0;d<w.length;d+=1){for(j[_=w[d]]=h.map(function(Ue){return Ue[_]}),this.setFont(void 0,"bold"),G.push(this.getTextDimensions(S[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=j[_],this.setFont(void 0,"normal"),y=0;y<v.length;y+=1)G.push(this.getTextDimensions(v[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[_]=Math.max.apply(null,G)+R+R,G=[]}if(A){var ge={};for(d=0;d<w.length;d+=1)ge[w[d]]={},ge[w[d]].text=S[d],ge[w[d]].align=C[d];var ve=o.call(this,ge,q);E=w.map(function(Ue){return new s(l,u,q[Ue],ve,ge[Ue].text,void 0,ge[Ue].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var ye=f.reduce(function(Ue,Ie){return Ue[Ie.name]=Ie.align,Ue},{});for(d=0;d<h.length;d+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:d,data:h[d]},this);var he=o.call(this,h[d],q);for(y=0;y<w.length;y+=1){var _e=h[d][w[y]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:d,col:y,data:_e},this),a.call(this,new s(l,u,q[w[y]],he,_e,d+2,ye[w[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var h=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(d){var v=l[d];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[d]-h-h)},this).map(function(d){return this.getLineHeightFactor()*d.length*f/p+h+h},this).reduce(function(d,v){return Math.max(d,v)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],d=0;d<this.internal.__cell__.tableHeaderRow.length;d+=1){h=this.internal.__cell__.tableHeaderRow[d].clone(),u&&(h.y=this.internal.__cell__.margins.top||0,p.push(h)),h.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,h),this.setTextColor(v)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(ir.API);var YI={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},XI=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Aw=KI(XI),QI=[100,200,300,400,500,600,700,800,900],fq=KI(QI);function Ay(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return YI[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),i=function(s){return typeof Aw[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function UA(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var pq={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},VA={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function zA(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function HA(t){return t.trimLeft()}function mq(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function gq(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Dm,qA,$A,wh,Mm,WA,GA,KA,Ey=["times"];function YA(t,e,r,n,i){var s=4,a=QA;switch(i){case ir.API.image_compression.FAST:s=1,a=XA;break;case ir.API.image_compression.MEDIUM:s=6,a=JA;break;case ir.API.image_compression.SLOW:s=9,a=ZA}t=function(l,u,h,f){for(var p,d=l.length/u,v=new Uint8Array(l.length+d),y=[xq,XA,QA,JA,ZA],_=0;_<d;_+=1){var w=_*u,S=l.subarray(w,w+u);if(f)v.set(f(S,h,p),w+_);else{for(var C=y.length,j=[],q=0;q<C;q+=1)j[q]=y[q](S,h,p);var G=vq(j.concat());v.set(j[G],w+_)}p=S}return v}(t,e,Math.ceil(r*n/8),a);var o=xw(t,{level:s});return ir.API.__addimage__.arrayBufferToBinaryString(o)}function xq(t){var e=Array.apply([],t);return e.unshift(0),e}function XA(t,e){var r=t.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var s=t[i-e]||0;n[i+1]=t[i]-s+256&255}return n}function QA(t,e,r){var n=t.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var a=r&&r[s]||0;i[s+1]=t[s]-a+256&255}return i}function JA(t,e,r){var n=t.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var a=t[s-e]||0,o=r&&r[s]||0;i[s+1]=t[s]+256-(a+o>>>1)&255}return i}function ZA(t,e,r){var n=t.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var a=yq(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);i[s+1]=t[s]-a+256&255}return i}function yq(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),i=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=i&&n<=s?t:i<=s?e:r}function vq(t){var e=t.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Ny(t,e,r){var n=e*r,i=Math.floor(n/8),s=16-(n-8*i+r),a=(1<<r)-1;return JI(t,i)>>s&a}function eE(t,e,r,n){var i=r*n,s=Math.floor(i/8),a=16-(i-8*s+n),o=(1<<n)-1,l=(e&o)<<a;(function(u,h,f){if(h+1<u.byteLength)u.setUint16(h,f,!1);else{var p=f>>8&255;u.setUint8(h,p)}})(t,s,JI(t,s)&~(o<<a)&65535|l)}function JI(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function wq(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,a=1<<1+(7&i);t[e++],t[e++];var o=null,l=null;s&&(o=e,l=a,e+=3*a);var u=!0,h=[],f=0,p=null,d=0,v=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,v=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];f=t[e++]|t[e++]<<8,p=t[e++],1&y||(p=null),d=y>>2&7,e++;break;case 254:for(;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,j=t[e++],q=j>>6&1,G=1<<1+(7&j),E=o,k=l,A=!1;j>>7&&(A=!0,E=e,k=G,e+=3*G);var D=e;for(e++;;){var N;if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}h.push({x:_,y:w,width:S,height:C,has_local_palette:A,palette_offset:E,palette_size:k,data_offset:D,data_length:e-D,transparent_index:p,interlaced:!!q,delay:f,disposal:d});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return v},this.frameInfo=function(R){if(R<0||R>=h.length)throw new Error("Frame index out of range.");return h[R]},this.decodeAndBlitFrameBGRA=function(R,L){var se=this.frameInfo(R),ge=se.width*se.height,ve=new Uint8Array(ge);tE(t,se.data_offset,ve,ge);var ye=se.palette_offset,he=se.transparent_index;he===null&&(he=256);var _e=se.width,Ue=r-_e,Ie=_e,P=4*(se.y*r+se.x),O=4*((se.y+se.height)*r+se.x),B=P,z=4*Ue;se.interlaced===!0&&(z+=4*r*7);for(var Z=8,de=0,Se=ve.length;de<Se;++de){var Ae=ve[de];if(Ie===0&&(Ie=_e,(B+=z)>=O&&(z=4*Ue+4*r*(Z-1),B=P+(_e+Ue)*(Z<<1),Z>>=1)),Ae===he)B+=4;else{var Ne=t[ye+3*Ae],Xe=t[ye+3*Ae+1],et=t[ye+3*Ae+2];L[B++]=et,L[B++]=Xe,L[B++]=Ne,L[B++]=255}--Ie}},this.decodeAndBlitFrameRGBA=function(R,L){var se=this.frameInfo(R),ge=se.width*se.height,ve=new Uint8Array(ge);tE(t,se.data_offset,ve,ge);var ye=se.palette_offset,he=se.transparent_index;he===null&&(he=256);var _e=se.width,Ue=r-_e,Ie=_e,P=4*(se.y*r+se.x),O=4*((se.y+se.height)*r+se.x),B=P,z=4*Ue;se.interlaced===!0&&(z+=4*r*7);for(var Z=8,de=0,Se=ve.length;de<Se;++de){var Ae=ve[de];if(Ie===0&&(Ie=_e,(B+=z)>=O&&(z=4*Ue+4*r*(Z-1),B=P+(_e+Ue)*(Z<<1),Z>>=1)),Ae===he)B+=4;else{var Ne=t[ye+3*Ae],Xe=t[ye+3*Ae+1],et=t[ye+3*Ae+2];L[B++]=Ne,L[B++]=Xe,L[B++]=et,L[B++]=255}--Ie}}}function tE(t,e,r,n){for(var i=t[e++],s=1<<i,a=s+1,o=a+1,l=i+1,u=(1<<l)-1,h=0,f=0,p=0,d=t[e++],v=new Int32Array(4096),y=null;;){for(;h<16&&d!==0;)f|=t[e++]<<h,h+=8,d===1?d=t[e++]:--d;if(h<l)break;var _=f&u;if(f>>=l,h-=l,_!==s){if(_===a)break;for(var w=_<o?_:y,S=0,C=w;C>s;)C=v[C]>>8,++S;var j=C;if(p+S+(w!==_?1:0)>n)return void Tn.log("Warning, gif stream longer than expected.");r[p++]=j;var q=p+=S;for(w!==_&&(r[p++]=j),C=w;S--;)C=v[C],r[--q]=255&C,C>>=8;y!==null&&o<4096&&(v[o++]=y<<8|j,o>=u+1&&l<12&&(++l,u=u<<1|1)),y=_}else o=a+1,u=(1<<(l=i+1))-1,y=null}return p!==n&&Tn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Ty(t){var e,r,n,i,s,a=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),h=new Array(64),f=new Array(65535),p=new Array(65535),d=new Array(64),v=new Array(64),y=[],_=0,w=7,S=new Array(64),C=new Array(64),j=new Array(64),q=new Array(256),G=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ge=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ve(P,O){for(var B=0,z=0,Z=new Array,de=1;de<=16;de++){for(var Se=1;Se<=P[de];Se++)Z[O[z]]=[],Z[O[z]][0]=B,Z[O[z]][1]=de,z++,B++;B*=2}return Z}function ye(P){for(var O=P[0],B=P[1]-1;B>=0;)O&1<<B&&(_|=1<<w),B--,--w<0&&(_==255?(he(255),he(0)):he(_),w=7,_=0)}function he(P){y.push(P)}function _e(P){he(P>>8&255),he(255&P)}function Ue(P,O,B,z,Z){for(var de,Se=Z[0],Ae=Z[240],Ne=function(fe,qe){var Ke,st,yt,Ht,be,tt,ct,St,Rt,jt,Dt=0;for(Rt=0;Rt<8;++Rt){Ke=fe[Dt],st=fe[Dt+1],yt=fe[Dt+2],Ht=fe[Dt+3],be=fe[Dt+4],tt=fe[Dt+5],ct=fe[Dt+6];var Wr=Ke+(St=fe[Dt+7]),hr=Ke-St,Ge=st+ct,Lt=st-ct,mr=yt+tt,Kt=yt-tt,Pr=Ht+be,Qt=Ht-be,Zt=Wr+Pr,qr=Wr-Pr,Wt=Ge+mr,Ye=Ge-mr;fe[Dt]=Zt+Wt,fe[Dt+4]=Zt-Wt;var Tt=.707106781*(Ye+qr);fe[Dt+2]=qr+Tt,fe[Dt+6]=qr-Tt;var on=.382683433*((Zt=Qt+Kt)-(Ye=Lt+hr)),Sr=.5411961*Zt+on,yr=1.306562965*Ye+on,Fn=.707106781*(Wt=Kt+Lt),Jt=hr+Fn,qn=hr-Fn;fe[Dt+5]=qn+Sr,fe[Dt+3]=qn-Sr,fe[Dt+1]=Jt+yr,fe[Dt+7]=Jt-yr,Dt+=8}for(Dt=0,Rt=0;Rt<8;++Rt){Ke=fe[Dt],st=fe[Dt+8],yt=fe[Dt+16],Ht=fe[Dt+24],be=fe[Dt+32],tt=fe[Dt+40],ct=fe[Dt+48];var rn=Ke+(St=fe[Dt+56]),ln=Ke-St,kn=st+ct,Mr=st-ct,Zr=yt+tt,W=yt-tt,ie=Ht+be,ee=Ht-be,ne=rn+ie,oe=rn-ie,le=kn+Zr,De=kn-Zr;fe[Dt]=ne+le,fe[Dt+32]=ne-le;var Te=.707106781*(De+oe);fe[Dt+16]=oe+Te,fe[Dt+48]=oe-Te;var je=.382683433*((ne=ee+W)-(De=Mr+ln)),Me=.5411961*ne+je,Oe=1.306562965*De+je,ht=.707106781*(le=W+Mr),gt=ln+ht,kt=ln-ht;fe[Dt+40]=kt+Me,fe[Dt+24]=kt-Me,fe[Dt+8]=gt+Oe,fe[Dt+56]=gt-Oe,Dt++}for(Rt=0;Rt<64;++Rt)jt=fe[Rt]*qe[Rt],d[Rt]=jt>0?jt+.5|0:jt-.5|0;return d}(P,O),Xe=0;Xe<64;++Xe)v[E[Xe]]=Ne[Xe];var et=v[0]-B;B=v[0],et==0?ye(z[0]):(ye(z[p[de=32767+et]]),ye(f[de]));for(var ot=63;ot>0&&v[ot]==0;)ot--;if(ot==0)return ye(Se),B;for(var mt,te=1;te<=ot;){for(var ke=te;v[te]==0&&te<=ot;)++te;var X=te-ke;if(X>=16){mt=X>>4;for(var me=1;me<=mt;++me)ye(Ae);X&=15}de=32767+v[te],ye(Z[(X<<4)+p[de]]),ye(f[de]),te++}return ot!=63&&ye(Se),B}function Ie(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(O){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],z=0;z<64;z++){var Z=a((B[z]*O+50)/100);Z=Math.min(Math.max(Z,1),255),o[E[z]]=Z}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Se=0;Se<64;Se++){var Ae=a((de[Se]*O+50)/100);Ae=Math.min(Math.max(Ae,1),255),l[E[Se]]=Ae}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Xe=0,et=0;et<8;et++)for(var ot=0;ot<8;ot++)u[Xe]=1/(o[E[Xe]]*Ne[et]*Ne[ot]*8),h[Xe]=1/(l[E[Xe]]*Ne[et]*Ne[ot]*8),Xe++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,O){O&&Ie(O),y=new Array,_=0,w=7,_e(65496),_e(65504),_e(16),he(74),he(70),he(73),he(70),he(0),he(1),he(1),he(0),_e(1),_e(1),he(0),he(0),function(){_e(65499),_e(132),he(0);for(var st=0;st<64;st++)he(o[st]);he(1);for(var yt=0;yt<64;yt++)he(l[yt])}(),function(st,yt){_e(65472),_e(17),he(8),_e(yt),_e(st),he(3),he(1),he(17),he(0),he(2),he(17),he(1),he(3),he(17),he(1)}(P.width,P.height),function(){_e(65476),_e(418),he(0);for(var st=0;st<16;st++)he(k[st+1]);for(var yt=0;yt<=11;yt++)he(A[yt]);he(16);for(var Ht=0;Ht<16;Ht++)he(D[Ht+1]);for(var be=0;be<=161;be++)he(N[be]);he(1);for(var tt=0;tt<16;tt++)he(R[tt+1]);for(var ct=0;ct<=11;ct++)he(L[ct]);he(17);for(var St=0;St<16;St++)he(se[St+1]);for(var Rt=0;Rt<=161;Rt++)he(ge[Rt])}(),_e(65498),_e(12),he(3),he(1),he(0),he(2),he(17),he(3),he(17),he(0),he(63),he(0);var B=0,z=0,Z=0;_=0,w=7,this.encode.displayName="_encode_";for(var de,Se,Ae,Ne,Xe,et,ot,mt,te,ke=P.data,X=P.width,me=P.height,fe=4*X,qe=0;qe<me;){for(de=0;de<fe;){for(Xe=fe*qe+de,ot=-1,mt=0,te=0;te<64;te++)et=Xe+(mt=te>>3)*fe+(ot=4*(7&te)),qe+mt>=me&&(et-=fe*(qe+1+mt-me)),de+ot>=fe&&(et-=de+ot-fe+4),Se=ke[et++],Ae=ke[et++],Ne=ke[et++],S[te]=(G[Se]+G[Ae+256|0]+G[Ne+512|0]>>16)-128,C[te]=(G[Se+768|0]+G[Ae+1024|0]+G[Ne+1280|0]>>16)-128,j[te]=(G[Se+1280|0]+G[Ae+1536|0]+G[Ne+1792|0]>>16)-128;B=Ue(S,u,B,e,n),z=Ue(C,h,z,r,i),Z=Ue(j,h,Z,r,i),de+=32}qe+=8}if(w>=0){var Ke=[];Ke[1]=w+1,Ke[0]=(1<<w+1)-1,ye(Ke)}return _e(65497),new Uint8Array(y)},t=t||50,function(){for(var P=String.fromCharCode,O=0;O<256;O++)q[O]=P(O)}(),e=ve(k,A),r=ve(R,L),n=ve(D,N),i=ve(se,ge),function(){for(var P=1,O=2,B=1;B<=15;B++){for(var z=P;z<O;z++)p[32767+z]=B,f[32767+z]=[],f[32767+z][1]=B,f[32767+z][0]=z;for(var Z=-(O-1);Z<=-P;Z++)p[32767+Z]=B,f[32767+Z]=[],f[32767+Z][1]=B,f[32767+Z][0]=O-1+Z;P<<=1,O<<=1}}(),function(){for(var P=0;P<256;P++)G[P]=19595*P,G[P+256|0]=38470*P,G[P+512|0]=7471*P+32768,G[P+768|0]=-11059*P,G[P+1024|0]=-21709*P,G[P+1280|0]=32768*P+8421375,G[P+1536|0]=-27439*P,G[P+1792|0]=-5329*P}(),Ie(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function lo(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function rE(t){function e(A){if(!A)throw Error("assert :P")}function r(A,D,N){for(var R=0;4>R;R++)if(A[D+R]!=N.charCodeAt(R))return!0;return!1}function n(A,D,N,R,L){for(var se=0;se<L;se++)A[D+se]=N[R+se]}function i(A,D,N,R){for(var L=0;L<R;L++)A[D+L]=N}function s(A){return new Int32Array(A)}function a(A,D){for(var N=[],R=0;R<A;R++)N.push(new D);return N}function o(A,D){var N=[];return function R(L,se,ge){for(var ve=ge[se],ye=0;ye<ve&&(L.push(ge.length>se+1?[]:new D),!(ge.length<se+1));ye++)R(L[ye],se+1,ge)}(N,0,A),N}var l=function(){var A=this;function D(m,x){for(var T=1<<x-1>>>0;m&T;)T>>>=1;return T?(m&T-1)+T:m}function N(m,x,T,F,H){e(!(F%T));do m[x+(F-=T)]=H;while(0<F)}function R(m,x,T,F,H){if(e(2328>=H),512>=H)var K=s(512);else if((K=s(H))==null)return 0;return function(Y,Q,re,ce,Ce,He){var ue,Pe,Be=Q,Ze=1<<re,ze=s(16),rt=s(16);for(e(Ce!=0),e(ce!=null),e(Y!=null),e(0<re),Pe=0;Pe<Ce;++Pe){if(15<ce[Pe])return 0;++ze[ce[Pe]]}if(ze[0]==Ce)return 0;for(rt[1]=0,ue=1;15>ue;++ue){if(ze[ue]>1<<ue)return 0;rt[ue+1]=rt[ue]+ze[ue]}for(Pe=0;Pe<Ce;++Pe)ue=ce[Pe],0<ce[Pe]&&(He[rt[ue]++]=Pe);if(rt[15]==1)return(ce=new L).g=0,ce.value=He[0],N(Y,Be,1,Ze,ce),Ze;var at,xt=-1,ft=Ze-1,nr=0,$t=1,Er=1,Yt=1<<re;for(Pe=0,ue=1,Ce=2;ue<=re;++ue,Ce<<=1){if($t+=Er<<=1,0>(Er-=ze[ue]))return 0;for(;0<ze[ue];--ze[ue])(ce=new L).g=ue,ce.value=He[Pe++],N(Y,Be+nr,Ce,Yt,ce),nr=D(nr,ue)}for(ue=re+1,Ce=2;15>=ue;++ue,Ce<<=1){if($t+=Er<<=1,0>(Er-=ze[ue]))return 0;for(;0<ze[ue];--ze[ue]){if(ce=new L,(nr&ft)!=xt){for(Be+=Yt,at=1<<(xt=ue)-re;15>xt&&!(0>=(at-=ze[xt]));)++xt,at<<=1;Ze+=Yt=1<<(at=xt-re),Y[Q+(xt=nr&ft)].g=at+re,Y[Q+xt].value=Be-Q-xt}ce.g=ue-re,ce.value=He[Pe++],N(Y,Be+(nr>>re),Ce,Yt,ce),nr=D(nr,ue)}}return $t!=2*rt[15]-1?0:Ze}(m,x,T,F,H,K)}function L(){this.value=this.g=0}function se(){this.value=this.g=0}function ge(){this.G=a(5,L),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(mu,se)}function ve(m,x,T,F){e(m!=null),e(x!=null),e(2147483648>F),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=x,m.pa=T,m.Jd=x,m.Yc=T+F,m.Zc=4<=F?T+F-4+1:T,Se(m)}function ye(m,x){for(var T=0;0<x--;)T|=Ne(m,128)<<x;return T}function he(m,x){var T=ye(m,x);return Ae(m)?-T:T}function _e(m,x,T,F){var H,K=0;for(e(m!=null),e(x!=null),e(4294967288>F),m.Sb=F,m.Ra=0,m.u=0,m.h=0,4<F&&(F=4),H=0;H<F;++H)K+=x[T+H]<<8*H;m.Ra=K,m.bb=F,m.oa=x,m.pa=T}function Ue(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<Yl-8>>>0,++m.bb,m.u-=8;z(m)&&(m.h=1,m.u=0)}function Ie(m,x){if(e(0<=x),!m.h&&x<=la){var T=B(m)&oa[x];return m.u+=x,Ue(m),T}return m.h=1,m.u=0}function P(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(m){return m.Ra>>>(m.u&Yl-1)>>>0}function z(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>Yl}function Z(m,x){m.u=x,m.h=z(m)}function de(m){m.u>=al&&(e(m.u>=al),Ue(m))}function Se(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function Ae(m){return ye(m,1)}function Ne(m,x){var T=m.Ca;0>m.b&&Se(m);var F=m.b,H=T*x>>>8,K=(m.I>>>F>H)+0;for(K?(T-=H,m.I-=H+1<<F>>>0):T=H+1,F=T,H=0;256<=F;)H+=8,F>>=8;return F=7^H+Xl[F],m.b-=F,m.Ca=(T<<F)-1,K}function Xe(m,x,T){m[x+0]=T>>24&255,m[x+1]=T>>16&255,m[x+2]=T>>8&255,m[x+3]=255&T}function et(m,x){return m[x+0]|m[x+1]<<8}function ot(m,x){return et(m,x)|m[x+2]<<16}function mt(m,x){return et(m,x)|et(m,x+2)<<16}function te(m,x){var T=1<<x;return e(m!=null),e(0<x),m.X=s(T),m.X==null?0:(m.Mb=32-x,m.Xa=x,1)}function ke(m,x){e(m!=null),e(x!=null),e(m.Xa==x.Xa),n(x.X,0,m.X,0,1<<x.Xa)}function X(){this.X=[],this.Xa=this.Mb=0}function me(m,x,T,F){e(T!=null),e(F!=null);var H=T[0],K=F[0];return H==0&&(H=(m*K+x/2)/x),K==0&&(K=(x*H+m/2)/m),0>=H||0>=K?0:(T[0]=H,F[0]=K,1)}function fe(m,x){return m+(1<<x)-1>>>x}function qe(m,x){return((4278255360&m)+(4278255360&x)>>>0&4278255360)+((16711935&m)+(16711935&x)>>>0&16711935)>>>0}function Ke(m,x){A[x]=function(T,F,H,K,Y,Q,re){var ce;for(ce=0;ce<Y;++ce){var Ce=A[m](Q[re+ce-1],H,K+ce);Q[re+ce]=qe(T[F+ce],Ce)}}}function st(){this.ud=this.hd=this.jd=0}function yt(m,x){return((4278124286&(m^x))>>>1)+(m&x)>>>0}function Ht(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function be(m,x){return Ht(m+(m-x+.5>>1))}function tt(m,x,T){return Math.abs(x-T)-Math.abs(m-T)}function ct(m,x,T,F,H,K,Y){for(F=K[Y-1],T=0;T<H;++T)K[Y+T]=F=qe(m[x+T],F)}function St(m,x,T,F,H){var K;for(K=0;K<T;++K){var Y=m[x+K],Q=Y>>8&255,re=16711935&(re=(re=16711935&Y)+((Q<<16)+Q));F[H+K]=(4278255360&Y)+re>>>0}}function Rt(m,x){x.jd=255&m,x.hd=m>>8&255,x.ud=m>>16&255}function jt(m,x,T,F,H,K){var Y;for(Y=0;Y<F;++Y){var Q=x[T+Y],re=Q>>>8,ce=Q,Ce=255&(Ce=(Ce=Q>>>16)+((m.jd<<24>>24)*(re<<24>>24)>>>5));ce=255&(ce=(ce+=(m.hd<<24>>24)*(re<<24>>24)>>>5)+((m.ud<<24>>24)*(Ce<<24>>24)>>>5)),H[K+Y]=(4278255360&Q)+(Ce<<16)+ce}}function Dt(m,x,T,F,H){A[x]=function(K,Y,Q,re,ce,Ce,He,ue,Pe){for(re=He;re<ue;++re)for(He=0;He<Pe;++He)ce[Ce++]=H(Q[F(K[Y++])])},A[m]=function(K,Y,Q,re,ce,Ce,He){var ue=8>>K.b,Pe=K.Ea,Be=K.K[0],Ze=K.w;if(8>ue)for(K=(1<<K.b)-1,Ze=(1<<ue)-1;Y<Q;++Y){var ze,rt=0;for(ze=0;ze<Pe;++ze)ze&K||(rt=F(re[ce++])),Ce[He++]=H(Be[rt&Ze]),rt>>=ue}else A["VP8LMapColor"+T](re,ce,Be,Ze,Ce,He,Y,Q,Pe)}}function Wr(m,x,T,F,H){for(T=x+T;x<T;){var K=m[x++];F[H++]=K>>16&255,F[H++]=K>>8&255,F[H++]=255&K}}function hr(m,x,T,F,H){for(T=x+T;x<T;){var K=m[x++];F[H++]=K>>16&255,F[H++]=K>>8&255,F[H++]=255&K,F[H++]=K>>24&255}}function Ge(m,x,T,F,H){for(T=x+T;x<T;){var K=(Y=m[x++])>>16&240|Y>>12&15,Y=240&Y|Y>>28&15;F[H++]=K,F[H++]=Y}}function Lt(m,x,T,F,H){for(T=x+T;x<T;){var K=(Y=m[x++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;F[H++]=K,F[H++]=Y}}function mr(m,x,T,F,H){for(T=x+T;x<T;){var K=m[x++];F[H++]=255&K,F[H++]=K>>8&255,F[H++]=K>>16&255}}function Kt(m,x,T,F,H,K){if(K==0)for(T=x+T;x<T;)Xe(F,((K=m[x++])[0]>>24|K[1]>>8&65280|K[2]<<8&16711680|K[3]<<24)>>>0),H+=32;else n(F,H,m,x,T)}function Pr(m,x){A[x][0]=A[m+"0"],A[x][1]=A[m+"1"],A[x][2]=A[m+"2"],A[x][3]=A[m+"3"],A[x][4]=A[m+"4"],A[x][5]=A[m+"5"],A[x][6]=A[m+"6"],A[x][7]=A[m+"7"],A[x][8]=A[m+"8"],A[x][9]=A[m+"9"],A[x][10]=A[m+"10"],A[x][11]=A[m+"11"],A[x][12]=A[m+"12"],A[x][13]=A[m+"13"],A[x][14]=A[m+"0"],A[x][15]=A[m+"0"]}function Qt(m){return m==Z2||m==ex||m==Wp||m==tx}function Zt(){this.eb=[],this.size=this.A=this.fb=0}function qr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Zt,this.f.kb=new qr,this.sd=null}function Ye(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Tt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function on(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Sr(m,x){var T=m.T,F=x.ba.f.RGBA,H=F.eb,K=F.fb+m.ka*F.A,Y=za[x.ba.S],Q=m.y,re=m.O,ce=m.f,Ce=m.N,He=m.ea,ue=m.W,Pe=x.cc,Be=x.dc,Ze=x.Mc,ze=x.Nc,rt=m.ka,at=m.ka+m.T,xt=m.U,ft=xt+1>>1;for(rt==0?Y(Q,re,null,null,ce,Ce,He,ue,ce,Ce,He,ue,H,K,null,null,xt):(Y(x.ec,x.fc,Q,re,Pe,Be,Ze,ze,ce,Ce,He,ue,H,K-F.A,H,K,xt),++T);rt+2<at;rt+=2)Pe=ce,Be=Ce,Ze=He,ze=ue,Ce+=m.Rc,ue+=m.Rc,K+=2*F.A,Y(Q,(re+=2*m.fa)-m.fa,Q,re,Pe,Be,Ze,ze,ce,Ce,He,ue,H,K-F.A,H,K,xt);return re+=m.fa,m.j+at<m.o?(n(x.ec,x.fc,Q,re,xt),n(x.cc,x.dc,ce,Ce,ft),n(x.Mc,x.Nc,He,ue,ft),T--):1&at||Y(Q,re,null,null,ce,Ce,He,ue,ce,Ce,He,ue,H,K+F.A,null,null,xt),T}function yr(m,x,T){var F=m.F,H=[m.J];if(F!=null){var K=m.U,Y=x.ba.S,Q=Y==$p||Y==Wp;x=x.ba.f.RGBA;var re=[0],ce=m.ka;re[0]=m.T,m.Kb&&(ce==0?--re[0]:(--ce,H[0]-=m.width),m.j+m.ka+m.T==m.o&&(re[0]=m.o-m.j-ce));var Ce=x.eb;ce=x.fb+ce*x.A,m=db(F,H[0],m.width,K,re,Ce,ce+(Q?0:3),x.A),e(T==re),m&&Qt(Y)&&gf(Ce,ce,Q,K,re,x.A)}return 0}function Fn(m){var x=m.ma,T=x.ba.S,F=11>T,H=T==Hp||T==qp||T==$p||T==J2||T==12||Qt(T);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!lf(x.Oa,m,H?11:12))return 0;if(H&&Qt(T)&&gr(),m.da)alert("todo:use_scaling");else{if(F){if(x.Ib=on,m.Kb){if(T=m.U+1>>1,x.memory=s(m.U+2*T),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+m.U,x.Mc=x.cc,x.Nc=x.dc+T,x.Ib=Sr,gr()}}else alert("todo:EmitYUV");H&&(x.Jb=yr,F&&We())}if(F&&!kb){for(m=0;256>m;++m)AL[m]=89858*(m-128)+Kp>>Gp,TL[m]=-22014*(m-128)+Kp,NL[m]=-45773*(m-128),EL[m]=113618*(m-128)+Kp>>Gp;for(m=yf;m<ix;++m)x=76283*(m-16)+Kp>>Gp,kL[m-yf]=Cn(x,255),CL[m-yf]=Cn(x+8>>4,15);kb=1}return 1}function Jt(m){var x=m.ma,T=m.U,F=m.T;return e(!(1&m.ka)),0>=T||0>=F?0:(T=x.Ib(m,x),x.Jb!=null&&x.Jb(m,x,T),x.Dc+=T,1)}function qn(m){m.ma.memory=null}function rn(m,x,T,F){return Ie(m,8)!=47?0:(x[0]=Ie(m,14)+1,T[0]=Ie(m,14)+1,F[0]=Ie(m,1),Ie(m,3)!=0?0:!m.h)}function ln(m,x){if(4>m)return m+1;var T=m-2>>1;return(2+(1&m)<<T)+Ie(x,T)+1}function kn(m,x){return 120<x?x-120:1<=(T=((T=uL[x-1])>>4)*m+(8-(15&T)))?T:1;var T}function Mr(m,x,T){var F=B(T),H=m[x+=255&F].g-8;return 0<H&&(Z(T,T.u+8),F=B(T),x+=m[x].value,x+=F&(1<<H)-1),Z(T,T.u+m[x].g),m[x].value}function Zr(m,x,T){return T.g+=m.g,T.value+=m.value<<x>>>0,e(8>=T.g),m.g}function W(m,x,T){var F=m.xc;return e((x=F==0?0:m.vc[m.md*(T>>F)+(x>>F)])<m.Wb),m.Ya[x]}function ie(m,x,T,F){var H=m.ab,K=m.c*x,Y=m.C;x=Y+x;var Q=T,re=F;for(F=m.Ta,T=m.Ua;0<H--;){var ce=m.gc[H],Ce=Y,He=x,ue=Q,Pe=re,Be=(re=F,Q=T,ce.Ea);switch(e(Ce<He),e(He<=ce.nc),ce.hc){case 2:fi(ue,Pe,(He-Ce)*Be,re,Q);break;case 0:var Ze=Ce,ze=He,rt=re,at=Q,xt=(Yt=ce).Ea;Ze==0&&(uf(ue,Pe,null,null,1,rt,at),ct(ue,Pe+1,0,0,xt-1,rt,at+1),Pe+=xt,at+=xt,++Ze);for(var ft=1<<Yt.b,nr=ft-1,$t=fe(xt,Yt.b),Er=Yt.K,Yt=Yt.w+(Ze>>Yt.b)*$t;Ze<ze;){var $r=Er,ji=Yt,Nr=1;for(fh(ue,Pe,rt,at-xt,1,rt,at);Nr<xt;){var Xt=(Nr&~nr)+ft;Xt>xt&&(Xt=xt),(0,df[$r[ji++]>>8&15])(ue,Pe+ +Nr,rt,at+Nr-xt,Xt-Nr,rt,at+Nr),Nr=Xt}Pe+=xt,at+=xt,++Ze&nr||(Yt+=$t)}He!=ce.nc&&n(re,Q-Be,re,Q+(He-Ce-1)*Be,Be);break;case 1:for(Be=ue,ze=Pe,xt=(ue=ce.Ea)-(at=ue&~(rt=(Pe=1<<ce.b)-1)),Ze=fe(ue,ce.b),ft=ce.K,ce=ce.w+(Ce>>ce.b)*Ze;Ce<He;){for(nr=ft,$t=ce,Er=new st,Yt=ze+at,$r=ze+ue;ze<Yt;)Rt(nr[$t++],Er),ff(Er,Be,ze,Pe,re,Q),ze+=Pe,Q+=Pe;ze<$r&&(Rt(nr[$t++],Er),ff(Er,Be,ze,xt,re,Q),ze+=xt,Q+=xt),++Ce&rt||(ce+=Ze)}break;case 3:if(ue==re&&Pe==Q&&0<ce.b){for(ze=re,ue=Be=Q+(He-Ce)*Be-(at=(He-Ce)*fe(ce.Ea,ce.b)),Pe=re,rt=Q,Ze=[],at=(xt=at)-1;0<=at;--at)Ze[at]=Pe[rt+at];for(at=xt-1;0<=at;--at)ze[ue+at]=Ze[at];Bp(ce,Ce,He,re,Be,re,Q)}else Bp(ce,Ce,He,ue,Pe,re,Q)}Q=F,re=T}re!=T&&n(F,T,Q,re,K)}function ee(m,x){var T=m.V,F=m.Ba+m.c*m.C,H=x-m.C;if(e(x<=m.l.o),e(16>=H),0<H){var K=m.l,Y=m.Ta,Q=m.Ua,re=K.width;if(ie(m,H,T,F),H=Q=[Q],e((T=m.C)<(F=x)),e(K.v<K.va),F>K.o&&(F=K.o),T<K.j){var ce=K.j-T;T=K.j,H[0]+=ce*re}if(T>=F?T=0:(H[0]+=4*K.v,K.ka=T-K.j,K.U=K.va-K.v,K.T=F-T,T=1),T){if(Q=Q[0],11>(T=m.ca).S){var Ce=T.f.RGBA,He=(F=T.S,H=K.U,K=K.T,ce=Ce.eb,Ce.A),ue=K;for(Ce=Ce.fb+m.Ma*Ce.A;0<ue--;){var Pe=Y,Be=Q,Ze=H,ze=ce,rt=Ce;switch(F){case zp:pf(Pe,Be,Ze,ze,rt);break;case Hp:Ql(Pe,Be,Ze,ze,rt);break;case Z2:Ql(Pe,Be,Ze,ze,rt),gf(ze,rt,0,Ze,1,0);break;case vb:gu(Pe,Be,Ze,ze,rt);break;case qp:Kt(Pe,Be,Ze,ze,rt,1);break;case ex:Kt(Pe,Be,Ze,ze,rt,1),gf(ze,rt,0,Ze,1,0);break;case $p:Kt(Pe,Be,Ze,ze,rt,0);break;case Wp:Kt(Pe,Be,Ze,ze,rt,0),gf(ze,rt,1,Ze,1,0);break;case J2:Jl(Pe,Be,Ze,ze,rt);break;case tx:Jl(Pe,Be,Ze,ze,rt),hb(ze,rt,Ze,1,0);break;case wb:Zl(Pe,Be,Ze,ze,rt);break;default:e(0)}Q+=re,Ce+=He}m.Ma+=K}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=T.height)}}m.C=x,e(m.C<=m.i)}function ne(m){var x;if(0<m.ua)return 0;for(x=0;x<m.Wb;++x){var T=m.Ya[x].G,F=m.Ya[x].H;if(0<T[1][F[1]+0].g||0<T[2][F[2]+0].g||0<T[3][F[3]+0].g)return 0}return 1}function oe(m,x,T,F,H,K){if(m.Z!=0){var Y=m.qd,Q=m.rd;for(e(rc[m.Z]!=null);x<T;++x)rc[m.Z](Y,Q,F,H,F,H,K),Y=F,Q=H,H+=K;m.qd=Y,m.rd=Q}}function le(m,x){var T=m.l.ma,F=T.Z==0||T.Z==1?m.l.j:m.C;if(F=m.C<F?F:m.C,e(x<=m.l.o),x>F){var H=m.l.width,K=T.ca,Y=T.tb+H*F,Q=m.V,re=m.Ba+m.c*F,ce=m.gc;e(m.ab==1),e(ce[0].hc==3),Lo(ce[0],F,x,Q,re,K,Y),oe(T,F,x,K,Y,H)}m.C=m.Ma=x}function De(m,x,T,F,H,K,Y){var Q=m.$/F,re=m.$%F,ce=m.m,Ce=m.s,He=T+m.$,ue=He;H=T+F*H;var Pe=T+F*K,Be=280+Ce.ua,Ze=m.Pb?Q:16777216,ze=0<Ce.ua?Ce.Wa:null,rt=Ce.wc,at=He<Pe?W(Ce,re,Q):null;e(m.C<K),e(Pe<=H);var xt=!1;e:for(;;){for(;xt||He<Pe;){var ft=0;if(Q>=Ze){var nr=He-T;e((Ze=m).Pb),Ze.wd=Ze.m,Ze.xd=nr,0<Ze.s.ua&&ke(Ze.s.Wa,Ze.s.vb),Ze=Q+dL}if(re&rt||(at=W(Ce,re,Q)),e(at!=null),at.Qb&&(x[He]=at.qb,xt=!0),!xt)if(de(ce),at.jc){ft=ce,nr=x;var $t=He,Er=at.pd[B(ft)&mu-1];e(at.jc),256>Er.g?(Z(ft,ft.u+Er.g),nr[$t]=Er.value,ft=0):(Z(ft,ft.u+Er.g-256),e(256<=Er.value),ft=Er.value),ft==0&&(xt=!0)}else ft=Mr(at.G[0],at.H[0],ce);if(ce.h)break;if(xt||256>ft){if(!xt)if(at.nd)x[He]=(at.qb|ft<<8)>>>0;else{if(de(ce),xt=Mr(at.G[1],at.H[1],ce),de(ce),nr=Mr(at.G[2],at.H[2],ce),$t=Mr(at.G[3],at.H[3],ce),ce.h)break;x[He]=($t<<24|xt<<16|ft<<8|nr)>>>0}if(xt=!1,++He,++re>=F&&(re=0,++Q,Y!=null&&Q<=K&&!(Q%16)&&Y(m,Q),ze!=null))for(;ue<He;)ft=x[ue++],ze.X[(506832829*ft&4294967295)>>>ze.Mb]=ft}else if(280>ft){if(ft=ln(ft-256,ce),nr=Mr(at.G[4],at.H[4],ce),de(ce),nr=kn(F,nr=ln(nr,ce)),ce.h)break;if(He-T<nr||H-He<ft)break e;for($t=0;$t<ft;++$t)x[He+$t]=x[He+$t-nr];for(He+=ft,re+=ft;re>=F;)re-=F,++Q,Y!=null&&Q<=K&&!(Q%16)&&Y(m,Q);if(e(He<=H),re&rt&&(at=W(Ce,re,Q)),ze!=null)for(;ue<He;)ft=x[ue++],ze.X[(506832829*ft&4294967295)>>>ze.Mb]=ft}else{if(!(ft<Be))break e;for(xt=ft-280,e(ze!=null);ue<He;)ft=x[ue++],ze.X[(506832829*ft&4294967295)>>>ze.Mb]=ft;ft=He,e(!(xt>>>(nr=ze).Xa)),x[ft]=nr.X[xt],xt=!0}xt||e(ce.h==z(ce))}if(m.Pb&&ce.h&&He<H)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&ke(m.s.vb,m.s.Wa);else{if(ce.h)break e;Y!=null&&Y(m,Q>K?K:Q),m.a=0,m.$=He-T}return 1}return m.a=3,0}function Te(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var x=m.Wa;x!=null&&(x.X=null),m.vb=null,e(m!=null)}function je(){var m=new _t;return m==null?null:(m.a=0,m.xb=Sb,Pr("Predictor","VP8LPredictors"),Pr("Predictor","VP8LPredictors_C"),Pr("PredictorAdd","VP8LPredictorsAdd"),Pr("PredictorAdd","VP8LPredictorsAdd_C"),fi=St,ff=jt,pf=Wr,Ql=hr,Jl=Ge,Zl=Lt,gu=mr,A.VP8LMapColor32b=Po,A.VP8LMapColor8b=hf,m)}function Me(m,x,T,F,H){var K=1,Y=[m],Q=[x],re=F.m,ce=F.s,Ce=null,He=0;e:for(;;){if(T)for(;K&&Ie(re,1);){var ue=Y,Pe=Q,Be=F,Ze=1,ze=Be.m,rt=Be.gc[Be.ab],at=Ie(ze,2);if(Be.Oc&1<<at)K=0;else{switch(Be.Oc|=1<<at,rt.hc=at,rt.Ea=ue[0],rt.nc=Pe[0],rt.K=[null],++Be.ab,e(4>=Be.ab),at){case 0:case 1:rt.b=Ie(ze,3)+2,Ze=Me(fe(rt.Ea,rt.b),fe(rt.nc,rt.b),0,Be,rt.K),rt.K=rt.K[0];break;case 3:var xt,ft=Ie(ze,8)+1,nr=16<ft?0:4<ft?1:2<ft?2:3;if(ue[0]=fe(rt.Ea,nr),rt.b=nr,xt=Ze=Me(ft,1,0,Be,rt.K)){var $t,Er=ft,Yt=rt,$r=1<<(8>>Yt.b),ji=s($r);if(ji==null)xt=0;else{var Nr=Yt.K[0],Xt=Yt.w;for(ji[0]=Yt.K[0][0],$t=1;$t<1*Er;++$t)ji[$t]=qe(Nr[Xt+$t],ji[$t-1]);for(;$t<4*$r;++$t)ji[$t]=0;Yt.K[0]=null,Yt.K[0]=ji,xt=1}}Ze=xt;break;case 2:break;default:e(0)}K=Ze}}if(Y=Y[0],Q=Q[0],K&&Ie(re,1)&&!(K=1<=(He=Ie(re,4))&&11>=He)){F.a=3;break e}var Pt;if(Pt=K)t:{var mi,_r,Gr,Dn=F,Qi=Y,js=Q,ii=He,xs=T,Fs=Dn.m,Fi=Dn.s,Qr=[null],hn=1,si=0,dn=hL[ii];r:for(;;){if(xs&&Ie(Fs,1)){var Ji=Ie(Fs,3)+2,so=fe(Qi,Ji),gi=fe(js,Ji),Ks=so*gi;if(!Me(so,gi,0,Dn,Qr))break r;for(Qr=Qr[0],Fi.xc=Ji,mi=0;mi<Ks;++mi){var Nn=Qr[mi]>>8&65535;Qr[mi]=Nn,Nn>=hn&&(hn=Nn+1)}}if(Fs.h)break r;for(_r=0;5>_r;++_r){var Di=_b[_r];!_r&&0<ii&&(Di+=1<<ii),si<Di&&(si=Di)}var ua=a(hn*dn,L),Ds=hn,ha=a(Ds,ge);if(ha==null)var da=null;else e(65536>=Ds),da=ha;var Ys=s(si);if(da==null||Ys==null||ua==null){Dn.a=1;break r}var fa=ua;for(mi=Gr=0;mi<hn;++mi){var Rn=da[mi],pa=Rn.G,ao=Rn.H,yu=0,cl=1,Zi=0;for(_r=0;5>_r;++_r){Di=_b[_r],pa[_r]=fa,ao[_r]=Gr,!_r&&0<ii&&(Di+=1<<ii);i:{var Xp,sx=Di,Qp=Dn,vf=Ys,LL=fa,RL=Gr,ax=0,nc=Qp.m,jL=Ie(nc,1);if(i(vf,0,0,sx),jL){var FL=Ie(nc,1)+1,DL=Ie(nc,1),Pb=Ie(nc,DL==0?1:8);vf[Pb]=1,FL==2&&(vf[Pb=Ie(nc,8)]=1);var Jp=1}else{var Lb=s(19),Rb=Ie(nc,4)+4;if(19<Rb){Qp.a=3;var Zp=0;break i}for(Xp=0;Xp<Rb;++Xp)Lb[cL[Xp]]=Ie(nc,3);var ox=void 0,wf=void 0,jb=Qp,ML=Lb,em=sx,Fb=vf,lx=0,ic=jb.m,Db=8,Mb=a(128,L);n:for(;R(Mb,0,7,ML,19);){if(Ie(ic,1)){var OL=2+2*Ie(ic,3);if((ox=2+Ie(ic,OL))>em)break n}else ox=em;for(wf=0;wf<em&&ox--;){de(ic);var Ob=Mb[0+(127&B(ic))];Z(ic,ic.u+Ob.g);var mh=Ob.value;if(16>mh)Fb[wf++]=mh,mh!=0&&(Db=mh);else{var BL=mh==16,Bb=mh-16,UL=oL[Bb],Ub=Ie(ic,aL[Bb])+UL;if(wf+Ub>em)break n;for(var VL=BL?Db:0;0<Ub--;)Fb[wf++]=VL}}lx=1;break n}lx||(jb.a=3),Jp=lx}(Jp=Jp&&!nc.h)&&(ax=R(LL,RL,8,vf,sx)),Jp&&ax!=0?Zp=ax:(Qp.a=3,Zp=0)}if(Zp==0)break r;if(cl&&lL[_r]==1&&(cl=fa[Gr].g==0),yu+=fa[Gr].g,Gr+=Zp,3>=_r){var _f,cx=Ys[0];for(_f=1;_f<Di;++_f)Ys[_f]>cx&&(cx=Ys[_f]);Zi+=cx}}if(Rn.nd=cl,Rn.Qb=0,cl&&(Rn.qb=(pa[3][ao[3]+0].value<<24|pa[1][ao[1]+0].value<<16|pa[2][ao[2]+0].value)>>>0,yu==0&&256>pa[0][ao[0]+0].value&&(Rn.Qb=1,Rn.qb+=pa[0][ao[0]+0].value<<8)),Rn.jc=!Rn.Qb&&6>Zi,Rn.jc){var tm,ul=Rn;for(tm=0;tm<mu;++tm){var sc=tm,ac=ul.pd[sc],rm=ul.G[0][ul.H[0]+sc];256<=rm.value?(ac.g=rm.g+256,ac.value=rm.value):(ac.g=0,ac.value=0,sc>>=Zr(rm,8,ac),sc>>=Zr(ul.G[1][ul.H[1]+sc],16,ac),sc>>=Zr(ul.G[2][ul.H[2]+sc],0,ac),Zr(ul.G[3][ul.H[3]+sc],24,ac))}}}Fi.vc=Qr,Fi.Wb=hn,Fi.Ya=da,Fi.yc=ua,Pt=1;break t}Pt=0}if(!(K=Pt)){F.a=3;break e}if(0<He){if(ce.ua=1<<He,!te(ce.Wa,He)){F.a=1,K=0;break e}}else ce.ua=0;var ux=F,Vb=Y,zL=Q,hx=ux.s,dx=hx.xc;if(ux.c=Vb,ux.i=zL,hx.md=fe(Vb,dx),hx.wc=dx==0?-1:(1<<dx)-1,T){F.xb=vL;break e}if((Ce=s(Y*Q))==null){F.a=1,K=0;break e}K=(K=De(F,Ce,0,Y,Q,Q,null))&&!re.h;break e}return K?(H!=null?H[0]=Ce:(e(Ce==null),e(T)),F.$=0,T||Te(ce)):Te(ce),K}function Oe(m,x){var T=m.c*m.i,F=T+x+16*x;return e(m.c<=x),m.V=s(F),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+T+x,1)}function ht(m,x){var T=m.C,F=x-T,H=m.V,K=m.Ba+m.c*T;for(e(x<=m.l.o);0<F;){var Y=16<F?16:F,Q=m.l.ma,re=m.l.width,ce=re*Y,Ce=Q.ca,He=Q.tb+re*T,ue=m.Ta,Pe=m.Ua;ie(m,Y,H,K),fb(ue,Pe,Ce,He,ce),oe(Q,T,T+Y,Ce,He,re),F-=Y,H+=Y*m.c,T+=Y}e(T==x),m.C=m.Ma=x}function gt(){this.ub=this.yd=this.td=this.Rb=0}function kt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function pt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Et(){this.Yb=function(){var m=[];return function x(T,F,H){for(var K=H[F],Y=0;Y<K&&(T.push(H.length>F+1?[]:0),!(H.length<F+1));Y++)x(T[Y],F+1,H)}(m,0,[3,11]),m}()}function rr(){this.jb=s(3),this.Wc=o([4,8],Et),this.Xc=o([4,17],Et)}function Tr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function vr(){this.ld=this.La=this.dd=this.tc=0}function nn(){this.Na=this.la=0}function $n(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function hi(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function di(){this.uc=this.M=this.Nb=0,this.wa=Array(new vr),this.Y=0,this.ya=Array(new hi),this.aa=0,this.l=new Xr}function Jn(){this.y=s(16),this.f=s(8),this.ea=s(8)}function cn(){this.cb=this.a=0,this.sc="",this.m=new P,this.Od=new gt,this.Kc=new kt,this.ed=new Tr,this.Qa=new pt,this.Ic=this.$c=this.Aa=0,this.D=new di,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,P),this.ia=0,this.pb=a(4,$n),this.Pa=new rr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Jn),this.Hd=0,this.rb=Array(new nn),this.sb=0,this.wa=Array(new vr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new hi),this.L=this.aa=0,this.gd=o([4,2],vr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Cn(m,x){return 0>m?0:m>x?x:m}function Xr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Lr(){var m=new cn;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,xf||(xf=Or)),m}function br(m,x,T){return m.a==0&&(m.a=x,m.sc=T,m.cb=0),0}function Wn(m,x,T){return 3<=T&&m[x+0]==157&&m[x+1]==1&&m[x+2]==42}function wn(m,x){if(m==null)return 0;if(m.a=0,m.sc="OK",x==null)return br(m,2,"null VP8Io passed to VP8GetHeaders()");var T=x.data,F=x.w,H=x.ha;if(4>H)return br(m,7,"Truncated header.");var K=T[F+0]|T[F+1]<<8|T[F+2]<<16,Y=m.Od;if(Y.Rb=!(1&K),Y.td=K>>1&7,Y.yd=K>>4&1,Y.ub=K>>5,3<Y.td)return br(m,3,"Incorrect keyframe parameters.");if(!Y.yd)return br(m,4,"Frame not displayable.");F+=3,H-=3;var Q=m.Kc;if(Y.Rb){if(7>H)return br(m,7,"cannot parse picture header");if(!Wn(T,F,H))return br(m,3,"Bad code word");Q.c=16383&(T[F+4]<<8|T[F+3]),Q.Td=T[F+4]>>6,Q.i=16383&(T[F+6]<<8|T[F+5]),Q.Ud=T[F+6]>>6,F+=7,H-=7,m.za=Q.c+15>>4,m.Ub=Q.i+15>>4,x.width=Q.c,x.height=Q.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,i((K=m.Pa).jb,0,255,K.jb.length),e((K=m.Qa)!=null),K.Cb=0,K.Bb=0,K.Fb=1,i(K.Zb,0,0,K.Zb.length),i(K.Lb,0,0,K.Lb)}if(Y.ub>H)return br(m,7,"bad partition length");ve(K=m.m,T,F,Y.ub),F+=Y.ub,H-=Y.ub,Y.Rb&&(Q.Ld=Ae(K),Q.Kd=Ae(K)),Q=m.Qa;var re,ce=m.Pa;if(e(K!=null),e(Q!=null),Q.Cb=Ae(K),Q.Cb){if(Q.Bb=Ae(K),Ae(K)){for(Q.Fb=Ae(K),re=0;4>re;++re)Q.Zb[re]=Ae(K)?he(K,7):0;for(re=0;4>re;++re)Q.Lb[re]=Ae(K)?he(K,6):0}if(Q.Bb)for(re=0;3>re;++re)ce.jb[re]=Ae(K)?ye(K,8):255}else Q.Bb=0;if(K.Ka)return br(m,3,"cannot parse segment header");if((Q=m.ed).zd=Ae(K),Q.Tb=ye(K,6),Q.wb=ye(K,3),Q.Pc=Ae(K),Q.Pc&&Ae(K)){for(ce=0;4>ce;++ce)Ae(K)&&(Q.vd[ce]=he(K,6));for(ce=0;4>ce;++ce)Ae(K)&&(Q.od[ce]=he(K,6))}if(m.L=Q.Tb==0?0:Q.zd?1:2,K.Ka)return br(m,3,"cannot parse filter header");var Ce=H;if(H=re=F,F=re+Ce,Q=Ce,m.Xb=(1<<ye(m.m,2))-1,Ce<3*(ce=m.Xb))T=7;else{for(re+=3*ce,Q-=3*ce,Ce=0;Ce<ce;++Ce){var He=T[H+0]|T[H+1]<<8|T[H+2]<<16;He>Q&&(He=Q),ve(m.Jc[+Ce],T,re,He),re+=He,Q-=He,H+=3}ve(m.Jc[+ce],T,re,Q),T=re<F?0:5}if(T!=0)return br(m,T,"cannot parse partitions");for(T=ye(re=m.m,7),H=Ae(re)?he(re,4):0,F=Ae(re)?he(re,4):0,Q=Ae(re)?he(re,4):0,ce=Ae(re)?he(re,4):0,re=Ae(re)?he(re,4):0,Ce=m.Qa,He=0;4>He;++He){if(Ce.Cb){var ue=Ce.Zb[He];Ce.Fb||(ue+=T)}else{if(0<He){m.pb[He]=m.pb[0];continue}ue=T}var Pe=m.pb[He];Pe.Sc[0]=rx[Cn(ue+H,127)],Pe.Sc[1]=nx[Cn(ue+0,127)],Pe.Eb[0]=2*rx[Cn(ue+F,127)],Pe.Eb[1]=101581*nx[Cn(ue+Q,127)]>>16,8>Pe.Eb[1]&&(Pe.Eb[1]=8),Pe.Qc[0]=rx[Cn(ue+ce,117)],Pe.Qc[1]=nx[Cn(ue+re,127)],Pe.lc=ue+re}if(!Y.Rb)return br(m,4,"Not a key frame.");for(Ae(K),Y=m.Pa,T=0;4>T;++T){for(H=0;8>H;++H)for(F=0;3>F;++F)for(Q=0;11>Q;++Q)ce=Ne(K,xL[T][H][F][Q])?ye(K,8):mL[T][H][F][Q],Y.Wc[T][H].Yb[F][Q]=ce;for(H=0;17>H;++H)Y.Xc[T][H]=Y.Wc[T][yL[H]]}return m.kc=Ae(K),m.kc&&(m.Bd=ye(K,8)),m.cb=1}function Or(m,x,T,F,H,K,Y){var Q=x[H].Yb[T];for(T=0;16>H;++H){if(!Ne(m,Q[T+0]))return H;for(;!Ne(m,Q[T+1]);)if(Q=x[++H].Yb[0],T=0,H==16)return 16;var re=x[H+1].Yb;if(Ne(m,Q[T+2])){var ce=m,Ce=0;if(Ne(ce,(ue=Q)[(He=T)+3]))if(Ne(ce,ue[He+6])){for(Q=0,He=2*(Ce=Ne(ce,ue[He+8]))+(ue=Ne(ce,ue[He+9+Ce])),Ce=0,ue=fL[He];ue[Q];++Q)Ce+=Ce+Ne(ce,ue[Q]);Ce+=3+(8<<He)}else Ne(ce,ue[He+7])?(Ce=7+2*Ne(ce,165),Ce+=Ne(ce,145)):Ce=5+Ne(ce,159);else Ce=Ne(ce,ue[He+4])?3+Ne(ce,ue[He+5]):2;Q=re[2]}else Ce=1,Q=re[1];re=Y+pL[H],0>(ce=m).b&&Se(ce);var He,ue=ce.b,Pe=(He=ce.Ca>>1)-(ce.I>>ue)>>31;--ce.b,ce.Ca+=Pe,ce.Ca|=1,ce.I-=(He+1&Pe)<<ue,K[re]=((Ce^Pe)-Pe)*F[(0<H)+0]}return 16}function Ra(m){var x=m.rb[m.sb-1];x.la=0,x.Na=0,i(m.zc,0,0,m.zc.length),m.ja=0}function Zn(m,x,T,F,H){H=m[x+T+32*F]+(H>>3),m[x+T+32*F]=-256&H?0>H?0:255:H}function Sn(m,x,T,F,H,K){Zn(m,x,0,T,F+H),Zn(m,x,1,T,F+K),Zn(m,x,2,T,F-K),Zn(m,x,3,T,F-H)}function $s(m){return(20091*m>>16)+m}function Io(m,x,T,F){var H,K=0,Y=s(16);for(H=0;4>H;++H){var Q=m[x+0]+m[x+8],re=m[x+0]-m[x+8],ce=(35468*m[x+4]>>16)-$s(m[x+12]),Ce=$s(m[x+4])+(35468*m[x+12]>>16);Y[K+0]=Q+Ce,Y[K+1]=re+ce,Y[K+2]=re-ce,Y[K+3]=Q-Ce,K+=4,x++}for(H=K=0;4>H;++H)Q=(m=Y[K+0]+4)+Y[K+8],re=m-Y[K+8],ce=(35468*Y[K+4]>>16)-$s(Y[K+12]),Zn(T,F,0,0,Q+(Ce=$s(Y[K+4])+(35468*Y[K+12]>>16))),Zn(T,F,1,0,re+ce),Zn(T,F,2,0,re-ce),Zn(T,F,3,0,Q-Ce),K++,F+=32}function fu(m,x,T,F){var H=m[x+0]+4,K=35468*m[x+4]>>16,Y=$s(m[x+4]),Q=35468*m[x+1]>>16;Sn(T,F,0,H+Y,m=$s(m[x+1]),Q),Sn(T,F,1,H+K,m,Q),Sn(T,F,2,H-K,m,Q),Sn(T,F,3,H-Y,m,Q)}function to(m,x,T,F,H){Io(m,x,T,F),H&&Io(m,x+16,T,F+4)}function Ws(m,x,T,F){xu(m,x+0,T,F,1),xu(m,x+32,T,F+128,1)}function ei(m,x,T,F){var H;for(m=m[x+0]+4,H=0;4>H;++H)for(x=0;4>x;++x)Zn(T,F,x,H,m)}function ja(m,x,T,F){m[x+0]&&an(m,x+0,T,F),m[x+16]&&an(m,x+16,T,F+4),m[x+32]&&an(m,x+32,T,F+128),m[x+48]&&an(m,x+48,T,F+128+4)}function ds(m,x,T,F){var H,K=s(16);for(H=0;4>H;++H){var Y=m[x+0+H]+m[x+12+H],Q=m[x+4+H]+m[x+8+H],re=m[x+4+H]-m[x+8+H],ce=m[x+0+H]-m[x+12+H];K[0+H]=Y+Q,K[8+H]=Y-Q,K[4+H]=ce+re,K[12+H]=ce-re}for(H=0;4>H;++H)Y=(m=K[0+4*H]+3)+K[3+4*H],Q=K[1+4*H]+K[2+4*H],re=K[1+4*H]-K[2+4*H],ce=m-K[3+4*H],T[F+0]=Y+Q>>3,T[F+16]=ce+re>>3,T[F+32]=Y-Q>>3,T[F+48]=ce-re>>3,F+=64}function Fa(m,x,T){var F,H=x-32,K=ca,Y=255-m[H-1];for(F=0;F<T;++F){var Q,re=K,ce=Y+m[x-1];for(Q=0;Q<T;++Q)m[x+Q]=re[ce+m[H+Q]];x+=32}}function Hl(m,x){Fa(m,x,4)}function ql(m,x){Fa(m,x,8)}function $l(m,x){Fa(m,x,16)}function ro(m,x){var T;for(T=0;16>T;++T)n(m,x+32*T,m,x-32,16)}function Gs(m,x){var T;for(T=16;0<T;--T)i(m,x,m[x-1],16),x+=32}function fs(m,x,T){var F;for(F=0;16>F;++F)i(x,T+32*F,m,16)}function Wl(m,x){var T,F=16;for(T=0;16>T;++T)F+=m[x-1+32*T]+m[x+T-32];fs(F>>5,m,x)}function Da(m,x){var T,F=8;for(T=0;16>T;++T)F+=m[x-1+32*T];fs(F>>4,m,x)}function Xi(m,x){var T,F=8;for(T=0;16>T;++T)F+=m[x+T-32];fs(F>>4,m,x)}function Gl(m,x){fs(128,m,x)}function cr(m,x,T){return m+2*x+T+2>>2}function no(m,x){var T,F=x-32;for(F=new Uint8Array([cr(m[F-1],m[F+0],m[F+1]),cr(m[F+0],m[F+1],m[F+2]),cr(m[F+1],m[F+2],m[F+3]),cr(m[F+2],m[F+3],m[F+4])]),T=0;4>T;++T)n(m,x+32*T,F,0,F.length)}function nl(m,x){var T=m[x-1],F=m[x-1+32],H=m[x-1+64],K=m[x-1+96];Xe(m,x+0,16843009*cr(m[x-1-32],T,F)),Xe(m,x+32,16843009*cr(T,F,H)),Xe(m,x+64,16843009*cr(F,H,K)),Xe(m,x+96,16843009*cr(H,K,K))}function Ma(m,x){var T,F=4;for(T=0;4>T;++T)F+=m[x+T-32]+m[x-1+32*T];for(F>>=3,T=0;4>T;++T)i(m,x+32*T,F,4)}function V(m,x){var T=m[x-1+0],F=m[x-1+32],H=m[x-1+64],K=m[x-1-32],Y=m[x+0-32],Q=m[x+1-32],re=m[x+2-32],ce=m[x+3-32];m[x+0+96]=cr(F,H,m[x-1+96]),m[x+1+96]=m[x+0+64]=cr(T,F,H),m[x+2+96]=m[x+1+64]=m[x+0+32]=cr(K,T,F),m[x+3+96]=m[x+2+64]=m[x+1+32]=m[x+0+0]=cr(Y,K,T),m[x+3+64]=m[x+2+32]=m[x+1+0]=cr(Q,Y,K),m[x+3+32]=m[x+2+0]=cr(re,Q,Y),m[x+3+0]=cr(ce,re,Q)}function pe(m,x){var T=m[x+1-32],F=m[x+2-32],H=m[x+3-32],K=m[x+4-32],Y=m[x+5-32],Q=m[x+6-32],re=m[x+7-32];m[x+0+0]=cr(m[x+0-32],T,F),m[x+1+0]=m[x+0+32]=cr(T,F,H),m[x+2+0]=m[x+1+32]=m[x+0+64]=cr(F,H,K),m[x+3+0]=m[x+2+32]=m[x+1+64]=m[x+0+96]=cr(H,K,Y),m[x+3+32]=m[x+2+64]=m[x+1+96]=cr(K,Y,Q),m[x+3+64]=m[x+2+96]=cr(Y,Q,re),m[x+3+96]=cr(Q,re,re)}function Re(m,x){var T=m[x-1+0],F=m[x-1+32],H=m[x-1+64],K=m[x-1-32],Y=m[x+0-32],Q=m[x+1-32],re=m[x+2-32],ce=m[x+3-32];m[x+0+0]=m[x+1+64]=K+Y+1>>1,m[x+1+0]=m[x+2+64]=Y+Q+1>>1,m[x+2+0]=m[x+3+64]=Q+re+1>>1,m[x+3+0]=re+ce+1>>1,m[x+0+96]=cr(H,F,T),m[x+0+64]=cr(F,T,K),m[x+0+32]=m[x+1+96]=cr(T,K,Y),m[x+1+32]=m[x+2+96]=cr(K,Y,Q),m[x+2+32]=m[x+3+96]=cr(Y,Q,re),m[x+3+32]=cr(Q,re,ce)}function Ve(m,x){var T=m[x+0-32],F=m[x+1-32],H=m[x+2-32],K=m[x+3-32],Y=m[x+4-32],Q=m[x+5-32],re=m[x+6-32],ce=m[x+7-32];m[x+0+0]=T+F+1>>1,m[x+1+0]=m[x+0+64]=F+H+1>>1,m[x+2+0]=m[x+1+64]=H+K+1>>1,m[x+3+0]=m[x+2+64]=K+Y+1>>1,m[x+0+32]=cr(T,F,H),m[x+1+32]=m[x+0+96]=cr(F,H,K),m[x+2+32]=m[x+1+96]=cr(H,K,Y),m[x+3+32]=m[x+2+96]=cr(K,Y,Q),m[x+3+64]=cr(Y,Q,re),m[x+3+96]=cr(Q,re,ce)}function it(m,x){var T=m[x-1+0],F=m[x-1+32],H=m[x-1+64],K=m[x-1+96];m[x+0+0]=T+F+1>>1,m[x+2+0]=m[x+0+32]=F+H+1>>1,m[x+2+32]=m[x+0+64]=H+K+1>>1,m[x+1+0]=cr(T,F,H),m[x+3+0]=m[x+1+32]=cr(F,H,K),m[x+3+32]=m[x+1+64]=cr(H,K,K),m[x+3+64]=m[x+2+64]=m[x+0+96]=m[x+1+96]=m[x+2+96]=m[x+3+96]=K}function Qe(m,x){var T=m[x-1+0],F=m[x-1+32],H=m[x-1+64],K=m[x-1+96],Y=m[x-1-32],Q=m[x+0-32],re=m[x+1-32],ce=m[x+2-32];m[x+0+0]=m[x+2+32]=T+Y+1>>1,m[x+0+32]=m[x+2+64]=F+T+1>>1,m[x+0+64]=m[x+2+96]=H+F+1>>1,m[x+0+96]=K+H+1>>1,m[x+3+0]=cr(Q,re,ce),m[x+2+0]=cr(Y,Q,re),m[x+1+0]=m[x+3+32]=cr(T,Y,Q),m[x+1+32]=m[x+3+64]=cr(F,T,Y),m[x+1+64]=m[x+3+96]=cr(H,F,T),m[x+1+96]=cr(K,H,F)}function er(m,x){var T;for(T=0;8>T;++T)n(m,x+32*T,m,x-32,8)}function Mt(m,x){var T;for(T=0;8>T;++T)i(m,x,m[x-1],8),x+=32}function At(m,x,T){var F;for(F=0;8>F;++F)i(x,T+32*F,m,8)}function ur(m,x){var T,F=8;for(T=0;8>T;++T)F+=m[x+T-32]+m[x-1+32*T];At(F>>4,m,x)}function Ot(m,x){var T,F=4;for(T=0;8>T;++T)F+=m[x+T-32];At(F>>3,m,x)}function ut(m,x){var T,F=4;for(T=0;8>T;++T)F+=m[x-1+32*T];At(F>>3,m,x)}function sr(m,x){At(128,m,x)}function wt(m,x,T){var F=m[x-T],H=m[x+0],K=3*(H-F)+Q2[1020+m[x-2*T]-m[x+T]],Y=Vp[112+(K+4>>3)];m[x-T]=ca[255+F+Vp[112+(K+3>>3)]],m[x+0]=ca[255+H-Y]}function Rr(m,x,T,F){var H=m[x+0],K=m[x+T];return Va[255+m[x-2*T]-m[x-T]]>F||Va[255+K-H]>F}function Ar(m,x,T,F){return 4*Va[255+m[x-T]-m[x+0]]+Va[255+m[x-2*T]-m[x+T]]<=F}function jr(m,x,T,F,H){var K=m[x-3*T],Y=m[x-2*T],Q=m[x-T],re=m[x+0],ce=m[x+T],Ce=m[x+2*T],He=m[x+3*T];return 4*Va[255+Q-re]+Va[255+Y-ce]>F?0:Va[255+m[x-4*T]-K]<=H&&Va[255+K-Y]<=H&&Va[255+Y-Q]<=H&&Va[255+He-Ce]<=H&&Va[255+Ce-ce]<=H&&Va[255+ce-re]<=H}function An(m,x,T,F){var H=2*F+1;for(F=0;16>F;++F)Ar(m,x+F,T,H)&&wt(m,x+F,T)}function Ls(m,x,T,F){var H=2*F+1;for(F=0;16>F;++F)Ar(m,x+F*T,1,H)&&wt(m,x+F*T,1)}function kr(m,x,T,F){var H;for(H=3;0<H;--H)An(m,x+=4*T,T,F)}function aa(m,x,T,F){var H;for(H=3;0<H;--H)Ls(m,x+=4,T,F)}function ti(m,x,T,F,H,K,Y,Q){for(K=2*K+1;0<H--;){if(jr(m,x,T,K,Y))if(Rr(m,x,T,Q))wt(m,x,T);else{var re=m,ce=x,Ce=T,He=re[ce-2*Ce],ue=re[ce-Ce],Pe=re[ce+0],Be=re[ce+Ce],Ze=re[ce+2*Ce],ze=27*(at=Q2[1020+3*(Pe-ue)+Q2[1020+He-Be]])+63>>7,rt=18*at+63>>7,at=9*at+63>>7;re[ce-3*Ce]=ca[255+re[ce-3*Ce]+at],re[ce-2*Ce]=ca[255+He+rt],re[ce-Ce]=ca[255+ue+ze],re[ce+0]=ca[255+Pe-ze],re[ce+Ce]=ca[255+Be-rt],re[ce+2*Ce]=ca[255+Ze-at]}x+=F}}function ps(m,x,T,F,H,K,Y,Q){for(K=2*K+1;0<H--;){if(jr(m,x,T,K,Y))if(Rr(m,x,T,Q))wt(m,x,T);else{var re=m,ce=x,Ce=T,He=re[ce-Ce],ue=re[ce+0],Pe=re[ce+Ce],Be=Vp[112+(4+(Ze=3*(ue-He))>>3)],Ze=Vp[112+(Ze+3>>3)],ze=Be+1>>1;re[ce-2*Ce]=ca[255+re[ce-2*Ce]+ze],re[ce-Ce]=ca[255+He+Ze],re[ce+0]=ca[255+ue-Be],re[ce+Ce]=ca[255+Pe-ze]}x+=F}}function ri(m,x,T,F,H,K){ti(m,x,T,1,16,F,H,K)}function ar(m,x,T,F,H,K){ti(m,x,1,T,16,F,H,K)}function ni(m,x,T,F,H,K){var Y;for(Y=3;0<Y;--Y)ps(m,x+=4*T,T,1,16,F,H,K)}function b(m,x,T,F,H,K){var Y;for(Y=3;0<Y;--Y)ps(m,x+=4,1,T,16,F,H,K)}function U(m,x,T,F,H,K,Y,Q){ti(m,x,H,1,8,K,Y,Q),ti(T,F,H,1,8,K,Y,Q)}function ae(m,x,T,F,H,K,Y,Q){ti(m,x,1,H,8,K,Y,Q),ti(T,F,1,H,8,K,Y,Q)}function xe(m,x,T,F,H,K,Y,Q){ps(m,x+4*H,H,1,8,K,Y,Q),ps(T,F+4*H,H,1,8,K,Y,Q)}function Le(m,x,T,F,H,K,Y,Q){ps(m,x+4,1,H,8,K,Y,Q),ps(T,F+4,1,H,8,K,Y,Q)}function Ee(){this.ba=new Wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Tt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $e(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ft(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bt(){this.ua=0,this.Wa=new X,this.vb=new X,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ge,this.yc=new L}function _t(){this.xb=this.a=0,this.l=new Xr,this.ca=new Wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bt,this.ab=0,this.gc=a(4,Ft),this.Oc=0}function qt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Cr(m,x,T,F,H,K,Y){for(m=m==null?0:m[x+0],x=0;x<Y;++x)H[K+x]=m+T[F+x]&255,m=H[K+x]}function sn(m,x,T,F,H,K,Y){var Q;if(m==null)Cr(null,null,T,F,H,K,Y);else for(Q=0;Q<Y;++Q)H[K+Q]=m[x+Q]+T[F+Q]&255}function un(m,x,T,F,H,K,Y){if(m==null)Cr(null,null,T,F,H,K,Y);else{var Q,re=m[x+0],ce=re,Ce=re;for(Q=0;Q<Y;++Q)ce=Ce+(re=m[x+Q])-ce,Ce=T[F+Q]+(-256&ce?0>ce?0:255:ce)&255,ce=re,H[K+Q]=Ce}}function g(m,x,T,F){var H=x.width,K=x.o;if(e(m!=null&&x!=null),0>T||0>=F||T+F>K)return null;if(!m.Cc){if(m.ga==null){var Y;if(m.ga=new qt,(Y=m.ga==null)||(Y=x.width*x.o,e(m.Gb.length==0),m.Gb=s(Y),m.Uc=0,m.Gb==null?Y=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,Y=1),Y=!Y),!Y){Y=m.ga;var Q=m.Fa,re=m.P,ce=m.qc,Ce=m.mb,He=m.nb,ue=re+1,Pe=ce-1,Be=Y.l;if(e(Q!=null&&Ce!=null&&x!=null),rc[0]=null,rc[1]=Cr,rc[2]=sn,rc[3]=un,Y.ca=Ce,Y.tb=He,Y.c=x.width,Y.i=x.height,e(0<Y.c&&0<Y.i),1>=ce)x=0;else if(Y.$a=3&Q[re+0],Y.Z=Q[re+0]>>2&3,Y.Lc=Q[re+0]>>4&3,re=Q[re+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||re)x=0;else if(Be.put=Jt,Be.ac=Fn,Be.bc=qn,Be.ma=Y,Be.width=x.width,Be.height=x.height,Be.Da=x.Da,Be.v=x.v,Be.va=x.va,Be.j=x.j,Be.o=x.o,Y.$a)e:{e(Y.$a==1),x=je();t:for(;;){if(x==null){x=0;break e}if(e(Y!=null),Y.mc=x,x.c=Y.c,x.i=Y.i,x.l=Y.l,x.l.ma=Y,x.l.width=Y.c,x.l.height=Y.i,x.a=0,_e(x.m,Q,ue,Pe),!Me(Y.c,Y.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&ne(x.s)?(Y.ic=1,Q=x.c*x.i,x.Ta=null,x.Ua=0,x.V=s(Q),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(Y.ic=0,x=Oe(x,Y.c)),!x))break t;x=1;break e}Y.mc=null,x=0}else x=Pe>=Y.c*Y.i;Y=!x}if(Y)return null;m.ga.Lc!=1?m.Ga=0:F=K-T}e(m.ga!=null),e(T+F<=K);e:{if(x=(Q=m.ga).c,K=Q.l.o,Q.$a==0){if(ue=m.rc,Pe=m.Vc,Be=m.Fa,re=m.P+1+T*x,ce=m.mb,Ce=m.nb+T*x,e(re<=m.P+m.qc),Q.Z!=0)for(e(rc[Q.Z]!=null),Y=0;Y<F;++Y)rc[Q.Z](ue,Pe,Be,re,ce,Ce,x),ue=ce,Pe=Ce,Ce+=x,re+=x;else for(Y=0;Y<F;++Y)n(ce,Ce,Be,re,x),ue=ce,Pe=Ce,Ce+=x,re+=x;m.rc=ue,m.Vc=Pe}else{if(e(Q.mc!=null),x=T+F,e((Y=Q.mc)!=null),e(x<=Y.i),Y.C>=x)x=1;else if(Q.ic||We(),Q.ic){Q=Y.V,ue=Y.Ba,Pe=Y.c;var Ze=Y.i,ze=(Be=1,re=Y.$/Pe,ce=Y.$%Pe,Ce=Y.m,He=Y.s,Y.$),rt=Pe*Ze,at=Pe*x,xt=He.wc,ft=ze<at?W(He,ce,re):null;e(ze<=rt),e(x<=Ze),e(ne(He));t:for(;;){for(;!Ce.h&&ze<at;){if(ce&xt||(ft=W(He,ce,re)),e(ft!=null),de(Ce),256>(Ze=Mr(ft.G[0],ft.H[0],Ce)))Q[ue+ze]=Ze,++ze,++ce>=Pe&&(ce=0,++re<=x&&!(re%16)&&le(Y,re));else{if(!(280>Ze)){Be=0;break t}Ze=ln(Ze-256,Ce);var nr,$t=Mr(ft.G[4],ft.H[4],Ce);if(de(Ce),!(ze>=($t=kn(Pe,$t=ln($t,Ce)))&&rt-ze>=Ze)){Be=0;break t}for(nr=0;nr<Ze;++nr)Q[ue+ze+nr]=Q[ue+ze+nr-$t];for(ze+=Ze,ce+=Ze;ce>=Pe;)ce-=Pe,++re<=x&&!(re%16)&&le(Y,re);ze<at&&ce&xt&&(ft=W(He,ce,re))}e(Ce.h==z(Ce))}le(Y,re>x?x:re);break t}!Be||Ce.h&&ze<rt?(Be=0,Y.a=Ce.h?5:3):Y.$=ze,x=Be}else x=De(Y,Y.V,Y.Ba,Y.c,Y.i,x,ht);if(!x){F=0;break e}}T+F>=K&&(m.Cc=1),F=1}if(!F)return null;if(m.Cc&&((F=m.ga)!=null&&(F.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+T*H}function I(m,x,T,F,H,K){for(;0<H--;){var Y,Q=m,re=x+(T?1:0),ce=m,Ce=x+(T?0:3);for(Y=0;Y<F;++Y){var He=ce[Ce+4*Y];He!=255&&(He*=32897,Q[re+4*Y+0]=Q[re+4*Y+0]*He>>23,Q[re+4*Y+1]=Q[re+4*Y+1]*He>>23,Q[re+4*Y+2]=Q[re+4*Y+2]*He>>23)}x+=K}}function M(m,x,T,F,H){for(;0<F--;){var K;for(K=0;K<T;++K){var Y=m[x+2*K+0],Q=15&(ce=m[x+2*K+1]),re=4369*Q,ce=(240&ce|ce>>4)*re>>16;m[x+2*K+0]=(240&Y|Y>>4)*re>>16&240|(15&Y|Y<<4)*re>>16>>4&15,m[x+2*K+1]=240&ce|Q}x+=H}}function J(m,x,T,F,H,K,Y,Q){var re,ce,Ce=255;for(ce=0;ce<H;++ce){for(re=0;re<F;++re){var He=m[x+re];K[Y+4*re]=He,Ce&=He}x+=T,Y+=Q}return Ce!=255}function Fe(m,x,T,F,H){var K;for(K=0;K<H;++K)T[F+K]=m[x+K]>>8}function We(){gf=I,hb=M,db=J,fb=Fe}function bt(m,x,T){A[m]=function(F,H,K,Y,Q,re,ce,Ce,He,ue,Pe,Be,Ze,ze,rt,at,xt){var ft,nr=xt-1>>1,$t=Q[re+0]|ce[Ce+0]<<16,Er=He[ue+0]|Pe[Be+0]<<16;e(F!=null);var Yt=3*$t+Er+131074>>2;for(x(F[H+0],255&Yt,Yt>>16,Ze,ze),K!=null&&(Yt=3*Er+$t+131074>>2,x(K[Y+0],255&Yt,Yt>>16,rt,at)),ft=1;ft<=nr;++ft){var $r=Q[re+ft]|ce[Ce+ft]<<16,ji=He[ue+ft]|Pe[Be+ft]<<16,Nr=$t+$r+Er+ji+524296,Xt=Nr+2*($r+Er)>>3;Yt=Xt+$t>>1,$t=(Nr=Nr+2*($t+ji)>>3)+$r>>1,x(F[H+2*ft-1],255&Yt,Yt>>16,Ze,ze+(2*ft-1)*T),x(F[H+2*ft-0],255&$t,$t>>16,Ze,ze+(2*ft-0)*T),K!=null&&(Yt=Nr+Er>>1,$t=Xt+ji>>1,x(K[Y+2*ft-1],255&Yt,Yt>>16,rt,at+(2*ft-1)*T),x(K[Y+2*ft+0],255&$t,$t>>16,rt,at+(2*ft+0)*T)),$t=$r,Er=ji}1&xt||(Yt=3*$t+Er+131074>>2,x(F[H+xt-1],255&Yt,Yt>>16,Ze,ze+(xt-1)*T),K!=null&&(Yt=3*Er+$t+131074>>2,x(K[Y+xt-1],255&Yt,Yt>>16,rt,at+(xt-1)*T)))}}function gr(){za[zp]=wL,za[Hp]=Ab,za[vb]=_L,za[qp]=Eb,za[$p]=Nb,za[J2]=Tb,za[wb]=bL,za[Z2]=Ab,za[ex]=Eb,za[Wp]=Nb,za[tx]=Tb}function In(m){return m&-16384?0>m?0:255:m>>SL}function Br(m,x){return In((19077*m>>8)+(26149*x>>8)-14234)}function Pn(m,x,T){return In((19077*m>>8)-(6419*x>>8)-(13320*T>>8)+8708)}function Vi(m,x){return In((19077*m>>8)+(33050*x>>8)-17685)}function ms(m,x,T,F,H){F[H+0]=Br(m,T),F[H+1]=Pn(m,x,T),F[H+2]=Vi(m,x)}function Ln(m,x,T,F,H){F[H+0]=Vi(m,x),F[H+1]=Pn(m,x,T),F[H+2]=Br(m,T)}function gs(m,x,T,F,H){var K=Pn(m,x,T);x=K<<3&224|Vi(m,x)>>3,F[H+0]=248&Br(m,T)|K>>5,F[H+1]=x}function Oa(m,x,T,F,H){var K=240&Vi(m,x)|15;F[H+0]=240&Br(m,T)|Pn(m,x,T)>>4,F[H+1]=K}function il(m,x,T,F,H){F[H+0]=255,ms(m,x,T,F,H+1)}function of(m,x,T,F,H){Ln(m,x,T,F,H),F[H+3]=255}function Rs(m,x,T,F,H){ms(m,x,T,F,H),F[H+3]=255}function sl(m,x,T){A[m]=function(F,H,K,Y,Q,re,ce,Ce,He){for(var ue=Ce+(-2&He)*T;Ce!=ue;)x(F[H+0],K[Y+0],Q[re+0],ce,Ce),x(F[H+1],K[Y+0],Q[re+0],ce,Ce+T),H+=2,++Y,++re,Ce+=2*T;1&He&&x(F[H+0],K[Y+0],Q[re+0],ce,Ce)}}function dh(m,x,T){return T==0?m==0?x==0?6:5:x==0?4:0:T}function Op(m,x,T,F,H){switch(m>>>30){case 3:xu(x,T,F,H,0);break;case 2:Ua(x,T,F,H);break;case 1:an(x,T,F,H)}}function Ba(m,x){var T,F,H=x.M,K=x.Nb,Y=m.oc,Q=m.pc+40,re=m.oc,ce=m.pc+584,Ce=m.oc,He=m.pc+600;for(T=0;16>T;++T)Y[Q+32*T-1]=129;for(T=0;8>T;++T)re[ce+32*T-1]=129,Ce[He+32*T-1]=129;for(0<H?Y[Q-1-32]=re[ce-1-32]=Ce[He-1-32]=129:(i(Y,Q-32-1,127,21),i(re,ce-32-1,127,9),i(Ce,He-32-1,127,9)),F=0;F<m.za;++F){var ue=x.ya[x.aa+F];if(0<F){for(T=-1;16>T;++T)n(Y,Q+32*T-4,Y,Q+32*T+12,4);for(T=-1;8>T;++T)n(re,ce+32*T-4,re,ce+32*T+4,4),n(Ce,He+32*T-4,Ce,He+32*T+4,4)}var Pe=m.Gd,Be=m.Hd+F,Ze=ue.ad,ze=ue.Hc;if(0<H&&(n(Y,Q-32,Pe[Be].y,0,16),n(re,ce-32,Pe[Be].f,0,8),n(Ce,He-32,Pe[Be].ea,0,8)),ue.Za){var rt=Y,at=Q-32+16;for(0<H&&(F>=m.za-1?i(rt,at,Pe[Be].y[15],4):n(rt,at,Pe[Be+1].y,0,4)),T=0;4>T;T++)rt[at+128+T]=rt[at+256+T]=rt[at+384+T]=rt[at+0+T];for(T=0;16>T;++T,ze<<=2)rt=Y,at=Q+Cb[T],io[ue.Ob[T]](rt,at),Op(ze,Ze,16*+T,rt,at)}else if(rt=dh(F,H,ue.Ob[0]),tc[rt](Y,Q),ze!=0)for(T=0;16>T;++T,ze<<=2)Op(ze,Ze,16*+T,Y,Q+Cb[T]);for(T=ue.Gc,rt=dh(F,H,ue.Dd),ll[rt](re,ce),ll[rt](Ce,He),ze=Ze,rt=re,at=ce,255&(ue=0|T)&&(170&ue?Ro(ze,256,rt,at):En(ze,256,rt,at)),ue=Ce,ze=He,255&(T>>=8)&&(170&T?Ro(Ze,320,ue,ze):En(Ze,320,ue,ze)),H<m.Ub-1&&(n(Pe[Be].y,0,Y,Q+480,16),n(Pe[Be].f,0,re,ce+224,8),n(Pe[Be].ea,0,Ce,He+224,8)),T=8*K*m.B,Pe=m.sa,Be=m.ta+16*F+16*K*m.R,Ze=m.qa,ue=m.ra+8*F+T,ze=m.Ha,rt=m.Ia+8*F+T,T=0;16>T;++T)n(Pe,Be+T*m.R,Y,Q+32*T,16);for(T=0;8>T;++T)n(Ze,ue+T*m.B,re,ce+32*T,8),n(ze,rt+T*m.B,Ce,He+32*T,8)}}function pu(m,x,T,F,H,K,Y,Q,re){var ce=[0],Ce=[0],He=0,ue=re!=null?re.kd:0,Pe=re??new $e;if(m==null||12>T)return 7;Pe.data=m,Pe.w=x,Pe.ha=T,x=[x],T=[T],Pe.gb=[Pe.gb];e:{var Be=x,Ze=T,ze=Pe.gb;if(e(m!=null),e(Ze!=null),e(ze!=null),ze[0]=0,12<=Ze[0]&&!r(m,Be[0],"RIFF")){if(r(m,Be[0]+8,"WEBP")){ze=3;break e}var rt=mt(m,Be[0]+4);if(12>rt||4294967286<rt){ze=3;break e}if(ue&&rt>Ze[0]-8){ze=7;break e}ze[0]=rt,Be[0]+=12,Ze[0]-=12}ze=0}if(ze!=0)return ze;for(rt=0<Pe.gb[0],T=T[0];;){e:{var at=m;Ze=x,ze=T;var xt=ce,ft=Ce,nr=Be=[0];if((Yt=He=[He])[0]=0,8>ze[0])ze=7;else{if(!r(at,Ze[0],"VP8X")){if(mt(at,Ze[0]+4)!=10){ze=3;break e}if(18>ze[0]){ze=7;break e}var $t=mt(at,Ze[0]+8),Er=1+ot(at,Ze[0]+12);if(2147483648<=Er*(at=1+ot(at,Ze[0]+15))){ze=3;break e}nr!=null&&(nr[0]=$t),xt!=null&&(xt[0]=Er),ft!=null&&(ft[0]=at),Ze[0]+=18,ze[0]-=18,Yt[0]=1}ze=0}}if(He=He[0],Be=Be[0],ze!=0)return ze;if(Ze=!!(2&Be),!rt&&He)return 3;if(K!=null&&(K[0]=!!(16&Be)),Y!=null&&(Y[0]=Ze),Q!=null&&(Q[0]=0),Y=ce[0],Be=Ce[0],He&&Ze&&re==null){ze=0;break}if(4>T){ze=7;break}if(rt&&He||!rt&&!He&&!r(m,x[0],"ALPH")){T=[T],Pe.na=[Pe.na],Pe.P=[Pe.P],Pe.Sa=[Pe.Sa];e:{$t=m,ze=x,rt=T;var Yt=Pe.gb;xt=Pe.na,ft=Pe.P,nr=Pe.Sa,Er=22,e($t!=null),e(rt!=null),at=ze[0];var $r=rt[0];for(e(xt!=null),e(nr!=null),xt[0]=null,ft[0]=null,nr[0]=0;;){if(ze[0]=at,rt[0]=$r,8>$r){ze=7;break e}var ji=mt($t,at+4);if(4294967286<ji){ze=3;break e}var Nr=8+ji+1&-2;if(Er+=Nr,0<Yt&&Er>Yt){ze=3;break e}if(!r($t,at,"VP8 ")||!r($t,at,"VP8L")){ze=0;break e}if($r[0]<Nr){ze=7;break e}r($t,at,"ALPH")||(xt[0]=$t,ft[0]=at+8,nr[0]=ji),at+=Nr,$r-=Nr}}if(T=T[0],Pe.na=Pe.na[0],Pe.P=Pe.P[0],Pe.Sa=Pe.Sa[0],ze!=0)break}T=[T],Pe.Ja=[Pe.Ja],Pe.xa=[Pe.xa];e:if(Yt=m,ze=x,rt=T,xt=Pe.gb[0],ft=Pe.Ja,nr=Pe.xa,$t=ze[0],at=!r(Yt,$t,"VP8 "),Er=!r(Yt,$t,"VP8L"),e(Yt!=null),e(rt!=null),e(ft!=null),e(nr!=null),8>rt[0])ze=7;else{if(at||Er){if(Yt=mt(Yt,$t+4),12<=xt&&Yt>xt-12){ze=3;break e}if(ue&&Yt>rt[0]-8){ze=7;break e}ft[0]=Yt,ze[0]+=8,rt[0]-=8,nr[0]=Er}else nr[0]=5<=rt[0]&&Yt[$t+0]==47&&!(Yt[$t+4]>>5),ft[0]=rt[0];ze=0}if(T=T[0],Pe.Ja=Pe.Ja[0],Pe.xa=Pe.xa[0],x=x[0],ze!=0)break;if(4294967286<Pe.Ja)return 3;if(Q==null||Ze||(Q[0]=Pe.xa?2:1),Y=[Y],Be=[Be],Pe.xa){if(5>T){ze=7;break}Q=Y,ue=Be,Ze=K,m==null||5>T?m=0:5<=T&&m[x+0]==47&&!(m[x+4]>>5)?(rt=[0],Yt=[0],xt=[0],_e(ft=new O,m,x,T),rn(ft,rt,Yt,xt)?(Q!=null&&(Q[0]=rt[0]),ue!=null&&(ue[0]=Yt[0]),Ze!=null&&(Ze[0]=xt[0]),m=1):m=0):m=0}else{if(10>T){ze=7;break}Q=Be,m==null||10>T||!Wn(m,x+3,T-3)?m=0:(ue=m[x+0]|m[x+1]<<8|m[x+2]<<16,Ze=16383&(m[x+7]<<8|m[x+6]),m=16383&(m[x+9]<<8|m[x+8]),1&ue||3<(ue>>1&7)||!(ue>>4&1)||ue>>5>=Pe.Ja||!Ze||!m?m=0:(Y&&(Y[0]=Ze),Q&&(Q[0]=m),m=1))}if(!m||(Y=Y[0],Be=Be[0],He&&(ce[0]!=Y||Ce[0]!=Be)))return 3;re!=null&&(re[0]=Pe,re.offset=x-re.w,e(4294967286>x-re.w),e(re.offset==re.ha-T));break}return ze==0||ze==7&&He&&re==null?(K!=null&&(K[0]|=Pe.na!=null&&0<Pe.na.length),F!=null&&(F[0]=Y),H!=null&&(H[0]=Be),0):ze}function lf(m,x,T){var F=x.width,H=x.height,K=0,Y=0,Q=F,re=H;if(x.Da=m!=null&&0<m.Da,x.Da&&(Q=m.cd,re=m.bd,K=m.v,Y=m.j,11>T||(K&=-2,Y&=-2),0>K||0>Y||0>=Q||0>=re||K+Q>F||Y+re>H))return 0;if(x.v=K,x.j=Y,x.va=K+Q,x.o=Y+re,x.U=Q,x.T=re,x.da=m!=null&&0<m.da,x.da){if(!me(Q,re,T=[m.ib],K=[m.hb]))return 0;x.ib=T[0],x.hb=K[0]}return x.ob=m!=null&&m.ob,x.Kb=m==null||!m.Sd,x.da&&(x.ob=x.ib<3*F/4&&x.hb<3*H/4,x.Kb=0),1}function cf(m){if(m==null)return 2;if(11>m.S){var x=m.f.RGBA;x.fb+=(m.height-1)*x.A,x.A=-x.A}else x=m.f.kb,m=m.height,x.O+=(m-1)*x.fa,x.fa=-x.fa,x.N+=(m-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(m-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(m-1)*x.lb,x.lb=-x.lb);return 0}function Kl(m,x,T,F){if(F==null||0>=m||0>=x)return 2;if(T!=null){if(T.Da){var H=T.cd,K=T.bd,Y=-2&T.v,Q=-2&T.j;if(0>Y||0>Q||0>=H||0>=K||Y+H>m||Q+K>x)return 2;m=H,x=K}if(T.da){if(!me(m,x,H=[T.ib],K=[T.hb]))return 2;m=H[0],x=K[0]}}F.width=m,F.height=x;e:{var re=F.width,ce=F.height;if(m=F.S,0>=re||0>=ce||!(m>=zp&&13>m))m=2;else{if(0>=F.Rd&&F.sd==null){Y=K=H=x=0;var Ce=(Q=re*Ib[m])*ce;if(11>m||(K=(ce+1)/2*(x=(re+1)/2),m==12&&(Y=(H=re)*ce)),(ce=s(Ce+2*K+Y))==null){m=1;break e}F.sd=ce,11>m?((re=F.f.RGBA).eb=ce,re.fb=0,re.A=Q,re.size=Ce):((re=F.f.kb).y=ce,re.O=0,re.fa=Q,re.Fd=Ce,re.f=ce,re.N=0+Ce,re.Ab=x,re.Cd=K,re.ea=ce,re.W=0+Ce+K,re.Db=x,re.Ed=K,m==12&&(re.F=ce,re.J=0+Ce+2*K),re.Tc=Y,re.lb=H)}if(x=1,H=F.S,K=F.width,Y=F.height,H>=zp&&13>H)if(11>H)m=F.f.RGBA,x&=(Q=Math.abs(m.A))*(Y-1)+K<=m.size,x&=Q>=K*Ib[H],x&=m.eb!=null;else{m=F.f.kb,Q=(K+1)/2,Ce=(Y+1)/2,re=Math.abs(m.fa),ce=Math.abs(m.Ab);var He=Math.abs(m.Db),ue=Math.abs(m.lb),Pe=ue*(Y-1)+K;x&=re*(Y-1)+K<=m.Fd,x&=ce*(Ce-1)+Q<=m.Cd,x=(x&=He*(Ce-1)+Q<=m.Ed)&re>=K&ce>=Q&He>=Q,x&=m.y!=null,x&=m.f!=null,x&=m.ea!=null,H==12&&(x&=ue>=K,x&=Pe<=m.Tc,x&=m.F!=null)}else x=0;m=x?0:2}}return m!=0||T!=null&&T.fd&&(m=cf(F)),m}var mu=64,oa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],la=24,Yl=32,al=8,Xl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ke("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(m){return m},A.Predictor2=function(m,x,T){return x[T+0]},A.Predictor3=function(m,x,T){return x[T+1]},A.Predictor4=function(m,x,T){return x[T-1]},A.Predictor5=function(m,x,T){return yt(yt(m,x[T+1]),x[T+0])},A.Predictor6=function(m,x,T){return yt(m,x[T-1])},A.Predictor7=function(m,x,T){return yt(m,x[T+0])},A.Predictor8=function(m,x,T){return yt(x[T-1],x[T+0])},A.Predictor9=function(m,x,T){return yt(x[T+0],x[T+1])},A.Predictor10=function(m,x,T){return yt(yt(m,x[T-1]),yt(x[T+0],x[T+1]))},A.Predictor11=function(m,x,T){var F=x[T+0];return 0>=tt(F>>24&255,m>>24&255,(x=x[T-1])>>24&255)+tt(F>>16&255,m>>16&255,x>>16&255)+tt(F>>8&255,m>>8&255,x>>8&255)+tt(255&F,255&m,255&x)?F:m},A.Predictor12=function(m,x,T){var F=x[T+0];return(Ht((m>>24&255)+(F>>24&255)-((x=x[T-1])>>24&255))<<24|Ht((m>>16&255)+(F>>16&255)-(x>>16&255))<<16|Ht((m>>8&255)+(F>>8&255)-(x>>8&255))<<8|Ht((255&m)+(255&F)-(255&x)))>>>0},A.Predictor13=function(m,x,T){var F=x[T-1];return(be((m=yt(m,x[T+0]))>>24&255,F>>24&255)<<24|be(m>>16&255,F>>16&255)<<16|be(m>>8&255,F>>8&255)<<8|be(255&m,255&F))>>>0};var uf=A.PredictorAdd0;A.PredictorAdd1=ct,Ke("Predictor2","PredictorAdd2"),Ke("Predictor3","PredictorAdd3"),Ke("Predictor4","PredictorAdd4"),Ke("Predictor5","PredictorAdd5"),Ke("Predictor6","PredictorAdd6"),Ke("Predictor7","PredictorAdd7"),Ke("Predictor8","PredictorAdd8"),Ke("Predictor9","PredictorAdd9"),Ke("Predictor10","PredictorAdd10"),Ke("Predictor11","PredictorAdd11"),Ke("Predictor12","PredictorAdd12"),Ke("Predictor13","PredictorAdd13");var fh=A.PredictorAdd2;Dt("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),Dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var fi,Bp=A.ColorIndexInverseTransform,Po=A.MapARGB,Lo=A.VP8LColorIndexInverseTransformAlpha,hf=A.MapAlpha,df=A.VP8LPredictorsAdd=[];df.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var ff,pf,Ql,Jl,Zl,gu,ec,xu,Ua,Ro,an,En,pi,Ri,ol,mf,ph,Up,sb,ab,ob,lb,cb,ub,gf,hb,db,fb,pb=s(511),mb=s(2041),gb=s(225),xb=s(767),yb=0,Q2=mb,Vp=gb,ca=xb,Va=pb,zp=0,Hp=1,vb=2,qp=3,$p=4,J2=5,wb=6,Z2=7,ex=8,Wp=9,tx=10,aL=[2,3,7],oL=[3,3,11],_b=[280,256,256,256,40],lL=[0,1,1,1,0],cL=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],uL=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],hL=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],dL=8,rx=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],nx=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],xf=null,fL=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],pL=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],bb=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],mL=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gL=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],xL=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],yL=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],tc=[],io=[],ll=[],vL=1,Sb=2,rc=[],za=[];bt("UpsampleRgbLinePair",ms,3),bt("UpsampleBgrLinePair",Ln,3),bt("UpsampleRgbaLinePair",Rs,4),bt("UpsampleBgraLinePair",of,4),bt("UpsampleArgbLinePair",il,4),bt("UpsampleRgba4444LinePair",Oa,2),bt("UpsampleRgb565LinePair",gs,2);var wL=A.UpsampleRgbLinePair,_L=A.UpsampleBgrLinePair,Ab=A.UpsampleRgbaLinePair,Eb=A.UpsampleBgraLinePair,Nb=A.UpsampleArgbLinePair,Tb=A.UpsampleRgba4444LinePair,bL=A.UpsampleRgb565LinePair,Gp=16,Kp=1<<Gp-1,yf=-227,ix=482,SL=6,kb=0,AL=s(256),EL=s(256),NL=s(256),TL=s(256),kL=s(ix-yf),CL=s(ix-yf);sl("YuvToRgbRow",ms,3),sl("YuvToBgrRow",Ln,3),sl("YuvToRgbaRow",Rs,4),sl("YuvToBgraRow",of,4),sl("YuvToArgbRow",il,4),sl("YuvToRgba4444Row",Oa,2),sl("YuvToRgb565Row",gs,2);var Cb=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Yp=[0,2,8],IL=[8,7,6,4,4,2,2,2,1,1,1,1],PL=1;this.WebPDecodeRGBA=function(m,x,T,F,H){var K=Hp,Y=new Ee,Q=new Wt;Y.ba=Q,Q.S=K,Q.width=[Q.width],Q.height=[Q.height];var re=Q.width,ce=Q.height,Ce=new Ye;if(Ce==null||m==null)var He=2;else e(Ce!=null),He=pu(m,x,T,Ce.width,Ce.height,Ce.Pd,Ce.Qd,Ce.format,null);if(He!=0?re=0:(re!=null&&(re[0]=Ce.width[0]),ce!=null&&(ce[0]=Ce.height[0]),re=1),re){Q.width=Q.width[0],Q.height=Q.height[0],F!=null&&(F[0]=Q.width),H!=null&&(H[0]=Q.height);e:{if(F=new Xr,(H=new $e).data=m,H.w=x,H.ha=T,H.kd=1,x=[0],e(H!=null),((m=pu(H.data,H.w,H.ha,null,null,null,x,null,H))==0||m==7)&&x[0]&&(m=4),(x=m)==0){if(e(Y!=null),F.data=H.data,F.w=H.w+H.offset,F.ha=H.ha-H.offset,F.put=Jt,F.ac=Fn,F.bc=qn,F.ma=Y,H.xa){if((m=je())==null){Y=1;break e}if(function(ue,Pe){var Be=[0],Ze=[0],ze=[0];t:for(;;){if(ue==null)return 0;if(Pe==null)return ue.a=2,0;if(ue.l=Pe,ue.a=0,_e(ue.m,Pe.data,Pe.w,Pe.ha),!rn(ue.m,Be,Ze,ze)){ue.a=3;break t}if(ue.xb=Sb,Pe.width=Be[0],Pe.height=Ze[0],!Me(Be[0],Ze[0],1,ue,null))break t;return 1}return e(ue.a!=0),0}(m,F)){if(F=(x=Kl(F.width,F.height,Y.Oa,Y.ba))==0){t:{F=m;r:for(;;){if(F==null){F=0;break t}if(e(F.s.yc!=null),e(F.s.Ya!=null),e(0<F.s.Wb),e((T=F.l)!=null),e((H=T.ma)!=null),F.xb!=0){if(F.ca=H.ba,F.tb=H.tb,e(F.ca!=null),!lf(H.Oa,T,qp)){F.a=2;break r}if(!Oe(F,T.width)||T.da)break r;if((T.da||Qt(F.ca.S))&&We(),11>F.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),F.ca.f.kb.F!=null&&We()),F.Pb&&0<F.s.ua&&F.s.vb.X==null&&!te(F.s.vb,F.s.Wa.Xa)){F.a=1;break r}F.xb=0}if(!De(F,F.V,F.Ba,F.c,F.i,T.o,ee))break r;H.Dc=F.Ma,F=1;break t}e(F.a!=0),F=0}F=!F}F&&(x=m.a)}else x=m.a}else{if((m=new Lr)==null){Y=1;break e}if(m.Fa=H.na,m.P=H.P,m.qc=H.Sa,wn(m,F)){if((x=Kl(F.width,F.height,Y.Oa,Y.ba))==0){if(m.Aa=0,T=Y.Oa,e((H=m)!=null),T!=null){if(0<(re=0>(re=T.Md)?0:100<re?255:255*re/100)){for(ce=Ce=0;4>ce;++ce)12>(He=H.pb[ce]).lc&&(He.ia=re*IL[0>He.lc?0:He.lc]>>3),Ce|=He.ia;Ce&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=T.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}(function(ue,Pe){if(ue==null)return 0;if(Pe==null)return br(ue,2,"NULL VP8Io parameter in VP8Decode().");if(!ue.cb&&!wn(ue,Pe))return 0;if(e(ue.cb),Pe.ac==null||Pe.ac(Pe)){Pe.ob&&(ue.L=0);var Be=Yp[ue.L];if(ue.L==2?(ue.yb=0,ue.zb=0):(ue.yb=Pe.v-Be>>4,ue.zb=Pe.j-Be>>4,0>ue.yb&&(ue.yb=0),0>ue.zb&&(ue.zb=0)),ue.Va=Pe.o+15+Be>>4,ue.Hb=Pe.va+15+Be>>4,ue.Hb>ue.za&&(ue.Hb=ue.za),ue.Va>ue.Ub&&(ue.Va=ue.Ub),0<ue.L){var Ze=ue.ed;for(Be=0;4>Be;++Be){var ze;if(ue.Qa.Cb){var rt=ue.Qa.Lb[Be];ue.Qa.Fb||(rt+=Ze.Tb)}else rt=Ze.Tb;for(ze=0;1>=ze;++ze){var at=ue.gd[Be][ze],xt=rt;if(Ze.Pc&&(xt+=Ze.vd[0],ze&&(xt+=Ze.od[0])),0<(xt=0>xt?0:63<xt?63:xt)){var ft=xt;0<Ze.wb&&(ft=4<Ze.wb?ft>>2:ft>>1)>9-Ze.wb&&(ft=9-Ze.wb),1>ft&&(ft=1),at.dd=ft,at.tc=2*xt+ft,at.ld=40<=xt?2:15<=xt?1:0}else at.tc=0;at.La=ze}}}Be=0}else br(ue,6,"Frame setup failed"),Be=ue.a;if(Be=Be==0){if(Be){ue.$c=0,0<ue.Aa||(ue.Ic=PL);t:{Be=ue.Ic,Ze=4*(ft=ue.za);var nr=32*ft,$t=ft+1,Er=0<ue.L?ft*(0<ue.Aa?2:1):0,Yt=(ue.Aa==2?2:1)*ft;if((at=Ze+832+(ze=3*(16*Be+Yp[ue.L])/2*nr)+(rt=ue.Fa!=null&&0<ue.Fa.length?ue.Kc.c*ue.Kc.i:0))!=at)Be=0;else{if(at>ue.Vb){if(ue.Vb=0,ue.Ec=s(at),ue.Fc=0,ue.Ec==null){Be=br(ue,1,"no memory during frame initialization.");break t}ue.Vb=at}at=ue.Ec,xt=ue.Fc,ue.Ac=at,ue.Bc=xt,xt+=Ze,ue.Gd=a(nr,Jn),ue.Hd=0,ue.rb=a($t+1,nn),ue.sb=1,ue.wa=Er?a(Er,vr):null,ue.Y=0,ue.D.Nb=0,ue.D.wa=ue.wa,ue.D.Y=ue.Y,0<ue.Aa&&(ue.D.Y+=ft),e(!0),ue.oc=at,ue.pc=xt,xt+=832,ue.ya=a(Yt,hi),ue.aa=0,ue.D.ya=ue.ya,ue.D.aa=ue.aa,ue.Aa==2&&(ue.D.aa+=ft),ue.R=16*ft,ue.B=8*ft,ft=(nr=Yp[ue.L])*ue.R,nr=nr/2*ue.B,ue.sa=at,ue.ta=xt+ft,ue.qa=ue.sa,ue.ra=ue.ta+16*Be*ue.R+nr,ue.Ha=ue.qa,ue.Ia=ue.ra+8*Be*ue.B+nr,ue.$c=0,xt+=ze,ue.mb=rt?at:null,ue.nb=rt?xt:null,e(xt+rt<=ue.Fc+ue.Vb),Ra(ue),i(ue.Ac,ue.Bc,0,Ze),Be=1}}if(Be){if(Pe.ka=0,Pe.y=ue.sa,Pe.O=ue.ta,Pe.f=ue.qa,Pe.N=ue.ra,Pe.ea=ue.Ha,Pe.Vd=ue.Ia,Pe.fa=ue.R,Pe.Rc=ue.B,Pe.F=null,Pe.J=0,!yb){for(Be=-255;255>=Be;++Be)pb[255+Be]=0>Be?-Be:Be;for(Be=-1020;1020>=Be;++Be)mb[1020+Be]=-128>Be?-128:127<Be?127:Be;for(Be=-112;112>=Be;++Be)gb[112+Be]=-16>Be?-16:15<Be?15:Be;for(Be=-255;510>=Be;++Be)xb[255+Be]=0>Be?0:255<Be?255:Be;yb=1}ec=ds,xu=to,Ro=Ws,an=ei,En=ja,Ua=fu,pi=ri,Ri=ar,ol=U,mf=ae,ph=ni,Up=b,sb=xe,ab=Le,ob=An,lb=Ls,cb=kr,ub=aa,io[0]=Ma,io[1]=Hl,io[2]=no,io[3]=nl,io[4]=V,io[5]=Re,io[6]=pe,io[7]=Ve,io[8]=Qe,io[9]=it,tc[0]=Wl,tc[1]=$l,tc[2]=ro,tc[3]=Gs,tc[4]=Da,tc[5]=Xi,tc[6]=Gl,ll[0]=ur,ll[1]=ql,ll[2]=er,ll[3]=Mt,ll[4]=ut,ll[5]=Ot,ll[6]=sr,Be=1}else Be=0}Be&&(Be=function($r,ji){for($r.M=0;$r.M<$r.Va;++$r.M){var Nr,Xt=$r.Jc[$r.M&$r.Xb],Pt=$r.m,mi=$r;for(Nr=0;Nr<mi.za;++Nr){var _r=Pt,Gr=mi,Dn=Gr.Ac,Qi=Gr.Bc+4*Nr,js=Gr.zc,ii=Gr.ya[Gr.aa+Nr];if(Gr.Qa.Bb?ii.$b=Ne(_r,Gr.Pa.jb[0])?2+Ne(_r,Gr.Pa.jb[2]):Ne(_r,Gr.Pa.jb[1]):ii.$b=0,Gr.kc&&(ii.Ad=Ne(_r,Gr.Bd)),ii.Za=!Ne(_r,145)+0,ii.Za){var xs=ii.Ob,Fs=0;for(Gr=0;4>Gr;++Gr){var Fi,Qr=js[0+Gr];for(Fi=0;4>Fi;++Fi){Qr=gL[Dn[Qi+Fi]][Qr];for(var hn=bb[Ne(_r,Qr[0])];0<hn;)hn=bb[2*hn+Ne(_r,Qr[hn])];Qr=-hn,Dn[Qi+Fi]=Qr}n(xs,Fs,Dn,Qi,4),Fs+=4,js[0+Gr]=Qr}}else Qr=Ne(_r,156)?Ne(_r,128)?1:3:Ne(_r,163)?2:0,ii.Ob[0]=Qr,i(Dn,Qi,Qr,4),i(js,0,Qr,4);ii.Dd=Ne(_r,142)?Ne(_r,114)?Ne(_r,183)?1:3:2:0}if(mi.m.Ka)return br($r,7,"Premature end-of-partition0 encountered.");for(;$r.ja<$r.za;++$r.ja){if(mi=Xt,_r=(Pt=$r).rb[Pt.sb-1],Dn=Pt.rb[Pt.sb+Pt.ja],Nr=Pt.ya[Pt.aa+Pt.ja],Qi=Pt.kc?Nr.Ad:0)_r.la=Dn.la=0,Nr.Za||(_r.Na=Dn.Na=0),Nr.Hc=0,Nr.Gc=0,Nr.ia=0;else{var si,dn;if(_r=Dn,Dn=mi,Qi=Pt.Pa.Xc,js=Pt.ya[Pt.aa+Pt.ja],ii=Pt.pb[js.$b],Gr=js.ad,xs=0,Fs=Pt.rb[Pt.sb-1],Qr=Fi=0,i(Gr,xs,0,384),js.Za)var Ji=0,so=Qi[3];else{hn=s(16);var gi=_r.Na+Fs.Na;if(gi=xf(Dn,Qi[1],gi,ii.Eb,0,hn,0),_r.Na=Fs.Na=(0<gi)+0,1<gi)ec(hn,0,Gr,xs);else{var Ks=hn[0]+3>>3;for(hn=0;256>hn;hn+=16)Gr[xs+hn]=Ks}Ji=1,so=Qi[0]}var Nn=15&_r.la,Di=15&Fs.la;for(hn=0;4>hn;++hn){var ua=1&Di;for(Ks=dn=0;4>Ks;++Ks)Nn=Nn>>1|(ua=(gi=xf(Dn,so,gi=ua+(1&Nn),ii.Sc,Ji,Gr,xs))>Ji)<<7,dn=dn<<2|(3<gi?3:1<gi?2:Gr[xs+0]!=0),xs+=16;Nn>>=4,Di=Di>>1|ua<<7,Fi=(Fi<<8|dn)>>>0}for(so=Nn,Ji=Di>>4,si=0;4>si;si+=2){for(dn=0,Nn=_r.la>>4+si,Di=Fs.la>>4+si,hn=0;2>hn;++hn){for(ua=1&Di,Ks=0;2>Ks;++Ks)gi=ua+(1&Nn),Nn=Nn>>1|(ua=0<(gi=xf(Dn,Qi[2],gi,ii.Qc,0,Gr,xs)))<<3,dn=dn<<2|(3<gi?3:1<gi?2:Gr[xs+0]!=0),xs+=16;Nn>>=2,Di=Di>>1|ua<<5}Qr|=dn<<4*si,so|=Nn<<4<<si,Ji|=(240&Di)<<si}_r.la=so,Fs.la=Ji,js.Hc=Fi,js.Gc=Qr,js.ia=43690&Qr?0:ii.ia,Qi=!(Fi|Qr)}if(0<Pt.L&&(Pt.wa[Pt.Y+Pt.ja]=Pt.gd[Nr.$b][Nr.Za],Pt.wa[Pt.Y+Pt.ja].La|=!Qi),mi.Ka)return br($r,7,"Premature end-of-file encountered.")}if(Ra($r),Pt=ji,mi=1,Nr=(Xt=$r).D,_r=0<Xt.L&&Xt.M>=Xt.zb&&Xt.M<=Xt.Va,Xt.Aa==0)t:{if(Nr.M=Xt.M,Nr.uc=_r,Ba(Xt,Nr),mi=1,Nr=(dn=Xt.D).Nb,_r=(Qr=Yp[Xt.L])*Xt.R,Dn=Qr/2*Xt.B,hn=16*Nr*Xt.R,Ks=8*Nr*Xt.B,Qi=Xt.sa,js=Xt.ta-_r+hn,ii=Xt.qa,Gr=Xt.ra-Dn+Ks,xs=Xt.Ha,Fs=Xt.Ia-Dn+Ks,Di=(Nn=dn.M)==0,Fi=Nn>=Xt.Va-1,Xt.Aa==2&&Ba(Xt,dn),dn.uc)for(ua=(gi=Xt).D.M,e(gi.D.uc),dn=gi.yb;dn<gi.Hb;++dn){Ji=dn,so=ua;var Ds=(ha=(Zi=gi).D).Nb;si=Zi.R;var ha=ha.wa[ha.Y+Ji],da=Zi.sa,Ys=Zi.ta+16*Ds*si+16*Ji,fa=ha.dd,Rn=ha.tc;if(Rn!=0)if(e(3<=Rn),Zi.L==1)0<Ji&&lb(da,Ys,si,Rn+4),ha.La&&ub(da,Ys,si,Rn),0<so&&ob(da,Ys,si,Rn+4),ha.La&&cb(da,Ys,si,Rn);else{var pa=Zi.B,ao=Zi.qa,yu=Zi.ra+8*Ds*pa+8*Ji,cl=Zi.Ha,Zi=Zi.Ia+8*Ds*pa+8*Ji;Ds=ha.ld,0<Ji&&(Ri(da,Ys,si,Rn+4,fa,Ds),mf(ao,yu,cl,Zi,pa,Rn+4,fa,Ds)),ha.La&&(Up(da,Ys,si,Rn,fa,Ds),ab(ao,yu,cl,Zi,pa,Rn,fa,Ds)),0<so&&(pi(da,Ys,si,Rn+4,fa,Ds),ol(ao,yu,cl,Zi,pa,Rn+4,fa,Ds)),ha.La&&(ph(da,Ys,si,Rn,fa,Ds),sb(ao,yu,cl,Zi,pa,Rn,fa,Ds))}}if(Xt.ia&&alert("todo:DitherRow"),Pt.put!=null){if(dn=16*Nn,Nn=16*(Nn+1),Di?(Pt.y=Xt.sa,Pt.O=Xt.ta+hn,Pt.f=Xt.qa,Pt.N=Xt.ra+Ks,Pt.ea=Xt.Ha,Pt.W=Xt.Ia+Ks):(dn-=Qr,Pt.y=Qi,Pt.O=js,Pt.f=ii,Pt.N=Gr,Pt.ea=xs,Pt.W=Fs),Fi||(Nn-=Qr),Nn>Pt.o&&(Nn=Pt.o),Pt.F=null,Pt.J=null,Xt.Fa!=null&&0<Xt.Fa.length&&dn<Nn&&(Pt.J=g(Xt,Pt,dn,Nn-dn),Pt.F=Xt.mb,Pt.F==null&&Pt.F.length==0)){mi=br(Xt,3,"Could not decode alpha data.");break t}dn<Pt.j&&(Qr=Pt.j-dn,dn=Pt.j,e(!(1&Qr)),Pt.O+=Xt.R*Qr,Pt.N+=Xt.B*(Qr>>1),Pt.W+=Xt.B*(Qr>>1),Pt.F!=null&&(Pt.J+=Pt.width*Qr)),dn<Nn&&(Pt.O+=Pt.v,Pt.N+=Pt.v>>1,Pt.W+=Pt.v>>1,Pt.F!=null&&(Pt.J+=Pt.v),Pt.ka=dn-Pt.j,Pt.U=Pt.va-Pt.v,Pt.T=Nn-dn,mi=Pt.put(Pt))}Nr+1!=Xt.Ic||Fi||(n(Xt.sa,Xt.ta-_r,Qi,js+16*Xt.R,_r),n(Xt.qa,Xt.ra-Dn,ii,Gr+8*Xt.B,Dn),n(Xt.Ha,Xt.Ia-Dn,xs,Fs+8*Xt.B,Dn))}if(!mi)return br($r,6,"Output aborted.")}return 1}(ue,Pe)),Pe.bc!=null&&Pe.bc(Pe),Be&=1}return Be?(ue.cb=0,Be):0})(m,F)||(x=m.a)}}else x=m.a}x==0&&Y.Oa!=null&&Y.Oa.fd&&(x=cf(Y.ba))}Y=x}K=Y!=0?null:11>K?Q.f.RGBA.eb:Q.f.kb.y}else K=null;return K};var Ib=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(A,D){for(var N="",R=0;R<4;R++)N+=String.fromCharCode(A[D++]);return N}function h(A,D){return A[D+0]|A[D+1]<<8}function f(A,D){return(A[D+0]|A[D+1]<<8|A[D+2]<<16)>>>0}function p(A,D){return(A[D+0]|A[D+1]<<8|A[D+2]<<16|A[D+3]<<24)>>>0}new l;var d=[0],v=[0],y=[],_=new l,w=t,S=function(A,D){var N={},R=0,L=!1,se=0,ge=0;if(N.frames=[],!function(P,O){for(var B=0;B<4;B++)if(P[O+B]!="RIFF".charCodeAt(B))return!0;return!1}(A,D)){for(p(A,D+=4),D+=8;D<A.length;){var ve=u(A,D),ye=p(A,D+=4);D+=4;var he=ye+(1&ye);switch(ve){case"VP8 ":case"VP8L":N.frames[R]===void 0&&(N.frames[R]={}),(Ie=N.frames[R]).src_off=L?ge:D-8,Ie.src_size=se+ye+8,R++,L&&(L=!1,se=0,ge=0);break;case"VP8X":(Ie=N.header={}).feature_flags=A[D];var _e=D+4;Ie.canvas_width=1+f(A,_e),_e+=3,Ie.canvas_height=1+f(A,_e),_e+=3;break;case"ALPH":L=!0,se=he+8,ge=D-8;break;case"ANIM":(Ie=N.header).bgcolor=p(A,D),_e=D+4,Ie.loop_count=h(A,_e),_e+=2;break;case"ANMF":var Ue,Ie;(Ie=N.frames[R]={}).offset_x=2*f(A,D),D+=3,Ie.offset_y=2*f(A,D),D+=3,Ie.width=1+f(A,D),D+=3,Ie.height=1+f(A,D),D+=3,Ie.duration=f(A,D),D+=3,Ue=A[D++],Ie.dispose=1&Ue,Ie.blend=Ue>>1&1}ve!="ANMF"&&(D+=he)}return N}}(w,0);S.response=w,S.rgbaoutput=!0,S.dataurl=!1;var C=S.header?S.header:null,j=S.frames?S.frames:null;if(C){C.loop_counter=C.loop_count,d=[C.canvas_height],v=[C.canvas_width];for(var q=0;q<j.length&&j[q].blend!=0;q++);}var G=j[0],E=_.WebPDecodeRGBA(w,G.src_off,G.src_size,v,d);G.rgba=E,G.imgwidth=v[0],G.imgheight=d[0];for(var k=0;k<v[0]*d[0]*4;k++)y[k]=E[k];return this.width=v,this.height=d,this.data=y,this}(function(t){var e,r,n,i,s,a,o,l,u,h=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new h}]);var f=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var O=P;Object.defineProperty(this,"pdf",{get:function(){return O}});var B=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return B},set:function(te){B=!!te}});var z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return z},set:function(te){z=!!te}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(te){isNaN(te)||(Z=te)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(te){isNaN(te)||(de=te)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(te){var ke;typeof te=="number"?ke=[te,te,te,te]:((ke=new Array(4))[0]=te[0],ke[1]=te.length>=2?te[1]:ke[0],ke[2]=te.length>=3?te[2]:ke[0],ke[3]=te.length>=4?te[3]:ke[1]),u.margin=ke}});var Se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Se},set:function(te){Se=te}});var Ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ae},set:function(te){Ae=te}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(te){Ne=te}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(te){te instanceof h&&(u=te)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(te){u.path=te}});var Xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Xe},set:function(te){Xe=te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(te){var ke;ke=p(te),this.ctx.fillStyle=ke.style,this.ctx.isFillTransparent=ke.a===0,this.ctx.fillOpacity=ke.a,this.pdf.setFillColor(ke.r,ke.g,ke.b,{a:ke.a}),this.pdf.setTextColor(ke.r,ke.g,ke.b,{a:ke.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(te){var ke=p(te);this.ctx.strokeStyle=ke.style,this.ctx.isStrokeTransparent=ke.a===0,this.ctx.strokeOpacity=ke.a,ke.a===0?this.pdf.setDrawColor(255,255,255):(ke.a,this.pdf.setDrawColor(ke.r,ke.g,ke.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(te){["butt","round","square"].indexOf(te)!==-1&&(this.ctx.lineCap=te,this.pdf.setLineCap(te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(te){isNaN(te)||(this.ctx.lineWidth=te,this.pdf.setLineWidth(te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(te){["bevel","round","miter"].indexOf(te)!==-1&&(this.ctx.lineJoin=te,this.pdf.setLineJoin(te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(te){isNaN(te)||(this.ctx.miterLimit=te,this.pdf.setMiterLimit(te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(te){this.ctx.textBaseline=te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(te){["right","end","center","left","start"].indexOf(te)!==-1&&(this.ctx.textAlign=te)}});var et=null,ot=null,mt=null;Object.defineProperty(this,"fontFaces",{get:function(){return mt},set:function(te){et=null,ot=null,mt=te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(te){var ke;if(this.ctx.font=te,(ke=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(te))!==null){var X=ke[1];ke[2];var me=ke[3],fe=ke[4];ke[5];var qe=ke[6],Ke=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(fe)[2];fe=Math.floor(Ke==="px"?parseFloat(fe)*this.pdf.internal.scaleFactor:Ke==="em"?parseFloat(fe)*this.pdf.getFontSize():parseFloat(fe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(fe);var st=function(Dt){var Wr,hr,Ge=[],Lt=Dt.trim();if(Lt==="")return Ey;if(Lt in VA)return[VA[Lt]];for(;Lt!=="";){switch(hr=null,Wr=(Lt=HA(Lt)).charAt(0)){case'"':case"'":hr=mq(Lt.substring(1),Wr);break;default:hr=gq(Lt)}if(hr===null||(Ge.push(hr[0]),(Lt=HA(hr[1]))!==""&&Lt.charAt(0)!==","))return Ey;Lt=Lt.replace(/^,/,"")}return Ge}(qe);if(this.fontFaces){var yt=function(Dt,Wr){var hr=Dt.getFontList(),Ge=JSON.stringify(hr);if(et===null||ot!==Ge){var Lt=function(mr){var Kt=[];return Object.keys(mr).forEach(function(Pr){mr[Pr].forEach(function(Qt){var Zt=null;switch(Qt){case"bold":Zt={family:Pr,weight:"bold"};break;case"italic":Zt={family:Pr,style:"italic"};break;case"bolditalic":Zt={family:Pr,weight:"bold",style:"italic"};break;case"":case"normal":Zt={family:Pr}}Zt!==null&&(Zt.ref={name:Pr,style:Qt},Kt.push(Zt))})}),Kt}(hr);et=function(mr){for(var Kt={},Pr=0;Pr<mr.length;++Pr){var Qt=Ay(mr[Pr]),Zt=Qt.family,qr=Qt.stretch,Wt=Qt.style,Ye=Qt.weight;Kt[Zt]=Kt[Zt]||{},Kt[Zt][qr]=Kt[Zt][qr]||{},Kt[Zt][qr][Wt]=Kt[Zt][qr][Wt]||{},Kt[Zt][qr][Wt][Ye]=Qt}return Kt}(Lt.concat(Wr)),ot=Ge}return et}(this.pdf,this.fontFaces),Ht=st.map(function(Dt){return{family:Dt,stretch:"normal",weight:me,style:X}}),be=function(Dt,Wr,hr){for(var Ge=(hr=hr||{}).defaultFontFamily||"times",Lt=Object.assign({},pq,hr.genericFontFamilies||{}),mr=null,Kt=null,Pr=0;Pr<Wr.length;++Pr)if(Lt[(mr=Ay(Wr[Pr])).family]&&(mr.family=Lt[mr.family]),Dt.hasOwnProperty(mr.family)){Kt=Dt[mr.family];break}if(!(Kt=Kt||Dt[Ge]))throw new Error("Could not find a font-family for the rule '"+zA(mr)+"' and default family '"+Ge+"'.");if(Kt=function(Qt,Zt){if(Zt[Qt])return Zt[Qt];var qr=Aw[Qt],Wt=qr<=Aw.normal?-1:1,Ye=UA(Zt,XI,qr,Wt);if(!Ye)throw new Error("Could not find a matching font-stretch value for "+Qt);return Ye}(mr.stretch,Kt),Kt=function(Qt,Zt){if(Zt[Qt])return Zt[Qt];for(var qr=YI[Qt],Wt=0;Wt<qr.length;++Wt)if(Zt[qr[Wt]])return Zt[qr[Wt]];throw new Error("Could not find a matching font-style for "+Qt)}(mr.style,Kt),!(Kt=function(Qt,Zt){if(Zt[Qt])return Zt[Qt];if(Qt===400&&Zt[500])return Zt[500];if(Qt===500&&Zt[400])return Zt[400];var qr=fq[Qt],Wt=UA(Zt,QI,qr,Qt<400?-1:1);if(!Wt)throw new Error("Could not find a matching font-weight for value "+Qt);return Wt}(mr.weight,Kt)))throw new Error("Failed to resolve a font for the rule '"+zA(mr)+"'.");return Kt}(yt,Ht);this.pdf.setFont(be.ref.name,be.ref.style)}else{var tt="";(me==="bold"||parseInt(me,10)>=700||X==="bold")&&(tt="bold"),X==="italic"&&(tt+="italic"),tt.length===0&&(tt="normal");for(var ct="",St={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Rt=0;Rt<st.length;Rt++){if(this.pdf.internal.getFont(st[Rt],tt,{noFallback:!0,disableWarning:!0})!==void 0){ct=st[Rt];break}if(tt==="bolditalic"&&this.pdf.internal.getFont(st[Rt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ct=st[Rt],tt="bold";else if(this.pdf.internal.getFont(st[Rt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ct=st[Rt],tt="normal";break}}if(ct===""){for(var jt=0;jt<st.length;jt++)if(St[st[jt]]){ct=St[st[jt]];break}}ct=ct===""?"Times":ct,this.pdf.setFont(ct,tt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(te){this.ctx.globalCompositeOperation=te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(te){this.ctx.globalAlpha=te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(te){this.ctx.lineDashOffset=te,Ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(te){this.ctx.lineDash=te,Ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(te){this.ctx.ignoreClearRect=!!te}})};f.prototype.setLineDash=function(P){this.lineDash=P},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){j.call(this,"fill",!1)},f.prototype.stroke=function(){j.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(P,O){if(isNaN(P)||isNaN(O))throw Tn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var B=this.ctx.transform.applyToPoint(new a(P,O));this.path.push({type:"mt",x:B.x,y:B.y}),this.ctx.lastPoint=new a(P,O)},f.prototype.closePath=function(){var P=new a(0,0),O=0;for(O=this.path.length-1;O!==-1;O--)if(this.path[O].type==="begin"&&gn(this.path[O+1])==="object"&&typeof this.path[O+1].x=="number"){P=new a(this.path[O+1].x,this.path[O+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},f.prototype.lineTo=function(P,O){if(isNaN(P)||isNaN(O))throw Tn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var B=this.ctx.transform.applyToPoint(new a(P,O));this.path.push({type:"lt",x:B.x,y:B.y}),this.ctx.lastPoint=new a(B.x,B.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},f.prototype.quadraticCurveTo=function(P,O,B,z){if(isNaN(B)||isNaN(z)||isNaN(P)||isNaN(O))throw Tn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new a(B,z)),de=this.ctx.transform.applyToPoint(new a(P,O));this.path.push({type:"qct",x1:de.x,y1:de.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(Z.x,Z.y)},f.prototype.bezierCurveTo=function(P,O,B,z,Z,de){if(isNaN(Z)||isNaN(de)||isNaN(P)||isNaN(O)||isNaN(B)||isNaN(z))throw Tn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Se=this.ctx.transform.applyToPoint(new a(Z,de)),Ae=this.ctx.transform.applyToPoint(new a(P,O)),Ne=this.ctx.transform.applyToPoint(new a(B,z));this.path.push({type:"bct",x1:Ae.x,y1:Ae.y,x2:Ne.x,y2:Ne.y,x:Se.x,y:Se.y}),this.ctx.lastPoint=new a(Se.x,Se.y)},f.prototype.arc=function(P,O,B,z,Z,de){if(isNaN(P)||isNaN(O)||isNaN(B)||isNaN(z)||isNaN(Z))throw Tn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var Se=this.ctx.transform.applyToPoint(new a(P,O));P=Se.x,O=Se.y;var Ae=this.ctx.transform.applyToPoint(new a(0,B)),Ne=this.ctx.transform.applyToPoint(new a(0,0));B=Math.sqrt(Math.pow(Ae.x-Ne.x,2)+Math.pow(Ae.y-Ne.y,2))}Math.abs(Z-z)>=2*Math.PI&&(z=0,Z=2*Math.PI),this.path.push({type:"arc",x:P,y:O,radius:B,startAngle:z,endAngle:Z,counterclockwise:de})},f.prototype.arcTo=function(P,O,B,z,Z){throw new Error("arcTo not implemented.")},f.prototype.rect=function(P,O,B,z){if(isNaN(P)||isNaN(O)||isNaN(B)||isNaN(z))throw Tn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,O),this.lineTo(P+B,O),this.lineTo(P+B,O+z),this.lineTo(P,O+z),this.lineTo(P,O),this.lineTo(P+B,O),this.lineTo(P,O)},f.prototype.fillRect=function(P,O,B,z){if(isNaN(P)||isNaN(O)||isNaN(B)||isNaN(z))throw Tn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!d.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,O,B,z),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},f.prototype.strokeRect=function(P,O,B,z){if(isNaN(P)||isNaN(O)||isNaN(B)||isNaN(z))throw Tn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(P,O,B,z),this.stroke())},f.prototype.clearRect=function(P,O,B,z){if(isNaN(P)||isNaN(O)||isNaN(B)||isNaN(z))throw Tn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,O,B,z))},f.prototype.save=function(P){P=typeof P!="boolean"||P;for(var O=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("q");if(this.pdf.setPage(O),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var z=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=z}},f.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var O=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("Q");this.pdf.setPage(O),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(P){var O,B,z,Z;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))O=0,B=0,z=0,Z=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(de!==null)O=parseInt(de[1]),B=parseInt(de[2]),z=parseInt(de[3]),Z=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)O=parseInt(de[1]),B=parseInt(de[2]),z=parseInt(de[3]),Z=parseFloat(de[4]);else{if(Z=1,typeof P=="string"&&P.charAt(0)!=="#"){var Se=new zI(P);P=Se.ok?Se.toHex():"#000000"}P.length===4?(O=P.substring(1,2),O+=O,B=P.substring(2,3),B+=B,z=P.substring(3,4),z+=z):(O=P.substring(1,3),B=P.substring(3,5),z=P.substring(5,7)),O=parseInt(O,16),B=parseInt(B,16),z=parseInt(z,16)}}return{r:O,g:B,b:z,a:Z,style:P}},d=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(P,O,B,z){if(isNaN(O)||isNaN(B)||typeof P!="string")throw Tn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(z=isNaN(z)?void 0:z,!d.call(this)){var Z=he(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;R.call(this,{text:P,x:O,y:B,scale:de,angle:Z,align:this.textAlign,maxWidth:z})}},f.prototype.strokeText=function(P,O,B,z){if(isNaN(O)||isNaN(B)||typeof P!="string")throw Tn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){z=isNaN(z)?void 0:z;var Z=he(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;R.call(this,{text:P,x:O,y:B,scale:de,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:z})}},f.prototype.measureText=function(P){if(typeof P!="string")throw Tn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var O=this.pdf,B=this.pdf.internal.scaleFactor,z=O.internal.getFontSize(),Z=O.getStringUnitWidth(P)*z/O.internal.scaleFactor;return new function(de){var Se=(de=de||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Se}}),this}({width:Z*=Math.round(96*B/72*1e4)/1e4})},f.prototype.scale=function(P,O){if(isNaN(P)||isNaN(O))throw Tn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var B=new l(P,0,0,O,0,0);this.ctx.transform=this.ctx.transform.multiply(B)},f.prototype.rotate=function(P){if(isNaN(P))throw Tn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var O=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(O)},f.prototype.translate=function(P,O){if(isNaN(P)||isNaN(O))throw Tn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var B=new l(1,0,0,1,P,O);this.ctx.transform=this.ctx.transform.multiply(B)},f.prototype.transform=function(P,O,B,z,Z,de){if(isNaN(P)||isNaN(O)||isNaN(B)||isNaN(z)||isNaN(Z)||isNaN(de))throw Tn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Se=new l(P,O,B,z,Z,de);this.ctx.transform=this.ctx.transform.multiply(Se)},f.prototype.setTransform=function(P,O,B,z,Z,de){P=isNaN(P)?1:P,O=isNaN(O)?0:O,B=isNaN(B)?0:B,z=isNaN(z)?1:z,Z=isNaN(Z)?0:Z,de=isNaN(de)?0:de,this.ctx.transform=new l(P,O,B,z,Z,de)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(P,O,B,z,Z,de,Se,Ae,Ne){var Xe=this.pdf.getImageProperties(P),et=1,ot=1,mt=1,te=1;z!==void 0&&Ae!==void 0&&(mt=Ae/z,te=Ne/Z,et=Xe.width/z*Ae/z,ot=Xe.height/Z*Ne/Z),de===void 0&&(de=O,Se=B,O=0,B=0),z!==void 0&&Ae===void 0&&(Ae=z,Ne=Z),z===void 0&&Ae===void 0&&(Ae=Xe.width,Ne=Xe.height);var ke=this.ctx.transform.decompose(),X=he(ke.rotate.shx),me=new l,fe=(me=(me=(me=me.multiply(ke.translate)).multiply(ke.skew)).multiply(ke.scale)).applyToRectangle(new o(de-O*mt,Se-B*te,z*et,Z*ot));if(this.autoPaging){for(var qe,Ke=_.call(this,fe),st=[],yt=0;yt<Ke.length;yt+=1)st.indexOf(Ke[yt])===-1&&st.push(Ke[yt]);C(st);for(var Ht=st[0],be=st[st.length-1],tt=Ht;tt<be+1;tt++){this.pdf.setPage(tt);var ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],St=tt===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Dt=tt===1?0:Rt+(tt-2)*jt;if(this.ctx.clip_path.length!==0){var Wr=this.path;qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(qe,this.posX+this.margin[3],-Dt+St+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=Wr}var hr=JSON.parse(JSON.stringify(fe));hr=S([hr],this.posX+this.margin[3],-Dt+St+this.ctx.prevPageLastElemOffset)[0];var Ge=(tt>Ht||tt<be)&&y.call(this);Ge&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,jt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",hr.x,hr.y,hr.w,hr.h,null,null,X),Ge&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(P,"JPEG",fe.x,fe.y,fe.w,fe.h,null,null,X)};var _=function(P,O,B){var z=[];O=O||this.pdf.internal.pageSize.width,B=B||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":z.push(Math.floor((P.y+Z)/B)+1);break;case"arc":z.push(Math.floor((P.y+Z-P.radius)/B)+1),z.push(Math.floor((P.y+Z+P.radius)/B)+1);break;case"qct":var de=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);z.push(Math.floor((de.y+Z)/B)+1),z.push(Math.floor((de.y+de.h+Z)/B)+1);break;case"bct":var Se=Ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);z.push(Math.floor((Se.y+Z)/B)+1),z.push(Math.floor((Se.y+Se.h+Z)/B)+1);break;case"rect":z.push(Math.floor((P.y+Z)/B)+1),z.push(Math.floor((P.y+P.h+Z)/B)+1)}for(var Ae=0;Ae<z.length;Ae+=1)for(;this.pdf.internal.getNumberOfPages()<z[Ae];)w.call(this);return z},w=function(){var P=this.fillStyle,O=this.strokeStyle,B=this.font,z=this.lineCap,Z=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=O,this.font=B,this.lineCap=z,this.lineWidth=Z,this.lineJoin=de},S=function(P,O,B){for(var z=0;z<P.length;z++)switch(P[z].type){case"bct":P[z].x2+=O,P[z].y2+=B;case"qct":P[z].x1+=O,P[z].y1+=B;default:P[z].x+=O,P[z].y+=B}return P},C=function(P){return P.sort(function(O,B){return O-B})},j=function(P,O){var B=this.fillStyle,z=this.strokeStyle,Z=this.lineCap,de=this.lineWidth,Se=Math.abs(de*this.ctx.transform.scaleX),Ae=this.lineJoin;if(this.autoPaging){for(var Ne,Xe,et=JSON.parse(JSON.stringify(this.path)),ot=JSON.parse(JSON.stringify(this.path)),mt=[],te=0;te<ot.length;te++)if(ot[te].x!==void 0)for(var ke=_.call(this,ot[te]),X=0;X<ke.length;X+=1)mt.indexOf(ke[X])===-1&&mt.push(ke[X]);for(var me=0;me<mt.length;me++)for(;this.pdf.internal.getNumberOfPages()<mt[me];)w.call(this);C(mt);for(var fe=mt[0],qe=mt[mt.length-1],Ke=fe;Ke<qe+1;Ke++){this.pdf.setPage(Ke),this.fillStyle=B,this.strokeStyle=z,this.lineCap=Z,this.lineWidth=Se,this.lineJoin=Ae;var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yt=Ke===1?this.posY+this.margin[0]:this.margin[0],Ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],be=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=Ke===1?0:Ht+(Ke-2)*be;if(this.ctx.clip_path.length!==0){var ct=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Ne,this.posX+this.margin[3],-tt+yt+this.ctx.prevPageLastElemOffset),q.call(this,P,!0),this.path=ct}if(Xe=JSON.parse(JSON.stringify(et)),this.path=S(Xe,this.posX+this.margin[3],-tt+yt+this.ctx.prevPageLastElemOffset),O===!1||Ke===0){var St=(Ke>fe||Ke<qe)&&y.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,be,null).clip().discardPath()),q.call(this,P,O),St&&this.pdf.restoreGraphicsState()}this.lineWidth=de}this.path=et}else this.lineWidth=Se,q.call(this,P,O),this.lineWidth=de},q=function(P,O){if((P!=="stroke"||O||!v.call(this))&&(P==="stroke"||O||!d.call(this))){for(var B,z,Z=[],de=this.path,Se=0;Se<de.length;Se++){var Ae=de[Se];switch(Ae.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:Ae,deltas:[],abs:[]});break;case"lt":var Ne=Z.length;if(de[Se-1]&&!isNaN(de[Se-1].x)&&(B=[Ae.x-de[Se-1].x,Ae.y-de[Se-1].y],Ne>0)){for(;Ne>=0;Ne--)if(Z[Ne-1].close!==!0&&Z[Ne-1].begin!==!0){Z[Ne-1].deltas.push(B),Z[Ne-1].abs.push(Ae);break}}break;case"bct":B=[Ae.x1-de[Se-1].x,Ae.y1-de[Se-1].y,Ae.x2-de[Se-1].x,Ae.y2-de[Se-1].y,Ae.x-de[Se-1].x,Ae.y-de[Se-1].y],Z[Z.length-1].deltas.push(B);break;case"qct":var Xe=de[Se-1].x+2/3*(Ae.x1-de[Se-1].x),et=de[Se-1].y+2/3*(Ae.y1-de[Se-1].y),ot=Ae.x+2/3*(Ae.x1-Ae.x),mt=Ae.y+2/3*(Ae.y1-Ae.y),te=Ae.x,ke=Ae.y;B=[Xe-de[Se-1].x,et-de[Se-1].y,ot-de[Se-1].x,mt-de[Se-1].y,te-de[Se-1].x,ke-de[Se-1].y],Z[Z.length-1].deltas.push(B);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(Ae)}}z=O?null:P==="stroke"?"stroke":"fill";for(var X=!1,me=0;me<Z.length;me++)if(Z[me].arc)for(var fe=Z[me].abs,qe=0;qe<fe.length;qe++){var Ke=fe[qe];Ke.type==="arc"?k.call(this,Ke.x,Ke.y,Ke.radius,Ke.startAngle,Ke.endAngle,Ke.counterclockwise,void 0,O,!X):L.call(this,Ke.x,Ke.y),X=!0}else if(Z[me].close===!0)this.pdf.internal.out("h"),X=!1;else if(Z[me].begin!==!0){var st=Z[me].start.x,yt=Z[me].start.y;se.call(this,Z[me].deltas,st,yt),X=!0}z&&A.call(this,z),O&&D.call(this)}},G=function(P){var O=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,B=O*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-B;case"top":return P+O-B;case"hanging":return P+O-2*B;case"middle":return P+O/2-B;default:return P}},E=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(O,B){this.colorStops.push([O,B])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(P,O,B,z,Z,de,Se,Ae,Ne){for(var Xe=ve.call(this,B,z,Z,de),et=0;et<Xe.length;et++){var ot=Xe[et];et===0&&(Ne?N.call(this,ot.x1+P,ot.y1+O):L.call(this,ot.x1+P,ot.y1+O)),ge.call(this,P,O,ot.x2,ot.y2,ot.x3,ot.y3,ot.x4,ot.y4)}Ae?D.call(this):A.call(this,Se)},A=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(P,O){this.pdf.internal.out(r(P)+" "+n(O)+" m")},R=function(P){var O;switch(P.align){case"right":case"end":O="right";break;case"center":O="center";break;default:O="left"}var B,z,Z,de=this.pdf.getTextDimensions(P.text),Se=G.call(this,P.y),Ae=E.call(this,Se)-de.h,Ne=this.ctx.transform.applyToPoint(new a(P.x,Se));if(this.autoPaging){var Xe=this.ctx.transform.decompose(),et=new l;et=(et=(et=et.multiply(Xe.translate)).multiply(Xe.skew)).multiply(Xe.scale);for(var ot=this.ctx.transform.applyToRectangle(new o(P.x,Se,de.w,de.h)),mt=et.applyToRectangle(new o(P.x,Ae,de.w,de.h)),te=_.call(this,mt),ke=[],X=0;X<te.length;X+=1)ke.indexOf(te[X])===-1&&ke.push(te[X]);C(ke);for(var me=ke[0],fe=ke[ke.length-1],qe=me;qe<fe+1;qe++){this.pdf.setPage(qe);var Ke=qe===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[2],Ht=yt-this.margin[0],be=this.pdf.internal.pageSize.width-this.margin[1],tt=be-this.margin[3],ct=qe===1?0:st+(qe-2)*Ht;if(this.ctx.clip_path.length!==0){var St=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(B,this.posX+this.margin[3],-1*ct+Ke),q.call(this,"fill",!0),this.path=St}var Rt=S([JSON.parse(JSON.stringify(mt))],this.posX+this.margin[3],-ct+Ke+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(z=this.pdf.internal.getFontSize(),this.pdf.setFontSize(z*P.scale),Z=this.lineWidth,this.lineWidth=Z*P.scale);var jt=this.autoPaging!=="text";if(jt||Rt.y+Rt.h<=yt){if(jt||Rt.y>=Ke&&Rt.x<=be){var Dt=jt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||be-Rt.x)[0],Wr=S([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-ct+Ke+this.ctx.prevPageLastElemOffset)[0],hr=jt&&(qe>me||qe<fe)&&y.call(this);hr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,Ht,null).clip().discardPath()),this.pdf.text(Dt,Wr.x,Wr.y,{angle:P.angle,align:O,renderingMode:P.renderingMode}),hr&&this.pdf.restoreGraphicsState()}}else Rt.y<yt&&(this.ctx.prevPageLastElemOffset+=yt-Rt.y);P.scale>=.01&&(this.pdf.setFontSize(z),this.lineWidth=Z)}}else P.scale>=.01&&(z=this.pdf.internal.getFontSize(),this.pdf.setFontSize(z*P.scale),Z=this.lineWidth,this.lineWidth=Z*P.scale),this.pdf.text(P.text,Ne.x+this.posX,Ne.y+this.posY,{angle:P.angle,align:O,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(z),this.lineWidth=Z)},L=function(P,O,B,z){B=B||0,z=z||0,this.pdf.internal.out(r(P+B)+" "+n(O+z)+" l")},se=function(P,O,B){return this.pdf.lines(P,O,B,null,null)},ge=function(P,O,B,z,Z,de,Se,Ae){this.pdf.internal.out([e(i(B+P)),e(s(z+O)),e(i(Z+P)),e(s(de+O)),e(i(Se+P)),e(s(Ae+O)),"c"].join(" "))},ve=function(P,O,B,z){for(var Z=2*Math.PI,de=Math.PI/2;O>B;)O-=Z;var Se=Math.abs(B-O);Se<Z&&z&&(Se=Z-Se);for(var Ae=[],Ne=z?-1:1,Xe=O;Se>1e-5;){var et=Xe+Ne*Math.min(Se,de);Ae.push(ye.call(this,P,Xe,et)),Se-=Math.abs(et-Xe),Xe=et}return Ae},ye=function(P,O,B){var z=(B-O)/2,Z=P*Math.cos(z),de=P*Math.sin(z),Se=Z,Ae=-de,Ne=Se*Se+Ae*Ae,Xe=Ne+Se*Z+Ae*de,et=4/3*(Math.sqrt(2*Ne*Xe)-Xe)/(Se*de-Ae*Z),ot=Se-et*Ae,mt=Ae+et*Se,te=ot,ke=-mt,X=z+O,me=Math.cos(X),fe=Math.sin(X);return{x1:P*Math.cos(O),y1:P*Math.sin(O),x2:ot*me-mt*fe,y2:ot*fe+mt*me,x3:te*me-ke*fe,y3:te*fe+ke*me,x4:P*Math.cos(B),y4:P*Math.sin(B)}},he=function(P){return 180*P/Math.PI},_e=function(P,O,B,z,Z,de){var Se=P+.5*(B-P),Ae=O+.5*(z-O),Ne=Z+.5*(B-Z),Xe=de+.5*(z-de),et=Math.min(P,Z,Se,Ne),ot=Math.max(P,Z,Se,Ne),mt=Math.min(O,de,Ae,Xe),te=Math.max(O,de,Ae,Xe);return new o(et,mt,ot-et,te-mt)},Ue=function(P,O,B,z,Z,de,Se,Ae){var Ne,Xe,et,ot,mt,te,ke,X,me,fe,qe,Ke,st,yt,Ht=B-P,be=z-O,tt=Z-B,ct=de-z,St=Se-Z,Rt=Ae-de;for(Xe=0;Xe<41;Xe++)me=(ke=(et=P+(Ne=Xe/40)*Ht)+Ne*((mt=B+Ne*tt)-et))+Ne*(mt+Ne*(Z+Ne*St-mt)-ke),fe=(X=(ot=O+Ne*be)+Ne*((te=z+Ne*ct)-ot))+Ne*(te+Ne*(de+Ne*Rt-te)-X),Xe==0?(qe=me,Ke=fe,st=me,yt=fe):(qe=Math.min(qe,me),Ke=Math.min(Ke,fe),st=Math.max(st,me),yt=Math.max(yt,fe));return new o(Math.round(qe),Math.round(Ke),Math.round(st-qe),Math.round(yt-Ke))},Ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,O,B=(P=this.ctx.lineDash,O=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:O}));this.prevLineDash!==B&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=B)}}})(ir.API),function(t){var e=function(a){var o,l,u,h,f,p,d,v,y,_;for(l=[],u=0,h=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;h>u;u+=4)(f=(a.charCodeAt(u)<<24)+(a.charCodeAt(u+1)<<16)+(a.charCodeAt(u+2)<<8)+a.charCodeAt(u+3))!==0?(p=(f=((f=((f=((f=(f-(_=f%85))/85)-(y=f%85))/85)-(v=f%85))/85)-(d=f%85))/85)%85,l.push(p+33,d+33,v+33,y+33,_+33)):l.push(122);return function(w,S){for(var C=S;C>0;C--)w.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(a){var o,l,u,h,f,p=String,d="length",v=255,y="charCodeAt",_="slice",w="replace";for(a[_](-2),a=a[_](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),u=[],h=0,f=(a+=o="uuuuu"[_](a[d]%5||5))[d];f>h;h+=5)l=52200625*(a[y](h)-33)+614125*(a[y](h+1)-33)+7225*(a[y](h+2)-33)+85*(a[y](h+3)-33)+(a[y](h+4)-33),u.push(v&l>>24,v&l>>16,v&l>>8,v&l);return function(S,C){for(var j=C;j>0;j--)S.pop()}(u,o[d]),p.fromCharCode.apply(p,u)},n=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",u=0;u<a.length;u+=2)l+=String.fromCharCode("0x"+(a[u]+a[u+1]));return l},s=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return(o=xw(o)).reduce(function(u,h){return u+String.fromCharCode(h)},"")};t.processDataByFilters=function(a,o){var l=0,u=a||"",h=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:u,reverseChain:h.reverse().join(" ")}}}(ir.API),function(t){t.loadFile=function(e,r,n){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,u,h){var f=new XMLHttpRequest,p=0,d=function(v){var y=v.length,_=[],w=String.fromCharCode;for(p=0;p<y;p+=1)_.push(w(255&v.charCodeAt(p)));return _.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?h(d(this.responseText)):h(void 0)}),f.send(null),u&&f.status===200)return d(f.responseText)}(i,s,a)}catch{}return o}(e,r,n)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile}(ir.API),function(t){function e(){return(fr.html2canvas?Promise.resolve(fr.html2canvas):hg(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(fr.DOMPurify?Promise.resolve(fr.DOMPurify):hg(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=gn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var u=document.createElement(o);for(var h in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[h]=l.style[h];return u},s=function o(l,u){for(var h=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),f=l.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||h.appendChild(o(f,u));return l.nodeType===1&&(l.nodeName==="CANVAS"?(h.width=l.width,h.height=l.height,h.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(h.value=l.value),h.addEventListener("load",function(){h.scrollTop=l.scrollTop,h.scrollLeft=l.scrollLeft},!0)),h},a=function o(l){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),h=o.convert(Promise.resolve(),u);return(h=h.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(r).then(function(u){return this.set({src:i("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var u=this.opt.jsPDF,h=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=h,h)for(var d=0;d<h.length;++d){var v=h[d],y=v.src.find(function(_){return _.format==="truetype"});y&&u.addFont(y.url,v.ref.name,v.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),l(this.prop.container,p)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(u){if(u in a.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var u=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(u):u})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(u,h){return Math.floor(u*h/72*96)}return this.then(function(){(o=o||ir.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,u,h){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,u,h){return this.setProgress(o?this.progress.val+o:null,l||null,u?this.progress.n+u:null,h?this.progress.stack.concat(h):null)},a.prototype.then=function(o,l){var u=this;return this.thenCore(o,l,function(h,f){return u.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,h),p}).then(h,f).then(function(p){return u.updateProgress(1),p})})},a.prototype.thenCore=function(o,l,u){u=u||Promise.prototype.then;var h=this;o&&(o=o.bind(h)),l&&(l=l.bind(h));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:a.convert(Object.assign({},h),Promise.prototype),p=u.call(f,o,l);return a.convert(p,h.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(u){l=l.thenCore(u)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,ir.getPageSize=function(o,l,u){if(gn(o)==="object"){var h=o;o=h.orientation,l=h.unit||l,u=h.format||u}l=l||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+u).toLowerCase(),d={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var v,y=0,_=0;if(d.hasOwnProperty(p))y=d[p][1]/f,_=d[p][0]/f;else try{y=u[1],_=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",_>y&&(v=_,_=y,y=v);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>_&&(v=_,_=y,y=v)}return{width:_,height:y,unit:l,k:f,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Ay):null;var u=new a(l);return l.worker?u:u.from(o).doCallback()}}(ir.API),ir.API.addJS=function(t){return $A=t,this.internal.events.subscribe("postPutResources",function(){Dm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Dm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),qA=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+$A+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Dm!==void 0&&qA!==void 0&&this.internal.out("/Names <</JavaScript "+Dm+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=n.exec(a);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,h=[];for(s=0;s<u;s++){var f=r.internal.newObject();h.push(f);var p=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var d=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<h.length;s++)r.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+d+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,s){var a={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var a=n.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])}(ir.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,s,a,o){var l,u=this.decode.DCT_DECODE,h=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,l=function(f){for(var p,d=256*f.charCodeAt(4)+f.charCodeAt(5),v=f.length,y={width:0,height:0,numcomponents:1},_=4;_<v;_+=2){if(_+=d,e.indexOf(f.charCodeAt(_+1))!==-1){p=256*f.charCodeAt(_+5)+f.charCodeAt(_+6),y={width:256*f.charCodeAt(_+7)+f.charCodeAt(_+8),height:p,numcomponents:f.charCodeAt(_+9)};break}d=256*f.charCodeAt(_+2)+f.charCodeAt(_+3)}return y}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}h={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:i}}return h}}(ir.API),ir.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=ZH(t,{checkCrc:!0}),a=s.width,o=s.height,l=s.channels,u=s.palette,h=s.depth;i=u&&l===1?function(k){for(var A=k.width,D=k.height,N=k.data,R=k.palette,L=k.depth,se=!1,ge=[],ve=[],ye=void 0,he=!1,_e=0,Ue=0;Ue<R.length;Ue++){var Ie=Y3(R[Ue],4),P=Ie[0],O=Ie[1],B=Ie[2],z=Ie[3];ge.push(P,O,B),z!=null&&(z===0?(_e++,ve.length<1&&ve.push(Ue)):z<255&&(he=!0))}if(he||_e>1){se=!0,ve=void 0;var Z=A*D;ye=new Uint8Array(Z);for(var de=new DataView(N.buffer),Se=0;Se<Z;Se++){var Ae=Ny(de,Se,L),Ne=Y3(R[Ae],4)[3];ye[Se]=Ne}}else _e===0&&(ve=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:se?8:void 0,colorBytes:N,alphaBytes:ye,needSMask:se,palette:ge,mask:ve}}(s):l===2||l===4?function(k){for(var A=k.data,D=k.width,N=k.height,R=k.channels,L=k.depth,se=R===2?"DeviceGray":"DeviceRGB",ge=R-1,ve=D*N,ye=ge,he=ve*ye,_e=1*ve,Ue=Math.ceil(he*L/8),Ie=Math.ceil(_e*L/8),P=new Uint8Array(Ue),O=new Uint8Array(Ie),B=new DataView(A.buffer),z=new DataView(P.buffer),Z=new DataView(O.buffer),de=!1,Se=0;Se<ve;Se++){for(var Ae=Se*R,Ne=0;Ne<ye;Ne++)eE(z,Ny(B,Ae+Ne,L),Se*ye+Ne,L);var Xe=Ny(B,Ae+ye,L);Xe<(1<<L)-1&&(de=!0),eE(Z,Xe,1*Se,L)}return{colorSpace:se,colorsPerPixel:ge,sMaskBitsPerComponent:de?L:void 0,colorBytes:P,alphaBytes:O,needSMask:de}}(s):function(k){var A=k.data,D=k.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:D,colorsPerPixel:D==="DeviceGray"?1:3,colorBytes:A instanceof Uint16Array?function(N){for(var R=N.length,L=new Uint8Array(2*R),se=new DataView(L.buffer,L.byteOffset,L.byteLength),ge=0;ge<R;ge++)se.setUint16(2*ge,N[ge],!1);return L}(A):A,needSMask:!1}}(s);var f,p,d,v=i,y=v.colorSpace,_=v.colorsPerPixel,w=v.sMaskBitsPerComponent,S=v.colorBytes,C=v.alphaBytes,j=v.needSMask,q=v.palette,G=v.mask,E=null;return n!==ir.API.image_compression.NONE&&typeof xw=="function"?(E=function(k){var A;switch(k){case ir.API.image_compression.FAST:A=11;break;case ir.API.image_compression.MEDIUM:A=13;break;case ir.API.image_compression.SLOW:A=14;break;default:A=12}return A}(n),f=this.decode.FLATE_DECODE,p="/Predictor ".concat(E," /Colors ").concat(_," /BitsPerComponent ").concat(h," /Columns ").concat(a),t=YA(S,Math.ceil(a*_*h/8),_,h,n),j&&(d=YA(C,Math.ceil(a*w/8),1,w,n))):(f=void 0,p=void 0,t=S,j&&(d=C)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(d&&this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),{alias:r,data:t,index:e,filter:f,decodeParameters:p,transparency:G,palette:q,sMask:d,predictor:E,width:a,height:o,bitsPerComponent:h,sMaskBitsPerComponent:w,colorSpace:y}}},function(t){t.processGIF89A=function(e,r,n,i){var s=new wq(e),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:a,height:o},h=new Ty(100).encode(u,100);return t.processJPEG.call(this,h,r,n,i)},t.processGIF87A=t.processGIF89A}(ir.API),lo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},lo.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Tn.log("bit decode error:"+r)}},lo.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},lo.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*i*4,o=s>>4,l=15&s,u=this.palette[o];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},lo.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},lo.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,h=n*this.width*4+4*i;this.data[h]=l,this.data[h+1]=o,this.data[h+2]=a,this.data[h+3]=u}this.pos+=t}},lo.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&r)/r*255|0,u=(a>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=u,this.data[h+1]=l,this.data[h+2]=o,this.data[h+3]=255}this.pos+=t}},lo.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},lo.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=a}},lo.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,i){var s=new lo(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},u=new Ty(100).encode(l,100);return t.processJPEG.call(this,u,r,n,i)}}(ir.API),rE.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,i){var s=new rE(e),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},u=new Ty(100).encode(l,100);return t.processJPEG.call(this,u,r,n,i)}}(ir.API),ir.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,u=0;u<i;u+=4){var h=n[u],f=n[u+1],p=n[u+2],d=n[u+3];s[o++]=h,s[o++]=f,s[o++]=p,a[l++]=d}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:v,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ir.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},wh=ir.API,Mm=wh.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=u.fof?u.fof:1,f=e.doKerning!==!1,p=0,d=t.length,v=0,y=o[0]||l,_=[];for(r=0;r<d;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?_.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+a*(1e3/s)||0)/1e3):(p=f&&gn(u[n])==="object"&&!isNaN(parseInt(u[n][v],10))?u[n][v]/h:0,_.push((o[n]||y)/l+p)),v=n;return _},WA=wh.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return wh.processArabic&&(t=wh.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:Mm.apply(this,arguments).reduce(function(s,a){return s+a},0)},GA=function(t,e,r,n){for(var i=[],s=0,a=t.length,o=0;s!==a&&o+e[s]<r;)o+=e[s],s++;i.push(t.slice(0,s));var l=s;for(o=0;s!==a;)o+e[s]>n&&(i.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},KA=function(t,e,r){r||(r={});var n,i,s,a,o,l,u,h=[],f=[h],p=r.textIndent||0,d=0,v=0,y=t.split(" "),_=Mm.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var w=Array(l).join(" "),S=[];y.map(function(j){(j=j.split(/\s*\n/)).length>1?S=S.concat(j.map(function(q,G){return(G&&q.length?`
`:"")+q})):S.push(j[0])}),y=S,l=WA.apply(this,[w,r])}for(s=0,a=y.length;s<a;s++){var C=0;if(n=y[s],l&&n[0]==`
`&&(n=n.substr(1),C=1),p+d+(v=(i=Mm.apply(this,[n,r])).reduce(function(j,q){return j+q},0))>e||C){if(v>e){for(o=GA.apply(this,[n,i,e-(p+d),e]),h.push(o.shift()),h=[o.pop()];o.length;)f.push([o.shift()]);v=i.slice(n.length-(h[0]?h[0].length:0)).reduce(function(j,q){return j+q},0)}else h=[n];f.push(h),p=v+l,d=_}else h.push(n),p+=d+v,d=_}return u=l?function(j,q){return(q?w:"")+j.join(" ")}:function(j){return j.join(" ")},f.map(u)},wh.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var f=this.internal.getFont(h.fontName,h.fontStyle),p="Unicode";return f.metadata[p]?{widths:f.metadata[p].widths||{0:1},kerning:f.metadata[p].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=r.lineIndent;var o,l,u=[];for(o=0,l=n.length;o<l;o++)u=u.concat(KA.apply(this,[n[o],a,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[r[s]]=e[s],i[e[s]]=r[s];var a=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var d,v,y,_,w=["{"];for(var S in p){if(d=p[S],isNaN(parseInt(S,10))?v="'"+S+"'":(S=parseInt(S,10),v=(v=a(S).slice(2)).slice(0,-1)+i[v.slice(-1)]),typeof d=="number")d<0?(y=a(d).slice(3),_="-"):(y=a(d).slice(2),_=""),y=_+y.slice(0,-1)+i[y.slice(-1)];else{if(gn(d)!=="object")throw new Error("Don't know what to do with value type "+gn(d)+".");y=o(d)}w.push(v+y)}return w.push("}"),w.join("")},l=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var d,v,y,_,w={},S=1,C=w,j=[],q="",G="",E=p.length-1,k=1;k<E;k+=1)(_=p[k])=="'"?d?(y=d.join(""),d=void 0):d=[]:d?d.push(_):_=="{"?(j.push([C,y]),C={},y=void 0):_=="}"?((v=j.pop())[0][v[1]]=C,y=void 0,C=v[0]):_=="-"?S=-1:y===void 0?n.hasOwnProperty(_)?(q+=n[_],y=parseInt(q,16)*S,S=1,q=""):q+=_:n.hasOwnProperty(_)?(G+=n[_],C[y]=parseInt(G,16)*S,S=1,y=void 0,G=""):G+=_;return w},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var d=p.font,v=f.Unicode[d.postScriptName];v&&(d.metadata.Unicode={},d.metadata.Unicode.widths=v.widths,d.metadata.Unicode.kerning=v.kerning);var y=h.Unicode[d.postScriptName];y&&(d.metadata.Unicode.encoding=y,d.encoding=y.codePages[0])}])}(ir.API),function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=r.charCodeAt(s);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,s=r.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Ag(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,n)}}])}(ir),ir.API.addSvgAsImage=function(t,e,r,n,i,s,a,o){if(isNaN(e)||isNaN(r))throw Tn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw Tn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=i;var u=l.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(fr.canvg?Promise.resolve(fr.canvg):hg(()=>import("./index.es-C4_o9wBW.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(h)}).then(function(){f.addImage(l.toDataURL("image/jpeg",1),e,r,n,i,a,o)})},ir.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},ir.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],u=0,h=0,f=0;function p(v,y){var _,w=!1;for(_=0;_<v.length;_+=1)v[_]===y&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var d=o.length;for(f=0;f<d;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(gn(t)==="object"){for(i in t)if(s=t[i],p(o,i)&&s!==void 0){if(r[i].type==="boolean"&&typeof s=="boolean")r[i].value=s;else if(r[i].type==="name"&&p(r[i].valueSet,s))r[i].value=s;else if(r[i].type==="integer"&&Number.isInteger(s))r[i].value=s;else if(r[i].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(h=0;h<s[u].length;h+=1)typeof s[u][h]!="number"&&(n=!1);n===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}r[i].value="["+l.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,y=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?y.push("/"+v+" /"+r[v].value):y.push("/"+v+" "+r[v].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+a.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(ir.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,u=["","0","00","000","0000"],h=[""],f=0,p=s.length;f<p;++f){if(o=a.metadata.characterToGlyph(s.charCodeAt(f)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return h.join("");o=o.toString(16),h.push(u[4-o.length],o)}return h.join("")},n=function(s){var a,o,l,u,h,f,p;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,p=(o=Object.keys(s).sort(function(d,v){return d-v})).length;f<p;f++)a=o[f],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(u=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+u+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,u=a.newObject,h=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),d="",v=0;v<p.length;v++)d+=String.fromCharCode(p[v]);var y=u();h({data:d,addLength1:!0,objectId:y}),l("endobj");var _=u();h({data:n(o.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var w=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Ih(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var S=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Ih(o.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+t.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+_+" 0 R"),l("/BaseFont /"+Ih(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+S+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,u=a.newObject,h=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,p="",d=0;d<f.length;d++)p+=String.fromCharCode(f[d]);var v=u();h({data:p,addLength1:!0,objectId:v}),l("endobj");var y=u();h({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var _=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Ih(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var w=0;w<o.metadata.hmtx.widths.length;w++)o.metadata.hmtx.widths[w]=parseInt(o.metadata.hmtx.widths[w]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+Ih(o.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",l=s.x,u=s.y,h=s.options||{},f=s.mutex||{},p=f.pdfEscape,d=f.activeFontKey,v=f.fonts,y=d,_="",w=0,S="",C=v[y].encoding;if(v[y].encoding!=="Identity-H")return{text:o,x:l,y:u,options:h,mutex:f};for(S=o,y=d,Array.isArray(o)&&(S=o[0]),w=0;w<S.length;w+=1)v[y].metadata.hasOwnProperty("cmap")&&(a=v[y].metadata.cmap.unicode.codeMap[S[w].charCodeAt(0)]),a||S[w].charCodeAt(0)<256&&v[y].metadata.hasOwnProperty("Unicode")?_+=S[w]:_+="";var j="";return parseInt(y.slice(1))<14||C==="WinAnsiEncoding"?j=p(_,y).split("").map(function(q){return q.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(j=r(_,v[y])),f.isHex=!0,{text:j,x:l,y:u,options:h,mutex:f}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?o.push([i(Object.assign({},l,{text:a[u][0]})).text,a[u][1],a[u][2]]):o.push(i(Object.assign({},l,{text:a[u]})).text);s.text=o}else s.text=i(Object.assign({},l,{text:a})).text}])}(ir),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ir.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,s,a,o,l,u,h,f=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,C=0;this.__bidiEngine__={};var j=function(N){var R=N.charCodeAt(),L=R>>8,se=y[L];return se!==void 0?f[256*se+(255&R)]:L===252||L===253?"AL":w.test(L)?"L":L===8?"R":"N"},q=function(N){for(var R,L=0;L<N.length;L++){if((R=j(N.charAt(L)))==="L")return!1;if(R==="R")return!0}return!1},G=function(N,R,L,se){var ge,ve,ye,he,_e=R[se];switch(_e){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"N":case"AN":break;case"EN":S&&(_e="AN");break;case"AL":S=!0,_e="R";break;case"WS":case"BN":_e="N";break;case"CS":se<1||se+1>=R.length||(ge=L[se-1])!=="EN"&&ge!=="AN"||(ve=R[se+1])!=="EN"&&ve!=="AN"?_e="N":S&&(ve="AN"),_e=ve===ge?ve:"N";break;case"ES":_e=(ge=se>0?L[se-1]:"B")==="EN"&&se+1<R.length&&R[se+1]==="EN"?"EN":"N";break;case"ET":if(se>0&&L[se-1]==="EN"){_e="EN";break}if(S){_e="N";break}for(ye=se+1,he=R.length;ye<he&&R[ye]==="ET";)ye++;_e=ye<he&&R[ye]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(he=R.length,ye=se+1;ye<he&&R[ye]==="NSM";)ye++;if(ye<he){var Ue=N[se],Ie=Ue>=1425&&Ue<=2303||Ue===64286;if(ge=R[ye],Ie&&(ge==="R"||ge==="AL")){_e="R";break}}}_e=se<1||(ge=R[se-1])==="B"?"N":L[se-1];break;case"B":S=!1,i=!0,_e=C;break;case"S":s=!0,_e="N"}return _e},E=function(N,R,L){var se=N.split("");return L&&k(se,L,{hiLevel:C}),se.reverse(),R&&R.reverse(),se.join("")},k=function(N,R,L){var se,ge,ve,ye,he,_e=-1,Ue=N.length,Ie=0,P=[],O=C?d:p,B=[];for(S=!1,i=!1,s=!1,ge=0;ge<Ue;ge++)B[ge]=j(N[ge]);for(ve=0;ve<Ue;ve++){if(he=Ie,P[ve]=G(N,B,P,ve),se=240&(Ie=O[he][v[P[ve]]]),Ie&=15,R[ve]=ye=O[Ie][5],se>0)if(se===16){for(ge=_e;ge<ve;ge++)R[ge]=1;_e=-1}else _e=-1;if(O[Ie][6])_e===-1&&(_e=ve);else if(_e>-1){for(ge=_e;ge<ve;ge++)R[ge]=ye;_e=-1}B[ve]==="B"&&(R[ve]=0),L.hiLevel|=ye}s&&function(z,Z,de){for(var Se=0;Se<de;Se++)if(z[Se]==="S"){Z[Se]=C;for(var Ae=Se-1;Ae>=0&&z[Ae]==="WS";Ae--)Z[Ae]=C}}(B,R,Ue)},A=function(N,R,L,se,ge){if(!(ge.hiLevel<N)){if(N===1&&C===1&&!i)return R.reverse(),void(L&&L.reverse());for(var ve,ye,he,_e,Ue=R.length,Ie=0;Ie<Ue;){if(se[Ie]>=N){for(he=Ie+1;he<Ue&&se[he]>=N;)he++;for(_e=Ie,ye=he-1;_e<ye;_e++,ye--)ve=R[_e],R[_e]=R[ye],R[ye]=ve,L&&(ve=L[_e],L[_e]=L[ye],L[ye]=ve);Ie=he}Ie++}}},D=function(N,R,L){var se=N.split(""),ge={hiLevel:C};return L||(L=[]),k(se,L,ge),function(ve,ye,he){if(he.hiLevel!==0&&h)for(var _e,Ue=0;Ue<ve.length;Ue++)ye[Ue]===1&&(_e=_.indexOf(ve[Ue]))>=0&&(ve[Ue]=_[_e+1])}(se,L,ge),A(2,se,R,L,ge),A(1,se,R,L,ge),se.join("")};return this.__bidiEngine__.doBidiReorder=function(N,R,L){if(function(ge,ve){if(ve)for(var ye=0;ye<ge.length;ye++)ve[ye]=ye;o===void 0&&(o=q(ge)),u===void 0&&(u=q(ge))}(N,R),a||!l||u)if(a&&l&&o^u)C=o?1:0,N=E(N,R,L);else if(!a&&l&&u)C=o?1:0,N=D(N,R,L),N=E(N,R);else if(!a||o||l||u){if(a&&!l&&o^u)N=E(N,R),o?(C=0,N=D(N,R,L)):(C=1,N=D(N,R,L),N=E(N,R));else if(a&&o&&!l&&u)C=1,N=D(N,R,L),N=E(N,R);else if(!a&&!l&&o^u){var se=h;o?(C=1,N=D(N,R,L),C=0,h=!1,N=D(N,R,L),h=se):(C=0,N=D(N,R,L),N=E(N,R),C=1,h=!1,N=D(N,R,L),h=se,N=E(N,R))}}else C=0,N=D(N,R,L);else C=o?1:0,N=D(N,R,L);return N},this.__bidiEngine__.setOptions=function(N){N&&(a=N.isInputVisual,l=N.isOutputVisual,o=N.isInputRtl,u=N.isOutputRtl,h=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([r.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([r.doBidiReorder(i[o])]);n.text=a}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(ir),ir.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new nu(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Fq(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new _q(this.contents),this.head=new Sq(this),this.name=new kq(this),this.cmap=new ZI(this),this.toUnicode={},this.hhea=new Aq(this),this.maxp=new Cq(this),this.hmtx=new Iq(this),this.post=new Nq(this),this.os2=new Eq(this),this.loca=new jq(this),this.glyf=new Pq(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,u;for(u=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Co,nu=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,s,a,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*s+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,s;for(s=[],n=0,i=e.length;n<i;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),_q=function(){var t;function e(r){var n,i,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,s,a,o,l,u,h,f,p,d,v,y;for(y in d=Object.keys(r).length,l=Math.log(2),f=16*Math.floor(Math.log(d)/l),a=Math.floor(f/l),h=16*d-f,(i=new nu).writeInt(this.scalarType),i.writeShort(d),i.writeShort(f),i.writeShort(a),i.writeShort(h),s=16*d,u=i.pos+s,o=null,v=[],r)for(p=r[y],i.writeString(y),i.writeInt(t(p)),i.writeInt(u),i.writeInt(p.length),v=v.concat(p),y==="head"&&(o=u),u+=p.length;u%4;)v.push(0),u++;return i.write(v),n=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(n),i.data},t=function(r){var n,i,s,a;for(r=e8.call(r);r.length%4;)r.push(0);for(s=new nu(r),i=0,n=0,a=r.length;n<a;n=n+=4)i+=s.readUInt32();return 4294967295&i},e}(),bq={}.hasOwnProperty,rl=function(t,e){for(var r in e)bq.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Co=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Sq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return rl(t,Co),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new nu).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),nE=function(){function t(e,r){var n,i,s,a,o,l,u,h,f,p,d,v,y,_,w,S,C;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(d=e.readUInt16(),p=d/2,e.pos+=6,s=function(){var j,q;for(q=[],l=j=0;0<=p?j<p:j>p;l=0<=p?++j:--j)q.push(e.readUInt16());return q}(),e.pos+=2,y=function(){var j,q;for(q=[],l=j=0;0<=p?j<p:j>p;l=0<=p?++j:--j)q.push(e.readUInt16());return q}(),u=function(){var j,q;for(q=[],l=j=0;0<=p?j<p:j>p;l=0<=p?++j:--j)q.push(e.readUInt16());return q}(),h=function(){var j,q;for(q=[],l=j=0;0<=p?j<p:j>p;l=0<=p?++j:--j)q.push(e.readUInt16());return q}(),i=(this.length-e.pos+this.offset)/2,o=function(){var j,q;for(q=[],l=j=0;0<=i?j<i:j>i;l=0<=i?++j:--j)q.push(e.readUInt16());return q}(),l=w=0,C=s.length;w<C;l=++w)for(_=s[l],n=S=v=y[l];v<=_?S<=_:S>=_;n=v<=_?++S:--S)h[l]===0?a=n+u[l]:(a=o[h[l]/2+(n-v)-(p-l)]||0)!==0&&(a+=u[l]),this.codeMap[n]=65535&a}e.pos=f}return t.encode=function(e,r){var n,i,s,a,o,l,u,h,f,p,d,v,y,_,w,S,C,j,q,G,E,k,A,D,N,R,L,se,ge,ve,ye,he,_e,Ue,Ie,P,O,B,z,Z,de,Se,Ae,Ne,Xe,et;switch(se=new nu,a=Object.keys(e).sort(function(ot,mt){return ot-mt}),r){case"macroman":for(y=0,_=function(){var ot=[];for(v=0;v<256;++v)ot.push(0);return ot}(),S={0:0},s={},ge=0,_e=a.length;ge<_e;ge++)S[Ae=e[i=a[ge]]]==null&&(S[Ae]=++y),s[i]={old:e[i],new:S[e[i]]},_[i]=S[e[i]];return se.writeUInt16(1),se.writeUInt16(0),se.writeUInt32(12),se.writeUInt16(0),se.writeUInt16(262),se.writeUInt16(0),se.write(_),{charMap:s,subtable:se.data,maxGlyphID:y+1};case"unicode":for(R=[],f=[],C=0,S={},n={},w=u=null,ve=0,Ue=a.length;ve<Ue;ve++)S[q=e[i=a[ve]]]==null&&(S[q]=++C),n[i]={old:q,new:S[q]},o=S[q]-i,w!=null&&o===u||(w&&f.push(w),R.push(i),u=o),w=i;for(w&&f.push(w),f.push(65535),R.push(65535),D=2*(A=R.length),k=2*Math.pow(Math.log(A)/Math.LN2,2),p=Math.log(k/2)/Math.LN2,E=2*A-k,l=[],G=[],d=[],v=ye=0,Ie=R.length;ye<Ie;v=++ye){if(N=R[v],h=f[v],N===65535){l.push(0),G.push(0);break}if(N-(L=n[N].new)>=32768)for(l.push(0),G.push(2*(d.length+A-v)),i=he=N;N<=h?he<=h:he>=h;i=N<=h?++he:--he)d.push(n[i].new);else l.push(L-N),G.push(0)}for(se.writeUInt16(3),se.writeUInt16(1),se.writeUInt32(12),se.writeUInt16(4),se.writeUInt16(16+8*A+2*d.length),se.writeUInt16(0),se.writeUInt16(D),se.writeUInt16(k),se.writeUInt16(p),se.writeUInt16(E),de=0,P=f.length;de<P;de++)i=f[de],se.writeUInt16(i);for(se.writeUInt16(0),Se=0,O=R.length;Se<O;Se++)i=R[Se],se.writeUInt16(i);for(Ne=0,B=l.length;Ne<B;Ne++)o=l[Ne],se.writeUInt16(o);for(Xe=0,z=G.length;Xe<z;Xe++)j=G[Xe],se.writeUInt16(j);for(et=0,Z=d.length;et<Z;et++)y=d[et],se.writeUInt16(y);return{charMap:n,subtable:se.data,maxGlyphID:C+1}}},t}(),ZI=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return rl(t,Co),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new nE(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,i;return r==null&&(r="macroman"),n=nE.encode(e,r),(i=new nu).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),Aq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return rl(t,Co),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),Eq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return rl(t,Co),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),Nq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return rl(t,Co),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)r=e.readByte(),i.push(this.names.push(e.readString(r)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var a,o,l;for(l=[],s=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;s=0<=o?++a:--a)l.push(e.readUInt32());return l}).call(this)}},t}(),Tq=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},kq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return rl(t,Co),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,i,s,a,o,l,u,h,f,p;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},s=h=0,f=n.length;h<f;s=++h)i=n[s],e.pos=i.offset,u=e.readString(i.length),a=new Tq(u,i),l[p=i.nameID]==null&&(l[p]=[]),l[i.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),Cq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return rl(t,Co),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),Iq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return rl(t,Co),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,i,s,a,o,l;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)h.push(e.readInt16());return h}(),this.widths=(function(){var u,h,f,p;for(p=[],u=0,h=(f=this.metrics).length;u<h;u++)s=f[u],p.push(s.advance);return p}).call(this),n=this.widths[this.widths.length-1],l=[],r=a=0;0<=i?a<i:a>i;r=0<=i?++a:--a)l.push(this.widths.push(n));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),e8=[].slice,Pq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return rl(t,Co),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,i,s,a,o,l,u,h,f;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,a=(o=new nu(r.read(i))).readShort(),u=o.readShort(),f=o.readShort(),l=o.readShort(),h=o.readShort(),this.cache[e]=a===-1?new Rq(o,u,f,l,h):new Lq(o,a,u,f,l,h),this.cache[e]))},t.prototype.encode=function(e,r,n){var i,s,a,o,l;for(a=[],s=[],o=0,l=r.length;o<l;o++)i=e[r[o]],s.push(a.length),i&&(a=a.concat(i.encode(n)));return s.push(a.length),{table:a,offsets:s}},t}(),Lq=function(){function t(e,r,n,i,s,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Rq=function(){function t(e,r,n,i,s){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new nu(e8.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),jq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return rl(t,Co),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,a=0;a<n.length;++a)if(n[a]=i,s<r.length&&r[s]==a){++s,n[a]=i;var o=this.offsets[a],l=this.offsets[a+1]-o;l>0&&(i+=l)}for(var u=new Array(4*n.length),h=0;h<n.length;++h)u[4*h+3]=255&n[h],u[4*h+2]=(65280&n[h])>>8,u[4*h+1]=(16711680&n[h])>>16,u[4*h]=(4278190080&n[h])>>24;return u},t}(),Fq=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,s;for(r in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,s,a,o,l;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in r=[],i)(n=i[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in l=this.glyphsFor(r))n=l[s],i[s]=n;return i},t.prototype.encode=function(e,r){var n,i,s,a,o,l,u,h,f,p,d,v,y,_,w;for(i in n=ZI.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),d={0:0},w=n.charMap)d[(l=w[i]).old]=l.new;for(v in p=n.maxGlyphID,a)v in d||(d[v]=p++);return h=function(S){var C,j;for(C in j={},S)j[S[C]]=C;return j}(d),f=Object.keys(h).sort(function(S,C){return S-C}),y=function(){var S,C,j;for(j=[],S=0,C=f.length;S<C;S++)o=f[S],j.push(h[o]);return j}(),s=this.font.glyf.encode(a,y,d),u=this.font.loca.encode(s.offsets,y),_={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},t}();ir.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,s,a;if(Array.isArray(r))return"["+function(){var o,l,u;for(u=[],o=0,l=r.length;o<l;o++)n=r[o],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in s=["<<"],r)a=r[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+r},e}();function t8(t,e,r,n,i){n=n||{};var s=1.15,a=i.internal.scaleFactor,o=i.internal.getFontSize()/a,l=i.getLineHeightFactor?i.getLineHeightFactor():s,u=o*l,h=/\r\n|\r|\n/g,f="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof t=="string"?t.split(h):t,p=f.length||1),r+=o*(2-s),n.valign==="middle"?r-=p/2*u:n.valign==="bottom"&&(r-=p*u),n.halign==="center"||n.halign==="right"){var d=o;if(n.halign==="center"&&(d*=.5),f&&p>=1){for(var v=0;v<f.length;v++)i.text(f[v],e-i.getStringUnitWidth(f[v])*d,r),r+=u;return i}e-=i.getStringUnitWidth(t)*d}return n.halign==="justify"?i.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(t,e,r),i}var iE={},xd=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:iE=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,i,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,l=a.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var h=t.unifyColor(e.fillColor);h&&(n=this.jsPDFDocument).setFillColor.apply(n,h),h=t.unifyColor(e.textColor),h&&(i=this.jsPDFDocument).setTextColor.apply(i,h),h=t.unifyColor(e.lineColor),h&&(s=this.jsPDFDocument).setDrawColor.apply(s,h),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,i,s){return this.jsPDFDocument.rect(e,r,n,i,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return iE||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),Ew=function(t,e){return Ew=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Ew(t,e)};function r8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ew(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var n8=function(t){r8(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function Dq(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Mq(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function I1(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],i=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,a){return Math.max(s,a)},0);return i}function i8(t,e,r,n){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:s});var a=s8(i,!1);a&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,a)}function s8(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function V2(t,e){var r,n,i,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function a8(t,e){var r=V2(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function Oq(t,e,r,n,i){var s={},a=1.3333333333333333,o=ky(e,function(C){return i.getComputedStyle(C).backgroundColor});o!=null&&(s.fillColor=o);var l=ky(e,function(C){return i.getComputedStyle(C).color});l!=null&&(s.textColor=l);var u=Uq(n,r);u&&(s.cellPadding=u);var h="borderTopColor",f=a*r,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var d=(parseFloat(p)||0)/f;d&&(s.lineWidth=d)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?h="borderRightColor":s.lineWidth.bottom?h="borderBottomColor":s.lineWidth.left&&(h="borderLeftColor"));var v=ky(e,function(C){return i.getComputedStyle(C)[h]});v!=null&&(s.lineColor=v);var y=["left","right","center","justify"];y.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),y=["middle","bottom","top"],y.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var _=parseInt(n.fontSize||"");isNaN(_)||(s.fontSize=_/a);var w=Bq(n);w&&(s.fontStyle=w);var S=(n.fontFamily||"").toLowerCase();return t.indexOf(S)!==-1&&(s.font=S),s}function Bq(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function ky(t,e){var r=o8(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function o8(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:o8(t.parentElement,e):r}function Uq(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(o){return parseInt(o||"0")/n}),a=V2(s,0);return i>a.top&&(a.top=i),i>a.bottom&&(a.bottom=i),a}function l8(t,e,r,n,i){var s,a;n===void 0&&(n=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),h=[],f=[],p=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:h,body:f,foot:p};for(var d=0;d<o.rows.length;d++){var v=o.rows[d],y=(a=(s=v==null?void 0:v.parentElement)===null||s===void 0?void 0:s.tagName)===null||a===void 0?void 0:a.toLowerCase(),_=Vq(l,u,r,v,n,i);_&&(y==="thead"?h.push(_):y==="tfoot"?p.push(_):f.push(_))}return{head:h,body:f,foot:p}}function Vq(t,e,r,n,i,s){for(var a=new n8(n),o=0;o<n.cells.length;o++){var l=n.cells[o],u=r.getComputedStyle(l);if(i||u.display!=="none"){var h=void 0;s&&(h=Oq(t,l,e,u,r)),a.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:h,_element:l,content:zq(l)})}}var f=r.getComputedStyle(n);if(a.length>0&&(i||f.display!=="none"))return a}function zq(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function Hq(t,e,r){for(var n=0,i=[t,e,r];n<i.length;n++){var s=i[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function bl(t,e,r,n,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function c8(t,e){var r=new xd(t),n=r.getDocumentOptions(),i=r.getGlobalOptions();Hq(i,n,e);var s=bl({},i,n,e),a;typeof window<"u"&&(a=window);var o=qq(i,n,e),l=$q(i,n,e),u=Wq(r,s),h=Kq(r,s,a);return{id:e.tableId,content:h,hooks:l,styles:o,settings:u}}function qq(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var u=t[l],h=e[l],f=r[l];n.columnStyles=bl({},u,h,f)}else{var p=[t,e,r],d=p.map(function(v){return v[l]||{}});n[l]=bl({},d[0],d[1],d[2])}},s=0,a=Object.keys(n);s<a.length;s++){var o=a[s];i(o)}return n}function $q(t,e,r){for(var n=[t,e,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,a=n;s<a.length;s++){var o=a[s];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function Wq(t,e){var r,n,i,s,a,o,l,u,h,f,p,d,v=V2(e.margin,40/t.scaleFactor()),y=(r=Gq(t,e.startY))!==null&&r!==void 0?r:v.top,_;e.showFoot===!0?_="everyPage":e.showFoot===!1?_="never":_=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var w;e.showHead===!0?w="everyPage":e.showHead===!1?w="never":w=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var S=(s=e.useCss)!==null&&s!==void 0?s:!1,C=e.theme||(S?"plain":"striped"),j=!!e.horizontalPageBreak,q=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:S,theme:C,startY:y,margin:v,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(h=e.tableWidth)!==null&&h!==void 0?h:"auto",showHead:w,showFoot:_,tableLineWidth:(f=e.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:j,horizontalPageBreakRepeat:q,horizontalPageBreakBehaviour:(d=e.horizontalPageBreakBehaviour)!==null&&d!==void 0?d:"afterAllRows"}}function Gq(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),i=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var a=r.startPageNumber+r.pageNumber-1;s=a===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function Kq(t,e,r){var n=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(r){var o=l8(t,e.html,r,a,e.useCss)||{};n=o.head||n,i=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||Yq(n,i,s);return{columns:l,head:n,body:i,foot:s}}function Yq(t,e,r){var n=t[0]||e[0]||r[0]||[],i=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var a=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(a=(o==null?void 0:o.colSpan)||1);for(var l=0;l<a;l++){var u=void 0;Array.isArray(n)?u=i.length:u=s+(l>0?"_".concat(l):"");var h={dataKey:u};i.push(h)}}),i}var Nw=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),Xq=function(t){r8(e,t);function e(r,n,i,s,a,o){var l=t.call(this,r,n,o)||this;return l.cell=i,l.row=s,l.column=a,l.section=s.section,l}return e}(Nw),Qq=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,i,s,a){for(var o=0,l=r;o<l.length;o++){var u=l[o],h=new Xq(e,this,n,i,s,a),f=u(h)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var s=i[n];s(new Nw(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var s=i[n];s(new Nw(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),u8=function(){function t(e,r,n,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof n8&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=i,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,i){var s;return Math.max(n,((s=r.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var i=r.cells[n.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(i,s){var a=n.cells[s.index];if(!a)return 0;var o=r.getLineHeight(a.styles.fontSize),l=a.padding("vertical"),u=l+o;return u>i?u:i},0)},t}(),h8=function(){function t(e,r,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*r,s=n*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=V2(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),Jq=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,i=e.allRows();n<i.length;n++){var s=i[n],a=s.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(r=Math.max(r,a.styles.cellWidth))}return r},t}();function Zq(t,e){e$(t,e);var r=[],n=0;e.columns.forEach(function(s){var a=s.getMaxCustomCellWidth(e);a?s.width=a:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var i=e.getWidth(t.pageSize().width)-n;i&&(i=Tw(r,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=Tw(r,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.log("Of the table content, ".concat(i," units width could not fit page"))),r$(e),n$(e,t),t$(e)}function e$(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,i=a8(t,e);e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],u=s.cells[l.index];if(u){var h=e.hooks.didParseCell;e.callCellHooks(t,h,u,s,l,null);var f=u.padding("horizontal");u.contentWidth=I1(u.text,u.styles,t)+f;var p=I1(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var d=10/r;u.minWidth=u.styles.minCellWidth||d,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var h=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},f=h.cellWidth||h.minCellWidth;f&&typeof f=="number"&&(l.minWidth=f,l.wrappedWidth=f)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function Tw(t,e,r){for(var n=e,i=t.reduce(function(d,v){return d+v.wrappedWidth},0),s=0;s<t.length;s++){var a=t[s],o=a.wrappedWidth/i,l=n*o,u=a.width+l,h=r(a),f=u<h?h:u;e-=f-a.width,a.width=f}if(e=Math.round(e*1e10)/1e10,e){var p=t.filter(function(d){return e<0?d.width>r(d):!0});p.length&&(e=Tw(p,e,r))}return e}function t$(t){for(var e={},r=1,n=t.allRows(),i=0;i<n.length;i++)for(var s=n[i],a=0,o=t.columns;a<o.length;a++){var l=o[a],u=e[l.index];if(r>1)r--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var h=s.cells[l.index];if(!h)continue;if(h.height=s.height,h.rowSpan>1){var f=n.length-i,p=h.rowSpan>f?f:h.rowSpan;e[l.index]={cell:h,left:p,row:s}}}}}function r$(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],i=null,s=0,a=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(a-=1,a>1&&t.columns[o+1])s+=l.width,delete n.cells[l.index];else if(i){var u=i;delete n.cells[l.index],i=null,u.width=l.width+s}else{var u=n.cells[l.index];if(!u)continue;if(a=u.colSpan,s=0,u.colSpan>1){i=u,s+=l.width;continue}u.width=l.width+s}}}function n$(t,e){for(var r={count:0,height:0},n=0,i=t.allRows();n<i.length;n++){for(var s=i[n],a=0,o=t.columns;a<o.length;a++){var l=o[a],u=s.cells[l.index];if(u){e.applyStyles(u.styles,!0);var h=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,h+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=sE(u.text,h,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=sE(u.text,h,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,h);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<p*u.rowSpan?r={height:p,count:u.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>s.height&&(s.height=p)}}r.count--}}function sE(t,e,r,n,i){return t.map(function(s){return i$(s,e,r,n,i)})}function i$(t,e,r,n,i){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=I1(t,r,n))return t;for(;e<I1(t+i,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function d8(t,e){var r=new xd(t),n=s$(e,r.scaleFactor()),i=new Qq(e,n);return Zq(r,i),r.applyStyles(r.userStyles),i}function s$(t,e){var r=t.content,n=o$(r.columns);if(r.head.length===0){var i=aE(n,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=aE(n,"foot");i&&r.foot.push(i)}var s=t.settings.theme,a=t.styles;return{columns:n,head:Cy("head",r.head,n,a,s,e),body:Cy("body",r.body,n,a,s,e),foot:Cy("foot",r.foot,n,a,s,e)}}function Cy(t,e,r,n,i,s){var a={},o=e.map(function(l,u){for(var h=0,f={},p=0,d=0,v=0,y=r;v<y.length;v++){var _=y[v];if(a[_.index]==null||a[_.index].left===0)if(d===0){var w=void 0;Array.isArray(l)?w=l[_.index-p-h]:w=l[_.dataKey];var S={};typeof w=="object"&&!Array.isArray(w)&&(S=(w==null?void 0:w.styles)||{});var C=l$(t,_,u,i,n,s,S),j=new h8(w,C,t);f[_.dataKey]=j,f[_.index]=j,d=j.colSpan-1,a[_.index]={left:j.rowSpan-1,times:d}}else d--,p++;else a[_.index].left--,d=a[_.index].times,h++}return new u8(l,u,t,f)});return o}function aE(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var i=a$(e,n.raw);i!=null&&(r[n.dataKey]=i)}}),Object.keys(r).length>0?r:null}function a$(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function o$(t){return t.map(function(e,r){var n,i;return typeof e=="object"?i=(n=e.dataKey)!==null&&n!==void 0?n:r:i=r,new Jq(i,e,r)})}function l$(t,e,r,n,i,s,a){var o=Mq(n),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var u=bl({},o.table,o[t],i.styles,l),h=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},f=t==="body"?h:{},p=t==="body"&&r%2===0?bl({},o.alternateRow,i.alternateRowStyles):{},d=Dq(s),v=bl({},d,u,p,f);return bl(v,a)}function c$(t,e,r){var n;r===void 0&&(r={});var i=a8(t,e),s=new Map,a=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var d=e.columns.find(function(v){return v.dataKey===p||v.index===p});d&&!s.has(d.index)&&(s.set(d.index,!0),a.push(d.index),o.push(e.columns[d.index]),i-=d.wrappedWidth)});for(var u=!0,h=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;h<e.columns.length;){if(s.has(h)){h++;continue}var f=e.columns[h].wrappedWidth;if(u||i>=f)u=!1,a.push(h),o.push(e.columns[h]),i-=f;else break;h++}return{colIndexes:a,columns:o,lastIndex:h-1}}function u$(t,e){for(var r=[],n=0;n<e.columns.length;n++){var i=c$(t,e,{start:n});i.columns.length&&(r.push(i),n=i.lastIndex)}return r}function f8(t,e){var r=e.settings,n=r.startY,i=r.margin,s={x:i.left,y:n},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+i.bottom+a;if(r.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(p,d){return p+d.height},0);o+=u}var h=new xd(t);(r.pageBreak==="always"||r.startY!=null&&o>h.pageSize().height)&&(m8(h),s.y=i.top),e.callWillDrawPageHooks(h,s);var f=bl({},s);e.startPageNumber=h.pageNumber(),r.horizontalPageBreak?h$(h,e,f,s):(h.applyStyles(h.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(p){return Dl(h,e,p,s,e.columns)}),h.applyStyles(h.userStyles),e.body.forEach(function(p,d){var v=d===e.body.length-1;P1(h,e,p,v,f,s,e.columns)}),h.applyStyles(h.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(p){return Dl(h,e,p,s,e.columns)})),i8(h,e,f,s),e.callEndPageHooks(h,s),e.finalY=s.y,t.lastAutoTable=e,h.applyStyles(h.userStyles)}function h$(t,e,r,n){var i=u$(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,h){t.applyStyles(t.userStyles),h>0?m0(t,e,r,n,u.columns,!0):oE(t,e,n,u.columns),d$(t,e,r,n,u.columns),Iy(t,e,n,u.columns)});else for(var a=-1,o=i[0],l=function(){var u=a;if(o){t.applyStyles(t.userStyles);var h=o.columns;a>=0?m0(t,e,r,n,h,!0):oE(t,e,n,h),u=lE(t,e,a+1,n,h),Iy(t,e,n,h)}var f=u-a;i.slice(1).forEach(function(p){t.applyStyles(t.userStyles),m0(t,e,r,n,p.columns,!0),lE(t,e,a+1,n,p.columns,f),Iy(t,e,n,p.columns)}),a=u};a<e.body.length-1;)l()}function oE(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return Dl(t,e,s,r,n)})}function d$(t,e,r,n,i){t.applyStyles(t.userStyles),e.body.forEach(function(s,a){var o=a===e.body.length-1;P1(t,e,s,o,r,n,i)})}function lE(t,e,r,n,i,s){t.applyStyles(t.userStyles),s=s??e.body.length;var a=Math.min(r+s,e.body.length),o=-1;return e.body.slice(r,a).forEach(function(l,u){var h=r+u===e.body.length-1,f=p8(t,e,h,n);l.canEntireRowFit(f,i)&&(Dl(t,e,l,n,i),o=r+u)}),o}function Iy(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return Dl(t,e,s,r,n)})}function f$(t,e,r){var n=r.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),s=Math.floor((e-i)/n);return Math.max(0,s)}function p$(t,e,r,n){var i={};t.spansMultiplePages=!0,t.height=0;for(var s=0,a=0,o=r.columns;a<o.length;a++){var l=o[a],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var h=new h8(u.raw,u.styles,u.section);h=bl(h,u),h.text=[];var f=f$(u,e,n);u.text.length>f&&(h.text=u.text.splice(f,u.text.length));var p=n.scaleFactor(),d=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,d),u.contentHeight>=e&&(u.contentHeight=e,h.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),h.contentHeight=h.getContentHeight(p,d),h.contentHeight>s&&(s=h.contentHeight),i[l.index]=h}}var v=new u8(t.raw,-1,t.section,i,!0);v.height=s;for(var y=0,_=r.columns;y<_.length;y++){var l=_[y],h=v.cells[l.index];h&&(h.height=v.height);var u=t.cells[l.index];u&&(u.height=t.height)}return v}function m$(t,e,r,n){var i=t.pageSize().height,s=n.settings.margin,a=s.top+s.bottom,o=i-a;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),u=l<r;if(l>o)return console.log("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var h=e.hasRowSpan(n.columns),f=e.getMaxCellHeight(n.columns)>o;return f?(h&&console.log("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(h||n.settings.rowPageBreak==="avoid")}function P1(t,e,r,n,i,s,a){var o=p8(t,e,n,s);if(r.canEntireRowFit(o,a))Dl(t,e,r,s,a);else if(m$(t,r,o,e)){var l=p$(r,o,e,t);Dl(t,e,r,s,a),m0(t,e,i,s,a),P1(t,e,l,n,i,s,a)}else m0(t,e,i,s,a),P1(t,e,r,n,i,s,a)}function Dl(t,e,r,n,i){n.x=e.settings.margin.left;for(var s=0,a=i;s<a.length;s++){var o=a[s],l=r.cells[o.index];if(!l){n.x+=o.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,r,o,n);if(u===!1){n.x+=o.width;continue}g$(t,l,n);var h=l.getTextPos();t8(l.text,h.x,h.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function g$(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=s8(n.lineWidth,n.fillColor);i&&t.rect(e.x,r.y,e.width,e.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),x$(t,e,r,n.lineWidth))}function x$(t,e,r,n){var i,s,a,o;n.top&&(i=r.x,s=r.y,a=r.x+e.width,o=r.y,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),l(n.top,i,s,a,o)),n.bottom&&(i=r.x,s=r.y+e.height,a=r.x+e.width,o=r.y+e.height,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),l(n.bottom,i,s,a,o)),n.left&&(i=r.x,s=r.y,a=r.x,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,i,s,a,o)),n.right&&(i=r.x+e.width,s=r.y,a=r.x+e.width,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,i,s,a,o));function l(u,h,f,p,d){t.getDocument().setLineWidth(u),t.getDocument().line(h,f,p,d,"S")}}function p8(t,e,r,n){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-i}function m0(t,e,r,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(o){return Dl(t,e,o,n,i)}),e.callEndPageHooks(t,n);var a=e.settings.margin;i8(t,e,r,n),m8(t),e.pageNumber++,n.x=a.left,n.y=a.top,r.y=a.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return Dl(t,e,o,n,i)}),t.applyStyles(t.userStyles))}function m8(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function y$(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],i=c8(this,n),s=d8(this,i);return f8(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,i){t8(e,r,n,i,this)},t.API.autoTableSetDefaults=function(e){return xd.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){xd.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new xd(this),s=l8(i,e,window,r,!1),a=s.head,o=s.body,l=((n=a[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var Py;function Ff(t,e){var r=c8(t,e),n=d8(t,r);f8(t,n)}try{if(typeof window<"u"&&window){var cE=window,uE=cE.jsPDF||((Py=cE.jspdf)===null||Py===void 0?void 0:Py.jsPDF);uE&&y$(uE)}}catch(t){console.error("Could not apply autoTable plugin",t)}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var L1={};L1.version="0.18.5";var g8=1252,v$=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],x8=function(t){v$.indexOf(t)!=-1&&(g8=t)};function w$(){x8(1252)}var ep=function(t){x8(t)};function _$(){ep(1200),w$()}var Om=function(e){return String.fromCharCode(e)},hE=function(e){return String.fromCharCode(e)},R1,Ic="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function tp(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0,l=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),a=(r&3)<<4|n>>4,i=t.charCodeAt(u++),o=(n&15)<<2|i>>6,l=i&63,isNaN(n)?o=l=64:isNaN(i)&&(l=64),e+=Ic.charAt(s)+Ic.charAt(a)+Ic.charAt(o)+Ic.charAt(l);return e}function Ml(t){var e="",r=0,n=0,i=0,s=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=Ic.indexOf(t.charAt(u++)),a=Ic.indexOf(t.charAt(u++)),r=s<<2|a>>4,e+=String.fromCharCode(r),o=Ic.indexOf(t.charAt(u++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Ic.indexOf(t.charAt(u++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var tn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),zl=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Ju(t){return tn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function dE(t){return tn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var yo=function(e){return tn?zl(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function z2(t){if(typeof ArrayBuffer>"u")return yo(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Lp(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function b$(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var ss=tn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:zl(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),i=0;for(e=0,r=0;e<t.length;r+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function S$(t){for(var e=[],r=0,n=t.length+250,i=Ju(t.length+255),s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a<128)i[r++]=a;else if(a<2048)i[r++]=192|a>>6&31,i[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++s)&1023;i[r++]=240|a>>8&7,i[r++]=128|a>>2&63,i[r++]=128|o>>6&15|(a&3)<<4,i[r++]=128|o&63}else i[r++]=224|a>>12&15,i[r++]=128|a>>6&63,i[r++]=128|a&63;r>n&&(e.push(i.slice(0,r)),r=0,i=Ju(65535),n=65530)}return e.push(i.slice(0,r)),ss(e)}var g0=/\u0000/g,Bm=/[\u0001-\u0006]/g;function yd(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function wo(t,e){var r=""+t;return r.length>=e?r:li("0",e-r.length)+r}function R_(t,e){var r=""+t;return r.length>=e?r:li(" ",e-r.length)+r}function j1(t,e){var r=""+t;return r.length>=e?r:r+li(" ",e-r.length)}function A$(t,e){var r=""+Math.round(t);return r.length>=e?r:li("0",e-r.length)+r}function E$(t,e){var r=""+t;return r.length>=e?r:li("0",e-r.length)+r}var fE=Math.pow(2,32);function _h(t,e){if(t>fE||t<-fE)return A$(t,e);var r=Math.round(t);return E$(r,e)}function F1(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var pE=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Ly=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function N$(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var ci={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},mE={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},T$={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function D1(t,e,r){for(var n=t<0?-1:1,i=t*n,s=0,a=1,o=0,l=1,u=0,h=0,f=Math.floor(i);u<e&&(f=Math.floor(i),o=f*a+s,h=f*u+l,!(i-f<5e-8));)i=1/(i-f),s=a,a=o,l=u,u=h;if(h>e&&(u>e?(h=l,o=s):(h=u,o=a)),!r)return[0,n*o,h];var p=Math.floor(n*o/h);return[p,n*o-p*h,h]}function Um(t,e,r){if(t>2958465||t<0)return null;var n=t|0,i=Math.floor(86400*(t-n)),s=0,a=[],o={D:n,T:i,u:86400*(t-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=j$(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var y8=new Date(1899,11,31,0,0,0),k$=y8.getTime(),C$=new Date(1900,2,1,0,0,0);function v8(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=C$&&(r+=24*60*60*1e3),(r-(k$+(t.getTimezoneOffset()-y8.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function j_(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function I$(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function P$(t){var e=t<0?12:11,r=j_(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function L$(t){var e=j_(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function R$(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=P$(t):e===10?r=t.toFixed(10).substr(0,12):r=L$(t),j_(I$(r.toUpperCase()))}function kw(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):R$(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return iu(14,v8(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function j$(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function F$(t,e,r,n){var i="",s=0,a=0,o=r.y,l,u=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,u=e.length;break;case 3:return Ly[r.m-1][1];case 5:return Ly[r.m-1][0];default:return Ly[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,u=e.length;break;case 3:return pE[r.q][0];default:return pE[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?wo(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,s=Math.round(a*(r.S+r.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=wo(s,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var h=u>0?wo(l,u):"";return h}function Pc(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var w8=/%/g;function D$(t,e,r){var n=e.replace(w8,""),i=e.length-n.length;return Al(t,n,r*Math.pow(10,2*i))+li("%",i)}function M$(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Al(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function _8(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+_8(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,h){return l+u+h.substr(0,(i+s)%i)+"."+h.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var b8=/# (\?+)( ?)\/( ?)(\d+)/;function O$(t,e,r){var n=parseInt(t[4],10),i=Math.round(e*n),s=Math.floor(i/n),a=i-s*n,o=n;return r+(s===0?"":""+s)+" "+(a===0?li(" ",t[1].length+1+t[4].length):R_(a,t[1].length)+t[2]+"/"+t[3]+wo(o,t[4].length))}function B$(t,e,r){return r+(e===0?"":""+e)+li(" ",t[1].length+2+t[4].length)}var S8=/^#*0*\.([0#]+)/,A8=/\).*[0#]/,E8=/\(###\) ###\\?-####/;function Os(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function gE(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function xE(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function U$(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function V$(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function qa(t,e,r){if(t.charCodeAt(0)===40&&!e.match(A8)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?qa("n",n,r):"("+qa("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return M$(t,e,r);if(e.indexOf("%")!==-1)return D$(t,e,r);if(e.indexOf("E")!==-1)return _8(e,r);if(e.charCodeAt(0)===36)return"$"+qa(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+_h(l,e.length);if(e.match(/^[#?]+$/))return i=_h(r,0),i==="0"&&(i=""),i.length>e.length?i:Os(e.substr(0,e.length-i.length))+i;if(s=e.match(b8))return O$(s,l,u);if(e.match(/^#+0+$/))return u+_h(l,e.length-e.indexOf("0"));if(s=e.match(S8))return i=gE(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Os(s[1])).replace(/\.$/,"."+Os(s[1])).replace(/\.(\d*)$/,function(v,y){return"."+y+li("0",Os(s[1]).length-y.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+gE(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Pc(_h(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+qa(t,e,-r):Pc(""+(Math.floor(r)+U$(r,s[1].length)))+"."+wo(xE(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return qa(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=yd(qa(t,e.replace(/[\\-]/g,""),r)),a=0,yd(yd(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<i.length?i.charAt(a++):v==="0"?"0":""}));if(e.match(E8))return i=qa(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=D1(l,Math.pow(10,a)-1,!1),i=""+u,h=Al("n",s[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+s[2]+"/"+s[3],h=j1(o[2],a),h.length<s[4].length&&(h=Os(s[4].substr(s[4].length-h.length))+h),i+=h,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=D1(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?R_(o[1],a)+s[2]+"/"+s[3]+j1(o[2],a):li(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=_h(r,0),e.length<=i.length?i:Os(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=e.indexOf(".")-a,p=e.length-i.length-f;return Os(e.substr(0,f)+i+e.substr(e.length-p))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=xE(r,s[1].length),r<0?"-"+qa(t,e,-r):Pc(V$(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?wo(0,3-v.length):"")+v})+"."+wo(a,s[1].length);switch(e){case"###,##0.00":return qa(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var d=Pc(_h(l,0));return d!=="0"?u+d:"";case"###,###.00":return qa(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return qa(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function z$(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Al(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function H$(t,e,r){var n=e.replace(w8,""),i=e.length-n.length;return Al(t,n,r*Math.pow(10,2*i))+li("%",i)}function N8(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+N8(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,h){return l+u+h.substr(0,(i+s)%i)+"."+h.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Mo(t,e,r){if(t.charCodeAt(0)===40&&!e.match(A8)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Mo("n",n,r):"("+Mo("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return z$(t,e,r);if(e.indexOf("%")!==-1)return H$(t,e,r);if(e.indexOf("E")!==-1)return N8(e,r);if(e.charCodeAt(0)===36)return"$"+Mo(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+wo(l,e.length);if(e.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>e.length?i:Os(e.substr(0,e.length-i.length))+i;if(s=e.match(b8))return B$(s,l,u);if(e.match(/^#+0+$/))return u+wo(l,e.length-e.indexOf("0"));if(s=e.match(S8))return i=(""+r).replace(/^([^\.]+)$/,"$1."+Os(s[1])).replace(/\.$/,"."+Os(s[1])),i=i.replace(/\.(\d*)$/,function(v,y){return"."+y+li("0",Os(s[1]).length-y.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Pc(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Mo(t,e,-r):Pc(""+r)+"."+li("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Mo(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=yd(Mo(t,e.replace(/[\\-]/g,""),r)),a=0,yd(yd(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<i.length?i.charAt(a++):v==="0"?"0":""}));if(e.match(E8))return i=Mo(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=D1(l,Math.pow(10,a)-1,!1),i=""+u,h=Al("n",s[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+s[2]+"/"+s[3],h=j1(o[2],a),h.length<s[4].length&&(h=Os(s[4].substr(s[4].length-h.length))+h),i+=h,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=D1(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?R_(o[1],a)+s[2]+"/"+s[3]+j1(o[2],a):li(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+r,e.length<=i.length?i:Os(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=e.indexOf(".")-a,p=e.length-i.length-f;return Os(e.substr(0,f)+i+e.substr(e.length-p))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Mo(t,e,-r):Pc(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?wo(0,3-v.length):"")+v})+"."+wo(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var d=Pc(""+l);return d!=="0"?u+d:"";default:if(e.match(/\.[0#?]*$/))return Mo(t,e.slice(0,e.lastIndexOf(".")),r)+Os(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Al(t,e,r){return(r|0)===r?Mo(t,e,r):qa(t,e,r)}function q$(t){for(var e=[],r=!1,n=0,i=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(i,n-i),i=n+1}if(e[e.length]=t.substr(i),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var T8=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function k8(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":F1(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(T8))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function $$(t,e,r,n){for(var i=[],s="",a=0,o="",l="t",u,h,f,p="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!F1(t,a))throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(f=t.charCodeAt(++a))!==34&&a<t.length;)s+=String.fromCharCode(f);i[i.length]={t:"t",v:s},++a;break;case"\\":var d=t.charAt(++a),v=d==="("||d===")"?d:"t";i[i.length]={t:v,v:d},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(u==null&&(u=Um(e,r,t.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=Um(e,r),u==null))return"";for(s=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var y={t:o,v:o};if(u==null&&(u=Um(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",p="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",a+=5,p="h"):t.substr(a,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",a+=5,p="h"):(y.t="t",++a),u==null&&y.t==="T")return"";i[i.length]=y,l=o;break;case"[":for(s=o;t.charAt(a++)!=="]"&&a<t.length;)s+=t.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(T8)){if(u==null&&(u=Um(e,r),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",k8(t)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<t.length&&(o=t.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;t.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)s+=t.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"t",v:o},++a;break}var _=0,w=0,S;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=p,l="h",_<1&&(_=1);break;case"s":(S=i[a].v.match(/\.0+$/))&&(w=Math.max(w,S[0].length-1)),_<3&&(_=3);case"d":case"y":case"M":case"e":l=i[a].t;break;case"m":l==="s"&&(i[a].t="M",_<2&&(_=2));break;case"X":break;case"Z":_<1&&i[a].v.match(/[Hh]/)&&(_=1),_<2&&i[a].v.match(/[Mm]/)&&(_=2),_<3&&i[a].v.match(/[Ss]/)&&(_=3)}switch(_){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var C="",j;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=F$(i[a].t.charCodeAt(0),i[a].v,u,w),i[a].t="t";break;case"n":case"?":for(j=a+1;i[j]!=null&&((o=i[j].t)==="?"||o==="D"||(o===" "||o==="t")&&i[j+1]!=null&&(i[j+1].t==="?"||i[j+1].t==="t"&&i[j+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[j].v==="/"||i[j].v===" "&&i[j+1]!=null&&i[j+1].t=="?"));)i[a].v+=i[j].v,i[j]={v:"",t:";"},++j;C+=i[a].v,a=j-1;break;case"G":i[a].t="t",i[a].v=kw(e,r);break}var q="",G,E;if(C.length>0){C.charCodeAt(0)==40?(G=e<0&&C.charCodeAt(0)===45?-e:e,E=Al("n",C,G)):(G=e<0&&n>1?-e:e,E=Al("n",C,G),G<0&&i[0]&&i[0].t=="t"&&(E=E.substr(1),i[0].v="-"+i[0].v)),j=E.length-1;var k=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){k=a;break}var A=i.length;if(k===i.length&&E.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(j>=i[a].v.length-1?(j-=i[a].v.length,i[a].v=E.substr(j+1,i[a].v.length)):j<0?i[a].v="":(i[a].v=E.substr(0,j+1),j=-1),i[a].t="t",A=a);j>=0&&A<i.length&&(i[A].v=E.substr(0,j+1)+i[A].v)}else if(k!==i.length&&E.indexOf("E")===-1){for(j=E.indexOf(".")-1,a=k;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(h=i[a].v.indexOf(".")>-1&&a===k?i[a].v.indexOf(".")-1:i[a].v.length-1,q=i[a].v.substr(h+1);h>=0;--h)j>=0&&(i[a].v.charAt(h)==="0"||i[a].v.charAt(h)==="#")&&(q=E.charAt(j--)+q);i[a].v=q,i[a].t="t",A=a}for(j>=0&&A<i.length&&(i[A].v=E.substr(0,j+1)+i[A].v),j=E.indexOf(".")+1,a=k;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==k)){for(h=i[a].v.indexOf(".")>-1&&a===k?i[a].v.indexOf(".")+1:0,q=i[a].v.substr(0,h);h<i[a].v.length;++h)j<E.length&&(q+=E.charAt(j++));i[a].v=q,i[a].t="t",A=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(G=n>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Al(i[a].t,i[a].v,G),i[a].t="t");var D="";for(a=0;a!==i.length;++a)i[a]!=null&&(D+=i[a].v);return D}var yE=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function vE(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function W$(t,e){var r=q$(t),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(yE),o=r[1].match(yE);return vE(e,a)?[n,r[0]]:vE(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,s]}function iu(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:ci)[t],n==null&&(n=r.table&&r.table[mE[t]]||ci[mE[t]]),n==null&&(n=T$[t]||"General");break}if(F1(n,0))return kw(e,r);e instanceof Date&&(e=v8(e,r.date1904));var i=W$(n,e);if(F1(i[1]))return kw(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return $$(i[1],e,r,i[0])}function C8(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(ci[r]==null){e<0&&(e=r);continue}if(ci[r]==t){e=r;break}}e<0&&(e=391)}return ci[e]=t,e}function H2(t){for(var e=0;e!=392;++e)t[e]!==void 0&&C8(t[e],e)}function q2(){ci=N$()}var I8=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function G$(t){var e=typeof t=="number"?ci[t]:t;return e=e.replace(I8,"(\\d+)"),new RegExp("^"+e+"$")}function K$(t,e,r){var n=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(e.match(I8)||[]).forEach(function(f,p){var d=parseInt(r[p+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=d;break;case"d":s=d;break;case"h":a=d;break;case"s":l=d;break;case"m":a>=0?o=d:i=d;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var h=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?u:n==-1&&i==-1&&s==-1?h:u+"T"+h}var Y$=function(){var t={};t.version="1.2.0";function e(){for(var E=0,k=new Array(256),A=0;A!=256;++A)E=A,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,k[A]=E;return typeof Int32Array<"u"?new Int32Array(k):k}var r=e();function n(E){var k=0,A=0,D=0,N=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)N[D]=E[D];for(D=0;D!=256;++D)for(A=E[D],k=256+D;k<4096;k+=256)A=N[k]=A>>>8^E[A&255];var R=[];for(D=1;D!=16;++D)R[D-1]=typeof Int32Array<"u"?N.subarray(D*256,D*256+256):N.slice(D*256,D*256+256);return R}var i=n(r),s=i[0],a=i[1],o=i[2],l=i[3],u=i[4],h=i[5],f=i[6],p=i[7],d=i[8],v=i[9],y=i[10],_=i[11],w=i[12],S=i[13],C=i[14];function j(E,k){for(var A=k^-1,D=0,N=E.length;D<N;)A=A>>>8^r[(A^E.charCodeAt(D++))&255];return~A}function q(E,k){for(var A=k^-1,D=E.length-15,N=0;N<D;)A=C[E[N++]^A&255]^S[E[N++]^A>>8&255]^w[E[N++]^A>>16&255]^_[E[N++]^A>>>24]^y[E[N++]]^v[E[N++]]^d[E[N++]]^p[E[N++]]^f[E[N++]]^h[E[N++]]^u[E[N++]]^l[E[N++]]^o[E[N++]]^a[E[N++]]^s[E[N++]]^r[E[N++]];for(D+=15;N<D;)A=A>>>8^r[(A^E[N++])&255];return~A}function G(E,k){for(var A=k^-1,D=0,N=E.length,R=0,L=0;D<N;)R=E.charCodeAt(D++),R<128?A=A>>>8^r[(A^R)&255]:R<2048?(A=A>>>8^r[(A^(192|R>>6&31))&255],A=A>>>8^r[(A^(128|R&63))&255]):R>=55296&&R<57344?(R=(R&1023)+64,L=E.charCodeAt(D++)&1023,A=A>>>8^r[(A^(240|R>>8&7))&255],A=A>>>8^r[(A^(128|R>>2&63))&255],A=A>>>8^r[(A^(128|L>>6&15|(R&3)<<4))&255],A=A>>>8^r[(A^(128|L&63))&255]):(A=A>>>8^r[(A^(224|R>>12&15))&255],A=A>>>8^r[(A^(128|R>>6&63))&255],A=A>>>8^r[(A^(128|R&63))&255]);return~A}return t.table=r,t.bstr=j,t.buf=q,t.str=G,t}(),_n=function(){var e={};e.version="1.2.1";function r(W,ie){for(var ee=W.split("/"),ne=ie.split("/"),oe=0,le=0,De=Math.min(ee.length,ne.length);oe<De;++oe){if(le=ee[oe].length-ne[oe].length)return le;if(ee[oe]!=ne[oe])return ee[oe]<ne[oe]?-1:1}return ee.length-ne.length}function n(W){if(W.charAt(W.length-1)=="/")return W.slice(0,-1).indexOf("/")===-1?W:n(W.slice(0,-1));var ie=W.lastIndexOf("/");return ie===-1?W:W.slice(0,ie+1)}function i(W){if(W.charAt(W.length-1)=="/")return i(W.slice(0,-1));var ie=W.lastIndexOf("/");return ie===-1?W:W.slice(ie+1)}function s(W,ie){typeof ie=="string"&&(ie=new Date(ie));var ee=ie.getHours();ee=ee<<6|ie.getMinutes(),ee=ee<<5|ie.getSeconds()>>>1,W.write_shift(2,ee);var ne=ie.getFullYear()-1980;ne=ne<<4|ie.getMonth()+1,ne=ne<<5|ie.getDate(),W.write_shift(2,ne)}function a(W){var ie=W.read_shift(2)&65535,ee=W.read_shift(2)&65535,ne=new Date,oe=ee&31;ee>>>=5;var le=ee&15;ee>>>=4,ne.setMilliseconds(0),ne.setFullYear(ee+1980),ne.setMonth(le-1),ne.setDate(oe);var De=ie&31;ie>>>=5;var Te=ie&63;return ie>>>=6,ne.setHours(ie),ne.setMinutes(Te),ne.setSeconds(De<<1),ne}function o(W){va(W,0);for(var ie={},ee=0;W.l<=W.length-4;){var ne=W.read_shift(2),oe=W.read_shift(2),le=W.l+oe,De={};switch(ne){case 21589:ee=W.read_shift(1),ee&1&&(De.mtime=W.read_shift(4)),oe>5&&(ee&2&&(De.atime=W.read_shift(4)),ee&4&&(De.ctime=W.read_shift(4))),De.mtime&&(De.mt=new Date(De.mtime*1e3));break}W.l=le,ie[ne]=De}return ie}var l;function u(){return l||(l={})}function h(W,ie){if(W[0]==80&&W[1]==75)return Zt(W,ie);if((W[0]|32)==109&&(W[1]|32)==105)return Jt(W,ie);if(W.length<512)throw new Error("CFB file size "+W.length+" < 512");var ee=3,ne=512,oe=0,le=0,De=0,Te=0,je=0,Me=[],Oe=W.slice(0,512);va(Oe,0);var ht=f(Oe);switch(ee=ht[0],ee){case 3:ne=512;break;case 4:ne=4096;break;case 0:if(ht[1]==0)return Zt(W,ie);default:throw new Error("Major Version: Expected 3 or 4 saw "+ee)}ne!==512&&(Oe=W.slice(0,ne),va(Oe,28));var gt=W.slice(0,ne);p(Oe,ee);var kt=Oe.read_shift(4,"i");if(ee===3&&kt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+kt);Oe.l+=4,De=Oe.read_shift(4,"i"),Oe.l+=4,Oe.chk("00100000","Mini Stream Cutoff Size: "),Te=Oe.read_shift(4,"i"),oe=Oe.read_shift(4,"i"),je=Oe.read_shift(4,"i"),le=Oe.read_shift(4,"i");for(var pt=-1,Et=0;Et<109&&(pt=Oe.read_shift(4,"i"),!(pt<0));++Et)Me[Et]=pt;var rr=d(W,ne);_(je,le,rr,ne,Me);var Tr=S(rr,De,Me,ne);Tr[De].name="!Directory",oe>0&&Te!==L&&(Tr[Te].name="!MiniFAT"),Tr[Me[0]].name="!FAT",Tr.fat_addrs=Me,Tr.ssz=ne;var vr={},nn=[],$n=[],hi=[];C(De,Tr,rr,nn,oe,vr,$n,Te),v($n,hi,nn),nn.shift();var di={FileIndex:$n,FullPaths:hi};return ie&&ie.raw&&(di.raw={header:gt,sectors:rr}),di}function f(W){if(W[W.l]==80&&W[W.l+1]==75)return[0,0];W.chk(se,"Header Signature: "),W.l+=16;var ie=W.read_shift(2,"u");return[W.read_shift(2,"u"),ie]}function p(W,ie){var ee=9;switch(W.l+=2,ee=W.read_shift(2)){case 9:if(ie!=3)throw new Error("Sector Shift: Expected 9 saw "+ee);break;case 12:if(ie!=4)throw new Error("Sector Shift: Expected 12 saw "+ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ee)}W.chk("0600","Mini Sector Shift: "),W.chk("000000000000","Reserved: ")}function d(W,ie){for(var ee=Math.ceil(W.length/ie)-1,ne=[],oe=1;oe<ee;++oe)ne[oe-1]=W.slice(oe*ie,(oe+1)*ie);return ne[ee-1]=W.slice(ee*ie),ne}function v(W,ie,ee){for(var ne=0,oe=0,le=0,De=0,Te=0,je=ee.length,Me=[],Oe=[];ne<je;++ne)Me[ne]=Oe[ne]=ne,ie[ne]=ee[ne];for(;Te<Oe.length;++Te)ne=Oe[Te],oe=W[ne].L,le=W[ne].R,De=W[ne].C,Me[ne]===ne&&(oe!==-1&&Me[oe]!==oe&&(Me[ne]=Me[oe]),le!==-1&&Me[le]!==le&&(Me[ne]=Me[le])),De!==-1&&(Me[De]=ne),oe!==-1&&ne!=Me[ne]&&(Me[oe]=Me[ne],Oe.lastIndexOf(oe)<Te&&Oe.push(oe)),le!==-1&&ne!=Me[ne]&&(Me[le]=Me[ne],Oe.lastIndexOf(le)<Te&&Oe.push(le));for(ne=1;ne<je;++ne)Me[ne]===ne&&(le!==-1&&Me[le]!==le?Me[ne]=Me[le]:oe!==-1&&Me[oe]!==oe&&(Me[ne]=Me[oe]));for(ne=1;ne<je;++ne)if(W[ne].type!==0){if(Te=ne,Te!=Me[Te])do Te=Me[Te],ie[ne]=ie[Te]+"/"+ie[ne];while(Te!==0&&Me[Te]!==-1&&Te!=Me[Te]);Me[ne]=-1}for(ie[0]+="/",ne=1;ne<je;++ne)W[ne].type!==2&&(ie[ne]+="/")}function y(W,ie,ee){for(var ne=W.start,oe=W.size,le=[],De=ne;ee&&oe>0&&De>=0;)le.push(ie.slice(De*R,De*R+R)),oe-=R,De=Nu(ee,De*4);return le.length===0?Je(0):ss(le).slice(0,W.size)}function _(W,ie,ee,ne,oe){var le=L;if(W===L){if(ie!==0)throw new Error("DIFAT chain shorter than expected")}else if(W!==-1){var De=ee[W],Te=(ne>>>2)-1;if(!De)return;for(var je=0;je<Te&&(le=Nu(De,je*4))!==L;++je)oe.push(le);_(Nu(De,ne-4),ie-1,ee,ne,oe)}}function w(W,ie,ee,ne,oe){var le=[],De=[];oe||(oe=[]);var Te=ne-1,je=0,Me=0;for(je=ie;je>=0;){oe[je]=!0,le[le.length]=je,De.push(W[je]);var Oe=ee[Math.floor(je*4/ne)];if(Me=je*4&Te,ne<4+Me)throw new Error("FAT boundary crossed: "+je+" 4 "+ne);if(!W[Oe])break;je=Nu(W[Oe],Me)}return{nodes:le,data:TE([De])}}function S(W,ie,ee,ne){var oe=W.length,le=[],De=[],Te=[],je=[],Me=ne-1,Oe=0,ht=0,gt=0,kt=0;for(Oe=0;Oe<oe;++Oe)if(Te=[],gt=Oe+ie,gt>=oe&&(gt-=oe),!De[gt]){je=[];var pt=[];for(ht=gt;ht>=0;){pt[ht]=!0,De[ht]=!0,Te[Te.length]=ht,je.push(W[ht]);var Et=ee[Math.floor(ht*4/ne)];if(kt=ht*4&Me,ne<4+kt)throw new Error("FAT boundary crossed: "+ht+" 4 "+ne);if(!W[Et]||(ht=Nu(W[Et],kt),pt[ht]))break}le[gt]={nodes:Te,data:TE([je])}}return le}function C(W,ie,ee,ne,oe,le,De,Te){for(var je=0,Me=ne.length?2:0,Oe=ie[W].data,ht=0,gt=0,kt;ht<Oe.length;ht+=128){var pt=Oe.slice(ht,ht+128);va(pt,64),gt=pt.read_shift(2),kt=B_(pt,0,gt-Me),ne.push(kt);var Et={name:kt,type:pt.read_shift(1),color:pt.read_shift(1),L:pt.read_shift(4,"i"),R:pt.read_shift(4,"i"),C:pt.read_shift(4,"i"),clsid:pt.read_shift(16),state:pt.read_shift(4,"i"),start:0,size:0},rr=pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2);rr!==0&&(Et.ct=j(pt,pt.l-8));var Tr=pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2);Tr!==0&&(Et.mt=j(pt,pt.l-8)),Et.start=pt.read_shift(4,"i"),Et.size=pt.read_shift(4,"i"),Et.size<0&&Et.start<0&&(Et.size=Et.type=0,Et.start=L,Et.name=""),Et.type===5?(je=Et.start,oe>0&&je!==L&&(ie[je].name="!StreamData")):Et.size>=4096?(Et.storage="fat",ie[Et.start]===void 0&&(ie[Et.start]=w(ee,Et.start,ie.fat_addrs,ie.ssz)),ie[Et.start].name=Et.name,Et.content=ie[Et.start].data.slice(0,Et.size)):(Et.storage="minifat",Et.size<0?Et.size=0:je!==L&&Et.start!==L&&ie[je]&&(Et.content=y(Et,ie[je].data,(ie[Te]||{}).data))),Et.content&&va(Et.content,0),le[kt]=Et,De.push(Et)}}function j(W,ie){return new Date((_a(W,ie+4)/1e7*Math.pow(2,32)+_a(W,ie)/1e7-11644473600)*1e3)}function q(W,ie){return u(),h(l.readFileSync(W),ie)}function G(W,ie){var ee=ie&&ie.type;switch(ee||tn&&Buffer.isBuffer(W)&&(ee="buffer"),ee||"base64"){case"file":return q(W,ie);case"base64":return h(yo(Ml(W)),ie);case"binary":return h(yo(W),ie)}return h(W,ie)}function E(W,ie){var ee=ie||{},ne=ee.root||"Root Entry";if(W.FullPaths||(W.FullPaths=[]),W.FileIndex||(W.FileIndex=[]),W.FullPaths.length!==W.FileIndex.length)throw new Error("inconsistent CFB structure");W.FullPaths.length===0&&(W.FullPaths[0]=ne+"/",W.FileIndex[0]={name:ne,type:5}),ee.CLSID&&(W.FileIndex[0].clsid=ee.CLSID),k(W)}function k(W){var ie="Sh33tJ5";if(!_n.find(W,"/"+ie)){var ee=Je(4);ee[0]=55,ee[1]=ee[3]=50,ee[2]=54,W.FileIndex.push({name:ie,type:2,content:ee,size:4,L:69,R:69,C:69}),W.FullPaths.push(W.FullPaths[0]+ie),A(W)}}function A(W,ie){E(W);for(var ee=!1,ne=!1,oe=W.FullPaths.length-1;oe>=0;--oe){var le=W.FileIndex[oe];switch(le.type){case 0:ne?ee=!0:(W.FileIndex.pop(),W.FullPaths.pop());break;case 1:case 2:case 5:ne=!0,isNaN(le.R*le.L*le.C)&&(ee=!0),le.R>-1&&le.L>-1&&le.R==le.L&&(ee=!0);break;default:ee=!0;break}}if(!(!ee&&!ie)){var De=new Date(1987,1,19),Te=0,je=Object.create?Object.create(null):{},Me=[];for(oe=0;oe<W.FullPaths.length;++oe)je[W.FullPaths[oe]]=!0,W.FileIndex[oe].type!==0&&Me.push([W.FullPaths[oe],W.FileIndex[oe]]);for(oe=0;oe<Me.length;++oe){var Oe=n(Me[oe][0]);ne=je[Oe],ne||(Me.push([Oe,{name:i(Oe).replace("/",""),type:1,clsid:ve,ct:De,mt:De,content:null}]),je[Oe]=!0)}for(Me.sort(function(kt,pt){return r(kt[0],pt[0])}),W.FullPaths=[],W.FileIndex=[],oe=0;oe<Me.length;++oe)W.FullPaths[oe]=Me[oe][0],W.FileIndex[oe]=Me[oe][1];for(oe=0;oe<Me.length;++oe){var ht=W.FileIndex[oe],gt=W.FullPaths[oe];if(ht.name=i(gt).replace("/",""),ht.L=ht.R=ht.C=-(ht.color=1),ht.size=ht.content?ht.content.length:0,ht.start=0,ht.clsid=ht.clsid||ve,oe===0)ht.C=Me.length>1?1:-1,ht.size=0,ht.type=5;else if(gt.slice(-1)=="/"){for(Te=oe+1;Te<Me.length&&n(W.FullPaths[Te])!=gt;++Te);for(ht.C=Te>=Me.length?-1:Te,Te=oe+1;Te<Me.length&&n(W.FullPaths[Te])!=n(gt);++Te);ht.R=Te>=Me.length?-1:Te,ht.type=1}else n(W.FullPaths[oe+1]||"")==n(gt)&&(ht.R=oe+1),ht.type=2}}}function D(W,ie){var ee=ie||{};if(ee.fileType=="mad")return qn(W,ee);switch(A(W),ee.fileType){case"zip":return Wt(W,ee)}var ne=function(kt){for(var pt=0,Et=0,rr=0;rr<kt.FileIndex.length;++rr){var Tr=kt.FileIndex[rr];if(Tr.content){var vr=Tr.content.length;vr>0&&(vr<4096?pt+=vr+63>>6:Et+=vr+511>>9)}}for(var nn=kt.FullPaths.length+3>>2,$n=pt+7>>3,hi=pt+127>>7,di=$n+Et+nn+hi,Jn=di+127>>7,cn=Jn<=109?0:Math.ceil((Jn-109)/127);di+Jn+cn+127>>7>Jn;)cn=++Jn<=109?0:Math.ceil((Jn-109)/127);var Cn=[1,cn,Jn,hi,nn,Et,pt,0];return kt.FileIndex[0].size=pt<<6,Cn[7]=(kt.FileIndex[0].start=Cn[0]+Cn[1]+Cn[2]+Cn[3]+Cn[4]+Cn[5])+(Cn[6]+7>>3),Cn}(W),oe=Je(ne[7]<<9),le=0,De=0;{for(le=0;le<8;++le)oe.write_shift(1,ge[le]);for(le=0;le<8;++le)oe.write_shift(2,0);for(oe.write_shift(2,62),oe.write_shift(2,3),oe.write_shift(2,65534),oe.write_shift(2,9),oe.write_shift(2,6),le=0;le<3;++le)oe.write_shift(2,0);for(oe.write_shift(4,0),oe.write_shift(4,ne[2]),oe.write_shift(4,ne[0]+ne[1]+ne[2]+ne[3]-1),oe.write_shift(4,0),oe.write_shift(4,4096),oe.write_shift(4,ne[3]?ne[0]+ne[1]+ne[2]-1:L),oe.write_shift(4,ne[3]),oe.write_shift(-4,ne[1]?ne[0]-1:L),oe.write_shift(4,ne[1]),le=0;le<109;++le)oe.write_shift(-4,le<ne[2]?ne[1]+le:-1)}if(ne[1])for(De=0;De<ne[1];++De){for(;le<236+De*127;++le)oe.write_shift(-4,le<ne[2]?ne[1]+le:-1);oe.write_shift(-4,De===ne[1]-1?L:De+1)}var Te=function(kt){for(De+=kt;le<De-1;++le)oe.write_shift(-4,le+1);kt&&(++le,oe.write_shift(-4,L))};for(De=le=0,De+=ne[1];le<De;++le)oe.write_shift(-4,ye.DIFSECT);for(De+=ne[2];le<De;++le)oe.write_shift(-4,ye.FATSECT);Te(ne[3]),Te(ne[4]);for(var je=0,Me=0,Oe=W.FileIndex[0];je<W.FileIndex.length;++je)Oe=W.FileIndex[je],Oe.content&&(Me=Oe.content.length,!(Me<4096)&&(Oe.start=De,Te(Me+511>>9)));for(Te(ne[6]+7>>3);oe.l&511;)oe.write_shift(-4,ye.ENDOFCHAIN);for(De=le=0,je=0;je<W.FileIndex.length;++je)Oe=W.FileIndex[je],Oe.content&&(Me=Oe.content.length,!(!Me||Me>=4096)&&(Oe.start=De,Te(Me+63>>6)));for(;oe.l&511;)oe.write_shift(-4,ye.ENDOFCHAIN);for(le=0;le<ne[4]<<2;++le){var ht=W.FullPaths[le];if(!ht||ht.length===0){for(je=0;je<17;++je)oe.write_shift(4,0);for(je=0;je<3;++je)oe.write_shift(4,-1);for(je=0;je<12;++je)oe.write_shift(4,0);continue}Oe=W.FileIndex[le],le===0&&(Oe.start=Oe.size?Oe.start-1:L);var gt=le===0&&ee.root||Oe.name;if(Me=2*(gt.length+1),oe.write_shift(64,gt,"utf16le"),oe.write_shift(2,Me),oe.write_shift(1,Oe.type),oe.write_shift(1,Oe.color),oe.write_shift(-4,Oe.L),oe.write_shift(-4,Oe.R),oe.write_shift(-4,Oe.C),Oe.clsid)oe.write_shift(16,Oe.clsid,"hex");else for(je=0;je<4;++je)oe.write_shift(4,0);oe.write_shift(4,Oe.state||0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,Oe.start),oe.write_shift(4,Oe.size),oe.write_shift(4,0)}for(le=1;le<W.FileIndex.length;++le)if(Oe=W.FileIndex[le],Oe.size>=4096)if(oe.l=Oe.start+1<<9,tn&&Buffer.isBuffer(Oe.content))Oe.content.copy(oe,oe.l,0,Oe.size),oe.l+=Oe.size+511&-512;else{for(je=0;je<Oe.size;++je)oe.write_shift(1,Oe.content[je]);for(;je&511;++je)oe.write_shift(1,0)}for(le=1;le<W.FileIndex.length;++le)if(Oe=W.FileIndex[le],Oe.size>0&&Oe.size<4096)if(tn&&Buffer.isBuffer(Oe.content))Oe.content.copy(oe,oe.l,0,Oe.size),oe.l+=Oe.size+63&-64;else{for(je=0;je<Oe.size;++je)oe.write_shift(1,Oe.content[je]);for(;je&63;++je)oe.write_shift(1,0)}if(tn)oe.l=oe.length;else for(;oe.l<oe.length;)oe.write_shift(1,0);return oe}function N(W,ie){var ee=W.FullPaths.map(function(je){return je.toUpperCase()}),ne=ee.map(function(je){var Me=je.split("/");return Me[Me.length-(je.slice(-1)=="/"?2:1)]}),oe=!1;ie.charCodeAt(0)===47?(oe=!0,ie=ee[0].slice(0,-1)+ie):oe=ie.indexOf("/")!==-1;var le=ie.toUpperCase(),De=oe===!0?ee.indexOf(le):ne.indexOf(le);if(De!==-1)return W.FileIndex[De];var Te=!le.match(Bm);for(le=le.replace(g0,""),Te&&(le=le.replace(Bm,"!")),De=0;De<ee.length;++De)if((Te?ee[De].replace(Bm,"!"):ee[De]).replace(g0,"")==le||(Te?ne[De].replace(Bm,"!"):ne[De]).replace(g0,"")==le)return W.FileIndex[De];return null}var R=64,L=-2,se="d0cf11e0a1b11ae1",ge=[208,207,17,224,161,177,26,225],ve="00000000000000000000000000000000",ye={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:L,FREESECT:-1,HEADER_SIGNATURE:se,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ve,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function he(W,ie,ee){u();var ne=D(W,ee);l.writeFileSync(ie,ne)}function _e(W){for(var ie=new Array(W.length),ee=0;ee<W.length;++ee)ie[ee]=String.fromCharCode(W[ee]);return ie.join("")}function Ue(W,ie){var ee=D(W,ie);switch(ie&&ie.type||"buffer"){case"file":return u(),l.writeFileSync(ie.filename,ee),ee;case"binary":return typeof ee=="string"?ee:_e(ee);case"base64":return tp(typeof ee=="string"?ee:_e(ee));case"buffer":if(tn)return Buffer.isBuffer(ee)?ee:zl(ee);case"array":return typeof ee=="string"?yo(ee):ee}return ee}var Ie;function P(W){try{var ie=W.InflateRaw,ee=new ie;if(ee._processChunk(new Uint8Array([3,0]),ee._finishFlushFlag),ee.bytesRead)Ie=W;else throw new Error("zlib does not expose bytesRead")}catch(ne){console.error("cannot use native zlib: "+(ne.message||ne))}}function O(W,ie){if(!Ie)return Pr(W,ie);var ee=Ie.InflateRaw,ne=new ee,oe=ne._processChunk(W.slice(W.l),ne._finishFlushFlag);return W.l+=ne.bytesRead,oe}function B(W){return Ie?Ie.deflateRawSync(W):jt(W)}var z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],de=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Se(W){var ie=(W<<1|W<<11)&139536|(W<<5|W<<15)&558144;return(ie>>16|ie>>8|ie)&255}for(var Ae=typeof Uint8Array<"u",Ne=Ae?new Uint8Array(256):[],Xe=0;Xe<256;++Xe)Ne[Xe]=Se(Xe);function et(W,ie){var ee=Ne[W&255];return ie<=8?ee>>>8-ie:(ee=ee<<8|Ne[W>>8&255],ie<=16?ee>>>16-ie:(ee=ee<<8|Ne[W>>16&255],ee>>>24-ie))}function ot(W,ie){var ee=ie&7,ne=ie>>>3;return(W[ne]|(ee<=6?0:W[ne+1]<<8))>>>ee&3}function mt(W,ie){var ee=ie&7,ne=ie>>>3;return(W[ne]|(ee<=5?0:W[ne+1]<<8))>>>ee&7}function te(W,ie){var ee=ie&7,ne=ie>>>3;return(W[ne]|(ee<=4?0:W[ne+1]<<8))>>>ee&15}function ke(W,ie){var ee=ie&7,ne=ie>>>3;return(W[ne]|(ee<=3?0:W[ne+1]<<8))>>>ee&31}function X(W,ie){var ee=ie&7,ne=ie>>>3;return(W[ne]|(ee<=1?0:W[ne+1]<<8))>>>ee&127}function me(W,ie,ee){var ne=ie&7,oe=ie>>>3,le=(1<<ee)-1,De=W[oe]>>>ne;return ee<8-ne||(De|=W[oe+1]<<8-ne,ee<16-ne)||(De|=W[oe+2]<<16-ne,ee<24-ne)||(De|=W[oe+3]<<24-ne),De&le}function fe(W,ie,ee){var ne=ie&7,oe=ie>>>3;return ne<=5?W[oe]|=(ee&7)<<ne:(W[oe]|=ee<<ne&255,W[oe+1]=(ee&7)>>8-ne),ie+3}function qe(W,ie,ee){var ne=ie&7,oe=ie>>>3;return ee=(ee&1)<<ne,W[oe]|=ee,ie+1}function Ke(W,ie,ee){var ne=ie&7,oe=ie>>>3;return ee<<=ne,W[oe]|=ee&255,ee>>>=8,W[oe+1]=ee,ie+8}function st(W,ie,ee){var ne=ie&7,oe=ie>>>3;return ee<<=ne,W[oe]|=ee&255,ee>>>=8,W[oe+1]=ee&255,W[oe+2]=ee>>>8,ie+16}function yt(W,ie){var ee=W.length,ne=2*ee>ie?2*ee:ie+5,oe=0;if(ee>=ie)return W;if(tn){var le=dE(ne);if(W.copy)W.copy(le);else for(;oe<W.length;++oe)le[oe]=W[oe];return le}else if(Ae){var De=new Uint8Array(ne);if(De.set)De.set(W);else for(;oe<ee;++oe)De[oe]=W[oe];return De}return W.length=ne,W}function Ht(W){for(var ie=new Array(W),ee=0;ee<W;++ee)ie[ee]=0;return ie}function be(W,ie,ee){var ne=1,oe=0,le=0,De=0,Te=0,je=W.length,Me=Ae?new Uint16Array(32):Ht(32);for(le=0;le<32;++le)Me[le]=0;for(le=je;le<ee;++le)W[le]=0;je=W.length;var Oe=Ae?new Uint16Array(je):Ht(je);for(le=0;le<je;++le)Me[oe=W[le]]++,ne<oe&&(ne=oe),Oe[le]=0;for(Me[0]=0,le=1;le<=ne;++le)Me[le+16]=Te=Te+Me[le-1]<<1;for(le=0;le<je;++le)Te=W[le],Te!=0&&(Oe[le]=Me[Te+16]++);var ht=0;for(le=0;le<je;++le)if(ht=W[le],ht!=0)for(Te=et(Oe[le],ne)>>ne-ht,De=(1<<ne+4-ht)-1;De>=0;--De)ie[Te|De<<ht]=ht&15|le<<4;return ne}var tt=Ae?new Uint16Array(512):Ht(512),ct=Ae?new Uint16Array(32):Ht(32);if(!Ae){for(var St=0;St<512;++St)tt[St]=0;for(St=0;St<32;++St)ct[St]=0}(function(){for(var W=[],ie=0;ie<32;ie++)W.push(5);be(W,ct,32);var ee=[];for(ie=0;ie<=143;ie++)ee.push(8);for(;ie<=255;ie++)ee.push(9);for(;ie<=279;ie++)ee.push(7);for(;ie<=287;ie++)ee.push(8);be(ee,tt,288)})();var Rt=function(){for(var ie=Ae?new Uint8Array(32768):[],ee=0,ne=0;ee<de.length-1;++ee)for(;ne<de[ee+1];++ne)ie[ne]=ee;for(;ne<32768;++ne)ie[ne]=29;var oe=Ae?new Uint8Array(259):[];for(ee=0,ne=0;ee<Z.length-1;++ee)for(;ne<Z[ee+1];++ne)oe[ne]=ee;function le(Te,je){for(var Me=0;Me<Te.length;){var Oe=Math.min(65535,Te.length-Me),ht=Me+Oe==Te.length;for(je.write_shift(1,+ht),je.write_shift(2,Oe),je.write_shift(2,~Oe&65535);Oe-- >0;)je[je.l++]=Te[Me++]}return je.l}function De(Te,je){for(var Me=0,Oe=0,ht=Ae?new Uint16Array(32768):[];Oe<Te.length;){var gt=Math.min(65535,Te.length-Oe);if(gt<10){for(Me=fe(je,Me,+(Oe+gt==Te.length)),Me&7&&(Me+=8-(Me&7)),je.l=Me/8|0,je.write_shift(2,gt),je.write_shift(2,~gt&65535);gt-- >0;)je[je.l++]=Te[Oe++];Me=je.l*8;continue}Me=fe(je,Me,+(Oe+gt==Te.length)+2);for(var kt=0;gt-- >0;){var pt=Te[Oe];kt=(kt<<5^pt)&32767;var Et=-1,rr=0;if((Et=ht[kt])&&(Et|=Oe&-32768,Et>Oe&&(Et-=32768),Et<Oe))for(;Te[Et+rr]==Te[Oe+rr]&&rr<250;)++rr;if(rr>2){pt=oe[rr],pt<=22?Me=Ke(je,Me,Ne[pt+1]>>1)-1:(Ke(je,Me,3),Me+=5,Ke(je,Me,Ne[pt-23]>>5),Me+=3);var Tr=pt<8?0:pt-4>>2;Tr>0&&(st(je,Me,rr-Z[pt]),Me+=Tr),pt=ie[Oe-Et],Me=Ke(je,Me,Ne[pt]>>3),Me-=3;var vr=pt<4?0:pt-2>>1;vr>0&&(st(je,Me,Oe-Et-de[pt]),Me+=vr);for(var nn=0;nn<rr;++nn)ht[kt]=Oe&32767,kt=(kt<<5^Te[Oe])&32767,++Oe;gt-=rr-1}else pt<=143?pt=pt+48:Me=qe(je,Me,1),Me=Ke(je,Me,Ne[pt]),ht[kt]=Oe&32767,++Oe}Me=Ke(je,Me,0)-1}return je.l=(Me+7)/8|0,je.l}return function(je,Me){return je.length<8?le(je,Me):De(je,Me)}}();function jt(W){var ie=Je(50+Math.floor(W.length*1.1)),ee=Rt(W,ie);return ie.slice(0,ee)}var Dt=Ae?new Uint16Array(32768):Ht(32768),Wr=Ae?new Uint16Array(32768):Ht(32768),hr=Ae?new Uint16Array(128):Ht(128),Ge=1,Lt=1;function mr(W,ie){var ee=ke(W,ie)+257;ie+=5;var ne=ke(W,ie)+1;ie+=5;var oe=te(W,ie)+4;ie+=4;for(var le=0,De=Ae?new Uint8Array(19):Ht(19),Te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],je=1,Me=Ae?new Uint8Array(8):Ht(8),Oe=Ae?new Uint8Array(8):Ht(8),ht=De.length,gt=0;gt<oe;++gt)De[z[gt]]=le=mt(W,ie),je<le&&(je=le),Me[le]++,ie+=3;var kt=0;for(Me[0]=0,gt=1;gt<=je;++gt)Oe[gt]=kt=kt+Me[gt-1]<<1;for(gt=0;gt<ht;++gt)(kt=De[gt])!=0&&(Te[gt]=Oe[kt]++);var pt=0;for(gt=0;gt<ht;++gt)if(pt=De[gt],pt!=0){kt=Ne[Te[gt]]>>8-pt;for(var Et=(1<<7-pt)-1;Et>=0;--Et)hr[kt|Et<<pt]=pt&7|gt<<3}var rr=[];for(je=1;rr.length<ee+ne;)switch(kt=hr[X(W,ie)],ie+=kt&7,kt>>>=3){case 16:for(le=3+ot(W,ie),ie+=2,kt=rr[rr.length-1];le-- >0;)rr.push(kt);break;case 17:for(le=3+mt(W,ie),ie+=3;le-- >0;)rr.push(0);break;case 18:for(le=11+X(W,ie),ie+=7;le-- >0;)rr.push(0);break;default:rr.push(kt),je<kt&&(je=kt);break}var Tr=rr.slice(0,ee),vr=rr.slice(ee);for(gt=ee;gt<286;++gt)Tr[gt]=0;for(gt=ne;gt<30;++gt)vr[gt]=0;return Ge=be(Tr,Dt,286),Lt=be(vr,Wr,30),ie}function Kt(W,ie){if(W[0]==3&&!(W[1]&3))return[Ju(ie),2];for(var ee=0,ne=0,oe=dE(ie||1<<18),le=0,De=oe.length>>>0,Te=0,je=0;!(ne&1);){if(ne=mt(W,ee),ee+=3,ne>>>1)ne>>1==1?(Te=9,je=5):(ee=mr(W,ee),Te=Ge,je=Lt);else{ee&7&&(ee+=8-(ee&7));var Me=W[ee>>>3]|W[(ee>>>3)+1]<<8;if(ee+=32,Me>0)for(!ie&&De<le+Me&&(oe=yt(oe,le+Me),De=oe.length);Me-- >0;)oe[le++]=W[ee>>>3],ee+=8;continue}for(;;){!ie&&De<le+32767&&(oe=yt(oe,le+32767),De=oe.length);var Oe=me(W,ee,Te),ht=ne>>>1==1?tt[Oe]:Dt[Oe];if(ee+=ht&15,ht>>>=4,!(ht>>>8&255))oe[le++]=ht;else{if(ht==256)break;ht-=257;var gt=ht<8?0:ht-4>>2;gt>5&&(gt=0);var kt=le+Z[ht];gt>0&&(kt+=me(W,ee,gt),ee+=gt),Oe=me(W,ee,je),ht=ne>>>1==1?ct[Oe]:Wr[Oe],ee+=ht&15,ht>>>=4;var pt=ht<4?0:ht-2>>1,Et=de[ht];for(pt>0&&(Et+=me(W,ee,pt),ee+=pt),!ie&&De<kt&&(oe=yt(oe,kt+100),De=oe.length);le<kt;)oe[le]=oe[le-Et],++le}}}return ie?[oe,ee+7>>>3]:[oe.slice(0,le),ee+7>>>3]}function Pr(W,ie){var ee=W.slice(W.l||0),ne=Kt(ee,ie);return W.l+=ne[1],ne[0]}function Qt(W,ie){if(W)typeof console<"u"&&console.error(ie);else throw new Error(ie)}function Zt(W,ie){var ee=W;va(ee,0);var ne=[],oe=[],le={FileIndex:ne,FullPaths:oe};E(le,{root:ie.root});for(var De=ee.length-4;(ee[De]!=80||ee[De+1]!=75||ee[De+2]!=5||ee[De+3]!=6)&&De>=0;)--De;ee.l=De+4,ee.l+=4;var Te=ee.read_shift(2);ee.l+=6;var je=ee.read_shift(4);for(ee.l=je,De=0;De<Te;++De){ee.l+=20;var Me=ee.read_shift(4),Oe=ee.read_shift(4),ht=ee.read_shift(2),gt=ee.read_shift(2),kt=ee.read_shift(2);ee.l+=8;var pt=ee.read_shift(4),Et=o(ee.slice(ee.l+ht,ee.l+ht+gt));ee.l+=ht+gt+kt;var rr=ee.l;ee.l=pt+4,qr(ee,Me,Oe,le,Et),ee.l=rr}return le}function qr(W,ie,ee,ne,oe){W.l+=2;var le=W.read_shift(2),De=W.read_shift(2),Te=a(W);if(le&8257)throw new Error("Unsupported ZIP encryption");for(var je=W.read_shift(4),Me=W.read_shift(4),Oe=W.read_shift(4),ht=W.read_shift(2),gt=W.read_shift(2),kt="",pt=0;pt<ht;++pt)kt+=String.fromCharCode(W[W.l++]);if(gt){var Et=o(W.slice(W.l,W.l+gt));(Et[21589]||{}).mt&&(Te=Et[21589].mt),((oe||{})[21589]||{}).mt&&(Te=oe[21589].mt)}W.l+=gt;var rr=W.slice(W.l,W.l+Me);switch(De){case 8:rr=O(W,Oe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+De)}var Tr=!1;le&8&&(je=W.read_shift(4),je==134695760&&(je=W.read_shift(4),Tr=!0),Me=W.read_shift(4),Oe=W.read_shift(4)),Me!=ie&&Qt(Tr,"Bad compressed size: "+ie+" != "+Me),Oe!=ee&&Qt(Tr,"Bad uncompressed size: "+ee+" != "+Oe),ln(ne,kt,rr,{unsafe:!0,mt:Te})}function Wt(W,ie){var ee=ie||{},ne=[],oe=[],le=Je(1),De=ee.compression?8:0,Te=0,je=0,Me=0,Oe=0,ht=0,gt=W.FullPaths[0],kt=gt,pt=W.FileIndex[0],Et=[],rr=0;for(je=1;je<W.FullPaths.length;++je)if(kt=W.FullPaths[je].slice(gt.length),pt=W.FileIndex[je],!(!pt.size||!pt.content||kt=="Sh33tJ5")){var Tr=Oe,vr=Je(kt.length);for(Me=0;Me<kt.length;++Me)vr.write_shift(1,kt.charCodeAt(Me)&127);vr=vr.slice(0,vr.l),Et[ht]=Y$.buf(pt.content,0);var nn=pt.content;De==8&&(nn=B(nn)),le=Je(30),le.write_shift(4,67324752),le.write_shift(2,20),le.write_shift(2,Te),le.write_shift(2,De),pt.mt?s(le,pt.mt):le.write_shift(4,0),le.write_shift(-4,Et[ht]),le.write_shift(4,nn.length),le.write_shift(4,pt.content.length),le.write_shift(2,vr.length),le.write_shift(2,0),Oe+=le.length,ne.push(le),Oe+=vr.length,ne.push(vr),Oe+=nn.length,ne.push(nn),le=Je(46),le.write_shift(4,33639248),le.write_shift(2,0),le.write_shift(2,20),le.write_shift(2,Te),le.write_shift(2,De),le.write_shift(4,0),le.write_shift(-4,Et[ht]),le.write_shift(4,nn.length),le.write_shift(4,pt.content.length),le.write_shift(2,vr.length),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(4,0),le.write_shift(4,Tr),rr+=le.l,oe.push(le),rr+=vr.length,oe.push(vr),++ht}return le=Je(22),le.write_shift(4,101010256),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(2,ht),le.write_shift(2,ht),le.write_shift(4,rr),le.write_shift(4,Oe),le.write_shift(2,0),ss([ss(ne),ss(oe),le])}var Ye={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Tt(W,ie){if(W.ctype)return W.ctype;var ee=W.name||"",ne=ee.match(/\.([^\.]+)$/);return ne&&Ye[ne[1]]||ie&&(ne=(ee=ie).match(/[\.\\]([^\.\\])+$/),ne&&Ye[ne[1]])?Ye[ne[1]]:"application/octet-stream"}function on(W){for(var ie=tp(W),ee=[],ne=0;ne<ie.length;ne+=76)ee.push(ie.slice(ne,ne+76));return ee.join(`\r
`)+`\r
`}function Sr(W){var ie=W.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Me){var Oe=Me.charCodeAt(0).toString(16).toUpperCase();return"="+(Oe.length==1?"0"+Oe:Oe)});ie=ie.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ie.charAt(0)==`
`&&(ie="=0D"+ie.slice(1)),ie=ie.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ee=[],ne=ie.split(`\r
`),oe=0;oe<ne.length;++oe){var le=ne[oe];if(le.length==0){ee.push("");continue}for(var De=0;De<le.length;){var Te=76,je=le.slice(De,De+Te);je.charAt(Te-1)=="="?Te--:je.charAt(Te-2)=="="?Te-=2:je.charAt(Te-3)=="="&&(Te-=3),je=le.slice(De,De+Te),De+=Te,De<le.length&&(je+="="),ee.push(je)}}return ee.join(`\r
`)}function yr(W){for(var ie=[],ee=0;ee<W.length;++ee){for(var ne=W[ee];ee<=W.length&&ne.charAt(ne.length-1)=="=";)ne=ne.slice(0,ne.length-1)+W[++ee];ie.push(ne)}for(var oe=0;oe<ie.length;++oe)ie[oe]=ie[oe].replace(/[=][0-9A-Fa-f]{2}/g,function(le){return String.fromCharCode(parseInt(le.slice(1),16))});return yo(ie.join(`\r
`))}function Fn(W,ie,ee){for(var ne="",oe="",le="",De,Te=0;Te<10;++Te){var je=ie[Te];if(!je||je.match(/^\s*$/))break;var Me=je.match(/^(.*?):\s*([^\s].*)$/);if(Me)switch(Me[1].toLowerCase()){case"content-location":ne=Me[2].trim();break;case"content-type":le=Me[2].trim();break;case"content-transfer-encoding":oe=Me[2].trim();break}}switch(++Te,oe.toLowerCase()){case"base64":De=yo(Ml(ie.slice(Te).join("")));break;case"quoted-printable":De=yr(ie.slice(Te));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+oe)}var Oe=ln(W,ne.slice(ee.length),De,{unsafe:!0});le&&(Oe.ctype=le)}function Jt(W,ie){if(_e(W.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ee=ie&&ie.root||"",ne=(tn&&Buffer.isBuffer(W)?W.toString("binary"):_e(W)).split(`\r
`),oe=0,le="";for(oe=0;oe<ne.length;++oe)if(le=ne[oe],!!/^Content-Location:/i.test(le)&&(le=le.slice(le.indexOf("file")),ee||(ee=le.slice(0,le.lastIndexOf("/")+1)),le.slice(0,ee.length)!=ee))for(;ee.length>0&&(ee=ee.slice(0,ee.length-1),ee=ee.slice(0,ee.lastIndexOf("/")+1),le.slice(0,ee.length)!=ee););var De=(ne[1]||"").match(/boundary="(.*?)"/);if(!De)throw new Error("MAD cannot find boundary");var Te="--"+(De[1]||""),je=[],Me=[],Oe={FileIndex:je,FullPaths:Me};E(Oe);var ht,gt=0;for(oe=0;oe<ne.length;++oe){var kt=ne[oe];kt!==Te&&kt!==Te+"--"||(gt++&&Fn(Oe,ne.slice(ht,oe),ee),ht=oe)}return Oe}function qn(W,ie){var ee=ie||{},ne=ee.boundary||"SheetJS";ne="------="+ne;for(var oe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ne.slice(2)+'"',"","",""],le=W.FullPaths[0],De=le,Te=W.FileIndex[0],je=1;je<W.FullPaths.length;++je)if(De=W.FullPaths[je].slice(le.length),Te=W.FileIndex[je],!(!Te.size||!Te.content||De=="Sh33tJ5")){De=De.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(rr){return"_x"+rr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(rr){return"_u"+rr.charCodeAt(0).toString(16)+"_"});for(var Me=Te.content,Oe=tn&&Buffer.isBuffer(Me)?Me.toString("binary"):_e(Me),ht=0,gt=Math.min(1024,Oe.length),kt=0,pt=0;pt<=gt;++pt)(kt=Oe.charCodeAt(pt))>=32&&kt<128&&++ht;var Et=ht>=gt*4/5;oe.push(ne),oe.push("Content-Location: "+(ee.root||"file:///C:/SheetJS/")+De),oe.push("Content-Transfer-Encoding: "+(Et?"quoted-printable":"base64")),oe.push("Content-Type: "+Tt(Te,De)),oe.push(""),oe.push(Et?Sr(Oe):on(Oe))}return oe.push(ne+`--\r
`),oe.join(`\r
`)}function rn(W){var ie={};return E(ie,W),ie}function ln(W,ie,ee,ne){var oe=ne&&ne.unsafe;oe||E(W);var le=!oe&&_n.find(W,ie);if(!le){var De=W.FullPaths[0];ie.slice(0,De.length)==De?De=ie:(De.slice(-1)!="/"&&(De+="/"),De=(De+ie).replace("//","/")),le={name:i(ie),type:2},W.FileIndex.push(le),W.FullPaths.push(De),oe||_n.utils.cfb_gc(W)}return le.content=ee,le.size=ee?ee.length:0,ne&&(ne.CLSID&&(le.clsid=ne.CLSID),ne.mt&&(le.mt=ne.mt),ne.ct&&(le.ct=ne.ct)),le}function kn(W,ie){E(W);var ee=_n.find(W,ie);if(ee){for(var ne=0;ne<W.FileIndex.length;++ne)if(W.FileIndex[ne]==ee)return W.FileIndex.splice(ne,1),W.FullPaths.splice(ne,1),!0}return!1}function Mr(W,ie,ee){E(W);var ne=_n.find(W,ie);if(ne){for(var oe=0;oe<W.FileIndex.length;++oe)if(W.FileIndex[oe]==ne)return W.FileIndex[oe].name=i(ee),W.FullPaths[oe]=ee,!0}return!1}function Zr(W){A(W,!0)}return e.find=N,e.read=G,e.parse=h,e.write=Ue,e.writeFile=he,e.utils={cfb_new:rn,cfb_add:ln,cfb_del:kn,cfb_mov:Mr,cfb_gc:Zr,ReadShift:y0,CheckField:K8,prep_blob:va,bconcat:ss,use_zlib:P,_deflateRaw:jt,_inflateRaw:Pr,consts:ye},e}();function X$(t){return typeof t=="string"?z2(t):Array.isArray(t)?b$(t):t}function Rp(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=z2(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?np(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var i=new Blob([X$(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=t,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Lp(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function hs(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function wE(t,e){for(var r=[],n=hs(t),i=0;i!==n.length;++i)r[t[n[i]][e]]==null&&(r[t[n[i]][e]]=n[i]);return r}function F_(t){for(var e=[],r=hs(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function $2(t){for(var e=[],r=hs(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function Q$(t){for(var e=[],r=hs(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var M1=new Date(1899,11,30,0,0,0);function na(t,e){var r=t.getTime(),n=M1.getTime()+(t.getTimezoneOffset()-M1.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var P8=new Date,J$=M1.getTime()+(P8.getTimezoneOffset()-M1.getTimezoneOffset())*6e4,_E=P8.getTimezoneOffset();function L8(t){var e=new Date;return e.setTime(t*24*60*60*1e3+J$),e.getTimezoneOffset()!==_E&&e.setTime(e.getTime()+(e.getTimezoneOffset()-_E)*6e4),e}var bE=new Date("2017-02-19T19:06:09.000Z"),R8=isNaN(bE.getFullYear())?new Date("2/19/17"):bE,Z$=R8.getFullYear()==2017;function zs(t,e){var r=new Date(t);if(Z$)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(R8.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function W2(t,e){if(tn&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],i=0;i!=t.length;++i)n.push(String.fromCharCode(t[i]));return n.join("")}function ia(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ia(t[r]));return e}function li(t,e){for(var r="";r.length<e;)r+=t;return r}function El(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var eW=["january","february","march","april","may","june","july","august","september","october","november","december"];function rp(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&eW.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}function Ir(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return tn?n=zl(r):n=S$(r),_n.utils.cfb_add(t,e,n)}_n.utils.cfb_add(t,e,r)}else t.file(e,r)}function D_(){return _n.utils.cfb_new()}var Li=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,tW={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},M_=F_(tW),O_=/[&<>'"]/g,rW=/[\u0000-\u0008\u000b-\u001f]/g;function xn(t){var e=t+"";return e.replace(O_,function(r){return M_[r]}).replace(rW,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function SE(t){return xn(t).replace(/ /g,"_x0020_")}var j8=/[\u0000-\u001f]/g;function nW(t){var e=t+"";return e.replace(O_,function(r){return M_[r]}).replace(/\n/g,"<br/>").replace(j8,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function iW(t){var e=t+"";return e.replace(O_,function(r){return M_[r]}).replace(j8,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function sW(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function aW(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Ry(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(i=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|s&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function AE(t){var e=Ju(2*t.length),r,n,i=1,s=0,a=0,o;for(n=0;n<t.length;n+=i)i=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),i=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),i=3):(i=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function EE(t){return zl(t,"binary").toString("utf8")}var Vm="foo bar baz",x0=tn&&(EE(Vm)==Ry(Vm)&&EE||AE(Vm)==Ry(Vm)&&AE)||Ry,np=tn?function(t){return zl(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,i=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},oW=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)n=n.replace(t[i][0],t[i][1]);return n}}(),F8=/(^\s|\s$|\n)/;function as(t,e){return"<"+t+(e.match(F8)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function ip(t){return hs(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Nt(t,e,r){return"<"+t+(r!=null?ip(r):"")+(e!=null?(e.match(F8)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Cw(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function lW(t,e){switch(typeof t){case"string":var r=Nt("vt:lpwstr",xn(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Nt((t|0)==t?"vt:i4":"vt:r8",xn(String(t)));case"boolean":return Nt("vt:bool",t?"true":"false")}if(t instanceof Date)return Nt("vt:filetime",Cw(t));throw new Error("Unable to serialize "+t)}var Wi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},rf=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],wa={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function cW(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function uW(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=n?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)t[r+o]=s&255;t[r+6]=(i&15)<<4|s&15,t[r+7]=i>>4|n}var NE=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var i=0,s=t[0][n].length;i<s;i+=r)e.push.apply(e,t[0][n].slice(i,i+r));return e},TE=tn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:zl(e)})):NE(t)}:NE,kE=function(t,e,r){for(var n=[],i=e;i<r;i+=2)n.push(String.fromCharCode(qf(t,i)));return n.join("").replace(g0,"")},B_=tn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(g0,""):kE(t,e,r)}:kE,CE=function(t,e,r){for(var n=[],i=e;i<e+r;++i)n.push(("0"+t[i].toString(16)).slice(-2));return n.join("")},D8=tn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):CE(t,e,r)}:CE,IE=function(t,e,r){for(var n=[],i=e;i<r;i++)n.push(String.fromCharCode(Ph(t,i)));return n.join("")},jp=tn?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):IE(e,r,n)}:IE,M8=function(t,e){var r=_a(t,e);return r>0?jp(t,e+4,e+4+r-1):""},O8=M8,B8=function(t,e){var r=_a(t,e);return r>0?jp(t,e+4,e+4+r-1):""},U8=B8,V8=function(t,e){var r=2*_a(t,e);return r>0?jp(t,e+4,e+4+r-1):""},z8=V8,H8=function(e,r){var n=_a(e,r);return n>0?B_(e,r+4,r+4+n):""},q8=H8,$8=function(t,e){var r=_a(t,e);return r>0?jp(t,e+4,e+4+r):""},W8=$8,G8=function(t,e){return cW(t,e)},O1=G8,U_=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};tn&&(O8=function(e,r){if(!Buffer.isBuffer(e))return M8(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},U8=function(e,r){if(!Buffer.isBuffer(e))return B8(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},z8=function(e,r){if(!Buffer.isBuffer(e))return V8(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},q8=function(e,r){if(!Buffer.isBuffer(e))return H8(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},W8=function(e,r){if(!Buffer.isBuffer(e))return $8(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},O1=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):G8(e,r)},U_=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Ph=function(t,e){return t[e]},qf=function(t,e){return t[e+1]*256+t[e]},hW=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},_a=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Nu=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},dW=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function y0(t,e){var r="",n,i,s=[],a,o,l,u;switch(e){case"dbcs":if(u=this.l,tn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(qf(this,u)),u+=2;t*=2;break;case"utf8":r=jp(this,this.l,this.l+t);break;case"utf16le":t*=2,r=B_(this,this.l,this.l+t);break;case"wstr":return y0.call(this,t,"dbcs");case"lpstr-ansi":r=O8(this,this.l),t=4+_a(this,this.l);break;case"lpstr-cp":r=U8(this,this.l),t=4+_a(this,this.l);break;case"lpwstr":r=z8(this,this.l),t=4+2*_a(this,this.l);break;case"lpp4":t=4+_a(this,this.l),r=q8(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+_a(this,this.l),r=W8(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=Ph(this,this.l+t++))!==0;)s.push(Om(a));r=s.join("");break;case"_wstr":for(t=0,r="";(a=qf(this,this.l+t))!==0;)s.push(Om(a)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=Ph(this,u),this.l=u+1,o=y0.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Om(qf(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=Ph(this,u),this.l=u+1,o=y0.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Om(Ph(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=Ph(this,this.l),this.l++,n;case 2:return n=(e==="i"?hW:qf)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?Nu:dW)(this,this.l),this.l+=4,n):(i=_a(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=O1(this,this.l):i=O1([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:r=D8(this,this.l,t);break}}return this.l+=t,r}var fW=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},pW=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},mW=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function gW(t,e,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=e.length;++i)mW(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(r==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,fW(this,e,this.l);break;case 8:if(n=8,r==="f"){uW(this,e,this.l);break}case 16:break;case-4:n=4,pW(this,e,this.l);break}return this.l+=n,this}function K8(t,e){var r=D8(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function va(t,e){t.l=e,t.read_shift=y0,t.chk=K8,t.write_shift=gW}function el(t,e){t.l+=e}function Je(t){var e=Ju(t);return va(e,0),e}function ra(){var t=[],e=tn?256:2048,r=function(u){var h=Je(u);return va(h,0),h},n=r(e),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(i(),n=r(Math.max(u+1,e)))},a=function(){return i(),ss(t)},o=function(u){i(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:a,_bufs:t}}function dt(t,e,r,n){var i=+e,s;if(!isNaN(i)){n||(n=cJ[i].p||(r||[]).length||0),s=1+(i>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var a=t.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&U_(r)&&t.push(r)}}function v0(t,e,r){var n=ia(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function PE(t,e,r){var n=ia(t);return n.s=v0(n.s,e.s,r),n.e=v0(n.e,e.s,r),n}function w0(t,e){if(t.cRel&&t.c<0)for(t=ia(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ia(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=vn(t);return!t.cRel&&t.cRel!=null&&(r=vW(r)),!t.rRel&&t.rRel!=null&&(r=xW(r)),r}function jy(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ks(t.s.c)+":"+(t.e.cRel?"":"$")+ks(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+ls(t.s.r)+":"+(t.e.rRel?"":"$")+ls(t.e.r):w0(t.s,e.biff)+":"+w0(t.e,e.biff)}function V_(t){return parseInt(yW(t),10)-1}function ls(t){return""+(t+1)}function xW(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function yW(t){return t.replace(/\$(\d+)$/,"$1")}function z_(t){for(var e=wW(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function ks(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function vW(t){return t.replace(/^([A-Z])/,"$$$1")}function wW(t){return t.replace(/^\$([A-Z])/,"$1")}function _W(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Gi(t){for(var e=0,r=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:e-1}}function vn(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Ia(t){var e=t.indexOf(":");return e==-1?{s:Gi(t),e:Gi(t)}:{s:Gi(t.slice(0,e)),e:Gi(t.slice(e+1))}}function Ii(t,e){return typeof e>"u"||typeof e=="number"?Ii(t.s,t.e):(typeof t!="string"&&(t=vn(t)),typeof e!="string"&&(e=vn(e)),t==e?t:t+":"+e)}function Vn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,s=t.length;for(r=0;n<s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.s.c=--r,r=0;n<s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(e.s.r=--r,n===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.e.c=--r,r=0;n!=s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return e.e.r=--r,e}function LE(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=iu(t.z,r?na(e):e)}catch{}try{return t.w=iu((t.XF||{}).numFmtId||(r?14:0),r?na(e):e)}catch{return""+e}}function Ol(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Fp[t.v]||t.v:e==null?LE(t,t.v):LE(t,e))}function oh(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function Y8(t,e,r){var n=r||{},i=t?Array.isArray(t):n.dense,s=t||(i?[]:{}),a=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Gi(n.origin):n.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var h=Vn(s["!ref"]);u.s.c=h.s.c,u.s.r=h.s.r,u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),a==-1&&(u.e.r=a=h.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=e[f].length;++p)if(!(typeof e[f][p]>"u")){var d={v:e[f][p]},v=a+f,y=o+p;if(u.s.r>v&&(u.s.r=v),u.s.c>y&&(u.s.c=y),u.e.r<v&&(u.e.r=v),u.e.c<y&&(u.e.c=y),e[f][p]&&typeof e[f][p]=="object"&&!Array.isArray(e[f][p])&&!(e[f][p]instanceof Date))d=e[f][p];else if(Array.isArray(d.v)&&(d.f=e[f][p][1],d.v=d.v[0]),d.v===null)if(d.f)d.t="n";else if(n.nullError)d.t="e",d.v=0;else if(n.sheetStubs)d.t="z";else continue;else typeof d.v=="number"?d.t="n":typeof d.v=="boolean"?d.t="b":d.v instanceof Date?(d.z=n.dateNF||ci[14],n.cellDates?(d.t="d",d.w=iu(d.z,na(d.v))):(d.t="n",d.v=na(d.v),d.w=iu(d.z,d.v))):d.t="s";if(i)s[v]||(s[v]=[]),s[v][y]&&s[v][y].z&&(d.z=s[v][y].z),s[v][y]=d;else{var _=vn({c:y,r:v});s[_]&&s[_].z&&(d.z=s[_].z),s[_]=d}}}return u.s.c<1e7&&(s["!ref"]=Ii(u)),s}function nf(t,e){return Y8(null,t,e)}function bW(t){return t.read_shift(4,"i")}function So(t,e){return e||(e=Je(4)),e.write_shift(4,t),e}function Cs(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Ki(t,e){var r=!1;return e==null&&(r=!0,e=Je(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function SW(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function AW(t,e){return e||(e=Je(4)),e.write_shift(2,0),e.write_shift(2,0),e}function H_(t,e){var r=t.l,n=t.read_shift(1),i=Cs(t),s=[],a={t:i,h:i};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)s.push(SW(t));a.r=s}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}function EW(t,e){var r=!1;return e==null&&(r=!0,e=Je(15+4*t.t.length)),e.write_shift(1,0),Ki(t.t,e),r?e.slice(0,e.l):e}var NW=H_;function TW(t,e){var r=!1;return e==null&&(r=!0,e=Je(23+4*t.t.length)),e.write_shift(1,1),Ki(t.t,e),e.write_shift(4,1),AW({},e),r?e.slice(0,e.l):e}function eo(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function lh(t,e){return e==null&&(e=Je(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function ch(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function uh(t,e){return e==null&&(e=Je(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var kW=Cs,X8=Ki;function q_(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function B1(t,e){var r=!1;return e==null&&(r=!0,e=Je(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var CW=Cs,Iw=q_,$_=B1;function Q8(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var i=n===0?O1([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Nu(e,0)>>2;return r?i/100:i}function J8(t,e){e==null&&(e=Je(4));var r=0,n=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?i:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Z8(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function IW(t,e){return e||(e=Je(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var hh=Z8,sf=IW;function af(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Zu(t,e){return(e||Je(8)).write_shift(8,t,"f")}function PW(t){var e={},r=t.read_shift(1),n=r>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var u=UW[i];u&&(e.rgb=HE(u));break;case 2:e.rgb=HE([a,o,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function U1(t,e){if(e||(e=Je(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function LW(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function RW(t,e){e||(e=Je(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}var eP=2,xa=3,zm=11,V1=19,Hm=64,jW=65,FW=71,DW=4108,MW=4126,rs=80,RE={1:{n:"CodePage",t:eP},2:{n:"Category",t:rs},3:{n:"PresentationFormat",t:rs},4:{n:"ByteCount",t:xa},5:{n:"LineCount",t:xa},6:{n:"ParagraphCount",t:xa},7:{n:"SlideCount",t:xa},8:{n:"NoteCount",t:xa},9:{n:"HiddenCount",t:xa},10:{n:"MultimediaClipCount",t:xa},11:{n:"ScaleCrop",t:zm},12:{n:"HeadingPairs",t:DW},13:{n:"TitlesOfParts",t:MW},14:{n:"Manager",t:rs},15:{n:"Company",t:rs},16:{n:"LinksUpToDate",t:zm},17:{n:"CharacterCount",t:xa},19:{n:"SharedDoc",t:zm},22:{n:"HyperlinksChanged",t:zm},23:{n:"AppVersion",t:xa,p:"version"},24:{n:"DigSig",t:jW},26:{n:"ContentType",t:rs},27:{n:"ContentStatus",t:rs},28:{n:"Language",t:rs},29:{n:"Version",t:rs},255:{},2147483648:{n:"Locale",t:V1},2147483651:{n:"Behavior",t:V1},1919054434:{}},jE={1:{n:"CodePage",t:eP},2:{n:"Title",t:rs},3:{n:"Subject",t:rs},4:{n:"Author",t:rs},5:{n:"Keywords",t:rs},6:{n:"Comments",t:rs},7:{n:"Template",t:rs},8:{n:"LastAuthor",t:rs},9:{n:"RevNumber",t:rs},10:{n:"EditTime",t:Hm},11:{n:"LastPrinted",t:Hm},12:{n:"CreatedDate",t:Hm},13:{n:"ModifiedDate",t:Hm},14:{n:"PageCount",t:xa},15:{n:"WordCount",t:xa},16:{n:"CharCount",t:xa},17:{n:"Thumbnail",t:FW},18:{n:"Application",t:rs},19:{n:"DocSecurity",t:xa},255:{},2147483648:{n:"Locale",t:V1},2147483651:{n:"Behavior",t:V1},1919054434:{}};function OW(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var BW=OW([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),UW=ia(BW),Fp={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},VW={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},qm={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function tP(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function rP(t,e){var r=Q$(VW),n=[],i;n[n.length]=Li,n[n.length]=Nt("Types",null,{xmlns:Wi.CT,"xmlns:xsd":Wi.xsd,"xmlns:xsi":Wi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Nt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(i=t[l][0],n[n.length]=Nt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:qm[l][e.bookType]||qm[l].xlsx}))},a=function(l){(t[l]||[]).forEach(function(u){n[n.length]=Nt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:qm[l][e.bookType]||qm[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(u){n[n.length]=Nt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var en={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function nP(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function vd(t){var e=[Li,Nt("Relationships",null,{xmlns:Wi.RELS})];return hs(t["!id"]).forEach(function(r){e[e.length]=Nt("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function mn(t,e,r,n,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=n,i.Target=r,[en.HLINK,en.XPATH,en.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}function zW(t){var e=[Li];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function FE(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function HW(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function qW(t){var e=[Li];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(FE(t[r][0],t[r][1])),e.push(HW("",t[r][0]));return e.push(FE("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function iP(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+L1.version+"</meta:generator></office:meta></office:document-meta>"}var Ou=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Fy(t,e,r,n,i){i[t]!=null||e==null||e===""||(i[t]=e,e=xn(e),n[n.length]=r?Nt(t,e,r):as(t,e))}function sP(t,e){var r=e||{},n=[Li,Nt("cp:coreProperties",null,{"xmlns:cp":Wi.CORE_PROPS,"xmlns:dc":Wi.dc,"xmlns:dcterms":Wi.dcterms,"xmlns:dcmitype":Wi.dcmitype,"xmlns:xsi":Wi.xsi})],i={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&Fy("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:Cw(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),t.ModifiedDate!=null&&Fy("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:Cw(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var s=0;s!=Ou.length;++s){var a=Ou[s],o=r.Props&&r.Props[a[1]]!=null?r.Props[a[1]]:t?t[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&Fy(a[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var wd=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],aP=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function oP(t){var e=[],r=Nt;return t||(t={}),t.Application="SheetJS",e[e.length]=Li,e[e.length]=Nt("Properties",null,{xmlns:Wi.EXT_PROPS,"xmlns:vt":Wi.vt}),wd.forEach(function(n){if(t[n[1]]!==void 0){var i;switch(n[2]){case"string":i=xn(String(t[n[1]]));break;case"bool":i=t[n[1]]?"true":"false";break}i!==void 0&&(e[e.length]=r(n[0],i))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+xn(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function lP(t){var e=[Li,Nt("Properties",null,{xmlns:Wi.CUST_PROPS,"xmlns:vt":Wi.vt})];if(!t)return e.join("");var r=1;return hs(t).forEach(function(i){++r,e[e.length]=Nt("property",lW(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:xn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var DE={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function $W(t,e){var r=[];return hs(DE).map(function(n){for(var i=0;i<Ou.length;++i)if(Ou[i][1]==n)return Ou[i];for(i=0;i<wd.length;++i)if(wd[i][1]==n)return wd[i];throw n}).forEach(function(n){if(t[n[1]]!=null){var i=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(as(DE[n[1]]||n[1],i))}}),Nt("DocumentProperties",r.join(""),{xmlns:wa.o})}function WW(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return t&&hs(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var a=0;a<Ou.length;++a)if(s==Ou[a][1])return;for(a=0;a<wd.length;++a)if(s==wd[a][1])return;for(a=0;a<r.length;++a)if(s==r[a])return;var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(Nt(SE(s),o,{"dt:dt":l}))}}),e&&hs(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(Nt(SE(s),a,{"dt:dt":o}))}}),"<"+n+' xmlns="'+wa.o+'">'+i.join("")+"</"+n+">"}function GW(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),i=(r-n)/Math.pow(2,32);n*=1e7,i*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),i+=s);var a=Je(8);return a.write_shift(4,n),a.write_shift(4,i),a}function ME(t,e){var r=Je(4),n=Je(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Je(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=GW(e);break;case 31:case 80:for(n=Je(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return ss([r,n])}var cP=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function KW(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function OE(t,e,r){var n=Je(8),i=[],s=[],a=8,o=0,l=Je(8),u=Je(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),i.push(u),a+=8+l.length,!e){u=Je(8),u.write_shift(4,0),i.unshift(u);var h=[Je(4)];for(h[0].write_shift(4,t.length),o=0;o<t.length;++o){var f=t[o][0];for(l=Je(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);h.push(l)}l=ss(h),s.unshift(l),a+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(cP.indexOf(t[o][0])>-1||aP.indexOf(t[o][0])>-1)&&t[o][1]!=null){var p=t[o][1],d=0;if(e){d=+e[t[o][0]];var v=r[d];if(v.p=="version"&&typeof p=="string"){var y=p.split(".");p=(+y[0]<<16)+(+y[1]||0)}l=ME(v.t,p)}else{var _=KW(p);_==-1&&(_=31,p=String(p)),l=ME(_,p)}s.push(l),u=Je(8),u.write_shift(4,e?d:2+o),i.push(u),a+=8+l.length}var w=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,w),w+=s[o].length;return n.write_shift(4,a),n.write_shift(4,s.length),ss([n].concat(i).concat(s))}function BE(t,e,r,n,i,s){var a=Je(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,_n.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var l=OE(t,r,n);if(o.push(l),i){var u=OE(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(u)}return ss(o)}function YW(t,e){e||(e=Je(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function XW(t,e){return t.read_shift(e)===1}function Bs(t,e){return e||(e=Je(2)),e.write_shift(2,+!!t),e}function uP(t){return t.read_shift(2,"u")}function $a(t,e){return e||(e=Je(2)),e.write_shift(2,t),e}function hP(t,e,r){return r||(r=Je(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function dP(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var a=n?t.read_shift(n,i):"";return a}function QW(t){var e=t.t||"",r=Je(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Je(2*e.length);n.write_shift(2*e.length,e,"utf16le");var i=[r,n];return ss(i)}function JW(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function ZW(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):JW(t,n,r)}function eG(t,e,r){if(r.biff>5)return ZW(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function fP(t,e,r){return r||(r=Je(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function UE(t,e){e||(e=Je(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function tG(t){var e=Je(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),s=i>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(r=0;r<a.length;++r)e.write_shift(4,a[r]);if(s==28)n=n.slice(1),UE(n,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));var o=i>-1?n.slice(0,i):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),s&8&&UE(i>-1?n.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function eh(t,e,r,n){return n||(n=Je(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function rG(t,e,r){var n=r.biff>8?4:2,i=t.read_shift(n),s=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[i,s,a]}function nG(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);return{s:{c:n,r:e},e:{c:i,r}}}function pP(t,e){return e||(e=Je(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function W_(t,e,r){var n=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Je(i);return s.write_shift(2,n),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function iG(t,e){var r=!e||e.biff==8,n=Je(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function sG(t,e){var r=!e||e.biff>=8?2:1,n=Je(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function aG(t,e){var r=Je(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],i=0;i<t.length;++i)n[i]=QW(t[i]);var s=ss([r].concat(n));return s.parts=[r.length].concat(n.map(function(a){return a.length})),s}function oG(){var t=Je(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function lG(t){var e=Je(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function cG(t,e){var r=t.name||"Arial",n=e&&e.biff==5,i=n?15+r.length:16+2*r.length,s=Je(i);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function uG(t,e,r,n){var i=Je(10);return eh(t,e,n,i),i.write_shift(4,r),i}function hG(t,e,r,n,i){var s=!i||i.biff==8,a=Je(8+ +s+(1+s)*r.length);return eh(t,e,n,a),a.write_shift(2,r.length),s&&a.write_shift(1,1),a.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),a}function dG(t,e,r,n){var i=r&&r.biff==5;n||(n=Je(i?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(i?1:2,e.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}function fG(t,e){var r=e.biff==8||!e.biff?4:2,n=Je(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function VE(t,e,r,n){var i=r&&r.biff==5;n||(n=Je(i?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function pG(t){var e=Je(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function mG(t,e,r,n,i,s){var a=Je(8);return eh(t,e,n,a),hP(r,s,a),a}function gG(t,e,r,n){var i=Je(14);return eh(t,e,n,i),Zu(r,i),i}function xG(t,e,r){if(r.biff<8)return yG(t,e,r);for(var n=[],i=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(rG(t,r.biff>8?12:6,r));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return n}function yG(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=dP(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function vG(t){var e=Je(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)pP(t[r],e);return e}function wG(t){var e=Je(24),r=Gi(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(n[i],16));return ss([e,tG(t[1])])}function _G(t){var e=t[1].Tooltip,r=Je(10+2*(e.length+1));r.write_shift(2,2048);var n=Gi(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<e.length;++i)r.write_shift(2,e.charCodeAt(i));return r.write_shift(2,0),r}function bG(t){return t||(t=Je(4)),t.write_shift(2,1),t.write_shift(2,1),t}function SG(t,e,r){if(!r.cellStyles)return el(t,e);var n=r&&r.biff>=12?4:2,i=t.read_shift(n),s=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function AG(t,e){var r=Je(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function EG(t){for(var e=Je(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}function NG(t,e,r){var n=Je(15);return Mp(n,t,e),n.write_shift(8,r,"f"),n}function TG(t,e,r){var n=Je(9);return Mp(n,t,e),n.write_shift(2,r),n}var kG=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=F_({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],h=Ju(1);switch(l.type){case"base64":h=yo(Ml(o));break;case"binary":h=yo(o);break;case"buffer":case"array":h=o;break}va(h,0);var f=h.read_shift(1),p=!!(f&136),d=!1,v=!1;switch(f){case 2:break;case 3:break;case 48:d=!0,p=!0;break;case 49:d=!0,p=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var y=0,_=521;f==2&&(y=h.read_shift(2)),h.l+=3,f!=2&&(y=h.read_shift(4)),y>1048576&&(y=1e6),f!=2&&(_=h.read_shift(2));var w=h.read_shift(2),S=l.codepage||1252;f!=2&&(h.l+=16,h.read_shift(1),h[h.l]!==0&&(S=t[h[h.l]]),h.l+=1,h.l+=2),v&&(h.l+=36);for(var C=[],j={},q=Math.min(h.length,f==2?521:_-10-(d?264:0)),G=v?32:11;h.l<q&&h[h.l]!=13;)switch(j={},j.name=R1.utils.decode(S,h.slice(h.l,h.l+G)).replace(/[\u0000\r\n].*$/g,""),h.l+=G,j.type=String.fromCharCode(h.read_shift(1)),f!=2&&!v&&(j.offset=h.read_shift(4)),j.len=h.read_shift(1),f==2&&(j.offset=h.read_shift(2)),j.dec=h.read_shift(1),j.name.length&&C.push(j),f!=2&&(h.l+=v?13:14),j.type){case"B":(!d||j.len!=8)&&l.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+j.type)}if(h[h.l]!==13&&(h.l=_-1),h.read_shift(1)!==13)throw new Error("DBF Terminator not found "+h.l+" "+h[h.l]);h.l=_;var E=0,k=0;for(u[0]=[],k=0;k!=C.length;++k)u[0][k]=C[k].name;for(;y-- >0;){if(h[h.l]===42){h.l+=w;continue}for(++h.l,u[++E]=[],k=0,k=0;k!=C.length;++k){var A=h.slice(h.l,h.l+C[k].len);h.l+=C[k].len,va(A,0);var D=R1.utils.decode(S,A);switch(C[k].type){case"C":D.trim().length&&(u[E][k]=D.replace(/\s+$/,""));break;case"D":D.length===8?u[E][k]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):u[E][k]=D;break;case"F":u[E][k]=parseFloat(D.trim());break;case"+":case"I":u[E][k]=v?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":u[E][k]=!0;break;case"N":case"F":u[E][k]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[E][k]="##MEMO##"+(v?parseInt(D.trim(),10):A.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(u[E][k]=+D||0);break;case"@":u[E][k]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":u[E][k]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":u[E][k]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][k]=-A.read_shift(-8,"f");break;case"B":if(d&&C[k].len==8){u[E][k]=A.read_shift(8,"f");break}case"G":case"P":A.l+=C[k].len;break;case"0":if(C[k].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+C[k].type)}}}if(f!=2&&h.l<h.length&&h[h.l++]!=26)throw new Error("DBF EOF Marker missing "+(h.l-1)+" of "+h.length+" "+h[h.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=C,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var h=nf(r(o,u),u);return h["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,h}function i(o,l){try{return oh(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var u=l||{};if(+u.codepage>=0&&ep(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var h=ra(),f=W1(o,{header:1,raw:!0,cellDates:!0}),p=f[0],d=f.slice(1),v=o["!cols"]||[],y=0,_=0,w=0,S=1;for(y=0;y<p.length;++y){if(((v[y]||{}).DBF||{}).name){p[y]=v[y].DBF.name,++w;continue}if(p[y]!=null){if(++w,typeof p[y]=="number"&&(p[y]=p[y].toString(10)),typeof p[y]!="string")throw new Error("DBF Invalid column name "+p[y]+" |"+typeof p[y]+"|");if(p.indexOf(p[y])!==y){for(_=0;_<1024;++_)if(p.indexOf(p[y]+"_"+_)==-1){p[y]+="_"+_;break}}}}var C=Vn(o["!ref"]),j=[],q=[],G=[];for(y=0;y<=C.e.c-C.s.c;++y){var E="",k="",A=0,D=[];for(_=0;_<d.length;++_)d[_][y]!=null&&D.push(d[_][y]);if(D.length==0||p[y]==null){j[y]="?";continue}for(_=0;_<D.length;++_){switch(typeof D[_]){case"number":k="B";break;case"string":k="C";break;case"boolean":k="L";break;case"object":k=D[_]instanceof Date?"D":"C";break;default:k="C"}A=Math.max(A,String(D[_]).length),E=E&&E!=k?"C":k}A>250&&(A=250),k=((v[y]||{}).DBF||{}).type,k=="C"&&v[y].DBF.len>A&&(A=v[y].DBF.len),E=="B"&&k=="N"&&(E="N",G[y]=v[y].DBF.dec,A=v[y].DBF.len),q[y]=E=="C"||k=="N"?A:s[E]||0,S+=q[y],j[y]=E}var N=h.next(32);for(N.write_shift(4,318902576),N.write_shift(4,d.length),N.write_shift(2,296+32*w),N.write_shift(2,S),y=0;y<4;++y)N.write_shift(4,0);for(N.write_shift(4,0|(+e[g8]||3)<<8),y=0,_=0;y<p.length;++y)if(p[y]!=null){var R=h.next(32),L=(p[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);R.write_shift(1,L,"sbcs"),R.write_shift(1,j[y]=="?"?"C":j[y],"sbcs"),R.write_shift(4,_),R.write_shift(1,q[y]||s[j[y]]||0),R.write_shift(1,G[y]||0),R.write_shift(1,2),R.write_shift(4,0),R.write_shift(1,0),R.write_shift(4,0),R.write_shift(4,0),_+=q[y]||s[j[y]]||0}var se=h.next(264);for(se.write_shift(4,13),y=0;y<65;++y)se.write_shift(4,0);for(y=0;y<d.length;++y){var ge=h.next(S);for(ge.write_shift(1,0),_=0;_<p.length;++_)if(p[_]!=null)switch(j[_]){case"L":ge.write_shift(1,d[y][_]==null?63:d[y][_]?84:70);break;case"B":ge.write_shift(8,d[y][_]||0,"f");break;case"N":var ve="0";for(typeof d[y][_]=="number"&&(ve=d[y][_].toFixed(G[_]||0)),w=0;w<q[_]-ve.length;++w)ge.write_shift(1,32);ge.write_shift(1,ve,"sbcs");break;case"D":d[y][_]?(ge.write_shift(4,("0000"+d[y][_].getFullYear()).slice(-4),"sbcs"),ge.write_shift(2,("00"+(d[y][_].getMonth()+1)).slice(-2),"sbcs"),ge.write_shift(2,("00"+d[y][_].getDate()).slice(-2),"sbcs")):ge.write_shift(8,"00000000","sbcs");break;case"C":var ye=String(d[y][_]!=null?d[y][_]:"").slice(0,q[_]);for(ge.write_shift(1,ye,"sbcs"),w=0;w<q[_]-ye.length;++w)ge.write_shift(1,32);break}}return h.next(1).write_shift(1,26),h.end()}return{to_workbook:i,to_sheet:n,from_sheet:a}}(),CG=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+hs(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,d){var v=t[d];return typeof v=="number"?hE(v):v},n=function(p,d,v){var y=d.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return y==59?p:hE(y)};t["|"]=254;function i(p,d){switch(d.type){case"base64":return s(Ml(p),d);case"binary":return s(p,d);case"buffer":return s(tn&&Buffer.isBuffer(p)?p.toString("binary"):Lp(p),d);case"array":return s(W2(p),d)}throw new Error("Unrecognized type "+d.type)}function s(p,d){var v=p.split(/[\n\r]+/),y=-1,_=-1,w=0,S=0,C=[],j=[],q=null,G={},E=[],k=[],A=[],D=0,N;for(+d.codepage>=0&&ep(+d.codepage);w!==v.length;++w){D=0;var R=v[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),L=R.replace(/;;/g,"\0").split(";").map(function(z){return z.replace(/\u0000/g,";")}),se=L[0],ge;if(R.length>0)switch(se){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":L[1].charAt(0)=="P"&&j.push(R.slice(3).replace(/;;/g,";"));break;case"C":var ve=!1,ye=!1,he=!1,_e=!1,Ue=-1,Ie=-1;for(S=1;S<L.length;++S)switch(L[S].charAt(0)){case"A":break;case"X":_=parseInt(L[S].slice(1))-1,ye=!0;break;case"Y":for(y=parseInt(L[S].slice(1))-1,ye||(_=0),N=C.length;N<=y;++N)C[N]=[];break;case"K":ge=L[S].slice(1),ge.charAt(0)==='"'?ge=ge.slice(1,ge.length-1):ge==="TRUE"?ge=!0:ge==="FALSE"?ge=!1:isNaN(El(ge))?isNaN(rp(ge).getDate())||(ge=zs(ge)):(ge=El(ge),q!==null&&k8(q)&&(ge=L8(ge))),ve=!0;break;case"E":_e=!0;var P=TK(L[S].slice(1),{r:y,c:_});C[y][_]=[C[y][_],P];break;case"S":he=!0,C[y][_]=[C[y][_],"S5S"];break;case"G":break;case"R":Ue=parseInt(L[S].slice(1))-1;break;case"C":Ie=parseInt(L[S].slice(1))-1;break;default:if(d&&d.WTF)throw new Error("SYLK bad record "+R)}if(ve&&(C[y][_]&&C[y][_].length==2?C[y][_][0]=ge:C[y][_]=ge,q=null),he){if(_e)throw new Error("SYLK shared formula cannot have own formula");var O=Ue>-1&&C[Ue][Ie];if(!O||!O[1])throw new Error("SYLK shared formula cannot find base");C[y][_][1]=kK(O[1],{r:y-Ue,c:_-Ie})}break;case"F":var B=0;for(S=1;S<L.length;++S)switch(L[S].charAt(0)){case"X":_=parseInt(L[S].slice(1))-1,++B;break;case"Y":for(y=parseInt(L[S].slice(1))-1,N=C.length;N<=y;++N)C[N]=[];break;case"M":D=parseInt(L[S].slice(1))/20;break;case"F":break;case"G":break;case"P":q=j[parseInt(L[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=L[S].slice(1).split(" "),N=parseInt(A[0],10);N<=parseInt(A[1],10);++N)D=parseInt(A[2],10),k[N-1]=D===0?{hidden:!0}:{wch:D},G_(k[N-1]);break;case"C":_=parseInt(L[S].slice(1))-1,k[_]||(k[_]={});break;case"R":y=parseInt(L[S].slice(1))-1,E[y]||(E[y]={}),D>0?(E[y].hpt=D,E[y].hpx=vP(D)):D===0&&(E[y].hidden=!0);break;default:if(d&&d.WTF)throw new Error("SYLK bad record "+R)}B<1&&(q=null);break;default:if(d&&d.WTF)throw new Error("SYLK bad record "+R)}}return E.length>0&&(G["!rows"]=E),k.length>0&&(G["!cols"]=k),d&&d.sheetRows&&(C=C.slice(0,d.sheetRows)),[C,G]}function a(p,d){var v=i(p,d),y=v[0],_=v[1],w=nf(y,d);return hs(_).forEach(function(S){w[S]=_[S]}),w}function o(p,d){return oh(a(p,d),d)}function l(p,d,v,y){var _="C;Y"+(v+1)+";X"+(y+1)+";K";switch(p.t){case"n":_+=p.v||0,p.f&&!p.F&&(_+=";E"+Y_(p.f,{r:v,c:y}));break;case"b":_+=p.v?"TRUE":"FALSE";break;case"e":_+=p.w||p.v;break;case"d":_+='"'+(p.w||p.v)+'"';break;case"s":_+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return _}function u(p,d){d.forEach(function(v,y){var _="F;W"+(y+1)+" "+(y+1)+" ";v.hidden?_+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=z1(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=H1(v.wpx)),typeof v.wch=="number"&&(_+=Math.round(v.wch))),_.charAt(_.length-1)!=" "&&p.push(_)})}function h(p,d){d.forEach(function(v,y){var _="F;";v.hidden?_+="M0;":v.hpt?_+="M"+20*v.hpt+";":v.hpx&&(_+="M"+20*q1(v.hpx)+";"),_.length>2&&p.push(_+"R"+(y+1))})}function f(p,d){var v=["ID;PWXL;N;E"],y=[],_=Vn(p["!ref"]),w,S=Array.isArray(p),C=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),p["!cols"]&&u(v,p["!cols"]),p["!rows"]&&h(v,p["!rows"]),v.push("B;Y"+(_.e.r-_.s.r+1)+";X"+(_.e.c-_.s.c+1)+";D"+[_.s.c,_.s.r,_.e.c,_.e.r].join(" "));for(var j=_.s.r;j<=_.e.r;++j)for(var q=_.s.c;q<=_.e.c;++q){var G=vn({r:j,c:q});w=S?(p[j]||[])[q]:p[G],!(!w||w.v==null&&(!w.f||w.F))&&y.push(l(w,p,j,q))}return v.join(C)+C+y.join(C)+C+"E"+C}return{to_workbook:o,to_sheet:a,from_sheet:f}}(),IG=function(){function t(s,a){switch(a.type){case"base64":return e(Ml(s),a);case"binary":return e(s,a);case"buffer":return e(tn&&Buffer.isBuffer(s)?s.toString("binary"):Lp(s),a);case"array":return e(W2(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),l=-1,u=-1,h=0,f=[];h!==o.length;++h){if(o[h].trim()==="BOT"){f[++l]=[],u=0;continue}if(!(l<0)){var p=o[h].trim().split(","),d=p[0],v=p[1];++h;for(var y=o[h]||"";(y.match(/["]/g)||[]).length&1&&h<o.length-1;)y+=`
`+o[++h];switch(y=y.trim(),+d){case-1:if(y==="BOT"){f[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?f[l][u]=!0:y==="FALSE"?f[l][u]=!1:isNaN(El(v))?isNaN(rp(v).getDate())?f[l][u]=v:f[l][u]=zs(v):f[l][u]=El(v),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),f[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return a&&a.sheetRows&&(f=f.slice(0,a.sheetRows)),f}function r(s,a){return nf(t(s,a),a)}function n(s,a){return oh(r(s,a),a)}var i=function(){var s=function(l,u,h,f,p){l.push(u),l.push(h+","+f),l.push('"'+p.replace(/"/g,'""')+'"')},a=function(l,u,h,f){l.push(u+","+h),l.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var u=[],h=Vn(l["!ref"]),f,p=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,h.e.r-h.s.r+1,""),s(u,"TUPLES",0,h.e.c-h.s.c+1,""),s(u,"DATA",0,0,"");for(var d=h.s.r;d<=h.e.r;++d){a(u,-1,0,"BOT");for(var v=h.s.c;v<=h.e.c;++v){var y=vn({r:d,c:v});if(f=p?(l[d]||[])[v]:l[y],!f){a(u,1,0,"");continue}switch(f.t){case"n":var _=f.w;!_&&f.v!=null&&(_=f.v),_==null?f.f&&!f.F?a(u,1,0,"="+f.f):a(u,1,0,""):a(u,0,_,"V");break;case"b":a(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=iu(f.z||ci[14],na(zs(f.v)))),a(u,0,f.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var w=`\r
`,S=u.join(w);return S}}();return{to_workbook:n,to_sheet:r,from_sheet:i}}(),mP=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,p){for(var d=f.split(`
`),v=-1,y=-1,_=0,w=[];_!==d.length;++_){var S=d[_].trim().split(":");if(S[0]==="cell"){var C=Gi(S[1]);if(w.length<=C.r)for(v=w.length;v<=C.r;++v)w[v]||(w[v]=[]);switch(v=C.r,y=C.c,S[2]){case"t":w[v][y]=t(S[3]);break;case"v":w[v][y]=+S[3];break;case"vtf":var j=S[S.length-1];case"vtc":switch(S[3]){case"nl":w[v][y]=!!+S[4];break;default:w[v][y]=+S[4];break}S[2]=="vtf"&&(w[v][y]=[w[v][y],j])}}}return p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),w}function n(f,p){return nf(r(f,p),p)}function i(f,p){return oh(n(f,p),p)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var p=[],d=[],v,y="",_=Ia(f["!ref"]),w=Array.isArray(f),S=_.s.r;S<=_.e.r;++S)for(var C=_.s.c;C<=_.e.c;++C)if(y=vn({r:S,c:C}),v=w?(f[S]||[])[C]:f[y],!(!v||v.v==null||v.t==="z")){switch(d=["cell",y,"t"],v.t){case"s":case"str":d.push(e(v.v));break;case"n":v.f?(d[2]="vtf",d[3]="n",d[4]=v.v,d[5]=e(v.f)):(d[2]="v",d[3]=v.v);break;case"b":d[2]="vt"+(v.f?"f":"c"),d[3]="nl",d[4]=v.v?"1":"0",d[5]=e(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var j=na(zs(v.v));d[2]="vtc",d[3]="nd",d[4]=""+j,d[5]=v.w||iu(v.z||ci[14],j);break;case"e":continue}p.push(d.join(":"))}return p.push("sheet:c:"+(_.e.c-_.s.c+1)+":r:"+(_.e.r-_.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function h(f){return[s,a,o,a,u(f),l].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:h}}(),PG=function(){function t(h,f,p,d,v){v.raw?f[p][d]=h:h===""||(h==="TRUE"?f[p][d]=!0:h==="FALSE"?f[p][d]=!1:isNaN(El(h))?isNaN(rp(h).getDate())?f[p][d]=h:f[p][d]=zs(h):f[p][d]=El(h))}function e(h,f){var p=f||{},d=[];if(!h||h.length===0)return d;for(var v=h.split(/[\r\n]/),y=v.length-1;y>=0&&v[y].length===0;)--y;for(var _=10,w=0,S=0;S<=y;++S)w=v[S].indexOf(" "),w==-1?w=v[S].length:w++,_=Math.max(_,w);for(S=0;S<=y;++S){d[S]=[];var C=0;for(t(v[S].slice(0,_).trim(),d,S,C,p),C=1;C<=(v[S].length-_)/10+1;++C)t(v[S].slice(_+(C-1)*10,_+C*10).trim(),d,S,C,p)}return p.sheetRows&&(d=d.slice(0,p.sheetRows)),d}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(h){for(var f={},p=!1,d=0,v=0;d<h.length;++d)(v=h.charCodeAt(d))==34?p=!p:!p&&v in r&&(f[v]=(f[v]||0)+1);v=[];for(d in f)Object.prototype.hasOwnProperty.call(f,d)&&v.push([f[d],d]);if(!v.length){f=n;for(d in f)Object.prototype.hasOwnProperty.call(f,d)&&v.push([f[d],d])}return v.sort(function(y,_){return y[0]-_[0]||n[y[1]]-n[_[1]]}),r[v.pop()[1]]||44}function s(h,f){var p=f||{},d="",v=p.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};h.slice(0,4)=="sep="?h.charCodeAt(5)==13&&h.charCodeAt(6)==10?(d=h.charAt(4),h=h.slice(7)):h.charCodeAt(5)==13||h.charCodeAt(5)==10?(d=h.charAt(4),h=h.slice(6)):d=i(h.slice(0,1024)):p&&p.FS?d=p.FS:d=i(h.slice(0,1024));var _=0,w=0,S=0,C=0,j=0,q=d.charCodeAt(0),G=!1,E=0,k=h.charCodeAt(0);h=h.replace(/\r\n/mg,`
`);var A=p.dateNF!=null?G$(p.dateNF):null;function D(){var N=h.slice(C,j),R={};if(N.charAt(0)=='"'&&N.charAt(N.length-1)=='"'&&(N=N.slice(1,-1).replace(/""/g,'"')),N.length===0)R.t="z";else if(p.raw)R.t="s",R.v=N;else if(N.trim().length===0)R.t="s",R.v=N;else if(N.charCodeAt(0)==61)N.charCodeAt(1)==34&&N.charCodeAt(N.length-1)==34?(R.t="s",R.v=N.slice(2,-1).replace(/""/g,'"')):CK(N)?(R.t="n",R.f=N.slice(1)):(R.t="s",R.v=N);else if(N=="TRUE")R.t="b",R.v=!0;else if(N=="FALSE")R.t="b",R.v=!1;else if(!isNaN(S=El(N)))R.t="n",p.cellText!==!1&&(R.w=N),R.v=S;else if(!isNaN(rp(N).getDate())||A&&N.match(A)){R.z=p.dateNF||ci[14];var L=0;A&&N.match(A)&&(N=K$(N,p.dateNF,N.match(A)||[]),L=1),p.cellDates?(R.t="d",R.v=zs(N,L)):(R.t="n",R.v=na(zs(N,L))),p.cellText!==!1&&(R.w=iu(R.z,R.v instanceof Date?na(R.v):R.v)),p.cellNF||delete R.z}else R.t="s",R.v=N;if(R.t=="z"||(p.dense?(v[_]||(v[_]=[]),v[_][w]=R):v[vn({c:w,r:_})]=R),C=j+1,k=h.charCodeAt(C),y.e.c<w&&(y.e.c=w),y.e.r<_&&(y.e.r=_),E==q)++w;else if(w=0,++_,p.sheetRows&&p.sheetRows<=_)return!0}e:for(;j<h.length;++j)switch(E=h.charCodeAt(j)){case 34:k===34&&(G=!G);break;case q:case 10:case 13:if(!G&&D())break e;break}return j-C>0&&D(),v["!ref"]=Ii(y),v}function a(h,f){return!(f&&f.PRN)||f.FS||h.slice(0,4)=="sep="||h.indexOf("	")>=0||h.indexOf(",")>=0||h.indexOf(";")>=0?s(h,f):nf(e(h,f),f)}function o(h,f){var p="",d=f.type=="string"?[0,0,0,0]:HJ(h,f);switch(f.type){case"base64":p=Ml(h);break;case"binary":p=h;break;case"buffer":f.codepage==65001?p=h.toString("utf8"):f.codepage&&typeof R1<"u"||(p=tn&&Buffer.isBuffer(h)?h.toString("binary"):Lp(h));break;case"array":p=W2(h);break;case"string":p=h;break;default:throw new Error("Unrecognized type "+f.type)}return d[0]==239&&d[1]==187&&d[2]==191?p=x0(p.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?p=x0(p):f.type=="binary"&&typeof R1<"u",p.slice(0,19)=="socialcalc:version:"?mP.to_sheet(f.type=="string"?p:x0(p),f):a(p,f)}function l(h,f){return oh(o(h,f),f)}function u(h){for(var f=[],p=Vn(h["!ref"]),d,v=Array.isArray(h),y=p.s.r;y<=p.e.r;++y){for(var _=[],w=p.s.c;w<=p.e.c;++w){var S=vn({r:y,c:w});if(d=v?(h[y]||[])[w]:h[S],!d||d.v==null){_.push("          ");continue}for(var C=(d.w||(Ol(d),d.w)||"").slice(0,10);C.length<10;)C+=" ";_.push(C+(w===0?" ":""))}f.push(_.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}(),zE=function(){function t(P,O,B){if(P){va(P,P.l||0);for(var z=B.Enum||Ue;P.l<P.length;){var Z=P.read_shift(2),de=z[Z]||z[65535],Se=P.read_shift(2),Ae=P.l+Se,Ne=de.f&&de.f(P,Se,B);if(P.l=Ae,O(Ne,de,Z))return}}}function e(P,O){switch(O.type){case"base64":return r(yo(Ml(P)),O);case"binary":return r(yo(P),O);case"buffer":case"array":return r(P,O)}throw"Unsupported type "+O.type}function r(P,O){if(!P)return P;var B=O||{},z=B.dense?[]:{},Z="Sheet1",de="",Se=0,Ae={},Ne=[],Xe=[],et={s:{r:0,c:0},e:{r:0,c:0}},ot=B.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)B.Enum=Ue,t(P,function(X,me,fe){switch(fe){case 0:B.vers=X,X>=4096&&(B.qpro=!0);break;case 6:et=X;break;case 204:X&&(de=X);break;case 222:de=X;break;case 15:case 51:B.qpro||(X[1].v=X[1].v.slice(1));case 13:case 14:case 16:fe==14&&(X[2]&112)==112&&(X[2]&15)>1&&(X[2]&15)<15&&(X[1].z=B.dateNF||ci[14],B.cellDates&&(X[1].t="d",X[1].v=L8(X[1].v))),B.qpro&&X[3]>Se&&(z["!ref"]=Ii(et),Ae[Z]=z,Ne.push(Z),z=B.dense?[]:{},et={s:{r:0,c:0},e:{r:0,c:0}},Se=X[3],Z=de||"Sheet"+(Se+1),de="");var qe=B.dense?(z[X[0].r]||[])[X[0].c]:z[vn(X[0])];if(qe){qe.t=X[1].t,qe.v=X[1].v,X[1].z!=null&&(qe.z=X[1].z),X[1].f!=null&&(qe.f=X[1].f);break}B.dense?(z[X[0].r]||(z[X[0].r]=[]),z[X[0].r][X[0].c]=X[1]):z[vn(X[0])]=X[1];break}},B);else if(P[2]==26||P[2]==14)B.Enum=Ie,P[2]==14&&(B.qpro=!0,P.l=0),t(P,function(X,me,fe){switch(fe){case 204:Z=X;break;case 22:X[1].v=X[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(X[3]>Se&&(z["!ref"]=Ii(et),Ae[Z]=z,Ne.push(Z),z=B.dense?[]:{},et={s:{r:0,c:0},e:{r:0,c:0}},Se=X[3],Z="Sheet"+(Se+1)),ot>0&&X[0].r>=ot)break;B.dense?(z[X[0].r]||(z[X[0].r]=[]),z[X[0].r][X[0].c]=X[1]):z[vn(X[0])]=X[1],et.e.c<X[0].c&&(et.e.c=X[0].c),et.e.r<X[0].r&&(et.e.r=X[0].r);break;case 27:X[14e3]&&(Xe[X[14e3][0]]=X[14e3][1]);break;case 1537:Xe[X[0]]=X[1],X[0]==Se&&(Z=X[1]);break}},B);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(z["!ref"]=Ii(et),Ae[de||Z]=z,Ne.push(de||Z),!Xe.length)return{SheetNames:Ne,Sheets:Ae};for(var mt={},te=[],ke=0;ke<Xe.length;++ke)Ae[Ne[ke]]?(te.push(Xe[ke]||Ne[ke]),mt[Xe[ke]]=Ae[Xe[ke]]||Ae[Ne[ke]]):(te.push(Xe[ke]),mt[Xe[ke]]={"!ref":"A1"});return{SheetNames:te,Sheets:mt}}function n(P,O){var B=O||{};if(+B.codepage>=0&&ep(+B.codepage),B.type=="string")throw new Error("Cannot write WK1 to JS string");var z=ra(),Z=Vn(P["!ref"]),de=Array.isArray(P),Se=[];Ct(z,0,s(1030)),Ct(z,6,l(Z));for(var Ae=Math.min(Z.e.r,8191),Ne=Z.s.r;Ne<=Ae;++Ne)for(var Xe=ls(Ne),et=Z.s.c;et<=Z.e.c;++et){Ne===Z.s.r&&(Se[et]=ks(et));var ot=Se[et]+Xe,mt=de?(P[Ne]||[])[et]:P[ot];if(!(!mt||mt.t=="z"))if(mt.t=="n")(mt.v|0)==mt.v&&mt.v>=-32768&&mt.v<=32767?Ct(z,13,d(Ne,et,mt.v)):Ct(z,14,y(Ne,et,mt.v));else{var te=Ol(mt);Ct(z,15,f(Ne,et,te.slice(0,239)))}}return Ct(z,1),z.end()}function i(P,O){var B=O||{};if(+B.codepage>=0&&ep(+B.codepage),B.type=="string")throw new Error("Cannot write WK3 to JS string");var z=ra();Ct(z,0,a(P));for(var Z=0,de=0;Z<P.SheetNames.length;++Z)(P.Sheets[P.SheetNames[Z]]||{})["!ref"]&&Ct(z,27,_e(P.SheetNames[Z],de++));var Se=0;for(Z=0;Z<P.SheetNames.length;++Z){var Ae=P.Sheets[P.SheetNames[Z]];if(!(!Ae||!Ae["!ref"])){for(var Ne=Vn(Ae["!ref"]),Xe=Array.isArray(Ae),et=[],ot=Math.min(Ne.e.r,8191),mt=Ne.s.r;mt<=ot;++mt)for(var te=ls(mt),ke=Ne.s.c;ke<=Ne.e.c;++ke){mt===Ne.s.r&&(et[ke]=ks(ke));var X=et[ke]+te,me=Xe?(Ae[mt]||[])[ke]:Ae[X];if(!(!me||me.t=="z"))if(me.t=="n")Ct(z,23,D(mt,ke,Se,me.v));else{var fe=Ol(me);Ct(z,22,E(mt,ke,Se,fe.slice(0,239)))}}++Se}}return Ct(z,1),z.end()}function s(P){var O=Je(2);return O.write_shift(2,P),O}function a(P){var O=Je(26);O.write_shift(2,4096),O.write_shift(2,4),O.write_shift(4,0);for(var B=0,z=0,Z=0,de=0;de<P.SheetNames.length;++de){var Se=P.SheetNames[de],Ae=P.Sheets[Se];if(!(!Ae||!Ae["!ref"])){++Z;var Ne=Ia(Ae["!ref"]);B<Ne.e.r&&(B=Ne.e.r),z<Ne.e.c&&(z=Ne.e.c)}}return B>8191&&(B=8191),O.write_shift(2,B),O.write_shift(1,Z),O.write_shift(1,z),O.write_shift(2,0),O.write_shift(2,0),O.write_shift(1,1),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(4,0),O}function o(P,O,B){var z={s:{c:0,r:0},e:{c:0,r:0}};return O==8&&B.qpro?(z.s.c=P.read_shift(1),P.l++,z.s.r=P.read_shift(2),z.e.c=P.read_shift(1),P.l++,z.e.r=P.read_shift(2),z):(z.s.c=P.read_shift(2),z.s.r=P.read_shift(2),O==12&&B.qpro&&(P.l+=2),z.e.c=P.read_shift(2),z.e.r=P.read_shift(2),O==12&&B.qpro&&(P.l+=2),z.s.c==65535&&(z.s.c=z.e.c=z.s.r=z.e.r=0),z)}function l(P){var O=Je(8);return O.write_shift(2,P.s.c),O.write_shift(2,P.s.r),O.write_shift(2,P.e.c),O.write_shift(2,P.e.r),O}function u(P,O,B){var z=[{c:0,r:0},{t:"n",v:0},0,0];return B.qpro&&B.vers!=20768?(z[0].c=P.read_shift(1),z[3]=P.read_shift(1),z[0].r=P.read_shift(2),P.l+=2):(z[2]=P.read_shift(1),z[0].c=P.read_shift(2),z[0].r=P.read_shift(2)),z}function h(P,O,B){var z=P.l+O,Z=u(P,O,B);if(Z[1].t="s",B.vers==20768){P.l++;var de=P.read_shift(1);return Z[1].v=P.read_shift(de,"utf8"),Z}return B.qpro&&P.l++,Z[1].v=P.read_shift(z-P.l,"cstr"),Z}function f(P,O,B){var z=Je(7+B.length);z.write_shift(1,255),z.write_shift(2,O),z.write_shift(2,P),z.write_shift(1,39);for(var Z=0;Z<z.length;++Z){var de=B.charCodeAt(Z);z.write_shift(1,de>=128?95:de)}return z.write_shift(1,0),z}function p(P,O,B){var z=u(P,O,B);return z[1].v=P.read_shift(2,"i"),z}function d(P,O,B){var z=Je(7);return z.write_shift(1,255),z.write_shift(2,O),z.write_shift(2,P),z.write_shift(2,B,"i"),z}function v(P,O,B){var z=u(P,O,B);return z[1].v=P.read_shift(8,"f"),z}function y(P,O,B){var z=Je(13);return z.write_shift(1,255),z.write_shift(2,O),z.write_shift(2,P),z.write_shift(8,B,"f"),z}function _(P,O,B){var z=P.l+O,Z=u(P,O,B);if(Z[1].v=P.read_shift(8,"f"),B.qpro)P.l=z;else{var de=P.read_shift(2);j(P.slice(P.l,P.l+de),Z),P.l+=de}return Z}function w(P,O,B){var z=O&32768;return O&=-32769,O=(z?P:0)+(O>=8192?O-16384:O),(z?"":"$")+(B?ks(O):ls(O))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},C=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function j(P,O){va(P,0);for(var B=[],z=0,Z="",de="",Se="",Ae="";P.l<P.length;){var Ne=P[P.l++];switch(Ne){case 0:B.push(P.read_shift(8,"f"));break;case 1:de=w(O[0].c,P.read_shift(2),!0),Z=w(O[0].r,P.read_shift(2),!1),B.push(de+Z);break;case 2:{var Xe=w(O[0].c,P.read_shift(2),!0),et=w(O[0].r,P.read_shift(2),!1);de=w(O[0].c,P.read_shift(2),!0),Z=w(O[0].r,P.read_shift(2),!1),B.push(Xe+et+":"+de+Z)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:B.push("("+B.pop()+")");break;case 5:B.push(P.read_shift(2));break;case 6:{for(var ot="";Ne=P[P.l++];)ot+=String.fromCharCode(Ne);B.push('"'+ot.replace(/"/g,'""')+'"')}break;case 8:B.push("-"+B.pop());break;case 23:B.push("+"+B.pop());break;case 22:B.push("NOT("+B.pop()+")");break;case 20:case 21:Ae=B.pop(),Se=B.pop(),B.push(["AND","OR"][Ne-20]+"("+Se+","+Ae+")");break;default:if(Ne<32&&C[Ne])Ae=B.pop(),Se=B.pop(),B.push(Se+C[Ne]+Ae);else if(S[Ne]){if(z=S[Ne][1],z==69&&(z=P[P.l++]),z>B.length){console.error("WK1 bad formula parse 0x"+Ne.toString(16)+":|"+B.join("|")+"|");return}var mt=B.slice(-z);B.length-=z,B.push(S[Ne][0]+"("+mt.join(",")+")")}else return Ne<=7?console.error("WK1 invalid opcode "+Ne.toString(16)):Ne<=24?console.error("WK1 unsupported op "+Ne.toString(16)):Ne<=30?console.error("WK1 invalid opcode "+Ne.toString(16)):Ne<=115?console.error("WK1 unsupported function opcode "+Ne.toString(16)):console.error("WK1 unrecognized opcode "+Ne.toString(16))}}B.length==1?O[1].f=""+B[0]:console.error("WK1 bad formula parse |"+B.join("|")+"|")}function q(P){var O=[{c:0,r:0},{t:"n",v:0},0];return O[0].r=P.read_shift(2),O[3]=P[P.l++],O[0].c=P[P.l++],O}function G(P,O){var B=q(P);return B[1].t="s",B[1].v=P.read_shift(O-4,"cstr"),B}function E(P,O,B,z){var Z=Je(6+z.length);Z.write_shift(2,P),Z.write_shift(1,B),Z.write_shift(1,O),Z.write_shift(1,39);for(var de=0;de<z.length;++de){var Se=z.charCodeAt(de);Z.write_shift(1,Se>=128?95:Se)}return Z.write_shift(1,0),Z}function k(P,O){var B=q(P);B[1].v=P.read_shift(2);var z=B[1].v>>1;if(B[1].v&1)switch(z&7){case 0:z=(z>>3)*5e3;break;case 1:z=(z>>3)*500;break;case 2:z=(z>>3)/20;break;case 3:z=(z>>3)/200;break;case 4:z=(z>>3)/2e3;break;case 5:z=(z>>3)/2e4;break;case 6:z=(z>>3)/16;break;case 7:z=(z>>3)/64;break}return B[1].v=z,B}function A(P,O){var B=q(P),z=P.read_shift(4),Z=P.read_shift(4),de=P.read_shift(2);if(de==65535)return z===0&&Z===3221225472?(B[1].t="e",B[1].v=15):z===0&&Z===3489660928?(B[1].t="e",B[1].v=42):B[1].v=0,B;var Se=de&32768;return de=(de&32767)-16446,B[1].v=(1-Se*2)*(Z*Math.pow(2,de+32)+z*Math.pow(2,de)),B}function D(P,O,B,z){var Z=Je(14);if(Z.write_shift(2,P),Z.write_shift(1,B),Z.write_shift(1,O),z==0)return Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(2,65535),Z;var de=0,Se=0,Ae=0,Ne=0;return z<0&&(de=1,z=-z),Se=Math.log2(z)|0,z/=Math.pow(2,Se-31),Ne=z>>>0,Ne&2147483648||(z/=2,++Se,Ne=z>>>0),z-=Ne,Ne|=2147483648,Ne>>>=0,z*=Math.pow(2,32),Ae=z>>>0,Z.write_shift(4,Ae),Z.write_shift(4,Ne),Se+=16383+(de?32768:0),Z.write_shift(2,Se),Z}function N(P,O){var B=A(P);return P.l+=O-14,B}function R(P,O){var B=q(P),z=P.read_shift(4);return B[1].v=z>>6,B}function L(P,O){var B=q(P),z=P.read_shift(8,"f");return B[1].v=z,B}function se(P,O){var B=L(P);return P.l+=O-10,B}function ge(P,O){return P[P.l+O-1]==0?P.read_shift(O,"cstr"):""}function ve(P,O){var B=P[P.l++];B>O-1&&(B=O-1);for(var z="";z.length<B;)z+=String.fromCharCode(P[P.l++]);return z}function ye(P,O,B){if(!(!B.qpro||O<21)){var z=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var Z=P.read_shift(O-21,"cstr");return[z,Z]}}function he(P,O){for(var B={},z=P.l+O;P.l<z;){var Z=P.read_shift(2);if(Z==14e3){for(B[Z]=[0,""],B[Z][0]=P.read_shift(2);P[P.l];)B[Z][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return B}function _e(P,O){var B=Je(5+P.length);B.write_shift(2,14e3),B.write_shift(2,O);for(var z=0;z<P.length;++z){var Z=P.charCodeAt(z);B[B.l++]=Z>127?95:Z}return B[B.l++]=0,B}var Ue={0:{n:"BOF",f:uP},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:_},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ge},222:{n:"SHEETNAMELP",f:ve},65535:{n:""}},Ie={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:G},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:k},25:{n:"FORMULA19",f:N},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:he},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:R},38:{n:"??"},39:{n:"NUMBER27",f:L},40:{n:"FORMULA28",f:se},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ge},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ye},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}}(),LG=/^\s|\s$|[\t\n\r]/;function gP(t,e){if(!e.bookSST)return"";var r=[Li];r[r.length]=Nt("sst",null,{xmlns:rf[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var i=t[n],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(LG)&&(s+=' xml:space="preserve"'),s+=">"+xn(i.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function RG(t){return[t.read_shift(4),t.read_shift(4)]}function jG(t,e){return e||(e=Je(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var FG=EW;function DG(t){var e=ra();dt(e,159,jG(t));for(var r=0;r<t.length;++r)dt(e,19,FG(t[r]));return dt(e,160),e.end()}function MG(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function xP(t){var e=0,r,n=MG(t),i=n.length+1,s,a,o,l,u;for(r=Ju(i),r[0]=n.length,s=1;s!=i;++s)r[s]=n[s-1];for(s=i-1;s>=0;--s)a=r[s],o=e&16384?1:0,l=e<<1&32767,u=o|l,e=u^a;return e^52811}var OG=function(){function t(i,s){switch(s.type){case"base64":return e(Ml(i),s);case"binary":return e(i,s);case"buffer":return e(tn&&Buffer.isBuffer(i)?i.toString("binary"):Lp(i),s);case"array":return e(W2(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(h,f){Array.isArray(o)&&(o[f]=[]);for(var p=/\\\w+\b/g,d=0,v,y=-1;v=p.exec(h);){switch(v[0]){case"\\cell":var _=h.slice(d,p.lastIndex-v[0].length);if(_[0]==" "&&(_=_.slice(1)),++y,_.length){var w={v:_,t:"s"};Array.isArray(o)?o[f][y]=w:o[vn({r:f,c:y})]=w}break}d=p.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=Ii(u),o}function r(i,s){return oh(t(i,s),s)}function n(i){for(var s=["{\\rtf1\\ansi"],a=Vn(i["!ref"]),o,l=Array.isArray(i),u=a.s.r;u<=a.e.r;++u){s.push("\\trowd\\trautofit1");for(var h=a.s.c;h<=a.e.c;++h)s.push("\\cellx"+(h+1));for(s.push("\\pard\\intbl"),h=a.s.c;h<=a.e.c;++h){var f=vn({r:u,c:h});o=l?(i[u]||[])[h]:i[f],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(Ol(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function HE(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}var BG=6,Nl=BG;function z1(t){return Math.floor((t+Math.round(128/Nl)/256)*Nl)}function H1(t){return Math.floor((t-5)/Nl*100+.5)/100}function Pw(t){return Math.round((t*Nl+5)/Nl*256)/256}function G_(t){t.width?(t.wpx=z1(t.width),t.wch=H1(t.wpx),t.MDW=Nl):t.wpx?(t.wch=H1(t.wpx),t.width=Pw(t.wch),t.MDW=Nl):typeof t.wch=="number"&&(t.width=Pw(t.wch),t.wpx=z1(t.width),t.MDW=Nl),t.customWidth&&delete t.customWidth}var UG=96,yP=UG;function q1(t){return t*96/yP}function vP(t){return t*yP/96}function VG(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Nt("numFmt",null,{numFmtId:n,formatCode:xn(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Nt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function zG(t){var e=[];return e[e.length]=Nt("cellXfs",null),t.forEach(function(r){e[e.length]=Nt("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Nt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function wP(t,e){var r=[Li,Nt("styleSheet",null,{xmlns:rf[0],"xmlns:vt":Wi.vt})],n;return t.SSF&&(n=VG(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=zG(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function HG(t,e){var r=t.read_shift(2),n=Cs(t);return[r,n]}function qG(t,e,r){r||(r=Je(6+4*e.length)),r.write_shift(2,t),Ki(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function $G(t,e,r){var n={};n.sz=t.read_shift(2)/20;var i=LW(t);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=PW(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Cs(t),n}function WG(t,e){e||(e=Je(25+4*32)),e.write_shift(2,t.sz*20),RW(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),U1(t.color,e);var n=0;return n=2,e.write_shift(1,n),Ki(t.name,e),e.length>e.l?e.slice(0,e.l):e}var GG=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Dy,KG=el;function qE(t,e){e||(e=Je(4*3+8*7+16*1)),Dy||(Dy=F_(GG));var r=Dy[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(U1({auto:1},e),U1({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function YG(t,e){var r=t.l+e,n=t.read_shift(2),i=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:i}}function _P(t,e,r){r||(r=Je(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Df(t,e){return e||(e=Je(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var XG=el;function QG(t,e){return e||(e=Je(51)),e.write_shift(1,0),Df(null,e),Df(null,e),Df(null,e),Df(null,e),Df(null,e),e.length>e.l?e.slice(0,e.l):e}function JG(t,e){return e||(e=Je(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),B1(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function ZG(t,e,r){var n=Je(2052);return n.write_shift(4,t),B1(e,n),B1(r,n),n.length>n.l?n.slice(0,n.l):n}function eK(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&++r}),r!=0&&(dt(t,615,So(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&dt(t,44,qG(i,e[i]))}),dt(t,616))}}function tK(t){var e=1;dt(t,611,So(e)),dt(t,43,WG({sz:12,color:{theme:1},name:"Calibri",family:2})),dt(t,612)}function rK(t){var e=2;dt(t,603,So(e)),dt(t,45,qE({patternType:"none"})),dt(t,45,qE({patternType:"gray125"})),dt(t,604)}function nK(t){var e=1;dt(t,613,So(e)),dt(t,46,QG()),dt(t,614)}function iK(t){var e=1;dt(t,626,So(e)),dt(t,47,_P({numFmtId:0},65535)),dt(t,627)}function sK(t,e){dt(t,617,So(e.length)),e.forEach(function(r){dt(t,47,_P(r,0))}),dt(t,618)}function aK(t){var e=1;dt(t,619,So(e)),dt(t,48,JG({xfId:0,name:"Normal"})),dt(t,620)}function oK(t){var e=0;dt(t,505,So(e)),dt(t,506)}function lK(t){var e=0;dt(t,508,ZG(e,"TableStyleMedium9","PivotStyleMedium4")),dt(t,509)}function cK(t,e){var r=ra();return dt(r,278),eK(r,t.SSF),tK(r),rK(r),nK(r),iK(r),sK(r,e.cellXfs),aK(r),oK(r),lK(r),dt(r,279),r.end()}function bP(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Li];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function uK(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Cs(t)}}function hK(t){var e=Je(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Ki(t.name,e),e.slice(0,e.l)}function dK(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function fK(t){var e=Je(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function pK(t,e){var r=Je(8+2*e.length);return r.write_shift(4,t),Ki(e,r),r.slice(0,r.l)}function mK(t){return t.l+=4,t.read_shift(4)!=0}function gK(t,e){var r=Je(8);return r.write_shift(4,t),r.write_shift(4,1),r}function xK(){var t=ra();return dt(t,332),dt(t,334,So(1)),dt(t,335,hK({name:"XLDAPR",version:12e4,flags:3496657072})),dt(t,336),dt(t,339,pK(1,"XLDAPR")),dt(t,52),dt(t,35,So(514)),dt(t,4096,So(0)),dt(t,4097,$a(1)),dt(t,36),dt(t,53),dt(t,340),dt(t,337,gK(1)),dt(t,51,fK([[1,0]])),dt(t,338),dt(t,333),t.end()}function SP(){var t=[Li];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function yK(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=vn(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var Zh=1024;function AP(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[Nt("xml",null,{"xmlns:v":wa.v,"xmlns:o":wa.o,"xmlns:x":wa.x,"xmlns:mv":wa.mv}).replace(/\/>/,">"),Nt("o:shapelayout",Nt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Nt("v:shapetype",[Nt("v:stroke",null,{joinstyle:"miter"}),Nt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Zh<t*1e3;)Zh+=1e3;return e.forEach(function(s){var a=Gi(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Nt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Nt("v:fill",l,o),h={on:"t",obscured:"t"};++Zh,i=i.concat(["<v:shape"+ip({id:"_x0000_s"+Zh,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Nt("v:shadow",null,h),Nt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",as("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),as("x:AutoFill","False"),as("x:Row",String(a.r)),as("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function EP(t){var e=[Li,Nt("comments",null,{xmlns:rf[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(i){var s=xn(i.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var i=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(i=r.indexOf(xn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(as("t",xn(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(as("t",xn(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function vK(t,e,r){var n=[Li,Nt("ThreadedComments",null,{xmlns:Wi.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(Nt("threadedComment",as("text",a.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function wK(t){var e=[Li,Nt("personList",null,{xmlns:Wi.TCMNT,"xmlns:x":rf[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Nt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function _K(t){var e={};e.iauthor=t.read_shift(4);var r=hh(t);return e.rfx=r.s,e.ref=vn(r.s),t.l+=16,e}function bK(t,e){return e==null&&(e=Je(36)),e.write_shift(4,t[1].iauthor),sf(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var SK=Cs;function AK(t){return Ki(t.slice(0,54))}function EK(t){var e=ra(),r=[];return dt(e,628),dt(e,630),t.forEach(function(n){n[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),dt(e,632,AK(i.a)))})}),dt(e,631),dt(e,633),t.forEach(function(n){n[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var s={s:Gi(n[0]),e:Gi(n[0])};dt(e,635,bK([s,i])),i.t&&i.t.length>0&&dt(e,637,TW(i)),dt(e,636),delete i.iauthor})}),dt(e,634),dt(e,629),e.end()}function NK(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&_n.utils.cfb_add(t,i,e.FileIndex[n].content)}})}var NP=["xlsb","xlsm","xlam","biff8","xla"],TK=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,h=a.length>0?parseInt(a,10)|0:0;return o?h+=e.c:--h,l?u+=e.r:--u,i+(o?"":"$")+ks(h)+(l?"":"$")+ls(u)}return function(i,s){return e=s,i.replace(t,r)}}(),K_=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Y_=function(){return function(e,r){return e.replace(K_,function(n,i,s,a,o,l){var u=z_(a)-(s?0:r.c),h=V_(l)-(o?0:r.r),f=h==0?"":o?h+1:"["+h+"]",p=u==0?"":s?u+1:"["+u+"]";return i+"R"+f+"C"+p})}}();function kK(t,e){return t.replace(K_,function(r,n,i,s,a,o){return n+(i=="$"?i+s:ks(z_(s)+e.c))+(a=="$"?a+o:ls(V_(o)+e.r))})}function CK(t){return t.length!=1}function Ai(t){t.l+=1}function su(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function TP(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return kP(t);r.biff==12&&(n=4)}var i=t.read_shift(n),s=t.read_shift(n),a=su(t),o=su(t);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function kP(t){var e=su(t),r=su(t),n=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function IK(t,e,r){if(r.biff<8)return kP(t);var n=t.read_shift(r.biff==12?4:2),i=t.read_shift(r.biff==12?4:2),s=su(t),a=su(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function CP(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return PK(t);var n=t.read_shift(r&&r.biff==12?4:2),i=su(t);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function PK(t){var e=su(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function LK(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function RK(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return jK(t);var i=t.read_shift(n>=12?4:2),s=t.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function jK(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:i,rRel:n}}function FK(t,e,r){var n=(t[t.l++]&96)>>5,i=TP(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function DK(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var a=TP(t,s,r);return[n,i,a]}function MK(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function OK(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,i]}function BK(t,e,r){var n=(t[t.l++]&96)>>5,i=IK(t,e-1,r);return[n,i]}function UK(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function $E(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function VK(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),i=[],s=0;s<=n;++s)i.push(t.read_shift(r&&r.biff==2?1:2));return i}function zK(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function HK(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function qK(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function $K(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function IP(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function WK(t){return t.read_shift(2),IP(t)}function GK(t){return t.read_shift(2),IP(t)}function KK(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=CP(t,0,r);return[n,i]}function YK(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=RK(t,0,r);return[n,i]}function XK(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=CP(t,0,r);return[n,i,s]}function QK(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(r&&r.biff<=3?1:2);return[QY[i],RP[i],n]}function JK(t,e,r){var n=t[t.l++],i=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:ZK(t);return[i,(s[0]===0?RP:XY)[s[1]]]}function ZK(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function eY(t,e,r){t.l+=r&&r.biff==2?3:4}function tY(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function rY(t){return t.l++,Fp[t.read_shift(1)]}function nY(t){return t.l++,t.read_shift(2)}function iY(t){return t.l++,t.read_shift(1)!==0}function sY(t){return t.l++,af(t)}function aY(t,e,r){return t.l++,dP(t,e-1,r)}function oY(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=XW(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Fp[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=af(t);break;case 2:r[1]=eG(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function lY(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),i=[],s=0;s!=n;++s)i.push((r.biff==12?hh:nG)(t));return i}function cY(t,e,r){var n=0,i=0;r.biff==12?(n=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var s=0,a=[];s!=n&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=oY(t,r.biff);return a}function uY(t,e,r){var n=t.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,s=t.read_shift(i);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function hY(t,e,r){if(r.biff==5)return dY(t);var n=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[n,i,s]}function dY(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function fY(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function pY(t,e,r){var n=t.read_shift(1)>>>5&3,i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function mY(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function gY(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,i]}var xY=el,yY=el,vY=el;function Dp(t,e,r){return t.l+=2,[LK(t)]}function X_(t){return t.l+=6,[]}var wY=Dp,_Y=X_,bY=X_,SY=Dp;function PP(t){return t.l+=2,[uP(t),t.read_shift(2)&1]}var AY=Dp,EY=PP,NY=X_,TY=Dp,kY=Dp,CY=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function IY(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),a=CY[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:i,C:s}}function PY(t){return t.l+=2,[t.read_shift(4)]}function LY(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function RY(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function jY(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function FY(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function DY(t){return t.l+=4,[0,0]}var WE={1:{n:"PtgExp",f:tY},2:{n:"PtgTbl",f:vY},3:{n:"PtgAdd",f:Ai},4:{n:"PtgSub",f:Ai},5:{n:"PtgMul",f:Ai},6:{n:"PtgDiv",f:Ai},7:{n:"PtgPower",f:Ai},8:{n:"PtgConcat",f:Ai},9:{n:"PtgLt",f:Ai},10:{n:"PtgLe",f:Ai},11:{n:"PtgEq",f:Ai},12:{n:"PtgGe",f:Ai},13:{n:"PtgGt",f:Ai},14:{n:"PtgNe",f:Ai},15:{n:"PtgIsect",f:Ai},16:{n:"PtgUnion",f:Ai},17:{n:"PtgRange",f:Ai},18:{n:"PtgUplus",f:Ai},19:{n:"PtgUminus",f:Ai},20:{n:"PtgPercent",f:Ai},21:{n:"PtgParen",f:Ai},22:{n:"PtgMissArg",f:Ai},23:{n:"PtgStr",f:aY},26:{n:"PtgSheet",f:LY},27:{n:"PtgEndSheet",f:RY},28:{n:"PtgErr",f:rY},29:{n:"PtgBool",f:iY},30:{n:"PtgInt",f:nY},31:{n:"PtgNum",f:sY},32:{n:"PtgArray",f:UK},33:{n:"PtgFunc",f:QK},34:{n:"PtgFuncVar",f:JK},35:{n:"PtgName",f:uY},36:{n:"PtgRef",f:KK},37:{n:"PtgArea",f:FK},38:{n:"PtgMemArea",f:fY},39:{n:"PtgMemErr",f:xY},40:{n:"PtgMemNoMem",f:yY},41:{n:"PtgMemFunc",f:pY},42:{n:"PtgRefErr",f:mY},43:{n:"PtgAreaErr",f:MK},44:{n:"PtgRefN",f:YK},45:{n:"PtgAreaN",f:BK},46:{n:"PtgMemAreaN",f:jY},47:{n:"PtgMemNoMemN",f:FY},57:{n:"PtgNameX",f:hY},58:{n:"PtgRef3d",f:XK},59:{n:"PtgArea3d",f:DK},60:{n:"PtgRefErr3d",f:gY},61:{n:"PtgAreaErr3d",f:OK},255:{}},MY={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},OY={1:{n:"PtgElfLel",f:PP},2:{n:"PtgElfRw",f:TY},3:{n:"PtgElfCol",f:wY},6:{n:"PtgElfRwV",f:kY},7:{n:"PtgElfColV",f:SY},10:{n:"PtgElfRadical",f:AY},11:{n:"PtgElfRadicalS",f:NY},13:{n:"PtgElfColS",f:_Y},15:{n:"PtgElfColSV",f:bY},16:{n:"PtgElfRadicalLel",f:EY},25:{n:"PtgList",f:IY},29:{n:"PtgSxName",f:PY},255:{}},BY={0:{n:"PtgAttrNoop",f:DY},1:{n:"PtgAttrSemi",f:$K},2:{n:"PtgAttrIf",f:HK},4:{n:"PtgAttrChoose",f:VK},8:{n:"PtgAttrGoto",f:zK},16:{n:"PtgAttrSum",f:eY},32:{n:"PtgAttrBaxcel",f:$E},33:{n:"PtgAttrBaxcel",f:$E},64:{n:"PtgAttrSpace",f:WK},65:{n:"PtgAttrSpaceSemi",f:GK},128:{n:"PtgAttrIfError",f:qK},255:{}};function UY(t,e,r,n){if(n.biff<8)return el(t,e);for(var i=t.l+e,s=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=cY(t,0,n),s.push(r[a][1]);break;case"PtgMemArea":r[a][2]=lY(t,r[a][1],n),s.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),s.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=i-t.l,e!==0&&s.push(el(t,e)),s}function VY(t,e,r){for(var n=t.l+e,i,s,a=[];n!=t.l;)e=n-t.l,s=t[t.l],i=WE[s]||WE[MY[s]],(s===24||s===25)&&(i=(s===24?OY:BY)[t[t.l+1]]),!i||!i.f?el(t,e):a.push([i.n,i.f(t,e,r)]);return a}function zY(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],i=[],s=0;s<n.length;++s){var a=n[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var HY={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function qY(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function LP(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(t[n[0]][0]){case 357:return i=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(i=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function GE(t,e,r){var n=LP(t,e,r);return n=="#REF"?n:qY(n,r)}function Od(t,e,r,n,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,u,h,f=0,p=0,d,v="";if(!t[0]||!t[0][0])return"";for(var y=-1,_="",w=0,S=t[0].length;w<S;++w){var C=t[0][w];switch(C[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),y>=0){switch(t[0][y][1][0]){case 0:_=li(" ",t[0][y][1][1]);break;case 1:_=li("\r",t[0][y][1][1]);break;default:if(_="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}u=u+_,y=-1}o.push(u+HY[C[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":h=v0(C[1][1],a,i),o.push(w0(h,s));break;case"PtgRefN":h=r?v0(C[1][1],r,i):C[1][1],o.push(w0(h,s));break;case"PtgRef3d":f=C[1][1],h=v0(C[1][2],a,i),v=GE(n,f,i),o.push(v+"!"+w0(h,s));break;case"PtgFunc":case"PtgFuncVar":var j=C[1][0],q=C[1][1];j||(j=0),j&=127;var G=j==0?[]:o.slice(-j);o.length-=j,q==="User"&&(q=G.shift()),o.push(q+"("+G.join(",")+")");break;case"PtgBool":o.push(C[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(C[1]);break;case"PtgNum":o.push(String(C[1]));break;case"PtgStr":o.push('"'+C[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(C[1]);break;case"PtgAreaN":d=PE(C[1][1],r?{s:r}:a,i),o.push(jy(d,i));break;case"PtgArea":d=PE(C[1][1],a,i),o.push(jy(d,i));break;case"PtgArea3d":f=C[1][1],d=C[1][2],v=GE(n,f,i),o.push(v+"!"+jy(d,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=C[1][2];var E=(n.names||[])[p-1]||(n[0]||[])[p],k=E?E.Name:"SH33TJSNAME"+String(p);k&&k.slice(0,6)=="_xlfn."&&!i.xlfn&&(k=k.slice(6)),o.push(k);break;case"PtgNameX":var A=C[1][1];p=C[1][2];var D;if(i.biff<=5)A<0&&(A=-A),n[A]&&(D=n[A][p]);else{var N="";if(((n[A]||[])[0]||[])[0]==14849||(((n[A]||[])[0]||[])[0]==1025?n[A][p]&&n[A][p].itab>0&&(N=n.SheetNames[n[A][p].itab-1]+"!"):N=n.SheetNames[p-1]+"!"),n[A]&&n[A][p])N+=n[A][p].Name;else if(n[0]&&n[0][p])N+=n[0][p].Name;else{var R=(LP(n,A,i)||"").split(";;");R[p-1]?N=R[p-1]:N+="SH33TJSERRX"}o.push(N);break}D||(D={Name:"SH33TJSERRY"}),o.push(D.Name);break;case"PtgParen":var L="(",se=")";if(y>=0){switch(_="",t[0][y][1][0]){case 2:L=li(" ",t[0][y][1][1])+L;break;case 3:L=li("\r",t[0][y][1][1])+L;break;case 4:se=li(" ",t[0][y][1][1])+se;break;case 5:se=li("\r",t[0][y][1][1])+se;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}y=-1}o.push(L+o.pop()+se);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":h={c:C[1][1],r:C[1][0]};var ge={c:r.c,r:r.r};if(n.sharedf[vn(h)]){var ve=n.sharedf[vn(h)];o.push(Od(ve,a,ge,n,i))}else{var ye=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(h.c<u[0].s.c||h.c>u[0].e.c)&&!(h.r<u[0].s.r||h.r>u[0].e.r)){o.push(Od(u[1],a,ge,n,i)),ye=!0;break}ye||o.push(C[1])}break;case"PtgArray":o.push("{"+zY(C[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+C[1].idx+"[#"+C[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(C));default:throw new Error("Unrecognized Formula Token: "+String(C))}var he=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&y>=0&&he.indexOf(t[0][w][0])==-1){C=t[0][y];var _e=!0;switch(C[1][0]){case 4:_e=!1;case 0:_=li(" ",C[1][1]);break;case 5:_e=!1;case 1:_=li("\r",C[1][1]);break;default:if(_="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+C[1][0])}o.push((_e?_:"")+o.pop()+(_e?"":_)),y=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function $Y(t){if(t==null){var e=Je(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Zu(t);return Zu(0)}function WY(t,e,r,n,i){var s=eh(e,r,i),a=$Y(t.v),o=Je(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=Je(t.bf.length),h=0;h<t.bf.length;++h)u[h]=t.bf[h];var f=ss([s,a,o,u]);return f}function G2(t,e,r){var n=t.read_shift(4),i=VY(t,n,r),s=t.read_shift(4),a=s>0?UY(t,s,i,r):null;return[i,a]}var GY=G2,K2=G2,KY=G2,YY=G2,XY={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},RP={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},QY={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function JY(t){var e="of:="+t.replace(K_,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function ZY(t){return t.replace(/\./,"!")}var _0=typeof Map<"u";function Q_(t,e,r){var n=0,i=t.length;if(r){if(_0?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=_0?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<i;++n)if(t[n].t===e)return t.Count++,n;return t[i]={t:e},t.Count++,t.Unique++,r&&(_0?(r.has(e)||r.set(e,[]),r.get(e).push(i)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(i))),i}function Y2(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Nl=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=H1(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=Pw(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function jP(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function du(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(n==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){C8(e.z,i),r.ssf[i]=e.z,r.revssf[e.z]=n=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===n)return i;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function eX(t,e,r){if(t&&t["!ref"]){var n=Vn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function tX(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Ii(t[r])+'"/>';return e+"</mergeCells>"}function rX(t,e,r,n,i){var s=!1,a={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}s=!0,a.codeName=np(xn(l))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+Nt("outlinePr",null,u)}!s&&!o||(i[i.length]=Nt("sheetPr",o,a))}var nX=["objects","scenarios","selectLockedCells","selectUnlockedCells"],iX=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function sX(t){var e={sheet:1};return nX.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),iX.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=xP(t.password).toString(16).toUpperCase()),Nt("sheetProtection",null,e)}function aX(t){return jP(t),Nt("pageMargins",null,t)}function oX(t,e){for(var r=["<cols>"],n,i=0;i!=e.length;++i)(n=e[i])&&(r[r.length]=Nt("col",null,Y2(i,n)));return r[r.length]="</cols>",r.join("")}function lX(t,e,r,n){var i=typeof t.ref=="string"?t.ref:Ii(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,a=Ia(i);a.s.r==a.e.r&&(a.e.r=Ia(e["!ref"]).e.r,i=Ii(a));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Nt("autoFilter",null,{ref:i})}function cX(t,e,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Nt("sheetViews",Nt("sheetView",null,i),{})}function uX(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",s=t.t,a=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=Fp[t.v];break;case"d":n&&n.cellDates?i=zs(t.v,-1).toISOString():(t=ia(t),t.t="n",i=""+(t.v=na(zs(t.v)))),typeof t.z>"u"&&(t.z=ci[14]);break;default:i=t.v;break}var o=as("v",xn(i)),l={r:e},u=du(n.cellXfs,t,n);switch(u!==0&&(l.s=u),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=as("v",""+Q_(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=a),typeof t.f=="string"&&t.f){var h=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Nt("f",xn(t.f),h)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Nt("c",o,l)}function hX(t,e,r,n){var i=[],s=[],a=Vn(t["!ref"]),o="",l,u="",h=[],f=0,p=0,d=t["!rows"],v=Array.isArray(t),y={r:u},_,w=-1;for(p=a.s.c;p<=a.e.c;++p)h[p]=ks(p);for(f=a.s.r;f<=a.e.r;++f){for(s=[],u=ls(f),p=a.s.c;p<=a.e.c;++p){l=h[p]+u;var S=v?(t[f]||[])[p]:t[l];S!==void 0&&(o=uX(S,l,t,e))!=null&&s.push(o)}(s.length>0||d&&d[f])&&(y={r:u},d&&d[f]&&(_=d[f],_.hidden&&(y.hidden=1),w=-1,_.hpx?w=q1(_.hpx):_.hpt&&(w=_.hpt),w>-1&&(y.ht=w,y.customHeight=1),_.level&&(y.outlineLevel=_.level)),i[i.length]=Nt("row",s.join(""),y))}if(d)for(;f<d.length;++f)d&&d[f]&&(y={r:f+1},_=d[f],_.hidden&&(y.hidden=1),w=-1,_.hpx?w=q1(_.hpx):_.hpt&&(w=_.hpt),w>-1&&(y.ht=w,y.customHeight=1),_.level&&(y.outlineLevel=_.level),i[i.length]=Nt("row","",y));return i.join("")}function FP(t,e,r,n){var i=[Li,Nt("worksheet",null,{xmlns:rf[0],"xmlns:r":Wi.r})],s=r.SheetNames[t],a=0,o="",l=r.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",h=Vn(u);if(h.e.c>16383||h.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575),u=Ii(h)}n||(n={}),l["!comments"]=[];var f=[];rX(l,r,t,e,i),i[i.length]=Nt("dimension",null,{ref:u}),i[i.length]=cX(l,e,t,r),e.sheetFormat&&(i[i.length]=Nt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=oX(l,l["!cols"])),i[a=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=hX(l,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),l["!protect"]&&(i[i.length]=sX(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=lX(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=tX(l["!merges"]));var p=-1,d,v=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(d={ref:y[0]},y[1].Target.charAt(0)!="#"&&(v=mn(n,-1,xn(y[1].Target).replace(/#.*$/,""),en.HLINK),d["r:id"]="rId"+v),(p=y[1].Target.indexOf("#"))>-1&&(d.location=xn(y[1].Target.slice(p+1))),y[1].Tooltip&&(d.tooltip=xn(y[1].Tooltip)),i[i.length]=Nt("hyperlink",null,d))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=aX(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=as("ignoredErrors",Nt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(v=mn(n,-1,"../drawings/drawing"+(t+1)+".xml",en.DRAW),i[i.length]=Nt("drawing",null,{"r:id":"rId"+v}),l["!drawing"]=f),l["!comments"].length>0&&(v=mn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",en.VML),i[i.length]=Nt("legacyDrawing",null,{"r:id":"rId"+v}),l["!legacy"]=v),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function dX(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=i/20),r}function fX(t,e,r){var n=Je(145),i=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;i.hpx?s=q1(i.hpx)*20:i.hpt&&(s=i.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:t,c:0},h=0;h<16;++h)if(!(e.s.c>h+1<<10||e.e.c<h<<10)){for(var f=-1,p=-1,d=h<<10;d<h+1<<10;++d){u.c=d;var v=Array.isArray(r)?(r[u.r]||[])[u.c]:r[vn(u)];v&&(f<0&&(f=d),p=d)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,p))}var y=n.l;return n.l=l,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function pX(t,e,r,n){var i=fX(n,r,e);(i.length>17||(e["!rows"]||[])[n])&&dt(t,0,i)}var mX=hh,gX=sf;function xX(){}function yX(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=kW(t),r}function vX(t,e,r){r==null&&(r=Je(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return U1({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),X8(t,r),r.slice(0,r.l)}function wX(t){var e=eo(t);return[e]}function _X(t,e,r){return r==null&&(r=Je(8)),lh(e,r)}function bX(t){var e=ch(t);return[e]}function SX(t,e,r){return r==null&&(r=Je(4)),uh(e,r)}function AX(t){var e=eo(t),r=t.read_shift(1);return[e,r,"b"]}function EX(t,e,r){return r==null&&(r=Je(9)),lh(e,r),r.write_shift(1,t.v?1:0),r}function NX(t){var e=ch(t),r=t.read_shift(1);return[e,r,"b"]}function TX(t,e,r){return r==null&&(r=Je(5)),uh(e,r),r.write_shift(1,t.v?1:0),r}function kX(t){var e=eo(t),r=t.read_shift(1);return[e,r,"e"]}function CX(t,e,r){return r==null&&(r=Je(9)),lh(e,r),r.write_shift(1,t.v),r}function IX(t){var e=ch(t),r=t.read_shift(1);return[e,r,"e"]}function PX(t,e,r){return r==null&&(r=Je(8)),uh(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function LX(t){var e=eo(t),r=t.read_shift(4);return[e,r,"s"]}function RX(t,e,r){return r==null&&(r=Je(12)),lh(e,r),r.write_shift(4,e.v),r}function jX(t){var e=ch(t),r=t.read_shift(4);return[e,r,"s"]}function FX(t,e,r){return r==null&&(r=Je(8)),uh(e,r),r.write_shift(4,e.v),r}function DX(t){var e=eo(t),r=af(t);return[e,r,"n"]}function MX(t,e,r){return r==null&&(r=Je(16)),lh(e,r),Zu(t.v,r),r}function OX(t){var e=ch(t),r=af(t);return[e,r,"n"]}function BX(t,e,r){return r==null&&(r=Je(12)),uh(e,r),Zu(t.v,r),r}function UX(t){var e=eo(t),r=Q8(t);return[e,r,"n"]}function VX(t,e,r){return r==null&&(r=Je(12)),lh(e,r),J8(t.v,r),r}function zX(t){var e=ch(t),r=Q8(t);return[e,r,"n"]}function HX(t,e,r){return r==null&&(r=Je(8)),uh(e,r),J8(t.v,r),r}function qX(t){var e=eo(t),r=H_(t);return[e,r,"is"]}function $X(t){var e=eo(t),r=Cs(t);return[e,r,"str"]}function WX(t,e,r){return r==null&&(r=Je(12+4*t.v.length)),lh(e,r),Ki(t.v,r),r.length>r.l?r.slice(0,r.l):r}function GX(t){var e=ch(t),r=Cs(t);return[e,r,"str"]}function KX(t,e,r){return r==null&&(r=Je(8+4*t.v.length)),uh(e,r),Ki(t.v,r),r.length>r.l?r.slice(0,r.l):r}function YX(t,e,r){var n=t.l+e,i=eo(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"b"];if(r.cellFormula){t.l+=2;var o=K2(t,n-t.l,r);a[3]=Od(o,null,i,r.supbooks,r)}else t.l=n;return a}function XX(t,e,r){var n=t.l+e,i=eo(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"e"];if(r.cellFormula){t.l+=2;var o=K2(t,n-t.l,r);a[3]=Od(o,null,i,r.supbooks,r)}else t.l=n;return a}function QX(t,e,r){var n=t.l+e,i=eo(t);i.r=r["!row"];var s=af(t),a=[i,s,"n"];if(r.cellFormula){t.l+=2;var o=K2(t,n-t.l,r);a[3]=Od(o,null,i,r.supbooks,r)}else t.l=n;return a}function JX(t,e,r){var n=t.l+e,i=eo(t);i.r=r["!row"];var s=Cs(t),a=[i,s,"str"];if(r.cellFormula){t.l+=2;var o=K2(t,n-t.l,r);a[3]=Od(o,null,i,r.supbooks,r)}else t.l=n;return a}var ZX=hh,eQ=sf;function tQ(t,e){return e==null&&(e=Je(4)),e.write_shift(4,t),e}function rQ(t,e){var r=t.l+e,n=hh(t),i=q_(t),s=Cs(t),a=Cs(t),o=Cs(t);t.l=r;var l={rfx:n,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function nQ(t,e){var r=Je(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));sf({s:Gi(t[0]),e:Gi(t[0])},r),$_("rId"+e,r);var n=t[1].Target.indexOf("#"),i=n==-1?"":t[1].Target.slice(n+1);return Ki(i||"",r),Ki(t[1].Tooltip||"",r),Ki("",r),r.slice(0,r.l)}function iQ(){}function sQ(t,e,r){var n=t.l+e,i=Z8(t),s=t.read_shift(1),a=[i];if(a[2]=s,r.cellFormula){var o=GY(t,n-t.l,r);a[1]=o}else t.l=n;return a}function aQ(t,e,r){var n=t.l+e,i=hh(t),s=[i];if(r.cellFormula){var a=YY(t,n-t.l,r);s[1]=a,t.l=n}else t.l=n;return s}function oQ(t,e,r){r==null&&(r=Je(18));var n=Y2(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),r.write_shift(2,i),r}var DP=["left","right","top","bottom","header","footer"];function lQ(t){var e={};return DP.forEach(function(r){e[r]=af(t)}),e}function cQ(t,e){return e==null&&(e=Je(6*8)),jP(t),DP.forEach(function(r){Zu(t[r],e)}),e}function uQ(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function hQ(t,e,r){r==null&&(r=Je(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function dQ(t){var e=Je(24);return e.write_shift(4,4),e.write_shift(4,1),sf(t,e),e}function fQ(t,e){return e==null&&(e=Je(16*4+2)),e.write_shift(2,t.password?xP(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function pQ(){}function mQ(){}function gQ(t,e,r,n,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ia(e),e.z=e.z||ci[14],e.v=na(zs(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=du(i.cellXfs,e,i),e.l&&s["!links"].push([vn(l),e.l]),e.c&&s["!comments"].push([vn(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=Q_(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,a?dt(t,18,FX(e,l)):dt(t,7,RX(e,l))):(l.t="str",a?dt(t,17,KX(e,l)):dt(t,6,WX(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?dt(t,13,HX(e,l)):dt(t,2,VX(e,l)):a?dt(t,16,BX(e,l)):dt(t,5,MX(e,l)),!0;case"b":return l.t="b",a?dt(t,15,TX(e,l)):dt(t,4,EX(e,l)),!0;case"e":return l.t="e",a?dt(t,14,PX(e,l)):dt(t,3,CX(e,l)),!0}return a?dt(t,12,SX(e,l)):dt(t,1,_X(e,l)),!0}function xQ(t,e,r,n){var i=Vn(e["!ref"]||"A1"),s,a="",o=[];dt(t,145);var l=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var h=i.s.r;h<=u;++h){a=ls(h),pX(t,e,i,h);var f=!1;if(h<=i.e.r)for(var p=i.s.c;p<=i.e.c;++p){h===i.s.r&&(o[p]=ks(p)),s=o[p]+a;var d=l?(e[h]||[])[p]:e[s];if(!d){f=!1;continue}f=gQ(t,d,h,p,n,e,f)}}dt(t,146)}function yQ(t,e){!e||!e["!merges"]||(dt(t,177,tQ(e["!merges"].length)),e["!merges"].forEach(function(r){dt(t,176,eQ(r))}),dt(t,178))}function vQ(t,e){!e||!e["!cols"]||(dt(t,390),e["!cols"].forEach(function(r,n){r&&dt(t,60,oQ(n,r))}),dt(t,391))}function wQ(t,e){!e||!e["!ref"]||(dt(t,648),dt(t,649,dQ(Vn(e["!ref"]))),dt(t,650))}function _Q(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var i=mn(r,-1,n[1].Target.replace(/#.*$/,""),en.HLINK);dt(t,494,nQ(n,i))}}),delete e["!links"]}function bQ(t,e,r,n){if(e["!comments"].length>0){var i=mn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",en.VML);dt(t,551,$_("rId"+i)),e["!legacy"]=i}}function SQ(t,e,r,n){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Ii(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,o=Ia(s);o.s.r==o.e.r&&(o.e.r=Ia(e["!ref"]).e.r,s=Ii(o));for(var l=0;l<a.length;++l){var u=a[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),dt(t,161,sf(Vn(s))),dt(t,162)}}function AQ(t,e,r){dt(t,133),dt(t,137,hQ(e,r)),dt(t,138),dt(t,134)}function EQ(t,e){e["!protect"]&&dt(t,535,fQ(e["!protect"]))}function NQ(t,e,r,n){var i=ra(),s=r.SheetNames[t],a=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=Vn(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],dt(i,129),(r.vbaraw||a["!outline"])&&dt(i,147,vX(o,a["!outline"])),dt(i,148,gX(l)),AQ(i,a,r.Workbook),vQ(i,a),xQ(i,a,t,e),EQ(i,a),SQ(i,a,r,t),yQ(i,a),_Q(i,a,n),a["!margins"]&&dt(i,476,cQ(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&wQ(i,a),bQ(i,a,t,n),dt(i,130),i.end()}function TQ(t,e){t.l+=10;var r=Cs(t);return{name:r}}var kQ=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function CQ(t){return!t.Workbook||!t.Workbook.WBProps?"false":aW(t.Workbook.WBProps.date1904)?"true":"false"}var IQ="][*?/\\".split("");function MP(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return IQ.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function PQ(t,e,r){t.forEach(function(n,i){MP(n);for(var s=0;s<i;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var a=e&&e[i]&&e[i].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function LQ(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];PQ(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)eX(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}function OP(t){var e=[Li];e[e.length]=Nt("workbook",null,{xmlns:rf[0],"xmlns:r":Wi.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(kQ.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Nt("workbookPr",null,n);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var a={name:xn(t.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=Nt("sheet",null,a)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Nt("definedName",xn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function RQ(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Iw(t),r.name=Cs(t),r}function jQ(t,e){return e||(e=Je(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),$_(t.strRelID,e),Ki(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function FQ(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var i=e>8?Cs(t):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function DQ(t,e){e||(e=Je(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),X8(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function MQ(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),s=CW(t),a=KY(t,0,r),o=q_(t);t.l=n;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function OQ(t,e){dt(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,i={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};dt(t,156,jQ(i))}dt(t,144)}function BQ(t,e){e||(e=Je(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Ki("SheetJS",e),Ki(L1.version,e),Ki(L1.version,e),Ki("7262",e),e.length>e.l?e.slice(0,e.l):e}function UQ(t,e){e||(e=Je(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function VQ(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,i=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&i==-1?i=n:r[n].Hidden==1&&s==-1&&(s=n);s>i||(dt(t,135),dt(t,158,UQ(i)),dt(t,136))}}function zQ(t,e){var r=ra();return dt(r,131),dt(r,128,BQ()),dt(r,153,DQ(t.Workbook&&t.Workbook.WBProps||null)),VQ(r,t),OQ(r,t),dt(r,132),r.end()}function HQ(t,e,r){return(e.slice(-4)===".bin"?zQ:OP)(t)}function qQ(t,e,r,n,i){return(e.slice(-4)===".bin"?NQ:FP)(t,r,n,i)}function $Q(t,e,r){return(e.slice(-4)===".bin"?cK:wP)(t,r)}function WQ(t,e,r){return(e.slice(-4)===".bin"?DG:gP)(t,r)}function GQ(t,e,r){return(e.slice(-4)===".bin"?EK:EP)(t)}function KQ(t){return(t.slice(-4)===".bin"?xK:SP)()}function YQ(t,e){var r=[];return t.Props&&r.push($W(t.Props,e)),t.Custprops&&r.push(WW(t.Props,t.Custprops)),r.join("")}function XQ(){return""}function QQ(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,i){var s=[];s.push(Nt("NumberFormat",null,{"ss:Format":xn(ci[n.numFmtId])}));var a={"ss:ID":"s"+(21+i)};r.push(Nt("Style",s.join(""),a))}),Nt("Styles",r.join(""))}function BP(t){return Nt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+Y_(t.Ref,{r:0,c:0})})}function JQ(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var i=e[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(BP(i)))}return Nt("Names",r.join(""))}function ZQ(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(BP(o)))}return s.join("")}function eJ(t,e,r,n){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(Nt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(Nt("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(Nt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(Nt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(as("ProtectContents","True")),t["!protect"].objects&&i.push(as("ProtectObjects","True")),t["!protect"].scenarios&&i.push(as("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(as("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(as("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){t["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":Nt("WorksheetOptions",i.join(""),{xmlns:wa.x})}function tJ(t){return t.map(function(e){var r=sW(e.t||""),n=Nt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Nt("Comment",n,{"ss:Author":e.a})}).join("")}function rJ(t,e,r,n,i,s,a){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+xn(Y_(t.f,a))),t.F&&t.F.slice(0,e.length)==e){var l=Gi(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=xn(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=xn(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],h=0;h!=u.length;++h)u[h].s.c!=a.c||u[h].s.r!=a.r||(u[h].e.c>u[h].s.c&&(o["ss:MergeAcross"]=u[h].e.c-u[h].s.c),u[h].e.r>u[h].s.r&&(o["ss:MergeDown"]=u[h].e.r-u[h].s.r));var f="",p="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",p=String(t.v);break;case"b":f="Boolean",p=t.v?"1":"0";break;case"e":f="Error",p=Fp[t.v];break;case"d":f="DateTime",p=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||ci[14]);break;case"s":f="String",p=iW(t.v||"");break}var d=du(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+d),o["ss:Index"]=a.c+1;var v=t.v!=null?p:"",y=t.t=="z"?"":'<Data ss:Type="'+f+'">'+v+"</Data>";return(t.c||[]).length>0&&(y+=tJ(t.c)),Nt("Cell",y,o)}function nJ(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=vP(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function iJ(t,e,r,n){if(!t["!ref"])return"";var i=Vn(t["!ref"]),s=t["!merges"]||[],a=0,o=[];t["!cols"]&&t["!cols"].forEach(function(_,w){G_(_);var S=!!_.width,C=Y2(w,_),j={"ss:Index":w+1};S&&(j["ss:Width"]=z1(C.width)),_.hidden&&(j["ss:Hidden"]="1"),o.push(Nt("Column",null,j))});for(var l=Array.isArray(t),u=i.s.r;u<=i.e.r;++u){for(var h=[nJ(u,(t["!rows"]||[])[u])],f=i.s.c;f<=i.e.c;++f){var p=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>f)&&!(s[a].s.r>u)&&!(s[a].e.c<f)&&!(s[a].e.r<u)){(s[a].s.c!=f||s[a].s.r!=u)&&(p=!0);break}if(!p){var d={r:u,c:f},v=vn(d),y=l?(t[u]||[])[f]:t[v];h.push(rJ(y,v,t,e,r,n,d))}}h.push("</Row>"),h.length>2&&o.push(h.join(""))}return o.join("")}function sJ(t,e,r){var n=[],i=r.SheetNames[t],s=r.Sheets[i],a=s?ZQ(s,e,t,r):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=s?iJ(s,e,t,r):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(eJ(s,e,t,r)),n.join("")}function aJ(t,e){e||(e={}),t.SSF||(t.SSF=ia(ci)),t.SSF&&(q2(),H2(t.SSF),e.revssf=$2(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],du(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(YQ(t,e)),r.push(XQ()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Nt("Worksheet",sJ(n,e,t),{"ss:Name":xn(t.SheetNames[n])}));return r[2]=QQ(t,e),r[3]=JQ(t),Li+Nt("Workbook",r.join(""),{xmlns:wa.ss,"xmlns:o":wa.o,"xmlns:x":wa.x,"xmlns:ss":wa.ss,"xmlns:dt":wa.dt,"xmlns:html":wa.html})}var My={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function oJ(t,e){var r=[],n=[],i=[],s=0,a,o=wE(RE,"n"),l=wE(jE,"n");if(t.Props)for(a=hs(t.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(l,a[s])?n:i).push([a[s],t.Props[a[s]]]);if(t.Custprops)for(a=hs(t.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(l,a[s])?n:i).push([a[s],t.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)cP.indexOf(i[s][0])>-1||aP.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);n.length&&_n.utils.cfb_add(e,"/SummaryInformation",BE(n,My.SI,l,jE)),(r.length||u.length)&&_n.utils.cfb_add(e,"/DocumentSummaryInformation",BE(r,My.DSI,o,RE,u.length?u:null,My.UDI))}function lJ(t,e){var r=e||{},n=_n.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return _n.utils.cfb_add(n,i,UP(t,r)),r.biff==8&&(t.Props||t.Custprops)&&oJ(t,n),r.biff==8&&t.vbaraw&&NK(n,_n.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var cJ={0:{f:dX},1:{f:wX},2:{f:UX},3:{f:kX},4:{f:AX},5:{f:DX},6:{f:$X},7:{f:LX},8:{f:JX},9:{f:QX},10:{f:YX},11:{f:XX},12:{f:bX},13:{f:zX},14:{f:IX},15:{f:NX},16:{f:OX},17:{f:GX},18:{f:jX},19:{f:H_},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:MQ},40:{},42:{},43:{f:$G},44:{f:HG},45:{f:KG},46:{f:XG},47:{f:YG},48:{},49:{f:bW},50:{},51:{f:dK},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:SG},62:{f:qX},63:{f:yK},64:{f:pQ},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:el,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:uQ},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:yX},148:{f:mX,p:16},151:{f:iQ},152:{},153:{f:FQ},154:{},155:{},156:{f:RQ},157:{},158:{},159:{T:1,f:RG},160:{T:-1},161:{T:1,f:hh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:ZX},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:uK},336:{T:-1},337:{f:mK,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Iw},357:{},358:{},359:{},360:{T:1},361:{},362:{f:xG},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:sQ},427:{f:aQ},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:lQ},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:xX},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:rQ},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Iw},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:SK},633:{T:1},634:{T:-1},635:{T:1,f:_K},636:{T:-1},637:{f:NW},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:TQ},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:mQ},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ct(t,e,r,n){var i=e;if(!isNaN(i)){var s=n||(r||[]).length||0,a=t.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&U_(r)&&t.push(r)}}function uJ(t,e,r,n){var i=(r||[]).length||0;if(i<=8224)return Ct(t,e,r,i);var s=e;if(!isNaN(s)){for(var a=r.parts||[],o=0,l=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var h=t.next(4);for(h.write_shift(2,s),h.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u;l<i;){for(h=t.next(4),h.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;h.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u}}}function Mp(t,e,r){return t||(t=Je(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function hJ(t,e,r,n){var i=Je(9);return Mp(i,t,e),hP(r,n||"b",i),i}function dJ(t,e,r){var n=Je(8+2*r.length);return Mp(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function fJ(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?na(zs(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?Ct(t,2,TG(r,n,i)):Ct(t,3,NG(r,n,i));return;case"b":case"e":Ct(t,5,hJ(r,n,e.v,e.t));return;case"s":case"str":Ct(t,4,dJ(r,n,(e.v||"").slice(0,255)));return}Ct(t,1,Mp(null,r,n))}function pJ(t,e,r,n){var i=Array.isArray(e),s=Vn(e["!ref"]||"A1"),a,o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=Ii(s)}for(var u=s.s.r;u<=s.e.r;++u){o=ls(u);for(var h=s.s.c;h<=s.e.c;++h){u===s.s.r&&(l[h]=ks(h)),a=l[h]+o;var f=i?(e[u]||[])[h]:e[a];f&&fJ(t,f,u,h)}}}function mJ(t,e){for(var r=e||{},n=ra(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(i=s);if(i==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Ct(n,r.biff==4?1033:r.biff==3?521:9,W_(t,16,r)),pJ(n,t.Sheets[t.SheetNames[i]],i,r),Ct(n,10),n.end()}function gJ(t,e,r){Ct(t,49,cG({sz:12,name:"Arial"},r))}function xJ(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&Ct(t,1054,dG(i,e[i],r))})}function yJ(t,e){var r=Je(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Ct(t,2151,r),r=Je(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),pP(Vn(e["!ref"]||"A1"),r),r.write_shift(4,4),Ct(t,2152,r)}function vJ(t,e){for(var r=0;r<16;++r)Ct(t,224,VE({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Ct(t,224,VE(n,0,e))})}function wJ(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Ct(t,440,wG(n)),n[1].Tooltip&&Ct(t,2048,_G(n))}delete e["!links"]}function _J(t,e){if(e){var r=0;e.forEach(function(n,i){++r<=256&&n&&Ct(t,125,AG(Y2(i,n),i))})}}function bJ(t,e,r,n,i){var s=16+du(i.cellXfs,e,i);if(e.v==null&&!e.bf){Ct(t,513,eh(r,n,s));return}if(e.bf)Ct(t,6,WY(e,r,n,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?na(zs(e.v)):e.v;Ct(t,515,gG(r,n,a,s));break;case"b":case"e":Ct(t,517,mG(r,n,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=Q_(i.Strings,e.v,i.revStrings);Ct(t,253,uG(r,n,o,s))}else Ct(t,516,hG(r,n,(e.v||"").slice(0,255),s,i));break;default:Ct(t,513,eh(r,n,s))}}function SJ(t,e,r){var n=ra(),i=r.SheetNames[t],s=r.Sheets[i]||{},a=(r||{}).Workbook||{},o=(a.Sheets||[])[t]||{},l=Array.isArray(s),u=e.biff==8,h,f="",p=[],d=Vn(s["!ref"]||"A1"),v=u?65536:16384;if(d.e.c>255||d.e.r>=v){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");d.e.c=Math.min(d.e.c,255),d.e.r=Math.min(d.e.c,v-1)}Ct(n,2057,W_(r,16,e)),Ct(n,13,$a(1)),Ct(n,12,$a(100)),Ct(n,15,Bs(!0)),Ct(n,17,Bs(!1)),Ct(n,16,Zu(.001)),Ct(n,95,Bs(!0)),Ct(n,42,Bs(!1)),Ct(n,43,Bs(!1)),Ct(n,130,$a(1)),Ct(n,128,pG()),Ct(n,131,Bs(!1)),Ct(n,132,Bs(!1)),u&&_J(n,s["!cols"]),Ct(n,512,fG(d,e)),u&&(s["!links"]=[]);for(var y=d.s.r;y<=d.e.r;++y){f=ls(y);for(var _=d.s.c;_<=d.e.c;++_){y===d.s.r&&(p[_]=ks(_)),h=p[_]+f;var w=l?(s[y]||[])[_]:s[h];w&&(bJ(n,w,y,_,e),u&&w.l&&s["!links"].push([h,w.l]))}}var S=o.CodeName||o.name||i;return u&&Ct(n,574,lG((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&Ct(n,229,vG(s["!merges"])),u&&wJ(n,s),Ct(n,442,fP(S)),u&&yJ(n,s),Ct(n,10),n.end()}function AJ(t,e,r){var n=ra(),i=(t||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=r.biff==8,l=r.biff==5;if(Ct(n,2057,W_(t,5,r)),r.bookType=="xla"&&Ct(n,135),Ct(n,225,o?$a(1200):null),Ct(n,193,YW(2)),l&&Ct(n,191),l&&Ct(n,192),Ct(n,226),Ct(n,92,iG("SheetJS",r)),Ct(n,66,$a(o?1200:1252)),o&&Ct(n,353,$a(0)),o&&Ct(n,448),Ct(n,317,EG(t.SheetNames.length)),o&&t.vbaraw&&Ct(n,211),o&&t.vbaraw){var u=a.CodeName||"ThisWorkbook";Ct(n,442,fP(u))}Ct(n,156,$a(17)),Ct(n,25,Bs(!1)),Ct(n,18,Bs(!1)),Ct(n,19,$a(0)),o&&Ct(n,431,Bs(!1)),o&&Ct(n,444,$a(0)),Ct(n,61,oG()),Ct(n,64,Bs(!1)),Ct(n,141,$a(0)),Ct(n,34,Bs(CQ(t)=="true")),Ct(n,14,Bs(!0)),o&&Ct(n,439,Bs(!1)),Ct(n,218,$a(0)),gJ(n,t,r),xJ(n,t.SSF,r),vJ(n,r),o&&Ct(n,352,Bs(!1));var h=n.end(),f=ra();o&&Ct(f,140,bG()),o&&r.Strings&&uJ(f,252,aG(r.Strings)),Ct(f,10);var p=f.end(),d=ra(),v=0,y=0;for(y=0;y<t.SheetNames.length;++y)v+=(o?12:11)+(o?2:1)*t.SheetNames[y].length;var _=h.length+v+p.length;for(y=0;y<t.SheetNames.length;++y){var w=s[y]||{};Ct(d,133,sG({pos:_,hs:w.Hidden||0,dt:0,name:t.SheetNames[y]},r)),_+=e[y].length}var S=d.end();if(v!=S.length)throw new Error("BS8 "+v+" != "+S.length);var C=[];return h.length&&C.push(h),S.length&&C.push(S),p.length&&C.push(p),ss(C)}function EJ(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ia(ci)),t&&t.SSF&&(q2(),H2(t.SSF),r.revssf=$2(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,J_(r),r.cellXfs=[],du(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)n[n.length]=SJ(i,r,t);return n.unshift(AJ(t,n,r)),ss(n)}function UP(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var i=Ia(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return EJ(t,e);case 4:case 3:case 2:return mJ(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function NJ(t,e,r,n){for(var i=t["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,u=0;u<i.length;++u)if(!(i[u].s.r>r||i[u].s.c>a)&&!(i[u].e.r<r||i[u].e.c<a)){if(i[u].s.r<r||i[u].s.c<a){o=-1;break}o=i[u].e.r-i[u].s.r+1,l=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var h=vn({r,c:a}),f=n.dense?(t[r]||[])[a]:t[h],p=f&&f.v!=null&&(f.h||nW(f.w||(Ol(f),f.w)||""))||"",d={};o>1&&(d.rowspan=o),l>1&&(d.colspan=l),n.editable?p='<span contenteditable="true">'+p+"</span>":f&&(d["data-t"]=f&&f.t||"z",f.v!=null&&(d["data-v"]=f.v),f.z!=null&&(d["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+f.l.Target+'">'+p+"</a>")),d.id=(n.id||"sjs")+"-"+h,s.push(Nt("td",p,d))}}var v="<tr>";return v+s.join("")+"</tr>"}var TJ='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',kJ="</body></html>";function CJ(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function VP(t,e){var r=e||{},n=r.header!=null?r.header:TJ,i=r.footer!=null?r.footer:kJ,s=[n],a=Ia(t["!ref"]);r.dense=Array.isArray(t),s.push(CJ(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)s.push(NJ(t,a,o,r));return s.push("</table>"+i),s.join("")}function zP(t,e,r){var n=r||{},i=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var a=typeof n.origin=="string"?Gi(n.origin):n.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(t["!ref"]){var h=Ia(t["!ref"]);u.s.r=Math.min(u.s.r,h.s.r),u.s.c=Math.min(u.s.c,h.s.c),u.e.r=Math.max(u.e.r,h.e.r),u.e.c=Math.max(u.e.c,h.e.c),i==-1&&(u.e.r=i=h.e.r+1)}var f=[],p=0,d=t["!rows"]||(t["!rows"]=[]),v=0,y=0,_=0,w=0,S=0,C=0;for(t["!cols"]||(t["!cols"]=[]);v<o.length&&y<l;++v){var j=o[v];if(KE(j)){if(n.display)continue;d[y]={hidden:!0}}var q=j.children;for(_=w=0;_<q.length;++_){var G=q[_];if(!(n.display&&KE(G))){var E=G.hasAttribute("data-v")?G.getAttribute("data-v"):G.hasAttribute("v")?G.getAttribute("v"):oW(G.innerHTML),k=G.getAttribute("data-z")||G.getAttribute("z");for(p=0;p<f.length;++p){var A=f[p];A.s.c==w+s&&A.s.r<y+i&&y+i<=A.e.r&&(w=A.e.c+1-s,p=-1)}C=+G.getAttribute("colspan")||1,((S=+G.getAttribute("rowspan")||1)>1||C>1)&&f.push({s:{r:y+i,c:w+s},e:{r:y+i+(S||1)-1,c:w+s+(C||1)-1}});var D={t:"s",v:E},N=G.getAttribute("data-t")||G.getAttribute("t")||"";E!=null&&(E.length==0?D.t=N||"z":n.raw||E.trim().length==0||N=="s"||(E==="TRUE"?D={t:"b",v:!0}:E==="FALSE"?D={t:"b",v:!1}:isNaN(El(E))?isNaN(rp(E).getDate())||(D={t:"d",v:zs(E)},n.cellDates||(D={t:"n",v:na(D.v)}),D.z=n.dateNF||ci[14]):D={t:"n",v:El(E)})),D.z===void 0&&k!=null&&(D.z=k);var R="",L=G.getElementsByTagName("A");if(L&&L.length)for(var se=0;se<L.length&&!(L[se].hasAttribute("href")&&(R=L[se].getAttribute("href"),R.charAt(0)!="#"));++se);R&&R.charAt(0)!="#"&&(D.l={Target:R}),n.dense?(t[y+i]||(t[y+i]=[]),t[y+i][w+s]=D):t[vn({c:w+s,r:y+i})]=D,u.e.c<w+s&&(u.e.c=w+s),w+=C}}++y}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,y-1+i),t["!ref"]=Ii(u),y>=l&&(t["!fullref"]=Ii((u.e.r=o.length-v+y-1+i,u))),t}function HP(t,e){var r=e||{},n=r.dense?[]:{};return zP(n,t,e)}function IJ(t,e){return oh(HP(t,e),e)}function KE(t){var e="",r=PJ(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function PJ(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var LJ=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+ip({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Li+e}}(),YE=function(){var t=function(s){return xn(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,a,o){var l=[];l.push('      <table:table table:name="'+xn(a.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,h=0,f=Ia(s["!ref"]||"A1"),p=s["!merges"]||[],d=0,v=Array.isArray(s);if(s["!cols"])for(h=0;h<=f.e.c;++h)l.push("        <table:table-column"+(s["!cols"][h]?' table:style-name="co'+s["!cols"][h].ods+'"':"")+`></table:table-column>
`);var y="",_=s["!rows"]||[];for(u=0;u<f.s.r;++u)y=_[u]?' table:style-name="ro'+_[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=f.e.r;++u){for(y=_[u]?' table:style-name="ro'+_[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),h=0;h<f.s.c;++h)l.push(e);for(;h<=f.e.c;++h){var w=!1,S={},C="";for(d=0;d!=p.length;++d)if(!(p[d].s.c>h)&&!(p[d].s.r>u)&&!(p[d].e.c<h)&&!(p[d].e.r<u)){(p[d].s.c!=h||p[d].s.r!=u)&&(w=!0),S["table:number-columns-spanned"]=p[d].e.c-p[d].s.c+1,S["table:number-rows-spanned"]=p[d].e.r-p[d].s.r+1;break}if(w){l.push(r);continue}var j=vn({r:u,c:h}),q=v?(s[u]||[])[h]:s[j];if(q&&q.f&&(S["table:formula"]=xn(JY(q.f)),q.F&&q.F.slice(0,j.length)==j)){var G=Ia(q.F);S["table:number-matrix-columns-spanned"]=G.e.c-G.s.c+1,S["table:number-matrix-rows-spanned"]=G.e.r-G.s.r+1}if(!q){l.push(e);continue}switch(q.t){case"b":C=q.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=q.v?"true":"false";break;case"n":C=q.w||String(q.v||0),S["office:value-type"]="float",S["office:value"]=q.v||0;break;case"s":case"str":C=q.v==null?"":q.v,S["office:value-type"]="string";break;case"d":C=q.w||zs(q.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=zs(q.v).toISOString(),S["table:style-name"]="ce1";break;default:l.push(e);continue}var E=t(C);if(q.l&&q.l.Target){var k=q.l.Target;k=k.charAt(0)=="#"?"#"+ZY(k.slice(1)):k,k.charAt(0)!="#"&&!k.match(/^\w+:/)&&(k="../"+k),E=Nt("text:a",E,{"xlink:href":k.replace(/&/g,"&amp;")})}l.push("          "+Nt("table:table-cell",Nt("text:p",E,{}),S)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var h=0;h<u["!cols"].length;++h)if(u["!cols"][h]){var f=u["!cols"][h];if(f.width==null&&f.wpx==null&&f.wch==null)continue;G_(f),f.ods=o;var p=u["!cols"][h].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var h=0;h<u["!rows"].length;++h)if(u["!rows"][h]){u["!rows"][h].ods=l;var f=u["!rows"][h].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var l=[Li],u=ip({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),h=ip({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+h+`>
`),l.push(iP().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),i(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=a.SheetNames.length;++f)l.push(n(a.Sheets[a.SheetNames[f]],a,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function qP(t,e){if(e.bookType=="fods")return YE(t,e);var r=D_(),n="",i=[],s=[];return n="mimetype",Ir(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Ir(r,n,YE(t,e)),i.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Ir(r,n,LJ(t,e)),i.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Ir(r,n,Li+iP()),i.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Ir(r,n,qW(s)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Ir(r,n,zW(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function $1(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function RJ(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):yo(np(t))}function jJ(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function au(t){var e=t.reduce(function(i,s){return i+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(i){r.set(i,n),n+=i.length}),r}function FJ(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=r>=0?0:128}function sp(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function pn(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function _d(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Mi(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],i=sp(t,r),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=sp(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(n))}var u={data:o,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function es(t){var e=[];return t.forEach(function(r,n){r.forEach(function(i){i.data&&(e.push(pn(n*8+i.type)),i.type==2&&e.push(pn(i.data.length)),e.push(i.data))})}),au(e)}function co(t){for(var e,r=[],n=[0];n[0]<t.length;){var i=sp(t,n),s=Mi(t.slice(n[0],n[0]+i));n[0]+=i;var a={id:_d(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=Mi(o.data),u=_d(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(a.merge=_d(s[3][0].data)>>>0>0),r.push(a)}return r}function bh(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:pn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:pn(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:pn(a.data.length)}],n[2].push({data:es(a.meta),type:2})});var s=es(n);e.push(pn(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),au(e)}function DJ(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=sp(e,r),i=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}i.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),i=[au(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(i.push(i[0].slice(-l)),u-=l;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-l,-l+u))}}var h=au(i);if(h.length!=n)throw new Error("Unexpected length: ".concat(h.length," != ").concat(n));return h}function uo(t){for(var e=[],r=0;r<t.length;){var n=t[r++],i=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(DJ(n,t.slice(r,r+i))),r+=i}if(r!==t.length)throw new Error("data is not a valid framed stream!");return au(e)}function Sh(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),i=new Uint8Array(4);e.push(i);var s=pn(n),a=s.length;e.push(s),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),a+=n,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,r+=n}return au(e)}function Oy(t,e){var r=new Uint8Array(32),n=$1(r),i=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,FJ(r,i,t.v),s|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(i,e.indexOf(t.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,i)}function By(t,e){var r=new Uint8Array(32),n=$1(r),i=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(i,e.indexOf(t.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,i)}function hc(t){var e=Mi(t);return sp(e[1][0].data)}function MJ(t,e,r){var n,i,s,a;if(!((n=t[6])!=null&&n[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=t[8])==null?void 0:s[0])==null?void 0:a.data)&&_d(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=$1(t[7][0].data),h=0,f=[],p=$1(t[4][0].data),d=0,v=[],y=0;y<e.length;++y){if(e[y]==null){u.setUint16(y*2,65535,!0),p.setUint16(y*2,65535);continue}u.setUint16(y*2,h,!0),p.setUint16(y*2,d,!0);var _,w;switch(typeof e[y]){case"string":_=Oy({t:"s",v:e[y]},r),w=By({t:"s",v:e[y]},r);break;case"number":_=Oy({t:"n",v:e[y]},r),w=By({t:"n",v:e[y]},r);break;case"boolean":_=Oy({t:"b",v:e[y]},r),w=By({t:"b",v:e[y]},r);break;default:throw new Error("Unsupported value "+e[y])}f.push(_),h+=_.length,v.push(w),d+=w.length,++l}for(t[2][0].data=pn(l);y<t[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),p.setUint16(y*2,65535,!0);return t[6][0].data=au(f),t[3][0].data=au(v),l}function OJ(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Ia(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Ii(n)));var s=W1(r,{range:n,header:1}),a=["~Sh33tJ5~"];s.forEach(function(O){return O.forEach(function(B){typeof B=="string"&&a.push(B)})});var o={},l=[],u=_n.read(e.numbers,{type:"base64"});u.FileIndex.map(function(O,B){return[O,u.FullPaths[B]]}).forEach(function(O){var B=O[0],z=O[1];if(B.type==2&&B.name.match(/\.iwa/)){var Z=B.content,de=uo(Z),Se=co(de);Se.forEach(function(Ae){l.push(Ae.id),o[Ae.id]={deps:[],location:z,type:_d(Ae.messages[0].meta[1][0].data)}})}}),l.sort(function(O,B){return O-B});var h=l.filter(function(O){return O>1}).map(function(O){return[O,pn(O)]});u.FileIndex.map(function(O,B){return[O,u.FullPaths[B]]}).forEach(function(O){var B=O[0];if(O[1],!!B.name.match(/\.iwa/)){var z=co(uo(B.content));z.forEach(function(Z){Z.messages.forEach(function(de){h.forEach(function(Se){Z.messages.some(function(Ae){return _d(Ae.meta[1][0].data)!=11006&&jJ(Ae.data,Se[1])})&&o[Se[0]].deps.push(Z.id)})})})}});for(var f=_n.find(u,o[1].location),p=co(uo(f.content)),d,v=0;v<p.length;++v){var y=p[v];y.id==1&&(d=y)}var _=hc(Mi(d.messages[0].data)[1][0].data);for(f=_n.find(u,o[_].location),p=co(uo(f.content)),v=0;v<p.length;++v)y=p[v],y.id==_&&(d=y);for(_=hc(Mi(d.messages[0].data)[2][0].data),f=_n.find(u,o[_].location),p=co(uo(f.content)),v=0;v<p.length;++v)y=p[v],y.id==_&&(d=y);for(_=hc(Mi(d.messages[0].data)[2][0].data),f=_n.find(u,o[_].location),p=co(uo(f.content)),v=0;v<p.length;++v)y=p[v],y.id==_&&(d=y);var w=Mi(d.messages[0].data);{w[6][0].data=pn(n.e.r+1),w[7][0].data=pn(n.e.c+1);var S=hc(w[46][0].data),C=_n.find(u,o[S].location),j=co(uo(C.content));{for(var q=0;q<j.length&&j[q].id!=S;++q);if(j[q].id!=S)throw"Bad ColumnRowUIDMapArchive";var G=Mi(j[q].messages[0].data);G[1]=[],G[2]=[],G[3]=[];for(var E=0;E<=n.e.c;++E){var k=[];k[1]=k[2]=[{type:0,data:pn(E+420690)}],G[1].push({type:2,data:es(k)}),G[2].push({type:0,data:pn(E)}),G[3].push({type:0,data:pn(E)})}G[4]=[],G[5]=[],G[6]=[];for(var A=0;A<=n.e.r;++A)k=[],k[1]=k[2]=[{type:0,data:pn(A+726270)}],G[4].push({type:2,data:es(k)}),G[5].push({type:0,data:pn(A)}),G[6].push({type:0,data:pn(A)});j[q].messages[0].data=es(G)}C.content=Sh(bh(j)),C.size=C.content.length,delete w[46];var D=Mi(w[4][0].data);{D[7][0].data=pn(n.e.r+1);var N=Mi(D[1][0].data),R=hc(N[2][0].data);C=_n.find(u,o[R].location),j=co(uo(C.content));{if(j[0].id!=R)throw"Bad HeaderStorageBucket";var L=Mi(j[0].messages[0].data);for(A=0;A<s.length;++A){var se=Mi(L[2][0].data);se[1][0].data=pn(A),se[4][0].data=pn(s[A].length),L[2][A]={type:L[2][0].type,data:es(se)}}j[0].messages[0].data=es(L)}C.content=Sh(bh(j)),C.size=C.content.length;var ge=hc(D[2][0].data);C=_n.find(u,o[ge].location),j=co(uo(C.content));{if(j[0].id!=ge)throw"Bad HeaderStorageBucket";for(L=Mi(j[0].messages[0].data),E=0;E<=n.e.c;++E)se=Mi(L[2][0].data),se[1][0].data=pn(E),se[4][0].data=pn(n.e.r+1),L[2][E]={type:L[2][0].type,data:es(se)};j[0].messages[0].data=es(L)}C.content=Sh(bh(j)),C.size=C.content.length;var ve=hc(D[4][0].data);(function(){for(var O=_n.find(u,o[ve].location),B=co(uo(O.content)),z,Z=0;Z<B.length;++Z){var de=B[Z];de.id==ve&&(z=de)}var Se=Mi(z.messages[0].data);{Se[3]=[];var Ae=[];a.forEach(function(et,ot){Ae[1]=[{type:0,data:pn(ot)}],Ae[2]=[{type:0,data:pn(1)}],Ae[3]=[{type:2,data:RJ(et)}],Se[3].push({type:2,data:es(Ae)})})}z.messages[0].data=es(Se);var Ne=bh(B),Xe=Sh(Ne);O.content=Xe,O.size=O.content.length})();var ye=Mi(D[3][0].data);{var he=ye[1][0];delete ye[2];var _e=Mi(he.data);{var Ue=hc(_e[2][0].data);(function(){for(var O=_n.find(u,o[Ue].location),B=co(uo(O.content)),z,Z=0;Z<B.length;++Z){var de=B[Z];de.id==Ue&&(z=de)}var Se=Mi(z.messages[0].data);{delete Se[6],delete ye[7];var Ae=new Uint8Array(Se[5][0].data);Se[5]=[];for(var Ne=0,Xe=0;Xe<=n.e.r;++Xe){var et=Mi(Ae);Ne+=MJ(et,s[Xe],a),et[1][0].data=pn(Xe),Se[5].push({data:es(et),type:2})}Se[1]=[{type:0,data:pn(n.e.c+1)}],Se[2]=[{type:0,data:pn(n.e.r+1)}],Se[3]=[{type:0,data:pn(Ne)}],Se[4]=[{type:0,data:pn(n.e.r+1)}]}z.messages[0].data=es(Se);var ot=bh(B),mt=Sh(ot);O.content=mt,O.size=O.content.length})()}he.data=es(_e)}D[3][0].data=es(ye)}w[4][0].data=es(D)}d.messages[0].data=es(w);var Ie=bh(p),P=Sh(Ie);return f.content=P,f.size=f.content.length,u}function BJ(t){return function(r){for(var n=0;n!=t.length;++n){var i=t[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function J_(t){BJ([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function UJ(t,e){return e.bookType=="ods"?qP(t,e):e.bookType=="numbers"?OJ(t,e):e.bookType=="xlsb"?VJ(t,e):zJ(t,e)}function VJ(t,e){Zh=1024,t&&!t.SSF&&(t.SSF=ia(ci)),t&&t.SSF&&(q2(),H2(t.SSF),e.revssf=$2(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,_0?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=NP.indexOf(e.bookType)>-1,i=tP();J_(e=e||{});var s=D_(),a="",o=0;if(e.cellXfs=[],du(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",Ir(s,a,sP(t.Props,e)),i.coreprops.push(a),mn(e.rels,2,a,en.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Ir(s,a,oP(t.Props)),i.extprops.push(a),mn(e.rels,3,a,en.EXT_PROPS),t.Custprops!==t.Props&&hs(t.Custprops||{}).length>0&&(a="docProps/custom.xml",Ir(s,a,lP(t.Custprops)),i.custprops.push(a),mn(e.rels,4,a,en.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},f=t.Sheets[t.SheetNames[o-1]],p=(f||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,Ir(s,a,qQ(o-1,a,e,t,h)),i.sheets.push(a),mn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,en.WS[0])}if(f){var d=f["!comments"],v=!1,y="";d&&d.length>0&&(y="xl/comments"+o+"."+r,Ir(s,y,GQ(d,y)),i.comments.push(y),mn(h,-1,"../comments"+o+"."+r,en.CMNT),v=!0),f["!legacy"]&&v&&Ir(s,"xl/drawings/vmlDrawing"+o+".vml",AP(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}h["!id"].rId1&&Ir(s,nP(a),vd(h))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,Ir(s,a,WQ(e.Strings,a,e)),i.strs.push(a),mn(e.wbrels,-1,"sharedStrings."+r,en.SST)),a="xl/workbook."+r,Ir(s,a,HQ(t,a)),i.workbooks.push(a),mn(e.rels,1,a,en.WB),a="xl/theme/theme1.xml",Ir(s,a,bP(t.Themes,e)),i.themes.push(a),mn(e.wbrels,-1,"theme/theme1.xml",en.THEME),a="xl/styles."+r,Ir(s,a,$Q(t,a,e)),i.styles.push(a),mn(e.wbrels,-1,"styles."+r,en.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",Ir(s,a,t.vbaraw),i.vba.push(a),mn(e.wbrels,-1,"vbaProject.bin",en.VBA)),a="xl/metadata."+r,Ir(s,a,KQ(a)),i.metadata.push(a),mn(e.wbrels,-1,"metadata."+r,en.XLMETA),Ir(s,"[Content_Types].xml",rP(i,e)),Ir(s,"_rels/.rels",vd(e.rels)),Ir(s,"xl/_rels/workbook."+r+".rels",vd(e.wbrels)),delete e.revssf,delete e.ssf,s}function zJ(t,e){Zh=1024,t&&!t.SSF&&(t.SSF=ia(ci)),t&&t.SSF&&(q2(),H2(t.SSF),e.revssf=$2(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,_0?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=NP.indexOf(e.bookType)>-1,i=tP();J_(e=e||{});var s=D_(),a="",o=0;if(e.cellXfs=[],du(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",Ir(s,a,sP(t.Props,e)),i.coreprops.push(a),mn(e.rels,2,a,en.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Ir(s,a,oP(t.Props)),i.extprops.push(a),mn(e.rels,3,a,en.EXT_PROPS),t.Custprops!==t.Props&&hs(t.Custprops||{}).length>0&&(a="docProps/custom.xml",Ir(s,a,lP(t.Custprops)),i.custprops.push(a),mn(e.rels,4,a,en.CUST_PROPS));var h=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var f={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],d=(p||{})["!type"]||"sheet";switch(d){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,Ir(s,a,FP(o-1,e,t,f)),i.sheets.push(a),mn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,en.WS[0])}if(p){var v=p["!comments"],y=!1,_="";if(v&&v.length>0){var w=!1;v.forEach(function(S){S[1].forEach(function(C){C.T==!0&&(w=!0)})}),w&&(_="xl/threadedComments/threadedComment"+o+"."+r,Ir(s,_,vK(v,h,e)),i.threadedcomments.push(_),mn(f,-1,"../threadedComments/threadedComment"+o+"."+r,en.TCMNT)),_="xl/comments"+o+"."+r,Ir(s,_,EP(v)),i.comments.push(_),mn(f,-1,"../comments"+o+"."+r,en.CMNT),y=!0}p["!legacy"]&&y&&Ir(s,"xl/drawings/vmlDrawing"+o+".vml",AP(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&Ir(s,nP(a),vd(f))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,Ir(s,a,gP(e.Strings,e)),i.strs.push(a),mn(e.wbrels,-1,"sharedStrings."+r,en.SST)),a="xl/workbook."+r,Ir(s,a,OP(t)),i.workbooks.push(a),mn(e.rels,1,a,en.WB),a="xl/theme/theme1.xml",Ir(s,a,bP(t.Themes,e)),i.themes.push(a),mn(e.wbrels,-1,"theme/theme1.xml",en.THEME),a="xl/styles."+r,Ir(s,a,wP(t,e)),i.styles.push(a),mn(e.wbrels,-1,"styles."+r,en.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",Ir(s,a,t.vbaraw),i.vba.push(a),mn(e.wbrels,-1,"vbaProject.bin",en.VBA)),a="xl/metadata."+r,Ir(s,a,SP()),i.metadata.push(a),mn(e.wbrels,-1,"metadata."+r,en.XLMETA),h.length>1&&(a="xl/persons/person.xml",Ir(s,a,wK(h)),i.people.push(a),mn(e.wbrels,-1,"persons/person.xml",en.PEOPLE)),Ir(s,"[Content_Types].xml",rP(i,e)),Ir(s,"_rels/.rels",vd(e.rels)),Ir(s,"xl/_rels/workbook."+r+".rels",vd(e.wbrels)),delete e.revssf,delete e.ssf,s}function HJ(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Ml(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function $P(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Rp(e.file,_n.write(t,{type:tn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return _n.write(t,e)}function qJ(t,e){var r=ia(e||{}),n=UJ(t,r);return $J(n,r)}function $J(t,e){var r={},n=tn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?_n.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(z2(i))}return e.password&&typeof encrypt_agile<"u"?$P(encrypt_agile(i,e.password),e):e.type==="file"?Rp(e.file,i):e.type=="string"?x0(i):i}function WJ(t,e){var r=e||{},n=lJ(t,r);return $P(n,r)}function Oo(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return tp(np(n));case"binary":return np(n);case"string":return t;case"file":return Rp(e.file,n,"utf8");case"buffer":return tn?zl(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Oo(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function GJ(t,e){switch(e.type){case"base64":return tp(t);case"binary":return t;case"string":return t;case"file":return Rp(e.file,t,"binary");case"buffer":return tn?zl(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function $m(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?tp(r):e.type=="string"?x0(r):r;case"file":return Rp(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function WP(t,e){_$(),LQ(t);var r=ia(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=WP(t,r);return r.type="array",z2(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=t.SheetNames.indexOf(r.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Oo(aJ(t,r),r);case"slk":case"sylk":return Oo(CG.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"htm":case"html":return Oo(VP(t.Sheets[t.SheetNames[i]],r),r);case"txt":return GJ(GP(t.Sheets[t.SheetNames[i]],r),r);case"csv":return Oo(Z_(t.Sheets[t.SheetNames[i]],r),r,"\uFEFF");case"dif":return Oo(IG.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"dbf":return $m(kG.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"prn":return Oo(PG.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"rtf":return Oo(OG.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"eth":return Oo(mP.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"fods":return Oo(qP(t,r),r);case"wk1":return $m(zE.sheet_to_wk1(t.Sheets[t.SheetNames[i]],r),r);case"wk3":return $m(zE.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),$m(UP(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),WJ(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return qJ(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function KJ(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function YJ(t,e,r){var n={};return n.type="file",n.file=e,KJ(n),WP(t,n)}function XJ(t,e,r,n,i,s,a,o){var l=ls(r),u=o.defval,h=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,p=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!a||t[r])for(var d=e.s.c;d<=e.e.c;++d){var v=a?t[r][d]:t[n[d]+l];if(v===void 0||v.t===void 0){if(u===void 0)continue;s[d]!=null&&(p[s[d]]=u);continue}var y=v.v;switch(v.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(s[d]!=null){if(y==null)if(v.t=="e"&&y===null)p[s[d]]=null;else if(u!==void 0)p[s[d]]=u;else if(h&&y===null)p[s[d]]=null;else continue;else p[s[d]]=h&&(v.t!=="n"||v.t==="n"&&o.rawNumbers!==!1)?y:Ol(v,y,o);y!=null&&(f=!1)}}return{row:p,isempty:f}}function W1(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},h=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof h){case"string":l=Vn(h);break;case"number":l=Vn(t["!ref"]),l.s.r=h;break;default:l=h}n>0&&(i=0);var f=ls(l.s.r),p=[],d=[],v=0,y=0,_=Array.isArray(t),w=l.s.r,S=0,C={};_&&!t[w]&&(t[w]=[]);var j=u.skipHidden&&t["!cols"]||[],q=u.skipHidden&&t["!rows"]||[];for(S=l.s.c;S<=l.e.c;++S)if(!(j[S]||{}).hidden)switch(p[S]=ks(S),r=_?t[w][S]:t[p[S]+f],n){case 1:s[S]=S-l.s.c;break;case 2:s[S]=p[S];break;case 3:s[S]=u.header[S-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=Ol(r,null,u),y=C[a]||0,!y)C[a]=1;else{do o=a+"_"+y++;while(C[o]);C[a]=y,C[o]=1}s[S]=o}for(w=l.s.r+i;w<=l.e.r;++w)if(!(q[w]||{}).hidden){var G=XJ(t,l,w,p,n,s,_,u);(G.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(d[v++]=G.row)}return d.length=v,d}var XE=/"/g;function QJ(t,e,r,n,i,s,a,o){for(var l=!0,u=[],h="",f=ls(r),p=e.s.c;p<=e.e.c;++p)if(n[p]){var d=o.dense?(t[r]||[])[p]:t[n[p]+f];if(d==null)h="";else if(d.v!=null){l=!1,h=""+(o.rawNumbers&&d.t=="n"?d.v:Ol(d,null,o));for(var v=0,y=0;v!==h.length;++v)if((y=h.charCodeAt(v))===i||y===s||y===34||o.forceQuotes){h='"'+h.replace(XE,'""')+'"';break}h=="ID"&&(h='"ID"')}else d.f!=null&&!d.F?(l=!1,h="="+d.f,h.indexOf(",")>=0&&(h='"'+h.replace(XE,'""')+'"')):h="";u.push(h)}return o.blankrows===!1&&l?null:u.join(a)}function Z_(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var i=Vn(t["!ref"]),s=n.FS!==void 0?n.FS:",",a=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),h="",f=[];n.dense=Array.isArray(t);for(var p=n.skipHidden&&t["!cols"]||[],d=n.skipHidden&&t["!rows"]||[],v=i.s.c;v<=i.e.c;++v)(p[v]||{}).hidden||(f[v]=ks(v));for(var y=0,_=i.s.r;_<=i.e.r;++_)(d[_]||{}).hidden||(h=QJ(t,i,_,f,a,l,s,n),h!=null&&(n.strip&&(h=h.replace(u,"")),(h||n.blankrows!==!1)&&r.push((y++?o:"")+h)));return delete n.dense,r.join("")}function GP(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=Z_(t,e);return r}function JJ(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var i=Vn(t["!ref"]),s="",a=[],o,l=[],u=Array.isArray(t);for(o=i.s.c;o<=i.e.c;++o)a[o]=ks(o);for(var h=i.s.r;h<=i.e.r;++h)for(s=ls(h),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,r=u?(t[h]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function KP(t,e,r){var n=r||{},i=+!n.skipHeader,s=t||{},a=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Gi(n.origin):n.origin;a=l.r,o=l.c}var u,h={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var f=Vn(s["!ref"]);h.e.c=Math.max(h.e.c,f.e.c),h.e.r=Math.max(h.e.r,f.e.r),a==-1&&(a=f.e.r+1,h.e.r=a+e.length-1+i)}else a==-1&&(a=0,h.e.r=e.length-1+i);var p=n.header||[],d=0;e.forEach(function(y,_){hs(y).forEach(function(w){(d=p.indexOf(w))==-1&&(p[d=p.length]=w);var S=y[w],C="z",j="",q=vn({c:o+d,r:a+_+i});u=ap(s,q),S&&typeof S=="object"&&!(S instanceof Date)?s[q]=S:(typeof S=="number"?C="n":typeof S=="boolean"?C="b":typeof S=="string"?C="s":S instanceof Date?(C="d",n.cellDates||(C="n",S=na(S)),j=n.dateNF||ci[14]):S===null&&n.nullError&&(C="e",S=0),u?(u.t=C,u.v=S,delete u.w,delete u.R,j&&(u.z=j)):s[q]=u={t:C,v:S},j&&(u.z=j))})}),h.e.c=Math.max(h.e.c,o+p.length-1);var v=ls(a);if(i)for(d=0;d<p.length;++d)s[ks(d+o)+v]={t:"s",v:p[d]};return s["!ref"]=Ii(h),s}function ZJ(t,e){return KP(null,t,e)}function ap(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Gi(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?ap(t,vn(e)):ap(t,vn({r:e,c:r||0}))}function eZ(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function tZ(){return{SheetNames:[],Sheets:{}}}function rZ(t,e,r,n){var i=1;if(!r)for(;i<=65535&&t.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||r;for(++i;i<=65535&&t.SheetNames.indexOf(r=a+i)!=-1;++i);}if(MP(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function nZ(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=eZ(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function iZ(t,e){return t.z=e,t}function YP(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function sZ(t,e,r){return YP(t,"#"+e,r)}function aZ(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function oZ(t,e,r,n){for(var i=typeof e!="string"?e:Vn(e),s=typeof e=="string"?e:Ii(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=ap(t,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=r,n&&(l.D=!0))}return t}var ga={encode_col:ks,encode_row:ls,encode_cell:vn,encode_range:Ii,decode_col:z_,decode_row:V_,split_cell:_W,decode_cell:Gi,decode_range:Ia,format_cell:Ol,sheet_add_aoa:Y8,sheet_add_json:KP,sheet_add_dom:zP,aoa_to_sheet:nf,json_to_sheet:ZJ,table_to_sheet:HP,table_to_book:IJ,sheet_to_csv:Z_,sheet_to_txt:GP,sheet_to_json:W1,sheet_to_html:VP,sheet_to_formulae:JJ,sheet_to_row_object_array:W1,sheet_get_cell:ap,book_new:tZ,book_append_sheet:rZ,book_set_sheet_visibility:nZ,cell_set_number_format:iZ,cell_set_hyperlink:YP,cell_set_internal_link:sZ,cell_add_comment:aZ,sheet_set_array_formula:oZ,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},XP={exports:{}};(function(t,e){(function(r,n){n()})(bf,function(){function r(u,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function n(u,h,f){var p=new XMLHttpRequest;p.open("GET",u),p.responseType="blob",p.onload=function(){l(p.response,h,f)},p.onerror=function(){console.error("could not download file")},p.send()}function i(u){var h=new XMLHttpRequest;h.open("HEAD",u,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function s(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(h)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof bf=="object"&&bf.global===bf?bf:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(u,h,f){var p=a.URL||a.webkitURL,d=document.createElement("a");h=h||u.name||"download",d.download=h,d.rel="noopener",typeof u=="string"?(d.href=u,d.origin===location.origin?s(d):i(d.href)?n(u,h,f):s(d,d.target="_blank")):(d.href=p.createObjectURL(u),setTimeout(function(){p.revokeObjectURL(d.href)},4e4),setTimeout(function(){s(d)},0))}:"msSaveOrOpenBlob"in navigator?function(u,h,f){if(h=h||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(r(u,f),h);else if(i(u))n(u,h,f);else{var p=document.createElement("a");p.href=u,p.target="_blank",setTimeout(function(){s(p)})}}:function(u,h,f,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof u=="string")return n(u,h,f);var d=u.type==="application/octet-stream",v=/constructor/i.test(a.HTMLElement)||a.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||d&&v||o)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var C=_.result;C=y?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=C:location=C,p=null},_.readAsDataURL(u)}else{var w=a.URL||a.webkitURL,S=w.createObjectURL(u);p?p.location=S:location.href=S,p=null,setTimeout(function(){w.revokeObjectURL(S)},4e4)}});a.saveAs=l.saveAs=l,t.exports=l})})(XP);var lZ=XP.exports;const cZ=t=>{const{project:e,hierarchies:r,zones:n,assignments:i,doors:s,standard:a,generatedAt:o}=t,l=new ir({orientation:"portrait",unit:"mm",format:"a4"});l.setFontSize(20),l.text("Master Key System",105,20,{align:"center"}),l.setFontSize(12),l.text("Keying Schedule & Documentation",105,30,{align:"center"}),l.setFontSize(10),l.text(`Generated: ${new Date(o).toLocaleString()}`,105,40,{align:"center"}),l.text(`Standard: ${a.name} ${a.version}`,105,47,{align:"center"}),l.setFontSize(14),l.text("Project Information",14,60),l.setFontSize(10);const u=[["Standard",a.name],["Version",a.version],["Region",a.region],["Pin Configuration",`${a.pinConfig.pins} pins, ${a.pinConfig.depths} depths, MACS ${a.pinConfig.macs}`],["Max Differs Available",a.maxDiffers.toLocaleString()],["Differs Used",(e.differsUsed||0).toLocaleString()],["Keying Approach",e.keyingApproach||"zone_based"]];Ff(l,{startY:65,head:[["Property","Value"]],body:u,theme:"grid",headStyles:{fillColor:[79,70,229]}}),l.addPage(),l.setFontSize(14),l.text("Hierarchy Structure",14,20);const h=r.sort((v,y)=>v.order-y.order).map((v,y)=>[y+1,v.keySymbol,v.levelName,v.levelType,v.description||"-"]);if(Ff(l,{startY:25,head:[["#","Symbol","Level Name","Type","Description"]],body:h,theme:"striped",headStyles:{fillColor:[79,70,229]}}),n.length>0){l.addPage(),l.setFontSize(14),l.text("Zones Defined",14,20);const v=n.map((y,_)=>[_+1,y.zoneName,y.doorCount||0,y.color]);Ff(l,{startY:25,head:[["#","Zone Name","Door Count","Color"]],body:v,theme:"striped",headStyles:{fillColor:[79,70,229]}})}l.addPage(),l.setFontSize(14),l.text("Door Assignments",14,20);const f=i.map((v,y)=>{const _=s.find(S=>S.id===v.doorId),w=r.find(S=>S.hierarchyId===v.hierarchyId);return[y+1,(_==null?void 0:_.mark)||"Unknown",(_==null?void 0:_.use)||"-",(_==null?void 0:_.zone)||"-",(_==null?void 0:_.level)||"-",(w==null?void 0:w.keySymbol)||"-",(w==null?void 0:w.levelName)||"-"]});Ff(l,{startY:25,head:[["#","Door Mark","Use","Zone","Floor","Key Symbol","Key Level"]],body:f,theme:"striped",headStyles:{fillColor:[79,70,229]},styles:{fontSize:8}}),l.addPage(),l.setFontSize(14),l.text("Statistics Summary",14,20);const p=[["Total Doors",s.length],["Assigned Doors",i.length],["Unassigned Doors",s.length-i.length],["Hierarchy Levels",r.length],["Zones Defined",n.length],["Differs Used",e.differsUsed||0],["Differs Remaining",(e.maxDiffersAvailable||0)-(e.differsUsed||0)]];Ff(l,{startY:25,head:[["Metric","Value"]],body:p,theme:"grid",headStyles:{fillColor:[79,70,229]}});const d=`master_key_schedule_${new Date().getTime()}.pdf`;return l.save(d),d},uZ=t=>{const{project:e,hierarchies:r,zones:n,assignments:i,doors:s,standard:a,generatedAt:o}=t,l=ga.book_new(),u=[["Master Key System - Project Information"],[""],["Generated",new Date(o).toLocaleString()],["Standard",a.name],["Version",a.version],["Region",a.region],["Pin Configuration",`${a.pinConfig.pins} pins, ${a.pinConfig.depths} depths, MACS ${a.pinConfig.macs}`],["Max Differs Available",a.maxDiffers],["Differs Used",e.differsUsed||0],["Differs Remaining",(e.maxDiffersAvailable||0)-(e.differsUsed||0)],["Keying Approach",e.keyingApproach||"zone_based"]],h=ga.aoa_to_sheet(u);ga.book_append_sheet(l,h,"Project Info");const f=[["#","Key Symbol","Level Name","Level Type","Order","Description"],...r.sort((q,G)=>q.order-G.order).map((q,G)=>[G+1,q.keySymbol,q.levelName,q.levelType,q.order,q.description||"-"])],p=ga.aoa_to_sheet(f);if(ga.book_append_sheet(l,p,"Hierarchy"),n.length>0){const q=[["#","Zone Name","Door Count","Color"],...n.map((E,k)=>[k+1,E.zoneName,E.doorCount||0,E.color])],G=ga.aoa_to_sheet(q);ga.book_append_sheet(l,G,"Zones")}const d=[["#","Door Mark","Use","Zone","Floor","Key Symbol","Key Level","Hardware","Fire Rating","ADA"],...i.map((q,G)=>{const E=s.find(A=>A.id===q.doorId),k=r.find(A=>A.hierarchyId===q.hierarchyId);return[G+1,(E==null?void 0:E.mark)||"Unknown",(E==null?void 0:E.use)||"-",(E==null?void 0:E.zone)||"-",(E==null?void 0:E.level)||"-",(k==null?void 0:k.keySymbol)||"-",(k==null?void 0:k.levelName)||"-",(E==null?void 0:E.hardware)||"-",(E==null?void 0:E.fireRating)||"-",E!=null&&E.ada?"Yes":"No"]})],v=ga.aoa_to_sheet(d);ga.book_append_sheet(l,v,"Keying Schedule");const y={};i.forEach(q=>{const G=r.find(E=>E.hierarchyId===q.hierarchyId);G&&(y[G.keySymbol]||(y[G.keySymbol]={symbol:G.keySymbol,level:G.levelName,count:0}),y[G.keySymbol].count++)});const _=[["Key Symbol","Key Level","Quantity Needed"],...Object.values(y).map(q=>[q.symbol,q.level,q.count])],w=ga.aoa_to_sheet(_);ga.book_append_sheet(l,w,"Cutting List");const S=[["Master Key System - Statistics"],[""],["Metric","Value"],["Total Doors",s.length],["Assigned Doors",i.length],["Unassigned Doors",s.length-i.length],["Hierarchy Levels",r.length],["Zones Defined",n.length],["Differs Used",e.differsUsed||0],["Differs Remaining",(e.maxDiffersAvailable||0)-(e.differsUsed||0)],["Utilization %",`${((e.differsUsed||0)/(e.maxDiffersAvailable||1)*100).toFixed(2)}%`]],C=ga.aoa_to_sheet(S);ga.book_append_sheet(l,C,"Statistics");const j=`master_key_schedule_${new Date().getTime()}.xlsx`;return YJ(l,j),j},hZ=t=>{const{hierarchies:e,assignments:r,doors:n}=t,s=[["Door Mark","Use","Zone","Floor","Hardware","Fire Rating","ADA","Key Symbol","Key Level"],...r.map(l=>{const u=n.find(f=>f.id===l.doorId),h=e.find(f=>f.hierarchyId===l.hierarchyId);return[(u==null?void 0:u.mark)||"Unknown",(u==null?void 0:u.use)||"-",(u==null?void 0:u.zone)||"-",(u==null?void 0:u.level)||"-",(u==null?void 0:u.hardware)||"-",(u==null?void 0:u.fireRating)||"-",u!=null&&u.ada?"Yes":"No",(h==null?void 0:h.keySymbol)||"-",(h==null?void 0:h.levelName)||"-"]})].map(l=>l.join(",")).join(`
`),a=new Blob([s],{type:"text/csv;charset=utf-8;"}),o=`master_key_schedule_${new Date().getTime()}.csv`;return lZ.saveAs(a,o),o},dZ=(t,e)=>{try{let r;switch(t){case"pdf":r=cZ(e);break;case"excel":r=uZ(e);break;case"csv":r=hZ(e);break;default:throw new Error(`Unsupported export format: ${t}`)}return{success:!0,filename:r}}catch(r){return console.error("Export failed:",r),{success:!1,error:r.message}}},Wm=({onNext:t,onBack:e,projectDoors:r=[],onExportComplete:n,showNotice:i})=>{const{mkProject:s,hierarchies:a,zones:o,assignments:l,generateExport:u}=tl(),[h,f]=we.useState("pdf"),[p,d]=we.useState(!1),[v,y]=we.useState(!1),_=[{id:"pdf",name:"PDF Document",description:"Professional keying schedule with visual hierarchy tree",icon:hw,color:"red",features:["Complete keying schedule","Visual hierarchy tree","Door assignments table","Standards compliance report"]},{id:"excel",name:"Excel Workbook",description:"Spreadsheet with multiple sheets for analysis",icon:S1,color:"green",features:["Keying schedule sheet","Cutting list sheet","Statistics sheet","Sortable and filterable"]},{id:"csv",name:"CSV Files",description:"Simple text files for custom processing",icon:gV,color:"blue",features:["Keying schedule CSV","Door assignments CSV","Hierarchy levels CSV","Compatible with all systems"]}],w=_.find(C=>C.id===h),S=async()=>{d(!0),y(!1);try{const C=await u(h,{includeHierarchy:!0,includeZones:!0,includeCuttingList:!0},r);console.log("Export data generated:",C);const j=dZ(h,C);if(j.success)y(!0),n&&n(),setTimeout(async()=>{i&&await i("Export Successful",`${w.name} generated successfully!

File: ${j.filename}

Your keying schedule has been downloaded and is ready to share with locksmiths and facility managers.`)},500);else throw new Error(j.error||"Export failed")}catch(C){console.error("Export error:",C),i&&await i("Export Failed",`Export failed: ${C.message}

Please ensure all required packages are installed:
npm install jspdf jspdf-autotable xlsx file-saver`)}finally{d(!1)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-emerald-100 rounded-full mb-4",children:c.jsx(M3,{className:"w-8 h-8 text-emerald-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Export & Download"}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Generate professional keying schedules and cutting lists in your preferred format."})]}),c.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-2 border-emerald-300 rounded-xl p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center",children:c.jsx(Yu,{className:"w-8 h-8 text-emerald-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-emerald-900 mb-1",children:"Master Key System Complete!"}),c.jsx("p",{className:"text-sm text-emerald-700",children:"You've successfully designed a professional master key system. Download your keying schedule below."})]})]})}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Project Summary"}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Doors"}),c.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.length})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Hierarchy Levels"}),c.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:a.length})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Zones Defined"}),c.jsx("div",{className:"text-2xl font-bold text-purple-600",children:o.length})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:"Select Export Format"}),c.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:_.map(C=>{const j=C.icon,q=h===C.id;return c.jsxs("button",{onClick:()=>f(C.id),className:`p-6 border-2 rounded-xl text-left transition-all ${q?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300 bg-white"}`,children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${q?"bg-indigo-100":"bg-gray-100"}`,children:c.jsx(j,{size:24,className:q?"text-indigo-600":"text-gray-600"})}),q&&c.jsx(Ya,{className:"text-indigo-600",size:20})]}),c.jsx("div",{className:"font-bold text-gray-900 mb-1",children:C.name}),c.jsx("div",{className:"text-sm text-gray-600 mb-3",children:C.description}),c.jsx("ul",{className:"text-xs text-gray-500 space-y-1",children:C.features.map((G,E)=>c.jsxs("li",{children:[" ",G]},E))})]},C.id)})})]}),w&&c.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex-shrink-0",children:Sc.createElement(w.icon,{size:24,className:"text-indigo-600"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"font-semibold text-indigo-900 mb-1",children:["Ready to export as ",w.name]}),c.jsxs("div",{className:"text-sm text-indigo-700",children:["Your export will include: ",w.features.join(", ")]})]})]})}),c.jsx("div",{className:"flex justify-center pt-4",children:c.jsx("button",{onClick:S,disabled:p,className:"px-8 py-4 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-3 shadow-lg text-lg font-semibold",children:p?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-6 h-6 border-3 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):c.jsxs(c.Fragment,{children:[c.jsx(M3,{size:24}),"Generate & Download"]})})}),v&&c.jsx("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-6",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ya,{className:"flex-shrink-0 text-emerald-600 mt-0.5",size:24}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-emerald-900 mb-2",children:"Export Generated Successfully!"}),c.jsxs("div",{className:"text-sm text-emerald-700 mb-3",children:["Your ",w.name.toLowerCase()," has been downloaded and is ready to share."]}),c.jsx("div",{className:"text-xs text-emerald-600",children:"Check your Downloads folder for the exported file."})]})]})}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"What's Next:"})," Share your keying schedule with locksmiths and facility managers. You can always return to edit your master key system design."]})})]})},fZ=({projectDoors:t=[],projectName:e="Untitled Project",projectStandard:r="ANSI_BHMA",showNotice:n,showConfirm:i,onBackToSetup:s})=>{const[a,o]=we.useState(0),[l,u]=we.useState(!1),{mkProject:h,mkApproach:f,loading:p,updateStandard:d,autoGenerateZones:v}=tl();Sc.useEffect(()=>{h&&r&&h.standard!==r&&d(r)},[r]),Sc.useEffect(()=>{(async()=>{if(f==="zone_based"&&a===3&&t.length>0)try{await v(t,"zone_based"),console.log(" Auto-generated zones for zone_based approach")}catch(E){console.error("Failed to auto-generate zones:",E)}})()},[a,f,t]);const _=(()=>{const G=[{id:0,title:"Introduction",shortLabel:"INTRO",component:MV}];return f==="zone_based"?[...G,{id:1,title:"Hierarchy Planning",shortLabel:"PLAN",component:iy},{id:2,title:"Hierarchy Setup",shortLabel:"SETUP",component:sy},{id:4,title:"Door Assignment",shortLabel:"ASSIGN",component:ay},{id:5,title:"Validation",shortLabel:"VALIDATE",component:km},{id:6,title:"Export",shortLabel:"EXPORT",component:Wm}]:f==="custom_hierarchy"?[...G,{id:1,title:"Hierarchy Planning",shortLabel:"PLAN",component:iy},{id:2,title:"Hierarchy Setup",shortLabel:"SETUP",component:sy},{id:3,title:"Zone Definition",shortLabel:"ZONES",component:H3},{id:4,title:"Door Assignment",shortLabel:"ASSIGN",component:ay},{id:5,title:"Validation",shortLabel:"VALIDATE",component:km},{id:6,title:"Export",shortLabel:"EXPORT",component:Wm}]:f==="imported"?[...G,{id:5,title:"Validation",shortLabel:"VALIDATE",component:km},{id:6,title:"Export",shortLabel:"EXPORT",component:Wm}]:[...G,{id:1,title:"Hierarchy Planning",shortLabel:"PLAN",component:iy},{id:2,title:"Hierarchy Setup",shortLabel:"SETUP",component:sy},{id:3,title:"Zone Definition",shortLabel:"ZONES",component:H3},{id:4,title:"Door Assignment",shortLabel:"ASSIGN",component:ay},{id:5,title:"Validation",shortLabel:"VALIDATE",component:km},{id:6,title:"Export",shortLabel:"EXPORT",component:Wm}]})(),w=_[a],S=w.component,C=()=>{a<_.length-1&&o(a+1)},j=()=>{a>0?o(a-1):a===0&&s&&s()},q=G=>{o(G)};return p?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):h?c.jsxs("div",{className:"animate-slideUp",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Master Key System Design"}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Step ",a+1," of ",_.length,": ",w.title]})]}),c.jsxs("div",{className:"text-sm text-gray-500",children:["Project: ",c.jsx("span",{className:"font-semibold text-gray-900",children:e})]})]}),c.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:c.jsxs("div",{className:"max-w-5xl mx-auto",children:[c.jsx("div",{className:"grid gap-2 mb-4",style:{gridTemplateColumns:`repeat(${_.length}, 1fr)`},children:_.map((G,E)=>{const k=a===E&&!l,A=a>E||a===_.length-1&&l;return c.jsx("div",{className:"flex flex-col items-center",children:c.jsx("button",{onClick:()=>q(E),className:`text-xs font-bold uppercase tracking-wide transition-colors mb-2 ${k?"text-purple-700":A?"text-emerald-700":"text-gray-400"}`,children:G.shortLabel})},G.id)})}),c.jsx("div",{className:"relative h-2 bg-gray-300 rounded-full overflow-hidden mb-3",children:c.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-purple-600 to-indigo-600 transition-all duration-700 ease-out",style:{width:`${l?100:a*100/(_.length-1)}%`},children:c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-25",style:{animation:"shimmer 2s infinite",transform:"translateX(-100%)"}})})}),c.jsx("div",{className:"relative -mt-7 mb-4",children:c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${_.length}, 1fr)`},children:_.map((G,E)=>{const k=a===E&&!l,A=a>E||a===_.length-1&&l;return c.jsx("div",{className:"flex justify-center",children:c.jsx("button",{onClick:()=>q(E),className:"focus:outline-none",children:c.jsx("div",{className:`w-8 h-8 rounded-full border-3 flex items-center justify-center transition-all duration-300 ${k?"bg-purple-600 border-white shadow-lg scale-110":A?"bg-emerald-500 border-white shadow-md":"bg-white border-gray-300 hover:border-purple-400 hover:scale-105"}`,children:A&&c.jsx(bu,{size:16,strokeWidth:3,className:"text-white"})})})},G.id)})})}),c.jsx("div",{className:"text-center",children:c.jsxs("span",{className:"inline-block px-4 py-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white text-xs font-bold rounded-full shadow-md",children:[l?100:Math.round(a*100/(_.length-1)),"% Complete"]})})]})}),c.jsx("style",{children:`
          @keyframes progress-animation {
            0% {
              background-position: 0 0;
            }
            100% {
              background-position: 40px 0;
            }
          }

          @keyframes shimmer {
            0% {
              transform: translateX(-100%);
            }
            100% {
              transform: translateX(200%);
            }
          }

          @keyframes bounce-slow {
            0%, 100% {
              transform: translateY(0);
            }
            50% {
              transform: translateY(-4px);
            }
          }

          @keyframes pulse-slow {
            0%, 100% {
              opacity: 1;
            }
            50% {
              opacity: 0.8;
            }
          }

          .animate-bounce-slow {
            animation: bounce-slow 2s infinite;
          }

          .animate-pulse-slow {
            animation: pulse-slow 2s infinite;
          }
        `})]}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:c.jsx(S,{onNext:C,onBack:j,projectDoors:t,projectName:e,showNotice:n,showConfirm:i,onExportComplete:()=>u(!0)})}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("button",{onClick:j,disabled:a===0&&!s,className:`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ${a===0&&!s?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c.jsx(QU,{size:20}),a===0?"Back to Setup":"Back"]}),c.jsxs("div",{className:"text-sm text-gray-500",children:["Step ",a+1," / ",_.length]}),c.jsxs("button",{onClick:C,disabled:a===_.length-1,className:`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ${a===_.length-1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 shadow-md"}`,children:[a===_.length-1?"Finish":"Continue",c.jsx(JU,{size:20})]})]})]}):c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[c.jsx("div",{className:"text-gray-400 mb-4",children:c.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Master Key System Not Enabled"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please enable the Master Key System in Step 0 (Project Setup) to access this wizard."}),c.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Refresh Page"})]})},Uy={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BETA_ACCESS_CODE:"INSTAspecbeta@2025",VITE_FB_API_KEY:"AIzaSyCrUZenvUEPbAsZ2zXh27SuZAoBArvos5E",VITE_FB_APP_ID:"1:847536725528:web:0d10c3c1d405a292482d6d",VITE_FB_AUTH_DOMAIN:"instaspec-dev.firebaseapp.com",VITE_FB_MESSAGING_SENDER_ID:"847536725528",VITE_FB_PROJECT_ID:"instaspec-dev",VITE_FB_STORAGE_BUCKET:"instaspec-dev.firebasestorage.app"};var Gm={};const Km=t=>typeof t!="string"?!1:t.toLowerCase()==="on"||t.toLowerCase()==="true",pZ=()=>{try{if(typeof import.meta<"u"&&(Uy!=null&&Uy.VITE_STANDARDS_TRACE))return Km(void 0)}catch{}if(typeof process<"u"&&(Gm!=null&&Gm.STANDARDS_TRACE))return Km(Gm.STANDARDS_TRACE);if(typeof window<"u"&&window.STANDARDS_TRACE)return Km(window.STANDARDS_TRACE);if(typeof localStorage<"u"){const t=localStorage.getItem("STANDARDS_TRACE");if(t)return Km(t)}return!1},QP=pZ(),mZ=t=>{QP&&typeof console<"u"&&console.debug&&console.debug("[STANDARDS_TRACE]",t)},eb=(t,e,r={})=>{mZ({subject:t||"unknown",stage:e,detail:r,at:new Date().toISOString()})},tb=(t,e,r={})=>{eb(t||"set-unknown",e,r)},gZ=(t,e=tb)=>{if(!t)return[];const r=[],n=t.doors||[];return(t.sets||[]).forEach(i=>{const s=n.filter(u=>(i.doors||[]).includes(u.id)),a=s.some(u=>u.fire>0),o=s.some(u=>(u.use||"").toLowerCase().includes("stair")||(u.use||"").toLowerCase().includes("exit")),l=s.some(u=>u.material==="Glass");if(a){if(!(i.items||[]).some(f=>f.category==="Closers")){const f=`Fire Rated set ${i.id} is missing a Door Closer.`;r.push({set:i.id,type:"critical",msg:f}),e(i.id,"validation",{rule:"fire-door-closer",msg:f})}if(!(i.items||[]).some(f=>f.category==="Seals")){const f=`Fire Rated set ${i.id} requires perimeter/drop seals.`;r.push({set:i.id,type:"critical",msg:f}),e(i.id,"validation",{rule:"fire-door-seal",msg:f})}}if(o&&!(i.items||[]).some(h=>(h.type||"").toLowerCase().includes("panic"))){const h=`Stair/Exit set ${i.id} is missing Panic Hardware.`;r.push({set:i.id,type:"critical",msg:h}),e(i.id,"validation",{rule:"egress-panic",msg:h})}if(l&&!(i.items||[]).some(h=>(h.type||"").toLowerCase().includes("patch")||(h.type||"").toLowerCase().includes("rail"))){const h=`Glass door set ${i.id} might need Patch Fittings or Rails.`;r.push({set:i.id,type:"warning",msg:h}),e(i.id,"validation",{rule:"glass-support",msg:h})}}),r},Lh=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,5),JP=(t=[],e="D-001")=>{const r=new Set(t.map(s=>s.mark));if(!r.has(e))return e;let n=2,i=`${e}-${String(n).padStart(2,"0")}`;for(;r.has(i);)n+=1,i=`${e}-${String(n).padStart(2,"0")}`;return i},Tu={"Commercial Office":{usages:["Office / Passage","Meeting Room","Director Cabin","Corridor / Circulation","Stairwell / Exit","Restroom","Storage / Service","Server / IT","Main Entrance","Fire Door (Cross-Corridor)","Prayer / Quiet Room"]},"Hospital / Healthcare":{usages:["Patient Room","Operating Theatre","Consultation / Exam","Corridor / Circulation","Stairwell / Exit","Restroom","Clean / Dirty Utility","Main Entrance","Radiation Protection","Prayer / Quiet Room"]},"Education / School":{usages:["Classroom","Assembly / Hall","Staff Office","Corridor / Circulation","Stairwell / Exit","Restroom","Storage / Service","Main Entrance","Gymnasium","Music Room"]},"Airport / Transport":{usages:["Terminal Entry","Security / Checkpoint","Boarding Gate","Corridor / Circulation","Stairwell / Exit","Restroom","Staff Only / Service","Baggage / Logistics","Prayer / Quiet Room"]},"Hospitality / Hotel":{usages:["Guest Room Entry","Connecting Door","Ballroom / Assembly","Kitchen / Service","Corridor / Circulation","Stairwell / Exit","Restroom","Back of House","Main Entrance"]},Residential:{usages:["Unit Entrance (Fire Rated)","Bedroom / Internal","Bathroom / Privacy","Kitchen","Balcony / External","Common Corridor","Stairwell / Exit","Service / Utility"]}},QE={"Meeting Room":40,"Director Cabin":40,"Conference Room":45,"Patient Room":35,"Consultation / Exam":40,Classroom:35,"Music Room":50,"Prayer / Quiet Room":45,"Server / IT":40,"Guest Room Entry":42,"Unit Entrance (Fire Rated)":35,Restroom:30},ZP=["Timber","Metal","Glass","Aluminum"],xZ=["Single","Double"],yZ=["LH","RH","LHR","RHR"],eL=Array.from(new Set(Object.values(Tu).flatMap(t=>t.usages)));eL.length*ZP.length*xZ.length*yZ.length;const bc=[{id:"profiles",value:1216,metric:"Doorset Profiles",subtext:"Ready-to-configure templates for fast project setup.",icon:Ip},{id:"scenarios",value:eL.length,metric:"Use Case Scenarios",subtext:"Preset rules based on building function.",icon:YU},{id:"facilities",value:Object.keys(Tu).length,metric:"Facility Types",subtext:"Office, Healthcare, Education, Airport, Hotel, Residential.",icon:XU},{id:"materials",value:ZP.length,metric:"Door Materials",subtext:"Timber, Metal, Glass, Aluminum.",icon:b1},{id:"exports",value:3,metric:"Export Formats",subtext:"BIM, PDF, XLSX deliverables in one click.",icon:S1},{id:"standards",value:2,metric:"Global Standards",subtext:"EN and ANSI compliance support.",icon:rV},{id:"dashboard",value:1,metric:"Project Dashboard",subtext:"All projects in one clean, central view.",icon:A1}],vZ=[{label:"Live Insights",title:"Compliance Pulse",body:"Provides real-time checks against commonly referenced safety and accessibility criteria. Specify with confidence."},{label:"Adaptive Visuals",title:"Material Intelligence",body:"Switch between door materials from Timber  Glass  Aluminum and see hardware visuals transform in real-time."}],Ym=[{title:"Project Setup",body:"Define facility, fire-rating, and jurisdiction rules -- the rule engine tunes itself instantly."},{title:"Door Schedule",body:"Capture dimensions, STC, ADA, and access logic. Additional locations auto-adjust quantity."},{title:"Hardware Sets",body:"Door Hardware Layout Preview shows hinges, closers, maglocks, and panic trim before specification."},{title:"Validation & Review",body:"Compliance Pulse verifies life-safety, then exports BIM, PDF, and Excel packages in one click."}],Ah=["Project Setup","Door Schedule","Hardware Sets","Validation & Review","Master Key Design"],JE=["SETUP","SCHEDULE","PREVIEW","GENERATE","MASTER KEY"],wZ=[{title:"Compliance Support",body:"Helps align hardware with common safety standards.",icon:E1},{title:"Hardware Library",body:"Central library of locks, hinges, closers, and access devices.",icon:bV},{title:"Team Alignment",body:"Keeps door, hardware, and export data in sync.",icon:h0}],Xm="Notice: All auto-generated door hardware content must be reviewed and approved by a qualified subject-matter expert before it is shared or issued. Proceed only if you acknowledge this requirement.",tL="Code Check: Main entrance fire rating must be verified per local code based on building height and occupancy.",Cg=["1BHK","2BHK","3BHK"],G1={"1BHK":0,"2BHK":4,"3BHK":0},ZE={"1BHK":{bedrooms:1,bathrooms:1},"2BHK":{bedrooms:2,bathrooms:2},"3BHK":{bedrooms:3,bathrooms:3}},rL=(t="")=>String(t).toLowerCase().includes("main entrance"),_Z=({doors:t=[]})=>t.some(r=>rL(r.use)&&Number(r.fire)===0)?c.jsxs("div",{className:"mb-3 rounded-lg border border-blue-200 bg-blue-50 px-4 py-3 text-sm text-blue-800 flex items-center gap-3",children:[c.jsx(uw,{size:16}),c.jsx("span",{children:tL})]}):null,bZ={Residential:{floors:4,unitsPerFloor:4,unitMix:{...G1}},"Education / School":{floors:3,classroomsPerFloor:6,toiletsPerFloor:2,hasAdminLabs:!0},"Commercial Office":{floors:6,openLayout:!0,meetingRooms:4,hasServiceAreas:!0},"Airport / Transport":{floors:2,concourses:1,gatesPerConcourse:6,securityZones:2,hasInternationalZone:!0},"Hospital / Healthcare":{floors:5,patientRoomsPerFloor:12,operatingRooms:4,icuRoomsPerFloor:2,hasEmergencyDept:!0},"Hospitality / Hotel":{floors:10,roomsPerFloor:18,suitesPerFloor:2,hasBallroom:!0,hasServiceZones:!0}},op=()=>JSON.parse(JSON.stringify(bZ)),SZ=(t,e)=>{const r=op(),n=(t==null?void 0:t.instantInputs)||{};return{...r[e],...n[e]||{}}},po={Hanging:["Hinges"],Securing:["Locks","Cylinders","Electrified"],Controlling:["Closers","Stops","Handles"],Protecting:["Seals","Accessories","Protecting"]},Vy=30,eN=t=>{if(typeof structuredClone=="function")return structuredClone(t);try{return JSON.parse(JSON.stringify(t))}catch{return t}},AZ=[{id:"Hanging",label:"Hanging",description:"Hinges, pivots and fittings",categories:po.Hanging,accent:"from-amber-500 to-orange-500",hint:"Edge & hinge zone"},{id:"Securing",label:"Securing",description:"Locks, bolts and electrified hardware",categories:po.Securing,accent:"from-sky-500 to-indigo-500",hint:"Center lockface"},{id:"Controlling",label:"Controlling",description:"Closers, holders and motion control hardware",categories:po.Controlling,accent:"from-emerald-500 to-emerald-700",hint:"Top frame / closer"},{id:"Protecting",label:"Protecting",description:"Kick plates, seals and protective accessories",categories:po.Protecting,accent:"from-slate-500 to-slate-700",hint:"Bottom/kick zone"}],EZ=(t=[])=>t.reduce((e,r)=>{var s;const n=K1[r];if(!((s=n==null?void 0:n.types)!=null&&s.length))return e;const i=n.types.map(a=>({...a,category:r,csi:n.csi||"",description:(a.styles||[]).slice(0,2).join(", ")}));return e.concat(i)},[]),NZ=t=>["Hinges"].includes(t)?"Hanging the Door":["Locks","Cylinders","Electrified"].includes(t)?"Securing the Door":["Closers","Stops","Handles","Auto Operator"].includes(t)?"Controlling the Door":["Seals","Accessories","Protecting","Kick Plate","Threshold"].includes(t)?"Protecting the Door":"Other Hardware",K1={Hinges:{csi:"08 71 10",types:[{name:"Butt Hinge",styles:["Ball Bearing","Plain Bearing","Concealed Bearing","Spring Hinge"]},{name:"Concealed Hinge",styles:["3D Adjustable","Spring Concealed"]},{name:"Pivot Set",styles:["Offset Pivot","Center Hung","Intermediate Pivot"]},{name:"Continuous Hinge",styles:["Geared Aluminum","Pin & Barrel Stainless"]},{name:"Patch Fitting",styles:["Top Patch","Bottom Patch","Overpanel Patch"]}]},Locks:{csi:"08 71 50",types:[{name:"Mortise Lock",styles:["Sashlock","Deadlock","Latch","Bathroom Lock","Nightlatch"],ansiStyles:["Passage","Privacy","Classroom","Storeroom","Entrance","Office","Apartment","Dormitory","Institutional"],enStyles:["Sashlock","Deadlock","Latch","Bathroom Lock","Nightlatch"]},{name:"Cylindrical Lock",styles:["Leverset","Knobset","Interconnected"]},{name:"Hotel Lock",styles:["RFID Mortise","Mobile Key"]},{name:"Panic Bar",styles:["Rim Type","Surface Vertical Rod","Concealed Vertical Rod","Mortise Type"]},{name:"Electric Strike",styles:["Fail Safe","Fail Secure"]},{name:"Magnetic Lock",styles:["Surface Mount","Shear Lock","Recessed"]},{name:"Patch Lock",styles:["Corner Patch Lock","Center Patch Lock"]}]},Closers:{csi:"08 71 60",types:[{name:"Overhead Closer",styles:["Rack & Pinion","Cam Action","Slide Arm"]},{name:"Concealed Closer",styles:["Overhead Concealed","Chain Concealed"]},{name:"Floor Spring",styles:["Double Action","Single Action"]},{name:"Auto Operator",styles:["Electro-Mechanical","Electro-Hydraulic"]}]},Handles:{csi:"08 71 70",types:[{name:"Lever Handle",styles:["Return to Door","Straight","Flat Bar","Anti-Ligature"]},{name:"Pull Handle",styles:["D-Pull","T-Bar","Offset Pull","Flush Pull"]},{name:"Push Plate",styles:["Square Corner","Radius Corner"]},{name:"Panic Push Pull Handle",styles:["L-Shaped","Tube Pull"]}]},Stops:{csi:"08 71 80",types:[{name:"Door Stop",styles:["Floor Mounted Dome","Wall Mounted Projection","Skirting Mounted"]},{name:"Overhead Stop",styles:["Surface Mounted","Concealed"]}]},Seals:{csi:"08 71 90",types:[{name:"Drop Seal",styles:["Mortised","Surface Mounted"]},{name:"Perimeter Seal",styles:["Batwing","Bulb","Brush"]},{name:"Acoustic Perimeter Seal",styles:["STC-40 Compression","STC-45 Magnetic"]},{name:"Automatic Door Bottom",styles:["Acoustic Drop","Medium Duty"]},{name:"Vision/Louver Gasket",styles:["High Density","Intumescent Acoustic"]},{name:"Threshold",styles:["Low Profile (ADA)","Saddle","Panic Type"]}]},Cylinders:{csi:"08 71 50",types:[{name:"Cylinder",styles:["Euro Profile","Oval Profile","Rim Cylinder","Mortise Cylinder"]}]},Accessories:{csi:"08 71 00",types:[{name:"Kick Plate",styles:["Satin Stainless","Polished Stainless","Brass"]},{name:"Flush Bolt",styles:["Lever Action","Slide Action"]},{name:"Door Viewer",styles:["Wide Angle","Electronic"]}]},Protecting:{csi:"08 79 00",types:[{name:"Signage",styles:["Disc","Rectangular"]}]},Electrified:{csi:"08 74 00",types:[{name:"Magnetic Lock",styles:["Fail-Safe","Fail-Secure"],requiresRelease:!0},{name:"Electric Strike",styles:["Fail-Safe","Fail-Secure"],requiresTrim:!0},{name:"Electromechanical Mortise",styles:["Fail-Safe","Fail-Secure"],requiresTrim:!0},{name:"Door Contact",styles:["Surface","Recessed"]},{name:"Push Button",styles:["Request-to-Exit","Emergency"]},{name:"Power Supply",styles:["12/24V Auto","Dedicated"]},{name:"Card Reader",styles:["Surface Mount","Flush Mount"]}]}},TZ=AZ.map(t=>({...t,items:EZ(t.categories)})),Qm={Timber:["Mortise Lock","Cylindrical Lock","Hotel Lock","Panic Bar","Electric Strike","Magnetic Lock"],Metal:["Mortise Lock","Panic Bar","Electric Strike","Magnetic Lock"],Aluminum:["Mortise Lock","Electric Strike","Magnetic Lock"],Glass:["Patch Lock","Panic Bar","Magnetic Lock"],default:["Mortise Lock","Cylindrical Lock","Hotel Lock","Panic Bar","Electric Strike","Magnetic Lock"]},kZ=(t=[])=>{if(!t.length)return Qm.default;let e=null;return t.forEach(r=>{const n=Qm[r]||Qm.default;e===null?e=new Set(n):e=new Set([...e].filter(i=>n.includes(i)))}),!e||e.size===0?Qm.default:Array.from(e)},Jm={Timber:["Magnetic Lock","Electric Strike","Card Reader"],Metal:["Magnetic Lock","Electric Strike","Electromechanical Mortise","Card Reader"],Aluminum:["Magnetic Lock","Electric Strike","Card Reader"],Glass:["Magnetic Lock","Card Reader"],default:["Magnetic Lock","Electric Strike","Card Reader"]},CZ=(t=[])=>{if(!t.length)return Jm.default;let e=null;return t.forEach(r=>{const n=Jm[r]||Jm.default;e===null?e=new Set(n):e=new Set([...e].filter(i=>n.includes(i)))}),!e||e.size===0?Jm.default:Array.from(e)},IZ=["stair","exit","corridor","assembly","classroom","retail","auditorium","public","egress"],PZ=["stair","exit","assembly","auditorium","arena","stadium","retail","public"],LZ=["main entrance","security","server","it","data","lab","lobby","reception","turnstile","access","checkpoint","guest room","guestroom","hotel"],RZ=[{id:"Mechanical",label:"Mechanical Package",desc:"Mortise/cylindrical locks, manual key control, free-egress lever trim."},{id:"Electromechanical",label:"Electromechanical Package",desc:"Electric strikes or maglocks with power, REX, and monitoring accessories."}],X2=(t={})=>{const e=(t.use||"").toLowerCase(),r=(t.notes||"").toLowerCase(),n=LZ.some(s=>e.includes(s)),i=["card","access","controlled","turnstile"].some(s=>r.includes(s));return n||i?"Electromechanical":"Mechanical"},mc=t=>{const e=(t.additionalLocations||[]).map(n=>({zone:(n==null?void 0:n.zone)||t.zone||"",level:(n==null?void 0:n.level)||t.level||"",roomName:(n==null?void 0:n.roomName)||t.roomName||""})),r=1+e.length;return{...t,use:t.use||t.roomName||"",hardwareIntent:t.hardwareIntent||X2(t),additionalLocations:e,qty:r,thicknessAuto:t.thicknessAuto!==!1,weightAuto:t.weightAuto!==!1,ada:t.ada===!0}},jZ=(t={})=>{const e={};let r=0;return Cg.forEach(n=>{const i=Math.max(0,parseInt(t==null?void 0:t[n],10)||0);e[n]=i,r+=i}),r>0?e:{...G1}},FZ=(t,e)=>{const r=jZ(t.unitMix),n=Object.values(r).reduce((s,a)=>s+a,0),i=Math.max(1,t.unitsPerFloor||n||1);return[{id:"default",label:"Typical Floor",floors:e,unitsPerFloor:Math.max(n,i),unitMix:r}]},DZ={Residential:(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=FZ(t,e),n=[],i=r[0],s=i.unitMix||{},a=i.label.trim(),o=a&&a.toLowerCase()!=="typical floor"?`${a} - `:"";if(Object.entries(s).filter(([,h])=>h>0).forEach(([h,f])=>{const p=ZE[h]||ZE["2BHK"],d=f*i.floors;if(d<=0)return;const v=`Auto-generated residential ${a||h}`;n.push({roomName:`${o}${h} Entry`,use:"Unit Entrance (Fire Rated)",qty:d,width:950,height:2150,material:"Timber",fire:60,notes:v}),n.push({roomName:`${o}${h} Bedroom`,use:"Bedroom / Internal",qty:d*p.bedrooms,width:900,height:2100,notes:v}),n.push({roomName:`${o}${h} Bathroom`,use:"Bathroom / Privacy",qty:d*p.bathrooms,width:800,height:2100,material:"Timber",notes:`Privacy lockset recommended for ${h}`})}),n.length===0)return[];const l=Math.max(1,e*2),u=Math.max(1,e);return n.push({roomName:"Corridor Core",use:"Corridor / Circulation",qty:l,width:1e3,height:2150,fire:0,ada:!0,notes:"Auto-generated corridor door"}),n.push({roomName:"Restroom Core",use:"Restroom",qty:l,width:900,height:2100,ada:!0,notes:"Auto-generated restroom core"}),n.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:l,width:1e3,height:2150,material:"Metal",fire:60,notes:"Stair door (code guidance)"}),n.push({roomName:"Service / Utility",use:"Service / Utility",qty:u,width:900,height:2100,material:"Metal",fire:30,notes:"Service doors on each floor stack"}),n},"Education / School":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(0,parseInt(t.classroomsPerFloor,10)||0),n=Math.max(0,parseInt(t.toiletsPerFloor,10)||0),i=!!t.hasAdminLabs,s=[];return r>0&&s.push({roomName:"Classroom",use:"Classroom",qty:e*r,width:950,height:2150,material:"Timber"}),n>0&&s.push({roomName:"Restroom",use:"Restroom",qty:e*n,width:900,height:2100,material:"Timber",notes:"Privacy indicator set"}),i&&s.push({roomName:"Admin / Lab",use:"Admin / Lab",qty:e*2,width:950,height:2150,material:"Metal",fire:30}),s.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:Math.max(1,e)*2,width:1e3,height:2150,material:"Metal",fire:60}),s},"Commercial Office":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(0,parseInt(t.meetingRooms,10)||0),n=!!t.openLayout,i=!!t.hasServiceAreas,s=[];return s.push({roomName:"Main Lobby",use:"Main Entrance",qty:2,width:1100,height:2400,material:"Glass",notes:"Paired glass entry"}),s.push({roomName:"Open Office",use:"Office / Passage",qty:e*(n?2:4),width:950,height:2150}),r>0&&s.push({roomName:"Meeting Room",use:"Meeting Room",qty:e*r,width:1e3,height:2150,stc:40,notes:"Acoustic seals recommended"}),s.push({roomName:"Restroom",use:"Restroom",qty:e*2,width:900,height:2100}),i&&s.push({roomName:"Service / BOH",use:"Service / Utility",qty:e,width:950,height:2150,material:"Metal",fire:30}),s},"Hospital / Healthcare":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(0,parseInt(t.patientRoomsPerFloor,10)||0),n=Math.max(0,parseInt(t.icuRoomsPerFloor,10)||0),i=Math.max(0,parseInt(t.operatingRooms,10)||0),s=!!t.hasEmergencyDept,a=[];return r>0&&a.push({roomName:"Patient Room",use:"Patient Room",qty:e*r,width:950,height:2150,material:"Timber",notes:"Auto-generated for patient rooms"}),n>0&&a.push({roomName:"ICU / Isolation",use:"Patient Room",qty:e*n,width:1e3,height:2150,material:"Metal",notes:"Isolation-ready leaf with seals",stc:40}),i>0&&a.push({roomName:"Operating Theatre",use:"Operating Theatre",qty:Math.max(1,i),width:1200,height:2400,material:"Metal",fire:60,hardwareIntent:"Electromechanical",notes:"Pairs with automatic operator"}),a.push({roomName:"Consult / Exam",use:"Consultation / Exam",qty:e*2,width:1e3,height:2150}),a.push({roomName:"Clean Utility",use:"Clean / Dirty Utility",qty:e,width:950,height:2150,material:"Metal",fire:30}),a.push({roomName:"Restroom",use:"Restroom",qty:e*2,width:900,height:2100}),a.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:e*2,width:1e3,height:2150,material:"Metal",fire:90}),s&&a.push({roomName:"Emergency Entry",use:"Main Entrance",qty:2,width:1200,height:2400,material:"Glass",hardwareIntent:"Electromechanical",notes:"Dedicated emergency access"}),a},"Airport / Transport":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(1,parseInt(t.concourses,10)||1),n=Math.max(1,parseInt(t.gatesPerConcourse,10)||1),i=Math.max(1,parseInt(t.securityZones,10)||1),s=!!t.hasInternationalZone,a=r*n,o=[];return o.push({roomName:"Terminal Entry",use:"Terminal Entry",qty:Math.max(2,r*2),width:1200,height:2600,material:"Glass",notes:"Airside / landside entry pairs"}),o.push({roomName:"Security Checkpoint",use:"Security / Checkpoint",qty:i*r,width:1100,height:2400,material:"Metal",hardwareIntent:"Electromechanical",notes:"Controlled access openings"}),o.push({roomName:"Boarding Gate",use:"Boarding Gate",qty:a,width:1100,height:2400,material:"Glass"}),o.push({roomName:"Restroom",use:"Restroom",qty:e*4,width:900,height:2100}),o.push({roomName:"Staff / Service",use:"Staff Only / Service",qty:r*2,width:1e3,height:2150,material:"Metal",fire:30}),o.push({roomName:"Baggage / Logistics",use:"Baggage / Logistics",qty:r,width:1100,height:2400,material:"Metal",fire:60}),o.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:e*2,width:1e3,height:2150,material:"Metal",fire:90}),s&&o.push({roomName:"International Zone",use:"Corridor / Circulation",qty:r,width:1100,height:2400,hardwareIntent:"Electromechanical",notes:"Immigration / customs separation"}),o},"Hospitality / Hotel":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(0,parseInt(t.roomsPerFloor,10)||0),n=Math.max(0,parseInt(t.suitesPerFloor,10)||0),i=!!t.hasBallroom,s=!!t.hasServiceZones,a=[];return r>0&&a.push({roomName:"Guest Room Entry",use:"Guest Room Entry",qty:e*r,width:950,height:2150,material:"Timber",fire:30,ada:!0,hardwareIntent:"Electromechanical",stc:42,notes:"Smart-lock ready leaf"}),n>0&&a.push({roomName:"Suite Connector",use:"Connecting Door",qty:e*n,width:900,height:2150,material:"Timber",notes:"Privacy bolt + closer"}),a.push({roomName:"Corridor",use:"Corridor / Circulation",qty:e*2,width:1e3,height:2150,fire:60,ada:!0}),a.push({roomName:"Restroom Core",use:"Restroom",qty:e*2,width:900,height:2100,ada:!0}),a.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:e*2,width:1e3,height:2150,material:"Metal",fire:60}),i&&a.push({roomName:"Ballroom",use:"Ballroom / Assembly",qty:4,width:1200,height:2600,config:"Double",notes:"Paired entry with panic hardware"}),s&&a.push({roomName:"Back of House",use:"Back of House",qty:e,width:1e3,height:2150,material:"Metal",fire:30}),a}},MZ=(t,e=(t==null?void 0:t.doors)||[])=>{if(!t)return[];const r=DZ[t.type];if(!r)return[];const n=op(),s=(t.instantInputs||n)[t.type]||n[t.type]||{},a=r(s,t).filter(u=>u&&u.qty>0);let o=[...e];const l=[];return a.forEach((u,h)=>{const f=u.markBase||`D-${String(o.length+h+1).padStart(3,"0")}`,p=JP(o,f),d=Math.max(1,u.qty||1),v=Array.from({length:d-1},(w,S)=>({zone:u.zone||"Tower A",level:u.level||String((h+S)%10+1).padStart(2,"0"),roomName:`${u.roomName||u.use||"Door"} #${S+2}`})),y={id:Lh(),mark:p,zone:u.zone||"Tower A",level:u.level||String(h%10+1).padStart(2,"0"),roomName:u.roomName||u.use||`Generated Door ${h+1}`,width:u.width||900,height:u.height||2100,thickness:u.thickness||45,weight:u.weight||45,fire:u.fire||0,use:u.use||u.roomName||"",material:u.material||"Timber",config:u.config||"Single",handing:u.handing||"RH",stc:u.stc||35,ada:u.ada||!1,notes:u.notes||"",hardwareIntent:u.hardwareIntent||X2(u),additionalLocations:v},_=mc(y);l.push(_),o=[...o,_]}),l},OZ=t=>{const e=(t.use||"").toLowerCase(),r=t.material||"Timber",n=IZ.some(l=>e.includes(l)),i=PZ.some(l=>e.includes(l)),s=parseInt(t.fire,10)>0,a=t.hardwareIntent||X2(t),o={material:r,isEscapeRoute:n,requiresPanic:i,isFireRated:s,requiresFailSafe:n||s,hardwareIntent:a};return eb(t.id||t.mark||"door-unknown","classifyDoor",{use:t.use,fire:t.fire,result:o}),o},tN=(t=[])=>{if(!t.length)return{materials:["Timber"],isEscapeRoute:!1,requiresPanic:!1,isFireRated:!1,requiresFailSafe:!1,requiresADA:!1};const e=t.map(OZ),r=Array.from(new Set(e.map(n=>n.hardwareIntent||"Mechanical")));return{materials:Array.from(new Set(e.map(n=>n.material))),isEscapeRoute:e.some(n=>n.isEscapeRoute),requiresPanic:e.some(n=>n.requiresPanic),isFireRated:e.some(n=>n.isFireRated),requiresFailSafe:e.some(n=>n.requiresFailSafe),requiresADA:t.some(n=>n.ada),packageIntent:r.includes("Electromechanical")?"Electromechanical":"Mechanical"}},BZ=(t,e)=>{const r=t.name||"Preview Door",n=e.materials[0]||"Timber",i=e.isFireRated;return{id:`preview-${t.id}`,mark:t.id,zone:"Preview",level:"00",roomName:r,qty:1,width:900,height:2100,weight:50,fire:i?60:0,use:r,material:n,config:"Single",thickness:45,thicknessAuto:!0,visionPanel:!1,handing:"RH",stc:35,ada:e.requiresADA,hardwareIntent:e.packageIntent,additionalLocations:[]}},UZ=(t,e)=>{const r=[],n=t.items.filter(f=>f.category==="Locks"),i=t.items.filter(f=>f.category==="Electrified"),s=t.items.filter(f=>f.category==="Handles"),a=n.filter(f=>(f.type||"").toLowerCase().includes("panic")),o=[...n,...i].filter(f=>(f.type||"").toLowerCase().includes("magnetic")),l=[...n,...i].filter(f=>(f.type||"").toLowerCase().includes("electric strike")),h=n.some(f=>(f.type||"").toLowerCase().includes("hotel lock"))||o.length>0||i.some(f=>!Y1.includes(f.type));if(e.requiresPanic&&a.length===0&&r.push("Panic hardware is required for this escape route door (EN 1125 / NFPA 101)."),a.length>0&&s.length>0&&r.push("Remove lever/pull trim on the egress side when panic hardware is used to maintain single-motion exit."),a.length>0&&n.some(f=>!f.type.toLowerCase().includes("panic"))&&r.push("Panic hardware should be the sole locking mechanism on the egress side."),o.length>0){const f=Y1.filter(y=>!i.some(_=>(_.type||"").toLowerCase()===y.toLowerCase())),d=i.some(y=>y.autoTag==="card-reader-kit"||(y.type||"").toLowerCase()==="card reader")?f.filter(y=>y.toLowerCase()!=="push button"):f;d.length>0&&r.push(`Magnetic locks require a release package (REX sensor, emergency button, fire alarm interface). Missing: ${d.join(", ")}.`);const v=o.some(y=>(y.style||"").toLowerCase().includes("fail-secure"));e.requiresFailSafe&&v&&r.push("Escape route doors must use fail-safe magnetic locks.")}return l.length>0&&!n.some(f=>{const p=(f.type||"").toLowerCase();return p.includes("mortise")||p.includes("cylindrical")||p.includes("panic")})&&r.push("Electric strikes must pair with a mortise/cylindrical latch or panic device that provides the latch bolt."),e.packageIntent==="Electromechanical"&&!h&&r.push("Door was scheduled as an electrified package but no electrified locking has been added."),e.packageIntent==="Mechanical"&&h&&r.push("Door was scheduled as a mechanical package; confirm electrified hardware is intentional."),e.requiresADA&&(a.length>0||s.some(p=>(p.type||"").toLowerCase().includes("lever"))||r.push("ADA-labeled doors require lever hardware or panic devices that allow single-hand operation.")),e.materials.includes("Glass")&&(s.some(p=>(p.type||"").toLowerCase().includes("lever"))&&(n.some(d=>(d.type||"").toLowerCase()==="patch lock"&&(d.style||"").toLowerCase().includes("center"))||r.push("Glass doors with lever handles must pair with a center patch lock that supports lever trim.")),e.requiresPanic&&(s.some(d=>(d.type||"").toLowerCase().includes("panic push pull"))||r.push("Glass escape doors require an L-shaped panic push/pull handle instead of a traditional panic bar."))),r},Lw={ANSI:["630 (Satin Stainless)","629 (Polished Stainless)","626 (Satin Chrome)","605 (Polished Brass)","613 (Oil Rubbed Bronze)","622 (Matte Black)"],EN:["SSS (Satin Stainless)","PSS (Polished Stainless)","SCP (Satin Chrome Plate)","PB (Polished Brass)","RAL 9005 (Black)","RAL 9016 (White)"]},VZ={Cylinders:{ANSI:["SNP (Satin Nickel Plate)","Natural Brass","PB (Polished Brass)","622 (Matte Black)"],EN:["SNP (Satin Nickel Plate)","Natural Brass","PB (Polished Brass)","RAL 9005 (Black)"]}},zZ={Hinges:"H",Locks:"L",Closers:"D",Handles:"H",Stops:"S",Seals:"GS",Cylinders:"C",Accessories:"A",Protecting:"P",Electrified:"E"},rb=(t,e="ANSI")=>{const r=VZ[t];return r&&(r[e]||r.default)||null},nb=(t="ANSI")=>{const e=Lw[t]||Lw.ANSI;return(e==null?void 0:e[0])||"630 (Satin Stainless)"},rN=(t,e="ANSI")=>{const r=rb(t,e);return r!=null&&r.length?r[0]:nb(e)},HZ=(t,e)=>{var i;const r=K1[t],n=r==null?void 0:r.types.find(s=>s.name===e);return((i=n==null?void 0:n.styles)==null?void 0:i[0])||""},bd=(t=[],e)=>{const r=zZ[e]||"X";let n=1;const i=new Set(t.map(a=>a.ref));let s=`${r}${String(n).padStart(2,"0")}`;for(;i.has(s);)n+=1,s=`${r}${String(n).padStart(2,"0")}`;return s},nL=[{type:"Door Contact",style:"Surface",spec:"Status monitor contact",qty:"1",autoTag:"maglock-door-contact"},{type:"Push Button",style:"Request-to-Exit",spec:"Illuminated REX button",qty:"1",autoTag:"maglock-push-button"},{type:"Power Supply",style:"12/24V Auto",spec:"Fail-safe rated supply",qty:"1",autoTag:"maglock-power-supply"}],Rh={type:"Card Reader",style:"Surface Mount",spec:"Access control card reader",qty:"1"},Y1=nL.map(t=>t.type),iL=40,qZ=t=>t==="Double"?"double leaf":"single leaf",zy=813,nN=38,$Z=(t=[],e="ANSI",r={})=>{const n=nb(e),i=t.some(v=>(v.type||"").toLowerCase().includes("magnetic lock")),s=t.some(v=>(v.type||"").toLowerCase().includes("electric strike")),a=!i&&!s;let o=t.filter(v=>(v.type||"").toLowerCase()!=="maglock release package");a&&(o=o.filter(v=>v.autoTag!=="maglock-kit"&&v.autoTag!=="card-reader-kit"));const l=new Set(r.removedAutoTags||[]),u=o.find(v=>v.autoTag==="card-reader-kit"),h=!!u;u&&(u.type,Rh.type);const p=(i||s)&&!l.has("card-reader-kit")&&!h,d=h||p;return i&&nL.forEach(v=>{var w;const y=v.autoTag||"maglock-kit";if(l.has("maglock-kit")||l.has(y)||(w=v.type)!=null&&w.toLowerCase().includes("push button")&&d)return;o.some(S=>S.category==="Electrified"&&S.type===v.type)||o.push({category:"Electrified",ref:bd(o,"Electrified"),type:v.type,style:v.style||HZ("Electrified",v.type),spec:v.spec,qty:v.qty,finish:n,autoTag:y})}),p&&o.push({category:"Electrified",ref:bd(o,"Electrified"),type:Rh.type,style:Rh.style,spec:Rh.spec,qty:Rh.qty,finish:n,autoTag:"card-reader-kit"}),o},sL=[...Y1,Rh.type],WZ=(t=[])=>{let e=!1;return t.filter(r=>r.category!=="Hinges"?!0:e?!1:(e=!0,!0))},GZ=(t=[],e={})=>{const{needsAcoustic:r=!1,isDouble:n=!1,hasVision:i=!1,hasLouver:s=!1}=e;let a=[...t];if(!r)return a.filter(u=>u.autoTag!=="acoustic-package");const o=nb(e.standard||"ANSI"),l=(u,h)=>{a.some(p=>p.autoTag==="acoustic-package"&&p.spec===u)||a.push(h)};return l("AP-40",{category:"Seals",ref:bd(a,"Seals"),type:"Acoustic Perimeter Seal",style:"STC-40 Compression",spec:"AP-40 perimeter seal set",qty:n?"2 Sets":"1 Set",finish:o,autoTag:"acoustic-package",acousticContribution:"STC-rated"}),l("ADB-45",{category:"Seals",ref:bd(a,"Seals"),type:"Automatic Door Bottom",style:"Acoustic Drop",spec:"ADB-45 mortised automatic bottom",qty:n?"2":"1",finish:o,autoTag:"acoustic-package",acousticContribution:"STC-rated"}),(i||s)&&l("GKT-40",{category:"Seals",ref:bd(a,"Seals"),type:"Vision/Louver Gasket",style:"High Density",spec:"GKT-40 acoustic glazing/louver kit",qty:"1 Set",finish:o,autoTag:"acoustic-package",acousticContribution:"STC-rated"}),a},jh=(t=[],e=[])=>{const r=t.some(o=>parseInt(o.stc,10)>=iL),n=t.some(o=>o.config==="Double"),i=t.some(o=>o.visionPanel),s=e.some(o=>(o.type||"").toLowerCase().includes("louver")),a={needsAcoustic:r,isDouble:n,hasVision:i,hasLouver:s};return tb("context","computeSetContext",{doors:t.map(o=>o.id||o.mark||"door-unknown"),...a}),a},KZ=(t=[],e="ANSI")=>t.map(r=>{const n=rb(r.category,e);return n!=null&&n.length&&!n.includes(r.finish)?{...r,finish:n[0]}:r}),Fh=(t=[],e="ANSI",r={})=>{const n=$Z(t,e),i=WZ(n),s=GZ(i,{...r,standard:e}),a=KZ(s,e);return tb(r.setId||"set-unknown","sanitizeHardwareItems",{standard:e,autoTags:a.filter(o=>o.autoTag).map(o=>o.autoTag),total:a.length}),a},ib=()=>{const[t,e]=we.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return we.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia("(prefers-reduced-motion: reduce)"),n=()=>e(r.matches);return r.addEventListener?r.addEventListener("change",n):r.addListener(n),()=>{r.removeEventListener?r.removeEventListener("change",n):r.removeListener(n)}},[]),t},YZ="rounded-3xl border border-white/10 bg-gradient-to-b from-slate-900/80 to-slate-900/30 text-white shadow-lg shadow-black/30 backdrop-blur-sm",iN=({value:t=0,duration:e=1200,className:r=""})=>{const n=ib(),[i,s]=we.useState(n?t:0);return we.useEffect(()=>{if(n){s(t);return}let a,o;const l=u=>{a||(a=u);const h=Math.min((u-a)/e,1),f=1-Math.pow(1-h,3);s(Math.round(f*t)),h<1&&(o=requestAnimationFrame(l))};return o=requestAnimationFrame(l),()=>o&&cancelAnimationFrame(o)},[t,e,n]),c.jsx("span",{className:r,children:i.toLocaleString()})},$f=({children:t,className:e="",delay:r=0,ariaLabel:n,paddingClass:i="p-5"})=>{const s=ib(),[a,o]=we.useState(s);we.useEffect(()=>{if(s){o(!0);return}o(!1);const u=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(u)},[s,r]);const l=s?"":a?"opacity-100 translate-y-0":"opacity-0 translate-y-3";return c.jsx("div",{"aria-label":n,className:`${YZ} ${i} ${l} transition-all duration-500 ease-out motion-safe:hover:-translate-y-1 motion-safe:hover:shadow-[0_25px_60px_rgba(7,89,133,0.35)] ${e}`,children:t})},XZ=({steps:t=[]})=>{const e=ib(),[r,n]=we.useState(e);return we.useEffect(()=>{if(e){n(!0);return}const i=window.setTimeout(()=>n(!0),120);return()=>window.clearTimeout(i)},[e]),c.jsxs("div",{className:"relative mt-2",children:[c.jsx("div",{className:"absolute left-5 sm:left-6 top-2 bottom-2 w-px bg-white/15 origin-top rounded-full",style:{transform:r?"scaleY(1)":"scaleY(0)",transition:e?"none":"transform 900ms ease 150ms"},"aria-hidden":"true"}),c.jsx("div",{className:"space-y-6",children:t.map((i,s)=>{const a=i.stepNumber??s+1,o=!!i.isActive;return c.jsxs("div",{className:"relative pl-12 sm:pl-16 group",children:[c.jsx("div",{className:`absolute left-5 sm:left-6 top-6 bottom-6 w-px rounded-full pointer-events-none transition-opacity duration-300 ${o?"opacity-90":"opacity-0 group-hover:opacity-80"}`,style:{backgroundColor:"rgba(56,189,248,0.65)"},"aria-hidden":"true"}),c.jsx("div",{className:"absolute left-0 sm:left-1 top-1/2 -translate-y-1/2",children:c.jsx("div",{className:`flex items-center justify-center w-9 h-9 sm:w-10 sm:h-10 rounded-full border-2 text-sm sm:text-base font-semibold transition-all duration-300 shadow-lg ${o?"bg-sky-400 text-slate-950 border-sky-200 shadow-sky-500/40":"bg-slate-950 text-white border-white/25 group-hover:bg-sky-300 group-hover:text-slate-950 group-hover:border-sky-200"}`,children:a})}),c.jsx($f,{delay:s*120,ariaLabel:`${a} ${i.title}`,className:`pl-4 sm:pl-6 overflow-visible transition-transform duration-300 group-hover:scale-[1.02] ${o?"ring-1 ring-sky-400/50 shadow-sky-500/40":""}`,children:c.jsxs("div",{className:"space-y-1","aria-current":o?"step":void 0,children:[c.jsx("div",{className:"text-white font-semibold text-lg",children:i.title}),c.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:i.body})]})})]},i.title)})})]})},QZ=(t=[])=>t.some(r=>r.category==="Electrified"&&!Y1.includes(r.type)||r.category==="Locks"&&(r.type||"").toLowerCase().includes("magnetic"))?"Electromechanical":"Mechanical",JZ=t=>{if(!t)return t;const e=(t.doors||[]).map(mc),r=(t.sets||[]).map(s=>{const a=e.filter(h=>(s.doors||[]).includes(h.id)),o=s.items||[],l={...jh(a,o),removedAutoTags:s.removedAutoTags||[],setId:s.id},u=Fh(o,t.standard,l);return{...s,intent:s.intent||QZ(u),items:u,removedAutoTags:s.removedAutoTags||[]}}),n=op(),i={...n,...t.instantInputs||{}};return Object.keys(n).forEach(s=>{i[s]={...n[s],...i[s]||{}}}),{...t,doors:e,sets:r,instantInputs:i,instantSchedulingEnabled:!!t.instantSchedulingEnabled,mkSystemEnabled:t.mkSystemEnabled!==void 0?!!t.mkSystemEnabled:!1}},sN=({category:t})=>t==="Hinges"?c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("rect",{x:"8",y:"2",width:"8",height:"20",rx:"1"}),c.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}):t==="Locks"?c.jsx(nI,{size:16}):t==="Closers"?c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("rect",{x:"2",y:"4",width:"10",height:"6"}),c.jsx("path",{d:"M12 7h8v10"})]}):t==="Handles"?c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M4 10h10a2 2 0 0 1 2 2v6"}),c.jsx("circle",{cx:"4",cy:"12",r:"2"})]}):t==="Stops"?c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M12 22a8 8 0 0 0 0-16 8 8 0 0 0 0 16z"}),c.jsx("circle",{cx:"12",cy:"14",r:"3"})]}):t==="Seals"?c.jsx(sI,{size:16}):t==="Protecting"||t==="Accessories"?c.jsx(O2,{size:16}):c.jsx(b1,{size:16}),ZZ=({options:t,value:e,onChange:r,placeholder:n})=>{const[i,s]=we.useState(!1),[a,o]=we.useState(""),l=we.useRef(null);we.useEffect(()=>{const h=f=>{l.current&&!l.current.contains(f.target)&&s(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const u=t.filter(h=>h.toLowerCase().includes(a.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:l,children:[c.jsxs("div",{className:"w-full p-2.5 border border-gray-300 rounded-md bg-white flex items-center justify-between cursor-pointer hover:border-indigo-500 transition-colors",onClick:()=>s(!i),children:[c.jsx("span",{className:e?"text-gray-900":"text-gray-400",children:e||n}),c.jsx(u0,{size:16,className:`text-gray-500 transition-transform ${i?"rotate-180":""}`})]}),i&&c.jsxs("div",{className:"absolute top-full left-0 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-60 flex flex-col z-50",children:[c.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white rounded-t-md",children:c.jsxs("div",{className:"relative",children:[c.jsx(iI,{size:14,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400"}),c.jsx("input",{type:"text",className:"w-full pl-8 p-1.5 text-sm border border-gray-200 rounded bg-gray-50 focus:outline-none focus:border-indigo-500",placeholder:"Search...",value:a,onChange:h=>o(h.target.value),autoFocus:!0})]})}),c.jsx("div",{className:"overflow-y-auto flex-1",children:u.length>0?u.map(h=>c.jsx("div",{className:`px-4 py-2 text-sm cursor-pointer hover:bg-indigo-50 ${e===h?"bg-indigo-50 text-indigo-600 font-medium":"text-gray-700"}`,onClick:()=>{r(h),s(!1),o("")},children:h},h)):c.jsxs("div",{className:"px-4 py-2 text-sm text-indigo-600 cursor-pointer hover:bg-indigo-50 font-medium border-t border-gray-100",onClick:()=>{r(a),s(!1),o("")},children:['Use "',a,'"']})})]})]})},aN=({x:t,side:e})=>{const r="#000";return e==="left"?c.jsx("path",{d:`M ${t+10} 40 H ${t} V 60 H ${t+10}`,fill:"none",stroke:r,strokeWidth:"2"}):c.jsx("path",{d:`M ${t-10} 40 H ${t} V 60 H ${t-10}`,fill:"none",stroke:r,strokeWidth:"2"})},eee=()=>c.jsx("text",{x:"50",y:"20",textAnchor:"middle",fontSize:"10",fill:"#333",fontWeight:"bold",children:"INSIDE"}),tee=({mode:t})=>{const e="white",r="black";let n=null,i=null;return t==="LH"?(n=c.jsx("rect",{x:"12",y:"38",width:"60",height:"6",transform:"rotate(-15 12 41)",fill:e,stroke:r,strokeWidth:"2"}),i=c.jsx("circle",{cx:"70",cy:"30",r:"3",fill:"red"})):t==="RH"?(n=c.jsx("rect",{x:"28",y:"38",width:"60",height:"6",transform:"rotate(15 88 41)",fill:e,stroke:r,strokeWidth:"2"}),i=c.jsx("circle",{cx:"30",cy:"30",r:"3",fill:"red"})):t==="LHR"?(n=c.jsx("rect",{x:"12",y:"56",width:"60",height:"6",transform:"rotate(15 12 59)",fill:e,stroke:r,strokeWidth:"2"}),i=c.jsx("circle",{cx:"70",cy:"78",r:"3",fill:"red"})):t==="RHR"&&(n=c.jsx("rect",{x:"28",y:"56",width:"60",height:"6",transform:"rotate(-15 88 59)",fill:e,stroke:r,strokeWidth:"2"}),i=c.jsx("circle",{cx:"30",cy:"78",r:"3",fill:"red"})),c.jsxs("g",{children:[c.jsx(eee,{}),c.jsx(aN,{x:10,side:"left"}),c.jsx(aN,{x:90,side:"right"}),n,i]})},ree=({mode:t})=>{const e="white",r="black";let n=null,i=null,s=null;const a=c.jsx("rect",{x:"10",y:"45",width:"80",height:"10",fill:"#e2e8f0"});return t==="ISO 5 (Left)"?(s=c.jsx("circle",{cx:"15",cy:"50",r:"4",fill:"black"}),n=c.jsx("rect",{x:"15",y:"50",width:"8",height:"40",fill:e,stroke:r,rx:"1"}),i=c.jsx("path",{d:"M 55 50 A 40 40 0 0 1 15 90",fill:"none",stroke:"blue",strokeWidth:"1",strokeDasharray:"2,2"})):t==="ISO 6 (Right)"&&(s=c.jsx("circle",{cx:"85",cy:"50",r:"4",fill:"black"}),n=c.jsx("rect",{x:"77",y:"50",width:"8",height:"40",fill:e,stroke:r,rx:"1"}),i=c.jsx("path",{d:"M 45 50 A 40 40 0 0 0 85 90",fill:"none",stroke:"blue",strokeWidth:"1",strokeDasharray:"2,2"})),c.jsxs("g",{children:[a,n,i,s,c.jsx("text",{x:"50",y:"20",textAnchor:"middle",fontSize:"10",fill:"#666",children:"PULL SIDE VIEW"})]})},nee=({value:t,onChange:e,standard:r})=>{const s=r==="EN"?[{id:"LH",label:"ISO 5 (Left)",desc:"Hinges on Left (Pull Side)"},{id:"RH",label:"ISO 6 (Right)",desc:"Hinges on Right (Pull Side)"}]:[{id:"LH",label:"Left Hand (LH)",desc:"Hinges left, opens in"},{id:"RH",label:"Right Hand (RH)",desc:"Hinges right, opens in"},{id:"LHR",label:"Left Hand Reverse (LHR)",desc:"Hinges left, opens out"},{id:"RHR",label:"Right Hand Reverse (RHR)",desc:"Hinges right, opens out"}];return c.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.map(a=>c.jsxs("div",{onClick:()=>e(a.id==="LH"||a.id==="ISO 5 (Left)"?"LH":a.id==="RH"||a.id==="ISO 6 (Right)"?"RH":a.id),className:`border rounded p-2 flex items-center gap-2 cursor-pointer transition-colors ${t===(a.id.includes("Left")?"LH":a.id.includes("Right")?"RH":a.id)?"border-indigo-600 bg-indigo-50 ring-1 ring-indigo-600":"hover:bg-gray-50 border-gray-200"}`,children:[c.jsx("svg",{width:"60",height:"60",viewBox:"0 0 100 100",className:"text-gray-600 shrink-0 bg-white border border-gray-100 rounded",children:r==="EN"?c.jsx(ree,{mode:a.label}):c.jsx(tee,{mode:a.id})}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:`text-xs font-bold ${t===a.id?"text-indigo-700":"text-gray-700"}`,children:a.label}),c.jsx("span",{className:"text-[10px] text-gray-500",children:a.desc})]})]},a.id))})},iee=({door:t,hardwareSet:e})=>{const r=t.config==="Double",n=parseInt(t.fire,10)>0,i=r&&n,s=(t.use||t.roomName||"").toLowerCase().includes("guest room"),a=t.material||"Timber",o=s?"Timber":a,l=o==="Glass",u=o==="Aluminum",h=o==="Metal",f=o==="Timber",p=t.visionPanel;let d="#d6a15c",v="#a9744f",y="#7c4f2f",_="#5b391f",w="#f0c999";l?(d="rgba(224,242,254,0.9)",v="#7dd3fc",y="#94a3b8",_="#475569",w="#bae6fd"):u?(d="#e5e7eb",v="#94a3b8",y="#6b7280",_="#475569",w="#f8fafc"):h&&(d="#d1d5db",v="#9ca3af",y="#4b5563",_="#1f2937",w="#e5e7eb");const S=12,C=r?280:170,j=240,q=12,G=3,E=r?i?0:6:0,k=C+S*2,A=j+60,D=S,N=S,R=D+q,L=N+q,se=C-q*2,ge=j-q,ve=L+G,ye=ge-G*2,he=se-G*2,_e=(se-G*2-E)/2,Ue=N+j+6,Ie="#94a3b8",P="#64748b",O="#cfd6e3",B="#d9dee7",z="#f8fafc",Z=(e==null?void 0:e.items)||[],de=(Ye=Z,Tt)=>Ye.some(on=>`${on.type||""} ${on.style||""} ${on.category||""}`.toLowerCase().includes(Tt)),Se=Ye=>Z.filter(Tt=>Tt.category===Ye),Ae=Se("Handles"),Ne=Se("Locks"),Xe=Se("Electrified"),et=Se("Accessories"),ot=Se("Closers"),mt=Se("Stops"),te=Se("Seals"),X=Se("Protecting").filter(Ye=>(Ye.type||"").toLowerCase()==="signage"),me=Se("Hinges"),fe=me.map(Ye=>`${Ye.name||""} ${Ye.type||""} ${Ye.style||""}`).join(" ").toLowerCase(),qe=(()=>{var yr;const Ye=fe;if(Ye.includes("continuous"))return 0;const Tt=Ye.includes("patch")||Ye.includes("pivot")||l?2:3,on=parseInt((yr=me[0])==null?void 0:yr.qty,10);if(!on||on<=0)return Tt;const Sr=on/(r?2:1);return Math.max(Tt,Math.round(Sr))})(),Ke=de([...Ae,...Ne],"panic"),st=de([...Ne,...Xe],"magnetic lock");st||Xe.some(Ye=>!sL.includes(Ye.type));const yt=de(Xe,"push button"),Ht=de(Xe,"card reader"),be=de(Ae,"pull"),tt=de(Ae,"lever"),ct=de(Ae,"push"),St=de(et,"kick plate"),Rt=ot.some(Ye=>!`${Ye.type||""} ${Ye.style||""}`.toLowerCase().includes("floor spring")),jt=ot.some(Ye=>`${Ye.type||""} ${Ye.style||""}`.toLowerCase().includes("floor spring")),Dt=ot.some(Ye=>`${Ye.name||""} ${Ye.type||""} ${Ye.style||""}`.toLowerCase().includes("auto")),Wr=de(et,"louver"),hr=de(et,"viewer"),Ge=de(et.concat(Ne),"flush bolt"),Lt=mt[0],mr=Lt?`${Lt.type||""} ${Lt.style||""}`.toLowerCase():"",Kt=Lt?mr.includes("floor")?"floor":mr.includes("wall")?"wall":"general":null,Pr=!!Lt,Qt=de(te,"drop")||de(te,"automatic bottom"),Zt=de(te,"threshold"),qr=t.handing||"RH",Wt=({x:Ye,width:Tt,leafHanding:on,isInactive:Sr})=>{const yr=on==="LH",Fn=6,Jt=5,qn=yr?Ye+Tt-14:Ye+14,rn=ve+ye*.55,ln=yr?Ye:Ye+Tt,kn=yr?Ye+Tt:Ye,Mr=yr?ln-10:ln+10,Zr=yr,ie=(Xr=>{if(Xr<2)return[ve+ye/2];const Lr=30,Wn=ye-Lr-30;return Array.from({length:Xr},(wn,Or)=>ve+Lr+Wn*Or/(Xr-1))})(qe||3),ee=G+6,ne=yr?Ye-G:Ye+Tt-2,oe=Math.min(Tt*.4,60),le=Math.min(ye*.45,90),De=Ye+Tt/2-oe/2,Te=ve+ye*.2,je=26,Me=34,Oe=10,ht=Dt?1.2:1,gt=Me*ht,kt=Oe*ht,pt=yr?Ye+6:Ye+Tt-gt-6,Et=ve+4,rr=12,Tr=22,vr=Zr?Math.min(D+C+4,k-rr-2):Math.max(2,D-rr-4),nn=ve+ye*.45-Tr/2,$n=18,hi=32,di=Zr?Math.min(D+C+6,k-$n-4):Math.max(4,D-$n-6),Jn=ve+ye*.28;let cn="butt";fe.includes("continuous")?cn="continuous":fe.includes("concealed")?cn="concealed":fe.includes("pivot")?cn="pivot":fe.includes("patch")?cn="patch":fe.includes("butt")&&(cn="butt"),!me.length&&l&&(cn="patch"),l&&cn!=="patch"&&(cn="patch"),!l&&cn==="patch"&&(cn="butt");const Cn=()=>{if(cn==="continuous"){const Lr=yr?Ye-1:Ye+Tt-3;return c.jsxs("g",{children:[c.jsx("rect",{x:Lr,y:ve+6,width:"4",height:ye-12,rx:"2",fill:"#cbd4de",stroke:"#7b8596",strokeWidth:"0.8"}),[ve+20,ve+ye/2,ve+ye-20].map((br,Wn)=>c.jsx("circle",{cx:Lr+2,cy:br,r:"1.5",fill:"#7b8596"},`continuous-screw-${Wn}`))]})}if(cn==="pivot"){const Lr=yr?Ye-4:Ye+Tt-4,br=yr?Ye-.5:Ye+Tt-1.5;return c.jsxs("g",{children:[c.jsx("rect",{x:Lr,y:ve-4,width:"8",height:"8",rx:"1",fill:"#cfd4de",stroke:"#6b7280",strokeWidth:"0.8"}),c.jsx("circle",{cx:Lr+4,cy:ve,r:"1.5",fill:"#7b8596"}),c.jsx("rect",{x:Lr,y:ve+ye-4,width:"8",height:"8",rx:"1",fill:"#cfd4de",stroke:"#6b7280",strokeWidth:"0.8"}),c.jsx("circle",{cx:Lr+4,cy:ve+ye,r:"1.5",fill:"#7b8596"}),c.jsx("rect",{x:br,y:ve+8,width:"2",height:ye-16,fill:"#94a3b8"})]})}return(cn==="patch"?[ie[0],ie[ie.length-1]]:ie).map((Lr,br)=>{if(cn==="concealed"){const wn=yr?Ye:Ye+Tt-6;return c.jsx("rect",{x:wn,y:Lr-1,width:"6",height:"12",rx:"1",fill:"#dfe3ec",stroke:"#7b8596",strokeWidth:"0.6"},`concealed-${br}`)}if(cn==="patch"){const wn=yr?Ye-3:Ye+Tt-7;return c.jsx("rect",{x:wn,y:Lr-4,width:"10",height:"16",rx:"2",fill:"#94a3b8",stroke:"#475569",strokeWidth:"0.8"},`patch-${br}`)}const Wn=ne+(ee-6)/2;return c.jsxs("g",{children:[c.jsx("rect",{x:Wn,y:Lr-1.5,width:6,height:"13",rx:"2",fill:"#cfd4de",stroke:"#8b93a5",strokeWidth:"0.8"}),[2.5,6.5,10.5].map(wn=>c.jsx("line",{x1:Wn,x2:Wn+6,y1:Lr-1.5+wn,y2:Lr-1.5+wn,stroke:"#9aa5b6",strokeWidth:"0.6"},`knuckle-line-${br}-${wn}`))]},`hinge-${br}`)})};return c.jsxs("g",{children:[u?c.jsxs(c.Fragment,{children:[c.jsx("rect",{x:Ye,y:ve,width:Tt,height:ye,rx:"3",fill:"#cbd5e1",stroke:"#6b7280",strokeWidth:"2"}),c.jsx("rect",{x:Ye+Tt*.1,y:ve+ye*.1,width:Tt*.8,height:ye*.8,rx:"2",fill:"rgba(224,242,254,0.9)",stroke:"#93c5fd",strokeWidth:"1.5"})]}):c.jsx("rect",{x:Ye,y:ve,width:Tt,height:ye,rx:l?4:2,fill:d,stroke:v,strokeWidth:"1.5"}),f&&!u&&[.2,.5,.8].map((Xr,Lr)=>c.jsx("line",{x1:Ye+Tt*Xr,x2:Ye+Tt*Xr,y1:ve+6,y2:ve+ye-6,stroke:"rgba(255,255,255,0.3)",strokeWidth:"1"},`grain-${Lr}`)),!f&&!l&&!u&&c.jsx("rect",{x:Ye+4,y:ve+6,width:Tt-8,height:ye-12,fill:"none",stroke:"rgba(255,255,255,0.25)",strokeWidth:"1"}),l&&c.jsxs(c.Fragment,{children:[c.jsx("rect",{x:Ye,y:ve,width:Tt,height:14,fill:"#cbd5e1",opacity:"0.6"}),c.jsx("rect",{x:Ye,y:ve+ye-14,width:Tt,height:14,fill:"#cbd5e1",opacity:"0.6"})]}),c.jsx("rect",{x:yr?Ye:Ye+Tt-Fn,y:ve,width:Fn,height:ye,fill:"rgba(0,0,0,0.08)"}),c.jsx("rect",{x:yr?Ye+Tt-Jt:Ye,y:ve,width:Jt,height:ye,fill:w,opacity:"0.35"}),i&&r&&c.jsx("rect",{x:yr?Ye+Tt-4:Ye,y:ve+2,width:"4",height:ye-4,fill:"rgba(0,0,0,0.12)",opacity:"0.7"}),p&&!l&&!u&&c.jsx("rect",{x:De,y:Te,width:oe,height:le,fill:"#e0f2fe",stroke:"#64748b",strokeWidth:"1",rx:"2"}),Wr&&!p&&c.jsxs("g",{opacity:"0.65",children:[c.jsx("rect",{x:Ye+10,y:ve+ye-je-12,width:Tt-20,height:je,fill:"none",stroke:"#6b7280"}),[5,11,17,23].map(Xr=>c.jsx("line",{x1:Ye+12,x2:Ye+Tt-12,y1:ve+ye-je-12+Xr,y2:ve+ye-je-12+Xr,stroke:"#6b7280"},`louver-${Xr}`))]}),Sr&&r&&c.jsx("rect",{x:yr?Ye+Tt-3:Ye,y:ve,width:"3",height:ye,fill:P,opacity:"0.4"}),r&&Ge&&Sr&&c.jsxs(c.Fragment,{children:[c.jsx("rect",{x:kn-2,y:ve+10,width:"4",height:"16",rx:"1",fill:Ie}),c.jsx("rect",{x:kn-2,y:ve+ye-26,width:"4",height:"16",rx:"1",fill:Ie})]}),!Sr&&X.length>0&&X.map((Xr,Lr)=>{const br=(Xr.style||"").toLowerCase(),Wn=ve+54+Lr*18,wn=Ye+Tt/2;return br.includes("disc")?c.jsx("circle",{cx:wn,cy:Wn,r:"10.5",fill:"#4b5563",stroke:"#1f2937",strokeWidth:"1",opacity:"0.85"},`sign-disc-${Lr}`):c.jsx("rect",{x:wn-15,y:Wn-9,width:"30",height:"18",rx:"2",fill:"#4b5563",stroke:"#1f2937",strokeWidth:"1",opacity:"0.85"},`sign-rect-${Lr}`)}),hr&&!l&&!Sr&&c.jsx("circle",{cx:Ye+Tt/2,cy:ve+36,r:"3",fill:"#dbeafe",stroke:P,strokeWidth:"0.8"}),Cn(),Rt&&!Sr&&c.jsx("rect",{x:pt,y:Et,width:gt,height:kt,rx:"2",fill:O,stroke:Ie,strokeWidth:"1"}),st&&!Sr&&c.jsx("rect",{x:yr?Ye+Tt-28:Ye+4,y:ve+6,width:"24",height:"8",rx:"2",fill:"#94a3b8",stroke:"#475569",strokeWidth:"0.8"}),yt&&!Sr&&c.jsxs("g",{children:[c.jsx("rect",{x:vr,y:nn,width:rr,height:Tr,rx:"3",fill:"#e5e7eb",stroke:"#4b5563",strokeWidth:"0.8"}),c.jsx("circle",{cx:vr+rr/2,cy:nn+Tr/2,r:"4",fill:"#cbd5e1",stroke:"#334155",strokeWidth:"0.8"})]}),Ht&&!Sr&&c.jsxs("g",{children:[c.jsx("rect",{x:di,y:Jn,width:$n,height:hi,rx:"3",fill:"#0f172a",stroke:"#1f2937",strokeWidth:"1"}),c.jsx("rect",{x:di+3,y:Jn+6,width:$n-6,height:14,rx:"2",fill:"#94a3b8",opacity:"0.9"}),c.jsx("circle",{cx:di+$n/2,cy:Jn+hi-12,r:"3",fill:"#0ea5e9",stroke:"#1e3a8a",strokeWidth:"0.8"}),c.jsx("circle",{cx:di+$n/2,cy:Jn+hi-6,r:"1.3",fill:"#22c55e"})]}),jt&&!Sr&&c.jsx("rect",{x:yr?Ye+6:Ye+Tt-40,y:ve+ye-10,width:"34",height:"7",rx:"2.5",fill:B,stroke:Ie,strokeWidth:"1"}),Ke?c.jsx("rect",{x:Ye+12,y:rn-6,width:Tt-24,height:"12",rx:"3",fill:"#cbd5e1",stroke:P,strokeWidth:"1"}):be?c.jsx("rect",{x:qn-2,y:rn-20,width:"4",height:"40",rx:"2",fill:P}):ct?c.jsx("rect",{x:qn-10,y:rn-23,width:"20",height:"46",rx:"3",fill:"#e5e7eb",stroke:P,strokeWidth:"1"}):c.jsxs("g",{children:[c.jsx("circle",{cx:qn,cy:rn,r:"6",fill:"#e2e8f0",stroke:P,strokeWidth:"1"}),tt?c.jsx("rect",{x:yr?qn-16:qn+4,y:rn-2,width:"14",height:"4",rx:"2",fill:P}):c.jsx("circle",{cx:yr?qn-8:qn+8,cy:rn,r:"2.5",fill:P})]}),St&&c.jsx("rect",{x:Ye+10,y:ve+ye-30,width:Tt-20,height:"24",fill:"#9ca3af",opacity:"0.7",stroke:P,strokeWidth:"1"}),Qt&&c.jsx("rect",{x:Ye+6,y:ve+ye-5,width:Tt-12,height:"3",rx:"1.5",fill:"#94a3b8"}),Pr&&!Sr&&(Kt==="floor"?c.jsxs("g",{children:[c.jsx("rect",{x:Mr-4,y:Ue-5,width:"8",height:"2",fill:"#6b7280"}),c.jsx("circle",{cx:Mr,cy:Ue-7,r:"3",fill:"#e2e8f0",stroke:"#6b7280",strokeWidth:"0.8"})]}):c.jsx("rect",{x:Mr-2,y:rn-6,width:"4",height:"12",rx:"2",fill:"#cbd5e1",stroke:Ie,strokeWidth:"0.6"}))]})};return c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsxs("svg",{width:r?320:240,height:"320",viewBox:`0 0 ${k} ${A}`,className:"bg-white rounded-lg border border-gray-100 shadow-sm p-2",children:[c.jsx("rect",{x:D,y:N,width:q,height:j,fill:y,stroke:_,strokeWidth:"1"}),c.jsx("rect",{x:D+C-q,y:N,width:q,height:j,fill:y,stroke:_,strokeWidth:"1"}),c.jsx("rect",{x:D,y:N,width:C,height:q,fill:y,stroke:_,strokeWidth:"1"}),c.jsx("rect",{x:R,y:L,width:se,height:ge,fill:z,stroke:_,strokeWidth:"0.5"}),r&&c.jsx("rect",{x:R+G+_e,y:ve,width:E,height:ye,fill:z}),r?c.jsxs(c.Fragment,{children:[c.jsx(Wt,{x:R+G,width:_e,leafHanding:"LH",isInactive:!0}),c.jsx(Wt,{x:R+G+_e+E,width:_e,leafHanding:"RH"})]}):c.jsx(Wt,{x:R+G,width:he,leafHanding:qr.includes("L")?"LH":"RH"}),Zt&&c.jsx("rect",{x:R+G/2,y:Ue-5,width:se-G,height:"3",rx:"1.5",fill:"#b0bec5"}),c.jsx("line",{x1:D,y1:Ue,x2:D+C,y2:Ue,stroke:"#111827",strokeWidth:"2.5",strokeLinecap:"round"})]}),c.jsxs("div",{className:"mt-2 text-xs text-gray-500 font-medium text-center",children:[t.config," ",t.material," ",c.jsx("br",{}),c.jsx("span",{className:"text-indigo-600 font-bold",children:qr})," ",p?"+ Lite Kit":"",r&&c.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:i?"Rebated meeting stile (fire-rated pair)":"Flush meeting stile"})]})]})},see=({onStart:t,hasProjects:e,isAdmin:r,onOpenAdmin:n,isAdminOpen:i,onCloseAdmin:s,showNotice:a})=>{const{user:o,logout:l}=Cp(),[u,h]=we.useState(!1),f=()=>{o?t():h(!0)};return c.jsxs("div",{className:"relative w-full min-h-screen bg-slate-950 text-white overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"absolute inset-0 pointer-events-none","aria-hidden":"true",children:[c.jsx("div",{className:"absolute -top-32 -left-20 w-80 h-80 bg-indigo-600/30 blur-3xl"}),c.jsx("div",{className:"absolute bottom-0 right-0 w-[450px] h-[450px] bg-sky-500/20 blur-[180px]"})]}),c.jsxs("nav",{className:"relative z-20 px-6 md:px-10 lg:px-12 py-5 flex items-center justify-between",children:[c.jsxs("button",{onClick:()=>setView("landing"),className:"flex items-center gap-3 focus:outline-none w-full sm:w-auto text-left",children:[c.jsx("div",{className:"bg-white/10 rounded-2xl p-2.5 backdrop-blur flex items-center justify-center",children:c.jsx(Lu,{className:"text-sky-300 w-7 h-7"})}),c.jsxs("div",{className:"flex flex-col leading-tight",children:[c.jsx("span",{className:"text-xl md:text-2xl font-black tracking-tight",children:"InstaSpec"}),c.jsx("span",{className:"text-[11px] md:text-sm font-semibold text-white/70 whitespace-nowrap",children:"Design Faster. Build Smarter."})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[o&&r&&c.jsx("button",{onClick:n,className:"px-4 py-2 rounded-full border border-indigo-300 text-sm font-semibold text-indigo-50 hover:bg-indigo-500/20 transition",children:"Beta Admin"}),c.jsx("button",{onClick:()=>a==null?void 0:a("Coming Soon","Product tour coming soon."),className:"hidden sm:inline-flex px-4 py-2 rounded-full border border-white/10 text-sm font-semibold text-white/80 hover:bg-white/5 transition",children:"Product Tour"}),c.jsx("button",{onClick:f,className:"px-4 md:px-6 py-2 rounded-full bg-indigo-500 hover:bg-indigo-400 text-sm md:text-base font-semibold shadow-lg shadow-indigo-500/40 transition",children:o?e?"Open Dashboard":"Start Configuring":"Beta Login"})]})]}),c.jsx("main",{className:"relative z-10 flex-1 w-full flex flex-col",children:c.jsx("div",{className:"w-full max-w-6xl mx-auto px-6 md:px-12 py-10 md:py-16",children:c.jsxs("div",{className:"grid gap-12 lg:gap-14 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,420px)] items-start",children:[c.jsxs("section",{className:"order-1 lg:col-start-1 lg:row-start-1 space-y-8",children:[c.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/5 text-[10px] sm:text-xs uppercase tracking-[0.35em] text-white/70 whitespace-nowrap",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),c.jsx("span",{className:"tracking-[0.25em]",children:"FOR ARCHITECTS"}),c.jsx("span",{className:"text-white/40",children:"/"}),c.jsx("span",{className:"tracking-[0.25em]",children:"CONSULTANTS"}),c.jsx("span",{className:"text-white/40",children:"/"}),c.jsx("span",{className:"tracking-[0.25em]",children:"SPECIFIERS"})]}),c.jsxs("div",{children:[c.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-black leading-tight text-white",children:["Specify door hardware with confidence in ",c.jsx("span",{className:"text-sky-300",children:"minutes"}),", not days."]}),c.jsx("p",{className:"mt-4 text-lg md:text-xl text-white/70 max-w-2xl",children:"InstaSpec unifies code compliance, hardware libraries, and visual coordination into a single premium workspace. Build ANSI/EN ready schedules, visualize door sets, and export polished specs instantly."})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("button",{onClick:f,className:"px-8 py-4 bg-sky-400 text-slate-950 font-bold rounded-xl shadow-xl shadow-sky-500/30 flex items-center justify-center gap-2 text-lg hover:bg-sky-300 transition",children:["Start Configuring ",c.jsx(c0,{className:"w-5 h-5"})]}),c.jsx("button",{onClick:()=>a==null?void 0:a("Coming Soon","Demo replay coming soon."),className:"px-8 py-4 border border-white/20 rounded-xl font-semibold text-lg text-white/80 hover:bg-white/10 transition flex items-center justify-center gap-2",children:"View Demo"})]})]}),c.jsxs("aside",{className:"order-2 lg:col-start-2 lg:row-span-2 space-y-10 lg:space-y-12 flex flex-col h-full",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-xs uppercase tracking-[0.4em] text-white/50",children:"Specification Intelligence"}),c.jsx("div",{className:"space-y-4",children:vZ.map((p,d)=>c.jsxs($f,{delay:d*90,ariaLabel:`${p.label} - ${p.title}`,className:"min-h-[160px]",children:[c.jsx("div",{className:"text-xs uppercase tracking-[0.3em] text-white/60",children:p.label}),c.jsx("div",{className:"text-white font-semibold text-2xl mt-2",children:p.title}),c.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:p.body})]},p.title))})]}),c.jsxs("div",{className:"space-y-4 flex-1 flex flex-col",children:[c.jsx("div",{className:"text-xs uppercase tracking-[0.4em] text-white/50",children:"Workflow Snapshot"}),c.jsx(XZ,{steps:Ym})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-xs uppercase tracking-[0.4em] text-white/50",children:"Why InstaSpec?"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:wZ.map((p,d)=>{const v=p.icon||O2,y=d===2?"sm:col-span-2 sm:max-w-xs sm:mx-auto lg:col-span-1 lg:max-w-none lg:mx-0":"";return c.jsxs($f,{delay:(d+Ym.length)*90,ariaLabel:p.title,paddingClass:"px-4 py-4",className:`min-h-[140px] flex flex-col items-start justify-start gap-3 transition-transform duration-300 overflow-visible ${y}`,children:[c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("div",{className:"p-2 rounded-2xl bg-white/10 text-sky-200 flex-shrink-0",children:c.jsx(v,{className:"w-5 h-5","aria-hidden":"true"})})}),c.jsxs("div",{className:"space-y-1 w-full",children:[c.jsx("div",{className:"text-lg md:text-base font-semibold leading-tight text-white whitespace-normal break-normal hyphens-none",children:p.title}),c.jsx("p",{className:"text-sm md:text-xs text-white/80 leading-snug whitespace-normal break-words",children:p.body})]})]},p.title)})})]})]}),c.jsxs("section",{className:"order-3 lg:col-start-1 lg:row-start-2 space-y-6",children:[c.jsx("div",{children:c.jsx("div",{className:"text-xs uppercase tracking-[0.4em] text-white/50",children:"Highlights"})}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:bc.slice(0,6).map((p,d)=>{const v=p.icon||Ip;return c.jsxs($f,{delay:(d+Ym.length)*70,className:"flex flex-col gap-4 min-h-[190px]",ariaLabel:`${p.value} ${p.metric}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 rounded-2xl bg-white/10 text-sky-200",children:c.jsx(v,{className:"w-5 h-5","aria-hidden":"true"})}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-2",children:[c.jsx(iN,{value:Number(p.value),className:"text-3xl font-black leading-none text-white"}),c.jsx("span",{className:"text-sm font-semibold uppercase tracking-wide text-white/70",children:p.metric})]})]}),c.jsx("p",{className:"text-sm text-white/70 leading-relaxed break-normal",children:p.subtext}),c.jsx("div",{className:"mt-auto h-1.5 w-full rounded-full bg-white/10 overflow-hidden",children:c.jsx("div",{className:"h-full w-full bg-gradient-to-r from-sky-400 to-indigo-500"})})]},p.id)})}),(()=>{const p=bc[6],d=p.icon||A1;return c.jsxs($f,{delay:(bc.length+Ym.length)*70,ariaLabel:"1 Project Dashboard -- All projects in one clean, central view",className:"w-full flex flex-col gap-4 min-h-[170px]",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 rounded-2xl bg-white/10 text-sky-200",children:c.jsx(d,{className:"w-5 h-5","aria-hidden":"true"})}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-2",children:[c.jsx(iN,{value:Number(p.value),className:"text-3xl font-black leading-none text-white"}),c.jsx("span",{className:"text-sm font-semibold uppercase tracking-wide text-white/70",children:p.metric})]})]}),c.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:p.subtext}),c.jsx("div",{className:"mt-auto h-1.5 w-full rounded-full bg-white/10 overflow-hidden",children:c.jsx("div",{className:"h-full w-full bg-gradient-to-r from-sky-400 to-indigo-500"})})]})})()]})]})})}),c.jsxs("footer",{className:"relative z-10 w-full border-t border-white/5 bg-slate-950/80 px-6 md:px-10 lg:px-12 py-6 text-center text-sm text-white/60",children:["Engineered with care by"," ",c.jsx("a",{href:"https://techarix.com",target:"_blank",rel:"noreferrer",className:"text-white font-semibold underline underline-offset-2 decoration-white/40 hover:text-sky-300",children:"Techarix"})]}),c.jsx(WU,{isOpen:u,onClose:()=>h(!1),onSuccess:t}),r&&c.jsx(aI,{isOpen:i,onClose:s})]})},aee=({facilityType:t,onNavigate:e})=>{const{mkSystemEnabled:r}=tl();return c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-slideUp",children:[c.jsx(DV,{facilityType:t}),r&&c.jsx("div",{className:"mt-6 flex justify-center",children:c.jsxs("button",{onClick:e,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl hover:from-indigo-700 hover:to-purple-700 font-bold flex items-center justify-center gap-3 shadow-xl text-lg transition-all hover:scale-105",children:[c.jsx(ud,{size:24})," Design the MKS",c.jsx(c0,{size:24})]})})]})},oee=()=>{var Gs,fs,Wl,Da,Xi,Gl,cr,no,nl,Ma;const{user:t,logout:e}=Cp(),[r,n]=we.useState(!1),[i,s]=we.useState(!1),[a,o]=we.useState(!1),[l,u]=we.useState(!1),h=t?NU(t.email):!1,[f,p]=we.useState(!1),[d,v]=we.useState(""),[y,_]=we.useState(!1),w=we.useRef(null),[S,C]=we.useState("landing"),[j,q]=we.useState(0),[G,E]=we.useState([]),k=we.useRef(!1),[A,D]=we.useState(()=>({past:[],present:eN([]),future:[]})),[N,R]=we.useState(()=>typeof window>"u"?!0:window.matchMedia("(min-width: 1024px)").matches),[L,se]=we.useState(null),[ge,ve]=we.useState(!1),[ye,he]=we.useState("Architect"),[_e,Ue]=we.useState([]),[Ie,P]=we.useState(!1),[O,B]=we.useState(""),[z,Z]=we.useState({}),de=we.useRef({}),[Se,Ae]=we.useState(""),Ne=10,[Xe,et]=we.useState({count:0,limit:Ne}),[ot,mt]=we.useState(null),te=we.useRef(null),[ke,X]=we.useState(!1),[me,fe]=we.useState(null),[qe,Ke]=we.useState(!1),st=we.useRef(!1),yt=A.past.length>0,Ht=A.future.length>0,be=we.useCallback(()=>{D(V=>{if(!V.past.length)return V;const pe=V.past[V.past.length-1];k.current=!0,E(pe);const Re=V.past.slice(0,-1),Ve=[V.present,...V.future].slice(0,Vy);return{past:Re,present:pe,future:Ve}})},[E]),tt=we.useCallback(()=>{D(V=>{if(!V.future.length)return V;const pe=V.future[0];k.current=!0,E(pe);const Re=[...V.past,V.present].slice(-Vy),Ve=V.future.slice(1);return{past:Re,present:pe,future:Ve}})},[E]),ct=we.useCallback((V={})=>new Promise(pe=>{te.current=pe,mt({title:"Please Confirm",message:"",confirmLabel:V.showCancel===!1?"OK":"Continue",cancelLabel:"Cancel",showCancel:V.showCancel!==!1,tone:"default",...V})}),[]),St=we.useCallback(V=>{te.current&&(te.current(V),te.current=null),mt(null)},[]),Rt=we.useCallback(()=>{ct({title:"Project saved locally.",message:"Thanks for helping us test InstaSpec!",showCancel:!1,confirmLabel:"Close"})},[ct]),jt=we.useCallback((V,pe,Re="Close")=>ct({title:V,message:pe,showCancel:!1,confirmLabel:Re}),[ct]),Dt=we.useCallback((V,pe,Re="Continue",Ve="Cancel")=>ct({title:V,message:pe,showCancel:!0,confirmLabel:Re,cancelLabel:Ve}),[ct]),Wr=we.useCallback(V=>{Z(pe=>({...pe,[V]:!0})),de.current[V]&&clearTimeout(de.current[V]),de.current[V]=setTimeout(()=>{Z(pe=>{const Re={...pe};return delete Re[V],Re}),delete de.current[V]},4e3)},[]),hr=ot?c.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:c.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-white p-6 shadow-2xl",children:[ot.title&&c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:ot.title}),ot.message&&c.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-line",children:ot.message}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[ot.showCancel&&c.jsx("button",{type:"button",onClick:()=>St(!1),className:"rounded-lg border border-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:ot.cancelLabel||"Cancel"}),c.jsx("button",{type:"button",onClick:()=>St(!0),className:`rounded-lg px-4 py-2 text-sm font-semibold text-white ${ot.tone==="danger"?"bg-red-600 hover:bg-red-700":"bg-indigo-600 hover:bg-indigo-700"}`,children:ot.confirmLabel||"OK"})]})]})}):null,[Ge,Lt]=we.useState({id:"",mark:"",zone:"Tower A",level:"01",roomName:"",qty:1,width:900,height:2100,weight:45,fire:0,use:"",material:"Timber",config:"Single",thickness:45,visionPanel:!1,handing:"RH",stc:35,ada:!1,notes:"",hardwareIntent:"Mechanical",additionalLocations:[]}),[mr,Kt]=we.useState({}),[Pr,Qt]=we.useState(""),[Zt,qr]=we.useState(null),[Wt,Ye]=we.useState({isOpen:!1,setId:null}),[Tt,on]=we.useState(null),[Sr,yr]=we.useState({isOpen:!1,templateId:"",markPrefix:"",locationsText:""}),[Fn,Jt]=we.useState(!1),[qn,rn]=we.useState("Saved"),[ln,kn]=we.useState({isOpen:!1,doors:[]}),[Mr,Zr]=we.useState(null),W=X2(Ge),ie=parseInt(Ge.width,10)||0,ee=Math.max(0,ie-nN),ne=Ge.ada&&(ie<zy||ee<zy),oe=ne?`Door width ${ie||0}mm provides ${ee}mm clear opening; ADA requires ${zy}mm (32").`:"",le=!!(t&&(t.plan==="beta_tester"||t.plan==="beta_admin")),De=!t||t.plan==="beta_admin"?null:Xe.count;we.useEffect(()=>{if(!y)return;const V=pe=>{w.current&&!w.current.contains(pe.target)&&_(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[y]),we.useEffect(()=>{if(typeof window>"u")return;const V=window.matchMedia("(min-width: 1024px)"),pe=Re=>R(Re.matches);return V.addEventListener?V.addEventListener("change",pe):V.addListener(pe),()=>{V.removeEventListener?V.removeEventListener("change",pe):V.removeListener(pe)}},[]),we.useEffect(()=>{if(typeof window>"u")return;const V=pe=>{if(!N||!pe.ctrlKey||pe.metaKey)return;const Re=pe.key.toLowerCase();Re==="z"&&!pe.shiftKey&&yt?(pe.preventDefault(),be()):(Re==="y"||Re==="z"&&pe.shiftKey)&&Ht&&(pe.preventDefault(),tt())};return window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)},[N,be,tt,yt,Ht]),we.useEffect(()=>{if(k.current){k.current=!1;return}const V=eN(G);D(pe=>({past:[...pe.past,pe.present].slice(-Vy),present:V,future:[]}))},[G]),we.useEffect(()=>{if(!(t!=null&&t.email)){E([]),se(null);return}(async()=>{try{const pe=await U3(t.email);E(pe.map(JZ))}catch(pe){console.error("Failed to load projects from Firestore",pe)}})()},[t==null?void 0:t.email]),we.useEffect(()=>{let V=!0;return(async()=>{if(!t||t.plan==="beta_admin"){V&&et({count:0,limit:Ne});return}try{const Re=await eI(t.email);V&&et(Re)}catch(Re){console.error("Failed to load download usage",Re)}})(),()=>{V=!1}},[t==null?void 0:t.email]),we.useEffect(()=>{!t&&S!=="landing"&&C("landing")},[t,S]),we.useEffect(()=>{if(!(t!=null&&t.email))return;rn("Saving..."),(async()=>{try{for(const pe of G)await Lf(t.email,pe);rn("Saved")}catch(pe){console.error("Failed to save projects",pe),rn("Error saving")}})()},[G,t==null?void 0:t.email]),we.useEffect(()=>{if(typeof window>"u")return;window.history.replaceState({view:S},""),st.current=!1;const V=pe=>{var Ve;const Re=((Ve=pe.state)==null?void 0:Ve.view)||"landing";st.current=!0,C(Re)};return window.addEventListener("popstate",V),()=>window.removeEventListener("popstate",V)},[]),we.useEffect(()=>{if(st.current){st.current=!1;return}typeof window>"u"||window.history.pushState({view:S},"")},[S]),we.useEffect(()=>{ge&&(Or(),wn(),Ge.material==="Glass"&&Ge.visionPanel&&Lt(V=>({...V,visionPanel:!1})))},[Ge.fire,Ge.use,Ge.width,Ge.height,Ge.thickness,Ge.location,Ge.material]),we.useEffect(()=>{if(!t||!t.expiresAt){v("");return}const V=()=>{const Re=t.expiresAt-Date.now();if(Re<=0){v("Expired");return}const Ve=Math.round(Re/6e4),it=Math.floor(Ve/60),Qe=Ve%60;it>0?v(`Expires in ${it}h ${Qe}m`):v(`Expires in ${Qe}m`)};V();const pe=setInterval(V,6e4);return()=>clearInterval(pe)},[t]),we.useEffect(()=>{h&&Ae("")},[h]);const Te=()=>G.find(V=>V.id===L),je=we.useCallback(V=>{var it,Qe;const pe=Te();if(!pe)return!1;const Re=Array.isArray(pe.doors)&&pe.doors.length>0,Ve=Array.isArray(pe.sets)&&pe.sets.length>0;switch(V){case 0:return!!((it=pe.name)!=null&&it.trim())&&!!pe.type&&!!pe.standard&&!!((Qe=pe.details)!=null&&Qe.jurisdiction);case 1:return Re;case 2:return Re&&Ve;case 3:return Re&&Ve&&qe;default:return!1}},[G,L,qe]),Me=we.useCallback(V=>{if(V==null||V<=0)return!0;for(let pe=0;pe<V;pe+=1)if(!je(pe))return!1;return!0},[je]),Oe=we.useCallback(V=>{if(!(typeof V!="number"||V===j)){if(V>j&&!Me(V)){fe(V);const pe=Ah[V-1]||"previous step",Re=Ah[V]||"next step";jt(V===1?"Finish Setup to Continue":"Finish previous step",`Complete ${pe} before moving to ${Re}.`);return}fe(null),q(V)}},[j,Me,jt]),ht=we.useCallback(()=>{Ke(!0),Oe(3)},[Oe]);we.useEffect(()=>{me!==null&&Me(me)&&fe(null)},[me,Me]),we.useEffect(()=>{Ke(!1)},[L]),we.useEffect(()=>{j<3&&qe&&Ke(!1)},[j,qe]);const gt=(V,pe)=>{const Re={timestamp:new Date().toISOString(),user:ye,action:pe};E(Ve=>Ve.map(it=>it.id===V?{...it,auditLog:[Re,...it.auditLog||[]]}:it))},kt=()=>{const V=Lh(),pe={id:V,name:"",type:"Commercial Office",standard:"ANSI",details:{client:"",architect:"",jurisdiction:"IBC 2021",address:""},doors:[],sets:[],auditLog:[],instantInputs:op(),instantSchedulingEnabled:!1,mkSystemEnabled:!1};E([...G,pe]),pt(V)},pt=V=>{se(V),fe(null),q(0),C("wizard")},Et=async(V,pe)=>{if(pe.stopPropagation(),!!await ct({title:"Delete project?",message:"Are you sure you want to delete this project?",confirmLabel:"Delete",tone:"danger"}))try{await V3(V),E(G.filter(Ve=>Ve.id!==V)),L===V&&(se(null),C("dashboard"))}catch(Ve){console.error("Failed to delete project",Ve),await jt("Something went wrong","Unable to delete project. Please try again.")}},rr=async()=>{if(await ct({title:"Reset workspace?",message:"This will clear all data for this user. Are you sure?",confirmLabel:"Reset",tone:"danger"})){if(!(t!=null&&t.email)){E([]),C("landing");return}try{const pe=await U3(t.email);await Promise.all(pe.map(Re=>V3(Re.id)))}catch(pe){console.error("Failed to reset projects",pe)}E([]),se(null),fe(null),q(0),C("landing")}},Tr=(V,pe)=>{E(Re=>Re.map(Ve=>{if(Ve.id!==L)return Ve;const Qe={...op(),...Ve.instantInputs||{}},er=Ve.type;return{...Ve,instantInputs:{...Qe,[er]:{...Qe[er],[V]:pe}}}}))},vr=V=>{E(pe=>pe.map(Re=>Re.id===L?{...Re,instantSchedulingEnabled:!!V}:Re))},nn=async()=>{const V=Te();if(!V)return;if(!V.instantSchedulingEnabled){await jt("Enable Instant Scheduling","Turn on Instant Door Scheduling in Step 1 to generate starter doors.");return}const pe=MZ(V);if(!pe.length){await jt("Need more info","Add more Instant Door Scheduling info in Step 1 to auto-generate doors.");return}V.doors.length>0&&!await ct({title:"Append doors?",message:"Append generated doors to your existing schedule?",confirmLabel:"Append"})||kn({isOpen:!0,doors:pe})},$n=()=>{if(!ln.doors.length){kn({isOpen:!1,doors:[]});return}if(!Te())return;const pe=G.map(Re=>Re.id===L?{...Re,doors:[...Re.doors,...ln.doors]}:Re);E(pe),gt(L,`Auto-generated ${ln.doors.length} doors`),kn({isOpen:!1,doors:[]})},hi=async(V,pe,Re,Ve)=>{const it=G.map(Qe=>Qe.id===L?{...Qe,name:V,type:pe,standard:Re,details:Ve}:Qe);if(E(it),gt(L,`Updated project details: ${V}`),t!=null&&t.email){const Qe=it.find(er=>er.id===L);Qe&&await Lf(t.email,Qe)}},di=()=>{P(!0)},Jn=async()=>{if(Object.keys(mr).length>0)return;const V=G.map(pe=>{if(pe.id===L){const Re=[...pe.doors],Ve=Ge.id||Lh(),it=(Ge.additionalLocations||[]).filter(Mt=>Mt.zone||Mt.level||Mt.roomName),Qe=mc({...Ge,id:Ve,additionalLocations:it}),er=Re.findIndex(Mt=>Mt.id===Ge.id);return er>=0?Re[er]=Qe:Re.push(Qe),{...pe,doors:Re}}return pe});if(E(V),gt(L,`Saved door: ${Ge.mark}`),ve(!1),t!=null&&t.email){const pe=V.find(Re=>Re.id===L);pe&&await Lf(t.email,pe)}},cn=async V=>{const pe=G.map(Re=>Re.id===L?{...Re,doors:Re.doors.filter(Ve=>Ve.id!==V)}:Re);if(E(pe),gt(L,`Deleted door ID: ${V}`),t!=null&&t.email){const Re=pe.find(Ve=>Ve.id===L);Re&&await Lf(t.email,Re)}},Cn=async V=>{const Re=Te().doors.find(Mt=>Mt.id===V),Ve=prompt("How many copies do you want to create?","1"),it=parseInt(Ve)||1,Qe=[];for(let Mt=0;Mt<it;Mt++)Qe.push(mc({...Re,id:Lh(),mark:`${Re.mark}-CP${Mt+1}`}));const er=G.map(Mt=>Mt.id===L?{...Mt,doors:[...Mt.doors,...Qe]}:Mt);if(E(er),gt(L,`Bulk duplicated door ${Re.mark} (${it} times)`),t!=null&&t.email){const Mt=er.find(At=>At.id===L);Mt&&await Lf(t.email,Mt)}},Xr=(V,pe)=>{E(Re=>Re.map(Ve=>{if(Ve.id!==L)return Ve;const it=Ve.doors.map(Qe=>{if(Qe.id!==V)return Qe;const er=[...Qe.additionalLocations||[]],Mt=pe(er,Qe)||[];return mc({...Qe,additionalLocations:Mt})});return{...Ve,doors:it}}))},Lr=V=>{var Re;const pe=(Re=Te())==null?void 0:Re.doors.find(Ve=>Ve.id===V);pe&&Xr(V,Ve=>[...Ve,{zone:pe.zone,level:pe.level,roomName:`${pe.roomName} #${Ve.length+2}`}])},br=(V,pe,Re,Ve)=>{Xr(V,it=>{const Qe=[...it];return Qe[pe]={...Qe[pe],[Re]:Ve},Qe})},Wn=(V,pe)=>{Xr(V,Re=>{const Ve=[...Re];return Ve.splice(pe,1),Ve})},wn=()=>{let V=45;if(Ge.material==="Glass")V=12;else{const At=parseInt(Ge.fire);At===0||At===20||At===30?V=45:At===45||At===60?V=54:At>=90&&(V=64)}let pe=45;const Re=Ge.height/1e3,Ve=Ge.width/1e3,it=V/1e3,Qe=Re*Ve*it,er=Re*Ve;if(Ge.material==="Timber"){const At=parseInt(Ge.fire)>0?800:600;pe=Math.round(Qe*At)}else if(Ge.material==="Glass")pe=Math.round(Qe*2500);else if(Ge.material==="Metal"){const At=parseInt(Ge.fire)>0?45:35;pe=Math.round(er*At)}else pe=Math.round(er*30);pe=Math.ceil(pe/5)*5;let Mt=30;for(const[At,ur]of Object.entries(QE))if(Ge.use.includes(At)||Ge.roomName&&Ge.roomName.includes(At)){Mt=ur;break}Lt(At=>({...At,thickness:At.thicknessAuto===!1?At.thickness:V,thicknessAuto:At.thicknessAuto===void 0?!0:At.thicknessAuto,weight:At.weightAuto===!1?At.weight:pe,weightAuto:At.weightAuto===void 0?!0:At.weightAuto,stc:Mt}))},Or=()=>{let V=null;const pe=Ge.use.toLowerCase(),Re=Ge.fire>0;(pe.includes("stair")||pe.includes("exit"))&&!Re?V={type:"warning",msg:"Code Alert: Stairwell/Exit doors typically require a Fire Rating (e.g., 60min/90min per NFPA 80 / EN 1634)."}:(pe.includes("unit")||pe.includes("guest"))&&!Re?V={type:"warning",msg:"Code Alert: Unit Entry doors usually require a fire rating (e.g., FD30/20min)."}:Ge.width<850&&(pe.includes("patient")||pe.includes("accessible")||pe.includes("entrance"))?V={type:"info",msg:"Accessibility Note: Clear opening width might be too narrow for wheelchair access (Recommend >900mm)."}:pe.includes("corridor")&&!Re&&(V={type:"info",msg:"Cross-corridor doors often require smoke/fire control."}),V&&QP&&eb(Ge.id||Ge.mark||"door-form","checkCompliance",{use:Ge.use,fire:Ge.fire,note:V}),qr(V)},Ra=(V,pe)=>{const Re={...mr};let Ve="";const it=parseInt(pe)||0;if(V==="width"||V==="all"){const Qe=V==="all"?Ge.width:it;Qe>0&&(Qe<600||Qe>1300)?Re.width="Width must be 600-1300mm":delete Re.width,Qe>1100&&(Ve="Info: Wide (>1100mm). HD Closers suggested.")}if(V==="height"||V==="all"){const Qe=V==="all"?Ge.height:it;Qe>0&&(Qe<1900||Qe>3e3)?Re.height="Height must be 1900-3000mm":delete Re.height}(V==="weight"||V==="all")&&(V==="all"?Ge.weight:it)>150&&(Ve="Info: Heavy (>150kg). Pivot Sets suggested."),Kt(Re),Qt(Ve)},Zn=(V=null)=>{var Ve;const pe=Te(),Re=((Ve=Tu[pe.type])==null?void 0:Ve.usages)||Tu["Commercial Office"].usages;Lt(mc(V?{...V}:{id:"",mark:`D-${(pe.doors.length+1).toString().padStart(3,"0")}`,zone:"Tower A",level:"01",roomName:"",qty:1,width:900,height:2100,weight:45,fire:0,use:Re[0],material:"Timber",config:"Single",thickness:45,thicknessAuto:!0,visionPanel:!1,handing:"RH",stc:35,ada:!1,notes:"",weightAuto:!0,additionalLocations:[]})),Kt({}),Qt(""),qr(null),Ye({isOpen:!1,setId:null}),ve(!0)},Sn=(V,pe)=>{const Re=new Blob([V],{type:"text/csv;charset=utf-8;"}),Ve=document.createElement("a");if(Ve.download!==void 0){const it=URL.createObjectURL(Re);Ve.setAttribute("href",it),Ve.setAttribute("download",pe),Ve.style.visibility="hidden",document.body.appendChild(Ve),Ve.click(),document.body.removeChild(Ve)}},$s=async()=>{if(B("Generating..."),!await ct({title:"Review Notice",message:Xm,confirmLabel:"I Understand"})){B("");return}try{const pe=await hg(()=>import("https://cdn.sheetjs.com/xlsx-0.20.1/package/xlsx.mjs"),[]),Re=Te(),Ve=pe.utils.book_new(),it=(At,ur)=>{var sr,wt,Rr;const Ot=[[`PROJECT: ${Re.name}`],[`CLIENT: ${((sr=Re.details)==null?void 0:sr.client)||""}`,`ARCHITECT: ${((wt=Re.details)==null?void 0:wt.architect)||""}`],[`FACILITY: ${Re.type}`,`JURISDICTION: ${((Rr=Re.details)==null?void 0:Rr.jurisdiction)||""}`],[`STANDARD: ${Re.standard}`,`DATE: ${new Date().toLocaleDateString()}`],[]],ut=pe.utils.json_to_sheet(At,{origin:"A6"});pe.utils.sheet_add_aoa(ut,Ot,{origin:"A1"}),pe.utils.book_append_sheet(Ve,ut,ur)},Qe=Re.doors.map(At=>{var ur;return{Mark:At.mark,Zone:At.zone,Level:At.level,Room:At.roomName,Qty:At.qty,Width:At.width,Height:At.height,Thk:At.thickness,Fire:At.fire>0?`${At.fire} min`:"NFR",Acoustic:At.stc?`${At.stc} dB`:"N/A",Material:At.material,Config:At.config,Handing:At.handing,"HW Set":((ur=Re.sets.find(Ot=>Ot.doors.includes(At.id)))==null?void 0:ur.id)||"None"}});it(Qe,"Door Schedule");const er=[];Re.sets.forEach(At=>{const Ot=Re.doors.filter(ut=>At.doors.includes(ut.id)).some(ut=>ut.config==="Double")?"Double":"Single";(At.items||[]).forEach(ut=>{er.push({Set:At.id,"Set Name":At.name,"Door Config":Ot,Ref:ut.ref,Category:ut.category,Type:ut.type,Style:ut.style,Finish:ut.finish,Spec:ut.spec,Qty:ut.qty,"Acoustic Contribution":ut.acousticContribution||""})})}),it(er,"Hardware Specs");const Mt={};Re.sets.forEach(At=>{const ur=Re.doors.filter(Ot=>At.doors.includes(Ot.id)).reduce((Ot,ut)=>Ot+ut.qty,0);(At.items||[]).forEach(Ot=>{const ut=`${Ot.category}_${Ot.type}_${Ot.spec}_${Ot.finish}`;Mt[ut]||(Mt[ut]={Category:Ot.category,Type:Ot.type,Style:Ot.style,Spec:Ot.spec,Finish:Ot.finish,"Total Qty":0});let sr=parseFloat(Ot.qty);isNaN(sr)&&(sr=1),Mt[ut]["Total Qty"]+=sr*ur})}),it(Object.values(Mt),"Bill of Materials"),pe.writeFile(Ve,`${Re.name.replace(/\s+/g,"_")}_Schedule_v2.xlsx`),B(""),rn("Exported!")}catch(pe){console.error("Export failed:",pe),await jt("Export failed","Failed to generate Excel file. Please check your internet connection (loading external engine)."),B(""),rn("Error")}},Io=async()=>{if(!await ct({title:"Review Notice",message:Xm,confirmLabel:"I Understand"}))return;const pe=Te(),Re=pe.doors.map(Qe=>{var er;return{Mark:Qe.mark,IfcDoorStyle:Qe.config,Width:Qe.width,Height:Qe.height,FireRating:Qe.fire,AcousticRating:Qe.stc||"N/A",HardwareSet:((er=pe.sets.find(Mt=>Mt.doors.includes(Qe.id)))==null?void 0:er.id)||"None"}}),Ve=Object.keys(Re[0]),it=[Ve.join(","),...Re.map(Qe=>Ve.map(er=>`"${(Qe[er]||"").toString().replace(/"/g,'""')}"`).join(","))].join(`
`);Sn(it,`${pe.name.replace(/\s+/g,"_")}_BIM_SharedParams.csv`)},fu=async()=>{await ct({title:"Review Notice",message:Xm,confirmLabel:"I Understand"})&&window.print()},to=async V=>{if(!t){await jt("Sign in required","Please log in to download documents.");return}if(t.plan==="beta_admin"){await Promise.resolve(V());return}try{const pe=await VU(t.email,Ne);if(!pe.allowed){const Re="Youve reached the 10-download limit for this beta. Please contact your InstaSpec admin to increase your download allowance.";Ae(Re),await jt("Download limit",Re),et({count:pe.count,limit:pe.limit});return}et(pe),Ae(""),await Promise.resolve(V())}catch(pe){console.error("Failed to increment download usage",pe),await jt("Download check failed","Unable to verify download limit. Please try again shortly.")}},Ws=async()=>{const V=Te();if(!V)return;if(!V.doors.length){await jt("Door schedule missing","Finish the Door scheduling before proceeding to the next step.");return}const pe={};V.doors.forEach(it=>{const Qe=`${it.use}|${it.fire}|${it.config}|${it.material}|${it.stc}|${it.hardwareIntent||"Mechanical"}`;pe[Qe]||(pe[Qe]=[]),pe[Qe].push(it)});const Re=Object.entries(pe).map(([it,Qe],er)=>{const Mt=tN(Qe),[At,ur,Ot,ut,sr,wt]=it.split("|"),Rr=parseInt(ur),Ar=Qe.reduce((_t,qt)=>_t.weight>qt.weight?_t:qt),jr=wt==="Electromechanical"?"Electromechanical":"Mechanical",An=Qe.some(_t=>_t.ada),Ls=`HW-${String(er+1).padStart(2,"0")}`,kr=Ot==="Double",aa=kr?"2":"1",ti=(At||"").toLowerCase(),ps=ti.includes("guest room");let ri=[];const ar=(_t,qt,Cr,sn,un,g)=>{const I=rN(_t,V.standard);ri.push({category:_t,ref:qt,type:Cr,style:sn,spec:un,qty:g,finish:I})};let ni=3;Ar.height>2300&&(ni=4),Ar.weight>120&&(ni=4),Ar.height>2300&&Ar.weight>120&&(ni=5);const b=ni*(kr?2:1),U=_t=>kr?`${_t} (Active Leaf)`:_t,ae=_t=>kr?`${_t} (Inactive Leaf)`:_t;if(ut==="Glass"){ar("Hinges","P01","Patch Fitting","Top Patch","Top/Bottom patch kit",kr?"2":"1"),ar("Locks","L01","Patch Lock","Corner Patch Lock",U("Euro Cylinder Type"),"1");const qt=Mt.requiresPanic?"Panic Push Pull Handle":"Pull Handle",Cr=Mt.requiresPanic?"L-Shaped":"D-Pull",sn=Mt.requiresPanic?U("L-shaped panic pull for tempered glass"):U("600mm ctc");ar("Handles","H01",qt,Cr,sn,"1 Pr"),ar("Closers","D01","Floor Spring","Double Action",U("EN 1-4"),"1"),kr&&ar("Closers","D02","Floor Spring","Double Action",ae("EN 1-4"),"1")}else{const _t=V.standard==="ANSI"?"4.5x4.5":"102x76x3";ar("Hinges","H01","Butt Hinge","Ball Bearing",`${_t}, SS`,b.toString()),ti.includes("stair")?ar("Locks","L01","Panic Bar","Rim Type",U("Fire Rated Exit Device"),"1"):ps?(ar("Locks","L01","Hotel Lock","RFID Mortise",U("Mobile key / RFID ready hotel lock"),"1"),ar("Cylinders","C01","Cylinder","Mortise Cylinder",U("Emergency override cylinder"),aa),ar("Handles","H02","Lever Handle","Return to Door","Interior privacy lever trim","1 Pr"),ar("Accessories","A02","Door Viewer","Wide Angle","180 guest room viewer","1"),ar("Accessories","A03","Kick Plate","Satin Stainless",U("Corridor protection plate"),aa)):(ar("Locks","L01","Mortise Lock","Sashlock",U("Cylinder Function"),"1"),ar("Cylinders","C01","Cylinder","Euro Profile",U("Key/Turn"),"1"),ar("Handles","H02","Lever Handle","Return to Door",U("19mm dia"),"1 Pr")),ar("Closers","D01","Overhead Closer","Rack & Pinion",U("EN 2-5, Backcheck"),"1"),kr&&ar("Closers","D02","Overhead Closer","Rack & Pinion",ae("EN 2-5, Backcheck"),"1"),ar("Stops","S01","Door Stop","Floor Mounted Dome","Rubber Buffer","1"),Rr>0&&(ar("Seals","GS01","Perimeter Seal","Intumescent","Head & jambs, 3 sides","1 Set"),ar("Seals","GS02","Drop Seal","Automatic","Under door smoke seal","1")),kr&&ar("Accessories","A01","Leaf Assignment","Active/Inactive","Inactive leaf held closed without locking hardware","1")}Rr>0&&ut==="Glass"&&(ar("Seals","GS01","Perimeter Seal","Intumescent","Glass intumescent gasketing","1 Set"),ar("Seals","GS02","Drop Seal","Automatic","Smoke seal at threshold","1")),jr==="Electromechanical"&&(ps?ar("Electrified","E02","Door Contact","Surface",U("Online monitoring contact"),aa):ar("Electrified","E01","Electric Strike",Rr>0?"Fail-Safe":"Fail-Secure",U("Access control interface"),"1"));const xe=[];Rr>0?xe.push(`Fire door to ${Rr}min with ${qZ(Ot)} configuration`):xe.push(`${Ot} door, non-fire rated`),jr==="Electromechanical"?xe.push("Electrified access control with fail-safe release"):xe.push("Mechanical locking with free egress"),ri.some(_t=>(_t.type||"").toLowerCase().includes("panic"))&&xe.push("Single-motion exit via panic hardware"),ri.some(_t=>_t.category==="Seals")&&xe.push("Perimeter and bottom seals included"),An&&xe.push("Meets ADA 813mm clear opening with accessible hardware");const $e=xe.join(". ")+".",Ft=jh(Qe,ri),Bt=Fh(ri,V.standard,{...Ft,removedAutoTags:[],setId:Ls});return{id:Ls,name:`${At} Door (${ut}) - ${Rr>0?Rr+"min":"NFR"}`,doors:Qe.map(_t=>_t.id),intent:jr,items:Bt,operation:$e,removedAutoTags:[]}}),Ve=G.map(it=>it.id===L?{...it,sets:Re}:it);E(Ve),Oe(2),await ct({title:"Review Notice",message:Xm,confirmLabel:"I Understand",showCancel:!1})},ei=(V,pe,Re,Ve)=>{const it=G.map(Qe=>{if(Qe.id===L){const er=Qe.sets.map(Mt=>{if(Mt.id===V){const At=[...Mt.items];At[pe]={...At[pe],[Re]:Ve};const ur=Qe.doors.filter(sr=>Mt.doors.includes(sr.id)),Ot=jh(ur,At),ut=Mt.removedAutoTags?[...Mt.removedAutoTags]:[];return{...Mt,items:Fh(At,Qe.standard,{...Ot,removedAutoTags:ut,setId:V}),removedAutoTags:ut}}return Mt});return{...Qe,sets:er}}return Qe});E(it)},ja=V=>{const pe={...V,id:`LIB-${Lh()}`,name:`${V.name} (Template)`};Ue([..._e,pe]),jt("Library updated","Hardware Set saved to Global Library!","Great!")},ds=V=>{const pe=Te(),Re=`HW-${String(pe.sets.length+1).padStart(2,"0")}`,Ve={...V,id:Re,doors:[]},it={...jh([],Ve.items||[]),removedAutoTags:Ve.removedAutoTags||[],setId:Re},Qe={...Ve,items:Fh(Ve.items||[],pe.standard,it),removedAutoTags:Ve.removedAutoTags||[]},er=G.map(Mt=>Mt.id===L?{...Mt,sets:[...Mt.sets,Qe]}:Mt);E(er),gt(L,`Loaded set ${V.name} from Library`)},Fa=V=>{Ye({isOpen:!0,setId:V})},Hl=(V,pe)=>{const Re=Te();if(!Re)return;const Ve=K1[V],it=Ve==null?void 0:Ve.types.find(ur=>ur.name===pe),Qe=it?it.styles[0]:"",er=Re.sets.find(ur=>ur.id===Wt.setId);if(!er)return;if(V==="Hinges"&&er.items.some(ur=>ur.category==="Hinges")){jt("One at a time","Only one hanging product can be specified per hardware set.");return}if(V==="Locks"&&er.items.some(ur=>ur.category==="Locks")){jt("One at a time","Only one locking product can be specified per hardware set.");return}const Mt=bd(er.items,V),At=G.map(ur=>{if(ur.id===L){const Ot=ur.sets.map(ut=>{if(ut.id===Wt.setId){const sr={category:V,ref:Mt,type:pe,style:Qe,spec:"",qty:"1",finish:rN(V,Re.standard)},wt=ur.doors.filter(jr=>ut.doors.includes(jr.id)),Rr=jh(wt,[...ut.items,sr]),Ar=ut.removedAutoTags||[];return{...ut,items:Fh([...ut.items,sr],ur.standard,{...Rr,removedAutoTags:Ar,setId:ut.id}),removedAutoTags:Ar}}return ut});return{...ur,sets:Ot}}return ur});E(At),Ye({isOpen:!1,setId:null})},ql=()=>{const V=Te(),pe=V==null?void 0:V.doors.find(Ot=>Ot.id===Sr.templateId);if(!V||!pe){jt("Template needed","Select a template door.");return}const Re=Sr.locationsText.split(`
`).map(Ot=>Ot.trim()).filter(Boolean);if(!Re.length){jt("Locations missing","Provide at least one location.");return}const Ve=Re.map(Ot=>{const ut=Ot.split("|").map(sr=>sr.trim());return{zone:ut[0]||pe.zone||"",level:ut[1]||pe.level||"",roomName:ut[2]||pe.roomName||""}}),[it,...Qe]=Ve,er=Sr.markPrefix||pe.mark||`D-${String(V.doors.length+1).padStart(3,"0")}`,Mt=JP(V.doors,er),At=mc({...pe,id:Lh(),mark:Mt,zone:it.zone,level:it.level,roomName:it.roomName,additionalLocations:Qe,qty:Ve.length}),ur=G.map(Ot=>Ot.id===L?{...Ot,doors:[...Ot.doors,At]}:Ot);E(ur),gt(L,`Bulk created door ${Mt} (${Ve.length} locations)`),yr({isOpen:!1,templateId:"",markPrefix:"",locationsText:""})},$l=(V,pe)=>{const Re=G.map(Ve=>{if(Ve.id===L){const it=Ve.sets.map(Qe=>{if(Qe.id===V){const er=[...Qe.items];er.splice(pe,1);const Mt=Ve.doors.filter(ut=>Qe.doors.includes(ut.id)),At=jh(Mt,er),ur=Qe.removedAutoTags?[...Qe.removedAutoTags]:[],Ot=Qe.items[pe];return Ot!=null&&Ot.autoTag&&!ur.includes(Ot.autoTag)&&ur.push(Ot.autoTag),{...Qe,items:Fh(er,Ve.standard,{...At,removedAutoTags:ur,setId:V}),removedAutoTags:ur}}return Qe});return{...Ve,sets:it}}return Ve});E(Re)},ro=()=>{const V=Te();return gZ(V)};return S==="landing"?c.jsxs(c.Fragment,{children:[c.jsx(see,{onStart:()=>C("dashboard"),hasProjects:G.length>0,isAdmin:h,onOpenAdmin:()=>s(!0),isAdminOpen:i,onCloseAdmin:()=>s(!1),showNotice:jt}),hr]}):Ie?c.jsxs("div",{className:"bg-white min-h-screen text-black p-8 font-serif",children:[c.jsxs("div",{className:"flex justify-between items-center mb-8 border-b-2 border-black pb-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold uppercase tracking-wider",children:((Gs=Te().name)==null?void 0:Gs.trim())||"New Project"}),c.jsx("p",{className:"text-sm",children:"Architectural Door Hardware Schedule"})]}),c.jsxs("div",{className:"text-right text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Client:"})," ",((fs=Te().details)==null?void 0:fs.client)||"N/A"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Architect:"})," ",((Wl=Te().details)==null?void 0:Wl.architect)||"N/A"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Date:"})," ",new Date().toLocaleDateString()]})]})]}),Te().sets.map(V=>{const pe=Te().doors.find(Re=>V.doors.includes(Re.id));return c.jsxs("div",{className:"mb-10 break-inside-avoid",children:[c.jsxs("div",{className:"flex justify-between items-end border-b border-black mb-2 pb-1",children:[c.jsxs("h2",{className:"text-xl font-bold",children:[V.id,": ",V.name]}),c.jsx("span",{className:"text-sm font-mono",children:pe?`${pe.fire>0?`FD${pe.fire}`:"NFR"} | ${pe.material} | ${pe.config}`:""})]}),c.jsx("div",{className:"mb-4 text-sm italic text-gray-700",children:V.operation}),c.jsxs("table",{className:"w-full text-sm border-collapse",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-100 border-b border-gray-400",children:[c.jsx("th",{className:"text-left p-2",children:"Category"}),c.jsx("th",{className:"text-left p-2",children:"Item"}),c.jsx("th",{className:"text-left p-2",children:"Description"}),c.jsx("th",{className:"text-left p-2",children:"Finish"}),c.jsx("th",{className:"text-left p-2",children:"Acoustic"}),c.jsx("th",{className:"text-center p-2",children:"Qty"})]})}),c.jsxs("tbody",{children:[Object.keys(po).map(Re=>{const Ve=V.items.filter(it=>po[Re].includes(it.category));return Ve.length===0?null:c.jsxs(Sc.Fragment,{children:[c.jsx("tr",{className:"bg-gray-50",children:c.jsx("td",{colSpan:"6",className:"p-1 pl-2 font-bold text-xs uppercase text-gray-500 border-b",children:Re})}),Ve.map((it,Qe)=>c.jsxs("tr",{className:"border-b border-gray-200",children:[c.jsx("td",{className:"p-2 text-xs text-gray-400",children:it.category}),c.jsx("td",{className:"p-2 font-bold",children:it.type}),c.jsxs("td",{className:"p-2",children:[it.style," - ",it.spec]}),c.jsx("td",{className:"p-2",children:it.finish}),c.jsx("td",{className:"p-2",children:it.acousticContribution||""}),c.jsx("td",{className:"text-center p-2",children:it.qty})]},Qe))]},Re)}),V.items.filter(Re=>!Object.values(po).flat().includes(Re.category)).map((Re,Ve)=>c.jsxs("tr",{className:"border-b border-gray-200",children:[c.jsx("td",{className:"p-2 text-xs text-gray-400",children:Re.category}),c.jsx("td",{className:"p-2 font-bold",children:Re.type}),c.jsxs("td",{className:"p-2",children:[Re.style," - ",Re.spec]}),c.jsx("td",{className:"p-2",children:Re.finish}),c.jsx("td",{className:"p-2",children:Re.acousticContribution||""}),c.jsx("td",{className:"text-center p-2",children:Re.qty})]},`other-${Ve}`))]})]}),c.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[c.jsx("strong",{children:"Locations:"})," ",Te().doors.filter(Re=>V.doors.includes(Re.id)).map(Re=>`${Re.mark} (${Re.roomName})`).join(", ")]})]},V.id)}),c.jsxs("div",{className:"fixed top-4 right-4 print:hidden",children:[c.jsxs("button",{onClick:()=>to(fu),className:"px-4 py-2 bg-black text-white rounded shadow-lg flex items-center gap-2",children:[c.jsx(hV,{size:16})," Print PDF"]}),c.jsx("button",{onClick:()=>P(!1),className:"ml-2 px-4 py-2 bg-gray-200 text-black rounded shadow-lg",children:"Close"})]})]}):c.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 text-gray-900 font-sans",children:[c.jsx("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center px-4 md:px-8 sticky top-0 z-40",children:c.jsxs("div",{className:"w-full flex items-center gap-3",children:[c.jsxs("button",{onClick:()=>C("landing"),className:"flex items-center gap-2 font-bold text-lg md:text-xl text-gray-900 focus:outline-none",children:[c.jsx(Lu,{className:"text-indigo-600"}),c.jsx("span",{children:"InstaSpec"}),c.jsx("span",{className:"text-xs text-gray-400 font-normal ml-1",children:"v2.1 Beta"})]}),t&&c.jsx("div",{className:"flex-1 hidden md:flex items-center justify-center",children:c.jsxs("div",{className:"inline-flex items-center gap-3 rounded-full border border-gray-200 bg-white px-4 py-1.5 shadow-sm",children:[c.jsx(F3,{size:18,className:"text-indigo-500"}),c.jsxs("select",{value:ye,onChange:V=>he(V.target.value),className:"bg-transparent border-none text-sm font-semibold focus:ring-0 cursor-pointer",children:[c.jsx("option",{value:"Architect",children:"Architect View"}),c.jsx("option",{value:"Contractor",disabled:!0,children:"Contractor View (Coming Soon)"})]})]})}),t&&c.jsxs("div",{className:"hidden md:flex items-center gap-3 ml-4",children:[le&&c.jsx("button",{onClick:()=>o(!0),className:"text-xs md:text-sm px-3 py-1.5 rounded-full border border-amber-200 text-amber-700 hover:bg-amber-50",children:"Share Feedback"}),h&&c.jsx("button",{onClick:()=>s(!0),className:`text-xs md:text-sm px-3 py-1.5 rounded-full border border-indigo-200\r
                             text-indigo-600 hover:bg-indigo-50`,children:"Beta Admin"}),S==="dashboard"&&G.length>0&&c.jsxs("button",{onClick:rr,className:"text-gray-400 hover:text-red-500 text-sm flex items-center gap-1",title:"Clear All Data",children:[c.jsx(dw,{size:16}),c.jsx("span",{className:"hidden md:inline",children:"Reset"})]}),c.jsxs("button",{onClick:()=>C("dashboard"),className:"text-gray-500 hover:text-gray-900 flex items-center gap-2 text-sm md:text-base",children:[c.jsx(A1,{size:18}),c.jsx("span",{className:"hidden md:inline",children:"Dashboard"})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>p(V=>!V),className:`px-3 py-1.5 rounded-full bg-indigo-600 text-white text-xs md:text-sm\r
                             flex items-center gap-2 shadow-sm hover:bg-indigo-700 transition`,children:[c.jsx("span",{className:"max-w-[140px] truncate",children:t.email}),d&&c.jsx("span",{className:`text-[10px] md:text-[11px] px-2 py-0.5 rounded-full\r
                                 bg-indigo-500/80 border border-white/20 whitespace-nowrap`,children:d}),c.jsx(u0,{size:12,className:"opacity-80"})]}),f&&c.jsx("div",{className:`absolute right-0 mt-2 w-40 bg-white rounded-xl shadow-lg\r
                               ring-1 ring-black/5 py-1 text-sm animate-[fadeInUp_0.18s_ease-out] origin-top-right`,children:c.jsx("button",{onClick:()=>{e(),p(!1)},className:`w-full text-left px-3 py-2 text-gray-700\r
                                 hover:bg-indigo-50 hover:text-indigo-700`,children:"Logout"})})]})]}),t&&c.jsxs("div",{className:"ml-auto md:hidden relative",ref:w,children:[c.jsxs("button",{type:"button",onClick:()=>_(V=>!V),className:"flex items-center gap-2 rounded-lg border border-gray-200 px-3 py-1.5 text-sm font-medium text-gray-700",children:[c.jsx(F3,{size:16,className:"text-gray-500"}),c.jsx("span",{children:ye==="Architect"?"Architect View":"Contractor View"}),c.jsx(u0,{size:14,className:`transition-transform ${y?"rotate-180":""}`})]}),y&&c.jsxs("div",{className:"absolute right-0 mt-3 w-64 rounded-2xl bg-white shadow-2xl ring-1 ring-black/5 py-3 z-50",children:[c.jsxs("div",{className:"px-4 pb-2",children:[c.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:t.email}),d&&c.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:d})]}),c.jsx("div",{className:"border-t border-gray-100 my-2"}),c.jsx("div",{className:"px-4 text-[11px] font-semibold text-gray-500 uppercase tracking-wide mb-1",children:"View Mode"}),c.jsxs("button",{type:"button",onClick:()=>{he("Architect"),_(!1)},className:"w-full px-4 py-2 text-sm flex items-center justify-between text-gray-800 hover:bg-indigo-50",children:[c.jsx("span",{children:"Architect View"}),ye==="Architect"&&c.jsx(bu,{size:14,className:"text-indigo-600"})]}),c.jsxs("button",{type:"button",disabled:!0,className:"w-full px-4 py-2 text-sm flex items-center justify-between text-gray-400 cursor-not-allowed",children:[c.jsx("span",{children:"Contractor View"}),c.jsx("span",{className:"text-[10px] uppercase",children:"Soon"})]}),c.jsx("div",{className:"border-t border-gray-100 my-2"}),c.jsx("div",{className:"px-4 text-[11px] font-semibold text-gray-500 uppercase tracking-wide mb-1",children:"Actions"}),c.jsxs("button",{type:"button",onClick:()=>{C("dashboard"),_(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-indigo-50 flex items-center gap-2",children:[c.jsx(A1,{size:16,className:"text-gray-400"}),"Dashboard"]}),le&&c.jsxs("button",{type:"button",onClick:()=>{o(!0),_(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-indigo-50 flex items-center gap-2",children:[c.jsx(oV,{size:16,className:"text-amber-500"}),"Share Feedback"]}),h&&c.jsxs("button",{type:"button",onClick:()=>{s(!0),_(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-indigo-50 flex items-center gap-2",children:[c.jsx(E1,{size:16,className:"text-indigo-500"}),"Beta Admin"]}),S==="dashboard"&&G.length>0&&c.jsxs("button",{type:"button",onClick:()=>{rr(),_(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-red-50 flex items-center gap-2",children:[c.jsx(dw,{size:16,className:"text-red-400"}),"Reset Workspace"]}),c.jsx("div",{className:"border-t border-gray-100 my-2"}),c.jsxs("button",{type:"button",onClick:()=>{e(),_(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-indigo-50 flex items-center gap-2",children:[c.jsx(uV,{size:16,className:"text-gray-400"}),"Logout"]})]})]})]})}),S==="wizard"&&Te()&&c.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 md:px-8 py-3 flex flex-col md:flex-row items-start md:items-center justify-between sticky top-16 z-30 shadow-sm gap-3",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4",children:[c.jsx("span",{className:"font-bold text-base md:text-lg",children:((Da=Te().name)==null?void 0:Da.trim())||"New Project"}),c.jsx("span",{className:"px-2 py-0.5 border rounded text-xs md:text-sm text-gray-500 bg-white whitespace-nowrap",children:Te().standard}),c.jsx("span",{className:"px-2 py-0.5 border rounded text-xs md:text-sm text-gray-500 bg-white whitespace-nowrap",children:Te().type})]}),c.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-end items-center",children:[c.jsxs("button",{onClick:()=>Jt(!Fn),className:"px-3 py-1.5 bg-white border border-gray-200 rounded hover:bg-gray-50 flex items-center gap-2 text-xs md:text-sm",children:[c.jsx(B3,{size:16})," History"]}),c.jsxs("button",{onClick:()=>{hi(Te().name,Te().type,Te().standard,Te().details),Rt()},className:"px-3 py-1.5 bg-white border border-gray-200 rounded hover:bg-gray-50 flex items-center gap-2 text-xs md:text-sm",children:[c.jsx(dV,{size:16})," Save"]}),c.jsxs("button",{onClick:()=>C("dashboard"),className:"px-3 py-1.5 bg-white border border-gray-200 rounded hover:bg-gray-50 flex items-center gap-2 text-xs md:text-sm",children:[c.jsx(ml,{size:16})," Close"]}),c.jsx("span",{className:"text-[11px] md:text-xs text-gray-500 border border-transparent rounded-full px-2 py-0.5 bg-gray-100 whitespace-nowrap",children:O||qn})]})]}),Fn&&Te()&&c.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[c.jsx("div",{onClick:()=>Jt(!1),className:"absolute inset-0 bg-black/20 backdrop-blur-sm"}),c.jsxs("div",{className:"relative w-80 bg-white shadow-2xl h-full overflow-y-auto p-6 animate-slideLeft",children:[c.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[c.jsx(B3,{size:20})," Audit Trail"]}),c.jsxs("div",{className:"space-y-4",children:[(Xi=Te().auditLog)==null?void 0:Xi.map((V,pe)=>c.jsxs("div",{className:"text-sm border-l-2 border-indigo-200 pl-3",children:[c.jsx("div",{className:"font-bold text-gray-800",children:V.action}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex justify-between",children:[c.jsx("span",{children:V.user}),c.jsx("span",{children:new Date(V.timestamp).toLocaleTimeString()})]})]},pe)),(!Te().auditLog||Te().auditLog.length===0)&&c.jsx("p",{className:"text-gray-400 text-sm",children:"No history yet."})]})]})]}),c.jsxs("main",{className:"flex-1 p-4 md:p-8 max-w-7xl mx-auto w-full",children:[S==="dashboard"&&c.jsxs("div",{className:"animate-slideUp",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Projects"}),c.jsx("p",{className:"text-gray-500",children:"Manage your door specifications."})]}),c.jsxs("button",{onClick:kt,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2 font-medium shadow-sm w-full md:w-auto justify-center",children:[c.jsx(Jx,{size:18})," New Project"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:G.map(V=>c.jsxs("div",{onClick:()=>pt(V.id),className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md hover:border-indigo-500 transition-all cursor-pointer group relative",children:[c.jsx("div",{className:"w-12 h-12 bg-indigo-50 text-indigo-600 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:c.jsx(tV,{size:24})}),c.jsx("h3",{className:"font-bold text-lg mb-2",children:V.name}),c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded text-xs font-medium",children:V.type}),c.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded text-xs font-medium",children:V.standard})]}),c.jsxs("p",{className:"text-sm text-gray-400",children:[V.doors.length," Doors Defined"]}),c.jsx("button",{onClick:pe=>Et(V.id,pe),className:"absolute top-4 right-4 text-gray-300 hover:text-red-500 p-2",children:c.jsx(hd,{size:18})})]},V.id))})]}),S==="wizard"&&Te()&&c.jsxs("div",{children:[c.jsx("div",{className:"mb-6 md:mb-10",children:c.jsxs("div",{className:"bg-white/90 border border-gray-200 rounded-2xl px-3 py-4 shadow-sm",children:[c.jsx("div",{className:"hidden md:flex items-center gap-3",children:(()=>{var pe;return((pe=Te())!=null&&pe.mkSystemEnabled?Ah:Ah.slice(0,4)).map((Re,Ve,it)=>{const Qe=j===Ve,er=je(Ve),Mt=me===Ve&&Ve>j;return c.jsxs(Sc.Fragment,{children:[c.jsxs("button",{type:"button",onClick:()=>Oe(Ve),className:"flex flex-col items-center gap-2 min-w-[130px] text-center focus:outline-none",children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold border-2 transition-all ${Qe?"bg-indigo-600 border-indigo-600 text-white shadow":er?"bg-emerald-500 border-emerald-500 text-white":Mt?"bg-orange-50 border-orange-400 text-orange-500":"bg-white border-gray-300 text-gray-400"}`,children:er?c.jsx(bu,{size:16}):Ve+1}),c.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${Qe?"text-indigo-600":"text-gray-400"}`,children:Re})]}),Ve<it.length-1&&c.jsx("div",{className:`flex-1 h-0.5 rounded-full ${me===Ve+1?"bg-orange-400":je(Ve)?"bg-emerald-400":"bg-gray-200"}`})]},`desktop-step-${Re}`)})})()}),c.jsx("div",{className:"md:hidden",children:c.jsx("div",{className:"flex items-center justify-between gap-2",children:(()=>{var Re,Ve;const V=(Re=Te())!=null&&Re.mkSystemEnabled?JE:JE.slice(0,4),pe=(Ve=Te())!=null&&Ve.mkSystemEnabled?Ah:Ah.slice(0,4);return V.map((it,Qe,er)=>{const Mt=pe[Qe],At=j===Qe,ur=je(Qe),Ot=me===Qe&&Qe>j;return c.jsxs(Sc.Fragment,{children:[c.jsxs("button",{type:"button",onClick:()=>Oe(Qe),className:"flex flex-col items-center gap-0.5 text-center focus:outline-none bg-transparent",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border-2 transition-all ${At?"bg-indigo-600 border-indigo-600 text-white shadow":ur?"bg-emerald-500 border-emerald-500 text-white":Ot?"bg-orange-50 border-orange-400 text-orange-500":"bg-white border-gray-300 text-gray-400"}`,children:ur?c.jsx(bu,{size:14}):Qe+1}),c.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider leading-tight ${At?"text-indigo-600":"text-gray-500"}`,children:it}),c.jsx("span",{className:"sr-only",children:Mt})]}),Qe<er.length-1&&c.jsx("div",{className:"flex-1",children:c.jsx("div",{className:`h-0.5 rounded-full ${me===Qe+1?"bg-orange-400":je(Qe)?"bg-emerald-400":"bg-gray-200"}`})})]},`mobile-step-${it}`)})})()})})]})}),j===0&&L&&c.jsx(ny,{projectId:L,projectDoors:Te().doors||[],children:(()=>{var At,ur,Ot;const V=Te();console.log("Step 0 rendering, mkSystemEnabled:",V.mkSystemEnabled);const pe=V.type,Re=SZ(V,pe),Ve=!!V.instantSchedulingEnabled,it=(ut,sr,wt=0)=>c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:ut}),c.jsx("input",{type:"number",min:wt,value:Re[sr]??"",onChange:Rr=>Tr(sr,Math.max(wt,parseInt(Rr.target.value,10)||0)),className:"w-full p-2 border rounded"})]}),Qe=(ut,sr)=>c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:ut}),c.jsxs("select",{value:Re[sr]?"yes":"no",onChange:wt=>Tr(sr,wt.target.value==="yes"),className:"w-full p-2 border rounded bg-white",children:[c.jsx("option",{value:"yes",children:"Yes"}),c.jsx("option",{value:"no",children:"No"})]})]}),er=(ut,sr)=>{const wt=Math.max(0,parseInt(sr,10)||0),Rr={...Re.unitMix||G1};Rr[ut]=wt,Tr("unitMix",Rr);const Ar=Cg.reduce((jr,An)=>jr+(Rr[An]||0),0);Tr("unitsPerFloor",Ar)},Mt=()=>{if(pe==="Residential"){const ut=Re.unitMix||G1,sr=Math.max(1,Cg.reduce((wt,Rr)=>wt+(ut[Rr]||0),0));return c.jsxs(c.Fragment,{children:[it("Number of Floors","floors",1),c.jsxs("div",{className:"col-span-full space-y-2",children:[c.jsx("p",{className:"text-[11px] text-gray-500",children:"How many of each unit type sit on a typical floor? This helps group the hardware intent by usage automatically."}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:Cg.map(wt=>c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:[wt," units / floor"]}),c.jsx("input",{type:"number",min:0,value:ut[wt]??0,onChange:Rr=>er(wt,Rr.target.value),className:"w-full p-2 border rounded"})]},wt))}),c.jsxs("div",{className:"text-[11px] text-gray-500",children:["Total units per floor: ",sr]})]})]})}return pe==="Education / School"?c.jsxs(c.Fragment,{children:[it("Number of Floors","floors",1),it("Classrooms per Floor","classroomsPerFloor",0),it("Toilets per Floor","toiletsPerFloor",0),Qe("Admin / Lab Rooms","hasAdminLabs")]}):pe==="Commercial Office"?c.jsxs(c.Fragment,{children:[it("Number of Floors","floors",1),Qe("Open Office Layout","openLayout"),it("Meeting Rooms per Floor","meetingRooms",0),Qe("Service / Back-of-House Areas","hasServiceAreas")]}):pe==="Hospital / Healthcare"?c.jsxs(c.Fragment,{children:[it("Number of Floors","floors",1),it("Patient Rooms per Floor","patientRoomsPerFloor",1),it("Operating Rooms","operatingRooms",0),it("ICU / Isolation Rooms per Floor","icuRoomsPerFloor",0),Qe("Emergency Department","hasEmergencyDept")]}):pe==="Airport / Transport"?c.jsxs(c.Fragment,{children:[it("Number of Floors","floors",1),it("Concourses / Wings","concourses",1),it("Gates per Concourse","gatesPerConcourse",1),it("Security Checkpoints","securityZones",1),Qe("International / Customs Zone","hasInternationalZone")]}):pe==="Hospitality / Hotel"?c.jsxs(c.Fragment,{children:[it("Number of Floors","floors",1),it("Guest Rooms per Floor","roomsPerFloor",1),it("Suites per Floor","suitesPerFloor",0),Qe("Ballroom / Event Spaces","hasBallroom"),Qe("Service / Back-of-House Areas","hasServiceZones")]}):c.jsxs(c.Fragment,{children:[it("Number of Floors","floors",1),it("Typical Rooms per Floor","roomsPerFloor",0)]})};return c.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-sm border border-gray-200 p-6 md:p-8 animate-slideUp",children:[c.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[c.jsx(mV,{size:24})," Project Context"]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-600",children:["Project Name ",c.jsx("span",{className:"text-xs text-red-500",children:"*"})]}),c.jsx("input",{type:"text",placeholder:"New Project",value:V.name,onChange:ut=>{const sr=G.map(wt=>wt.id===L?{...wt,name:ut.target.value}:wt);E(sr)},className:"p-2.5 border rounded-md placeholder-gray-400"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-600",children:["Facility Type ",c.jsx("span",{className:"text-xs text-red-500",children:"*"})]}),c.jsx("select",{value:V.type,onChange:ut=>{const sr=G.map(wt=>wt.id===L?{...wt,type:ut.target.value}:wt);E(sr)},className:"p-2.5 border rounded-md bg-white",children:Object.keys(Tu).map(ut=>c.jsx("option",{value:ut,children:ut},ut))})]})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-3",children:"Architectural Details"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:["Client / Owner ",c.jsx("span",{className:"text-[9px] text-gray-500",children:"(optional)"})]}),c.jsx("input",{type:"text",placeholder:"e.g. Acme Corp",value:((At=V.details)==null?void 0:At.client)||"",onChange:ut=>{const sr=G.map(wt=>wt.id===L?{...wt,details:{...wt.details,client:ut.target.value}}:wt);E(sr)},className:"w-full p-2 border rounded"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:["Architect ",c.jsx("span",{className:"text-[9px] text-gray-500",children:"(optional)"})]}),c.jsx("input",{type:"text",placeholder:"e.g. Design Studio",value:((ur=V.details)==null?void 0:ur.architect)||"",onChange:ut=>{const sr=G.map(wt=>wt.id===L?{...wt,details:{...wt.details,architect:ut.target.value}}:wt);E(sr)},className:"w-full p-2 border rounded"})]}),ye!=="Owner"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:["Hardware Standard ",c.jsx("span",{className:"text-xs text-red-500",children:"*"})]}),c.jsxs("select",{value:V.standard,onChange:ut=>{var Ar;const sr=ut.target.value;let wt=(Ar=V.details)==null?void 0:Ar.jurisdiction;sr.includes("ANSI")?wt="NFPA 101 (Life Safety Code)":sr.includes("EN")&&(wt="IBC 2021 (International Building Code)");const Rr=G.map(jr=>jr.id===L?{...jr,standard:sr,details:{...jr.details,jurisdiction:wt}}:jr);E(Rr)},className:"w-full p-2 border rounded bg-white",children:[c.jsx("option",{value:"ANSI",children:"ANSI / BHMA (US)"}),c.jsx("option",{value:"EN",children:"EN / ISO (EU)"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:["Code Jurisdiction ",c.jsx("span",{className:"text-xs text-red-500",children:"*"})]}),c.jsxs("select",{value:((Ot=V.details)==null?void 0:Ot.jurisdiction)||"IBC 2021",onChange:ut=>{const sr=G.map(wt=>wt.id===L?{...wt,details:{...wt.details,jurisdiction:ut.target.value}}:wt);E(sr)},className:"w-full p-2 border rounded bg-white",children:[c.jsx("option",{children:"IBC 2021 (International Building Code)"}),c.jsx("option",{children:"NFPA 101 (Life Safety Code)"}),c.jsx("option",{children:"Local / Municipal Code"})]})]})]})]})]}),c.jsxs("div",{className:"border-t pt-6",children:[c.jsxs("div",{className:"flex flex-col gap-1 mb-4",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"Instant Door Scheduling (Optional)"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Would you like us to prep a starter schedule automatically?"})]}),c.jsxs("div",{className:"flex items-center gap-3 self-start",children:[c.jsx("span",{className:"text-[11px] font-semibold text-gray-500 uppercase tracking-wide whitespace-nowrap",children:Ve?"Instant scheduling ON":"Instant scheduling OFF"}),c.jsx("button",{type:"button",role:"switch","aria-checked":Ve,onClick:()=>vr(!Ve),className:`relative inline-flex h-5 w-10 shrink-0 items-center rounded-full transition-colors ${Ve?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition ${Ve?"translate-x-[22px]":"translate-x-1"}`})})]})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"Toggle ON if you'd like to answer a few quick questions and auto-populate a starting door schedule."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:`col-span-full text-xs font-bold uppercase tracking-wide rounded px-3 py-2 border ${Ve?"text-indigo-700 bg-indigo-50 border-indigo-100":"text-gray-500 bg-gray-50 border-gray-200"}`,children:["Facility: ",pe]}),Ve?Mt():c.jsx("div",{className:"col-span-full text-sm text-gray-500 border border-dashed border-gray-300 rounded-lg px-3 py-4 bg-gray-50",children:"Instant Door Scheduling is currently turned off. Flip the toggle above if you want Instaspec to generate a starter list based on your building inputs."})]})]}),c.jsx("div",{className:"flex justify-end mt-6",children:c.jsxs("button",{onClick:()=>Oe(1),className:"w-full md:w-auto px-6 py-2.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-medium flex items-center justify-center gap-2",children:["Save & Continue ",c.jsx(c0,{size:18})]})})]})]})})()}),j===1&&c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6 animate-slideUp",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Door Schedule"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 w-full sm:w-auto",children:[c.jsxs("button",{onClick:()=>Zn(),className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-medium flex items-center justify-center gap-2 whitespace-nowrap",children:[c.jsx(Jx,{size:18}),c.jsx("span",{children:"Add Door"})]}),c.jsx("button",{onClick:()=>{const V=Te();if(!(V!=null&&V.doors.length)){jt("Add a door first","Add at least one door to use bulk assignment.");return}const pe=V.doors[0].id;yr({isOpen:!0,templateId:pe,markPrefix:V.doors[0].mark,locationsText:""})},className:"flex-1 px-4 py-2 border border-indigo-200 text-indigo-700 rounded-md hover:bg-indigo-50 font-medium",children:"Bulk Assign"}),((Gl=Te())==null?void 0:Gl.instantSchedulingEnabled)&&c.jsxs("button",{onClick:nn,className:"flex-1 px-4 py-2 border border-amber-200 text-amber-700 rounded-md hover:bg-amber-50 font-medium flex items-center justify-center gap-2 whitespace-nowrap",title:"Not sure where to begin? Generate a starter door list based on your building.",children:[c.jsx(SV,{size:18})," Instant Door Schedule"]})]})]}),Te().doors.length===0?c.jsxs("div",{className:"text-center py-20 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[c.jsx("p",{className:"text-gray-500",children:"No doors defined yet."}),c.jsx("button",{onClick:()=>Zn(),className:"mt-4 text-indigo-600 font-bold hover:underline",children:"Click to add your first door"})]}):c.jsxs("div",{className:"overflow-x-auto border border-gray-200 rounded-lg hardware-scroll",children:[c.jsx(_Z,{doors:Te().doors}),c.jsxs("table",{className:"w-full table-clean min-w-[1000px]",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left p-3 border-b",children:"Mark"}),c.jsx("th",{className:"text-left p-3 border-b",children:"Location (Zone - Lvl - Room)"}),c.jsx("th",{className:"text-left p-3 border-b",children:"Qty"}),c.jsx("th",{className:"text-left p-3 border-b",children:"WxH (mm)"}),c.jsx("th",{className:"text-left p-3 border-b",children:"Fire"}),c.jsx("th",{className:"text-left p-3 border-b",children:"Acoustic"}),c.jsx("th",{className:"text-left p-3 border-b",children:"Type"}),c.jsx("th",{className:"text-left p-3 border-b",children:"Actions"})]})}),c.jsx("tbody",{children:Te().doors.map(V=>{var pe,Re;return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"p-3 border-b font-bold text-indigo-600",children:V.mark}),c.jsxs("td",{className:"p-3 border-b align-top",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:V.roomName}),c.jsxs("div",{className:"text-xs text-gray-400",children:[V.zone,"  Lvl ",V.level]}),c.jsxs("div",{className:"text-[11px] text-indigo-600 font-semibold mt-1 relative",children:[c.jsx("button",{onClick:()=>Zr(Mr===V.id?null:V.id),className:"hover:underline",children:Mr===V.id?"Hide locations":(pe=V.additionalLocations)!=null&&pe.length?`+${V.additionalLocations.length} more locations`:"Add additional locations"}),Mr===V.id&&c.jsxs("div",{className:"mt-2 border border-indigo-200 bg-white rounded-lg shadow-xl p-3 text-xs text-gray-600 space-y-2",children:[(Re=V.additionalLocations)!=null&&Re.length?V.additionalLocations.map((Ve,it)=>c.jsxs("div",{className:"grid grid-cols-[1fr_80px_1fr_auto] gap-2 items-center",children:[c.jsx("input",{type:"text",value:Ve.zone,onChange:Qe=>br(V.id,it,"zone",Qe.target.value),className:"p-1 border rounded",placeholder:"Zone"}),c.jsx("input",{type:"text",value:Ve.level,onChange:Qe=>br(V.id,it,"level",Qe.target.value),className:"p-1 border rounded",placeholder:"Lvl"}),c.jsx("input",{type:"text",value:Ve.roomName,onChange:Qe=>br(V.id,it,"roomName",Qe.target.value),className:"p-1 border rounded",placeholder:"Room"}),c.jsx("button",{onClick:()=>Wn(V.id,it),className:"text-red-500 hover:text-red-700 text-[11px]",children:"Remove"})]},it)):c.jsx("p",{className:"text-[11px] text-gray-500",children:"No additional locations yet."}),c.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100",children:[c.jsx("button",{onClick:()=>Lr(V.id),className:"text-indigo-600 hover:underline text-[11px]",children:"+ Add Location"}),c.jsx("button",{onClick:()=>Zr(null),className:"text-gray-500 hover:text-gray-700 text-[11px]",children:"Close"})]})]})]})]}),c.jsx("td",{className:"p-3 border-b",children:V.qty}),c.jsxs("td",{className:"p-3 border-b",children:[V.width," x ",V.height]}),c.jsx("td",{className:"p-3 border-b",children:c.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${V.fire>0?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600"}`,children:[V.fire," min"]})}),c.jsx("td",{className:"p-3 border-b text-sm text-gray-500",children:V.stc?c.jsxs("div",{className:"flex flex-col gap-0.5",children:[c.jsxs("span",{children:[V.stc," dB"]}),parseInt(V.stc,10)>=iL&&c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 text-[10px] font-semibold",children:"STC Package"})]}):"-"}),c.jsx("td",{className:"p-3 border-b text-sm",children:c.jsxs("div",{className:"flex flex-col gap-0.5",children:[c.jsxs("span",{children:[V.material," / ",V.config]}),V.ada&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-teal-50 text-teal-700 text-[10px] font-semibold w-fit",children:[c.jsx(R3,{size:12})," ADA"]})]})}),c.jsx("td",{className:"p-3 border-b",children:c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>Cn(V.id),className:"p-2 hover:bg-gray-100 rounded text-gray-500",title:"Bulk Duplicate",children:c.jsx(rI,{size:16})}),c.jsx("button",{onClick:()=>Zn(V),className:"p-2 hover:bg-gray-100 rounded text-gray-500",title:"Edit",children:c.jsx(lV,{size:16})}),c.jsx("button",{onClick:()=>cn(V.id),className:"p-2 hover:bg-red-50 rounded text-red-500",title:"Delete",children:c.jsx(hd,{size:16})})]})})]},V.id)})})]})]}),c.jsxs("div",{className:"flex justify-between mt-6",children:[c.jsxs("button",{type:"button",onClick:()=>Oe(0),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50",children:[c.jsx(j3,{size:16}),"Back"]}),c.jsxs("button",{onClick:Ws,className:"w-full md:w-auto px-6 py-2.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-medium flex items-center justify-center gap-2",children:["Generate Hardware Sets ",c.jsx(c0,{size:18})]})]})]}),j===2&&c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-auto lg:h-[700px] animate-slideUp",children:[c.jsxs("div",{className:"w-full lg:w-72 bg-white border border-gray-200 rounded-xl overflow-hidden flex flex-col shrink-0 h-48 lg:h-auto",children:[c.jsx("div",{className:"bg-gray-50 p-4 border-b border-gray-200 font-bold text-gray-500 uppercase text-xs tracking-wider",children:"Hardware Sets"}),_e.length>0&&ye!=="Owner"&&c.jsxs("div",{className:"p-2 bg-indigo-50 border-b border-indigo-100",children:[c.jsx("div",{className:"text-xs font-bold text-indigo-700 mb-1 px-2",children:"Library Templates"}),_e.map(V=>c.jsxs("button",{onClick:()=>ds(V),className:"w-full text-left text-xs px-2 py-1 text-gray-600 hover:text-indigo-600 hover:bg-indigo-100 rounded",children:["+ ",V.name]},V.id))]}),c.jsx("div",{className:"overflow-y-auto flex-1",children:Te().sets.map(V=>c.jsxs("div",{className:"p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer group",children:[c.jsx("div",{className:"font-bold text-gray-900",children:V.id}),c.jsx("div",{className:"text-sm text-gray-500 truncate",children:V.name})]},V.id))})]}),c.jsxs("div",{className:"flex-1 bg-white border border-gray-200 rounded-xl flex flex-col overflow-hidden min-h-[500px]",children:[c.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:Te().sets.map(V=>{const pe=Te().doors.find(ut=>V.doors.includes(ut.id)),Re=Te().doors.filter(ut=>V.doors.includes(ut.id)),Ve=Re.length>0&&Re.every(ut=>ut.material==="Glass");Array.from(new Set(Re.map(ut=>ut.material)));const it=tN(Re),Qe=pe||BZ(V,it),Mt=V.items.filter(ut=>ut.category==="Handles").some(ut=>(ut.type||"").toLowerCase().includes("lever")),At=Ve&&Mt,ur=Ve&&it.requiresPanic,Ot=UZ(V,it);return c.jsxs("div",{className:"mb-12",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-2",children:[c.jsxs("h2",{className:"text-xl font-bold",children:[V.id,": ",V.name]}),c.jsxs("div",{className:"flex gap-2",children:[ye!=="Owner"&&c.jsxs("button",{onClick:()=>ja(V),className:"text-xs flex items-center gap-1 text-indigo-600 bg-indigo-50 px-2 py-1 rounded hover:bg-indigo-100",title:"Save to Library",children:[c.jsx(sV,{size:12})," Save Template"]}),c.jsxs("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm font-bold",children:[Te().doors.filter(ut=>V.doors.includes(ut.id)).length," Doors"]})]})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[c.jsx("div",{className:"shrink-0",children:c.jsx(iee,{door:Qe,hardwareSet:V})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-4 overflow-x-auto hardware-scroll",children:c.jsxs("div",{className:"min-w-[900px]",children:[c.jsxs("div",{className:"grid grid-cols-[40px_80px_80px_160px_160px_120px_1.2fr_140px_80px_50px] bg-gray-50 border-b border-gray-200 px-4 py-3 text-xs font-bold text-gray-500 uppercase gap-3",children:[c.jsx("div",{}),c.jsx("div",{children:"Ref"}),c.jsx("div",{children:"CSI"}),c.jsx("div",{children:"Product Type"}),c.jsx("div",{children:"Style"}),c.jsx("div",{children:"Finish"}),c.jsx("div",{children:"Specification"}),c.jsx("div",{children:"Acoustic"}),c.jsx("div",{children:"Qty"}),c.jsx("div",{})]}),Object.keys(po).map(ut=>{const sr=V.items.filter(wt=>po[ut].includes(wt.category));return sr.length===0?null:c.jsxs(Sc.Fragment,{children:[c.jsx("div",{className:"bg-gray-100 p-1 pl-2 font-bold text-xs text-gray-500 uppercase border-b border-gray-200 col-span-full",style:{gridColumn:"1 / -1"},children:NZ(sr[0].category)}),sr.map((wt,Rr)=>{var xe,Le;const Ar=V.items.indexOf(wt),jr=wt.category||"Hinges",An=K1[jr],Ls=Lw[Te().standard];let kr=(An==null?void 0:An.types)||[];const aa=wt.autoTag==="card-reader-kit",ti=`${V.id}-${Ar}`;let ri=!!z[ti]?"Lock type reset: previous lock not compatible with selected material.":null;jr==="Hinges"&&(Ve?kr=kr.filter(Ee=>Ee.name==="Patch Fitting"):kr=kr.filter(Ee=>Ee.name!=="Patch Fitting"));let ar=wt.type;if(jr==="Hinges"&&ye!=="Owner"){if(Ve&&ar!=="Patch Fitting"){const Ee="Patch Fitting";kr.some($e=>$e.name===Ee)&&(setTimeout(()=>ei(V.id,Ar,"type",Ee),0),ar=Ee)}else if(!Ve&&ar==="Patch Fitting"){const Ee=(xe=kr[0])==null?void 0:xe.name;Ee&&Ee!==ar&&(setTimeout(()=>ei(V.id,Ar,"type",Ee),0),ar=Ee)}}if(jr==="Locks"){let Ee=kZ(it.materials);if(it.requiresPanic?Ee=Ve?["Patch Lock"]:["Panic Bar"]:it.isEscapeRoute&&(Ee=Ee.filter($e=>!$e.toLowerCase().includes("deadbolt"))),Ee.length||(Ee=kr.map($e=>$e.name)),kr=kr.filter($e=>Ee.includes($e.name)),!kr.some($e=>$e.name===ar)&&kr.length>0){const $e=kr[0].name;setTimeout(()=>{ei(V.id,Ar,"type",$e),Wr(ti),on({title:"Lock type reset",message:"The previously selected lock wasn't compatible with this door material, so the type was updated."})},0),ar=$e,ri="Lock type reset: previous lock not compatible with selected material/use."}if(At){const $e="Patch Lock",Ft="Center Patch Lock";ar!==$e&&kr.some(Bt=>Bt.name===$e)&&(setTimeout(()=>ei(V.id,Ar,"type",$e),0),ar=$e),(wt.style||"")!==Ft&&setTimeout(()=>ei(V.id,Ar,"style",Ft),0),ri||(ri="Glass lever handles require a center patch lock with lever prep.")}}if(jr==="Electrified"){let Ee=CZ(it.materials);const $e=new Set([...Ee,...sL]);if(kr=kr.filter(_t=>$e.has(_t.name)),!kr.some(_t=>_t.name===ar)&&kr.length>0){const _t=kr[0].name;setTimeout(()=>{ei(V.id,Ar,"type",_t),Wr(ti)},0),ar=_t,ri="Electrified option reset for compliance."}const Ft=new Set(V.items.filter(_t=>_t.category==="Electrified"&&_t!==wt).map(_t=>_t.type)),Bt=new Set(["Magnetic Lock","Electric Strike"]);if(kr=kr.filter(_t=>!(Bt.has(_t.name)&&Ft.has(_t.name)&&_t.name!==ar)),aa){const _t=["Card Reader","Push Button"];kr=kr.filter(qt=>_t.includes(qt.name))}}if(jr==="Handles"&&ur){const Ee="Panic Push Pull Handle";ar!==Ee&&kr.some($e=>$e.name===Ee)&&(setTimeout(()=>ei(V.id,Ar,"type",Ee),0),ar=Ee),ri||(ri="Glass escape routes require L-shaped panic push/pull hardware.")}const ni=An==null?void 0:An.types.find(Ee=>Ee.name===ar),b=Te().standard||"ANSI";let U=(ni||{styles:[]}).styles||[],ae=U;if(jr==="Locks"&&ar==="Mortise Lock"&&ni)if(b==="ANSI"&&ni.ansiStyles){U=ni.ansiStyles,ae=ni.ansiStyles;const Ee=((Le=V.name)==null?void 0:Le.toLowerCase())||"";let $e=null;Ee.includes("classroom")||Ee.includes("lecture")?$e="Classroom":Ee.includes("storeroom")||Ee.includes("storage")||Ee.includes("warehouse")?$e="Storeroom":Ee.includes("office")?$e="Office":Ee.includes("entrance")||Ee.includes("lobby")||Ee.includes("main")?$e="Entrance":Ee.includes("restroom")||Ee.includes("bathroom")||Ee.includes("toilet")?$e="Privacy":Ee.includes("corridor")||Ee.includes("passage")||Ee.includes("hallway")?$e="Passage":Ee.includes("apartment")||Ee.includes("unit")?$e="Apartment":Ee.includes("dormitory")||Ee.includes("dorm")||Ee.includes("hostel")?$e="Dormitory":(Ee.includes("hospital")||Ee.includes("clinic")||Ee.includes("medical"))&&($e="Institutional"),$e&&wt.style!==$e&&setTimeout(()=>ei(V.id,Ar,"style",$e),0)}else b==="EN"&&ni.enStyles&&(U=ni.enStyles,ae=ni.enStyles);if(jr==="Electrified"&&it.requiresFailSafe){const Ee=U.filter($e=>$e.toLowerCase().includes("fail-safe")||$e.toLowerCase().includes("rex"));Ee.length>0&&(ae=Ee)}if(jr==="Cylinders"&&ar==="Cylinder")if(b==="ANSI"){ae=U.filter($e=>$e==="Rim Cylinder"||$e==="Mortise Cylinder");const Ee=V.items.find($e=>$e.category==="Locks");Ee&&Ee.type==="Mortise Lock"&&wt.style!=="Mortise Cylinder"&&setTimeout(()=>ei(V.id,Ar,"style","Mortise Cylinder"),0)}else b==="EN"&&(ae=U.filter(Ee=>Ee==="Euro Profile"||Ee==="Oval Profile"));return c.jsxs("div",{className:"grid grid-cols-[40px_80px_80px_160px_160px_120px_1.2fr_140px_80px_50px] border-b border-gray-100 px-4 py-2 items-center gap-3 hover:bg-gray-50 relative",children:[c.jsx("div",{className:"flex justify-center text-gray-400",children:c.jsx(sN,{category:jr})}),ye==="Owner"?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:wt.ref}),c.jsx("div",{className:"text-xs text-gray-400",children:(An==null?void 0:An.csi)||""}),c.jsx("div",{className:"text-sm text-gray-600",children:ar}),c.jsx("div",{className:"text-sm text-gray-600",children:wt.style}),c.jsx("div",{className:"text-sm text-gray-600",children:wt.finish}),c.jsx("div",{className:"text-sm text-gray-500",children:wt.spec}),c.jsx("div",{className:"text-xs text-gray-600",children:wt.acousticContribution||""}),c.jsx("div",{className:"text-sm text-gray-900",children:wt.qty}),c.jsx("div",{})]}):c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"text",value:wt.ref,onChange:Ee=>ei(V.id,Ar,"ref",Ee.target.value),className:"w-full p-1 border rounded text-xs"}),c.jsx("div",{className:"text-xs text-gray-400",children:(An==null?void 0:An.csi)||""}),c.jsxs("div",{className:"flex flex-col gap-0.5",children:[c.jsx("select",{value:ar,onChange:Ee=>ei(V.id,Ar,"type",Ee.target.value),className:"w-full p-1 border rounded text-xs bg-white",children:kr.map(Ee=>c.jsx("option",{value:Ee.name,children:Ee.name},Ee.name))}),(jr==="Locks"||jr==="Electrified")&&ri&&c.jsx("span",{className:"text-[10px] text-orange-600",children:ri})]}),c.jsx("select",{value:wt.style,onChange:Ee=>ei(V.id,Ar,"style",Ee.target.value),className:"w-full p-1 border rounded text-xs bg-white",children:ae.map(Ee=>c.jsx("option",{value:Ee,children:Ee},Ee))}),c.jsx("select",{value:wt.finish,onChange:Ee=>ei(V.id,Ar,"finish",Ee.target.value),className:"w-full p-1 border rounded text-xs bg-white",children:(rb(jr,Te().standard)||Ls).map(Ee=>c.jsx("option",{value:Ee,children:Ee},Ee))}),c.jsx("input",{type:"text",value:wt.spec,onChange:Ee=>ei(V.id,Ar,"spec",Ee.target.value),className:"w-full p-1 border rounded text-xs"}),c.jsx("div",{className:"flex justify-start",children:wt.acousticContribution?c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-[10px] font-semibold",children:wt.acousticContribution}):c.jsx("span",{className:"text-gray-300 text-[10px]",children:"-"})}),c.jsx("input",{type:"text",value:wt.qty,onChange:Ee=>ei(V.id,Ar,"qty",Ee.target.value),className:"w-full p-1 border rounded text-xs"}),c.jsx("button",{onClick:()=>$l(V.id,Ar),className:"text-red-400 hover:text-red-600 flex justify-center p-2",children:c.jsx(hd,{size:14})})]})]},Rr)})]},ut)}),V.items.filter(ut=>!Object.keys(po).some(sr=>po[sr].includes(ut.category))).map((ut,sr)=>c.jsxs("div",{className:"grid grid-cols-[30px_60px_60px_140px_140px_100px_1fr_120px_60px_40px] border-b border-gray-100 p-2 items-center hover:bg-gray-50 relative",children:[c.jsx("div",{className:"flex justify-center text-gray-400",children:c.jsx(sN,{category:ut.category})}),c.jsx("input",{type:"text",value:ut.ref,className:"w-full p-1 border rounded text-xs",disabled:!0}),c.jsx("div",{className:"text-xs text-gray-400"}),c.jsx("div",{className:"text-sm text-gray-600",children:ut.type}),c.jsx("div",{className:"text-sm text-gray-600",children:ut.style}),c.jsx("div",{className:"text-sm text-gray-600",children:ut.finish}),c.jsx("div",{className:"text-sm text-gray-500",children:ut.spec}),c.jsx("div",{className:"text-xs text-gray-600",children:ut.acousticContribution||""}),c.jsx("div",{className:"text-sm text-gray-900",children:ut.qty})]},"other-"+sr))]})}),ye!=="Owner"&&c.jsxs("button",{onClick:()=>Fa(V.id),className:"text-sm font-medium text-indigo-600 hover:underline flex items-center gap-1 mb-4 px-2 py-1",children:[c.jsx(Jx,{size:14})," Add Item"]}),Ot.length>0&&c.jsx("div",{className:"mt-2 text-sm text-orange-700 bg-orange-50 border border-orange-200 rounded p-2",children:Ot.map((ut,sr)=>c.jsxs("div",{children:[" ",ut]},sr))}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Operational Description"}),c.jsx("textarea",{value:V.operation,readOnly:ye==="Owner",onChange:ut=>{const sr=G.map(wt=>wt.id===L?{...wt,sets:wt.sets.map(Rr=>Rr.id===V.id?{...Rr,operation:ut.target.value}:Rr)}:wt);E(sr)},rows:2,className:"w-full p-2 border border-gray-300 rounded text-sm bg-gray-50"})]})]})]})]},V.id)})}),c.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-between",children:[c.jsxs("button",{onClick:()=>Oe(1),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded hover:bg-gray-100 flex items-center gap-2",children:[c.jsx(j3,{size:16})," Back"]}),c.jsxs("button",{onClick:ht,className:"px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-2 font-medium",children:["Finish & Review ",c.jsx(c0,{size:16})]})]})]})]}),j===3&&c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 md:p-8 animate-slideUp",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Specification Review"}),c.jsxs("div",{className:"w-full md:w-auto flex flex-col gap-3",children:[c.jsxs("div",{className:"hidden md:flex gap-3",children:[ye!=="Owner"&&c.jsxs("button",{onClick:()=>to(Io),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 font-bold flex items-center justify-center gap-2 shadow-sm text-sm",children:[c.jsx(b1,{size:18})," Export BIM Data"]}),c.jsxs("button",{onClick:di,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-bold flex items-center justify-center gap-2 shadow-sm text-sm",children:[c.jsx(hw,{size:18})," Print Spec Sheet"]}),c.jsxs("button",{onClick:()=>to($s),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-bold flex items-center justify-center gap-2 shadow-sm",children:[c.jsx(S1,{size:18})," Export Schedule"]}),t&&c.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 border border-red-200 text-red-600 rounded-lg hover:bg-red-50 font-semibold flex items-center justify-center gap-2 shadow-sm text-sm",children:[c.jsx(xo,{size:18})," Report an Error"]})]}),c.jsxs("div",{className:"md:hidden",children:[c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[c.jsxs("button",{type:"button",onClick:()=>X(V=>!V),className:"w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-gray-700 bg-white",children:[c.jsx("span",{children:"Download Files"}),c.jsx(u0,{size:18,className:`transition-transform ${ke?"rotate-180":""}`})]}),ke&&c.jsxs("div",{className:"border-t border-gray-200 bg-gray-50 px-4 py-3 space-y-2",children:[ye!=="Owner"&&c.jsxs("button",{onClick:()=>{to(Io),X(!1)},className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg text-sm font-semibold flex items-center justify-center gap-2",children:[c.jsx(b1,{size:16})," Export BIM Data"]}),c.jsxs("button",{onClick:()=>{di(),X(!1)},className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-semibold flex items-center justify-center gap-2",children:[c.jsx(hw,{size:16})," Print Spec Sheet"]}),c.jsxs("button",{onClick:()=>{to($s),X(!1)},className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-semibold flex items-center justify-center gap-2",children:[c.jsx(S1,{size:16})," Export Schedule"]})]})]}),t&&c.jsxs("button",{onClick:()=>u(!0),className:"w-full mt-3 px-4 py-2 border border-red-200 text-red-600 rounded-lg hover:bg-red-50 font-semibold flex items-center justify-center gap-2 shadow-sm text-sm",children:[c.jsx(xo,{size:18})," Report an Error"]})]}),!h&&t&&c.jsxs("div",{className:"text-xs text-gray-500",children:["Downloads used: ",De??0," / ",Ne]}),Se&&c.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2",children:Se})]})]}),ro().length>0?c.jsxs("div",{className:"mb-8 p-4 bg-red-50 border border-red-200 rounded-xl",children:[c.jsxs("h3",{className:"font-bold text-red-700 flex items-center gap-2 mb-2",children:[c.jsx(Qh,{size:20})," Code Compliance Warnings"]}),c.jsx("div",{className:"space-y-2",children:ro().map((V,pe)=>c.jsxs("div",{className:"flex gap-2 text-sm text-red-800 items-start",children:[c.jsxs("span",{className:"font-bold shrink-0",children:["[",V.set,"]"]}),c.jsx("span",{children:V.msg})]},pe))})]}):c.jsxs("div",{className:"mb-8 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center gap-3 text-green-800",children:[c.jsx(bu,{size:24}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold",children:"Code Compliance Verified"}),c.jsx("div",{className:"text-sm",children:"All fire and egress logic checks passed."})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[c.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Total Doors"}),c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:Te().doors.length})]}),c.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[c.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Hardware Sets"}),c.jsx("div",{className:"text-3xl font-bold text-indigo-600",children:Te().sets.length})]}),c.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[c.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Jurisdiction"}),c.jsx("div",{className:"text-lg font-bold text-gray-800",children:((cr=Te().details)==null?void 0:cr.jurisdiction)||"Standard"})]})]}),c.jsx(ny,{projectId:L,projectDoors:Te().doors||[],children:c.jsx(aee,{facilityType:Te().type,onNavigate:()=>q(5)})})]})]}),j===5&&L&&c.jsx(ny,{projectId:L,projectDoors:Te().doors||[],children:c.jsx(fZ,{projectDoors:Te().doors||[],projectName:Te().name||"Untitled Project",projectStandard:Te().mkStandard||"ANSI_BHMA",showNotice:jt,showConfirm:Dt,onBackToSetup:()=>q(3)})})]}),S==="wizard"&&c.jsx("footer",{className:"bg-slate-900/95 text-white px-4 md:px-8 py-8 shadow-inner",children:c.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col gap-4",children:[c.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[c.jsx("div",{className:"hidden md:flex gap-3 justify-center items-stretch",children:bc.map(V=>c.jsxs("div",{className:"flex-1 min-w-[160px] bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-center",children:[c.jsx("div",{className:"text-lg font-extrabold tracking-tight",children:Number(V.value).toLocaleString()}),c.jsx("div",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:V.metric})]},`wizard-stat-desktop-${V.id}`))}),c.jsxs("div",{className:"md:hidden",children:[c.jsx("div",{className:"grid grid-cols-2 gap-3",children:bc.slice(0,6).map(V=>c.jsxs("div",{className:"flex flex-col items-center justify-center bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-center min-h-[90px]",children:[c.jsx("div",{className:"text-xl font-extrabold tracking-tight",children:Number(V.value).toLocaleString()}),c.jsx("div",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:V.metric})]},`wizard-stat-mobile-${V.id}`))}),bc[6]&&c.jsxs("div",{className:"mt-3 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-center",children:[c.jsx("div",{className:"text-xl font-extrabold tracking-tight",children:Number(bc[6].value).toLocaleString()}),c.jsx("div",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:bc[6].metric})]})]})]}),c.jsxs("div",{className:"text-center text-xs text-white/60",children:["Engineered with care by"," ",c.jsx("a",{href:"https://techarix.com",target:"_blank",rel:"noreferrer",className:"text-white font-semibold underline underline-offset-2 decoration-white/40 hover:text-sky-300",children:"Techarix"})]})]})}),S==="dashboard"&&c.jsx("footer",{className:"bg-slate-900 text-white border-t border-gray-200 px-4 md:px-8 py-10",children:c.jsxs("div",{className:"max-w-7xl mx-auto w-full space-y-6",children:[c.jsx("h3",{className:"font-bold text-white/70 uppercase text-sm mb-4 tracking-[0.3em]",children:"Coming Soon Features"}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 p-6 border border-white/10 rounded-2xl flex flex-col items-center justify-center text-white/80 bg-white/5 shadow-inner",children:[c.jsx(yV,{size:24,className:"mb-2 text-sky-300"}),c.jsx("span",{className:"font-bold",children:"Upload Floor Plan"}),c.jsx("span",{className:"text-xs text-white/60",children:"AI Extraction"})]}),c.jsxs("div",{className:"flex-1 p-6 border border-white/10 rounded-2xl flex flex-col items-center justify-center text-white/80 bg-white/5 shadow-inner",children:[c.jsx(wV,{size:24,className:"mb-2 text-indigo-300"}),c.jsx("span",{className:"font-bold",children:"Instant Schedule"}),c.jsx("span",{className:"text-xs text-white/60",children:"One-click Generation"})]})]}),c.jsxs("div",{className:"text-center text-xs text-white/60",children:["Engineered with care by"," ",c.jsx("a",{href:"https://techarix.com",target:"_blank",rel:"noreferrer",className:"text-white font-semibold underline underline-offset-2 decoration-white/40 hover:text-sky-300",children:"Techarix"})]})]})}),ge&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 sm:p-6",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[c.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-100 flex justify-between items-center shrink-0",children:[c.jsx("h3",{className:"text-xl font-bold",children:"Edit Door"}),c.jsx("button",{onClick:()=>ve(!1),className:"text-gray-400 hover:text-gray-600 p-2",children:c.jsx(ml,{size:24})})]}),c.jsxs("div",{className:"p-4 md:p-6 space-y-6 overflow-y-auto flex-1",children:[c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-3",children:"Architectural Location"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Zone / Building"}),c.jsx("input",{type:"text",value:Ge.zone,onChange:V=>Lt({...Ge,zone:V.target.value}),className:"p-2 border rounded",placeholder:"e.g. Tower A"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Level / Floor"}),c.jsx("input",{type:"text",value:Ge.level,onChange:V=>Lt({...Ge,level:V.target.value}),className:"p-2 border rounded",placeholder:"e.g. 01"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Room Name"}),c.jsx(ZZ,{options:((no=Tu[Te().type])==null?void 0:no.usages)||[],value:Ge.roomName,onChange:V=>Lt({...Ge,roomName:V,use:V||Ge.use}),placeholder:"Select or type..."})]})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500 mb-1 block",children:"Additional Locations"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Manage locations directly from the door schedule by expanding the +N more locations dropdown."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Door Mark / ID"}),c.jsx("input",{type:"text",value:Ge.mark,onChange:V=>Lt({...Ge,mark:V.target.value}),className:"p-2.5 border rounded"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Qty"}),c.jsx("input",{type:"number",value:1+(((nl=Ge.additionalLocations)==null?void 0:nl.length)||0),readOnly:!0,className:"p-2.5 border rounded bg-gray-100 text-gray-500"}),c.jsx("span",{className:"text-[10px] text-gray-500",children:"Calculated from location list"})]})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsx("div",{className:"text-xs font-bold uppercase text-gray-400 mb-4",children:"Dimensions & Performance"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Width (mm)"}),c.jsx("input",{type:"number",value:Ge.width,onChange:V=>{Lt({...Ge,width:V.target.value}),Ra("width",V.target.value)},className:`w-full p-2.5 border rounded ${mr.width?"border-red-300 bg-red-50":""}`}),mr.width&&c.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[c.jsx(xo,{size:12})," ",mr.width]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Height (mm)"}),c.jsx("input",{type:"number",value:Ge.height,onChange:V=>{Lt({...Ge,height:V.target.value}),Ra("height",V.target.value)},className:`w-full p-2.5 border rounded ${mr.height?"border-red-300 bg-red-50":""}`}),mr.height&&c.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[c.jsx(xo,{size:12})," ",mr.height]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Thickness (mm)"}),c.jsx("input",{type:"number",value:Ge.thickness,onChange:V=>Lt({...Ge,thickness:parseInt(V.target.value)||0,thicknessAuto:!1}),className:"w-full p-2.5 border rounded"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Weight (kg) - Auto"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"number",value:Ge.weight,onChange:V=>{Lt({...Ge,weight:parseInt(V.target.value)||0,weightAuto:!1})},className:"w-full p-2.5 border rounded"}),c.jsx(fV,{size:14,className:"absolute right-3 top-3.5 text-gray-400"})]}),c.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:"Estimated weight; verify with manufacturer"})]})]}),ne&&c.jsxs("div",{className:"mt-2 text-sm text-amber-800 bg-amber-50 border border-amber-200 rounded p-3 flex items-start gap-2",children:[c.jsx(Qh,{size:16,className:"mt-0.5"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold",children:"ADA Clearance Warning"}),c.jsx("div",{children:oe}),c.jsxs("div",{className:"text-[11px] text-amber-700 mt-1",children:["Clear opening assumes ",nN,"mm deduction for hinges/handles."]})]})]}),Pr&&c.jsxs("div",{className:"mt-2 text-orange-600 text-sm bg-orange-50 p-2 rounded border border-orange-100 flex items-center gap-2",children:[c.jsx(Qh,{size:14})," ",Pr]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 border-t pt-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Acoustic Rating (STC/dB)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(sI,{size:16,className:"text-gray-400"}),c.jsx("input",{type:"number",value:Ge.stc,onChange:V=>Lt({...Ge,stc:V.target.value}),className:"w-full p-2.5 border rounded",placeholder:"35"})]}),c.jsxs("div",{className:"text-[10px] text-indigo-600 mt-1",children:["Recommended for ",Ge.roomName||"Selected Room",": ",QE[Ge.roomName]||30," dB"]})]}),c.jsx("div",{className:"flex items-center pt-6",children:c.jsxs("div",{onClick:()=>Lt({...Ge,ada:!Ge.ada}),className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("div",{className:`w-5 h-5 border rounded flex items-center justify-center ${Ge.ada?"bg-blue-600 border-blue-600 text-white":""}`,children:Ge.ada&&c.jsx(bu,{size:14})}),c.jsxs("span",{className:"text-sm font-bold text-blue-700 flex items-center gap-1",children:[c.jsx(R3,{size:16})," ADA Compliant"]})]})})]}),c.jsxs("div",{className:"mt-4 border-t pt-4",children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500 mb-2 block",children:["Door Handing (",Te().standard," / Standard)"]}),c.jsx(nee,{value:Ge.handing,standard:Te().standard,onChange:V=>Lt({...Ge,handing:V})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500 mb-2 block",children:"Material"}),c.jsxs("select",{value:Ge.material,onChange:V=>Lt({...Ge,material:V.target.value}),className:"w-full p-2.5 border rounded bg-white",children:[c.jsx("option",{value:"Timber",children:"Timber / Wood"}),c.jsx("option",{value:"Metal",children:"Hollow Metal"}),c.jsx("option",{value:"Glass",children:"Glass"}),c.jsx("option",{value:"Aluminum",children:"Aluminum"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500 mb-2 block",children:"Configuration"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{onClick:()=>Lt({...Ge,config:"Single"}),className:`flex-1 border rounded p-2 flex flex-col items-center gap-1 cursor-pointer ${Ge.config==="Single"?"border-indigo-600 bg-indigo-50 text-indigo-600 ring-1 ring-indigo-600":"hover:bg-gray-50"}`,children:[c.jsx(Lu,{size:20})," ",c.jsx("span",{className:"text-sm",children:"Single"})]}),c.jsxs("div",{onClick:()=>Lt({...Ge,config:"Double"}),className:`flex-1 border rounded p-2 flex flex-col items-center gap-1 cursor-pointer ${Ge.config==="Double"?"border-indigo-600 bg-indigo-50 text-indigo-600 ring-1 ring-indigo-600":"hover:bg-gray-50"}`,children:[c.jsx(uw,{size:20})," ",c.jsx("span",{className:"text-sm",children:"Double"})]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsx("div",{onClick:()=>Ge.material!=="Glass"&&Lt({...Ge,visionPanel:!Ge.visionPanel}),className:`w-5 h-5 border rounded cursor-pointer flex items-center justify-center ${Ge.visionPanel?"bg-indigo-600 border-indigo-600 text-white":"bg-white"} ${Ge.material==="Glass"?"opacity-50 cursor-not-allowed bg-gray-100":""}`,children:Ge.visionPanel&&c.jsx(bu,{size:14})}),c.jsx("label",{className:`text-sm font-medium cursor-pointer ${Ge.material==="Glass"?"text-gray-400":"text-gray-700"}`,onClick:()=>Ge.material!=="Glass"&&Lt({...Ge,visionPanel:!Ge.visionPanel}),children:Ge.material==="Glass"?"Vision Panel N/A for Glass Doors":"Include Vision Panel / Glazing"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Fire Rating"}),c.jsx("select",{value:Ge.fire,onChange:V=>Lt({...Ge,fire:parseInt(V.target.value)}),className:"w-full p-2.5 border rounded bg-white",children:Te().standard==="ANSI"?c.jsxs(c.Fragment,{children:[c.jsx("option",{value:"0",children:"Non-Rated"}),c.jsx("option",{value:"20",children:"20 min"}),c.jsx("option",{value:"45",children:"45 min"}),c.jsx("option",{value:"60",children:"60 min"}),c.jsx("option",{value:"90",children:"90 min"}),c.jsx("option",{value:"180",children:"3 Hour"})]}):c.jsxs(c.Fragment,{children:[c.jsx("option",{value:"0",children:"None"}),c.jsx("option",{value:"30",children:"30 min"}),c.jsx("option",{value:"60",children:"60 min"}),c.jsx("option",{value:"90",children:"90 min"}),c.jsx("option",{value:"120",children:"120 min"})]})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Usage Type"}),c.jsx("select",{value:Ge.use,onChange:V=>Lt({...Ge,use:V.target.value}),className:"w-full p-2.5 border rounded bg-white",children:(Ma=Tu[Te().type])==null?void 0:Ma.usages.map(V=>c.jsx("option",{value:V,children:V},V))})]})]}),rL(Ge.use)&&Number(Ge.fire)===0&&c.jsxs("div",{className:"mt-3 rounded border border-blue-200 bg-blue-50 px-3 py-2 text-xs text-blue-800 flex items-center gap-2",children:[c.jsx(uw,{size:14}),tL]}),Ge.config==="Double"&&c.jsx("div",{className:"text-[11px] text-gray-500",children:Ge.fire>0?"Fire-rated pairs default to rebated meeting stiles per EN 1634 / ANSI UL10C.":"Non-rated pairs use a flush meeting stile between leaves."}),Zt&&c.jsxs("div",{className:`mt-4 p-3 rounded-lg border flex gap-3 items-start ${Zt.type==="warning"?"bg-orange-50 border-orange-200 text-orange-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:[Zt.type==="warning"?c.jsx(eV,{size:18,className:"shrink-0 mt-0.5"}):c.jsx(_V,{size:18,className:"shrink-0 mt-0.5"}),c.jsxs("div",{className:"text-sm leading-relaxed",children:[c.jsx("strong",{children:"Code Check:"})," ",Zt.msg]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white mt-4",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 flex-wrap",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Hardware Control Strategy"}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Based on ",c.jsx("span",{className:"font-semibold",children:Ge.use||Ge.roomName||"this use"})," we recommend a"," ",c.jsx("span",{className:"font-semibold text-indigo-600",children:W})," package."]})]}),c.jsx("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 rounded-full px-2 py-0.5",children:"ANSI / EN Guidance"})]}),c.jsx("div",{className:"grid sm:grid-cols-2 gap-3 mt-3",children:RZ.map(V=>{const pe=Ge.hardwareIntent===V.id,Re=W===V.id;return c.jsxs("button",{type:"button",onClick:()=>Lt({...Ge,hardwareIntent:V.id}),className:`text-left border rounded-lg p-3 transition-all ${pe?"border-indigo-600 bg-indigo-50 shadow-sm":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold mb-1",children:[c.jsx("span",{className:pe?"text-indigo-700":"text-gray-800",children:V.label}),Re&&c.jsx("span",{className:"text-[10px] text-green-600 bg-green-50 px-2 py-0.5 rounded-full font-bold",children:"Recommended"})]}),c.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:V.desc})]},V.id)})}),c.jsx("p",{className:"text-[11px] text-gray-500 mt-3",children:"Electromechanical openings pair ANSI/BHMA A156-grade locks with electric strikes or maglocks, REX sensors, and fail-safe release per EN 1125 / NFPA 101."}),Ge.hardwareIntent!==W&&c.jsxs("div",{className:"mt-2 text-[11px] text-orange-600",children:["You selected a ",Ge.hardwareIntent," package even though the usage leans ",W,". Confirm this is intentional for the project scope."]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Spec Notes / Remarks"}),c.jsx("textarea",{value:Ge.notes,onChange:V=>Lt({...Ge,notes:V.target.value}),className:"w-full p-2 border rounded h-20 text-sm",placeholder:"Enter specific installation notes or requirements..."})]})]}),c.jsx("div",{className:"p-4 md:p-6 border-t border-gray-100 flex justify-end shrink-0 bg-gray-50 rounded-b-xl",children:c.jsx("button",{onClick:Jn,className:"w-full md:w-auto px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 font-bold",children:"Save Door"})})]})}),Wt.isOpen&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 sm:p-6",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-5xl flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50 rounded-t-xl shrink-0",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Add Hardware Item"}),c.jsx("button",{type:"button",onClick:()=>Ye({isOpen:!1,setId:null}),className:"text-gray-400 hover:text-gray-600",children:c.jsx(ml,{size:20})})]}),c.jsxs("div",{className:"p-4 md:p-6 overflow-hidden flex-1 flex flex-col",children:[c.jsxs("div",{className:"bg-orange-50 border border-orange-100 rounded-lg p-3 mb-6 flex gap-3 items-start",children:[c.jsx(Qh,{className:"text-orange-600 shrink-0 mt-0.5",size:18}),c.jsxs("p",{className:"text-xs text-orange-800 leading-relaxed",children:[c.jsx("strong",{children:"Code Compliance Warning:"})," Adding manual items may affect the fire rating."]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto",children:[c.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-500 mb-4",children:"Choose a category below"}),c.jsx("div",{className:"grid gap-4 xl:grid-cols-4 lg:grid-cols-2",children:TZ.map(V=>c.jsxs("div",{className:"flex flex-col h-full rounded-3xl border border-gray-100 bg-white shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[c.jsx("div",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:V.label}),c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:V.description})]}),c.jsx("div",{className:"flex-1 px-3 py-3 space-y-3 overflow-y-auto",children:V.items.length===0?c.jsx("p",{className:"text-xs text-gray-500",children:"No entries yet."}):V.items.map(pe=>c.jsxs("button",{type:"button",onClick:()=>Hl(pe.category,pe.name),className:"w-full text-left rounded-2xl border border-gray-100 px-3 py-2 transition hover:border-indigo-200 hover:bg-indigo-50",children:[c.jsx("div",{className:"text-sm font-semibold text-gray-900",children:pe.name}),c.jsx("div",{className:"text-[11px] text-gray-500",children:pe.description||"Layman-friendly details"}),c.jsx("div",{className:"text-[10px] text-gray-400 font-mono mt-1",children:pe.csi})]},`${pe.category}-${pe.name}`))})]},V.id))})]})]})]})}),Tt&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40 px-4",children:c.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-white p-6 shadow-2xl text-gray-900 relative",children:[c.jsx("button",{type:"button",onClick:()=>on(null),className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:c.jsx(ml,{size:16})}),c.jsx("h4",{className:"text-lg font-bold mb-2",children:Tt.title||"Notice"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Tt.message}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"button",onClick:()=>on(null),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg hover:bg-indigo-700",children:"Close"})})]})}),Sr.isOpen&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 sm:p-6",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl flex flex-col",children:[c.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50 rounded-t-xl",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Bulk Assign Door Specification"}),c.jsx("button",{onClick:()=>yr({isOpen:!1,templateId:"",markPrefix:"",locationsText:""}),className:"text-gray-400 hover:text-gray-600",children:c.jsx(ml,{size:20})})]}),c.jsxs("div",{className:"p-4 md:p-6 space-y-4 overflow-y-auto",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Select a template door and provide locations (zone | level | room) to replicate its specification."}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Template Door"}),c.jsx("select",{value:Sr.templateId,onChange:V=>{const pe=Te().doors.find(Re=>Re.id===V.target.value);yr(Re=>({...Re,templateId:V.target.value,markPrefix:(pe==null?void 0:pe.mark)||Re.markPrefix}))},className:"w-full p-2 border rounded bg-white",children:Te().doors.map(V=>c.jsxs("option",{value:V.id,children:[V.mark," - ",V.roomName]},V.id))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Mark Prefix"}),c.jsx("input",{type:"text",value:Sr.markPrefix,onChange:V=>yr(pe=>({...pe,markPrefix:V.target.value})),className:"w-full p-2 border rounded",placeholder:"e.g. D-100"}),c.jsx("p",{className:"text-[11px] text-gray-400 mt-1",children:"Unique marks will be generated from this prefix."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Locations"}),c.jsx("textarea",{value:Sr.locationsText,onChange:V=>yr(pe=>({...pe,locationsText:V.target.value})),className:"w-full p-2 border rounded h-32",placeholder:`Tower A | Lvl 02 | Meeting Room
Tower B | Lvl 05 | Boardroom`}),c.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:'Provide one location per line using "Zone | Level | Room" format. Leave a part blank to reuse the template value.'})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:()=>yr({isOpen:!1,templateId:"",markPrefix:"",locationsText:""}),className:"px-4 py-2 text-sm border rounded",children:"Cancel"}),c.jsx("button",{onClick:()=>ql(),className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Create Doors"})]})]})]})}),ln.isOpen&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 sm:p-6",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl flex flex-col",children:[c.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50 rounded-t-xl",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold",children:"Instant Door Schedule Preview"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Review and confirm the generated door list before inserting."})]}),c.jsx("button",{onClick:()=>kn({isOpen:!1,doors:[]}),className:"text-gray-400 hover:text-gray-600",children:c.jsx(ml,{size:20})})]}),c.jsxs("div",{className:"p-4 md:p-6 overflow-y-auto max-h-[60vh]",children:[ln.doors.length===0?c.jsx("div",{className:"text-sm text-gray-500",children:"No doors generated."}):c.jsxs("table",{className:"w-full text-sm border-collapse",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[c.jsx("th",{className:"text-left p-2",children:"Mark"}),c.jsx("th",{className:"text-left p-2",children:"Usage"}),c.jsx("th",{className:"text-left p-2",children:"Qty"}),c.jsx("th",{className:"text-left p-2",children:"Material"}),c.jsx("th",{className:"text-left p-2",children:"Fire Rating"})]})}),c.jsx("tbody",{children:ln.doors.map(V=>c.jsxs("tr",{className:"border-b border-gray-100",children:[c.jsx("td",{className:"p-2 font-semibold text-indigo-600",children:V.mark}),c.jsxs("td",{className:"p-2",children:[c.jsx("div",{className:"font-medium text-gray-800",children:V.use}),c.jsx("div",{className:"text-xs text-gray-500",children:V.roomName})]}),c.jsx("td",{className:"p-2",children:V.qty}),c.jsx("td",{className:"p-2",children:V.material}),c.jsx("td",{className:"p-2",children:V.fire>0?`${V.fire} min`:"NFR"})]},V.id))})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Need to undo? Simply delete the generated doors from the schedule later."})]}),c.jsxs("div",{className:"p-4 md:p-6 border-t border-gray-100 flex justify-end gap-2 bg-gray-50 rounded-b-xl",children:[c.jsx("button",{onClick:()=>kn({isOpen:!1,doors:[]}),className:"px-4 py-2 text-sm border rounded",children:"Cancel"}),c.jsx("button",{onClick:$n,className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-2",children:"Confirm & Insert"})]})]})}),h&&c.jsx(aI,{isOpen:i,onClose:()=>s(!1)}),c.jsx(EV,{isOpen:a,onClose:()=>o(!1)}),c.jsx(kV,{isOpen:l,onClose:()=>u(!1)}),hr]})};Hy.createRoot(document.getElementById("root")).render(c.jsx(Sc.StrictMode,{children:c.jsx($U,{children:c.jsx(oee,{})})}));export{gn as _,bf as c,$L as g};

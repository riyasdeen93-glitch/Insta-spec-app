var mF=Object.defineProperty;var gF=(t,e,r)=>e in t?mF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var wn=(t,e,r)=>gF(t,typeof e!="symbol"?e+"":e,r);function xF(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Yf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yF(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e6={exports:{}},zx={},t6={exports:{}},Kr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qp=Symbol.for("react.element"),vF=Symbol.for("react.portal"),wF=Symbol.for("react.fragment"),_F=Symbol.for("react.strict_mode"),bF=Symbol.for("react.profiler"),SF=Symbol.for("react.provider"),EF=Symbol.for("react.context"),AF=Symbol.for("react.forward_ref"),NF=Symbol.for("react.suspense"),TF=Symbol.for("react.memo"),kF=Symbol.for("react.lazy"),oS=Symbol.iterator;function CF(t){return t===null||typeof t!="object"?null:(t=oS&&t[oS]||t["@@iterator"],typeof t=="function"?t:null)}var r6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},n6=Object.assign,i6={};function df(t,e,r){this.props=t,this.context=e,this.refs=i6,this.updater=r||r6}df.prototype.isReactComponent={};df.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};df.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function s6(){}s6.prototype=df.prototype;function O5(t,e,r){this.props=t,this.context=e,this.refs=i6,this.updater=r||r6}var B5=O5.prototype=new s6;B5.constructor=O5;n6(B5,df.prototype);B5.isPureReactComponent=!0;var lS=Array.isArray,a6=Object.prototype.hasOwnProperty,U5={current:null},o6={key:!0,ref:!0,__self:!0,__source:!0};function l6(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)a6.call(e,n)&&!o6.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:qp,type:t,key:s,ref:a,props:i,_owner:U5.current}}function IF(t,e){return{$$typeof:qp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function V5(t){return typeof t=="object"&&t!==null&&t.$$typeof===qp}function PF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var cS=/\/+/g;function ly(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PF(""+t.key):e.toString(36)}function Hg(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case qp:case vF:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+ly(a,0):n,lS(i)?(r="",t!=null&&(r=t.replace(cS,"$&/")+"/"),Hg(i,e,r,"",function(c){return c})):i!=null&&(V5(i)&&(i=IF(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(cS,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",lS(t))for(var o=0;o<t.length;o++){s=t[o];var l=n+ly(s,o);a+=Hg(s,e,r,l,i)}else if(l=CF(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=n+ly(s,o++),a+=Hg(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Hm(t,e,r){if(t==null)return t;var n=[],i=0;return Hg(t,n,"","",function(s){return e.call(r,s,i++)}),n}function RF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ws={current:null},$g={transition:null},LF={ReactCurrentDispatcher:Ws,ReactCurrentBatchConfig:$g,ReactCurrentOwner:U5};function c6(){throw Error("act(...) is not supported in production builds of React.")}Kr.Children={map:Hm,forEach:function(t,e,r){Hm(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Hm(t,function(){e++}),e},toArray:function(t){return Hm(t,function(e){return e})||[]},only:function(t){if(!V5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Kr.Component=df;Kr.Fragment=wF;Kr.Profiler=bF;Kr.PureComponent=O5;Kr.StrictMode=_F;Kr.Suspense=NF;Kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LF;Kr.act=c6;Kr.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=n6({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=U5.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)a6.call(e,l)&&!o6.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:qp,type:t.type,key:i,ref:s,props:n,_owner:a}};Kr.createContext=function(t){return t={$$typeof:EF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:SF,_context:t},t.Consumer=t};Kr.createElement=l6;Kr.createFactory=function(t){var e=l6.bind(null,t);return e.type=t,e};Kr.createRef=function(){return{current:null}};Kr.forwardRef=function(t){return{$$typeof:AF,render:t}};Kr.isValidElement=V5;Kr.lazy=function(t){return{$$typeof:kF,_payload:{_status:-1,_result:t},_init:RF}};Kr.memo=function(t,e){return{$$typeof:TF,type:t,compare:e===void 0?null:e}};Kr.startTransition=function(t){var e=$g.transition;$g.transition={};try{t()}finally{$g.transition=e}};Kr.unstable_act=c6;Kr.useCallback=function(t,e){return Ws.current.useCallback(t,e)};Kr.useContext=function(t){return Ws.current.useContext(t)};Kr.useDebugValue=function(){};Kr.useDeferredValue=function(t){return Ws.current.useDeferredValue(t)};Kr.useEffect=function(t,e){return Ws.current.useEffect(t,e)};Kr.useId=function(){return Ws.current.useId()};Kr.useImperativeHandle=function(t,e,r){return Ws.current.useImperativeHandle(t,e,r)};Kr.useInsertionEffect=function(t,e){return Ws.current.useInsertionEffect(t,e)};Kr.useLayoutEffect=function(t,e){return Ws.current.useLayoutEffect(t,e)};Kr.useMemo=function(t,e){return Ws.current.useMemo(t,e)};Kr.useReducer=function(t,e,r){return Ws.current.useReducer(t,e,r)};Kr.useRef=function(t){return Ws.current.useRef(t)};Kr.useState=function(t){return Ws.current.useState(t)};Kr.useSyncExternalStore=function(t,e,r){return Ws.current.useSyncExternalStore(t,e,r)};Kr.useTransition=function(){return Ws.current.useTransition()};Kr.version="18.3.1";t6.exports=Kr;var Q=t6.exports;const No=yF(Q),jF=xF({__proto__:null,default:No},[Q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FF=Q,DF=Symbol.for("react.element"),MF=Symbol.for("react.fragment"),OF=Object.prototype.hasOwnProperty,BF=FF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UF={key:!0,ref:!0,__self:!0,__source:!0};function u6(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)OF.call(e,n)&&!UF.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:DF,type:t,key:s,ref:a,props:i,_owner:BF.current}}zx.Fragment=MF;zx.jsx=u6;zx.jsxs=u6;e6.exports=zx;var u=e6.exports,$v={},h6={exports:{}},Da={},d6={exports:{}},f6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ce,be){var Me=ce.length;ce.push(be);e:for(;0<Me;){var Le=Me-1>>>1,I=ce[Le];if(0<i(I,be))ce[Le]=be,ce[Me]=I,Me=Le;else break e}}function r(ce){return ce.length===0?null:ce[0]}function n(ce){if(ce.length===0)return null;var be=ce[0],Me=ce.pop();if(Me!==be){ce[0]=Me;e:for(var Le=0,I=ce.length,B=I>>>1;Le<B;){var U=2*(Le+1)-1,H=ce[U],te=U+1,fe=ce[te];if(0>i(H,Me))te<I&&0>i(fe,H)?(ce[Le]=fe,ce[te]=Me,Le=te):(ce[Le]=H,ce[U]=Me,Le=U);else if(te<I&&0>i(fe,Me))ce[Le]=fe,ce[te]=Me,Le=te;else break e}}return be}function i(ce,be){var Me=ce.sortIndex-be.sortIndex;return Me!==0?Me:ce.id-be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,d=null,p=3,f=!1,v=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(ce){for(var be=r(c);be!==null;){if(be.callback===null)n(c);else if(be.startTime<=ce)n(c),be.sortIndex=be.expirationTime,e(l,be);else break;be=r(c)}}function j(ce){if(x=!1,N(ce),!v)if(r(l)!==null)v=!0,ge(z);else{var be=r(c);be!==null&&ye(j,be.startTime-ce)}}function z(ce,be){v=!1,x&&(x=!1,w(T),T=-1),f=!0;var Me=p;try{for(N(be),d=r(l);d!==null&&(!(d.expirationTime>be)||ce&&!k());){var Le=d.callback;if(typeof Le=="function"){d.callback=null,p=d.priorityLevel;var I=Le(d.expirationTime<=be);be=t.unstable_now(),typeof I=="function"?d.callback=I:d===r(l)&&n(l),N(be)}else n(l);d=r(l)}if(d!==null)var B=!0;else{var U=r(c);U!==null&&ye(j,U.startTime-be),B=!1}return B}finally{d=null,p=Me,f=!1}}var W=!1,b=null,T=-1,A=5,F=-1;function k(){return!(t.unstable_now()-F<A)}function L(){if(b!==null){var ce=t.unstable_now();F=ce;var be=!0;try{be=b(!0,ce)}finally{be?R():(W=!1,b=null)}}else W=!1}var R;if(typeof S=="function")R=function(){S(L)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ve=le.port2;le.port1.onmessage=L,R=function(){ve.postMessage(null)}}else R=function(){_(L,0)};function ge(ce){b=ce,W||(W=!0,R())}function ye(ce,be){T=_(function(){ce(t.unstable_now())},be)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ce){ce.callback=null},t.unstable_continueExecution=function(){v||f||(v=!0,ge(z))},t.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ce?Math.floor(1e3/ce):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(ce){switch(p){case 1:case 2:case 3:var be=3;break;default:be=p}var Me=p;p=be;try{return ce()}finally{p=Me}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ce,be){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var Me=p;p=ce;try{return be()}finally{p=Me}},t.unstable_scheduleCallback=function(ce,be,Me){var Le=t.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?Le+Me:Le):Me=Le,ce){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=Me+I,ce={id:h++,callback:be,priorityLevel:ce,startTime:Me,expirationTime:I,sortIndex:-1},Me>Le?(ce.sortIndex=Me,e(c,ce),r(l)===null&&ce===r(c)&&(x?(w(T),T=-1):x=!0,ye(j,Me-Le))):(ce.sortIndex=I,e(l,ce),v||f||(v=!0,ge(z))),ce},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(ce){var be=p;return function(){var Me=p;p=be;try{return ce.apply(this,arguments)}finally{p=Me}}}})(f6);d6.exports=f6;var VF=d6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zF=Q,ja=VF;function Nt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p6=new Set,ep={};function Sh(t,e){Gd(t,e),Gd(t+"Capture",e)}function Gd(t,e){for(ep[t]=e,t=0;t<e.length;t++)p6.add(e[t])}var Vl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qv=Object.prototype.hasOwnProperty,HF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uS={},hS={};function $F(t){return qv.call(hS,t)?!0:qv.call(uS,t)?!1:HF.test(t)?hS[t]=!0:(uS[t]=!0,!1)}function qF(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function WF(t,e,r,n){if(e===null||typeof e>"u"||qF(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ks(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var hs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){hs[t]=new Ks(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];hs[e]=new Ks(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){hs[t]=new Ks(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){hs[t]=new Ks(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){hs[t]=new Ks(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){hs[t]=new Ks(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){hs[t]=new Ks(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){hs[t]=new Ks(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){hs[t]=new Ks(t,5,!1,t.toLowerCase(),null,!1,!1)});var z5=/[\-:]([a-z])/g;function H5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(z5,H5);hs[e]=new Ks(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(z5,H5);hs[e]=new Ks(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(z5,H5);hs[e]=new Ks(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){hs[t]=new Ks(t,1,!1,t.toLowerCase(),null,!1,!1)});hs.xlinkHref=new Ks("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){hs[t]=new Ks(t,1,!1,t.toLowerCase(),null,!0,!0)});function $5(t,e,r,n){var i=hs.hasOwnProperty(e)?hs[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(WF(e,r,i,n)&&(r=null),n||i===null?$F(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Zl=zF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$m=Symbol.for("react.element"),ad=Symbol.for("react.portal"),od=Symbol.for("react.fragment"),q5=Symbol.for("react.strict_mode"),Wv=Symbol.for("react.profiler"),m6=Symbol.for("react.provider"),g6=Symbol.for("react.context"),W5=Symbol.for("react.forward_ref"),Kv=Symbol.for("react.suspense"),Gv=Symbol.for("react.suspense_list"),K5=Symbol.for("react.memo"),Nc=Symbol.for("react.lazy"),x6=Symbol.for("react.offscreen"),dS=Symbol.iterator;function Xf(t){return t===null||typeof t!="object"?null:(t=dS&&t[dS]||t["@@iterator"],typeof t=="function"?t:null)}var ei=Object.assign,cy;function f0(t){if(cy===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);cy=e&&e[1]||""}return`
`+cy+t}var uy=!1;function hy(t,e){if(!t||uy)return"";uy=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{uy=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?f0(t):""}function KF(t){switch(t.tag){case 5:return f0(t.type);case 16:return f0("Lazy");case 13:return f0("Suspense");case 19:return f0("SuspenseList");case 0:case 2:case 15:return t=hy(t.type,!1),t;case 11:return t=hy(t.type.render,!1),t;case 1:return t=hy(t.type,!0),t;default:return""}}function Yv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case od:return"Fragment";case ad:return"Portal";case Wv:return"Profiler";case q5:return"StrictMode";case Kv:return"Suspense";case Gv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case g6:return(t.displayName||"Context")+".Consumer";case m6:return(t._context.displayName||"Context")+".Provider";case W5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case K5:return e=t.displayName||null,e!==null?e:Yv(t.type)||"Memo";case Nc:e=t._payload,t=t._init;try{return Yv(t(e))}catch{}}return null}function GF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yv(e);case 8:return e===q5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function y6(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function YF(t){var e=y6(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qm(t){t._valueTracker||(t._valueTracker=YF(t))}function v6(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=y6(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function S1(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xv(t,e){var r=e.checked;return ei({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function fS(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=cu(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function w6(t,e){e=e.checked,e!=null&&$5(t,"checked",e,!1)}function Qv(t,e){w6(t,e);var r=cu(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jv(t,e.type,r):e.hasOwnProperty("defaultValue")&&Jv(t,e.type,cu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pS(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Jv(t,e,r){(e!=="number"||S1(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var p0=Array.isArray;function Ad(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+cu(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Zv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Nt(91));return ei({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mS(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Nt(92));if(p0(r)){if(1<r.length)throw Error(Nt(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:cu(r)}}function _6(t,e){var r=cu(e.value),n=cu(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function gS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function b6(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ew(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?b6(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wm,S6=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wm=Wm||document.createElement("div"),Wm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tp(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var E0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XF=["Webkit","ms","Moz","O"];Object.keys(E0).forEach(function(t){XF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),E0[e]=E0[t]})});function E6(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||E0.hasOwnProperty(t)&&E0[t]?(""+e).trim():e+"px"}function A6(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=E6(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var QF=ei({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tw(t,e){if(e){if(QF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Nt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Nt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Nt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Nt(62))}}function rw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nw=null;function G5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var iw=null,Nd=null,Td=null;function xS(t){if(t=Gp(t)){if(typeof iw!="function")throw Error(Nt(280));var e=t.stateNode;e&&(e=Kx(e),iw(t.stateNode,t.type,e))}}function N6(t){Nd?Td?Td.push(t):Td=[t]:Nd=t}function T6(){if(Nd){var t=Nd,e=Td;if(Td=Nd=null,xS(t),e)for(t=0;t<e.length;t++)xS(e[t])}}function k6(t,e){return t(e)}function C6(){}var dy=!1;function I6(t,e,r){if(dy)return t(e,r);dy=!0;try{return k6(t,e,r)}finally{dy=!1,(Nd!==null||Td!==null)&&(C6(),T6())}}function rp(t,e){var r=t.stateNode;if(r===null)return null;var n=Kx(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Nt(231,e,typeof r));return r}var sw=!1;if(Vl)try{var Qf={};Object.defineProperty(Qf,"passive",{get:function(){sw=!0}}),window.addEventListener("test",Qf,Qf),window.removeEventListener("test",Qf,Qf)}catch{sw=!1}function JF(t,e,r,n,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(h){this.onError(h)}}var A0=!1,E1=null,A1=!1,aw=null,ZF={onError:function(t){A0=!0,E1=t}};function eD(t,e,r,n,i,s,a,o,l){A0=!1,E1=null,JF.apply(ZF,arguments)}function tD(t,e,r,n,i,s,a,o,l){if(eD.apply(this,arguments),A0){if(A0){var c=E1;A0=!1,E1=null}else throw Error(Nt(198));A1||(A1=!0,aw=c)}}function Eh(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function P6(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yS(t){if(Eh(t)!==t)throw Error(Nt(188))}function rD(t){var e=t.alternate;if(!e){if(e=Eh(t),e===null)throw Error(Nt(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return yS(i),t;if(s===n)return yS(i),e;s=s.sibling}throw Error(Nt(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(Nt(189))}}if(r.alternate!==n)throw Error(Nt(190))}if(r.tag!==3)throw Error(Nt(188));return r.stateNode.current===r?t:e}function R6(t){return t=rD(t),t!==null?L6(t):null}function L6(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=L6(t);if(e!==null)return e;t=t.sibling}return null}var j6=ja.unstable_scheduleCallback,vS=ja.unstable_cancelCallback,nD=ja.unstable_shouldYield,iD=ja.unstable_requestPaint,_i=ja.unstable_now,sD=ja.unstable_getCurrentPriorityLevel,Y5=ja.unstable_ImmediatePriority,F6=ja.unstable_UserBlockingPriority,N1=ja.unstable_NormalPriority,aD=ja.unstable_LowPriority,D6=ja.unstable_IdlePriority,Hx=null,el=null;function oD(t){if(el&&typeof el.onCommitFiberRoot=="function")try{el.onCommitFiberRoot(Hx,t,void 0,(t.current.flags&128)===128)}catch{}}var Co=Math.clz32?Math.clz32:uD,lD=Math.log,cD=Math.LN2;function uD(t){return t>>>=0,t===0?32:31-(lD(t)/cD|0)|0}var Km=64,Gm=4194304;function m0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function T1(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=m0(o):(s&=a,s!==0&&(n=m0(s)))}else a=r&~i,a!==0?n=m0(a):s!==0&&(n=m0(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Co(e),i=1<<r,n|=t[r],e&=~i;return n}function hD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dD(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Co(s),o=1<<a,l=i[a];l===-1?(!(o&r)||o&n)&&(i[a]=hD(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function ow(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function M6(){var t=Km;return Km<<=1,!(Km&4194240)&&(Km=64),t}function fy(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Wp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Co(e),t[e]=r}function fD(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Co(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function X5(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Co(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var An=0;function O6(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var B6,Q5,U6,V6,z6,lw=!1,Ym=[],Gc=null,Yc=null,Xc=null,np=new Map,ip=new Map,Ic=[],pD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wS(t,e){switch(t){case"focusin":case"focusout":Gc=null;break;case"dragenter":case"dragleave":Yc=null;break;case"mouseover":case"mouseout":Xc=null;break;case"pointerover":case"pointerout":np.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ip.delete(e.pointerId)}}function Jf(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Gp(e),e!==null&&Q5(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function mD(t,e,r,n,i){switch(e){case"focusin":return Gc=Jf(Gc,t,e,r,n,i),!0;case"dragenter":return Yc=Jf(Yc,t,e,r,n,i),!0;case"mouseover":return Xc=Jf(Xc,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return np.set(s,Jf(np.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,ip.set(s,Jf(ip.get(s)||null,t,e,r,n,i)),!0}return!1}function H6(t){var e=Ku(t.target);if(e!==null){var r=Eh(e);if(r!==null){if(e=r.tag,e===13){if(e=P6(r),e!==null){t.blockedOn=e,z6(t.priority,function(){U6(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=cw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);nw=n,r.target.dispatchEvent(n),nw=null}else return e=Gp(r),e!==null&&Q5(e),t.blockedOn=r,!1;e.shift()}return!0}function _S(t,e,r){qg(t)&&r.delete(e)}function gD(){lw=!1,Gc!==null&&qg(Gc)&&(Gc=null),Yc!==null&&qg(Yc)&&(Yc=null),Xc!==null&&qg(Xc)&&(Xc=null),np.forEach(_S),ip.forEach(_S)}function Zf(t,e){t.blockedOn===e&&(t.blockedOn=null,lw||(lw=!0,ja.unstable_scheduleCallback(ja.unstable_NormalPriority,gD)))}function sp(t){function e(i){return Zf(i,t)}if(0<Ym.length){Zf(Ym[0],t);for(var r=1;r<Ym.length;r++){var n=Ym[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Gc!==null&&Zf(Gc,t),Yc!==null&&Zf(Yc,t),Xc!==null&&Zf(Xc,t),np.forEach(e),ip.forEach(e),r=0;r<Ic.length;r++)n=Ic[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ic.length&&(r=Ic[0],r.blockedOn===null);)H6(r),r.blockedOn===null&&Ic.shift()}var kd=Zl.ReactCurrentBatchConfig,k1=!0;function xD(t,e,r,n){var i=An,s=kd.transition;kd.transition=null;try{An=1,J5(t,e,r,n)}finally{An=i,kd.transition=s}}function yD(t,e,r,n){var i=An,s=kd.transition;kd.transition=null;try{An=4,J5(t,e,r,n)}finally{An=i,kd.transition=s}}function J5(t,e,r,n){if(k1){var i=cw(t,e,r,n);if(i===null)Sy(t,e,n,C1,r),wS(t,n);else if(mD(i,t,e,r,n))n.stopPropagation();else if(wS(t,n),e&4&&-1<pD.indexOf(t)){for(;i!==null;){var s=Gp(i);if(s!==null&&B6(s),s=cw(t,e,r,n),s===null&&Sy(t,e,n,C1,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Sy(t,e,n,null,r)}}var C1=null;function cw(t,e,r,n){if(C1=null,t=G5(n),t=Ku(t),t!==null)if(e=Eh(t),e===null)t=null;else if(r=e.tag,r===13){if(t=P6(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return C1=t,null}function $6(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sD()){case Y5:return 1;case F6:return 4;case N1:case aD:return 16;case D6:return 536870912;default:return 16}default:return 16}}var Bc=null,Z5=null,Wg=null;function q6(){if(Wg)return Wg;var t,e=Z5,r=e.length,n,i="value"in Bc?Bc.value:Bc.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return Wg=i.slice(t,1<n?1-n:void 0)}function Kg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xm(){return!0}function bS(){return!1}function Ma(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xm:bS,this.isPropagationStopped=bS,this}return ei(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Xm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Xm)},persist:function(){},isPersistent:Xm}),e}var ff={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},e_=Ma(ff),Kp=ei({},ff,{view:0,detail:0}),vD=Ma(Kp),py,my,e0,$x=ei({},Kp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==e0&&(e0&&t.type==="mousemove"?(py=t.screenX-e0.screenX,my=t.screenY-e0.screenY):my=py=0,e0=t),py)},movementY:function(t){return"movementY"in t?t.movementY:my}}),SS=Ma($x),wD=ei({},$x,{dataTransfer:0}),_D=Ma(wD),bD=ei({},Kp,{relatedTarget:0}),gy=Ma(bD),SD=ei({},ff,{animationName:0,elapsedTime:0,pseudoElement:0}),ED=Ma(SD),AD=ei({},ff,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ND=Ma(AD),TD=ei({},ff,{data:0}),ES=Ma(TD),kD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ID={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ID[t])?!!e[t]:!1}function t_(){return PD}var RD=ei({},Kp,{key:function(t){if(t.key){var e=kD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t_,charCode:function(t){return t.type==="keypress"?Kg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LD=Ma(RD),jD=ei({},$x,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AS=Ma(jD),FD=ei({},Kp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t_}),DD=Ma(FD),MD=ei({},ff,{propertyName:0,elapsedTime:0,pseudoElement:0}),OD=Ma(MD),BD=ei({},$x,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UD=Ma(BD),VD=[9,13,27,32],r_=Vl&&"CompositionEvent"in window,N0=null;Vl&&"documentMode"in document&&(N0=document.documentMode);var zD=Vl&&"TextEvent"in window&&!N0,W6=Vl&&(!r_||N0&&8<N0&&11>=N0),NS=" ",TS=!1;function K6(t,e){switch(t){case"keyup":return VD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G6(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ld=!1;function HD(t,e){switch(t){case"compositionend":return G6(e);case"keypress":return e.which!==32?null:(TS=!0,NS);case"textInput":return t=e.data,t===NS&&TS?null:t;default:return null}}function $D(t,e){if(ld)return t==="compositionend"||!r_&&K6(t,e)?(t=q6(),Wg=Z5=Bc=null,ld=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return W6&&e.locale!=="ko"?null:e.data;default:return null}}var qD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qD[t.type]:e==="textarea"}function Y6(t,e,r,n){N6(n),e=I1(e,"onChange"),0<e.length&&(r=new e_("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var T0=null,ap=null;function WD(t){ak(t,0)}function qx(t){var e=hd(t);if(v6(e))return t}function KD(t,e){if(t==="change")return e}var X6=!1;if(Vl){var xy;if(Vl){var yy="oninput"in document;if(!yy){var CS=document.createElement("div");CS.setAttribute("oninput","return;"),yy=typeof CS.oninput=="function"}xy=yy}else xy=!1;X6=xy&&(!document.documentMode||9<document.documentMode)}function IS(){T0&&(T0.detachEvent("onpropertychange",Q6),ap=T0=null)}function Q6(t){if(t.propertyName==="value"&&qx(ap)){var e=[];Y6(e,ap,t,G5(t)),I6(WD,e)}}function GD(t,e,r){t==="focusin"?(IS(),T0=e,ap=r,T0.attachEvent("onpropertychange",Q6)):t==="focusout"&&IS()}function YD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qx(ap)}function XD(t,e){if(t==="click")return qx(e)}function QD(t,e){if(t==="input"||t==="change")return qx(e)}function JD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ro=typeof Object.is=="function"?Object.is:JD;function op(t,e){if(Ro(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!qv.call(e,i)||!Ro(t[i],e[i]))return!1}return!0}function PS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function RS(t,e){var r=PS(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=PS(r)}}function J6(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?J6(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Z6(){for(var t=window,e=S1();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=S1(t.document)}return e}function n_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ZD(t){var e=Z6(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&J6(r.ownerDocument.documentElement,r)){if(n!==null&&n_(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=RS(r,s);var a=RS(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var e7=Vl&&"documentMode"in document&&11>=document.documentMode,cd=null,uw=null,k0=null,hw=!1;function LS(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;hw||cd==null||cd!==S1(n)||(n=cd,"selectionStart"in n&&n_(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),k0&&op(k0,n)||(k0=n,n=I1(uw,"onSelect"),0<n.length&&(e=new e_("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=cd)))}function Qm(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ud={animationend:Qm("Animation","AnimationEnd"),animationiteration:Qm("Animation","AnimationIteration"),animationstart:Qm("Animation","AnimationStart"),transitionend:Qm("Transition","TransitionEnd")},vy={},ek={};Vl&&(ek=document.createElement("div").style,"AnimationEvent"in window||(delete ud.animationend.animation,delete ud.animationiteration.animation,delete ud.animationstart.animation),"TransitionEvent"in window||delete ud.transitionend.transition);function Wx(t){if(vy[t])return vy[t];if(!ud[t])return t;var e=ud[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in ek)return vy[t]=e[r];return t}var tk=Wx("animationend"),rk=Wx("animationiteration"),nk=Wx("animationstart"),ik=Wx("transitionend"),sk=new Map,jS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Su(t,e){sk.set(t,e),Sh(e,[t])}for(var wy=0;wy<jS.length;wy++){var _y=jS[wy],t7=_y.toLowerCase(),r7=_y[0].toUpperCase()+_y.slice(1);Su(t7,"on"+r7)}Su(tk,"onAnimationEnd");Su(rk,"onAnimationIteration");Su(nk,"onAnimationStart");Su("dblclick","onDoubleClick");Su("focusin","onFocus");Su("focusout","onBlur");Su(ik,"onTransitionEnd");Gd("onMouseEnter",["mouseout","mouseover"]);Gd("onMouseLeave",["mouseout","mouseover"]);Gd("onPointerEnter",["pointerout","pointerover"]);Gd("onPointerLeave",["pointerout","pointerover"]);Sh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var g0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n7=new Set("cancel close invalid load scroll toggle".split(" ").concat(g0));function FS(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,tD(n,e,void 0,t),t.currentTarget=null}function ak(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;FS(i,o,c),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;FS(i,o,c),s=l}}}if(A1)throw t=aw,A1=!1,aw=null,t}function $n(t,e){var r=e[gw];r===void 0&&(r=e[gw]=new Set);var n=t+"__bubble";r.has(n)||(ok(e,t,2,!1),r.add(n))}function by(t,e,r){var n=0;e&&(n|=4),ok(r,t,n,e)}var Jm="_reactListening"+Math.random().toString(36).slice(2);function lp(t){if(!t[Jm]){t[Jm]=!0,p6.forEach(function(r){r!=="selectionchange"&&(n7.has(r)||by(r,!1,t),by(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jm]||(e[Jm]=!0,by("selectionchange",!1,e))}}function ok(t,e,r,n){switch($6(e)){case 1:var i=xD;break;case 4:i=yD;break;default:i=J5}r=i.bind(null,e,r,t),i=void 0,!sw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Sy(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Ku(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}I6(function(){var c=s,h=G5(r),d=[];e:{var p=sk.get(t);if(p!==void 0){var f=e_,v=t;switch(t){case"keypress":if(Kg(r)===0)break e;case"keydown":case"keyup":f=LD;break;case"focusin":v="focus",f=gy;break;case"focusout":v="blur",f=gy;break;case"beforeblur":case"afterblur":f=gy;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=SS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=_D;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=DD;break;case tk:case rk:case nk:f=ED;break;case ik:f=OD;break;case"scroll":f=vD;break;case"wheel":f=UD;break;case"copy":case"cut":case"paste":f=ND;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=AS}var x=(e&4)!==0,_=!x&&t==="scroll",w=x?p!==null?p+"Capture":null:p;x=[];for(var S=c,N;S!==null;){N=S;var j=N.stateNode;if(N.tag===5&&j!==null&&(N=j,w!==null&&(j=rp(S,w),j!=null&&x.push(cp(S,j,N)))),_)break;S=S.return}0<x.length&&(p=new f(p,v,null,r,h),d.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&r!==nw&&(v=r.relatedTarget||r.fromElement)&&(Ku(v)||v[zl]))break e;if((f||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,f?(v=r.relatedTarget||r.toElement,f=c,v=v?Ku(v):null,v!==null&&(_=Eh(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(f=null,v=c),f!==v)){if(x=SS,j="onMouseLeave",w="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(x=AS,j="onPointerLeave",w="onPointerEnter",S="pointer"),_=f==null?p:hd(f),N=v==null?p:hd(v),p=new x(j,S+"leave",f,r,h),p.target=_,p.relatedTarget=N,j=null,Ku(h)===c&&(x=new x(w,S+"enter",v,r,h),x.target=N,x.relatedTarget=_,j=x),_=j,f&&v)t:{for(x=f,w=v,S=0,N=x;N;N=Bh(N))S++;for(N=0,j=w;j;j=Bh(j))N++;for(;0<S-N;)x=Bh(x),S--;for(;0<N-S;)w=Bh(w),N--;for(;S--;){if(x===w||w!==null&&x===w.alternate)break t;x=Bh(x),w=Bh(w)}x=null}else x=null;f!==null&&DS(d,p,f,x,!1),v!==null&&_!==null&&DS(d,_,v,x,!0)}}e:{if(p=c?hd(c):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var z=KD;else if(kS(p))if(X6)z=QD;else{z=YD;var W=GD}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(z=XD);if(z&&(z=z(t,c))){Y6(d,z,r,h);break e}W&&W(t,p,c),t==="focusout"&&(W=p._wrapperState)&&W.controlled&&p.type==="number"&&Jv(p,"number",p.value)}switch(W=c?hd(c):window,t){case"focusin":(kS(W)||W.contentEditable==="true")&&(cd=W,uw=c,k0=null);break;case"focusout":k0=uw=cd=null;break;case"mousedown":hw=!0;break;case"contextmenu":case"mouseup":case"dragend":hw=!1,LS(d,r,h);break;case"selectionchange":if(e7)break;case"keydown":case"keyup":LS(d,r,h)}var b;if(r_)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ld?K6(t,r)&&(T="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(W6&&r.locale!=="ko"&&(ld||T!=="onCompositionStart"?T==="onCompositionEnd"&&ld&&(b=q6()):(Bc=h,Z5="value"in Bc?Bc.value:Bc.textContent,ld=!0)),W=I1(c,T),0<W.length&&(T=new ES(T,t,null,r,h),d.push({event:T,listeners:W}),b?T.data=b:(b=G6(r),b!==null&&(T.data=b)))),(b=zD?HD(t,r):$D(t,r))&&(c=I1(c,"onBeforeInput"),0<c.length&&(h=new ES("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:c}),h.data=b))}ak(d,e)})}function cp(t,e,r){return{instance:t,listener:e,currentTarget:r}}function I1(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=rp(t,r),s!=null&&n.unshift(cp(t,s,i)),s=rp(t,e),s!=null&&n.push(cp(t,s,i))),t=t.return}return n}function Bh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function DS(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,i?(l=rp(r,s),l!=null&&a.unshift(cp(r,l,o))):i||(l=rp(r,s),l!=null&&a.push(cp(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var i7=/\r\n?/g,s7=/\u0000|\uFFFD/g;function MS(t){return(typeof t=="string"?t:""+t).replace(i7,`
`).replace(s7,"")}function Zm(t,e,r){if(e=MS(e),MS(t)!==e&&r)throw Error(Nt(425))}function P1(){}var dw=null,fw=null;function pw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mw=typeof setTimeout=="function"?setTimeout:void 0,a7=typeof clearTimeout=="function"?clearTimeout:void 0,OS=typeof Promise=="function"?Promise:void 0,o7=typeof queueMicrotask=="function"?queueMicrotask:typeof OS<"u"?function(t){return OS.resolve(null).then(t).catch(l7)}:mw;function l7(t){setTimeout(function(){throw t})}function Ey(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),sp(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);sp(e)}function Qc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function BS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var pf=Math.random().toString(36).slice(2),Xo="__reactFiber$"+pf,up="__reactProps$"+pf,zl="__reactContainer$"+pf,gw="__reactEvents$"+pf,c7="__reactListeners$"+pf,u7="__reactHandles$"+pf;function Ku(t){var e=t[Xo];if(e)return e;for(var r=t.parentNode;r;){if(e=r[zl]||r[Xo]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=BS(t);t!==null;){if(r=t[Xo])return r;t=BS(t)}return e}t=r,r=t.parentNode}return null}function Gp(t){return t=t[Xo]||t[zl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Nt(33))}function Kx(t){return t[up]||null}var xw=[],dd=-1;function Eu(t){return{current:t}}function Kn(t){0>dd||(t.current=xw[dd],xw[dd]=null,dd--)}function Vn(t,e){dd++,xw[dd]=t.current,t.current=e}var uu={},Ls=Eu(uu),ra=Eu(!1),ah=uu;function Yd(t,e){var r=t.type.contextTypes;if(!r)return uu;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function na(t){return t=t.childContextTypes,t!=null}function R1(){Kn(ra),Kn(Ls)}function US(t,e,r){if(Ls.current!==uu)throw Error(Nt(168));Vn(Ls,e),Vn(ra,r)}function lk(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Nt(108,GF(t)||"Unknown",i));return ei({},r,n)}function L1(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||uu,ah=Ls.current,Vn(Ls,t),Vn(ra,ra.current),!0}function VS(t,e,r){var n=t.stateNode;if(!n)throw Error(Nt(169));r?(t=lk(t,e,ah),n.__reactInternalMemoizedMergedChildContext=t,Kn(ra),Kn(Ls),Vn(Ls,t)):Kn(ra),Vn(ra,r)}var Tl=null,Gx=!1,Ay=!1;function ck(t){Tl===null?Tl=[t]:Tl.push(t)}function h7(t){Gx=!0,ck(t)}function Au(){if(!Ay&&Tl!==null){Ay=!0;var t=0,e=An;try{var r=Tl;for(An=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Tl=null,Gx=!1}catch(i){throw Tl!==null&&(Tl=Tl.slice(t+1)),j6(Y5,Au),i}finally{An=e,Ay=!1}}return null}var fd=[],pd=0,j1=null,F1=0,Ja=[],Za=0,oh=null,Il=1,Pl="";function Ou(t,e){fd[pd++]=F1,fd[pd++]=j1,j1=t,F1=e}function uk(t,e,r){Ja[Za++]=Il,Ja[Za++]=Pl,Ja[Za++]=oh,oh=t;var n=Il;t=Pl;var i=32-Co(n)-1;n&=~(1<<i),r+=1;var s=32-Co(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Il=1<<32-Co(e)+i|r<<i|n,Pl=s+t}else Il=1<<s|r<<i|n,Pl=t}function i_(t){t.return!==null&&(Ou(t,1),uk(t,1,0))}function s_(t){for(;t===j1;)j1=fd[--pd],fd[pd]=null,F1=fd[--pd],fd[pd]=null;for(;t===oh;)oh=Ja[--Za],Ja[Za]=null,Pl=Ja[--Za],Ja[Za]=null,Il=Ja[--Za],Ja[Za]=null}var Pa=null,Ta=null,Xn=!1,So=null;function hk(t,e){var r=to(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function zS(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pa=t,Ta=Qc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pa=t,Ta=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=oh!==null?{id:Il,overflow:Pl}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=to(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Pa=t,Ta=null,!0):!1;default:return!1}}function yw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vw(t){if(Xn){var e=Ta;if(e){var r=e;if(!zS(t,e)){if(yw(t))throw Error(Nt(418));e=Qc(r.nextSibling);var n=Pa;e&&zS(t,e)?hk(n,r):(t.flags=t.flags&-4097|2,Xn=!1,Pa=t)}}else{if(yw(t))throw Error(Nt(418));t.flags=t.flags&-4097|2,Xn=!1,Pa=t}}}function HS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pa=t}function eg(t){if(t!==Pa)return!1;if(!Xn)return HS(t),Xn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pw(t.type,t.memoizedProps)),e&&(e=Ta)){if(yw(t))throw dk(),Error(Nt(418));for(;e;)hk(t,e),e=Qc(e.nextSibling)}if(HS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Nt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ta=Qc(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ta=null}}else Ta=Pa?Qc(t.stateNode.nextSibling):null;return!0}function dk(){for(var t=Ta;t;)t=Qc(t.nextSibling)}function Xd(){Ta=Pa=null,Xn=!1}function a_(t){So===null?So=[t]:So.push(t)}var d7=Zl.ReactCurrentBatchConfig;function t0(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Nt(309));var n=r.stateNode}if(!n)throw Error(Nt(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(Nt(284));if(!r._owner)throw Error(Nt(290,t))}return t}function tg(t,e){throw t=Object.prototype.toString.call(e),Error(Nt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $S(t){var e=t._init;return e(t._payload)}function fk(t){function e(w,S){if(t){var N=w.deletions;N===null?(w.deletions=[S],w.flags|=16):N.push(S)}}function r(w,S){if(!t)return null;for(;S!==null;)e(w,S),S=S.sibling;return null}function n(w,S){for(w=new Map;S!==null;)S.key!==null?w.set(S.key,S):w.set(S.index,S),S=S.sibling;return w}function i(w,S){return w=tu(w,S),w.index=0,w.sibling=null,w}function s(w,S,N){return w.index=N,t?(N=w.alternate,N!==null?(N=N.index,N<S?(w.flags|=2,S):N):(w.flags|=2,S)):(w.flags|=1048576,S)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,S,N,j){return S===null||S.tag!==6?(S=Ry(N,w.mode,j),S.return=w,S):(S=i(S,N),S.return=w,S)}function l(w,S,N,j){var z=N.type;return z===od?h(w,S,N.props.children,j,N.key):S!==null&&(S.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Nc&&$S(z)===S.type)?(j=i(S,N.props),j.ref=t0(w,S,N),j.return=w,j):(j=e1(N.type,N.key,N.props,null,w.mode,j),j.ref=t0(w,S,N),j.return=w,j)}function c(w,S,N,j){return S===null||S.tag!==4||S.stateNode.containerInfo!==N.containerInfo||S.stateNode.implementation!==N.implementation?(S=Ly(N,w.mode,j),S.return=w,S):(S=i(S,N.children||[]),S.return=w,S)}function h(w,S,N,j,z){return S===null||S.tag!==7?(S=eh(N,w.mode,j,z),S.return=w,S):(S=i(S,N),S.return=w,S)}function d(w,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Ry(""+S,w.mode,N),S.return=w,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $m:return N=e1(S.type,S.key,S.props,null,w.mode,N),N.ref=t0(w,null,S),N.return=w,N;case ad:return S=Ly(S,w.mode,N),S.return=w,S;case Nc:var j=S._init;return d(w,j(S._payload),N)}if(p0(S)||Xf(S))return S=eh(S,w.mode,N,null),S.return=w,S;tg(w,S)}return null}function p(w,S,N,j){var z=S!==null?S.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return z!==null?null:o(w,S,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case $m:return N.key===z?l(w,S,N,j):null;case ad:return N.key===z?c(w,S,N,j):null;case Nc:return z=N._init,p(w,S,z(N._payload),j)}if(p0(N)||Xf(N))return z!==null?null:h(w,S,N,j,null);tg(w,N)}return null}function f(w,S,N,j,z){if(typeof j=="string"&&j!==""||typeof j=="number")return w=w.get(N)||null,o(S,w,""+j,z);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case $m:return w=w.get(j.key===null?N:j.key)||null,l(S,w,j,z);case ad:return w=w.get(j.key===null?N:j.key)||null,c(S,w,j,z);case Nc:var W=j._init;return f(w,S,N,W(j._payload),z)}if(p0(j)||Xf(j))return w=w.get(N)||null,h(S,w,j,z,null);tg(S,j)}return null}function v(w,S,N,j){for(var z=null,W=null,b=S,T=S=0,A=null;b!==null&&T<N.length;T++){b.index>T?(A=b,b=null):A=b.sibling;var F=p(w,b,N[T],j);if(F===null){b===null&&(b=A);break}t&&b&&F.alternate===null&&e(w,b),S=s(F,S,T),W===null?z=F:W.sibling=F,W=F,b=A}if(T===N.length)return r(w,b),Xn&&Ou(w,T),z;if(b===null){for(;T<N.length;T++)b=d(w,N[T],j),b!==null&&(S=s(b,S,T),W===null?z=b:W.sibling=b,W=b);return Xn&&Ou(w,T),z}for(b=n(w,b);T<N.length;T++)A=f(b,w,T,N[T],j),A!==null&&(t&&A.alternate!==null&&b.delete(A.key===null?T:A.key),S=s(A,S,T),W===null?z=A:W.sibling=A,W=A);return t&&b.forEach(function(k){return e(w,k)}),Xn&&Ou(w,T),z}function x(w,S,N,j){var z=Xf(N);if(typeof z!="function")throw Error(Nt(150));if(N=z.call(N),N==null)throw Error(Nt(151));for(var W=z=null,b=S,T=S=0,A=null,F=N.next();b!==null&&!F.done;T++,F=N.next()){b.index>T?(A=b,b=null):A=b.sibling;var k=p(w,b,F.value,j);if(k===null){b===null&&(b=A);break}t&&b&&k.alternate===null&&e(w,b),S=s(k,S,T),W===null?z=k:W.sibling=k,W=k,b=A}if(F.done)return r(w,b),Xn&&Ou(w,T),z;if(b===null){for(;!F.done;T++,F=N.next())F=d(w,F.value,j),F!==null&&(S=s(F,S,T),W===null?z=F:W.sibling=F,W=F);return Xn&&Ou(w,T),z}for(b=n(w,b);!F.done;T++,F=N.next())F=f(b,w,T,F.value,j),F!==null&&(t&&F.alternate!==null&&b.delete(F.key===null?T:F.key),S=s(F,S,T),W===null?z=F:W.sibling=F,W=F);return t&&b.forEach(function(L){return e(w,L)}),Xn&&Ou(w,T),z}function _(w,S,N,j){if(typeof N=="object"&&N!==null&&N.type===od&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case $m:e:{for(var z=N.key,W=S;W!==null;){if(W.key===z){if(z=N.type,z===od){if(W.tag===7){r(w,W.sibling),S=i(W,N.props.children),S.return=w,w=S;break e}}else if(W.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Nc&&$S(z)===W.type){r(w,W.sibling),S=i(W,N.props),S.ref=t0(w,W,N),S.return=w,w=S;break e}r(w,W);break}else e(w,W);W=W.sibling}N.type===od?(S=eh(N.props.children,w.mode,j,N.key),S.return=w,w=S):(j=e1(N.type,N.key,N.props,null,w.mode,j),j.ref=t0(w,S,N),j.return=w,w=j)}return a(w);case ad:e:{for(W=N.key;S!==null;){if(S.key===W)if(S.tag===4&&S.stateNode.containerInfo===N.containerInfo&&S.stateNode.implementation===N.implementation){r(w,S.sibling),S=i(S,N.children||[]),S.return=w,w=S;break e}else{r(w,S);break}else e(w,S);S=S.sibling}S=Ly(N,w.mode,j),S.return=w,w=S}return a(w);case Nc:return W=N._init,_(w,S,W(N._payload),j)}if(p0(N))return v(w,S,N,j);if(Xf(N))return x(w,S,N,j);tg(w,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,S!==null&&S.tag===6?(r(w,S.sibling),S=i(S,N),S.return=w,w=S):(r(w,S),S=Ry(N,w.mode,j),S.return=w,w=S),a(w)):r(w,S)}return _}var Qd=fk(!0),pk=fk(!1),D1=Eu(null),M1=null,md=null,o_=null;function l_(){o_=md=M1=null}function c_(t){var e=D1.current;Kn(D1),t._currentValue=e}function ww(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Cd(t,e){M1=t,o_=md=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ta=!0),t.firstContext=null)}function no(t){var e=t._currentValue;if(o_!==t)if(t={context:t,memoizedValue:e,next:null},md===null){if(M1===null)throw Error(Nt(308));md=t,M1.dependencies={lanes:0,firstContext:t}}else md=md.next=t;return e}var Gu=null;function u_(t){Gu===null?Gu=[t]:Gu.push(t)}function mk(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,u_(e)):(r.next=i.next,i.next=r),e.interleaved=r,Hl(t,n)}function Hl(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Tc=!1;function h_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jc(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,an&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Hl(t,r)}return i=n.interleaved,i===null?(e.next=e,u_(n)):(e.next=i.next,i.next=e),n.interleaved=e,Hl(t,r)}function Gg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,X5(t,r)}}function qS(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function O1(t,e,r,n){var i=t.updateQueue;Tc=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,h=c=l=null,o=s;do{var p=o.lane,f=o.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,x=o;switch(p=e,f=r,x.tag){case 1:if(v=x.payload,typeof v=="function"){d=v.call(f,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,p=typeof v=="function"?v.call(f,d,p):v,p==null)break e;d=ei({},d,p);break e;case 2:Tc=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else f={eventTime:f,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=f,l=d):h=h.next=f,a|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ch|=a,t.lanes=a,t.memoizedState=d}}function WS(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Nt(191,i));i.call(n)}}}var Yp={},tl=Eu(Yp),hp=Eu(Yp),dp=Eu(Yp);function Yu(t){if(t===Yp)throw Error(Nt(174));return t}function d_(t,e){switch(Vn(dp,e),Vn(hp,t),Vn(tl,Yp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ew(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ew(e,t)}Kn(tl),Vn(tl,e)}function Jd(){Kn(tl),Kn(hp),Kn(dp)}function xk(t){Yu(dp.current);var e=Yu(tl.current),r=ew(e,t.type);e!==r&&(Vn(hp,t),Vn(tl,r))}function f_(t){hp.current===t&&(Kn(tl),Kn(hp))}var Qn=Eu(0);function B1(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ny=[];function p_(){for(var t=0;t<Ny.length;t++)Ny[t]._workInProgressVersionPrimary=null;Ny.length=0}var Yg=Zl.ReactCurrentDispatcher,Ty=Zl.ReactCurrentBatchConfig,lh=0,Zn=null,Ui=null,qi=null,U1=!1,C0=!1,fp=0,f7=0;function ws(){throw Error(Nt(321))}function m_(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ro(t[r],e[r]))return!1;return!0}function g_(t,e,r,n,i,s){if(lh=s,Zn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yg.current=t===null||t.memoizedState===null?x7:y7,t=r(n,i),C0){s=0;do{if(C0=!1,fp=0,25<=s)throw Error(Nt(301));s+=1,qi=Ui=null,e.updateQueue=null,Yg.current=v7,t=r(n,i)}while(C0)}if(Yg.current=V1,e=Ui!==null&&Ui.next!==null,lh=0,qi=Ui=Zn=null,U1=!1,e)throw Error(Nt(300));return t}function x_(){var t=fp!==0;return fp=0,t}function Ko(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qi===null?Zn.memoizedState=qi=t:qi=qi.next=t,qi}function io(){if(Ui===null){var t=Zn.alternate;t=t!==null?t.memoizedState:null}else t=Ui.next;var e=qi===null?Zn.memoizedState:qi.next;if(e!==null)qi=e,Ui=t;else{if(t===null)throw Error(Nt(310));Ui=t,t={memoizedState:Ui.memoizedState,baseState:Ui.baseState,baseQueue:Ui.baseQueue,queue:Ui.queue,next:null},qi===null?Zn.memoizedState=qi=t:qi=qi.next=t}return qi}function pp(t,e){return typeof e=="function"?e(t):e}function ky(t){var e=io(),r=e.queue;if(r===null)throw Error(Nt(311));r.lastRenderedReducer=t;var n=Ui,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,c=s;do{var h=c.lane;if((lh&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=n):l=l.next=d,Zn.lanes|=h,ch|=h}c=c.next}while(c!==null&&c!==s);l===null?a=n:l.next=o,Ro(n,e.memoizedState)||(ta=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Zn.lanes|=s,ch|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Cy(t){var e=io(),r=e.queue;if(r===null)throw Error(Nt(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Ro(s,e.memoizedState)||(ta=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function yk(){}function vk(t,e){var r=Zn,n=io(),i=e(),s=!Ro(n.memoizedState,i);if(s&&(n.memoizedState=i,ta=!0),n=n.queue,y_(bk.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||qi!==null&&qi.memoizedState.tag&1){if(r.flags|=2048,mp(9,_k.bind(null,r,n,i,e),void 0,null),Qi===null)throw Error(Nt(349));lh&30||wk(r,e,i)}return i}function wk(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Zn.updateQueue,e===null?(e={lastEffect:null,stores:null},Zn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function _k(t,e,r,n){e.value=r,e.getSnapshot=n,Sk(e)&&Ek(t)}function bk(t,e,r){return r(function(){Sk(e)&&Ek(t)})}function Sk(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ro(t,r)}catch{return!0}}function Ek(t){var e=Hl(t,1);e!==null&&Io(e,t,1,-1)}function KS(t){var e=Ko();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pp,lastRenderedState:t},e.queue=t,t=t.dispatch=g7.bind(null,Zn,t),[e.memoizedState,t]}function mp(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Zn.updateQueue,e===null?(e={lastEffect:null,stores:null},Zn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Ak(){return io().memoizedState}function Xg(t,e,r,n){var i=Ko();Zn.flags|=t,i.memoizedState=mp(1|e,r,void 0,n===void 0?null:n)}function Yx(t,e,r,n){var i=io();n=n===void 0?null:n;var s=void 0;if(Ui!==null){var a=Ui.memoizedState;if(s=a.destroy,n!==null&&m_(n,a.deps)){i.memoizedState=mp(e,r,s,n);return}}Zn.flags|=t,i.memoizedState=mp(1|e,r,s,n)}function GS(t,e){return Xg(8390656,8,t,e)}function y_(t,e){return Yx(2048,8,t,e)}function Nk(t,e){return Yx(4,2,t,e)}function Tk(t,e){return Yx(4,4,t,e)}function kk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ck(t,e,r){return r=r!=null?r.concat([t]):null,Yx(4,4,kk.bind(null,e,t),r)}function v_(){}function Ik(t,e){var r=io();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&m_(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Pk(t,e){var r=io();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&m_(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Rk(t,e,r){return lh&21?(Ro(r,e)||(r=M6(),Zn.lanes|=r,ch|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ta=!0),t.memoizedState=r)}function p7(t,e){var r=An;An=r!==0&&4>r?r:4,t(!0);var n=Ty.transition;Ty.transition={};try{t(!1),e()}finally{An=r,Ty.transition=n}}function Lk(){return io().memoizedState}function m7(t,e,r){var n=eu(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},jk(t))Fk(e,r);else if(r=mk(t,e,r,n),r!==null){var i=$s();Io(r,t,n,i),Dk(r,e,n)}}function g7(t,e,r){var n=eu(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(jk(t))Fk(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,Ro(o,a)){var l=e.interleaved;l===null?(i.next=i,u_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=mk(t,e,i,n),r!==null&&(i=$s(),Io(r,t,n,i),Dk(r,e,n))}}function jk(t){var e=t.alternate;return t===Zn||e!==null&&e===Zn}function Fk(t,e){C0=U1=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Dk(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,X5(t,r)}}var V1={readContext:no,useCallback:ws,useContext:ws,useEffect:ws,useImperativeHandle:ws,useInsertionEffect:ws,useLayoutEffect:ws,useMemo:ws,useReducer:ws,useRef:ws,useState:ws,useDebugValue:ws,useDeferredValue:ws,useTransition:ws,useMutableSource:ws,useSyncExternalStore:ws,useId:ws,unstable_isNewReconciler:!1},x7={readContext:no,useCallback:function(t,e){return Ko().memoizedState=[t,e===void 0?null:e],t},useContext:no,useEffect:GS,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Xg(4194308,4,kk.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Xg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xg(4,2,t,e)},useMemo:function(t,e){var r=Ko();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ko();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=m7.bind(null,Zn,t),[n.memoizedState,t]},useRef:function(t){var e=Ko();return t={current:t},e.memoizedState=t},useState:KS,useDebugValue:v_,useDeferredValue:function(t){return Ko().memoizedState=t},useTransition:function(){var t=KS(!1),e=t[0];return t=p7.bind(null,t[1]),Ko().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Zn,i=Ko();if(Xn){if(r===void 0)throw Error(Nt(407));r=r()}else{if(r=e(),Qi===null)throw Error(Nt(349));lh&30||wk(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,GS(bk.bind(null,n,s,t),[t]),n.flags|=2048,mp(9,_k.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Ko(),e=Qi.identifierPrefix;if(Xn){var r=Pl,n=Il;r=(n&~(1<<32-Co(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=fp++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=f7++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},y7={readContext:no,useCallback:Ik,useContext:no,useEffect:y_,useImperativeHandle:Ck,useInsertionEffect:Nk,useLayoutEffect:Tk,useMemo:Pk,useReducer:ky,useRef:Ak,useState:function(){return ky(pp)},useDebugValue:v_,useDeferredValue:function(t){var e=io();return Rk(e,Ui.memoizedState,t)},useTransition:function(){var t=ky(pp)[0],e=io().memoizedState;return[t,e]},useMutableSource:yk,useSyncExternalStore:vk,useId:Lk,unstable_isNewReconciler:!1},v7={readContext:no,useCallback:Ik,useContext:no,useEffect:y_,useImperativeHandle:Ck,useInsertionEffect:Nk,useLayoutEffect:Tk,useMemo:Pk,useReducer:Cy,useRef:Ak,useState:function(){return Cy(pp)},useDebugValue:v_,useDeferredValue:function(t){var e=io();return Ui===null?e.memoizedState=t:Rk(e,Ui.memoizedState,t)},useTransition:function(){var t=Cy(pp)[0],e=io().memoizedState;return[t,e]},useMutableSource:yk,useSyncExternalStore:vk,useId:Lk,unstable_isNewReconciler:!1};function wo(t,e){if(t&&t.defaultProps){e=ei({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function _w(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ei({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Xx={isMounted:function(t){return(t=t._reactInternals)?Eh(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=$s(),i=eu(t),s=Dl(n,i);s.payload=e,r!=null&&(s.callback=r),e=Jc(t,s,i),e!==null&&(Io(e,t,i,n),Gg(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=$s(),i=eu(t),s=Dl(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Jc(t,s,i),e!==null&&(Io(e,t,i,n),Gg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=$s(),n=eu(t),i=Dl(r,n);i.tag=2,e!=null&&(i.callback=e),e=Jc(t,i,n),e!==null&&(Io(e,t,n,r),Gg(e,t,n))}};function YS(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!op(r,n)||!op(i,s):!0}function Mk(t,e,r){var n=!1,i=uu,s=e.contextType;return typeof s=="object"&&s!==null?s=no(s):(i=na(e)?ah:Ls.current,n=e.contextTypes,s=(n=n!=null)?Yd(t,i):uu),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xx,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function XS(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Xx.enqueueReplaceState(e,e.state,null)}function bw(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},h_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=no(s):(s=na(e)?ah:Ls.current,i.context=Yd(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_w(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Xx.enqueueReplaceState(i,i.state,null),O1(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zd(t,e){try{var r="",n=e;do r+=KF(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Iy(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Sw(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var w7=typeof WeakMap=="function"?WeakMap:Map;function Ok(t,e,r){r=Dl(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){H1||(H1=!0,Lw=n),Sw(t,e)},r}function Bk(t,e,r){r=Dl(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Sw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Sw(t,e),typeof n!="function"&&(Zc===null?Zc=new Set([this]):Zc.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function QS(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new w7;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=j7.bind(null,t,e,r),e.then(t,t))}function JS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ZS(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Dl(-1,1),e.tag=2,Jc(r,e,1))),r.lanes|=1),t)}var _7=Zl.ReactCurrentOwner,ta=!1;function Us(t,e,r,n){e.child=t===null?pk(e,null,r,n):Qd(e,t.child,r,n)}function eE(t,e,r,n,i){r=r.render;var s=e.ref;return Cd(e,i),n=g_(t,e,r,n,s,i),r=x_(),t!==null&&!ta?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$l(t,e,i)):(Xn&&r&&i_(e),e.flags|=1,Us(t,e,n,i),e.child)}function tE(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!T_(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Uk(t,e,s,n,i)):(t=e1(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:op,r(a,n)&&t.ref===e.ref)return $l(t,e,i)}return e.flags|=1,t=tu(s,n),t.ref=e.ref,t.return=e,e.child=t}function Uk(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(op(s,n)&&t.ref===e.ref)if(ta=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(ta=!0);else return e.lanes=t.lanes,$l(t,e,i)}return Ew(t,e,r,n,i)}function Vk(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vn(xd,_a),_a|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Vn(xd,_a),_a|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Vn(xd,_a),_a|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Vn(xd,_a),_a|=n;return Us(t,e,i,r),e.child}function zk(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Ew(t,e,r,n,i){var s=na(r)?ah:Ls.current;return s=Yd(e,s),Cd(e,i),r=g_(t,e,r,n,s,i),n=x_(),t!==null&&!ta?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$l(t,e,i)):(Xn&&n&&i_(e),e.flags|=1,Us(t,e,r,i),e.child)}function rE(t,e,r,n,i){if(na(r)){var s=!0;L1(e)}else s=!1;if(Cd(e,i),e.stateNode===null)Qg(t,e),Mk(e,r,n),bw(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=no(c):(c=na(r)?ah:Ls.current,c=Yd(e,c));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==c)&&XS(e,a,n,c),Tc=!1;var p=e.memoizedState;a.state=p,O1(e,n,a,i),l=e.memoizedState,o!==n||p!==l||ra.current||Tc?(typeof h=="function"&&(_w(e,r,h,n),l=e.memoizedState),(o=Tc||YS(e,r,o,n,p,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,gk(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:wo(e.type,o),a.props=c,d=e.pendingProps,p=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=no(l):(l=na(r)?ah:Ls.current,l=Yd(e,l));var f=r.getDerivedStateFromProps;(h=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||p!==l)&&XS(e,a,n,l),Tc=!1,p=e.memoizedState,a.state=p,O1(e,n,a,i);var v=e.memoizedState;o!==d||p!==v||ra.current||Tc?(typeof f=="function"&&(_w(e,r,f,n),v=e.memoizedState),(c=Tc||YS(e,r,c,n,p,v,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return Aw(t,e,r,n,s,i)}function Aw(t,e,r,n,i,s){zk(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&VS(e,r,!1),$l(t,e,s);n=e.stateNode,_7.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Qd(e,t.child,null,s),e.child=Qd(e,null,o,s)):Us(t,e,o,s),e.memoizedState=n.state,i&&VS(e,r,!0),e.child}function Hk(t){var e=t.stateNode;e.pendingContext?US(t,e.pendingContext,e.pendingContext!==e.context):e.context&&US(t,e.context,!1),d_(t,e.containerInfo)}function nE(t,e,r,n,i){return Xd(),a_(i),e.flags|=256,Us(t,e,r,n),e.child}var Nw={dehydrated:null,treeContext:null,retryLane:0};function Tw(t){return{baseLanes:t,cachePool:null,transitions:null}}function $k(t,e,r){var n=e.pendingProps,i=Qn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Vn(Qn,i&1),t===null)return vw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Zx(a,n,0,null),t=eh(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Tw(r),e.memoizedState=Nw,t):w_(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return b7(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=tu(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=tu(o,s):(s=eh(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?Tw(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=Nw,n}return s=t.child,t=s.sibling,n=tu(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function w_(t,e){return e=Zx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rg(t,e,r,n){return n!==null&&a_(n),Qd(e,t.child,null,r),t=w_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function b7(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=Iy(Error(Nt(422))),rg(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Zx({mode:"visible",children:n.children},i,0,null),s=eh(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Qd(e,t.child,null,a),e.child.memoizedState=Tw(a),e.memoizedState=Nw,s);if(!(e.mode&1))return rg(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(Nt(419)),n=Iy(s,n,void 0),rg(t,e,a,n)}if(o=(a&t.childLanes)!==0,ta||o){if(n=Qi,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Hl(t,i),Io(n,t,i,-1))}return N_(),n=Iy(Error(Nt(421))),rg(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=F7.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ta=Qc(i.nextSibling),Pa=e,Xn=!0,So=null,t!==null&&(Ja[Za++]=Il,Ja[Za++]=Pl,Ja[Za++]=oh,Il=t.id,Pl=t.overflow,oh=e),e=w_(e,n.children),e.flags|=4096,e)}function iE(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ww(t.return,e,r)}function Py(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function qk(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Us(t,e,n.children,r),n=Qn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iE(t,r,e);else if(t.tag===19)iE(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Vn(Qn,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&B1(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Py(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&B1(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Py(e,!0,r,null,s);break;case"together":Py(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $l(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),ch|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Nt(153));if(e.child!==null){for(t=e.child,r=tu(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=tu(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function S7(t,e,r){switch(e.tag){case 3:Hk(e),Xd();break;case 5:xk(e);break;case 1:na(e.type)&&L1(e);break;case 4:d_(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Vn(D1,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Vn(Qn,Qn.current&1),e.flags|=128,null):r&e.child.childLanes?$k(t,e,r):(Vn(Qn,Qn.current&1),t=$l(t,e,r),t!==null?t.sibling:null);Vn(Qn,Qn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return qk(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Vn(Qn,Qn.current),n)break;return null;case 22:case 23:return e.lanes=0,Vk(t,e,r)}return $l(t,e,r)}var Wk,kw,Kk,Gk;Wk=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};kw=function(){};Kk=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Yu(tl.current);var s=null;switch(r){case"input":i=Xv(t,i),n=Xv(t,n),s=[];break;case"select":i=ei({},i,{value:void 0}),n=ei({},n,{value:void 0}),s=[];break;case"textarea":i=Zv(t,i),n=Zv(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=P1)}tw(r,n);var a;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ep.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(o=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ep.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&$n("scroll",t),s||o===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Gk=function(t,e,r,n){r!==n&&(e.flags|=4)};function r0(t,e){if(!Xn)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function _s(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function E7(t,e,r){var n=e.pendingProps;switch(s_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _s(e),null;case 1:return na(e.type)&&R1(),_s(e),null;case 3:return n=e.stateNode,Jd(),Kn(ra),Kn(Ls),p_(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(eg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,So!==null&&(Dw(So),So=null))),kw(t,e),_s(e),null;case 5:f_(e);var i=Yu(dp.current);if(r=e.type,t!==null&&e.stateNode!=null)Kk(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Nt(166));return _s(e),null}if(t=Yu(tl.current),eg(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Xo]=e,n[up]=s,t=(e.mode&1)!==0,r){case"dialog":$n("cancel",n),$n("close",n);break;case"iframe":case"object":case"embed":$n("load",n);break;case"video":case"audio":for(i=0;i<g0.length;i++)$n(g0[i],n);break;case"source":$n("error",n);break;case"img":case"image":case"link":$n("error",n),$n("load",n);break;case"details":$n("toggle",n);break;case"input":fS(n,s),$n("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},$n("invalid",n);break;case"textarea":mS(n,s),$n("invalid",n)}tw(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&Zm(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Zm(n.textContent,o,t),i=["children",""+o]):ep.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&$n("scroll",n)}switch(r){case"input":qm(n),pS(n,s,!0);break;case"textarea":qm(n),gS(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=P1)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=b6(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Xo]=e,t[up]=n,Wk(t,e,!1,!1),e.stateNode=t;e:{switch(a=rw(r,n),r){case"dialog":$n("cancel",t),$n("close",t),i=n;break;case"iframe":case"object":case"embed":$n("load",t),i=n;break;case"video":case"audio":for(i=0;i<g0.length;i++)$n(g0[i],t);i=n;break;case"source":$n("error",t),i=n;break;case"img":case"image":case"link":$n("error",t),$n("load",t),i=n;break;case"details":$n("toggle",t),i=n;break;case"input":fS(t,n),i=Xv(t,n),$n("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ei({},n,{value:void 0}),$n("invalid",t);break;case"textarea":mS(t,n),i=Zv(t,n),$n("invalid",t);break;default:i=n}tw(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?A6(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&S6(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&tp(t,l):typeof l=="number"&&tp(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ep.hasOwnProperty(s)?l!=null&&s==="onScroll"&&$n("scroll",t):l!=null&&$5(t,s,l,a))}switch(r){case"input":qm(t),pS(t,n,!1);break;case"textarea":qm(t),gS(t);break;case"option":n.value!=null&&t.setAttribute("value",""+cu(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Ad(t,!!n.multiple,s,!1):n.defaultValue!=null&&Ad(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=P1)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _s(e),null;case 6:if(t&&e.stateNode!=null)Gk(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Nt(166));if(r=Yu(dp.current),Yu(tl.current),eg(e)){if(n=e.stateNode,r=e.memoizedProps,n[Xo]=e,(s=n.nodeValue!==r)&&(t=Pa,t!==null))switch(t.tag){case 3:Zm(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zm(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Xo]=e,e.stateNode=n}return _s(e),null;case 13:if(Kn(Qn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xn&&Ta!==null&&e.mode&1&&!(e.flags&128))dk(),Xd(),e.flags|=98560,s=!1;else if(s=eg(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(Nt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Nt(317));s[Xo]=e}else Xd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_s(e),s=!1}else So!==null&&(Dw(So),So=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Qn.current&1?Vi===0&&(Vi=3):N_())),e.updateQueue!==null&&(e.flags|=4),_s(e),null);case 4:return Jd(),kw(t,e),t===null&&lp(e.stateNode.containerInfo),_s(e),null;case 10:return c_(e.type._context),_s(e),null;case 17:return na(e.type)&&R1(),_s(e),null;case 19:if(Kn(Qn),s=e.memoizedState,s===null)return _s(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)r0(s,!1);else{if(Vi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=B1(t),a!==null){for(e.flags|=128,r0(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Vn(Qn,Qn.current&1|2),e.child}t=t.sibling}s.tail!==null&&_i()>ef&&(e.flags|=128,n=!0,r0(s,!1),e.lanes=4194304)}else{if(!n)if(t=B1(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),r0(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Xn)return _s(e),null}else 2*_i()-s.renderingStartTime>ef&&r!==1073741824&&(e.flags|=128,n=!0,r0(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=_i(),e.sibling=null,r=Qn.current,Vn(Qn,n?r&1|2:r&1),e):(_s(e),null);case 22:case 23:return A_(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?_a&1073741824&&(_s(e),e.subtreeFlags&6&&(e.flags|=8192)):_s(e),null;case 24:return null;case 25:return null}throw Error(Nt(156,e.tag))}function A7(t,e){switch(s_(e),e.tag){case 1:return na(e.type)&&R1(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jd(),Kn(ra),Kn(Ls),p_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return f_(e),null;case 13:if(Kn(Qn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Nt(340));Xd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Kn(Qn),null;case 4:return Jd(),null;case 10:return c_(e.type._context),null;case 22:case 23:return A_(),null;case 24:return null;default:return null}}var ng=!1,Cs=!1,N7=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function gd(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ui(t,e,n)}else r.current=null}function Cw(t,e,r){try{r()}catch(n){ui(t,e,n)}}var sE=!1;function T7(t,e){if(dw=k1,t=Z6(),n_(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var f;d!==r||i!==0&&d.nodeType!==3||(o=a+i),d!==s||n!==0&&d.nodeType!==3||(l=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)p=d,d=f;for(;;){if(d===t)break t;if(p===r&&++c===i&&(o=a),p===s&&++h===n&&(l=a),(f=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=f}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(fw={focusedElem:t,selectionRange:r},k1=!1,Yt=e;Yt!==null;)if(e=Yt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Yt=t;else for(;Yt!==null;){e=Yt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,_=v.memoizedState,w=e.stateNode,S=w.getSnapshotBeforeUpdate(e.elementType===e.type?x:wo(e.type,x),_);w.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Nt(163))}}catch(j){ui(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,Yt=t;break}Yt=e.return}return v=sE,sE=!1,v}function I0(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Cw(e,r,s)}i=i.next}while(i!==n)}}function Qx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Iw(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Yk(t){var e=t.alternate;e!==null&&(t.alternate=null,Yk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xo],delete e[up],delete e[gw],delete e[c7],delete e[u7])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xk(t){return t.tag===5||t.tag===3||t.tag===4}function aE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pw(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=P1));else if(n!==4&&(t=t.child,t!==null))for(Pw(t,e,r),t=t.sibling;t!==null;)Pw(t,e,r),t=t.sibling}function Rw(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Rw(t,e,r),t=t.sibling;t!==null;)Rw(t,e,r),t=t.sibling}var ns=null,_o=!1;function _c(t,e,r){for(r=r.child;r!==null;)Qk(t,e,r),r=r.sibling}function Qk(t,e,r){if(el&&typeof el.onCommitFiberUnmount=="function")try{el.onCommitFiberUnmount(Hx,r)}catch{}switch(r.tag){case 5:Cs||gd(r,e);case 6:var n=ns,i=_o;ns=null,_c(t,e,r),ns=n,_o=i,ns!==null&&(_o?(t=ns,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ns.removeChild(r.stateNode));break;case 18:ns!==null&&(_o?(t=ns,r=r.stateNode,t.nodeType===8?Ey(t.parentNode,r):t.nodeType===1&&Ey(t,r),sp(t)):Ey(ns,r.stateNode));break;case 4:n=ns,i=_o,ns=r.stateNode.containerInfo,_o=!0,_c(t,e,r),ns=n,_o=i;break;case 0:case 11:case 14:case 15:if(!Cs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Cw(r,e,a),i=i.next}while(i!==n)}_c(t,e,r);break;case 1:if(!Cs&&(gd(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){ui(r,e,o)}_c(t,e,r);break;case 21:_c(t,e,r);break;case 22:r.mode&1?(Cs=(n=Cs)||r.memoizedState!==null,_c(t,e,r),Cs=n):_c(t,e,r);break;default:_c(t,e,r)}}function oE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new N7),e.forEach(function(n){var i=D7.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function go(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ns=o.stateNode,_o=!1;break e;case 3:ns=o.stateNode.containerInfo,_o=!0;break e;case 4:ns=o.stateNode.containerInfo,_o=!0;break e}o=o.return}if(ns===null)throw Error(Nt(160));Qk(s,a,i),ns=null,_o=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ui(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jk(e,t),e=e.sibling}function Jk(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(go(e,t),zo(t),n&4){try{I0(3,t,t.return),Qx(3,t)}catch(x){ui(t,t.return,x)}try{I0(5,t,t.return)}catch(x){ui(t,t.return,x)}}break;case 1:go(e,t),zo(t),n&512&&r!==null&&gd(r,r.return);break;case 5:if(go(e,t),zo(t),n&512&&r!==null&&gd(r,r.return),t.flags&32){var i=t.stateNode;try{tp(i,"")}catch(x){ui(t,t.return,x)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&w6(i,s),rw(o,a);var c=rw(o,s);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];h==="style"?A6(i,d):h==="dangerouslySetInnerHTML"?S6(i,d):h==="children"?tp(i,d):$5(i,h,d,c)}switch(o){case"input":Qv(i,s);break;case"textarea":_6(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Ad(i,!!s.multiple,f,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ad(i,!!s.multiple,s.defaultValue,!0):Ad(i,!!s.multiple,s.multiple?[]:"",!1))}i[up]=s}catch(x){ui(t,t.return,x)}}break;case 6:if(go(e,t),zo(t),n&4){if(t.stateNode===null)throw Error(Nt(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){ui(t,t.return,x)}}break;case 3:if(go(e,t),zo(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{sp(e.containerInfo)}catch(x){ui(t,t.return,x)}break;case 4:go(e,t),zo(t);break;case 13:go(e,t),zo(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(S_=_i())),n&4&&oE(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Cs=(c=Cs)||h,go(e,t),Cs=c):go(e,t),zo(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Yt=t,h=t.child;h!==null;){for(d=Yt=h;Yt!==null;){switch(p=Yt,f=p.child,p.tag){case 0:case 11:case 14:case 15:I0(4,p,p.return);break;case 1:gd(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){ui(n,r,x)}}break;case 5:gd(p,p.return);break;case 22:if(p.memoizedState!==null){cE(d);continue}}f!==null?(f.return=p,Yt=f):cE(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=E6("display",a))}catch(x){ui(t,t.return,x)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){ui(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:go(e,t),zo(t),n&4&&oE(t);break;case 21:break;default:go(e,t),zo(t)}}function zo(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Xk(r)){var n=r;break e}r=r.return}throw Error(Nt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(tp(i,""),n.flags&=-33);var s=aE(t);Rw(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=aE(t);Pw(t,o,a);break;default:throw Error(Nt(161))}}catch(l){ui(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function k7(t,e,r){Yt=t,Zk(t)}function Zk(t,e,r){for(var n=(t.mode&1)!==0;Yt!==null;){var i=Yt,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||ng;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Cs;o=ng;var c=Cs;if(ng=a,(Cs=l)&&!c)for(Yt=i;Yt!==null;)a=Yt,l=a.child,a.tag===22&&a.memoizedState!==null?uE(i):l!==null?(l.return=a,Yt=l):uE(i);for(;s!==null;)Yt=s,Zk(s),s=s.sibling;Yt=i,ng=o,Cs=c}lE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Yt=s):lE(t)}}function lE(t){for(;Yt!==null;){var e=Yt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cs||Qx(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Cs)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:wo(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&WS(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}WS(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&sp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Nt(163))}Cs||e.flags&512&&Iw(e)}catch(p){ui(e,e.return,p)}}if(e===t){Yt=null;break}if(r=e.sibling,r!==null){r.return=e.return,Yt=r;break}Yt=e.return}}function cE(t){for(;Yt!==null;){var e=Yt;if(e===t){Yt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Yt=r;break}Yt=e.return}}function uE(t){for(;Yt!==null;){var e=Yt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Qx(4,e)}catch(l){ui(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){ui(e,i,l)}}var s=e.return;try{Iw(e)}catch(l){ui(e,s,l)}break;case 5:var a=e.return;try{Iw(e)}catch(l){ui(e,a,l)}}}catch(l){ui(e,e.return,l)}if(e===t){Yt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Yt=o;break}Yt=e.return}}var C7=Math.ceil,z1=Zl.ReactCurrentDispatcher,__=Zl.ReactCurrentOwner,ro=Zl.ReactCurrentBatchConfig,an=0,Qi=null,ki=null,cs=0,_a=0,xd=Eu(0),Vi=0,gp=null,ch=0,Jx=0,b_=0,P0=null,ea=null,S_=0,ef=1/0,Nl=null,H1=!1,Lw=null,Zc=null,ig=!1,Uc=null,$1=0,R0=0,jw=null,Jg=-1,Zg=0;function $s(){return an&6?_i():Jg!==-1?Jg:Jg=_i()}function eu(t){return t.mode&1?an&2&&cs!==0?cs&-cs:d7.transition!==null?(Zg===0&&(Zg=M6()),Zg):(t=An,t!==0||(t=window.event,t=t===void 0?16:$6(t.type)),t):1}function Io(t,e,r,n){if(50<R0)throw R0=0,jw=null,Error(Nt(185));Wp(t,r,n),(!(an&2)||t!==Qi)&&(t===Qi&&(!(an&2)&&(Jx|=r),Vi===4&&Pc(t,cs)),ia(t,n),r===1&&an===0&&!(e.mode&1)&&(ef=_i()+500,Gx&&Au()))}function ia(t,e){var r=t.callbackNode;dD(t,e);var n=T1(t,t===Qi?cs:0);if(n===0)r!==null&&vS(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&vS(r),e===1)t.tag===0?h7(hE.bind(null,t)):ck(hE.bind(null,t)),o7(function(){!(an&6)&&Au()}),r=null;else{switch(O6(n)){case 1:r=Y5;break;case 4:r=F6;break;case 16:r=N1;break;case 536870912:r=D6;break;default:r=N1}r=oC(r,eC.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function eC(t,e){if(Jg=-1,Zg=0,an&6)throw Error(Nt(327));var r=t.callbackNode;if(Id()&&t.callbackNode!==r)return null;var n=T1(t,t===Qi?cs:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=q1(t,n);else{e=n;var i=an;an|=2;var s=rC();(Qi!==t||cs!==e)&&(Nl=null,ef=_i()+500,Zu(t,e));do try{R7();break}catch(o){tC(t,o)}while(!0);l_(),z1.current=s,an=i,ki!==null?e=0:(Qi=null,cs=0,e=Vi)}if(e!==0){if(e===2&&(i=ow(t),i!==0&&(n=i,e=Fw(t,i))),e===1)throw r=gp,Zu(t,0),Pc(t,n),ia(t,_i()),r;if(e===6)Pc(t,n);else{if(i=t.current.alternate,!(n&30)&&!I7(i)&&(e=q1(t,n),e===2&&(s=ow(t),s!==0&&(n=s,e=Fw(t,s))),e===1))throw r=gp,Zu(t,0),Pc(t,n),ia(t,_i()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Nt(345));case 2:Bu(t,ea,Nl);break;case 3:if(Pc(t,n),(n&130023424)===n&&(e=S_+500-_i(),10<e)){if(T1(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){$s(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=mw(Bu.bind(null,t,ea,Nl),e);break}Bu(t,ea,Nl);break;case 4:if(Pc(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-Co(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=_i()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*C7(n/1960))-n,10<n){t.timeoutHandle=mw(Bu.bind(null,t,ea,Nl),n);break}Bu(t,ea,Nl);break;case 5:Bu(t,ea,Nl);break;default:throw Error(Nt(329))}}}return ia(t,_i()),t.callbackNode===r?eC.bind(null,t):null}function Fw(t,e){var r=P0;return t.current.memoizedState.isDehydrated&&(Zu(t,e).flags|=256),t=q1(t,e),t!==2&&(e=ea,ea=r,e!==null&&Dw(e)),t}function Dw(t){ea===null?ea=t:ea.push.apply(ea,t)}function I7(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Ro(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pc(t,e){for(e&=~b_,e&=~Jx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Co(e),n=1<<r;t[r]=-1,e&=~n}}function hE(t){if(an&6)throw Error(Nt(327));Id();var e=T1(t,0);if(!(e&1))return ia(t,_i()),null;var r=q1(t,e);if(t.tag!==0&&r===2){var n=ow(t);n!==0&&(e=n,r=Fw(t,n))}if(r===1)throw r=gp,Zu(t,0),Pc(t,e),ia(t,_i()),r;if(r===6)throw Error(Nt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bu(t,ea,Nl),ia(t,_i()),null}function E_(t,e){var r=an;an|=1;try{return t(e)}finally{an=r,an===0&&(ef=_i()+500,Gx&&Au())}}function uh(t){Uc!==null&&Uc.tag===0&&!(an&6)&&Id();var e=an;an|=1;var r=ro.transition,n=An;try{if(ro.transition=null,An=1,t)return t()}finally{An=n,ro.transition=r,an=e,!(an&6)&&Au()}}function A_(){_a=xd.current,Kn(xd)}function Zu(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,a7(r)),ki!==null)for(r=ki.return;r!==null;){var n=r;switch(s_(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&R1();break;case 3:Jd(),Kn(ra),Kn(Ls),p_();break;case 5:f_(n);break;case 4:Jd();break;case 13:Kn(Qn);break;case 19:Kn(Qn);break;case 10:c_(n.type._context);break;case 22:case 23:A_()}r=r.return}if(Qi=t,ki=t=tu(t.current,null),cs=_a=e,Vi=0,gp=null,b_=Jx=ch=0,ea=P0=null,Gu!==null){for(e=0;e<Gu.length;e++)if(r=Gu[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}Gu=null}return t}function tC(t,e){do{var r=ki;try{if(l_(),Yg.current=V1,U1){for(var n=Zn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}U1=!1}if(lh=0,qi=Ui=Zn=null,C0=!1,fp=0,__.current=null,r===null||r.return===null){Vi=1,gp=e,ki=null;break}e:{var s=t,a=r.return,o=r,l=e;if(e=cs,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=JS(a);if(f!==null){f.flags&=-257,ZS(f,a,o,s,e),f.mode&1&&QS(s,c,e),e=f,l=c;var v=e.updateQueue;if(v===null){var x=new Set;x.add(l),e.updateQueue=x}else v.add(l);break e}else{if(!(e&1)){QS(s,c,e),N_();break e}l=Error(Nt(426))}}else if(Xn&&o.mode&1){var _=JS(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),ZS(_,a,o,s,e),a_(Zd(l,o));break e}}s=l=Zd(l,o),Vi!==4&&(Vi=2),P0===null?P0=[s]:P0.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Ok(s,l,e);qS(s,w);break e;case 1:o=l;var S=s.type,N=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Zc===null||!Zc.has(N)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=Bk(s,o,e);qS(s,j);break e}}s=s.return}while(s!==null)}iC(r)}catch(z){e=z,ki===r&&r!==null&&(ki=r=r.return);continue}break}while(!0)}function rC(){var t=z1.current;return z1.current=V1,t===null?V1:t}function N_(){(Vi===0||Vi===3||Vi===2)&&(Vi=4),Qi===null||!(ch&268435455)&&!(Jx&268435455)||Pc(Qi,cs)}function q1(t,e){var r=an;an|=2;var n=rC();(Qi!==t||cs!==e)&&(Nl=null,Zu(t,e));do try{P7();break}catch(i){tC(t,i)}while(!0);if(l_(),an=r,z1.current=n,ki!==null)throw Error(Nt(261));return Qi=null,cs=0,Vi}function P7(){for(;ki!==null;)nC(ki)}function R7(){for(;ki!==null&&!nD();)nC(ki)}function nC(t){var e=aC(t.alternate,t,_a);t.memoizedProps=t.pendingProps,e===null?iC(t):ki=e,__.current=null}function iC(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=A7(r,e),r!==null){r.flags&=32767,ki=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vi=6,ki=null;return}}else if(r=E7(r,e,_a),r!==null){ki=r;return}if(e=e.sibling,e!==null){ki=e;return}ki=e=t}while(e!==null);Vi===0&&(Vi=5)}function Bu(t,e,r){var n=An,i=ro.transition;try{ro.transition=null,An=1,L7(t,e,r,n)}finally{ro.transition=i,An=n}return null}function L7(t,e,r,n){do Id();while(Uc!==null);if(an&6)throw Error(Nt(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Nt(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(fD(t,s),t===Qi&&(ki=Qi=null,cs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ig||(ig=!0,oC(N1,function(){return Id(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=ro.transition,ro.transition=null;var a=An;An=1;var o=an;an|=4,__.current=null,T7(t,r),Jk(r,t),ZD(fw),k1=!!dw,fw=dw=null,t.current=r,k7(r),iD(),an=o,An=a,ro.transition=s}else t.current=r;if(ig&&(ig=!1,Uc=t,$1=i),s=t.pendingLanes,s===0&&(Zc=null),oD(r.stateNode),ia(t,_i()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(H1)throw H1=!1,t=Lw,Lw=null,t;return $1&1&&t.tag!==0&&Id(),s=t.pendingLanes,s&1?t===jw?R0++:(R0=0,jw=t):R0=0,Au(),null}function Id(){if(Uc!==null){var t=O6($1),e=ro.transition,r=An;try{if(ro.transition=null,An=16>t?16:t,Uc===null)var n=!1;else{if(t=Uc,Uc=null,$1=0,an&6)throw Error(Nt(331));var i=an;for(an|=4,Yt=t.current;Yt!==null;){var s=Yt,a=s.child;if(Yt.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(Yt=c;Yt!==null;){var h=Yt;switch(h.tag){case 0:case 11:case 15:I0(8,h,s)}var d=h.child;if(d!==null)d.return=h,Yt=d;else for(;Yt!==null;){h=Yt;var p=h.sibling,f=h.return;if(Yk(h),h===c){Yt=null;break}if(p!==null){p.return=f,Yt=p;break}Yt=f}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}Yt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Yt=a;else e:for(;Yt!==null;){if(s=Yt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:I0(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Yt=w;break e}Yt=s.return}}var S=t.current;for(Yt=S;Yt!==null;){a=Yt;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,Yt=N;else e:for(a=S;Yt!==null;){if(o=Yt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Qx(9,o)}}catch(z){ui(o,o.return,z)}if(o===a){Yt=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,Yt=j;break e}Yt=o.return}}if(an=i,Au(),el&&typeof el.onPostCommitFiberRoot=="function")try{el.onPostCommitFiberRoot(Hx,t)}catch{}n=!0}return n}finally{An=r,ro.transition=e}}return!1}function dE(t,e,r){e=Zd(r,e),e=Ok(t,e,1),t=Jc(t,e,1),e=$s(),t!==null&&(Wp(t,1,e),ia(t,e))}function ui(t,e,r){if(t.tag===3)dE(t,t,r);else for(;e!==null;){if(e.tag===3){dE(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zc===null||!Zc.has(n))){t=Zd(r,t),t=Bk(e,t,1),e=Jc(e,t,1),t=$s(),e!==null&&(Wp(e,1,t),ia(e,t));break}}e=e.return}}function j7(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=$s(),t.pingedLanes|=t.suspendedLanes&r,Qi===t&&(cs&r)===r&&(Vi===4||Vi===3&&(cs&130023424)===cs&&500>_i()-S_?Zu(t,0):b_|=r),ia(t,e)}function sC(t,e){e===0&&(t.mode&1?(e=Gm,Gm<<=1,!(Gm&130023424)&&(Gm=4194304)):e=1);var r=$s();t=Hl(t,e),t!==null&&(Wp(t,e,r),ia(t,r))}function F7(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),sC(t,r)}function D7(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Nt(314))}n!==null&&n.delete(e),sC(t,r)}var aC;aC=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ra.current)ta=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ta=!1,S7(t,e,r);ta=!!(t.flags&131072)}else ta=!1,Xn&&e.flags&1048576&&uk(e,F1,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Qg(t,e),t=e.pendingProps;var i=Yd(e,Ls.current);Cd(e,r),i=g_(null,e,n,t,i,r);var s=x_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,na(n)?(s=!0,L1(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,h_(e),i.updater=Xx,e.stateNode=i,i._reactInternals=e,bw(e,n,t,r),e=Aw(null,e,n,!0,s,r)):(e.tag=0,Xn&&s&&i_(e),Us(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Qg(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=O7(n),t=wo(n,t),i){case 0:e=Ew(null,e,n,t,r);break e;case 1:e=rE(null,e,n,t,r);break e;case 11:e=eE(null,e,n,t,r);break e;case 14:e=tE(null,e,n,wo(n.type,t),r);break e}throw Error(Nt(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:wo(n,i),Ew(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:wo(n,i),rE(t,e,n,i,r);case 3:e:{if(Hk(e),t===null)throw Error(Nt(387));n=e.pendingProps,s=e.memoizedState,i=s.element,gk(t,e),O1(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Zd(Error(Nt(423)),e),e=nE(t,e,n,r,i);break e}else if(n!==i){i=Zd(Error(Nt(424)),e),e=nE(t,e,n,r,i);break e}else for(Ta=Qc(e.stateNode.containerInfo.firstChild),Pa=e,Xn=!0,So=null,r=pk(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xd(),n===i){e=$l(t,e,r);break e}Us(t,e,n,r)}e=e.child}return e;case 5:return xk(e),t===null&&vw(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,pw(n,i)?a=null:s!==null&&pw(n,s)&&(e.flags|=32),zk(t,e),Us(t,e,a,r),e.child;case 6:return t===null&&vw(e),null;case 13:return $k(t,e,r);case 4:return d_(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Qd(e,null,n,r):Us(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:wo(n,i),eE(t,e,n,i,r);case 7:return Us(t,e,e.pendingProps,r),e.child;case 8:return Us(t,e,e.pendingProps.children,r),e.child;case 12:return Us(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Vn(D1,n._currentValue),n._currentValue=a,s!==null)if(Ro(s.value,a)){if(s.children===i.children&&!ra.current){e=$l(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Dl(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),ww(s.return,r,e),o.lanes|=r;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Nt(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),ww(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Us(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Cd(e,r),i=no(i),n=n(i),e.flags|=1,Us(t,e,n,r),e.child;case 14:return n=e.type,i=wo(n,e.pendingProps),i=wo(n.type,i),tE(t,e,n,i,r);case 15:return Uk(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:wo(n,i),Qg(t,e),e.tag=1,na(n)?(t=!0,L1(e)):t=!1,Cd(e,r),Mk(e,n,i),bw(e,n,i,r),Aw(null,e,n,!0,t,r);case 19:return qk(t,e,r);case 22:return Vk(t,e,r)}throw Error(Nt(156,e.tag))};function oC(t,e){return j6(t,e)}function M7(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function to(t,e,r,n){return new M7(t,e,r,n)}function T_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function O7(t){if(typeof t=="function")return T_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===W5)return 11;if(t===K5)return 14}return 2}function tu(t,e){var r=t.alternate;return r===null?(r=to(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function e1(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")T_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case od:return eh(r.children,i,s,e);case q5:a=8,i|=8;break;case Wv:return t=to(12,r,e,i|2),t.elementType=Wv,t.lanes=s,t;case Kv:return t=to(13,r,e,i),t.elementType=Kv,t.lanes=s,t;case Gv:return t=to(19,r,e,i),t.elementType=Gv,t.lanes=s,t;case x6:return Zx(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case m6:a=10;break e;case g6:a=9;break e;case W5:a=11;break e;case K5:a=14;break e;case Nc:a=16,n=null;break e}throw Error(Nt(130,t==null?t:typeof t,""))}return e=to(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function eh(t,e,r,n){return t=to(7,t,n,e),t.lanes=r,t}function Zx(t,e,r,n){return t=to(22,t,n,e),t.elementType=x6,t.lanes=r,t.stateNode={isHidden:!1},t}function Ry(t,e,r){return t=to(6,t,null,e),t.lanes=r,t}function Ly(t,e,r){return e=to(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function B7(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fy(0),this.expirationTimes=fy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fy(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function k_(t,e,r,n,i,s,a,o,l){return t=new B7(t,e,r,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=to(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},h_(s),t}function U7(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ad,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function lC(t){if(!t)return uu;t=t._reactInternals;e:{if(Eh(t)!==t||t.tag!==1)throw Error(Nt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(na(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Nt(171))}if(t.tag===1){var r=t.type;if(na(r))return lk(t,r,e)}return e}function cC(t,e,r,n,i,s,a,o,l){return t=k_(r,n,!0,t,i,s,a,o,l),t.context=lC(null),r=t.current,n=$s(),i=eu(r),s=Dl(n,i),s.callback=e??null,Jc(r,s,i),t.current.lanes=i,Wp(t,i,n),ia(t,n),t}function e2(t,e,r,n){var i=e.current,s=$s(),a=eu(i);return r=lC(r),e.context===null?e.context=r:e.pendingContext=r,e=Dl(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Jc(i,e,a),t!==null&&(Io(t,i,a,s),Gg(t,i,a)),a}function W1(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function C_(t,e){fE(t,e),(t=t.alternate)&&fE(t,e)}function V7(){return null}var uC=typeof reportError=="function"?reportError:function(t){console.error(t)};function I_(t){this._internalRoot=t}t2.prototype.render=I_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Nt(409));e2(t,e,null,null)};t2.prototype.unmount=I_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;uh(function(){e2(null,t,null,null)}),e[zl]=null}};function t2(t){this._internalRoot=t}t2.prototype.unstable_scheduleHydration=function(t){if(t){var e=V6();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ic.length&&e!==0&&e<Ic[r].priority;r++);Ic.splice(r,0,t),r===0&&H6(t)}};function P_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function r2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pE(){}function z7(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=W1(a);s.call(c)}}var a=cC(e,n,t,0,null,!1,!1,"",pE);return t._reactRootContainer=a,t[zl]=a.current,lp(t.nodeType===8?t.parentNode:t),uh(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var c=W1(l);o.call(c)}}var l=k_(t,0,!1,null,null,!1,!1,"",pE);return t._reactRootContainer=l,t[zl]=l.current,lp(t.nodeType===8?t.parentNode:t),uh(function(){e2(e,l,r,n)}),l}function n2(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=W1(a);o.call(l)}}e2(e,a,t,i)}else a=z7(r,e,t,i,n);return W1(a)}B6=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=m0(e.pendingLanes);r!==0&&(X5(e,r|1),ia(e,_i()),!(an&6)&&(ef=_i()+500,Au()))}break;case 13:uh(function(){var n=Hl(t,1);if(n!==null){var i=$s();Io(n,t,1,i)}}),C_(t,1)}};Q5=function(t){if(t.tag===13){var e=Hl(t,134217728);if(e!==null){var r=$s();Io(e,t,134217728,r)}C_(t,134217728)}};U6=function(t){if(t.tag===13){var e=eu(t),r=Hl(t,e);if(r!==null){var n=$s();Io(r,t,e,n)}C_(t,e)}};V6=function(){return An};z6=function(t,e){var r=An;try{return An=t,e()}finally{An=r}};iw=function(t,e,r){switch(e){case"input":if(Qv(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Kx(n);if(!i)throw Error(Nt(90));v6(n),Qv(n,i)}}}break;case"textarea":_6(t,r);break;case"select":e=r.value,e!=null&&Ad(t,!!r.multiple,e,!1)}};k6=E_;C6=uh;var H7={usingClientEntryPoint:!1,Events:[Gp,hd,Kx,N6,T6,E_]},n0={findFiberByHostInstance:Ku,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$7={bundleType:n0.bundleType,version:n0.version,rendererPackageName:n0.rendererPackageName,rendererConfig:n0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=R6(t),t===null?null:t.stateNode},findFiberByHostInstance:n0.findFiberByHostInstance||V7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sg.isDisabled&&sg.supportsFiber)try{Hx=sg.inject($7),el=sg}catch{}}Da.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H7;Da.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P_(e))throw Error(Nt(200));return U7(t,e,null,r)};Da.createRoot=function(t,e){if(!P_(t))throw Error(Nt(299));var r=!1,n="",i=uC;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=k_(t,1,!1,null,null,r,!1,n,i),t[zl]=e.current,lp(t.nodeType===8?t.parentNode:t),new I_(e)};Da.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Nt(188)):(t=Object.keys(t).join(","),Error(Nt(268,t)));return t=R6(e),t=t===null?null:t.stateNode,t};Da.flushSync=function(t){return uh(t)};Da.hydrate=function(t,e,r){if(!r2(e))throw Error(Nt(200));return n2(null,t,e,!0,r)};Da.hydrateRoot=function(t,e,r){if(!P_(t))throw Error(Nt(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=uC;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=cC(e,null,t,1,r??null,i,!1,s,a),t[zl]=e.current,lp(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new t2(e)};Da.render=function(t,e,r){if(!r2(e))throw Error(Nt(200));return n2(null,t,e,!1,r)};Da.unmountComponentAtNode=function(t){if(!r2(t))throw Error(Nt(40));return t._reactRootContainer?(uh(function(){n2(null,null,t,!1,function(){t._reactRootContainer=null,t[zl]=null})}),!0):!1};Da.unstable_batchedUpdates=E_;Da.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!r2(r))throw Error(Nt(200));if(t==null||t._reactInternals===void 0)throw Error(Nt(38));return n2(t,e,r,!1,n)};Da.version="18.3.1-next-f1338f8080-20240426";function hC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hC)}catch(t){console.error(t)}}hC(),h6.exports=Da;var dC=h6.exports,mE=dC;$v.createRoot=mE.createRoot,$v.hydrateRoot=mE.hydrateRoot;const q7=()=>{};var gE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},W7=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],a=t[r++],o=t[r++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},pC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|o>>4;let p=(o&15)<<2|c>>6,f=c&63;l||(f=64,a||(p=64)),n.push(r[h],r[d],r[p],r[f])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):W7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0;++i;const c=i<t.length?r[t.charAt(i)]:64;++i;const d=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||o==null||c==null||d==null)throw new K7;const p=s<<2|o>>4;if(n.push(p),c!==64){const f=o<<4&240|c>>2;if(n.push(f),d!==64){const v=c<<6&192|d;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class K7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const G7=function(t){const e=fC(t);return pC.encodeByteArray(e,!0)},K1=function(t){return G7(t).replace(/\./g,"")},mC=function(t){try{return pC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=()=>Y7().__FIREBASE_DEFAULTS__,Q7=()=>{if(typeof process>"u"||typeof gE>"u")return;const t=gE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},J7=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mC(t[1]);return e&&JSON.parse(e)},i2=()=>{try{return q7()||X7()||Q7()||J7()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gC=t=>{var e,r;return(r=(e=i2())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},Z7=t=>{const e=gC(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},xC=()=>{var t;return(t=i2())==null?void 0:t.config},yC=t=>{var e;return(e=i2())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eM=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vC(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[K1(JSON.stringify(r)),K1(JSON.stringify(a)),""].join(".")}const L0={};function rM(){const t={prod:[],emulator:[]};for(const e of Object.keys(L0))L0[e]?t.emulator.push(e):t.prod.push(e);return t}function nM(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let xE=!1;function wC(t,e){if(typeof window>"u"||typeof document>"u"||!mf(window.location.host)||L0[t]===e||L0[t]||xE)return;L0[t]=e;function r(p){return`__firebase__banner__${p}`}const n="__firebase__banner",s=rM().prod.length>0;function a(){const p=document.getElementById(n);p&&p.remove()}function o(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,f){p.setAttribute("width","24"),p.setAttribute("id",f),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{xE=!0,a()},p}function h(p,f){p.setAttribute("id",f),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=nM(n),f=r("text"),v=document.getElementById(f)||document.createElement("span"),x=r("learnmore"),_=document.getElementById(x)||document.createElement("a"),w=r("preprendIcon"),S=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const N=p.element;o(N),h(_,x);const j=c();l(S,w),N.append(S,v,_,j),document.body.appendChild(N)}s?(v.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(js())}function sM(){var e;const t=(e=i2())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cM(){const t=js();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uM(){return!sM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hM(){try{return typeof indexedDB=="object"}catch{return!1}}function dM(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="FirebaseError";class ec extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=fM,Object.setPrototypeOf(this,ec.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xp.prototype.create)}}class Xp{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?pM(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new ec(i,o,n)}}function pM(t,e){return t.replace(mM,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const mM=/\{\$([^}]+)}/g;function gM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const s=t[i],a=e[i];if(yE(s)&&yE(a)){if(!hh(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function yE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function xM(t,e){const r=new yM(t,e);return r.subscribe.bind(r)}class yM{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");vM(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=jy),i.error===void 0&&(i.error=jy),i.complete===void 0&&(i.complete=jy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vM(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function jy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){return t&&t._delegate?t._delegate:t}class dh{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new eM;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bM(e))try{this.getOrInitializeService({instanceIdentifier:Uu})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=Uu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Uu){return this.instances.has(e)}getOptions(e=Uu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:_M(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Uu){return this.component?this.component.multipleInstances?e:Uu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _M(t){return t===Uu?void 0:t}function bM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new wM(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xr||(Xr={}));const EM={debug:Xr.DEBUG,verbose:Xr.VERBOSE,info:Xr.INFO,warn:Xr.WARN,error:Xr.ERROR,silent:Xr.SILENT},AM=Xr.INFO,NM={[Xr.DEBUG]:"log",[Xr.VERBOSE]:"log",[Xr.INFO]:"info",[Xr.WARN]:"warn",[Xr.ERROR]:"error"},TM=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=NM[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class R_{constructor(e){this.name=e,this._logLevel=AM,this._logHandler=TM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xr.DEBUG,...e),this._logHandler(this,Xr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xr.VERBOSE,...e),this._logHandler(this,Xr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xr.INFO,...e),this._logHandler(this,Xr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xr.WARN,...e),this._logHandler(this,Xr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xr.ERROR,...e),this._logHandler(this,Xr.ERROR,...e)}}const kM=(t,e)=>e.some(r=>t instanceof r);let vE,wE;function CM(){return vE||(vE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IM(){return wE||(wE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _C=new WeakMap,Mw=new WeakMap,bC=new WeakMap,Fy=new WeakMap,L_=new WeakMap;function PM(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{r(ru(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&_C.set(r,t)}).catch(()=>{}),L_.set(e,t),e}function RM(t){if(Mw.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Mw.set(t,e)}let Ow={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Mw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bC.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ru(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LM(t){Ow=t(Ow)}function jM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Dy(this),e,...r);return bC.set(n,e.sort?e.sort():[e]),ru(n)}:IM().includes(t)?function(...e){return t.apply(Dy(this),e),ru(_C.get(this))}:function(...e){return ru(t.apply(Dy(this),e))}}function FM(t){return typeof t=="function"?jM(t):(t instanceof IDBTransaction&&RM(t),kM(t,CM())?new Proxy(t,Ow):t)}function ru(t){if(t instanceof IDBRequest)return PM(t);if(Fy.has(t))return Fy.get(t);const e=FM(t);return e!==t&&(Fy.set(t,e),L_.set(e,t)),e}const Dy=t=>L_.get(t);function DM(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=ru(a);return n&&a.addEventListener("upgradeneeded",l=>{n(ru(a.result),l.oldVersion,l.newVersion,ru(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const MM=["get","getKey","getAll","getAllKeys","count"],OM=["put","add","delete","clear"],My=new Map;function _E(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(My.get(e))return My.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=OM.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||MM.includes(r)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),i&&l.done]))[0]};return My.set(e,s),s}LM(t=>({...t,get:(e,r,n)=>_E(e,r)||t.get(e,r,n),has:(e,r)=>!!_E(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(UM(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function UM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bw="@firebase/app",bE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new R_("@firebase/app"),VM="@firebase/app-compat",zM="@firebase/analytics-compat",HM="@firebase/analytics",$M="@firebase/app-check-compat",qM="@firebase/app-check",WM="@firebase/auth",KM="@firebase/auth-compat",GM="@firebase/database",YM="@firebase/data-connect",XM="@firebase/database-compat",QM="@firebase/functions",JM="@firebase/functions-compat",ZM="@firebase/installations",eO="@firebase/installations-compat",tO="@firebase/messaging",rO="@firebase/messaging-compat",nO="@firebase/performance",iO="@firebase/performance-compat",sO="@firebase/remote-config",aO="@firebase/remote-config-compat",oO="@firebase/storage",lO="@firebase/storage-compat",cO="@firebase/firestore",uO="@firebase/ai",hO="@firebase/firestore-compat",dO="firebase",fO="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="[DEFAULT]",pO={[Bw]:"fire-core",[VM]:"fire-core-compat",[HM]:"fire-analytics",[zM]:"fire-analytics-compat",[qM]:"fire-app-check",[$M]:"fire-app-check-compat",[WM]:"fire-auth",[KM]:"fire-auth-compat",[GM]:"fire-rtdb",[YM]:"fire-data-connect",[XM]:"fire-rtdb-compat",[QM]:"fire-fn",[JM]:"fire-fn-compat",[ZM]:"fire-iid",[eO]:"fire-iid-compat",[tO]:"fire-fcm",[rO]:"fire-fcm-compat",[nO]:"fire-perf",[iO]:"fire-perf-compat",[sO]:"fire-rc",[aO]:"fire-rc-compat",[oO]:"fire-gcs",[lO]:"fire-gcs-compat",[cO]:"fire-fst",[hO]:"fire-fst-compat",[uO]:"fire-vertex","fire-js":"fire-js",[dO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=new Map,mO=new Map,Vw=new Map;function SE(t,e){try{t.container.addComponent(e)}catch(r){ql.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function tf(t){const e=t.name;if(Vw.has(e))return ql.debug(`There were multiple attempts to register component ${e}.`),!1;Vw.set(e,t);for(const r of G1.values())SE(r,t);for(const r of mO.values())SE(r,t);return!0}function j_(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Eo(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nu=new Xp("app","Firebase",gO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new dh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=fO;function SC(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:Uw,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw nu.create("bad-app-name",{appName:String(i)});if(r||(r=xC()),!r)throw nu.create("no-options");const s=G1.get(i);if(s){if(hh(r,s.options)&&hh(n,s.config))return s;throw nu.create("duplicate-app",{appName:i})}const a=new SM(i);for(const l of Vw.values())a.addComponent(l);const o=new xO(r,n,a);return G1.set(i,o),o}function EC(t=Uw){const e=G1.get(t);if(!e&&t===Uw&&xC())return SC();if(!e)throw nu.create("no-app",{appName:t});return e}function iu(t,e,r){let n=pO[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${n}" with version "${e}":`];i&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ql.warn(a.join(" "));return}tf(new dh(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO="firebase-heartbeat-database",vO=1,xp="firebase-heartbeat-store";let Oy=null;function AC(){return Oy||(Oy=DM(yO,vO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xp)}catch(r){console.warn(r)}}}}).catch(t=>{throw nu.create("idb-open",{originalErrorMessage:t.message})})),Oy}async function wO(t){try{const r=(await AC()).transaction(xp),n=await r.objectStore(xp).get(NC(t));return await r.done,n}catch(e){if(e instanceof ec)ql.warn(e.message);else{const r=nu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ql.warn(r.message)}}}async function EE(t,e){try{const n=(await AC()).transaction(xp,"readwrite");await n.objectStore(xp).put(e,NC(t)),await n.done}catch(r){if(r instanceof ec)ql.warn(r.message);else{const n=nu.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ql.warn(n.message)}}}function NC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=1024,bO=30;class SO{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new AO(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=AE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>bO){const a=NO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ql.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=AE(),{heartbeatsToSend:n,unsentEntries:i}=EO(this._heartbeatsCache.heartbeats),s=K1(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return ql.warn(r),""}}}function AE(){return new Date().toISOString().substring(0,10)}function EO(t,e=_O){const r=[];let n=t.slice();for(const i of t){const s=r.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),NE(r)>e){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),NE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class AO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hM()?dM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await wO(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return EE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return EE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function NE(t){return K1(JSON.stringify({version:2,heartbeats:t})).length}function NO(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){tf(new dh("platform-logger",e=>new BM(e),"PRIVATE")),tf(new dh("heartbeat",e=>new SO(e),"PRIVATE")),iu(Bw,bE,t),iu(Bw,bE,"esm2020"),iu("fire-js","")}TO("");var kO="firebase",CO="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */iu(kO,CO,"app");var TE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var su,TC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,T){function A(){}A.prototype=T.prototype,b.F=T.prototype,b.prototype=new A,b.prototype.constructor=b,b.D=function(F,k,L){for(var R=Array(arguments.length-2),le=2;le<arguments.length;le++)R[le-2]=arguments[le];return T.prototype[k].apply(F,R)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,T,A){A||(A=0);const F=Array(16);if(typeof T=="string")for(var k=0;k<16;++k)F[k]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(k=0;k<16;++k)F[k]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=b.g[0],A=b.g[1],k=b.g[2];let L=b.g[3],R;R=T+(L^A&(k^L))+F[0]+3614090360&4294967295,T=A+(R<<7&4294967295|R>>>25),R=L+(k^T&(A^k))+F[1]+3905402710&4294967295,L=T+(R<<12&4294967295|R>>>20),R=k+(A^L&(T^A))+F[2]+606105819&4294967295,k=L+(R<<17&4294967295|R>>>15),R=A+(T^k&(L^T))+F[3]+3250441966&4294967295,A=k+(R<<22&4294967295|R>>>10),R=T+(L^A&(k^L))+F[4]+4118548399&4294967295,T=A+(R<<7&4294967295|R>>>25),R=L+(k^T&(A^k))+F[5]+1200080426&4294967295,L=T+(R<<12&4294967295|R>>>20),R=k+(A^L&(T^A))+F[6]+2821735955&4294967295,k=L+(R<<17&4294967295|R>>>15),R=A+(T^k&(L^T))+F[7]+4249261313&4294967295,A=k+(R<<22&4294967295|R>>>10),R=T+(L^A&(k^L))+F[8]+1770035416&4294967295,T=A+(R<<7&4294967295|R>>>25),R=L+(k^T&(A^k))+F[9]+2336552879&4294967295,L=T+(R<<12&4294967295|R>>>20),R=k+(A^L&(T^A))+F[10]+4294925233&4294967295,k=L+(R<<17&4294967295|R>>>15),R=A+(T^k&(L^T))+F[11]+2304563134&4294967295,A=k+(R<<22&4294967295|R>>>10),R=T+(L^A&(k^L))+F[12]+1804603682&4294967295,T=A+(R<<7&4294967295|R>>>25),R=L+(k^T&(A^k))+F[13]+4254626195&4294967295,L=T+(R<<12&4294967295|R>>>20),R=k+(A^L&(T^A))+F[14]+2792965006&4294967295,k=L+(R<<17&4294967295|R>>>15),R=A+(T^k&(L^T))+F[15]+1236535329&4294967295,A=k+(R<<22&4294967295|R>>>10),R=T+(k^L&(A^k))+F[1]+4129170786&4294967295,T=A+(R<<5&4294967295|R>>>27),R=L+(A^k&(T^A))+F[6]+3225465664&4294967295,L=T+(R<<9&4294967295|R>>>23),R=k+(T^A&(L^T))+F[11]+643717713&4294967295,k=L+(R<<14&4294967295|R>>>18),R=A+(L^T&(k^L))+F[0]+3921069994&4294967295,A=k+(R<<20&4294967295|R>>>12),R=T+(k^L&(A^k))+F[5]+3593408605&4294967295,T=A+(R<<5&4294967295|R>>>27),R=L+(A^k&(T^A))+F[10]+38016083&4294967295,L=T+(R<<9&4294967295|R>>>23),R=k+(T^A&(L^T))+F[15]+3634488961&4294967295,k=L+(R<<14&4294967295|R>>>18),R=A+(L^T&(k^L))+F[4]+3889429448&4294967295,A=k+(R<<20&4294967295|R>>>12),R=T+(k^L&(A^k))+F[9]+568446438&4294967295,T=A+(R<<5&4294967295|R>>>27),R=L+(A^k&(T^A))+F[14]+3275163606&4294967295,L=T+(R<<9&4294967295|R>>>23),R=k+(T^A&(L^T))+F[3]+4107603335&4294967295,k=L+(R<<14&4294967295|R>>>18),R=A+(L^T&(k^L))+F[8]+1163531501&4294967295,A=k+(R<<20&4294967295|R>>>12),R=T+(k^L&(A^k))+F[13]+2850285829&4294967295,T=A+(R<<5&4294967295|R>>>27),R=L+(A^k&(T^A))+F[2]+4243563512&4294967295,L=T+(R<<9&4294967295|R>>>23),R=k+(T^A&(L^T))+F[7]+1735328473&4294967295,k=L+(R<<14&4294967295|R>>>18),R=A+(L^T&(k^L))+F[12]+2368359562&4294967295,A=k+(R<<20&4294967295|R>>>12),R=T+(A^k^L)+F[5]+4294588738&4294967295,T=A+(R<<4&4294967295|R>>>28),R=L+(T^A^k)+F[8]+2272392833&4294967295,L=T+(R<<11&4294967295|R>>>21),R=k+(L^T^A)+F[11]+1839030562&4294967295,k=L+(R<<16&4294967295|R>>>16),R=A+(k^L^T)+F[14]+4259657740&4294967295,A=k+(R<<23&4294967295|R>>>9),R=T+(A^k^L)+F[1]+2763975236&4294967295,T=A+(R<<4&4294967295|R>>>28),R=L+(T^A^k)+F[4]+1272893353&4294967295,L=T+(R<<11&4294967295|R>>>21),R=k+(L^T^A)+F[7]+4139469664&4294967295,k=L+(R<<16&4294967295|R>>>16),R=A+(k^L^T)+F[10]+3200236656&4294967295,A=k+(R<<23&4294967295|R>>>9),R=T+(A^k^L)+F[13]+681279174&4294967295,T=A+(R<<4&4294967295|R>>>28),R=L+(T^A^k)+F[0]+3936430074&4294967295,L=T+(R<<11&4294967295|R>>>21),R=k+(L^T^A)+F[3]+3572445317&4294967295,k=L+(R<<16&4294967295|R>>>16),R=A+(k^L^T)+F[6]+76029189&4294967295,A=k+(R<<23&4294967295|R>>>9),R=T+(A^k^L)+F[9]+3654602809&4294967295,T=A+(R<<4&4294967295|R>>>28),R=L+(T^A^k)+F[12]+3873151461&4294967295,L=T+(R<<11&4294967295|R>>>21),R=k+(L^T^A)+F[15]+530742520&4294967295,k=L+(R<<16&4294967295|R>>>16),R=A+(k^L^T)+F[2]+3299628645&4294967295,A=k+(R<<23&4294967295|R>>>9),R=T+(k^(A|~L))+F[0]+4096336452&4294967295,T=A+(R<<6&4294967295|R>>>26),R=L+(A^(T|~k))+F[7]+1126891415&4294967295,L=T+(R<<10&4294967295|R>>>22),R=k+(T^(L|~A))+F[14]+2878612391&4294967295,k=L+(R<<15&4294967295|R>>>17),R=A+(L^(k|~T))+F[5]+4237533241&4294967295,A=k+(R<<21&4294967295|R>>>11),R=T+(k^(A|~L))+F[12]+1700485571&4294967295,T=A+(R<<6&4294967295|R>>>26),R=L+(A^(T|~k))+F[3]+2399980690&4294967295,L=T+(R<<10&4294967295|R>>>22),R=k+(T^(L|~A))+F[10]+4293915773&4294967295,k=L+(R<<15&4294967295|R>>>17),R=A+(L^(k|~T))+F[1]+2240044497&4294967295,A=k+(R<<21&4294967295|R>>>11),R=T+(k^(A|~L))+F[8]+1873313359&4294967295,T=A+(R<<6&4294967295|R>>>26),R=L+(A^(T|~k))+F[15]+4264355552&4294967295,L=T+(R<<10&4294967295|R>>>22),R=k+(T^(L|~A))+F[6]+2734768916&4294967295,k=L+(R<<15&4294967295|R>>>17),R=A+(L^(k|~T))+F[13]+1309151649&4294967295,A=k+(R<<21&4294967295|R>>>11),R=T+(k^(A|~L))+F[4]+4149444226&4294967295,T=A+(R<<6&4294967295|R>>>26),R=L+(A^(T|~k))+F[11]+3174756917&4294967295,L=T+(R<<10&4294967295|R>>>22),R=k+(T^(L|~A))+F[2]+718787259&4294967295,k=L+(R<<15&4294967295|R>>>17),R=A+(L^(k|~T))+F[9]+3951481745&4294967295,b.g[0]=b.g[0]+T&4294967295,b.g[1]=b.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,b.g[2]=b.g[2]+k&4294967295,b.g[3]=b.g[3]+L&4294967295}n.prototype.v=function(b,T){T===void 0&&(T=b.length);const A=T-this.blockSize,F=this.C;let k=this.h,L=0;for(;L<T;){if(k==0)for(;L<=A;)i(this,b,L),L+=this.blockSize;if(typeof b=="string"){for(;L<T;)if(F[k++]=b.charCodeAt(L++),k==this.blockSize){i(this,F),k=0;break}}else for(;L<T;)if(F[k++]=b[L++],k==this.blockSize){i(this,F),k=0;break}}this.h=k,this.o+=T},n.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var T=1;T<b.length-8;++T)b[T]=0;T=this.o*8;for(var A=b.length-8;A<b.length;++A)b[A]=T&255,T/=256;for(this.v(b),b=Array(16),T=0,A=0;A<4;++A)for(let F=0;F<32;F+=8)b[T++]=this.g[A]>>>F&255;return b};function s(b,T){var A=o;return Object.prototype.hasOwnProperty.call(A,b)?A[b]:A[b]=T(b)}function a(b,T){this.h=T;const A=[];let F=!0;for(let k=b.length-1;k>=0;k--){const L=b[k]|0;F&&L==T||(A[k]=L,F=!1)}this.g=A}var o={};function l(b){return-128<=b&&b<128?s(b,function(T){return new a([T|0],T<0?-1:0)}):new a([b|0],b<0?-1:0)}function c(b){if(isNaN(b)||!isFinite(b))return d;if(b<0)return _(c(-b));const T=[];let A=1;for(let F=0;b>=A;F++)T[F]=b/A|0,A*=4294967296;return new a(T,0)}function h(b,T){if(b.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(b.charAt(0)=="-")return _(h(b.substring(1),T));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=c(Math.pow(T,8));let F=d;for(let L=0;L<b.length;L+=8){var k=Math.min(8,b.length-L);const R=parseInt(b.substring(L,L+k),T);k<8?(k=c(Math.pow(T,k)),F=F.j(k).add(c(R))):(F=F.j(A),F=F.add(c(R)))}return F}var d=l(0),p=l(1),f=l(16777216);t=a.prototype,t.m=function(){if(x(this))return-_(this).m();let b=0,T=1;for(let A=0;A<this.g.length;A++){const F=this.i(A);b+=(F>=0?F:4294967296+F)*T,T*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(v(this))return"0";if(x(this))return"-"+_(this).toString(b);const T=c(Math.pow(b,6));var A=this;let F="";for(;;){const k=j(A,T).g;A=w(A,k.j(T));let L=((A.g.length>0?A.g[0]:A.h)>>>0).toString(b);if(A=k,v(A))return L+F;for(;L.length<6;)L="0"+L;F=L+F}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function v(b){if(b.h!=0)return!1;for(let T=0;T<b.g.length;T++)if(b.g[T]!=0)return!1;return!0}function x(b){return b.h==-1}t.l=function(b){return b=w(this,b),x(b)?-1:v(b)?0:1};function _(b){const T=b.g.length,A=[];for(let F=0;F<T;F++)A[F]=~b.g[F];return new a(A,~b.h).add(p)}t.abs=function(){return x(this)?_(this):this},t.add=function(b){const T=Math.max(this.g.length,b.g.length),A=[];let F=0;for(let k=0;k<=T;k++){let L=F+(this.i(k)&65535)+(b.i(k)&65535),R=(L>>>16)+(this.i(k)>>>16)+(b.i(k)>>>16);F=R>>>16,L&=65535,R&=65535,A[k]=R<<16|L}return new a(A,A[A.length-1]&-2147483648?-1:0)};function w(b,T){return b.add(_(T))}t.j=function(b){if(v(this)||v(b))return d;if(x(this))return x(b)?_(this).j(_(b)):_(_(this).j(b));if(x(b))return _(this.j(_(b)));if(this.l(f)<0&&b.l(f)<0)return c(this.m()*b.m());const T=this.g.length+b.g.length,A=[];for(var F=0;F<2*T;F++)A[F]=0;for(F=0;F<this.g.length;F++)for(let k=0;k<b.g.length;k++){const L=this.i(F)>>>16,R=this.i(F)&65535,le=b.i(k)>>>16,ve=b.i(k)&65535;A[2*F+2*k]+=R*ve,S(A,2*F+2*k),A[2*F+2*k+1]+=L*ve,S(A,2*F+2*k+1),A[2*F+2*k+1]+=R*le,S(A,2*F+2*k+1),A[2*F+2*k+2]+=L*le,S(A,2*F+2*k+2)}for(b=0;b<T;b++)A[b]=A[2*b+1]<<16|A[2*b];for(b=T;b<2*T;b++)A[b]=0;return new a(A,0)};function S(b,T){for(;(b[T]&65535)!=b[T];)b[T+1]+=b[T]>>>16,b[T]&=65535,T++}function N(b,T){this.g=b,this.h=T}function j(b,T){if(v(T))throw Error("division by zero");if(v(b))return new N(d,d);if(x(b))return T=j(_(b),T),new N(_(T.g),_(T.h));if(x(T))return T=j(b,_(T)),new N(_(T.g),T.h);if(b.g.length>30){if(x(b)||x(T))throw Error("slowDivide_ only works with positive integers.");for(var A=p,F=T;F.l(b)<=0;)A=z(A),F=z(F);var k=W(A,1),L=W(F,1);for(F=W(F,2),A=W(A,2);!v(F);){var R=L.add(F);R.l(b)<=0&&(k=k.add(A),L=R),F=W(F,1),A=W(A,1)}return T=w(b,k.j(T)),new N(k,T)}for(k=d;b.l(T)>=0;){for(A=Math.max(1,Math.floor(b.m()/T.m())),F=Math.ceil(Math.log(A)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),L=c(A),R=L.j(T);x(R)||R.l(b)>0;)A-=F,L=c(A),R=L.j(T);v(L)&&(L=p),k=k.add(L),b=w(b,R)}return new N(k,b)}t.B=function(b){return j(this,b).h},t.and=function(b){const T=Math.max(this.g.length,b.g.length),A=[];for(let F=0;F<T;F++)A[F]=this.i(F)&b.i(F);return new a(A,this.h&b.h)},t.or=function(b){const T=Math.max(this.g.length,b.g.length),A=[];for(let F=0;F<T;F++)A[F]=this.i(F)|b.i(F);return new a(A,this.h|b.h)},t.xor=function(b){const T=Math.max(this.g.length,b.g.length),A=[];for(let F=0;F<T;F++)A[F]=this.i(F)^b.i(F);return new a(A,this.h^b.h)};function z(b){const T=b.g.length+1,A=[];for(let F=0;F<T;F++)A[F]=b.i(F)<<1|b.i(F-1)>>>31;return new a(A,b.h)}function W(b,T){const A=T>>5;T%=32;const F=b.g.length-A,k=[];for(let L=0;L<F;L++)k[L]=T>0?b.i(L+A)>>>T|b.i(L+A+1)<<32-T:b.i(L+A);return new a(k,b.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,TC=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,su=a}).apply(typeof TE<"u"?TE:typeof self<"u"?self:typeof window<"u"?window:{});var ag=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kC,x0,CC,t1,zw,IC,PC,RC;(function(){var t,e=Object.defineProperty;function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof ag=="object"&&ag];for(var P=0;P<g.length;++P){var M=g[P];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var n=r(this);function i(g,P){if(P)e:{var M=n;g=g.split(".");for(var se=0;se<g.length-1;se++){var ze=g[se];if(!(ze in M))break e;M=M[ze]}g=g[g.length-1],se=M[g],P=P(se),P!=se&&P!=null&&e(M,g,{configurable:!0,writable:!0,value:P})}}i("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(g){return g||function(P){var M=[],se;for(se in P)Object.prototype.hasOwnProperty.call(P,se)&&M.push([se,P[se]]);return M}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(g){var P=typeof g;return P=="object"&&g!=null||P=="function"}function l(g,P,M){return g.call.apply(g.bind,arguments)}function c(g,P,M){return c=l,c.apply(null,arguments)}function h(g,P){var M=Array.prototype.slice.call(arguments,1);return function(){var se=M.slice();return se.push.apply(se,arguments),g.apply(this,se)}}function d(g,P){function M(){}M.prototype=P.prototype,g.Z=P.prototype,g.prototype=new M,g.prototype.constructor=g,g.Ob=function(se,ze,Xe){for(var Ct=Array(arguments.length-2),Nr=2;Nr<arguments.length;Nr++)Ct[Nr-2]=arguments[Nr];return P.prototype[ze].apply(se,Ct)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function f(g){const P=g.length;if(P>0){const M=Array(P);for(let se=0;se<P;se++)M[se]=g[se];return M}return[]}function v(g,P){for(let se=1;se<arguments.length;se++){const ze=arguments[se];var M=typeof ze;if(M=M!="object"?M:ze?Array.isArray(ze)?"array":M:"null",M=="array"||M=="object"&&typeof ze.length=="number"){M=g.length||0;const Xe=ze.length||0;g.length=M+Xe;for(let Ct=0;Ct<Xe;Ct++)g[M+Ct]=ze[Ct]}else g.push(ze)}}class x{constructor(P,M){this.i=P,this.j=M,this.h=0,this.g=null}get(){let P;return this.h>0?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function _(g){a.setTimeout(()=>{throw g},0)}function w(){var g=b;let P=null;return g.g&&(P=g.g,g.g=g.g.next,g.g||(g.h=null),P.next=null),P}class S{constructor(){this.h=this.g=null}add(P,M){const se=N.get();se.set(P,M),this.h?this.h.next=se:this.g=se,this.h=se}}var N=new x(()=>new j,g=>g.reset());class j{constructor(){this.next=this.g=this.h=null}set(P,M){this.h=P,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let z,W=!1,b=new S,T=()=>{const g=Promise.resolve(void 0);z=()=>{g.then(A)}};function A(){for(var g;g=w();){try{g.h.call(g.g)}catch(M){_(M)}var P=N;P.j(g),P.h<100&&(P.h++,g.next=P.g,P.g=g)}W=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(g,P){this.type=g,this.g=this.target=P,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var g=!1,P=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const M=()=>{};a.addEventListener("test",M,P),a.removeEventListener("test",M,P)}catch{}return g}();function R(g){return/^[\s\xa0]*$/.test(g)}function le(g,P){k.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,P)}d(le,k),le.prototype.init=function(g,P){const M=this.type=g.type,se=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=P,P=g.relatedTarget,P||(M=="mouseover"?P=g.fromElement:M=="mouseout"&&(P=g.toElement)),this.relatedTarget=P,se?(this.clientX=se.clientX!==void 0?se.clientX:se.pageX,this.clientY=se.clientY!==void 0?se.clientY:se.pageY,this.screenX=se.screenX||0,this.screenY=se.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&le.Z.h.call(this)},le.prototype.h=function(){le.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ve="closure_listenable_"+(Math.random()*1e6|0),ge=0;function ye(g,P,M,se,ze){this.listener=g,this.proxy=null,this.src=P,this.type=M,this.capture=!!se,this.ha=ze,this.key=++ge,this.da=this.fa=!1}function ce(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function be(g,P,M){for(const se in g)P.call(M,g[se],se,g)}function Me(g,P){for(const M in g)P.call(void 0,g[M],M,g)}function Le(g){const P={};for(const M in g)P[M]=g[M];return P}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(g,P){let M,se;for(let ze=1;ze<arguments.length;ze++){se=arguments[ze];for(M in se)g[M]=se[M];for(let Xe=0;Xe<I.length;Xe++)M=I[Xe],Object.prototype.hasOwnProperty.call(se,M)&&(g[M]=se[M])}}function U(g){this.src=g,this.g={},this.h=0}U.prototype.add=function(g,P,M,se,ze){const Xe=g.toString();g=this.g[Xe],g||(g=this.g[Xe]=[],this.h++);const Ct=te(g,P,se,ze);return Ct>-1?(P=g[Ct],M||(P.fa=!1)):(P=new ye(P,this.src,Xe,!!se,ze),P.fa=M,g.push(P)),P};function H(g,P){const M=P.type;if(M in g.g){var se=g.g[M],ze=Array.prototype.indexOf.call(se,P,void 0),Xe;(Xe=ze>=0)&&Array.prototype.splice.call(se,ze,1),Xe&&(ce(P),g.g[M].length==0&&(delete g.g[M],g.h--))}}function te(g,P,M,se){for(let ze=0;ze<g.length;++ze){const Xe=g[ze];if(!Xe.da&&Xe.listener==P&&Xe.capture==!!M&&Xe.ha==se)return ze}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),Ae={};function Te(g,P,M,se,ze){if(Array.isArray(P)){for(let Xe=0;Xe<P.length;Xe++)Te(g,P[Xe],M,se,ze);return null}return M=we(M),g&&g[ve]?g.J(P,M,o(se)?!!se.capture:!1,ze):Pe(g,P,M,!1,se,ze)}function Pe(g,P,M,se,ze,Xe){if(!P)throw Error("Invalid event type");const Ct=o(ze)?!!ze.capture:!!ze;let Nr=Ie(g);if(Nr||(g[fe]=Nr=new U(g)),M=Nr.add(P,M,se,Ct,Xe),M.proxy)return M;if(se=et(),M.proxy=se,se.src=g,se.listener=M,g.addEventListener)L||(ze=Ct),ze===void 0&&(ze=!1),g.addEventListener(P.toString(),se,ze);else if(g.attachEvent)g.attachEvent(wt(P.toString()),se);else if(g.addListener&&g.removeListener)g.addListener(se);else throw Error("addEventListener and attachEvent are unavailable.");return M}function et(){function g(M){return P.call(g.src,g.listener,M)}const P=ae;return g}function Qe(g,P,M,se,ze){if(Array.isArray(P))for(var Xe=0;Xe<P.length;Xe++)Qe(g,P[Xe],M,se,ze);else se=o(se)?!!se.capture:!!se,M=we(M),g&&g[ve]?(g=g.i,Xe=String(P).toString(),Xe in g.g&&(P=g.g[Xe],M=te(P,M,se,ze),M>-1&&(ce(P[M]),Array.prototype.splice.call(P,M,1),P.length==0&&(delete g.g[Xe],g.h--)))):g&&(g=Ie(g))&&(P=g.g[P.toString()],g=-1,P&&(g=te(P,M,se,ze)),(M=g>-1?P[g]:null)&&dt(M))}function dt(g){if(typeof g!="number"&&g&&!g.da){var P=g.src;if(P&&P[ve])H(P.i,g);else{var M=g.type,se=g.proxy;P.removeEventListener?P.removeEventListener(M,se,g.capture):P.detachEvent?P.detachEvent(wt(M),se):P.addListener&&P.removeListener&&P.removeListener(se),(M=Ie(P))?(H(M,g),M.h==0&&(M.src=null,P[fe]=null)):ce(g)}}}function wt(g){return g in Ae?Ae[g]:Ae[g]="on"+g}function ae(g,P){if(g.da)g=!0;else{P=new le(P,this);const M=g.listener,se=g.ha||g.src;g.fa&&dt(g),g=M.call(se,P)}return g}function Ie(g){return g=g[fe],g instanceof U?g:null}var ne="__closure_events_fn_"+(Math.random()*1e9>>>0);function we(g){return typeof g=="function"?g:(g[ne]||(g[ne]=function(P){return g.handleEvent(P)}),g[ne])}function me(){F.call(this),this.i=new U(this),this.M=this,this.G=null}d(me,F),me.prototype[ve]=!0,me.prototype.removeEventListener=function(g,P,M,se){Qe(this,g,P,M,se)};function Ke(g,P){var M,se=g.G;if(se)for(M=[];se;se=se.G)M.push(se);if(g=g.M,se=P.type||P,typeof P=="string")P=new k(P,g);else if(P instanceof k)P.target=P.target||g;else{var ze=P;P=new k(se,g),B(P,ze)}ze=!0;let Xe,Ct;if(M)for(Ct=M.length-1;Ct>=0;Ct--)Xe=P.g=M[Ct],ze=Je(Xe,se,!0,P)&&ze;if(Xe=P.g=g,ze=Je(Xe,se,!0,P)&&ze,ze=Je(Xe,se,!1,P)&&ze,M)for(Ct=0;Ct<M.length;Ct++)Xe=P.g=M[Ct],ze=Je(Xe,se,!1,P)&&ze}me.prototype.N=function(){if(me.Z.N.call(this),this.i){var g=this.i;for(const P in g.g){const M=g.g[P];for(let se=0;se<M.length;se++)ce(M[se]);delete g.g[P],g.h--}}this.G=null},me.prototype.J=function(g,P,M,se){return this.i.add(String(g),P,!1,M,se)},me.prototype.K=function(g,P,M,se){return this.i.add(String(g),P,!0,M,se)};function Je(g,P,M,se){if(P=g.i.g[String(P)],!P)return!0;P=P.concat();let ze=!0;for(let Xe=0;Xe<P.length;++Xe){const Ct=P[Xe];if(Ct&&!Ct.da&&Ct.capture==M){const Nr=Ct.listener,Mn=Ct.ha||Ct.src;Ct.fa&&H(g.i,Ct),ze=Nr.call(Mn,se)!==!1&&ze}}return ze&&!se.defaultPrevented}function ct(g,P){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=c(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(P)>2147483647?-1:a.setTimeout(g,P||0)}function Et(g){g.g=ct(()=>{g.g=null,g.i&&(g.i=!1,Et(g))},g.l);const P=g.h;g.h=null,g.m.apply(null,P)}class Bt extends F{constructor(P,M){super(),this.m=P,this.l=M,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:Et(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ee(g){F.call(this),this.h=g,this.g={}}d(Ee,F);var it=[];function mt(g){be(g.g,function(P,M){this.g.hasOwnProperty(M)&&dt(P)},g),g.g={}}Ee.prototype.N=function(){Ee.Z.N.call(this),mt(this)},Ee.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bt=a.JSON.stringify,Rt=a.JSON.parse,Ot=class{stringify(g){return a.JSON.stringify(g,void 0)}parse(g){return a.JSON.parse(g,void 0)}};function Vt(){}function Vr(){}var mr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qe(){k.call(this,"d")}d(qe,k);function Ft(){k.call(this,"c")}d(Ft,k);var wr={},Gt=null;function Rr(){return Gt=Gt||new me}wr.Ia="serverreachability";function rr(g){k.call(this,wr.Ia,g)}d(rr,k);function Zt(g){const P=Rr();Ke(P,new rr(P))}wr.STAT_EVENT="statevent";function zr(g,P){k.call(this,wr.STAT_EVENT,g),this.stat=P}d(zr,k);function $t(g){const P=Rr();Ke(P,new zr(P,g))}wr.Ja="timingevent";function Ze(g,P){k.call(this,wr.Ja,g),this.size=P}d(Ze,k);function It(g,P){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){g()},P)}function cn(){this.g=!0}cn.prototype.ua=function(){this.g=!1};function kr(g,P,M,se,ze,Xe){g.info(function(){if(g.g)if(Xe){var Ct="",Nr=Xe.split("&");for(let Gr=0;Gr<Nr.length;Gr++){var Mn=Nr[Gr].split("=");if(Mn.length>1){const On=Mn[0];Mn=Mn[1];const Hi=On.split("_");Ct=Hi.length>=2&&Hi[1]=="type"?Ct+(On+"="+Mn+"&"):Ct+(On+"=redacted&")}}}else Ct=null;else Ct=Xe;return"XMLHTTP REQ ("+se+") [attempt "+ze+"]: "+P+`
`+M+`
`+Ct})}function vr(g,P,M,se,ze,Xe,Ct){g.info(function(){return"XMLHTTP RESP ("+se+") [ attempt "+ze+"]: "+P+`
`+M+`
`+Xe+" "+Ct})}function dn(g,P,M,se){g.info(function(){return"XMLHTTP TEXT ("+P+"): "+zn(g,M)+(se?" "+se:"")})}function nr(g,P){g.info(function(){return"TIMEOUT: "+P})}cn.prototype.info=function(){};function zn(g,P){if(!g.g)return P;if(!P)return null;try{const Xe=JSON.parse(P);if(Xe){for(g=0;g<Xe.length;g++)if(Array.isArray(Xe[g])){var M=Xe[g];if(!(M.length<2)){var se=M[1];if(Array.isArray(se)&&!(se.length<1)){var ze=se[0];if(ze!="noop"&&ze!="stop"&&ze!="close")for(let Ct=1;Ct<se.length;Ct++)se[Ct]=""}}}}return bt(Xe)}catch{return P}}var on={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xe={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Re;function Ve(){}d(Ve,Vt),Ve.prototype.g=function(){return new XMLHttpRequest},Re=new Ve;function tt(g){return encodeURIComponent(String(g))}function O(g){var P=1;g=g.split(":");const M=[];for(;P>0&&g.length;)M.push(g.shift()),P--;return g.length&&M.push(g.join(":")),M}function Z(g,P,M,se){this.j=g,this.i=P,this.l=M,this.S=se||1,this.V=new Ee(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new G}function G(){this.i=null,this.g="",this.h=!1}var Y={},ee={};function re(g,P,M){g.M=1,g.A=Oa(Sr(P)),g.u=M,g.R=!0,ke(g,null)}function ke(g,P){g.F=Date.now(),Oe(g),g.B=Sr(g.A);var M=g.B,se=g.S;Array.isArray(se)||(se=[String(se)]),sc(M.i,"t",se),g.C=0,M=g.j.L,g.h=new G,g.g=Ut(g.j,M?P:null,!g.u),g.P>0&&(g.O=new Bt(c(g.Y,g,g.g),g.P)),P=g.V,M=g.g,se=g.ba;var ze="readystatechange";Array.isArray(ze)||(ze&&(it[0]=ze.toString()),ze=it);for(let Xe=0;Xe<ze.length;Xe++){const Ct=Te(M,ze[Xe],se||P.handleEvent,!1,P.h||P);if(!Ct)break;P.g[Ct.key]=Ct}P=g.J?Le(g.J):{},g.u?(g.v||(g.v="POST"),P["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,P)):(g.v="GET",g.g.ea(g.B,g.v,null,P)),Zt(),kr(g.i,g.v,g.B,g.l,g.S,g.u)}Z.prototype.ba=function(g){g=g.target;const P=this.O;P&&qt(g)==3?P.j():this.Y(g)},Z.prototype.Y=function(g){try{if(g==this.g)e:{const Nr=qt(this.g),Mn=this.g.ya(),Gr=this.g.ca();if(!(Nr<3)&&(Nr!=3||this.g&&(this.h.h||this.g.la()||yt(this.g)))){this.K||Nr!=4||Mn==7||(Mn==8||Gr<=0?Zt(3):Zt(2)),pt(this);var P=this.g.ca();this.X=P;var M=pe(this);if(this.o=P==200,vr(this.i,this.v,this.B,this.l,this.S,Nr,P),this.o){if(this.U&&!this.L){t:{if(this.g){var se,ze=this.g;if((se=ze.g?ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(se)){var Xe=se;break t}}Xe=null}if(g=Xe)dn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,At(this,g);else{this.o=!1,this.m=3,$t(12),ft(this),gt(this);break e}}if(this.R){g=!0;let On;for(;!this.K&&this.C<M.length;)if(On=je(this,M),On==ee){Nr==4&&(this.m=4,$t(14),g=!1),dn(this.i,this.l,null,"[Incomplete Response]");break}else if(On==Y){this.m=4,$t(15),dn(this.i,this.l,M,"[Invalid Chunk]"),g=!1;break}else dn(this.i,this.l,On,null),At(this,On);if(Ne(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nr!=4||M.length!=0||this.h.h||(this.m=1,$t(16),g=!1),this.o=this.o&&g,!g)dn(this.i,this.l,M,"[Invalid Chunked Response]"),ft(this),gt(this);else if(M.length>0&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.aa&&!Ct.P&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),ai(Ct),Ct.P=!0,$t(11))}}else dn(this.i,this.l,M,null),At(this,M);Nr==4&&ft(this),this.o&&!this.K&&(Nr==4?ue(this.j,this):(this.o=!1,Oe(this)))}else hr(this.g),P==400&&M.indexOf("Unknown SID")>0?(this.m=3,$t(12)):(this.m=0,$t(13)),ft(this),gt(this)}}}catch{}finally{}};function pe(g){if(!Ne(g))return g.g.la();const P=yt(g.g);if(P==="")return"";let M="";const se=P.length,ze=qt(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return ft(g),gt(g),"";g.h.i=new a.TextDecoder}for(let Xe=0;Xe<se;Xe++)g.h.h=!0,M+=g.h.i.decode(P[Xe],{stream:!(ze&&Xe==se-1)});return P.length=0,g.h.g+=M,g.C=0,g.h.g}function Ne(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function je(g,P){var M=g.C,se=P.indexOf(`
`,M);return se==-1?ee:(M=Number(P.substring(M,se)),isNaN(M)?Y:(se+=1,se+M>P.length?ee:(P=P.slice(se,se+M),g.C=se+M,P)))}Z.prototype.cancel=function(){this.K=!0,ft(this)};function Oe(g){g.T=Date.now()+g.H,st(g,g.H)}function st(g,P){if(g.D!=null)throw Error("WatchDog timer not null");g.D=It(c(g.aa,g),P)}function pt(g){g.D&&(a.clearTimeout(g.D),g.D=null)}Z.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(nr(this.i,this.B),this.M!=2&&(Zt(),$t(17)),ft(this),this.m=2,gt(this)):st(this,this.T-g)};function gt(g){g.j.I==0||g.K||ue(g.j,g)}function ft(g){pt(g);var P=g.O;P&&typeof P.dispose=="function"&&P.dispose(),g.O=null,mt(g.V),g.g&&(P=g.g,g.g=null,P.abort(),P.dispose())}function At(g,P){try{var M=g.j;if(M.I!=0&&(M.g==g||mn(M.h,g))){if(!g.L&&mn(M.h,g)&&M.I==3){try{var se=M.Ba.g.parse(P)}catch{se=null}if(Array.isArray(se)&&se.length==3){var ze=se;if(ze[0]==0){e:if(!M.v){if(M.g)if(M.g.F+3e3<g.F)V(M),qr(M);else break e;dr(M),$t(18)}}else M.xa=ze[1],0<M.xa-M.K&&ze[2]<37500&&M.F&&M.A==0&&!M.C&&(M.C=It(c(M.Va,M),6e3));en(M.h)<=1&&M.ta&&(M.ta=void 0)}else Be(M,11)}else if((g.L||M.g==g)&&V(M),!R(P))for(ze=M.Ba.g.parse(P),P=0;P<ze.length;P++){let Gr=ze[P];const On=Gr[0];if(!(On<=M.K))if(M.K=On,Gr=Gr[1],M.I==2)if(Gr[0]=="c"){M.M=Gr[1],M.ba=Gr[2];const Hi=Gr[3];Hi!=null&&(M.ka=Hi,M.j.info("VER="+M.ka));const xs=Gr[4];xs!=null&&(M.za=xs,M.j.info("SVER="+M.za));const Bn=Gr[5];Bn!=null&&typeof Bn=="number"&&Bn>0&&(se=1.5*Bn,M.O=se,M.j.info("backChannelRequestTimeoutMs_="+se)),se=M;const ys=g.g;if(ys){const Ha=ys.g?ys.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ha){var Xe=se.h;Xe.g||Ha.indexOf("spdy")==-1&&Ha.indexOf("quic")==-1&&Ha.indexOf("h2")==-1||(Xe.j=Xe.l,Xe.g=new Set,Xe.h&&(gn(Xe,Xe.h),Xe.h=null))}if(se.G){const gl=ys.g?ys.g.getResponseHeader("X-HTTP-Session-Id"):null;gl&&(se.wa=gl,Hr(se.J,se.G,gl))}}M.I=3,M.l&&M.l.ra(),M.aa&&(M.T=Date.now()-g.F,M.j.info("Handshake RTT: "+M.T+"ms")),se=M;var Ct=g;if(se.na=Ye(se,se.L?se.ba:null,se.W),Ct.L){Dn(se.h,Ct);var Nr=Ct,Mn=se.O;Mn&&(Nr.H=Mn),Nr.D&&(pt(Nr),Oe(Nr)),se.g=Ct}else si(se);M.i.length>0&&Fs(M)}else Gr[0]!="stop"&&Gr[0]!="close"||Be(M,7);else M.I==3&&(Gr[0]=="stop"||Gr[0]=="close"?Gr[0]=="stop"?Be(M,7):Lr(M):Gr[0]!="noop"&&M.l&&M.l.qa(Gr),M.A=0)}}Zt(4)}catch{}}var er=class{constructor(g,P){this.g=g,this.map=P}};function _r(g){this.l=g||10,a.PerformanceNavigationTiming?(g=a.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function pr(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function en(g){return g.h?1:g.g?g.g.size:0}function mn(g,P){return g.h?g.h==P:g.g?g.g.has(P):!1}function gn(g,P){g.g?g.g.add(P):g.h=P}function Dn(g,P){g.h&&g.h==P?g.h=null:g.g&&g.g.has(P)&&g.g.delete(P)}_r.prototype.cancel=function(){if(this.i=In(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function In(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let P=g.i;for(const M of g.g.values())P=P.concat(M.G);return P}return f(g.i)}var ir=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ir(g,P){if(g){g=g.split("&");for(let M=0;M<g.length;M++){const se=g[M].indexOf("=");let ze,Xe=null;se>=0?(ze=g[M].substring(0,se),Xe=g[M].substring(se+1)):ze=g[M],P(ze,Xe?decodeURIComponent(Xe.replace(/\+/g," ")):"")}}}function Dr(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let P;g instanceof Dr?(this.l=g.l,Xt(this,g.j),this.o=g.o,this.g=g.g,Tn(this,g.u),this.h=g.h,un(this,uo(g.i)),this.m=g.m):g&&(P=String(g).match(ir))?(this.l=!1,Xt(this,P[1]||"",!0),this.o=ri(P[2]||""),this.g=ri(P[3]||"",!0),Tn(this,P[4]),this.h=ri(P[5]||"",!0),un(this,P[6]||"",!0),this.m=ri(P[7]||"")):(this.l=!1,this.i=new Ba(null,this.l))}Dr.prototype.toString=function(){const g=[];var P=this.j;P&&g.push(Pn(P,Oo,!0),":");var M=this.g;return(M||P=="file")&&(g.push("//"),(P=this.o)&&g.push(Pn(P,Oo,!0),"@"),g.push(tt(M).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.u,M!=null&&g.push(":",String(M))),(M=this.h)&&(this.g&&M.charAt(0)!="/"&&g.push("/"),g.push(Pn(M,M.charAt(0)=="/"?co:Ru,!0))),(M=this.i.toString())&&g.push("?",M),(M=this.m)&&g.push("#",Pn(M,ni)),g.join("")},Dr.prototype.resolve=function(g){const P=Sr(this);let M=!!g.j;M?Xt(P,g.j):M=!!g.o,M?P.o=g.o:M=!!g.g,M?P.g=g.g:M=g.u!=null;var se=g.h;if(M)Tn(P,g.u);else if(M=!!g.h){if(se.charAt(0)!="/")if(this.g&&!this.h)se="/"+se;else{var ze=P.h.lastIndexOf("/");ze!=-1&&(se=P.h.slice(0,ze+1)+se)}if(ze=se,ze==".."||ze==".")se="";else if(ze.indexOf("./")!=-1||ze.indexOf("/.")!=-1){se=ze.lastIndexOf("/",0)==0,ze=ze.split("/");const Xe=[];for(let Ct=0;Ct<ze.length;){const Nr=ze[Ct++];Nr=="."?se&&Ct==ze.length&&Xe.push(""):Nr==".."?((Xe.length>1||Xe.length==1&&Xe[0]!="")&&Xe.pop(),se&&Ct==ze.length&&Xe.push("")):(Xe.push(Nr),se=!0)}se=Xe.join("/")}else se=ze}return M?P.h=se:M=g.i.toString()!=="",M?un(P,uo(g.i)):M=!!g.m,M&&(P.m=g.m),P};function Sr(g){return new Dr(g)}function Xt(g,P,M){g.j=M?ri(P,!0):P,g.j&&(g.j=g.j.replace(/:$/,""))}function Tn(g,P){if(P){if(P=Number(P),isNaN(P)||P<0)throw Error("Bad port number "+P);g.u=P}else g.u=null}function un(g,P,M){P instanceof Ba?(g.i=P,ms(g.i,g.l)):(M||(P=Pn(P,Ys)),g.i=new Ba(P,g.l))}function Hr(g,P,M){g.i.set(P,M)}function Oa(g){return Hr(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function ri(g,P){return g?P?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Pn(g,P,M){return typeof g=="string"?(g=encodeURI(g).replace(P,Gs),M&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Gs(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Oo=/[#\/\?@]/g,Ru=/[#\?:]/g,co=/[#\?]/g,Ys=/[#\?@]/g,ni=/#/g;function Ba(g,P){this.h=this.g=null,this.i=g||null,this.j=!!P}function ps(g){g.g||(g.g=new Map,g.h=0,g.i&&Ir(g.i,function(P,M){g.add(decodeURIComponent(P.replace(/\+/g," ")),M)}))}t=Ba.prototype,t.add=function(g,P){ps(this),this.i=null,g=Xs(this,g);let M=this.g.get(g);return M||this.g.set(g,M=[]),M.push(P),this.h+=1,this};function Ua(g,P){ps(g),P=Xs(g,P),g.g.has(P)&&(g.i=null,g.h-=g.g.get(P).length,g.g.delete(P))}function nc(g,P){return ps(g),P=Xs(g,P),g.g.has(P)}t.forEach=function(g,P){ps(this),this.g.forEach(function(M,se){M.forEach(function(ze){g.call(P,ze,se,this)},this)},this)};function ic(g,P){ps(g);let M=[];if(typeof P=="string")nc(g,P)&&(M=M.concat(g.g.get(Xs(g,P))));else for(g=Array.from(g.g.values()),P=0;P<g.length;P++)M=M.concat(g[P]);return M}t.set=function(g,P){return ps(this),this.i=null,g=Xs(this,g),nc(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[P]),this.h+=1,this},t.get=function(g,P){return g?(g=ic(this,g),g.length>0?String(g[0]):P):P};function sc(g,P,M){Ua(g,P),M.length>0&&(g.i=null,g.g.set(Xs(g,P),f(M)),g.h+=M.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],P=Array.from(this.g.keys());for(let se=0;se<P.length;se++){var M=P[se];const ze=tt(M);M=ic(this,M);for(let Xe=0;Xe<M.length;Xe++){let Ct=ze;M[Xe]!==""&&(Ct+="="+tt(M[Xe])),g.push(Ct)}}return this.i=g.join("&")};function uo(g){const P=new Ba;return P.i=g.i,g.g&&(P.g=new Map(g.g),P.h=g.h),P}function Xs(g,P){return P=String(P),g.j&&(P=P.toLowerCase()),P}function ms(g,P){P&&!g.j&&(ps(g),g.i=null,g.g.forEach(function(M,se){const ze=se.toLowerCase();se!=ze&&(Ua(this,se),sc(this,ze,M))},g)),g.j=P}function ac(g,P){const M=new cn;if(a.Image){const se=new Image;se.onload=h(Ji,M,"TestLoadImage: loaded",!0,P,se),se.onerror=h(Ji,M,"TestLoadImage: error",!1,P,se),se.onabort=h(Ji,M,"TestLoadImage: abort",!1,P,se),se.ontimeout=h(Ji,M,"TestLoadImage: timeout",!1,P,se),a.setTimeout(function(){se.ontimeout&&se.ontimeout()},1e4),se.src=g}else P(!1)}function Va(g,P){const M=new cn,se=new AbortController,ze=setTimeout(()=>{se.abort(),Ji(M,"TestPingServer: timeout",!1,P)},1e4);fetch(g,{signal:se.signal}).then(Xe=>{clearTimeout(ze),Xe.ok?Ji(M,"TestPingServer: ok",!0,P):Ji(M,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(ze),Ji(M,"TestPingServer: error",!1,P)})}function Ji(g,P,M,se,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),se(M)}catch{}}function oc(){this.g=new Ot}function xr(g){this.i=g.Sb||null,this.h=g.ab||!1}d(xr,Vt),xr.prototype.g=function(){return new ho(this.i,this.h)};function ho(g,P){me.call(this),this.H=g,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(ho,me),t=ho.prototype,t.open=function(g,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=P,this.readyState=1,q(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const P={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(P.body=g),(this.H||a).fetch(new Request(this.D,P)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,za(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,q(this)),this.g&&(this.readyState=3,q(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ml(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function ml(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var P=g.value?g.value:new Uint8Array(0);(P=this.B.decode(P,{stream:!g.done}))&&(this.response=this.responseText+=P)}g.done?za(this):q(this),this.readyState==3&&ml(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,za(this))},t.Na=function(g){this.g&&(this.response=g,za(this))},t.ga=function(){this.g&&za(this)};function za(g){g.readyState=4,g.l=null,g.j=null,g.B=null,q(g)}t.setRequestHeader=function(g,P){this.A.append(g,P)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],P=this.h.entries();for(var M=P.next();!M.done;)M=M.value,g.push(M[0]+": "+M[1]),M=P.next();return g.join(`\r
`)};function q(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function _e(g){let P="";return be(g,function(M,se){P+=se,P+=":",P+=M,P+=`\r
`}),P}function Ue(g,P,M){e:{for(se in M){var se=!1;break e}se=!0}se||(M=_e(M),typeof g=="string"?M!=null&&tt(M):Hr(g,P,M))}function $e(g){me.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d($e,me);var ut=/^https?$/i,rt=["POST","PUT"];t=$e.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,P,M,se){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);P=P?P.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Re.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(P,String(g),!0),this.B=!1}catch(Xe){or(this,Xe);return}if(g=M||"",M=new Map(this.headers),se)if(Object.getPrototypeOf(se)===Object.prototype)for(var ze in se)M.set(ze,se[ze]);else if(typeof se.keys=="function"&&typeof se.get=="function")for(const Xe of se.keys())M.set(Xe,se.get(Xe));else throw Error("Unknown input type for opt_headers: "+String(se));se=Array.from(M.keys()).find(Xe=>Xe.toLowerCase()=="content-type"),ze=a.FormData&&g instanceof a.FormData,!(Array.prototype.indexOf.call(rt,P,void 0)>=0)||se||ze||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Xe,Ct]of M)this.g.setRequestHeader(Xe,Ct);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(Xe){or(this,Xe)}};function or(g,P){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=P,g.o=5,zt(g),yr(g)}function zt(g){g.A||(g.A=!0,Ke(g,"complete"),Ke(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Ke(this,"complete"),Ke(this,"abort"),yr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yr(this,!0)),$e.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Pt(this):this.Xa())},t.Xa=function(){Pt(this)};function Pt(g){if(g.h&&typeof s<"u"){if(g.v&&qt(g)==4)setTimeout(g.Ca.bind(g),0);else if(Ke(g,"readystatechange"),qt(g)==4){g.h=!1;try{const Xe=g.ca();e:switch(Xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var M;if(!(M=P)){var se;if(se=Xe===0){let Ct=String(g.D).match(ir)[1]||null;!Ct&&a.self&&a.self.location&&(Ct=a.self.location.protocol.slice(0,-1)),se=!ut.test(Ct?Ct.toLowerCase():"")}M=se}if(M)Ke(g,"complete"),Ke(g,"success");else{g.o=6;try{var ze=qt(g)>2?g.g.statusText:""}catch{ze=""}g.l=ze+" ["+g.ca()+"]",zt(g)}}finally{yr(g)}}}}function yr(g,P){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const M=g.g;g.g=null,P||Ke(g,"ready");try{M.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function qt(g){return g.g?g.g.readyState:0}t.ca=function(){try{return qt(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var P=this.g.responseText;return g&&P.indexOf(g)==0&&(P=P.substring(g.length)),Rt(P)}};function yt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function hr(g){const P={};g=(g.g&&qt(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let se=0;se<g.length;se++){if(R(g[se]))continue;var M=O(g[se]);const ze=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const Xe=P[ze]||[];P[ze]=Xe,Xe.push(M)}Me(P,function(se){return se.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tt(g,P,M){return M&&M.internalChannelParams&&M.internalChannelParams[g]||P}function Ur(g){this.za=0,this.i=[],this.j=new cn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Tt("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Tt("baseRetryDelayMs",5e3,g),this.Za=Tt("retryDelaySeedMs",1e4,g),this.Ta=Tt("forwardChannelMaxRetries",2,g),this.va=Tt("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new _r(g&&g.concurrentRequestLimit),this.Ba=new oc,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ur.prototype,t.ka=8,t.I=1,t.connect=function(g,P,M,se){$t(0),this.W=g,this.H=P||{},M&&se!==void 0&&(this.H.OSID=M,this.H.OAID=se),this.F=this.X,this.J=Ye(this,null,this.W),Fs(this)};function Lr(g){if(Rn(g),g.I==3){var P=g.V++,M=Sr(g.J);if(Hr(M,"SID",g.M),Hr(M,"RID",P),Hr(M,"TYPE","terminate"),ii(g,M),P=new Z(g,g.j,P),P.M=2,P.A=Oa(Sr(M)),M=!1,a.navigator&&a.navigator.sendBeacon)try{M=a.navigator.sendBeacon(P.A.toString(),"")}catch{}!M&&a.Image&&(new Image().src=P.A,M=!0),M||(P.g=Ut(P.j,null),P.g.ea(P.A)),P.F=Date.now(),Oe(P)}Ce(g)}function qr(g){g.g&&(ai(g),g.g.cancel(),g.g=null)}function Rn(g){qr(g),g.v&&(a.clearTimeout(g.v),g.v=null),V(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&a.clearTimeout(g.m),g.m=null)}function Fs(g){if(!pr(g.h)&&!g.m){g.m=!0;var P=g.Ea;z||T(),W||(z(),W=!0),b.add(P,g),g.D=0}}function Mr(g,P){return en(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=P.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=It(c(g.Ea,g,P),Se(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const ze=new Z(this,this.j,g);let Xe=this.o;if(this.U&&(Xe?(Xe=Le(Xe),B(Xe,this.U)):Xe=this.U),this.u!==null||this.R||(ze.J=Xe,Xe=null),this.S)e:{for(var P=0,M=0;M<this.i.length;M++){t:{var se=this.i[M];if("__data__"in se.map&&(se=se.map.__data__,typeof se=="string")){se=se.length;break t}se=void 0}if(se===void 0)break;if(P+=se,P>4096){P=M;break e}if(P===4096||M===this.i.length-1){P=M+1;break e}}P=1e3}else P=1e3;P=gs(this,ze,P),M=Sr(this.J),Hr(M,"RID",g),Hr(M,"CVER",22),this.G&&Hr(M,"X-HTTP-Session-Id",this.G),ii(this,M),Xe&&(this.R?P="headers="+tt(_e(Xe))+"&"+P:this.u&&Ue(M,this.u,Xe)),gn(this.h,ze),this.Ra&&Hr(M,"TYPE","init"),this.S?(Hr(M,"$req",P),Hr(M,"SID","null"),ze.U=!0,re(ze,M,null)):re(ze,M,P),this.I=2}}else this.I==3&&(g?ca(this,g):this.i.length==0||pr(this.h)||ca(this))};function ca(g,P){var M;P?M=P.l:M=g.V++;const se=Sr(g.J);Hr(se,"SID",g.M),Hr(se,"RID",M),Hr(se,"AID",g.K),ii(g,se),g.u&&g.o&&Ue(se,g.u,g.o),M=new Z(g,g.j,M,g.D+1),g.u===null&&(M.J=g.o),P&&(g.i=P.G.concat(g.i)),P=gs(g,M,1e3),M.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),gn(g.h,M),re(M,se,P)}function ii(g,P){g.H&&be(g.H,function(M,se){Hr(P,se,M)}),g.l&&be({},function(M,se){Hr(P,se,M)})}function gs(g,P,M){M=Math.min(g.i.length,M);const se=g.l?c(g.l.Ka,g.l,g):null;e:{var ze=g.i;let Nr=-1;for(;;){const Mn=["count="+M];Nr==-1?M>0?(Nr=ze[0].g,Mn.push("ofs="+Nr)):Nr=0:Mn.push("ofs="+Nr);let Gr=!0;for(let On=0;On<M;On++){var Xe=ze[On].g;const Hi=ze[On].map;if(Xe-=Nr,Xe<0)Nr=Math.max(0,ze[On].g-100),Gr=!1;else try{Xe="req"+Xe+"_"||"";try{var Ct=Hi instanceof Map?Hi:Object.entries(Hi);for(const[xs,Bn]of Ct){let ys=Bn;o(Bn)&&(ys=bt(Bn)),Mn.push(Xe+xs+"="+encodeURIComponent(ys))}}catch(xs){throw Mn.push(Xe+"type="+encodeURIComponent("_badmap")),xs}}catch{se&&se(Hi)}}if(Gr){Ct=Mn.join("&");break e}}Ct=void 0}return g=g.i.splice(0,M),P.G=g,Ct}function si(g){if(!g.g&&!g.v){g.Y=1;var P=g.Da;z||T(),W||(z(),W=!0),b.add(P,g),g.A=0}}function dr(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=It(c(g.Da,g),Se(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,E(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=It(c(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$t(10),qr(this),E(this))};function ai(g){g.B!=null&&(a.clearTimeout(g.B),g.B=null)}function E(g){g.g=new Z(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var P=Sr(g.na);Hr(P,"RID","rpc"),Hr(P,"SID",g.M),Hr(P,"AID",g.K),Hr(P,"CI",g.F?"0":"1"),!g.F&&g.ia&&Hr(P,"TO",g.ia),Hr(P,"TYPE","xmlhttp"),ii(g,P),g.u&&g.o&&Ue(P,g.u,g.o),g.O&&(g.g.H=g.O);var M=g.g;g=g.ba,M.M=1,M.A=Oa(Sr(P)),M.u=null,M.R=!0,ke(M,g)}t.Va=function(){this.C!=null&&(this.C=null,qr(this),dr(this),$t(19))};function V(g){g.C!=null&&(a.clearTimeout(g.C),g.C=null)}function ue(g,P){var M=null;if(g.g==P){V(g),ai(g),g.g=null;var se=2}else if(mn(g.h,P))M=P.G,Dn(g.h,P),se=1;else return;if(g.I!=0){if(P.o)if(se==1){M=P.u?P.u.length:0,P=Date.now()-P.F;var ze=g.D;se=Rr(),Ke(se,new Ze(se,M)),Fs(g)}else si(g);else if(ze=P.m,ze==3||ze==0&&P.X>0||!(se==1&&Mr(g,P)||se==2&&dr(g)))switch(M&&M.length>0&&(P=g.h,P.i=P.i.concat(M)),ze){case 1:Be(g,5);break;case 4:Be(g,10);break;case 3:Be(g,6);break;default:Be(g,2)}}}function Se(g,P){let M=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(M*=2),M*P}function Be(g,P){if(g.j.info("Error code "+P),P==2){var M=c(g.bb,g),se=g.Ua;const ze=!se;se=new Dr(se||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Xt(se,"https"),Oa(se),ze?ac(se.toString(),M):Va(se.toString(),M)}else $t(2);g.I=0,g.l&&g.l.pa(P),Ce(g),Rn(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Ce(g){if(g.I=0,g.ja=[],g.l){const P=In(g.h);(P.length!=0||g.i.length!=0)&&(v(g.ja,P),v(g.ja,g.i),g.h.i.length=0,f(g.i),g.i.length=0),g.l.oa()}}function Ye(g,P,M){var se=M instanceof Dr?Sr(M):new Dr(M);if(se.g!="")P&&(se.g=P+"."+se.g),Tn(se,se.u);else{var ze=a.location;se=ze.protocol,P=P?P+"."+ze.hostname:ze.hostname,ze=+ze.port;const Xe=new Dr(null);se&&Xt(Xe,se),P&&(Xe.g=P),ze&&Tn(Xe,ze),M&&(Xe.h=M),se=Xe}return M=g.G,P=g.wa,M&&P&&Hr(se,M,P),Hr(se,"VER",g.ka),ii(g,se),se}function Ut(g,P,M){if(P&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return P=g.Aa&&!g.ma?new $e(new xr({ab:M})):new $e(g.ma),P.Fa(g.L),P}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wt(){}t=Wt.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function kt(){}kt.prototype.g=function(g,P){return new Qt(g,P)};function Qt(g,P){me.call(this),this.g=new Ur(P),this.l=g,this.h=P&&P.messageUrlParams||null,g=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(g?g["X-WebChannel-Content-Type"]=P.messageContentType:g={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.sa&&(g?g["X-WebChannel-Client-Profile"]=P.sa:g={"X-WebChannel-Client-Profile":P.sa}),this.g.U=g,(g=P&&P.Qb)&&!R(g)&&(this.g.u=g),this.A=P&&P.supportsCrossDomainXhr||!1,this.v=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!R(P)&&(this.g.G=P,g=this.h,g!==null&&P in g&&(g=this.h,P in g&&delete g[P])),this.j=new xn(this)}d(Qt,me),Qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Lr(this.g)},Qt.prototype.o=function(g){var P=this.g;if(typeof g=="string"){var M={};M.__data__=g,g=M}else this.v&&(M={},M.__data__=bt(g),g=M);P.i.push(new er(P.Ya++,g)),P.I==3&&Fs(P)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Lr(this.g),delete this.g,Qt.Z.N.call(this)};function Or(g){qe.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var P=g.__sm__;if(P){e:{for(const M in P){g=M;break e}g=void 0}(this.i=g)&&(g=this.i,P=P!==null&&g in P?P[g]:void 0),this.data=P}else this.data=g}d(Or,qe);function fn(){Ft.call(this),this.status=1}d(fn,Ft);function xn(g){this.g=g}d(xn,Wt),xn.prototype.ra=function(){Ke(this.g,"a")},xn.prototype.qa=function(g){Ke(this.g,new Or(g))},xn.prototype.pa=function(g){Ke(this.g,new fn)},xn.prototype.oa=function(){Ke(this.g,"b")},kt.prototype.createWebChannel=kt.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,RC=function(){return new kt},PC=function(){return Rr()},IC=wr,zw={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},on.NO_ERROR=0,on.TIMEOUT=8,on.HTTP_ERROR=6,t1=on,xe.COMPLETE="complete",CC=xe,Vr.EventType=mr,mr.OPEN="a",mr.CLOSE="b",mr.ERROR="c",mr.MESSAGE="d",me.prototype.listen=me.prototype.J,x0=Vr,$e.prototype.listenOnce=$e.prototype.K,$e.prototype.getLastError=$e.prototype.Ha,$e.prototype.getLastErrorCode=$e.prototype.ya,$e.prototype.getStatus=$e.prototype.ca,$e.prototype.getResponseJson=$e.prototype.La,$e.prototype.getResponseText=$e.prototype.la,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Fa,kC=$e}).apply(typeof ag<"u"?ag:typeof self<"u"?self:typeof window<"u"?window:{});const kE="@firebase/firestore",CE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ts.UNAUTHENTICATED=new Ts(null),Ts.GOOGLE_CREDENTIALS=new Ts("google-credentials-uid"),Ts.FIRST_PARTY=new Ts("first-party-uid"),Ts.MOCK_USER=new Ts("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xf="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new R_("@firebase/firestore");function Gh(){return fh.logLevel}function Kt(t,...e){if(fh.logLevel<=Xr.DEBUG){const r=e.map(F_);fh.debug(`Firestore (${xf}): ${t}`,...r)}}function Wl(t,...e){if(fh.logLevel<=Xr.ERROR){const r=e.map(F_);fh.error(`Firestore (${xf}): ${t}`,...r)}}function rf(t,...e){if(fh.logLevel<=Xr.WARN){const r=e.map(F_);fh.warn(`Firestore (${xf}): ${t}`,...r)}}function F_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,LC(t,n,r)}function LC(t,e,r){let n=`FIRESTORE (${xf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Wl(n),new Error(n)}function nn(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||LC(e,i,n)}function Tr(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Dt extends ec{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ts.UNAUTHENTICATED))}shutdown(){}}class PO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class RO{constructor(e){this.t=e,this.currentUser=Ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){nn(this.o===void 0,42304);let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new rl;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rl,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{Kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rl)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(nn(typeof n.accessToken=="string",31837,{l:n}),new jC(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nn(e===null||typeof e=="string",2055,{h:e}),new Ts(e)}}class LO{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Ts.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jO{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new LO(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Ts.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FO{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Eo(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){nn(this.o===void 0,3512);const n=s=>{s.error!=null&&Kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Kt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{Kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new IE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(nn(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new IE(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=DO(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=e.charAt(i[s]%62))}return n}}function Qr(t,e){return t<e?-1:t>e?1:0}function Hw(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t.charAt(n),s=e.charAt(n);if(i!==s)return By(i)===By(s)?Qr(i,s):By(i)?1:-1}return Qr(t.length,e.length)}const MO=55296,OO=57343;function By(t){const e=t.charCodeAt(0);return e>=MO&&e<=OO}function nf(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="__name__";class Go{constructor(e,r,n){r===void 0?r=0:r>e.length&&gr(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&gr(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Go.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Go?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const s=Go.compareSegments(e.get(i),r.get(i));if(s!==0)return s}return Qr(e.length,r.length)}static compareSegments(e,r){const n=Go.isNumericId(e),i=Go.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?Go.extractNumericId(e).compare(Go.extractNumericId(r)):Hw(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return su.fromString(e.substring(4,e.length-2))}}class Cn extends Go{construct(e,r,n){return new Cn(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Dt(lt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Cn(r)}static emptyPath(){return new Cn([])}}const BO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class as extends Go{construct(e,r,n){return new as(e,r,n)}static isValidIdentifier(e){return BO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),as.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===PE}static keyField(){return new as([PE])}static fromServerFormat(e){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new Dt(lt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Dt(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Dt(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new Dt(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new as(r)}static emptyPath(){return new as([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.path=e}static fromPath(e){return new fr(Cn.fromString(e))}static fromName(e){return new fr(Cn.fromString(e).popFirst(5))}static empty(){return new fr(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Cn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fr(new Cn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(t,e,r){if(!r)throw new Dt(lt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UO(t,e,r,n){if(e===!0&&n===!0)throw new Dt(lt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function RE(t){if(!fr.isDocumentKey(t))throw new Dt(lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function LE(t){if(fr.isDocumentKey(t))throw new Dt(lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function DC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function s2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":gr(12329,{type:typeof t})}function Is(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Dt(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=s2(t);throw new Dt(lt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function VO(t,e){if(e<=0)throw new Dt(lt.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t,e){const r={typeString:t};return e&&(r.value=e),r}function Jp(t,e){if(!DC(t))throw new Dt(lt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const i=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const a=t[n];if(i&&typeof a!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Dt(lt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=-62135596800,FE=1e6;class qn{static now(){return qn.fromMillis(Date.now())}static fromDate(e){return qn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*FE);return new qn(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Dt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Dt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<jE)throw new Dt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Dt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FE}_compareTo(e){return this.seconds===e.seconds?Qr(this.nanoseconds,e.nanoseconds):Qr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jp(e,qn._jsonSchema))return new qn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qn._jsonSchemaVersion="firestore/timestamp/1.0",qn._jsonSchema={type:Pi("string",qn._jsonSchemaVersion),seconds:Pi("number"),nanoseconds:Pi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{static fromTimestamp(e){return new br(e)}static min(){return new br(new qn(0,0))}static max(){return new br(new qn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp=-1;function zO(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=br.fromTimestamp(n===1e9?new qn(r+1,0):new qn(r,n));return new hu(i,fr.empty(),e)}function HO(t){return new hu(t.readTime,t.key,yp)}class hu{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new hu(br.min(),fr.empty(),yp)}static max(){return new hu(br.max(),fr.empty(),yp)}}function $O(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=fr.comparator(t.documentKey,e.documentKey),r!==0?r:Qr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yf(t){if(t.code!==lt.FAILED_PRECONDITION||t.message!==qO)throw t;Kt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&gr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new xt((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof xt?r:xt.resolve(r)}catch(r){return xt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):xt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):xt.reject(r)}static resolve(e){return new xt((r,n)=>{r(e)})}static reject(e){return new xt((r,n)=>{n(e)})}static waitFor(e){return new xt((r,n)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&r()},l=>n(l))}),a=!0,s===i&&r()})}static or(e){let r=xt.resolve(!1);for(const n of e)r=r.next(i=>i?xt.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,s)=>{n.push(r.call(this,i,s))}),this.waitFor(n)}static mapArray(e,r){return new xt((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;r(e[c]).next(h=>{a[c]=h,++o,o===s&&n(a)},h=>i(h))}})}static doWhile(e,r){return new xt((n,i)=>{const s=()=>{e()===!0?r().next(()=>{s()},i):n()};s()})}}function KO(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function vf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}a2.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=-1;function Zp(t){return t==null}function Y1(t){return t===0&&1/t==-1/0}function GO(t){return typeof t=="number"&&Number.isInteger(t)&&!Y1(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="";function YO(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=DE(e)),e=XO(t.get(r),e);return DE(e)}function XO(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const s=t.charAt(i);switch(s){case"\0":r+="";break;case MC:r+="";break;default:r+=s}}return r}function DE(t){return t+MC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Nu(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function OC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,r){this.comparator=e,this.root=r||ss.EMPTY}insert(e,r){return new ti(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new ti(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new og(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new og(this.root,e,this.comparator,!1)}getReverseIterator(){return new og(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new og(this.root,e,this.comparator,!0)}}class og{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ss{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n??ss.RED,this.left=i??ss.EMPTY,this.right=s??ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,s){return new ss(e??this.key,r??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return ss.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gr(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw gr(27949);return e+(this.isRed()?0:1)}}ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1;ss.EMPTY=new class{constructor(){this.size=0}get key(){throw gr(57766)}get value(){throw gr(16141)}get color(){throw gr(16727)}get left(){throw gr(29726)}get right(){throw gr(36894)}copy(e,r,n,i,s){return this}insert(e,r,n){return new ss(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.comparator=e,this.data=new ti(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new OE(this.data.getIterator())}getIteratorFrom(e){return new OE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof zi)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new zi(this.comparator);return r.data=e,r}}class OE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.fields=e,e.sort(as.comparator)}static empty(){return new ka([])}unionWith(e){let r=new zi(as.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ka(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return nf(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new BC("Invalid base64 string: "+s):s}}(e);return new ds(r)}static fromUint8Array(e){const r=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new ds(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ds.EMPTY_BYTE_STRING=new ds("");const QO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function du(t){if(nn(!!t,39018),typeof t=="string"){let e=0;const r=QO.exec(t);if(nn(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:wi(t.seconds),nanos:wi(t.nanos)}}function wi(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fu(t){return typeof t=="string"?ds.fromBase64String(t):ds.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="server_timestamp",VC="__type__",zC="__previous_value__",HC="__local_write_time__";function O_(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[VC])==null?void 0:n.stringValue)===UC}function o2(t){const e=t.mapValue.fields[zC];return O_(e)?o2(e):e}function vp(t){const e=du(t.mapValue.fields[HC].timestampValue);return new qn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,r,n,i,s,a,o,l,c,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const $w="(default)";class wp{constructor(e,r){this.projectId=e,this.database=r||$w}static empty(){return new wp("","")}get isDefaultDatabase(){return this.database===$w}isEqual(e){return e instanceof wp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="__type__",ZO="__max__",lg={mapValue:{}},qC="__vector__",X1="value";function pu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?O_(t)?4:t9(t)?9007199254740991:e9(t)?10:11:gr(28295,{value:t})}function cl(t,e){if(t===e)return!0;const r=pu(t);if(r!==pu(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vp(t).isEqual(vp(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=du(i.timestampValue),o=du(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return fu(i.bytesValue).isEqual(fu(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return wi(i.geoPointValue.latitude)===wi(s.geoPointValue.latitude)&&wi(i.geoPointValue.longitude)===wi(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return wi(i.integerValue)===wi(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=wi(i.doubleValue),o=wi(s.doubleValue);return a===o?Y1(a)===Y1(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return nf(t.arrayValue.values||[],e.arrayValue.values||[],cl);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(ME(a)!==ME(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!cl(a[l],o[l])))return!1;return!0}(t,e);default:return gr(52216,{left:t})}}function _p(t,e){return(t.values||[]).find(r=>cl(r,e))!==void 0}function sf(t,e){if(t===e)return 0;const r=pu(t),n=pu(e);if(r!==n)return Qr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Qr(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=wi(s.integerValue||s.doubleValue),l=wi(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return BE(t.timestampValue,e.timestampValue);case 4:return BE(vp(t),vp(e));case 5:return Hw(t.stringValue,e.stringValue);case 6:return function(s,a){const o=fu(s),l=fu(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const h=Qr(o[c],l[c]);if(h!==0)return h}return Qr(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=Qr(wi(s.latitude),wi(a.latitude));return o!==0?o:Qr(wi(s.longitude),wi(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return UE(t.arrayValue,e.arrayValue);case 10:return function(s,a){var p,f,v,x;const o=s.fields||{},l=a.fields||{},c=(p=o[X1])==null?void 0:p.arrayValue,h=(f=l[X1])==null?void 0:f.arrayValue,d=Qr(((v=c==null?void 0:c.values)==null?void 0:v.length)||0,((x=h==null?void 0:h.values)==null?void 0:x.length)||0);return d!==0?d:UE(c,h)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===lg.mapValue&&a===lg.mapValue)return 0;if(s===lg.mapValue)return 1;if(a===lg.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=Hw(l[d],h[d]);if(p!==0)return p;const f=sf(o[l[d]],c[h[d]]);if(f!==0)return f}return Qr(l.length,h.length)}(t.mapValue,e.mapValue);default:throw gr(23264,{he:r})}}function BE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qr(t,e);const r=du(t),n=du(e),i=Qr(r.seconds,n.seconds);return i!==0?i:Qr(r.nanos,n.nanos)}function UE(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const s=sf(r[i],n[i]);if(s)return s}return Qr(r.length,n.length)}function af(t){return qw(t)}function qw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=du(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return fu(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return fr.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const s of r.values||[])i?i=!1:n+=",",n+=qw(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${qw(r.fields[a])}`;return i+"}"}(t.mapValue):gr(61005,{value:t})}function r1(t){switch(pu(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=o2(t);return e?16+r1(e):16;case 5:return 2*t.stringValue.length;case 6:return fu(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,s)=>i+r1(s),0)}(t.arrayValue);case 10:case 11:return function(n){let i=0;return Nu(n.fields,(s,a)=>{i+=s.length+r1(a)}),i}(t.mapValue);default:throw gr(13486,{value:t})}}function VE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ww(t){return!!t&&"integerValue"in t}function B_(t){return!!t&&"arrayValue"in t}function zE(t){return!!t&&"nullValue"in t}function HE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function n1(t){return!!t&&"mapValue"in t}function e9(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[$C])==null?void 0:n.stringValue)===qC}function j0(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Nu(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=j0(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=j0(t.arrayValue.values[r]);return e}return{...t}}function t9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ZO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.value=e}static empty(){return new Hs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!n1(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=j0(r)}setAll(e){let r=as.emptyPath(),n={},i=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=o.popLast()}a?n[o.lastSegment()]=j0(a):i.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(e){const r=this.field(e.popLast());n1(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return cl(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];n1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Nu(r,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new Hs(j0(this.value))}}function WC(t){const e=[];return Nu(t.fields,(r,n)=>{const i=new as([r]);if(n1(n)){const s=WC(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new ka(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,r,n,i,s,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Ki(e,0,br.min(),br.min(),br.min(),Hs.empty(),0)}static newFoundDocument(e,r,n,i){return new Ki(e,1,r,br.min(),n,i,0)}static newNoDocument(e,r){return new Ki(e,2,r,br.min(),br.min(),Hs.empty(),0)}static newUnknownDocument(e,r){return new Ki(e,3,r,br.min(),br.min(),Hs.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(br.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=br.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ki&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ki(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,r){this.position=e,this.inclusive=r}}function $E(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?n=fr.comparator(fr.fromName(a.referenceValue),r.key):n=sf(a,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function qE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!cl(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,r="asc"){this.field=e,this.dir=r}}function r9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KC=class{};class Ci extends KC{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new i9(e,r,n):r==="array-contains"?new o9(e,n):r==="in"?new l9(e,n):r==="not-in"?new c9(e,n):r==="array-contains-any"?new u9(e,n):new Ci(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new s9(e,n):new a9(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(sf(r,this.value)):r!==null&&pu(this.value)===pu(r)&&this.matchesComparison(sf(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return gr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lo extends KC{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Lo(e,r)}matches(e){return GC(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function GC(t){return t.op==="and"}function YC(t){return n9(t)&&GC(t)}function n9(t){for(const e of t.filters)if(e instanceof Lo)return!1;return!0}function Kw(t){if(t instanceof Ci)return t.field.canonicalString()+t.op.toString()+af(t.value);if(YC(t))return t.filters.map(e=>Kw(e)).join(",");{const e=t.filters.map(r=>Kw(r)).join(",");return`${t.op}(${e})`}}function XC(t,e){return t instanceof Ci?function(n,i){return i instanceof Ci&&n.op===i.op&&n.field.isEqual(i.field)&&cl(n.value,i.value)}(t,e):t instanceof Lo?function(n,i){return i instanceof Lo&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,a,o)=>s&&XC(a,i.filters[o]),!0):!1}(t,e):void gr(19439)}function QC(t){return t instanceof Ci?function(r){return`${r.field.canonicalString()} ${r.op} ${af(r.value)}`}(t):t instanceof Lo?function(r){return r.op.toString()+" {"+r.getFilters().map(QC).join(" ,")+"}"}(t):"Filter"}class i9 extends Ci{constructor(e,r,n){super(e,r,n),this.key=fr.fromName(n.referenceValue)}matches(e){const r=fr.comparator(e.key,this.key);return this.matchesComparison(r)}}class s9 extends Ci{constructor(e,r){super(e,"in",r),this.keys=JC("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class a9 extends Ci{constructor(e,r){super(e,"not-in",r),this.keys=JC("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function JC(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>fr.fromName(n.referenceValue))}class o9 extends Ci{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return B_(r)&&_p(r.arrayValue,this.value)}}class l9 extends Ci{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&_p(this.value.arrayValue,r)}}class c9 extends Ci{constructor(e,r){super(e,"not-in",r)}matches(e){if(_p(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!_p(this.value.arrayValue,r)}}class u9 extends Ci{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!B_(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>_p(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e,r=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function WE(t,e=null,r=[],n=[],i=null,s=null,a=null){return new h9(t,e,r,n,i,s,a)}function U_(t){const e=Tr(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Kw(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Zp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>af(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>af(n)).join(",")),e.Te=r}return e.Te}function V_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!r9(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!XC(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qE(t.startAt,e.startAt)&&qE(t.endAt,e.endAt)}function Gw(t){return fr.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,r=null,n=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function d9(t,e,r,n,i,s,a,o){return new wf(t,e,r,n,i,s,a,o)}function l2(t){return new wf(t)}function KE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZC(t){return t.collectionGroup!==null}function F0(t){const e=Tr(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new zi(as.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new bp(s,n))}),r.has(as.keyField().canonicalString())||e.Ie.push(new bp(as.keyField(),n))}return e.Ie}function nl(t){const e=Tr(t);return e.Ee||(e.Ee=f9(e,F0(t))),e.Ee}function f9(t,e){if(t.limitType==="F")return WE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new bp(i.field,s)});const r=t.endAt?new Q1(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Q1(t.startAt.position,t.startAt.inclusive):null;return WE(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Yw(t,e){const r=t.filters.concat([e]);return new wf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function J1(t,e,r){return new wf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function c2(t,e){return V_(nl(t),nl(e))&&t.limitType===e.limitType}function eI(t){return`${U_(nl(t))}|lt:${t.limitType}`}function Yh(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>QC(i)).join(", ")}]`),Zp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>af(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>af(i)).join(",")),`Target(${n})`}(nl(t))}; limitType=${t.limitType})`}function u2(t,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):fr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,i){for(const s of F0(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(a,o,l){const c=$E(a,o,l);return a.inclusive?c<=0:c<0}(n.startAt,F0(n),i)||n.endAt&&!function(a,o,l){const c=$E(a,o,l);return a.inclusive?c>=0:c>0}(n.endAt,F0(n),i))}(t,e)}function p9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tI(t){return(e,r)=>{let n=!1;for(const i of F0(t)){const s=m9(i,e,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function m9(t,e,r){const n=t.field.isKeyField()?fr.comparator(e.key,r.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?sf(l,c):gr(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return gr(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Nu(this.inner,(r,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return OC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9=new ti(fr.comparator);function Kl(){return g9}const rI=new ti(fr.comparator);function y0(...t){let e=rI;for(const r of t)e=e.insert(r.key,r);return e}function nI(t){let e=rI;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Xu(){return D0()}function iI(){return D0()}function D0(){return new Ah(t=>t.toString(),(t,e)=>t.isEqual(e))}const x9=new ti(fr.comparator),y9=new zi(fr.comparator);function Jr(...t){let e=y9;for(const r of t)e=e.add(r);return e}const v9=new zi(Qr);function w9(){return v9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Y1(e)?"-0":e}}function sI(t){return{integerValue:""+t}}function aI(t,e){return GO(e)?sI(e):z_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this._=void 0}}function _9(t,e,r){return t instanceof Sp?function(i,s){const a={fields:{[VC]:{stringValue:UC},[HC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&O_(s)&&(s=o2(s)),s&&(a.fields[zC]=s),{mapValue:a}}(r,e):t instanceof Ep?lI(t,e):t instanceof Ap?cI(t,e):function(i,s){const a=oI(i,s),o=GE(a)+GE(i.Ae);return Ww(a)&&Ww(i.Ae)?sI(o):z_(i.serializer,o)}(t,e)}function b9(t,e,r){return t instanceof Ep?lI(t,e):t instanceof Ap?cI(t,e):r}function oI(t,e){return t instanceof Np?function(n){return Ww(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Sp extends h2{}class Ep extends h2{constructor(e){super(),this.elements=e}}function lI(t,e){const r=uI(e);for(const n of t.elements)r.some(i=>cl(i,n))||r.push(n);return{arrayValue:{values:r}}}class Ap extends h2{constructor(e){super(),this.elements=e}}function cI(t,e){let r=uI(e);for(const n of t.elements)r=r.filter(i=>!cl(i,n));return{arrayValue:{values:r}}}class Np extends h2{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function GE(t){return wi(t.integerValue||t.doubleValue)}function uI(t){return B_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,r){this.field=e,this.transform=r}}function S9(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Ep&&i instanceof Ep||n instanceof Ap&&i instanceof Ap?nf(n.elements,i.elements,cl):n instanceof Np&&i instanceof Np?cl(n.Ae,i.Ae):n instanceof Sp&&i instanceof Sp}(t.transform,e.transform)}class E9{constructor(e,r){this.version=e,this.transformResults=r}}class Ii{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Ii}static exists(e){return new Ii(void 0,e)}static updateTime(e){return new Ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function i1(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class d2{}function dI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tm(t.key,Ii.none()):new em(t.key,t.data,Ii.none());{const r=t.data,n=Hs.empty();let i=new zi(as.comparator);for(let s of e.fields)if(!i.has(s)){let a=r.field(s);a===null&&s.length>1&&(s=s.popLast(),a=r.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new Tu(t.key,n,new ka(i.toArray()),Ii.none())}}function A9(t,e,r){t instanceof em?function(i,s,a){const o=i.value.clone(),l=XE(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof Tu?function(i,s,a){if(!i1(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=XE(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(fI(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function M0(t,e,r,n){return t instanceof em?function(s,a,o,l){if(!i1(s.precondition,a))return o;const c=s.value.clone(),h=QE(s.fieldTransforms,l,a);return c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Tu?function(s,a,o,l){if(!i1(s.precondition,a))return o;const c=QE(s.fieldTransforms,l,a),h=a.data;return h.setAll(fI(s)),h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(s,a,o){return i1(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function N9(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),s=oI(n.transform,i||null);s!=null&&(r===null&&(r=Hs.empty()),r.set(n.field,s))}return r||null}function YE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&nf(n,i,(s,a)=>S9(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class em extends d2{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Tu extends d2{constructor(e,r,n,i,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function fI(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function XE(t,e,r){const n=new Map;nn(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,b9(a,o,r[i]))}return n}function QE(t,e,r){const n=new Map;for(const i of t){const s=i.transform,a=r.data.field(i.field);n.set(i.field,_9(s,a,e))}return n}class tm extends d2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pI extends d2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&A9(s,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=M0(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=M0(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=iI();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=r.has(i.key)?null:o;const l=dI(a,o);l!==null&&n.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(br.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Jr())}isEqual(e){return this.batchId===e.batchId&&nf(this.mutations,e.mutations,(r,n)=>YE(r,n))&&nf(this.baseMutations,e.baseMutations,(r,n)=>YE(r,n))}}class H_{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){nn(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=function(){return x9}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new H_(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ti,rn;function mI(t){switch(t){case lt.OK:return gr(64938);case lt.CANCELLED:case lt.UNKNOWN:case lt.DEADLINE_EXCEEDED:case lt.RESOURCE_EXHAUSTED:case lt.INTERNAL:case lt.UNAVAILABLE:case lt.UNAUTHENTICATED:return!1;case lt.INVALID_ARGUMENT:case lt.NOT_FOUND:case lt.ALREADY_EXISTS:case lt.PERMISSION_DENIED:case lt.FAILED_PRECONDITION:case lt.ABORTED:case lt.OUT_OF_RANGE:case lt.UNIMPLEMENTED:case lt.DATA_LOSS:return!0;default:return gr(15467,{code:t})}}function gI(t){if(t===void 0)return Wl("GRPC error has no .code"),lt.UNKNOWN;switch(t){case Ti.OK:return lt.OK;case Ti.CANCELLED:return lt.CANCELLED;case Ti.UNKNOWN:return lt.UNKNOWN;case Ti.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case Ti.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case Ti.INTERNAL:return lt.INTERNAL;case Ti.UNAVAILABLE:return lt.UNAVAILABLE;case Ti.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case Ti.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case Ti.NOT_FOUND:return lt.NOT_FOUND;case Ti.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case Ti.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case Ti.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case Ti.ABORTED:return lt.ABORTED;case Ti.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case Ti.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case Ti.DATA_LOSS:return lt.DATA_LOSS;default:return gr(39323,{code:t})}}(rn=Ti||(Ti={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=new su([4294967295,4294967295],0);function JE(t){const e=I9().encode(t),r=new TC;return r.update(e),new Uint8Array(r.digest())}function ZE(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new su([r,n],0),new su([i,s],0)]}class $_{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new v0(`Invalid padding: ${r}`);if(n<0)throw new v0(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new v0(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new v0(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=su.fromNumber(this.ge)}ye(e,r,n){let i=e.add(r.multiply(su.fromNumber(n)));return i.compare(P9)===1&&(i=new su([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=JE(e),[n,i]=ZE(r);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);if(!this.we(a))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new $_(s,i,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const r=JE(e),[n,i]=ZE(r);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);this.Se(a)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class v0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,r,n,i,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,rm.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new f2(br.min(),i,new ti(Qr),Kl(),Jr())}}class rm{constructor(e,r,n,i,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new rm(n,r,Jr(),Jr(),Jr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,r,n,i){this.be=e,this.removedTargetIds=r,this.key=n,this.De=i}}class xI{constructor(e,r){this.targetId=e,this.Ce=r}}class yI{constructor(e,r,n=ds.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class e3{constructor(){this.ve=0,this.Fe=t3(),this.Me=ds.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Jr(),r=Jr(),n=Jr();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:gr(38017,{changeType:s})}}),new rm(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=t3()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class R9{constructor(e){this.Ge=e,this.ze=new Map,this.je=Kl(),this.Je=cg(),this.He=cg(),this.Ye=new ti(Qr)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:gr(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,i)=>{this.rt(i)&&r(i)})}st(e){const r=e.targetId,n=e.Ce.count,i=this.ot(r);if(i){const s=i.target;if(Gw(s))if(n===0){const a=new fr(s.path);this.et(r,a,Ki.newNoDocument(a,br.min()))}else nn(n===1,20013,{expectedCount:n});else{const a=this._t(r);if(a!==n){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,c)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=r;let a,o;try{a=fu(n).toUint8Array()}catch(l){if(l instanceof BC)return rf("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new $_(a,i,s)}catch(l){return rf(l instanceof v0?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let i=0;return n.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(r,s,null),i++)}),i}Tt(e){const r=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&Gw(o.target)){const l=new fr(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Ki.newNoDocument(l,e))}s.Be&&(r.set(a,s.ke()),s.qe())}});let n=Jr();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new f2(e,r,this.Ye,this.je,n);return this.je=Kl(),this.Je=cg(),this.He=cg(),this.Ye=new ti(Qr),i}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new e3,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new zi(Qr),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new zi(Qr),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Kt("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new e3),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function cg(){return new ti(fr.comparator)}function t3(){return new ti(fr.comparator)}const L9={asc:"ASCENDING",desc:"DESCENDING"},j9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F9={and:"AND",or:"OR"};class D9{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Xw(t,e){return t.useProto3Json||Zp(e)?e:{value:e}}function Z1(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function M9(t,e){return Z1(t,e.toTimestamp())}function Ra(t){return nn(!!t,49232),br.fromTimestamp(function(r){const n=du(r);return new qn(n.seconds,n.nanos)}(t))}function q_(t,e){return Qw(t,e).canonicalString()}function Qw(t,e){const r=function(i){return new Cn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function wI(t){const e=Cn.fromString(t);return nn(NI(e),10190,{key:e.toString()}),e}function ex(t,e){return q_(t.databaseId,e.path)}function O0(t,e){const r=wI(e);if(r.get(1)!==t.databaseId.projectId)throw new Dt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Dt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new fr(bI(r))}function _I(t,e){return q_(t.databaseId,e)}function O9(t){const e=wI(t);return e.length===4?Cn.emptyPath():bI(e)}function Jw(t){return new Cn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bI(t){return nn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function r3(t,e,r){return{name:ex(t,e),fields:r.value.mapValue.fields}}function B9(t,e){return"found"in e?function(n,i){nn(!!i.found,43571),i.found.name,i.found.updateTime;const s=O0(n,i.found.name),a=Ra(i.found.updateTime),o=i.found.createTime?Ra(i.found.createTime):br.min(),l=new Hs({mapValue:{fields:i.found.fields}});return Ki.newFoundDocument(s,a,o,l)}(t,e):"missing"in e?function(n,i){nn(!!i.missing,3894),nn(!!i.readTime,22933);const s=O0(n,i.missing),a=Ra(i.readTime);return Ki.newNoDocument(s,a)}(t,e):gr(7234,{result:e})}function U9(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:gr(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(nn(h===void 0||typeof h=="string",58123),ds.fromBase64String(h||"")):(nn(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ds.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const h=c.code===void 0?lt.UNKNOWN:gI(c.code);return new Dt(h,c.message||"")}(a);r=new yI(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=O0(t,n.document.name),s=Ra(n.document.updateTime),a=n.document.createTime?Ra(n.document.createTime):br.min(),o=new Hs({mapValue:{fields:n.document.fields}}),l=Ki.newFoundDocument(i,s,a,o),c=n.targetIds||[],h=n.removedTargetIds||[];r=new s1(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=O0(t,n.document),s=n.readTime?Ra(n.readTime):br.min(),a=Ki.newNoDocument(i,s),o=n.removedTargetIds||[];r=new s1([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=O0(t,n.document),s=n.removedTargetIds||[];r=new s1([],s,i,null)}else{if(!("filter"in e))return gr(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new C9(i,s),o=n.targetId;r=new xI(o,a)}}return r}function SI(t,e){let r;if(e instanceof em)r={update:r3(t,e.key,e.value)};else if(e instanceof tm)r={delete:ex(t,e.key)};else if(e instanceof Tu)r={update:r3(t,e.key,e.data),updateMask:Y9(e.fieldMask)};else{if(!(e instanceof pI))return gr(16599,{Vt:e.type});r={verify:ex(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,a){const o=a.transform;if(o instanceof Sp)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ep)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ap)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Np)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw gr(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:M9(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:gr(27497)}(t,e.precondition)),r}function V9(t,e){return t&&t.length>0?(nn(e!==void 0,14353),t.map(r=>function(i,s){let a=i.updateTime?Ra(i.updateTime):Ra(s);return a.isEqual(br.min())&&(a=Ra(s)),new E9(a,i.transformResults||[])}(r,e))):[]}function z9(t,e){return{documents:[_I(t,e.path)]}}function H9(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=_I(t,i);const s=function(c){if(c.length!==0)return AI(Lo.create(c,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Xh(p.field),direction:W9(p.dir)}}(h))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=Xw(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:r,parent:i}}function $9(t){let e=O9(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){nn(n===1,65062);const h=r.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];r.where&&(s=function(d){const p=EI(d);return p instanceof Lo&&YC(p)?p.getFilters():[p]}(r.where));let a=[];r.orderBy&&(a=function(d){return d.map(p=>function(v){return new bp(Qh(v.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(r.orderBy));let o=null;r.limit&&(o=function(d){let p;return p=typeof d=="object"?d.value:d,Zp(p)?null:p}(r.limit));let l=null;r.startAt&&(l=function(d){const p=!!d.before,f=d.values||[];return new Q1(f,p)}(r.startAt));let c=null;return r.endAt&&(c=function(d){const p=!d.before,f=d.values||[];return new Q1(f,p)}(r.endAt)),d9(e,i,a,s,o,"F",l,c)}function q9(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gr(28987,{purpose:i})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function EI(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Qh(r.unaryFilter.field);return Ci.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Qh(r.unaryFilter.field);return Ci.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qh(r.unaryFilter.field);return Ci.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Qh(r.unaryFilter.field);return Ci.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gr(61313);default:return gr(60726)}}(t):t.fieldFilter!==void 0?function(r){return Ci.create(Qh(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gr(58110);default:return gr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Lo.create(r.compositeFilter.filters.map(n=>EI(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return gr(1026)}}(r.compositeFilter.op))}(t):gr(30097,{filter:t})}function W9(t){return L9[t]}function K9(t){return j9[t]}function G9(t){return F9[t]}function Xh(t){return{fieldPath:t.canonicalString()}}function Qh(t){return as.fromServerFormat(t.fieldPath)}function AI(t){return t instanceof Ci?function(r){if(r.op==="=="){if(HE(r.value))return{unaryFilter:{field:Xh(r.field),op:"IS_NAN"}};if(zE(r.value))return{unaryFilter:{field:Xh(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(HE(r.value))return{unaryFilter:{field:Xh(r.field),op:"IS_NOT_NAN"}};if(zE(r.value))return{unaryFilter:{field:Xh(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xh(r.field),op:K9(r.op),value:r.value}}}(t):t instanceof Lo?function(r){const n=r.getFilters().map(i=>AI(i));return n.length===1?n[0]:{compositeFilter:{op:G9(r.op),filters:n}}}(t):gr(54877,{filter:t})}function Y9(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function NI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,r,n,i,s=br.min(),a=br.min(),o=ds.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Vc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Vc(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e){this.yt=e}}function Q9(t){const e=$9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?J1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(){this.Cn=new Z9}addToCollectionParentIndex(e,r){return this.Cn.add(r),xt.resolve()}getCollectionParents(e,r){return xt.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return xt.resolve()}deleteFieldIndex(e,r){return xt.resolve()}deleteAllFieldIndexes(e){return xt.resolve()}createTargetIndexes(e,r){return xt.resolve()}getDocumentsMatchingTarget(e,r){return xt.resolve(null)}getIndexType(e,r){return xt.resolve(0)}getFieldIndexes(e,r){return xt.resolve([])}getNextCollectionGroupToUpdate(e){return xt.resolve(null)}getMinOffset(e,r){return xt.resolve(hu.min())}getMinOffsetFromCollectionGroup(e,r){return xt.resolve(hu.min())}updateCollectionGroup(e,r,n){return xt.resolve()}updateIndexEntries(e,r){return xt.resolve()}}class Z9{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new zi(Cn.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new zi(Cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TI=41943040;class Zs{static withCacheSize(e){return new Zs(e,Zs.DEFAULT_COLLECTION_PERCENTILE,Zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zs.DEFAULT_COLLECTION_PERCENTILE=10,Zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zs.DEFAULT=new Zs(TI,Zs.DEFAULT_COLLECTION_PERCENTILE,Zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zs.DISABLED=new Zs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new of(0)}static cr(){return new of(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3="LruGarbageCollector",eB=1048576;function s3([t,e],[r,n]){const i=Qr(t,r);return i===0?Qr(e,n):i}class tB{constructor(e){this.Ir=e,this.buffer=new zi(s3),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();s3(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class rB{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Kt(i3,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){vf(r)?Kt(i3,"Ignoring IndexedDB error during garbage collection: ",r):await yf(r)}await this.Vr(3e5)})}}class nB{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return xt.resolve(a2.ce);const n=new tB(r);return this.mr.forEachTarget(e,i=>n.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>n.Ar(i))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Kt("LruGarbageCollector","Garbage collection skipped; disabled"),xt.resolve(n3)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Kt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n3):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,i,s,a,o,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Kt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(n=d,o=Date.now(),this.removeTargets(e,n,r))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(d=>(c=Date.now(),Gh()<=Xr.DEBUG&&Kt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),xt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function iB(t,e){return new nB(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(){this.changes=new Ah(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Ki.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?xt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&M0(n.mutation,i,ka.empty(),qn.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Jr()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Jr()){const i=Xu();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(s=>{let a=y0();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Xu();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Jr()))}populateOverlays(e,r,n){const i=[];return n.forEach(s=>{r.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,i){let s=Kl();const a=D0(),o=function(){return D0()}();return r.forEach((l,c)=>{const h=n.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Tu)?s=s.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),M0(h.mutation,c,h.mutation.getFieldMask(),qn.now())):a.set(c.key,ka.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>a.set(c,h)),r.forEach((c,h)=>o.set(c,new aB(h,a.get(c)??null))),o))}recalculateAndSaveOverlays(e,r){const n=D0();let i=new ti((a,o)=>a-o),s=Jr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let h=n.get(l)||ka.empty();h=o.applyToLocalView(c,h),n.set(l,h);const d=(i.get(o.batchId)||Jr()).add(l);i=i.insert(o.batchId,d)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,h=l.value,d=iI();h.forEach(p=>{if(!s.has(p)){const f=dI(r.get(p),n.get(p));f!==null&&d.set(p,f),s=s.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return xt.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(a){return fr.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):ZC(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-s.size):xt.resolve(Xu());let o=yp,l=s;return a.next(c=>xt.forEach(c,(h,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(h)?xt.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Jr())).next(h=>({batchId:o,changes:nI(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new fr(r)).next(n=>{let i=y0();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const s=r.collectionGroup;let a=y0();return this.indexManager.getCollectionParents(e,s).next(o=>xt.forEach(o,l=>{const c=function(d,p){return new wf(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,n,i).next(h=>{h.forEach((d,p)=>{a=a.insert(d,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,i))).next(a=>{s.forEach((l,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,Ki.newInvalidDocument(h)))});let o=y0();return a.forEach((l,c)=>{const h=s.get(l);h!==void 0&&M0(h.mutation,c,ka.empty(),qn.now()),u2(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return xt.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Ra(i.createTime)}}(r)),xt.resolve()}getNamedQuery(e,r){return xt.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(i){return{name:i.name,query:Q9(i.bundledQuery),readTime:Ra(i.readTime)}}(r)),xt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(){this.overlays=new ti(fr.comparator),this.qr=new Map}getOverlay(e,r){return xt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Xu();return xt.forEach(r,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,s)=>{this.St(e,r,s)}),xt.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),xt.resolve()}getOverlaysForCollection(e,r,n){const i=Xu(),s=r.length+1,a=new fr(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>n&&i.set(l.getKey(),l)}return xt.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let s=new ti((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let h=s.get(c.largestBatchId);h===null&&(h=Xu(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const o=Xu(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>o.set(c,h)),!(o.size()>=i)););return xt.resolve(o)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new k9(r,n));let s=this.qr.get(r);s===void 0&&(s=Jr(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(){this.sessionToken=ds.EMPTY_BYTE_STRING}getSessionToken(e){return xt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,xt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.Qr=new zi($i.$r),this.Ur=new zi($i.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new $i(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new $i(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new fr(new Cn([])),n=new $i(r,e),i=new $i(r,e+1),s=[];return this.Ur.forEachInRange([n,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new fr(new Cn([])),n=new $i(r,e),i=new $i(r,e+1);let s=Jr();return this.Ur.forEachInRange([n,i],a=>{s=s.add(a.key)}),s}containsKey(e){const r=new $i(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class $i{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return fr.comparator(e.key,r.key)||Qr(e.Yr,r.Yr)}static Kr(e,r){return Qr(e.Yr,r.Yr)||fr.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new zi($i.$r)}checkEmpty(e){return xt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new T9(s,r,n,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new $i(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return xt.resolve(a)}lookupMutationBatch(e,r){return xt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ei(n),s=i<0?0:i;return xt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return xt.resolve(this.mutationQueue.length===0?M_:this.tr-1)}getAllMutationBatches(e){return xt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new $i(r,0),i=new $i(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,i],a=>{const o=this.Xr(a.Yr);s.push(o)}),xt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new zi(Qr);return r.forEach(i=>{const s=new $i(i,0),a=new $i(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{n=n.add(o.Yr)})}),xt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let s=n;fr.isDocumentKey(s)||(s=s.child(""));const a=new $i(new fr(s),0);let o=new zi(Qr);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===i&&(o=o.add(l.Yr)),!0)},a),xt.resolve(this.ti(o))}ti(e){const r=[];return e.forEach(n=>{const i=this.Xr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){nn(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return xt.forEach(r.mutations,i=>{const s=new $i(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new $i(r,0),i=this.Zr.firstAfterOrEqual(n);return xt.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,xt.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e){this.ri=e,this.docs=function(){return new ti(fr.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),s=i?i.size:0,a=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return xt.resolve(n?n.document.mutableCopy():Ki.newInvalidDocument(r))}getEntries(e,r){let n=Kl();return r.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():Ki.newInvalidDocument(i))}),xt.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let s=Kl();const a=r.path,o=new fr(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||$O(HO(h),n)<=0||(i.has(h.key)||u2(r,h))&&(s=s.insert(h.key,h.mutableCopy()))}return xt.resolve(s)}getAllFromCollectionGroup(e,r,n,i){gr(9500)}ii(e,r){return xt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new fB(this)}getSize(e){return xt.resolve(this.size)}}class fB extends sB{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),xt.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e){this.persistence=e,this.si=new Ah(r=>U_(r),V_),this.lastRemoteSnapshotVersion=br.min(),this.highestTargetId=0,this.oi=0,this._i=new W_,this.targetCount=0,this.ai=of.ur()}forEachTarget(e,r){return this.si.forEach((n,i)=>r(i)),xt.resolve()}getLastRemoteSnapshotVersion(e){return xt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),xt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),xt.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new of(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,xt.resolve()}updateTargetData(e,r){return this.Pr(r),xt.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,xt.resolve()}removeTargets(e,r,n){let i=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),xt.waitFor(s).next(()=>i)}getTargetCount(e){return xt.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return xt.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),xt.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),xt.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),xt.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return xt.resolve(n)}containsKey(e,r){return xt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,r){this.ui={},this.overlays={},this.ci=new a2(0),this.li=!1,this.li=!0,this.hi=new uB,this.referenceDelegate=e(this),this.Pi=new pB(this),this.indexManager=new J9,this.remoteDocumentCache=function(i){return new dB(i)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new X9(r),this.Ii=new lB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new cB,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new hB(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Kt("MemoryPersistence","Starting transaction:",e);const i=new mB(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,r){return xt.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class mB extends WO{constructor(e){super(),this.currentSequenceNumber=e}}class K_{constructor(e){this.persistence=e,this.Ri=new W_,this.Vi=null}static mi(e){return new K_(e)}get fi(){if(this.Vi)return this.Vi;throw gr(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),xt.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),xt.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),xt.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(i=>this.fi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xt.forEach(this.fi,n=>{const i=fr.fromPath(n);return this.gi(e,i).next(s=>{s||r.removeEntry(i,br.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return xt.or([()=>xt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class tx{constructor(e,r){this.persistence=e,this.pi=new Ah(n=>YO(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=iB(this,r)}static mi(e,r){return new tx(e,r)}Ei(){}di(e){return xt.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(i=>n+i))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return xt.forEach(this.pi,(n,i)=>this.br(e,n,i).next(s=>s?xt.resolve():r(i)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,r).next(o=>{o||(n++,s.removeEntry(a,br.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),xt.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),xt.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),xt.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),xt.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=r1(e.data.value)),r}br(e,r,n){return xt.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return xt.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=i}static As(e,r){let n=Jr(),i=Jr();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new G_(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return uM()?8:KO(js())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,i){const s={result:null};return this.ys(e,r).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,r,i,n).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new gB;return this.Ss(e,r,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,r,a,o.size)})}).next(()=>s.result)}bs(e,r,n,i){return n.documentReadCount<this.fs?(Gh()<=Xr.DEBUG&&Kt("QueryEngine","SDK will not create cache indexes for query:",Yh(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),xt.resolve()):(Gh()<=Xr.DEBUG&&Kt("QueryEngine","Query:",Yh(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(Gh()<=Xr.DEBUG&&Kt("QueryEngine","The SDK decides to create cache indexes for query:",Yh(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nl(r))):xt.resolve())}ys(e,r){if(KE(r))return xt.resolve(null);let n=nl(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=J1(r,null,"F"),n=nl(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const a=Jr(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.Ds(r,o);return this.Cs(r,c,a,l.readTime)?this.ys(e,J1(r,null,"F")):this.vs(e,c,r,l)}))})))}ws(e,r,n,i){return KE(r)||i.isEqual(br.min())?xt.resolve(null):this.ps.getDocuments(e,n).next(s=>{const a=this.Ds(r,s);return this.Cs(r,a,n,i)?xt.resolve(null):(Gh()<=Xr.DEBUG&&Kt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Yh(r)),this.vs(e,a,r,zO(i,yp)).next(o=>o))})}Ds(e,r){let n=new zi(tI(e));return r.forEach((i,s)=>{u2(e,s)&&(n=n.add(s))}),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,r,n){return Gh()<=Xr.DEBUG&&Kt("QueryEngine","Using full collection scan to execute query:",Yh(r)),this.ps.getDocumentsMatchingQuery(e,r,hu.min(),n)}vs(e,r,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(s=>(r.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="LocalStore",yB=3e8;class vB{constructor(e,r,n,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new ti(Qr),this.xs=new Ah(s=>U_(s),V_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oB(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function wB(t,e,r,n){return new vB(t,e,r,n)}async function CI(t,e){const r=Tr(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const a=[],o=[];let l=Jr();for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return r.localDocuments.getDocuments(n,l).next(c=>({Ls:c,removedBatchIds:a,addedBatchIds:o}))})})}function _B(t,e){const r=Tr(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,c,h){const d=c.batch,p=d.keys();let f=xt.resolve();return p.forEach(v=>{f=f.next(()=>h.getEntry(l,v)).next(x=>{const _=c.docVersions.get(v);nn(_!==null,48541),x.version.compareTo(_)<0&&(d.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Jr();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function II(t){const e=Tr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function bB(t,e){const r=Tr(t),n=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const o=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;o.push(r.Pi.removeMatchingKeys(s,h.removedDocuments,d).next(()=>r.Pi.addMatchingKeys(s,h.addedDocuments,d)));let f=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(ds.EMPTY_BYTE_STRING,br.min()).withLastLimboFreeSnapshotVersion(br.min()):h.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(h.resumeToken,n)),i=i.insert(d,f),function(x,_,w){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=yB?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,f,h)&&o.push(r.Pi.updateTargetData(s,f))});let l=Kl(),c=Jr();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,h))}),o.push(SB(s,a,e.documentUpdates).next(h=>{l=h.ks,c=h.qs})),!n.isEqual(br.min())){const h=r.Pi.getLastRemoteSnapshotVersion(s).next(d=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(h)}return xt.waitFor(o).next(()=>a.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(r.Ms=i,s))}function SB(t,e,r){let n=Jr(),i=Jr();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let a=Kl();return r.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(br.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Kt(Y_,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{ks:a,qs:i}})}function EB(t,e){const r=Tr(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=M_),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function AB(t,e){const r=Tr(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Pi.getTargetData(n,e).next(s=>s?(i=s,xt.resolve(i)):r.Pi.allocateTargetId(n).next(a=>(i=new Vc(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function Zw(t,e,r){const n=Tr(t),i=n.Ms.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!vf(a))throw a;Kt(Y_,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function a3(t,e,r){const n=Tr(t);let i=br.min(),s=Jr();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,h){const d=Tr(l),p=d.xs.get(h);return p!==void 0?xt.resolve(d.Ms.get(p)):d.Pi.getTargetData(c,h)}(n,a,nl(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(a,e,r?i:br.min(),r?s:Jr())).next(o=>(NB(n,p9(e),o),{documents:o,Qs:s})))}function NB(t,e,r){let n=t.Os.get(e)||br.min();r.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.Os.set(e,n)}class o3{constructor(){this.activeTargetIds=w9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TB{constructor(){this.Mo=new o3,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new o3,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3="ConnectivityMonitor";class c3{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Kt(l3,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Kt(l3,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ug=null;function e5(){return ug===null?ug=function(){return 268435456+Math.round(2147483648*Math.random())}():ug++,"0x"+ug.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="RestConnection",CB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IB{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===$w?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,r,n,i,s){const a=e5(),o=this.zo(e,r.toUriEncodedString());Kt(Uy,`Sending RPC '${e}' ${a}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:c}=new URL(o),h=mf(c);return this.Jo(e,o,l,n,h).then(d=>(Kt(Uy,`Received RPC '${e}' ${a}: `,d),d),d=>{throw rf(Uy,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",n),d})}Ho(e,r,n,i,s,a){return this.Go(e,r,n,i,s)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xf}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}zo(e,r){const n=CB[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="WebChannelConnection";class RB extends IB{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,s){const a=e5();return new Promise((o,l)=>{const c=new kC;c.setWithCredentials(!0),c.listenOnce(CC.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case t1.NO_ERROR:const d=c.getResponseJson();Kt(bs,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case t1.TIMEOUT:Kt(bs,`RPC '${e}' ${a} timed out`),l(new Dt(lt.DEADLINE_EXCEEDED,"Request time out"));break;case t1.HTTP_ERROR:const p=c.getStatus();if(Kt(bs,`RPC '${e}' ${a} failed with status:`,p,"response text:",c.getResponseText()),p>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const v=f==null?void 0:f.error;if(v&&v.status&&v.message){const x=function(w){const S=w.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(S)>=0?S:lt.UNKNOWN}(v.status);l(new Dt(x,v.message))}else l(new Dt(lt.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Dt(lt.UNAVAILABLE,"Connection failed."));break;default:gr(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Kt(bs,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(i);Kt(bs,`RPC '${e}' ${a} sending request:`,i),c.send(r,"POST",h,n,15)})}T_(e,r,n){const i=e5(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=RC(),o=PC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const h=s.join("");Kt(bs,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=a.createWebChannel(h,l);this.I_(d);let p=!1,f=!1;const v=new PB({Yo:_=>{f?Kt(bs,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(p||(Kt(bs,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),Kt(bs,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},Zo:()=>d.close()}),x=(_,w,S)=>{_.listen(w,N=>{try{S(N)}catch(j){setTimeout(()=>{throw j},0)}})};return x(d,x0.EventType.OPEN,()=>{f||(Kt(bs,`RPC '${e}' stream ${i} transport opened.`),v.o_())}),x(d,x0.EventType.CLOSE,()=>{f||(f=!0,Kt(bs,`RPC '${e}' stream ${i} transport closed`),v.a_(),this.E_(d))}),x(d,x0.EventType.ERROR,_=>{f||(f=!0,rf(bs,`RPC '${e}' stream ${i} transport errored. Name:`,_.name,"Message:",_.message),v.a_(new Dt(lt.UNAVAILABLE,"The operation could not be completed")))}),x(d,x0.EventType.MESSAGE,_=>{var w;if(!f){const S=_.data[0];nn(!!S,16349);const N=S,j=(N==null?void 0:N.error)||((w=N[0])==null?void 0:w.error);if(j){Kt(bs,`RPC '${e}' stream ${i} received error:`,j);const z=j.status;let W=function(A){const F=Ti[A];if(F!==void 0)return gI(F)}(z),b=j.message;W===void 0&&(W=lt.INTERNAL,b="Unknown error status: "+z+" with message "+j.message),f=!0,v.a_(new Dt(W,b)),d.close()}else Kt(bs,`RPC '${e}' stream ${i} received:`,S),v.u_(S)}}),x(o,IC.STAT_EVENT,_=>{_.stat===zw.PROXY?Kt(bs,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===zw.NOPROXY&&Kt(bs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function Vy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t){return new D9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,r,n=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-n);i>0&&Kt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3="PersistentStream";class PI{constructor(e,r,n,i,s,a,o,l){this.Mi=e,this.S_=n,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new X_(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===lt.RESOURCE_EXHAUSTED?(Wl(r.toString()),Wl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===lt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.D_===r&&this.G_(n,i)},n=>{e(()=>{const i=new Dt(lt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{n(()=>this.z_(i))}),this.stream.onMessage(i=>{n(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Kt(u3,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Kt(u3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LB extends PI{constructor(e,r,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=U9(this.serializer,e),n=function(s){if(!("targetChange"in s))return br.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?br.min():a.readTime?Ra(a.readTime):br.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=Jw(this.serializer),r.addTarget=function(s,a){let o;const l=a.target;if(o=Gw(l)?{documents:z9(s,l)}:{query:H9(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=vI(s,a.resumeToken);const c=Xw(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(br.min())>0){o.readTime=Z1(s,a.snapshotVersion.toTimestamp());const c=Xw(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=q9(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=Jw(this.serializer),r.removeTarget=e,this.q_(r)}}class jB extends PI{constructor(e,r,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return nn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=V9(e.writeResults,e.commitTime),n=Ra(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=Jw(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>SI(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{}class DB extends FB{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Dt(lt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,Qw(r,n),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Dt(lt.UNKNOWN,s.toString())})}Ho(e,r,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,Qw(r,n),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Dt(lt.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class MB{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wl(r),this.aa=!1):Kt("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="RemoteStore";class OB{constructor(e,r,n,i,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{n.enqueueAndForget(async()=>{Nh(this)&&(Kt(ph,"Restarting streams for network reachability change."),await async function(l){const c=Tr(l);c.Ea.add(4),await nm(c),c.Ra.set("Unknown"),c.Ea.delete(4),await m2(c)}(this))})}),this.Ra=new MB(n,i)}}async function m2(t){if(Nh(t))for(const e of t.da)await e(!0)}async function nm(t){for(const e of t.da)await e(!1)}function RI(t,e){const r=Tr(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),eb(r)?Z_(r):_f(r).O_()&&J_(r,e))}function Q_(t,e){const r=Tr(t),n=_f(r);r.Ia.delete(e),n.O_()&&LI(r,e),r.Ia.size===0&&(n.O_()?n.L_():Nh(r)&&r.Ra.set("Unknown"))}function J_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(br.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}_f(t).Y_(e)}function LI(t,e){t.Va.Ue(e),_f(t).Z_(e)}function Z_(t){t.Va=new R9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),_f(t).start(),t.Ra.ua()}function eb(t){return Nh(t)&&!_f(t).x_()&&t.Ia.size>0}function Nh(t){return Tr(t).Ea.size===0}function jI(t){t.Va=void 0}async function BB(t){t.Ra.set("Online")}async function UB(t){t.Ia.forEach((e,r)=>{J_(t,e)})}async function VB(t,e){jI(t),eb(t)?(t.Ra.ha(e),Z_(t)):t.Ra.set("Unknown")}async function zB(t,e,r){if(t.Ra.set("Online"),e instanceof yI&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))}(t,e)}catch(n){Kt(ph,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await rx(t,n)}else if(e instanceof s1?t.Va.Ze(e):e instanceof xI?t.Va.st(e):t.Va.tt(e),!r.isEqual(br.min()))try{const n=await II(t.localStore);r.compareTo(n)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(c);h&&s.Ia.set(c,h.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(ds.EMPTY_BYTE_STRING,h.snapshotVersion)),LI(s,l);const d=new Vc(h.target,l,c,h.sequenceNumber);J_(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Kt(ph,"Failed to raise snapshot:",n),await rx(t,n)}}async function rx(t,e,r){if(!vf(e))throw e;t.Ea.add(1),await nm(t),t.Ra.set("Offline"),r||(r=()=>II(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Kt(ph,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await m2(t)})}function FI(t,e){return e().catch(r=>rx(t,r,e))}async function g2(t){const e=Tr(t),r=mu(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:M_;for(;HB(e);)try{const i=await EB(e.localStore,n);if(i===null){e.Ta.length===0&&r.L_();break}n=i.batchId,$B(e,i)}catch(i){await rx(e,i)}DI(e)&&MI(e)}function HB(t){return Nh(t)&&t.Ta.length<10}function $B(t,e){t.Ta.push(e);const r=mu(t);r.O_()&&r.X_&&r.ea(e.mutations)}function DI(t){return Nh(t)&&!mu(t).x_()&&t.Ta.length>0}function MI(t){mu(t).start()}async function qB(t){mu(t).ra()}async function WB(t){const e=mu(t);for(const r of t.Ta)e.ea(r.mutations)}async function KB(t,e,r){const n=t.Ta.shift(),i=H_.from(n,e,r);await FI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await g2(t)}async function GB(t,e){e&&mu(t).X_&&await async function(n,i){if(function(a){return mI(a)&&a!==lt.ABORTED}(i.code)){const s=n.Ta.shift();mu(n).B_(),await FI(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await g2(n)}}(t,e),DI(t)&&MI(t)}async function h3(t,e){const r=Tr(t);r.asyncQueue.verifyOperationInProgress(),Kt(ph,"RemoteStore received new credentials");const n=Nh(r);r.Ea.add(3),await nm(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await m2(r)}async function YB(t,e){const r=Tr(t);e?(r.Ea.delete(2),await m2(r)):e||(r.Ea.add(2),await nm(r),r.Ra.set("Unknown"))}function _f(t){return t.ma||(t.ma=function(r,n,i){const s=Tr(r);return s.sa(),new LB(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:BB.bind(null,t),t_:UB.bind(null,t),r_:VB.bind(null,t),H_:zB.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),eb(t)?Z_(t):t.Ra.set("Unknown")):(await t.ma.stop(),jI(t))})),t.ma}function mu(t){return t.fa||(t.fa=function(r,n,i){const s=Tr(r);return s.sa(),new jB(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:qB.bind(null,t),r_:GB.bind(null,t),ta:WB.bind(null,t),na:KB.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await g2(t)):(await t.fa.stop(),t.Ta.length>0&&(Kt(ph,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,r,n,i,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new rl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,s){const a=Date.now()+n,o=new tb(e,r,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Dt(lt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rb(t,e){if(Wl("AsyncQueue",`${e}: ${t}`),vf(t))return new Dt(lt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{static emptySet(e){return new Pd(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||fr.comparator(r.key,n.key):(r,n)=>fr.comparator(r.key,n.key),this.keyedMap=y0(),this.sortedSet=new ti(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Pd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Pd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(){this.ga=new ti(fr.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):gr(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class lf{constructor(e,r,n,i,s,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,i,s){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new lf(e,r,Pd.emptySet(r),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&c2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class QB{constructor(){this.queries=f3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=Tr(r),s=i.queries;i.queries=f3(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new Dt(lt.ABORTED,"Firestore shutting down"))}}function f3(){return new Ah(t=>eI(t),c2)}async function nb(t,e){const r=Tr(t);let n=3;const i=e.query;let s=r.queries.get(i);s?!s.ba()&&e.Da()&&(n=2):(s=new XB,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(i,!0);break;case 1:s.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(a){const o=rb(a,`Initialization of query '${Yh(e.query)}' failed`);return void e.onError(o)}r.queries.set(i,s),s.Sa.push(e),e.va(r.onlineState),s.wa&&e.Fa(s.wa)&&sb(r)}async function ib(t,e){const r=Tr(t),n=e.query;let i=3;const s=r.queries.get(n);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function JB(t,e){const r=Tr(t);let n=!1;for(const i of e){const s=i.query,a=r.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(n=!0);a.wa=i}}n&&sb(r)}function ZB(t,e,r){const n=Tr(t),i=n.queries.get(e);if(i)for(const s of i.Sa)s.onError(r);n.queries.delete(e)}function sb(t){t.Ca.forEach(e=>{e.next()})}var t5,p3;(p3=t5||(t5={})).Ma="default",p3.Cache="cache";class ab{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new lf(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=lf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==t5.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.key=e}}class BI{constructor(e){this.key=e}}class eU{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Jr(),this.mutatedKeys=Jr(),this.eu=tI(e),this.tu=new Pd(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new d3,i=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),f=u2(this.query,d)?d:null,v=!!p&&this.mutatedKeys.has(p.key),x=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;p&&f?p.data.isEqual(f.data)?v!==x&&(n.track({type:3,doc:f}),_=!0):this.su(p,f)||(n.track({type:2,doc:f}),_=!0,(l&&this.eu(f,l)>0||c&&this.eu(f,c)<0)&&(o=!0)):!p&&f?(n.track({type:0,doc:f}),_=!0):p&&!f&&(n.track({type:1,doc:p}),_=!0,(l||c)&&(o=!0)),_&&(f?(a=a.add(f),s=x?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{tu:a,iu:n,Cs:o,mutatedKeys:s}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,d)=>function(f,v){const x=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gr(20277,{Rt:_})}};return x(f)-x(v)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(n),i=i??!1;const o=r&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,a.length!==0||c?{snapshot:new lf(this.query,e.tu,s,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new d3,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Jr(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new BI(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new OI(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=Jr();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return lf.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ob="SyncEngine";class tU{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class rU{constructor(e){this.key=e,this.hu=!1}}class nU{constructor(e,r,n,i,s,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ah(o=>eI(o),c2),this.Iu=new Map,this.Eu=new Set,this.du=new ti(fr.comparator),this.Au=new Map,this.Ru=new W_,this.Vu={},this.mu=new Map,this.fu=of.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function iU(t,e,r=!0){const n=qI(t);let i;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await UI(n,e,r,!0),i}async function sU(t,e){const r=qI(t);await UI(r,e,!0,!1)}async function UI(t,e,r,n){const i=await AB(t.localStore,nl(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await aU(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&r&&RI(t.remoteStore,i),o}async function aU(t,e,r,n,i){t.pu=(d,p,f)=>async function(x,_,w,S){let N=_.view.ru(w);N.Cs&&(N=await a3(x.localStore,_.query,!1).then(({documents:b})=>_.view.ru(b,N)));const j=S&&S.targetChanges.get(_.targetId),z=S&&S.targetMismatches.get(_.targetId)!=null,W=_.view.applyChanges(N,x.isPrimaryClient,j,z);return g3(x,_.targetId,W.au),W.snapshot}(t,d,p,f);const s=await a3(t.localStore,e,!0),a=new eU(e,s.Qs),o=a.ru(s.documents),l=rm.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),c=a.applyChanges(o,t.isPrimaryClient,l);g3(t,r,c.au);const h=new tU(e,r,a);return t.Tu.set(e,h),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),c.snapshot}async function oU(t,e,r){const n=Tr(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);if(s.length>1)return n.Iu.set(i.targetId,s.filter(a=>!c2(a,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Zw(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&Q_(n.remoteStore,i.targetId),r5(n,i.targetId)}).catch(yf)):(r5(n,i.targetId),await Zw(n.localStore,i.targetId,!0))}async function lU(t,e){const r=Tr(t),n=r.Tu.get(e),i=r.Iu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Q_(r.remoteStore,n.targetId))}async function cU(t,e,r){const n=gU(t);try{const i=await function(a,o){const l=Tr(a),c=qn.now(),h=o.reduce((f,v)=>f.add(v.key),Jr());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let v=Kl(),x=Jr();return l.Ns.getEntries(f,h).next(_=>{v=_,v.forEach((w,S)=>{S.isValidDocument()||(x=x.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,v)).next(_=>{d=_;const w=[];for(const S of o){const N=N9(S,d.get(S.key).overlayedDocument);N!=null&&w.push(new Tu(S.key,N,WC(N.value.mapValue),Ii.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,w,o)}).next(_=>{p=_;const w=_.applyToLocalDocumentSet(d,x);return l.documentOverlayCache.saveOverlays(f,_.batchId,w)})}).then(()=>({batchId:p.batchId,changes:nI(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let c=a.Vu[a.currentUser.toKey()];c||(c=new ti(Qr)),c=c.insert(o,l),a.Vu[a.currentUser.toKey()]=c}(n,i.batchId,r),await im(n,i.changes),await g2(n.remoteStore)}catch(i){const s=rb(i,"Failed to persist write");r.reject(s)}}async function VI(t,e){const r=Tr(t);try{const n=await bB(r.localStore,e);e.targetChanges.forEach((i,s)=>{const a=r.Au.get(s);a&&(nn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?nn(a.hu,14607):i.removedDocuments.size>0&&(nn(a.hu,42227),a.hu=!1))}),await im(r,n,e)}catch(n){await yf(n)}}function m3(t,e,r){const n=Tr(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=Tr(a);l.onlineState=o;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.Sa)p.va(o)&&(c=!0)}),c&&sb(l)}(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function uU(t,e,r){const n=Tr(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Au.get(e),s=i&&i.key;if(s){let a=new ti(fr.comparator);a=a.insert(s,Ki.newNoDocument(s,br.min()));const o=Jr().add(s),l=new f2(br.min(),new Map,new ti(Qr),a,o);await VI(n,l),n.du=n.du.remove(s),n.Au.delete(e),lb(n)}else await Zw(n.localStore,e,!1).then(()=>r5(n,e,r)).catch(yf)}async function hU(t,e){const r=Tr(t),n=e.batch.batchId;try{const i=await _B(r.localStore,e);HI(r,n,null),zI(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await im(r,i)}catch(i){await yf(i)}}async function dU(t,e,r){const n=Tr(t);try{const i=await function(a,o){const l=Tr(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(nn(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(n.localStore,e);HI(n,e,r),zI(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await im(n,i)}catch(i){await yf(i)}}function zI(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function HI(t,e,r){const n=Tr(t);let i=n.Vu[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(r?s.reject(r):s.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function r5(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||$I(t,n)})}function $I(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(Q_(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),lb(t))}function g3(t,e,r){for(const n of r)n instanceof OI?(t.Ru.addReference(n.key,e),fU(t,n)):n instanceof BI?(Kt(ob,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||$I(t,n.key)):gr(19791,{wu:n})}function fU(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Kt(ob,"New document in limbo: "+r),t.Eu.add(n),lb(t))}function lb(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new fr(Cn.fromString(e)),n=t.fu.next();t.Au.set(n,new rU(r)),t.du=t.du.insert(r,n),RI(t.remoteStore,new Vc(nl(l2(r.path)),n,"TargetPurposeLimboResolution",a2.ce))}}async function im(t,e,r){const n=Tr(t),i=[],s=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{a.push(n.pu(l,e,r).then(c=>{var h;if((c||r)&&n.isPrimaryClient){const d=c?!c.fromCache:(h=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:h.current;n.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=G_.As(l.targetId,c);s.push(d)}}))}),await Promise.all(a),n.Pu.H_(i),await async function(l,c){const h=Tr(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>xt.forEach(c,p=>xt.forEach(p.Es,f=>h.persistence.referenceDelegate.addReference(d,p.targetId,f)).next(()=>xt.forEach(p.ds,f=>h.persistence.referenceDelegate.removeReference(d,p.targetId,f)))))}catch(d){if(!vf(d))throw d;Kt(Y_,"Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const f=h.Ms.get(p),v=f.snapshotVersion,x=f.withLastLimboFreeSnapshotVersion(v);h.Ms=h.Ms.insert(p,x)}}}(n.localStore,s))}async function pU(t,e){const r=Tr(t);if(!r.currentUser.isEqual(e)){Kt(ob,"User change. New user:",e.toKey());const n=await CI(r.localStore,e);r.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new Dt(lt.CANCELLED,a))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await im(r,n.Ls)}}function mU(t,e){const r=Tr(t),n=r.Au.get(e);if(n&&n.hu)return Jr().add(n.key);{let i=Jr();const s=r.Iu.get(e);if(!s)return i;for(const a of s){const o=r.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function qI(t){const e=Tr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uU.bind(null,e),e.Pu.H_=JB.bind(null,e.eventManager),e.Pu.yu=ZB.bind(null,e.eventManager),e}function gU(t){const e=Tr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dU.bind(null,e),e}class nx{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=p2(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return wB(this.persistence,new xB,e.initialUser,this.serializer)}Cu(e){return new kI(K_.mi,this.serializer)}Du(e){return new TB}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nx.provider={build:()=>new nx};class xU extends nx{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){nn(this.persistence.referenceDelegate instanceof tx,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new rB(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Zs.withCacheSize(this.cacheSizeBytes):Zs.DEFAULT;return new kI(n=>tx.mi(n,r),this.serializer)}}class n5{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>m3(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=pU.bind(null,this.syncEngine),await YB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new QB}()}createDatastore(e){const r=p2(e.databaseInfo.databaseId),n=function(s){return new RB(s)}(e.databaseInfo);return function(s,a,o,l){return new DB(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,s,a,o){return new OB(n,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>m3(this.syncEngine,r,0),function(){return c3.v()?new c3:new kB}())}createSyncEngine(e,r){return function(i,s,a,o,l,c,h){const d=new nU(i,s,a,o,l,c);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const s=Tr(i);Kt(ph,"RemoteStore shutting down."),s.Ea.add(5),await nm(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}n5.provider={build:()=>new n5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Dt(lt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(i,s){const a=Tr(i),o={documents:s.map(d=>ex(a.serializer,d))},l=await a.Ho("BatchGetDocuments",a.serializer.databaseId,Cn.emptyPath(),o,s.length),c=new Map;l.forEach(d=>{const p=B9(a.serializer,d);c.set(p.key.toString(),p)});const h=[];return s.forEach(d=>{const p=c.get(d.toString());nn(!!p,55234,{key:d}),h.push(p)}),h}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new tm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const i=fr.fromPath(n);this.mutations.push(new pI(i,this.precondition(i)))}),await async function(n,i){const s=Tr(n),a={writes:i.map(o=>SI(s.serializer,o))};await s.Go("Commit",s.serializer.databaseId,Cn.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw gr(50498,{Gu:e.constructor.name});r=br.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new Dt(lt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(br.min())?Ii.exists(!1):Ii.updateTime(r):Ii.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(br.min()))throw new Dt(lt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ii.updateTime(r)}return Ii.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e,r,n,i,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=i,this.deferred=s,this.zu=n.maxAttempts,this.M_=new X_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new yU(this.datastore),r=this.Hu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(i=>{this.Yu(i)}))}).catch(n=>{this.Yu(n)})})}Hu(e){try{const r=this.updateFunction(e);return!Zp(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!mI(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu="FirestoreClient";class wU{constructor(e,r,n,i,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Ts.UNAUTHENTICATED,this.clientId=D_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async a=>{Kt(gu,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Kt(gu,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=rb(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function zy(t,e){t.asyncQueue.verifyOperationInProgress(),Kt(gu,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await CI(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function x3(t,e){t.asyncQueue.verifyOperationInProgress();const r=await _U(t);Kt(gu,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>h3(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>h3(e.remoteStore,i)),t._onlineComponents=e}async function _U(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Kt(gu,"Using user provided OfflineComponentProvider");try{await zy(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===lt.FAILED_PRECONDITION||i.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;rf("Error using user provided cache. Falling back to memory cache: "+r),await zy(t,new nx)}}else Kt(gu,"Using default OfflineComponentProvider"),await zy(t,new xU(void 0));return t._offlineComponents}async function ub(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Kt(gu,"Using user provided OnlineComponentProvider"),await x3(t,t._uninitializedComponentsProvider._online)):(Kt(gu,"Using default OnlineComponentProvider"),await x3(t,new n5))),t._onlineComponents}function bU(t){return ub(t).then(e=>e.syncEngine)}function SU(t){return ub(t).then(e=>e.datastore)}async function ix(t){const e=await ub(t),r=e.eventManager;return r.onListen=iU.bind(null,e.syncEngine),r.onUnlisten=oU.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=sU.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=lU.bind(null,e.syncEngine),r}function EU(t,e,r={}){const n=new rl;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new cb({next:p=>{h.Nu(),a.enqueueAndForget(()=>ib(s,d));const f=p.docs.has(o);!f&&p.fromCache?c.reject(new Dt(lt.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&p.fromCache&&l&&l.source==="server"?c.reject(new Dt(lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new ab(l2(o.path),h,{includeMetadataChanges:!0,qa:!0});return nb(s,d)}(await ix(t),t.asyncQueue,e,r,n)),n.promise}function AU(t,e,r={}){const n=new rl;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new cb({next:p=>{h.Nu(),a.enqueueAndForget(()=>ib(s,d)),p.fromCache&&l.source==="server"?c.reject(new Dt(lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new ab(o,h,{includeMetadataChanges:!0,qa:!0});return nb(s,d)}(await ix(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="firestore.googleapis.com",v3=!0;class w3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Dt(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KI,this.ssl=v3}else this.host=e.host,this.ssl=e.ssl??v3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<eB)throw new Dt(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WI(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Dt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Dt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Dt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class x2{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Dt(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Dt(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new IO;switch(n.type){case"firstParty":return new jO(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Dt(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=y3.get(r);n&&(Kt("ComponentProvider","Removing Datastore"),y3.delete(r),n.terminate())}(this),Promise.resolve()}}function NU(t,e,r,n={}){var c;t=Is(t,x2);const i=mf(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${r}`;i&&(vC(`https://${o}`),wC("Firestore",!0)),s.host!==KI&&s.host!==o&&rf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:n};if(!hh(l,a)&&(t._setSettings(l),n.mockUserToken)){let h,d;if(typeof n.mockUserToken=="string")h=n.mockUserToken,d=Ts.MOCK_USER;else{h=tM(n.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new Dt(lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ts(p)}t._authCredentials=new PO(new jC(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new tc(this.firestore,e,this._query)}}class Jn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new au(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}toJSON(){return{type:Jn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Jp(r,Jn._jsonSchema))return new Jn(e,n||null,new fr(Cn.fromString(r.referencePath)))}}Jn._jsonSchemaVersion="firestore/documentReference/1.0",Jn._jsonSchema={type:Pi("string",Jn._jsonSchemaVersion),referencePath:Pi("string")};class au extends tc{constructor(e,r,n){super(e,r,l2(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new fr(e))}withConverter(e){return new au(this.firestore,e,this._path)}}function vi(t,e,...r){if(t=Li(t),FC("collection","path",e),t instanceof x2){const n=Cn.fromString(e,...r);return LE(n),new au(t,null,n)}{if(!(t instanceof Jn||t instanceof au))throw new Dt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Cn.fromString(e,...r));return LE(n),new au(t.firestore,null,n)}}function Yr(t,e,...r){if(t=Li(t),arguments.length===1&&(e=D_.newId()),FC("doc","path",e),t instanceof x2){const n=Cn.fromString(e,...r);return RE(n),new Jn(t,null,new fr(n))}{if(!(t instanceof Jn||t instanceof au))throw new Dt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Cn.fromString(e,...r));return RE(n),new Jn(t.firestore,t instanceof au?t.converter:null,new fr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3="AsyncQueue";class b3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new X_(this,"async_queue_retry"),this._c=()=>{const n=Vy();n&&Kt(_3,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=Vy();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Vy();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new rl;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!vf(e))throw e;Kt(_3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,Wl("INTERNAL UNHANDLED ERROR: ",S3(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=tb.createAndSchedule(this,e,r,n,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&gr(47125,{Pc:S3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function S3(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class jo extends x2{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new b3,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b3(e),this._firestoreClient=void 0,await e}}}function TU(t,e){const r=typeof t=="object"?t:EC(),n=typeof t=="string"?t:e,i=j_(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=Z7("firestore");s&&NU(i,...s)}return i}function bf(t){if(t._terminated)throw new Dt(lt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kU(t),t._firestoreClient}function kU(t){var n,i,s;const e=t._freezeSettings(),r=function(o,l,c,h){return new JO(o,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,WI(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new wU(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Na(ds.fromBase64String(e))}catch(r){throw new Dt(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Na(ds.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Na._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jp(e,Na._jsonSchema))return Na.fromBase64String(e.bytes)}}Na._jsonSchemaVersion="firestore/bytes/1.0",Na._jsonSchema={type:Pi("string",Na._jsonSchemaVersion),bytes:Pi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Dt(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new as(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Dt(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Dt(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qr(this._lat,e._lat)||Qr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:il._jsonSchemaVersion}}static fromJSON(e){if(Jp(e,il._jsonSchema))return new il(e.latitude,e.longitude)}}il._jsonSchemaVersion="firestore/geoPoint/1.0",il._jsonSchema={type:Pi("string",il._jsonSchemaVersion),latitude:Pi("number"),longitude:Pi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:sl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jp(e,sl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new sl(e.vectorValues);throw new Dt(lt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}sl._jsonSchemaVersion="firestore/vectorValue/1.0",sl._jsonSchema={type:Pi("string",sl._jsonSchemaVersion),vectorValues:Pi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU=/^__.*__$/;class IU{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Tu(e,this.data,this.fieldMask,r,this.fieldTransforms):new em(e,this.data,r,this.fieldTransforms)}}class GI{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Tu(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function YI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gr(40011,{Ac:t})}}class hb{constructor(e,r,n,i,s,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return sx(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(YI(this.Ac)&&CU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class PU{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||p2(e)}Cc(e,r,n,i=!1){return new hb({Ac:e,methodName:r,Dc:n,path:as.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ef(t){const e=t._freezeSettings(),r=p2(t._databaseId);return new PU(t._databaseId,!!e.ignoreUndefinedProperties,r)}function y2(t,e,r,n,i,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,r,i);gb("Data must be an object, but it was:",a,n);const o=XI(n,a);let l,c;if(s.merge)l=new ka(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=i5(e,d,r);if(!a.contains(p))throw new Dt(lt.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);JI(h,p)||h.push(p)}l=new ka(h),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new IU(new Hs(o),l,c)}class v2 extends sm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof v2}}class db extends sm{_toFieldTransform(e){return new hI(e.path,new Sp)}isEqual(e){return e instanceof db}}class fb extends sm{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new Np(e.serializer,aI(e.serializer,this.Fc));return new hI(e.path,r)}isEqual(e){return e instanceof fb&&this.Fc===e.Fc}}function pb(t,e,r,n){const i=t.Cc(1,e,r);gb("Data must be an object, but it was:",i,n);const s=[],a=Hs.empty();Nu(n,(l,c)=>{const h=xb(e,l,r);c=Li(c);const d=i.yc(h);if(c instanceof v2)s.push(h);else{const p=am(c,d);p!=null&&(s.push(h),a.set(h,p))}});const o=new ka(s);return new GI(a,o,i.fieldTransforms)}function mb(t,e,r,n,i,s){const a=t.Cc(1,e,r),o=[i5(e,n,r)],l=[i];if(s.length%2!=0)throw new Dt(lt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)o.push(i5(e,s[p])),l.push(s[p+1]);const c=[],h=Hs.empty();for(let p=o.length-1;p>=0;--p)if(!JI(c,o[p])){const f=o[p];let v=l[p];v=Li(v);const x=a.yc(f);if(v instanceof v2)c.push(f);else{const _=am(v,x);_!=null&&(c.push(f),h.set(f,_))}}const d=new ka(c);return new GI(h,d,a.fieldTransforms)}function RU(t,e,r,n=!1){return am(r,t.Cc(n?4:3,e))}function am(t,e){if(QI(t=Li(t)))return gb("Unsupported field value:",e,t),XI(t,e);if(t instanceof sm)return function(n,i){if(!YI(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,i){const s=[];let a=0;for(const o of n){let l=am(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(n,i){if((n=Li(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return aI(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=qn.fromDate(n);return{timestampValue:Z1(i.serializer,s)}}if(n instanceof qn){const s=new qn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Z1(i.serializer,s)}}if(n instanceof il)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Na)return{bytesValue:vI(i.serializer,n._byteString)};if(n instanceof Jn){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:q_(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof sl)return function(a,o){return{mapValue:{fields:{[$C]:{stringValue:qC},[X1]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Sc("VectorValues must only contain numeric values.");return z_(o.serializer,c)})}}}}}}(n,i);throw i.Sc(`Unsupported field value: ${s2(n)}`)}(t,e)}function XI(t,e){const r={};return OC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nu(t,(n,i)=>{const s=am(i,e.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function QI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qn||t instanceof il||t instanceof Na||t instanceof Jn||t instanceof sm||t instanceof sl)}function gb(t,e,r){if(!QI(r)||!DC(r)){const n=s2(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function i5(t,e,r){if((e=Li(e))instanceof Sf)return e._internalPath;if(typeof e=="string")return xb(t,e);throw sx("Field path arguments must be of type string or ",t,!1,void 0,r)}const LU=new RegExp("[~\\*/\\[\\]]");function xb(t,e,r){if(e.search(LU)>=0)throw sx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Sf(...e.split("."))._internalPath}catch{throw sx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function sx(t,e,r,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new Dt(lt.INVALID_ARGUMENT,o+t+l)}function JI(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,r,n,i,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(w2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class jU extends ax{data(){return super.data()}}function w2(t,e){return typeof e=="string"?xb(t,e):e instanceof Sf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Dt(lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yb{}class vb extends yb{}function yd(t,e,...r){let n=[];e instanceof yb&&n.push(e),n=n.concat(r),function(s){const a=s.filter(l=>l instanceof wb).length,o=s.filter(l=>l instanceof _2).length;if(a>1||a>0&&o>0)throw new Dt(lt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class _2 extends vb{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new _2(e,r,n)}_apply(e){const r=this._parse(e);return eP(e._query,r),new tc(e.firestore,e.converter,Yw(e._query,r))}_parse(e){const r=Ef(e.firestore);return function(s,a,o,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Dt(lt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){N3(d,h);const v=[];for(const x of d)v.push(A3(l,s,x));p={arrayValue:{values:v}}}else p=A3(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||N3(d,h),p=RU(o,a,d,h==="in"||h==="not-in");return Ci.create(c,h,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function FU(t,e,r){const n=e,i=w2("where",t);return _2._create(i,n,r)}class wb extends yb{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new wb(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Lo.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)eP(a,l),a=Yw(a,l)}(e._query,r),new tc(e.firestore,e.converter,Yw(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _b extends vb{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new _b(e,r)}_apply(e){const r=function(i,s,a){if(i.startAt!==null)throw new Dt(lt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Dt(lt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bp(s,a)}(e._query,this._field,this._direction);return new tc(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new wf(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function DU(t,e="asc"){const r=e,n=w2("orderBy",t);return _b._create(n,r)}class bb extends vb{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new bb(e,r,n)}_apply(e){return new tc(e.firestore,e.converter,J1(e._query,this._limit,this._limitType))}}function MU(t){return VO("limit",t),bb._create("limit",t,"F")}function A3(t,e,r){if(typeof(r=Li(r))=="string"){if(r==="")throw new Dt(lt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZC(e)&&r.indexOf("/")!==-1)throw new Dt(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Cn.fromString(r));if(!fr.isDocumentKey(n))throw new Dt(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return VE(t,new fr(n))}if(r instanceof Jn)return VE(t,r._key);throw new Dt(lt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${s2(r)}.`)}function N3(t,e){if(!Array.isArray(t)||t.length===0)throw new Dt(lt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eP(t,e){const r=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Dt(lt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Dt(lt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class tP{convertValue(e,r="none"){switch(pu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(fu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw gr(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Nu(e,(i,s)=>{n[i]=this.convertValue(s,r)}),n}convertVectorValue(e){var n,i,s;const r=(s=(i=(n=e.fields)==null?void 0:n[X1].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>wi(a.doubleValue));return new sl(r)}convertGeoPoint(e){return new il(wi(e.latitude),wi(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=o2(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(vp(e));default:return null}}convertTimestamp(e){const r=du(e);return new qn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Cn.fromString(e);nn(NI(n),9688,{name:e});const i=new wp(n.get(1),n.get(3)),s=new fr(n.popFirst(5));return i.isEqual(r)||Wl(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class OU extends tP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Na(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,r)}}class vd{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ou extends ax{constructor(e,r,n,i,s,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new a1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(w2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Dt(lt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=ou._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}ou._jsonSchemaVersion="firestore/documentSnapshot/1.0",ou._jsonSchema={type:Pi("string",ou._jsonSchemaVersion),bundleSource:Pi("string","DocumentSnapshot"),bundleName:Pi("string"),bundle:Pi("string")};class a1 extends ou{data(e={}){return super.data(e)}}class th{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new vd(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new a1(this._firestore,this._userDataWriter,n.key,n,new vd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Dt(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new a1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new vd(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new a1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new vd(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:BU(o.type),doc:l,oldIndex:c,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Dt(lt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=th._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=D_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function BU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gr(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t){t=Is(t,Jn);const e=Is(t.firestore,jo);return EU(bf(e),t._key).then(r=>rP(e,t,r))}th._jsonSchemaVersion="firestore/querySnapshot/1.0",th._jsonSchema={type:Pi("string",th._jsonSchemaVersion),bundleSource:Pi("string","QuerySnapshot"),bundleName:Pi("string"),bundle:Pi("string")};class S2 extends tP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Na(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,r)}}function Tp(t){t=Is(t,tc);const e=Is(t.firestore,jo),r=bf(e),n=new S2(e);return ZI(t._query),AU(r,t._query).then(i=>new th(e,n,t,i))}function Af(t,e,r){t=Is(t,Jn);const n=Is(t.firestore,jo),i=b2(t.converter,e,r);return lm(n,[y2(Ef(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Ii.none())])}function Ga(t,e,r,...n){t=Is(t,Jn);const i=Is(t.firestore,jo),s=Ef(i);let a;return a=typeof(e=Li(e))=="string"||e instanceof Sf?mb(s,"updateDoc",t._key,e,r,n):pb(s,"updateDoc",t._key,e),lm(i,[a.toMutation(t._key,Ii.exists(!0))])}function kc(t){return lm(Is(t.firestore,jo),[new tm(t._key,Ii.none())])}function Yo(t,e){const r=Is(t.firestore,jo),n=Yr(t),i=b2(t.converter,e);return lm(r,[y2(Ef(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Ii.exists(!1))]).then(()=>n)}function Uh(t,...e){var l,c,h;t=Li(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||E3(e[n])||(r=e[n++]);const i={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(E3(e[n])){const d=e[n];e[n]=(l=d.next)==null?void 0:l.bind(d),e[n+1]=(c=d.error)==null?void 0:c.bind(d),e[n+2]=(h=d.complete)==null?void 0:h.bind(d)}let s,a,o;if(t instanceof Jn)a=Is(t.firestore,jo),o=l2(t._key.path),s={next:d=>{e[n]&&e[n](rP(a,t,d))},error:e[n+1],complete:e[n+2]};else{const d=Is(t,tc);a=Is(d.firestore,jo),o=d._query;const p=new S2(a);s={next:f=>{e[n]&&e[n](new th(a,p,d,f))},error:e[n+1],complete:e[n+2]},ZI(t._query)}return function(p,f,v,x){const _=new cb(x),w=new ab(f,_,v);return p.asyncQueue.enqueueAndForget(async()=>nb(await ix(p),w)),()=>{_.Nu(),p.asyncQueue.enqueueAndForget(async()=>ib(await ix(p),w))}}(bf(a),o,i,s)}function lm(t,e){return function(n,i){const s=new rl;return n.asyncQueue.enqueueAndForget(async()=>cU(await bU(n),i,s)),s.promise}(bf(t),e)}function rP(t,e,r){const n=r.docs.get(e._key),i=new S2(t);return new ou(t,i,e._key,n,new vd(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Ef(e)}set(e,r,n){this._verifyNotCommitted();const i=zc(e,this._firestore),s=b2(i.converter,r,n),a=y2(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(a.toMutation(i._key,Ii.none())),this}update(e,r,n,...i){this._verifyNotCommitted();const s=zc(e,this._firestore);let a;return a=typeof(r=Li(r))=="string"||r instanceof Sf?mb(this._dataReader,"WriteBatch.update",s._key,r,n,i):pb(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(a.toMutation(s._key,Ii.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=zc(e,this._firestore);return this._mutations=this._mutations.concat(new tm(r._key,Ii.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Dt(lt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zc(t,e){if((t=Li(t)).firestore!==e)throw new Dt(lt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=Ef(e)}get(e){const r=zc(e,this._firestore),n=new OU(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return gr(24041);const s=i[0];if(s.isFoundDocument())return new ax(this._firestore,n,s.key,s,r.converter);if(s.isNoDocument())return new ax(this._firestore,n,r._key,null,r.converter);throw gr(18433,{doc:s})})}set(e,r,n){const i=zc(e,this._firestore),s=b2(i.converter,r,n),a=y2(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,n);return this._transaction.set(i._key,a),this}update(e,r,n,...i){const s=zc(e,this._firestore);let a;return a=typeof(r=Li(r))=="string"||r instanceof Sf?mb(this._dataReader,"Transaction.update",s._key,r,n,i):pb(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(e){const r=zc(e,this._firestore);return this._transaction.delete(r._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU extends zU{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=zc(e,this._firestore),n=new S2(this._firestore);return super.get(e).then(i=>new ou(this._firestore,n,r._key,i._document,new vd(!1,!1),r.converter))}}function nP(t,e,r){t=Is(t,jo);const n={...UU,...r};return function(s){if(s.maxAttempts<1)throw new Dt(lt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,a,o){const l=new rl;return s.asyncQueue.enqueueAndForget(async()=>{const c=await SU(s);new vU(s.asyncQueue,c,o,a,l).ju()}),l.promise}(bf(t),i=>e(new HU(t,i)),n)}function yi(){return new db("serverTimestamp")}function iP(t){return new fb("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(t){return bf(t=Is(t,jo)),new VU(t,e=>lm(t,e))}(function(e,r=!0){(function(i){xf=i})(gf),tf(new dh("firestore",(n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new jo(new RO(n.getProvider("auth-internal")),new FO(a,n.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Dt(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wp(c.options.projectId,h)}(a,i),a);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),iu(kE,CE,e),iu(kE,CE,"esm2020")})();function sP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $U=sP,aP=new Xp("auth","Firebase",sP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=new R_("@firebase/auth");function qU(t,...e){ox.logLevel<=Xr.WARN&&ox.warn(`Auth (${gf}): ${t}`,...e)}function o1(t,...e){ox.logLevel<=Xr.ERROR&&ox.error(`Auth (${gf}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(t,...e){throw Sb(t,...e)}function al(t,...e){return Sb(t,...e)}function oP(t,e,r){const n={...$U(),[e]:r};return new Xp("auth","Firebase",n).create(e,{appName:t.name})}function lu(t){return oP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sb(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return aP.create(t,...e)}function Ar(t,e,...r){if(!t)throw Sb(e,...r)}function Rl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw o1(e),new Error(e)}function Yl(t,e){t||Rl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function WU(){return T3()==="http:"||T3()==="https:"}function T3(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WU()||oM()||"connection"in navigator)?navigator.onLine:!0}function GU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,r){this.shortDelay=e,this.longDelay=r,Yl(r>e,"Short delay should be less than long delay!"),this.isMobile=iM()||lM()}get(){return KU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(t,e){Yl(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QU=new cm(3e4,6e4);function E2(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Nf(t,e,r,n,i={}){return cP(t,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=Qp({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return aM()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&mf(t.emulatorConfig.host)&&(c.credentials="include"),lP.fetch()(await hP(t,t.config.apiHost,r,o),c)})}async function cP(t,e,r){t._canInitEmulator=!1;const n={...YU,...e};try{const i=new JU(t),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw hg(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw hg(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw hg(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw hg(t,"user-disabled",a);const h=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw oP(t,h,c);Gl(t,h)}}catch(i){if(i instanceof ec)throw i;Gl(t,"network-request-failed",{message:String(i)})}}async function uP(t,e,r,n,i={}){const s=await Nf(t,e,r,n,i);return"mfaPendingCredential"in s&&Gl(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function hP(t,e,r,n){const i=`${e}${r}?${n}`,s=t,a=s.config.emulator?Eb(t.config,i):`${t.config.apiScheme}://${i}`;return XU.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class JU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(al(this.auth,"network-request-failed")),QU.get())})}}function hg(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=al(t,e,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZU(t,e){return Nf(t,"POST","/v1/accounts:delete",e)}async function lx(t,e){return Nf(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eV(t,e=!1){const r=Li(t),n=await r.getIdToken(e),i=Ab(n);Ar(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:B0($y(i.auth_time)),issuedAtTime:B0($y(i.iat)),expirationTime:B0($y(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function $y(t){return Number(t)*1e3}function Ab(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return o1("JWT malformed, contained fewer than 3 sections"),null;try{const i=mC(r);return i?JSON.parse(i):(o1("Failed to decode base64 JWT payload"),null)}catch(i){return o1("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function k3(t){const e=Ab(t);return Ar(e,"internal-error"),Ar(typeof e.exp<"u","internal-error"),Ar(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kp(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ec&&tV(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function tV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=B0(this.lastLoginAt),this.creationTime=B0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(t){var d;const e=t.auth,r=await t.getIdToken(),n=await kp(t,lx(e,{idToken:r}));Ar(n==null?void 0:n.users.length,e,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?dP(i.providerUserInfo):[],a=iV(t.providerData,s),o=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),c=o?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new a5(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function nV(t){const e=Li(t);await cx(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iV(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function dP(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sV(t,e){const r=await cP(t,{},async()=>{const n=Qp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await hP(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return t.emulatorConfig&&mf(t.emulatorConfig.host)&&(l.credentials="include"),lP.fetch()(a,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function aV(t,e){return Nf(t,"POST","/v2/accounts:revokeToken",E2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ar(e.idToken,"internal-error"),Ar(typeof e.idToken<"u","internal-error"),Ar(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):k3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ar(e.length!==0,"internal-error");const r=k3(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ar(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await sV(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,a=new Rd;return n&&(Ar(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(Ar(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Ar(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rd,this.toJSON())}_performRefresh(){return Rl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t,e){Ar(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class To{constructor({uid:e,auth:r,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new rV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new a5(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await kp(this,this.stsTokenManager.getToken(this.auth,e));return Ar(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return eV(this,e)}reload(){return nV(this)}_assign(e){this!==e&&(Ar(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new To({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){Ar(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await cx(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Eo(this.auth.app))return Promise.reject(lu(this.auth));const e=await this.getIdToken();return await kp(this,ZU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,i=r.email??void 0,s=r.phoneNumber??void 0,a=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,c=r.createdAt??void 0,h=r.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:f,providerData:v,stsTokenManager:x}=r;Ar(d&&x,e,"internal-error");const _=Rd.fromJSON(this.name,x);Ar(typeof d=="string",e,"internal-error"),bc(n,e.name),bc(i,e.name),Ar(typeof p=="boolean",e,"internal-error"),Ar(typeof f=="boolean",e,"internal-error"),bc(s,e.name),bc(a,e.name),bc(o,e.name),bc(l,e.name),bc(c,e.name),bc(h,e.name);const w=new To({uid:d,auth:e,email:i,emailVerified:p,displayName:n,isAnonymous:f,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:_,createdAt:c,lastLoginAt:h});return v&&Array.isArray(v)&&(w.providerData=v.map(S=>({...S}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,r,n=!1){const i=new Rd;i.updateFromServerResponse(r);const s=new To({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await cx(s),s}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];Ar(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?dP(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Rd;o.updateFromIdToken(n);const l=new To({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new a5(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=new Map;function Ll(t){Yl(t instanceof Function,"Expected a class definition");let e=C3.get(t);return e?(Yl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,C3.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}fP.type="NONE";const I3=fP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t,e,r){return`firebase:${t}:${e}:${r}`}class Ld{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=l1(this.userKey,i.apiKey,s),this.fullPersistenceKey=l1("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await lx(this.auth,{idToken:e}).catch(()=>{});return r?To._fromGetAccountInfoResponse(this.auth,r,e):null}return To._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ld(Ll(I3),e,n);const i=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ll(I3);const a=l1(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const h=await c._get(a);if(h){let d;if(typeof h=="string"){const p=await lx(e,{idToken:h}).catch(()=>{});if(!p)break;d=await To._fromGetAccountInfoResponse(e,p,h)}else d=To._fromJSON(e,h);c!==s&&(o=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ld(s,e,n):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new Ld(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vP(e))return"Blackberry";if(wP(e))return"Webos";if(mP(e))return"Safari";if((e.includes("chrome/")||gP(e))&&!e.includes("edge/"))return"Chrome";if(yP(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function pP(t=js()){return/firefox\//i.test(t)}function mP(t=js()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gP(t=js()){return/crios\//i.test(t)}function xP(t=js()){return/iemobile/i.test(t)}function yP(t=js()){return/android/i.test(t)}function vP(t=js()){return/blackberry/i.test(t)}function wP(t=js()){return/webos/i.test(t)}function Nb(t=js()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oV(t=js()){var e;return Nb(t)&&!!((e=window.navigator)!=null&&e.standalone)}function lV(){return cM()&&document.documentMode===10}function _P(t=js()){return Nb(t)||yP(t)||wP(t)||vP(t)||/windows phone/i.test(t)||xP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(t,e=[]){let r;switch(t){case"Browser":r=P3(js());break;case"Worker":r=`${P3(js())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${gf}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uV(t,e={}){return Nf(t,"GET","/v2/passwordPolicy",E2(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=6;class dV{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??hV,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R3(this),this.idTokenSubscription=new R3(this),this.beforeStateQueue=new cV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ll(r)),this._initializationPromise=this.queue(async()=>{var n,i,s;if(!this._deleted&&(this.persistenceManager=await Ld.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await lx(this,{idToken:e}),n=await To._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Eo(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(n=l.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ar(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await cx(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Eo(this.app))return Promise.reject(lu(this));const r=e?Li(e):null;return r&&Ar(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ar(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Eo(this.app)?Promise.reject(lu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Eo(this.app)?Promise.reject(lu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ll(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uV(this),r=new dV(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xp("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await aV(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ll(e)||this._popupRedirectResolver;Ar(r,this,"argument-error"),this.redirectPersistenceManager=await Ld.create(this,[Ll(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ar(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,i);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ar(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(Eo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&qU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function A2(t){return Li(t)}class R3{constructor(e){this.auth=e,this.observer=null,this.addObserver=xM(r=>this.observer=r)}get next(){return Ar(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pV(t){Tb=t}function mV(t){return Tb.loadJS(t)}function gV(){return Tb.gapiScript}function xV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(t,e){const r=j_(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),s=r.getOptions();if(hh(s,e??{}))return i;Gl(i,"already-initialized")}return r.initialize({options:e})}function vV(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Ll);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function wV(t,e,r){const n=A2(t);Ar(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=SP(e),{host:a,port:o}=_V(e),l=o===null?"":`:${o}`,c={url:`${s}//${a}${l}/`},h=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Ar(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ar(hh(c,n.config.emulator)&&hh(h,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=c,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,mf(a)?(vC(`${s}//${a}${l}`),wC("Auth",!0)):bV()}function SP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _V(t){const e=SP(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:L3(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:L3(a)}}}function L3(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bV(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Rl("not implemented")}_getIdTokenResponse(e){return Rl("not implemented")}_linkToIdToken(e,r){return Rl("not implemented")}_getReauthenticationResolver(e){return Rl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jd(t,e){return uP(t,"POST","/v1/accounts:signInWithIdp",E2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="http://localhost";class mh extends EP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new mh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Gl("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...s}=r;if(!n||!i)return null;const a=new mh(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return jd(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,jd(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,jd(e,r)}buildRequest(){const e={requestUri:SV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Qp(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um extends AP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends um{constructor(){super("facebook.com")}static credential(e){return mh._fromParams({providerId:Rc.PROVIDER_ID,signInMethod:Rc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rc.credentialFromTaggedObject(e)}static credentialFromError(e){return Rc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rc.credential(e.oauthAccessToken)}catch{return null}}}Rc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends um{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return mh._fromParams({providerId:Lc.PROVIDER_ID,signInMethod:Lc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Lc.credentialFromTaggedObject(e)}static credentialFromError(e){return Lc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Lc.credential(r,n)}catch{return null}}}Lc.GOOGLE_SIGN_IN_METHOD="google.com";Lc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends um{constructor(){super("github.com")}static credential(e){return mh._fromParams({providerId:jc.PROVIDER_ID,signInMethod:jc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jc.credentialFromTaggedObject(e)}static credentialFromError(e){return jc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jc.credential(e.oauthAccessToken)}catch{return null}}}jc.GITHUB_SIGN_IN_METHOD="github.com";jc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends um{constructor(){super("twitter.com")}static credential(e,r){return mh._fromParams({providerId:Fc.PROVIDER_ID,signInMethod:Fc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Fc.credentialFromTaggedObject(e)}static credentialFromError(e){return Fc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Fc.credential(r,n)}catch{return null}}}Fc.TWITTER_SIGN_IN_METHOD="twitter.com";Fc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EV(t,e){return uP(t,"POST","/v1/accounts:signUp",E2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const s=await To._fromIdTokenResponse(e,n,i),a=j3(n);return new xu({user:s,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=j3(n);return new xu({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function j3(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(t){var i;if(Eo(t.app))return Promise.reject(lu(t));const e=A2(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new xu({user:e.currentUser,providerId:null,operationType:"signIn"});const r=await EV(e,{returnSecureToken:!0}),n=await xu._fromIdTokenResponse(e,"signIn",r,!0);return await e._updateCurrentUser(n.user),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux extends ec{constructor(e,r,n,i){super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,ux.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new ux(e,r,n,i)}}function TP(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ux._fromErrorAndOperation(t,s,e,n):s})}async function AV(t,e,r=!1){const n=await kp(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return xu._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NV(t,e,r=!1){const{auth:n}=t;if(Eo(n.app))return Promise.reject(lu(n));const i="reauthenticate";try{const s=await kp(t,TP(n,i,e,t),r);Ar(s.idToken,n,"internal-error");const a=Ab(s.idToken);Ar(a,n,"internal-error");const{sub:o}=a;return Ar(t.uid===o,n,"user-mismatch"),xu._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Gl(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TV(t,e,r=!1){if(Eo(t.app))return Promise.reject(lu(t));const n="signIn",i=await TP(t,n,e),s=await xu._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(s.user),s}function kV(t,e,r,n){return Li(t).onIdTokenChanged(e,r,n)}function CV(t,e,r){return Li(t).beforeAuthStateChanged(e,r)}function IV(t,e,r,n){return Li(t).onAuthStateChanged(e,r,n)}const hx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(hx,"1"),this.storage.removeItem(hx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=1e3,RV=10;class CP extends kP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_P(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);lV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,RV):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},PV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}CP.type="LOCAL";const LV=CP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP extends kP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}IP.type="SESSION";const PP=IP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new N2(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:s}=r.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async c=>c(r.origin,s)),l=await jV(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}N2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=kb("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(){return window}function DV(t){ol().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(){return typeof ol().WorkerGlobalScope<"u"&&typeof ol().importScripts=="function"}async function MV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function BV(){return RP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="firebaseLocalStorageDb",UV=1,dx="firebaseLocalStorage",jP="fbase_key";class hm{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function T2(t,e){return t.transaction([dx],e?"readwrite":"readonly").objectStore(dx)}function VV(){const t=indexedDB.deleteDatabase(LP);return new hm(t).toPromise()}function o5(){const t=indexedDB.open(LP,UV);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(dx,{keyPath:jP})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(dx)?e(n):(n.close(),await VV(),e(await o5()))})})}async function F3(t,e,r){const n=T2(t,!0).put({[jP]:e,value:r});return new hm(n).toPromise()}async function zV(t,e){const r=T2(t,!1).get(e),n=await new hm(r).toPromise();return n===void 0?null:n.value}function D3(t,e){const r=T2(t,!0).delete(e);return new hm(r).toPromise()}const HV=800,$V=3;class FP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await o5(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>$V)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=N2._getInstance(BV()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await MV(),!this.activeServiceWorker)return;this.sender=new FV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await o5();return await F3(e,hx,"1"),await D3(e,hx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>F3(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>zV(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>D3(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=T2(i,!1).getAll();return new hm(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FP.type="LOCAL";const qV=FP;new cm(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(t,e){return e?Ll(e):(Ar(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb extends EP{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jd(e,this._buildIdpRequest())}_linkToIdToken(e,r){return jd(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return jd(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function KV(t){return TV(t.auth,new Cb(t),t.bypassAuthState)}function GV(t){const{auth:e,user:r}=t;return Ar(r,e,"internal-error"),NV(r,new Cb(t),t.bypassAuthState)}async function YV(t){const{auth:e,user:r}=t;return Ar(r,e,"internal-error"),AV(r,new Cb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,r,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KV;case"linkViaPopup":case"linkViaRedirect":return YV;case"reauthViaPopup":case"reauthViaRedirect":return GV;default:Gl(this.auth,"internal-error")}}resolve(e){Yl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=new cm(2e3,1e4);class wd extends DP{constructor(e,r,n,i,s){super(e,r,i,s),this.provider=n,this.authWindow=null,this.pollId=null,wd.currentPopupAction&&wd.currentPopupAction.cancel(),wd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ar(e,this.auth,"internal-error"),e}async onExecution(){Yl(this.filter.length===1,"Popup operations only handle one event");const e=kb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(al(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(al(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(al(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XV.get())};e()}}wd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="pendingRedirect",c1=new Map;class JV extends DP{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=c1.get(this.auth._key());if(!e){try{const n=await ZV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}c1.set(this.auth._key(),e)}return this.bypassAuthState||c1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZV(t,e){const r=rz(e),n=tz(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function ez(t,e){c1.set(t._key(),e)}function tz(t){return Ll(t._redirectPersistence)}function rz(t){return l1(QV,t.config.apiKey,t.name)}async function nz(t,e,r=!1){if(Eo(t.app))return Promise.reject(lu(t));const n=A2(t),i=WV(n,e),a=await new JV(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=10*60*1e3;class sz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!az(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!MP(e)){const i=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(al(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iz&&this.cachedEventUids.clear(),this.cachedEventUids.has(M3(e))}saveEventToCache(e){this.cachedEventUids.add(M3(e)),this.lastProcessedEventTime=Date.now()}}function M3(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function az(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oz(t,e={}){return Nf(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cz=/^https?/;async function uz(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oz(t);for(const r of e)try{if(hz(r))return}catch{}Gl(t,"unauthorized-domain")}function hz(t){const e=s5(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!cz.test(r))return!1;if(lz.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz=new cm(3e4,6e4);function O3(){const t=ol().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function fz(t){return new Promise((e,r)=>{var i,s,a;function n(){O3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O3(),r(al(t,"network-request-failed"))},timeout:dz.get()})}if((s=(i=ol().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=ol().gapi)!=null&&a.load)n();else{const o=xV("iframefcb");return ol()[o]=()=>{gapi.load?n():r(al(t,"network-request-failed"))},mV(`${gV()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw u1=null,e})}let u1=null;function pz(t){return u1=u1||fz(t),u1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz=new cm(5e3,15e3),gz="__/auth/iframe",xz="emulator/auth/iframe",yz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wz(t){const e=t.config;Ar(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Eb(e,xz):`https://${t.config.authDomain}/${gz}`,n={apiKey:e.apiKey,appName:t.name,v:gf},i=vz.get(t.config.apiHost);i&&(n.eid=i);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Qp(n).slice(1)}`}async function _z(t){const e=await pz(t),r=ol().gapi;return Ar(r,t,"internal-error"),e.open({where:document.body,url:wz(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yz,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=al(t,"network-request-failed"),o=ol().setTimeout(()=>{s(a)},mz.get());function l(){ol().clearTimeout(o),i(n)}n.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Sz=500,Ez=600,Az="_blank",Nz="http://localhost";class B3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Tz(t,e,r,n=Sz,i=Ez){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...bz,width:n.toString(),height:i.toString(),top:s,left:a},c=js().toLowerCase();r&&(o=gP(c)?Az:r),pP(c)&&(e=e||Nz,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[f,v])=>`${p}${f}=${v},`,"");if(oV(c)&&o!=="_self")return kz(e||"",o),new B3(null);const d=window.open(e||"",o,h);Ar(d,t,"popup-blocked");try{d.focus()}catch{}return new B3(d)}function kz(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz="__/auth/handler",Iz="emulator/auth/handler",Pz=encodeURIComponent("fac");async function U3(t,e,r,n,i,s){Ar(t.config.authDomain,t,"auth-domain-config-required"),Ar(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:gf,eventId:i};if(e instanceof AP){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",gM(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))a[h]=d}if(e instanceof um){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await t._getAppCheckToken(),c=l?`#${Pz}=${encodeURIComponent(l)}`:"";return`${Rz(t)}?${Qp(o).slice(1)}${c}`}function Rz({config:t}){return t.emulator?Eb(t,Iz):`https://${t.authDomain}/${Cz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="webStorageSupport";class Lz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PP,this._completeRedirectFn=nz,this._overrideRedirectResult=ez}async _openPopup(e,r,n,i){var a;Yl((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await U3(e,r,n,s5(),i);return Tz(e,s,kb())}async _openRedirect(e,r,n,i){await this._originValidation(e);const s=await U3(e,r,n,s5(),i);return DV(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:s}=this.eventManagers[r];return i?Promise.resolve(i):(Yl(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await _z(e),n=new sz(e);return r.register("authEvent",i=>(Ar(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(qy,{type:qy},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[qy];s!==void 0&&r(!!s),Gl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=uz(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return _P()||mP()||Nb()}}const jz=Lz;var V3="@firebase/auth",z3="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ar(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Mz(t){tf(new dh("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Ar(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bP(t)},c=new fV(n,i,s,l);return vV(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),tf(new dh("auth-internal",e=>{const r=A2(e.getProvider("auth").getImmediate());return(n=>new Fz(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),iu(V3,z3,Dz(t)),iu(V3,z3,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz=5*60,Bz=yC("authIdTokenMaxAge")||Oz;let H3=null;const Uz=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Bz)return;const i=r==null?void 0:r.token;H3!==i&&(H3=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Vz(t=EC()){const e=j_(t,"auth");if(e.isInitialized())return e.getImmediate();const r=yV(t,{popupRedirectResolver:jz,persistence:[qV,LV,PP]}),n=yC("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=Uz(s.toString());CV(r,a,()=>a(r.currentUser)),kV(r,o=>a(o))}}const i=gC("auth");return i&&wV(r,`http://${i}`),r}function zz(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}pV({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const s=al("internal-error");s.customData=i,r(s)},n.type="text/javascript",n.charset="UTF-8",zz().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Mz("Browser");const Hz={apiKey:"AIzaSyCrUZenvUEPbAsZ2zXh27SuZAoBArvos5E",authDomain:"instaspec-dev.firebaseapp.com",projectId:"instaspec-dev",storageBucket:"instaspec-dev.firebasestorage.app",messagingSenderId:"847536725528",appId:"1:847536725528:web:0d10c3c1d405a292482d6d"},OP=SC(Hz),$z="(default)",lr=TU(OP,$z),Hu=Vz(OP);let l5,BP;const qz=new Promise((t,e)=>{l5=t,BP=e});let Hc=!1,$3=!1;IV(Hu,async t=>{if(!$3)if($3=!0,!t&&!Hc){Hc=!0;try{const e=await NP(Hu);l5(e.user),Hc=!1}catch(e){console.error("[Firebase Auth] Anonymous sign-in failed:",e),BP(e),Hc=!1}}else t&&l5(t)});const Wr=async()=>{if(Hu.currentUser)return Hu.currentUser;try{await qz}catch(t){throw console.error("[ensureAuth] Auth initialization failed:",t),new Error("Authentication initialization failed")}if(!Hu.currentUser){if(Hc)return await new Promise(t=>setTimeout(t,100)),Wr();Hc=!0;try{const t=await NP(Hu);return Hc=!1,t.user}catch(t){throw Hc=!1,console.error("[ensureAuth] Failed to sign in anonymously:",t),new Error("Authentication required for Firestore access")}}return Hu.currentUser},Tf={loginLog:"instaspec:betaLoginLog",feedback:"instaspec:betaFeedback",accessRequests:"instaspec:betaAccessRequests"},UP=typeof window<"u",Ib="betaUsage",U0=10,VP="betaLoginLogs",k2=(t,e)=>{if(!UP)return e;try{const r=window.localStorage.getItem(t);return r?JSON.parse(r):e}catch(r){return console.warn(`Failed to parse localStorage key ${t}`,r),e}},C2=(t,e)=>{if(UP)try{window.localStorage.setItem(t,JSON.stringify(e))}catch(r){console.warn(`Failed to persist localStorage key ${t}`,r)}},c5=["admin@techarix.com"],zP=["tester1@techarix.com"],fx="INSTASPECMASTER@2025",fi=(t="")=>t.trim().toLowerCase(),q3=()=>Math.random().toString(36).substring(2,6).toUpperCase(),W3=()=>`BETA-${q3()}-${q3()}`,La=new Map,rh=t=>t&&(zP.includes(t.email)?{...t,expiresAt:null}:t),HP="instaspec:betaUsers";let Qo=k2(HP,[]).map(t=>({...t,email:fi(t.email)}));const $P=()=>C2(HP,Qo),K3=t=>Qo.find(e=>e.email===t)||null,Wz=t=>(Qo=[...Qo.filter(r=>r.email!==t.email),t],$P(),t),Kz=t=>{Qo=Qo.filter(e=>e.email!==t),$P()};async function Pb(t){const e=fi(t);if(!e)return null;try{await Wr();const r=Yr(lr,"betaUsers",e),n=await om(r);if(!n.exists()){const s=K3(e);if(!s)return null;const a=rh(s);return La.set(e,a),a}const i=rh({...n.data(),email:e});return La.set(e,i),i}catch(r){console.warn("Falling back to local beta user store",r);const n=K3(e);if(!n)return null;const i=rh(n);return La.set(e,i),i}}async function Gz(){try{return await Wr(),(await Tp(vi(lr,"betaUsers"))).docs.map(r=>{const n=r.data(),i=n.email||r.id,s=fi(i),a=rh({...n,email:s});return La.set(s,a),a})}catch(t){return console.warn("Failed to load beta users from Firestore, using local store.",t),Qo=(Qo||[]).map(e=>rh(e)),Qo.forEach(e=>La.set(e.email,e)),Qo}}async function h1({email:t,code:e,plan:r="beta_tester",isAdmin:n=!1,hours:i=1,expiresAt:s}){const a=fi(t);if(!a)throw new Error("Missing email");await Wr();const o=Yr(lr,"betaUsers",a),l=Date.now(),c=await om(o),h=c.exists()?c.data():null,d=(h==null?void 0:h.createdAt)||l,f=zP.includes(a)?null:typeof s=="number"?s:l+i*60*60*1e3,v={email:a,code:e,plan:r,isAdmin:n,expiresAt:f,updatedAt:l,createdAt:d};try{await Af(o,v,{merge:!0});const x=rh(v);return La.set(a,x),x}catch(x){console.warn("Failed to save beta user to Firestore. Using local store.",x);const _=rh(v);return Wz(_),La.set(a,_),_}}async function Yz(t){const e=fi(t);if(e){await Wr();try{await kc(Yr(lr,"betaUsers",e)),La.delete(e)}catch(r){console.warn("Failed to delete beta user from Firestore. Removing locally.",r),Kz(e),La.delete(e)}}}async function Xz(t,e){if(!t||!e)return{status:"missing",user:null};const r=fi(t);if(e===fx&&c5.includes(r)){const i={email:r,code:fx,plan:"beta_admin",isAdmin:!0,expiresAt:null,createdAt:Date.now(),updatedAt:Date.now()};return La.set(r,i),{status:"success",user:i}}const n=await Pb(r);return n?n.code!==e?{status:"invalid_code",user:null}:n.expiresAt&&Date.now()>n.expiresAt?{status:"expired",user:null}:{status:"success",user:n}:{status:"not_found",user:null}}function Qz(t){const e=fi(t);if(!e)return!1;if(La.has(e)){const r=La.get(e)||{};return typeof r.isAdmin=="boolean"?r.isAdmin:c5.includes(e)||String(r.plan||"").toLowerCase()==="beta_admin"}return c5.includes(e)}const G3=50,qP=20,jl=k2(Tf.loginLog,[]),Jz=()=>C2(Tf.loginLog,jl),WP=()=>Yr(lr,"betaMetadata","loginStats"),Zz=()=>jl.reduce((t,e)=>{const r=fi(e==null?void 0:e.email);return r&&(t[r]=(t[r]||0)+1),t},{}),eH=async t=>{try{await Wr(),await Yo(vi(lr,VP),t),await Af(WP(),{totalLogins:iP(1)},{merge:!0})}catch(e){console.warn("Failed to persist login log to Firestore",e)}},tH=()=>{const t=jl.slice(-qP).reverse().map(e=>({...e}));return{totalLogins:jl.length,recentLogins:t}},rH=async(t={})=>{await Wr();const e=WP();let r=0;try{const n=await om(e);n.exists()&&(r=n.data().totalLogins||0)}catch(n){console.warn("Failed to read login stats summary",n)}try{const n=yd(vi(lr,VP),DU("timestamp","desc"),MU(t.limit||qP)),s=(await Tp(n)).docs.map(a=>a.data());return{totalLogins:r,recentLogins:s}}catch(n){console.warn("Failed to load login logs from Firestore",n);const i=tH();return{totalLogins:r,recentLogins:i.recentLogins}}};async function nH(t,e){if(!t)return;const r={email:fi(t),isAdmin:!!e,timestamp:Date.now()};jl.push(r),jl.length>G3&&jl.splice(0,jl.length-G3),Jz(),eH(r);try{await Wr(),await Af(Yr(lr,"betaUsers",r.email),{loginCount:iP(1)},{merge:!0})}catch(n){console.warn("Failed to increment loginCount",n)}}const Y3=t=>{const e=fi(t);return e?jl.some(r=>r.email===e):!1},iH=()=>{const t=k2(Tf.feedback,[]);return Array.isArray(t)?t.map(e=>({id:(e==null?void 0:e.id)||`fdbk_${Date.now()}`,email:fi((e==null?void 0:e.email)||""),createdAt:typeof(e==null?void 0:e.createdAt)=="number"?e.createdAt:Date.now(),context:(e==null?void 0:e.context)||"Other",message:(e==null?void 0:e.message)||"",imageDataUrl:(e==null?void 0:e.imageDataUrl)||null})):[]};let px=iH();const sH=()=>C2(Tf.feedback,px),aH=()=>[...px].sort((t,e)=>(e.createdAt||0)-(t.createdAt||0)),oH=({email:t,context:e,message:r,imageDataUrl:n})=>{const i={id:`fdbk_${Date.now()}`,email:fi(t),createdAt:Date.now(),context:e||"Other",message:r||"",imageDataUrl:n||null};return px=[i,...px],sH(),i},lH=()=>{const t=k2(Tf.accessRequests,[]);return Array.isArray(t)?t.map(e=>({id:(e==null?void 0:e.id)||`request_${Date.now()}`,email:fi((e==null?void 0:e.email)||""),name:(e==null?void 0:e.name)||"",organization:(e==null?void 0:e.organization)||"",reason:(e==null?void 0:e.reason)||"",createdAt:typeof(e==null?void 0:e.createdAt)=="number"?e.createdAt:Date.now()})):[]};let cf=lH();const KP=()=>C2(Tf.accessRequests,cf),cH=()=>[...cf].sort((t,e)=>(e.createdAt||0)-(t.createdAt||0)),uH=({email:t,name:e,organization:r,reason:n})=>{const i={id:`request_${Date.now()}`,email:fi(t),name:(e==null?void 0:e.trim())||"",organization:(r==null?void 0:r.trim())||"",reason:(n==null?void 0:n.trim())||"",createdAt:Date.now()};return cf=[i,...cf],KP(),i},hH=t=>{t&&(cf=cf.filter(e=>e.id!==t),KP())};async function GP(t){const e=fi(t);if(!e)return{count:0,limit:U0};await Wr();const r=Yr(lr,Ib,e),n=await om(r);if(!n.exists())return{count:0,limit:U0};const i=n.data()||{};return{count:i.count||0,limit:i.limit||U0}}async function dH(t,e=U0){const r=fi(t);if(!r)return{allowed:!1,count:0,limit:e};await Wr();const n=Yr(lr,Ib,r);return nP(lr,async i=>{const s=await i.get(n),a=s.exists()&&s.data().count||0;if(a>=e)return{allowed:!1,count:a,limit:e};const o=a+1;return i.set(n,{email:r,count:o,limit:e,updatedAt:Date.now()},{merge:!0}),{allowed:!0,count:o,limit:e}})}async function fH(t,e=24){const r=fi(t),n=Number(e);if(!r)throw new Error("Missing email");if(!Number.isFinite(n)||n<=0)throw new Error("Hours to extend must be a positive number.");const s=La.get(r)||await Pb(r);if(!s)throw new Error("Beta user not found.");const a=Date.now(),l=(typeof s.expiresAt=="number"?Math.max(s.expiresAt,a):a)+n*60*60*1e3;return h1({email:r,code:s.code,plan:s.plan||"beta_tester",isAdmin:!!s.isAdmin,expiresAt:l})}async function pH(t,e=5){const r=fi(t),n=Number(e);if(!r)throw new Error("Missing email");if(!Number.isFinite(n)||n<=0)throw new Error("Increment must be a positive number.");await Wr();const i=Yr(lr,Ib,r);return nP(lr,async s=>{const a=await s.get(i),o=a.exists()?a.data():{},c=(o.limit||U0)+n,h=o.count||0;return s.set(i,{email:r,count:h,limit:c,updatedAt:Date.now()},{merge:!0}),{count:h,limit:c}})}async function mH(t){const e=fi(t);if(!e)throw new Error("Invalid email");const r=await Wr();if(!r)throw new Error("Not authenticated");const n=Yr(lr,"userProfiles",r.uid);try{return await Af(n,{uid:r.uid,email:e,updatedAt:Date.now()},{merge:!0}),{uid:r.uid,email:e}}catch(i){throw console.error("[UserProfile] Failed to create/update profile:",i),i}}const dg="instaspec:user",YP=Q.createContext({user:null,login:()=>{},logout:()=>{}}),gH=({children:t})=>{const[e,r]=Q.useState(()=>{if(typeof window>"u")return null;try{const c=window.localStorage.getItem(dg);if(!c)return null;const h=JSON.parse(c);return h.expiresAt&&h.expiresAt<=Date.now()?(window.localStorage.removeItem(dg),null):h}catch{return null}}),n=Q.useRef(null),i=Q.useCallback(c=>{if(!(c!=null&&c.email))return null;const h=c.email.trim().toLowerCase();if(!h)return null;const d=c.plan||(c.isAdmin?"beta_admin":"beta_tester");return{email:h,plan:d,isAdmin:typeof c.isAdmin=="boolean"?c.isAdmin:d==="beta_admin",expiresAt:typeof c.expiresAt=="number"?c.expiresAt:null}},[]),s=Q.useCallback((c,h={})=>(r(null),null),[]),a=Q.useCallback(async c=>{const h=(c||"").trim().toLowerCase();if(!h)return null;try{const d=await Pb(h),p=!1;if(!d||d.expiresAt&&d.expiresAt<=Date.now())return s("expired-or-missing-latest",{latest:d});const f=i({...d,email:h});return f?(r(v=>v&&v.email===f.email&&v.plan===f.plan&&v.isAdmin===f.isAdmin&&v.expiresAt===f.expiresAt?v:f),f):s("mapped-user-invalid",{latest:d})}catch(d){return console.warn("Failed to verify beta session",d),null}},[s,i,e]);Q.useEffect(()=>{typeof window>"u"||(e?window.localStorage.setItem(dg,JSON.stringify(e)):window.localStorage.removeItem(dg))},[e]),Q.useEffect(()=>{if(n.current&&(clearTimeout(n.current),n.current=null),!e||!e.expiresAt)return;const c=e.expiresAt-Date.now();return c<=0?s("expired-timer",{msLeft:c}):(n.current=setTimeout(()=>{s("timer-signout")},c),()=>{n.current&&(clearTimeout(n.current),n.current=null)})},[e,s]),Q.useEffect(()=>{e!=null&&e.email&&a(e.email)},[e==null?void 0:e.email,a]);const o=Q.useCallback(async c=>{const h=i(c);if(h){try{await mH(h.email)}catch(d){console.error("[Auth] Failed to create user profile:",d)}r(h),nH(h.email,h.isAdmin)}},[i]),l=Q.useCallback(()=>{s("manual-logout")},[s]);return u.jsx(YP.Provider,{value:{user:e,login:o,logout:l},children:t})},ku=()=>{const t=Q.useContext(YP);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t};/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var XP=t=>{throw TypeError(t)},xH=(t,e,r)=>e.has(t)||XP("Cannot "+r),Wy=(t,e,r)=>(xH(t,e,"read from private field"),r?r.call(t):e.get(t)),yH=(t,e,r)=>e.has(t)?XP("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),X3="popstate";function vH(t={}){function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return Cp("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:ul(i)}return _H(e,r,null,t)}function $r(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ai(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wH(){return Math.random().toString(36).substring(2,10)}function Q3(t,e){return{usr:t.state,key:t.key,idx:e}}function Cp(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Cu(e):e,state:r,key:e&&e.key||n||wH()}}function ul({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Cu(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function _H(t,e,r,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o="POP",l=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function d(){o="POP";let _=h(),w=_==null?null:_-c;c=_,l&&l({action:o,location:x.location,delta:w})}function p(_,w){o="PUSH";let S=Cp(x.location,_,w);c=h()+1;let N=Q3(S,c),j=x.createHref(S);try{a.pushState(N,"",j)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(j)}s&&l&&l({action:o,location:x.location,delta:1})}function f(_,w){o="REPLACE";let S=Cp(x.location,_,w);c=h();let N=Q3(S,c),j=x.createHref(S);a.replaceState(N,"",j),s&&l&&l({action:o,location:x.location,delta:0})}function v(_){return QP(_)}let x={get action(){return o},get location(){return t(i,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(X3,d),l=_,()=>{i.removeEventListener(X3,d),l=null}},createHref(_){return e(i,_)},createURL:v,encodeLocation(_){let w=v(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:f,go(_){return a.go(_)}};return x}function QP(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),$r(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:ul(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}var w0,J3=class{constructor(t){if(yH(this,w0,new Map),t)for(let[e,r]of t)this.set(e,r)}get(t){if(Wy(this,w0).has(t))return Wy(this,w0).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){Wy(this,w0).set(t,e)}};w0=new WeakMap;var bH=new Set(["lazy","caseSensitive","path","id","index","children"]);function SH(t){return bH.has(t)}var EH=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function AH(t){return EH.has(t)}function NH(t){return t.index===!0}function Ip(t,e,r=[],n={},i=!1){return t.map((s,a)=>{let o=[...r,String(a)],l=typeof s.id=="string"?s.id:o.join("-");if($r(s.index!==!0||!s.children,"Cannot specify children on an index route"),$r(i||!n[l],`Found a route id collision on id "${l}".  Route id's must be globally unique within Data Router usages`),NH(s)){let c={...s,id:l};return n[l]=Z3(c,e(c)),c}else{let c={...s,id:l,children:void 0};return n[l]=Z3(c,e(c)),s.children&&(c.children=Ip(s.children,e,o,n,i)),c}})}function Z3(t,e){return Object.assign(t,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...t.lazy,...e.lazy}}:{}})}function Dc(t,e,r="/"){return _0(t,e,r,!1)}function _0(t,e,r,n){let i=typeof e=="string"?Cu(e):e,s=so(i.pathname||"/",r);if(s==null)return null;let a=JP(t);kH(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=BH(s);o=MH(a[l],c,n)}return o}function TH(t,e){let{route:r,pathname:n,params:i}=t;return{id:r.id,pathname:n,params:i,data:e[r.id],loaderData:e[r.id],handle:r.handle}}function JP(t,e=[],r=[],n="",i=!1){let s=(a,o,l=i,c)=>{let h={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&l)return;$r(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let d=ll([n,h.relativePath]),p=r.concat(h);a.children&&a.children.length>0&&($r(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),JP(a.children,e,p,d,l)),!(a.path==null&&!a.index)&&e.push({path:d,score:FH(d,a.index),routesMeta:p})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of ZP(a.path))s(a,o,!0,c)}),e}function ZP(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=ZP(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function kH(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:DH(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var CH=/^:[\w-]+$/,IH=3,PH=2,RH=1,LH=10,jH=-2,eA=t=>t==="*";function FH(t,e){let r=t.split("/"),n=r.length;return r.some(eA)&&(n+=jH),e&&(n+=PH),r.filter(i=>!eA(i)).reduce((i,s)=>i+(CH.test(s)?IH:s===""?RH:LH),n)}function DH(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function MH(t,e,r=!1){let{routesMeta:n}=t,i={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=mx({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d&&c&&r&&!n[n.length-1].route.index&&(d=mx({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:ll([s,d.pathname]),pathnameBase:zH(ll([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=ll([s,d.pathnameBase]))}return a}function mx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=OH(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,{paramName:h,isOptional:d},p)=>{if(h==="*"){let v=o[p]||"";a=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const f=o[p];return d&&!f?c[h]=void 0:c[h]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function OH(t,e=!1,r=!0){Ai(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function BH(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ai(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function so(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function UH({basename:t,pathname:e}){return e==="/"?t:ll([t,e])}var eR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,I2=t=>eR.test(t);function VH(t,e="/"){let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Cu(t):t,s;if(r)if(I2(r))s=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),Ai(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${r}`)}r.startsWith("/")?s=tA(r.substring(1),"/"):s=tA(r,e)}else s=e;return{pathname:s,search:HH(n),hash:$H(i)}}function tA(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Ky(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tR(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Rb(t){let e=tR(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function Lb(t,e,r,n=!1){let i;typeof t=="string"?i=Cu(t):(i={...t},$r(!i.pathname||!i.pathname.includes("?"),Ky("?","pathname","search",i)),$r(!i.pathname||!i.pathname.includes("#"),Ky("#","pathname","hash",i)),$r(!i.search||!i.search.includes("#"),Ky("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=r;else{let d=e.length-1;if(!n&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}o=d>=0?e[d]:"/"}let l=VH(i,o),c=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var ll=t=>t.join("/").replace(/\/\/+/g,"/"),zH=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),HH=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$H=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,dm=class{constructor(t,e,r,n=!1){this.status=t,this.statusText=e||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function Pp(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function fm(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var rR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function nR(t,e){let r=t;if(typeof r!="string"||!eR.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,i=!1;if(rR)try{let s=new URL(window.location.href),a=r.startsWith("//")?new URL(s.protocol+r):new URL(r),o=so(a.pathname,e);a.origin===s.origin&&o!=null?r=o+a.search+a.hash:i=!0}catch{Ai(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:r}}var $c=Symbol("Uninstrumented");function qH(t,e){let r={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};t.forEach(i=>i({id:e.id,index:e.index,path:e.path,instrument(s){let a=Object.keys(r);for(let o of a)s[o]&&r[o].push(s[o])}}));let n={};if(typeof e.lazy=="function"&&r.lazy.length>0){let i=_d(r.lazy,e.lazy,()=>{});i&&(n.lazy=i)}if(typeof e.lazy=="object"){let i=e.lazy;["middleware","loader","action"].forEach(s=>{let a=i[s],o=r[`lazy.${s}`];if(typeof a=="function"&&o.length>0){let l=_d(o,a,()=>{});l&&(n.lazy=Object.assign(n.lazy||{},{[s]:l}))}})}return["loader","action"].forEach(i=>{let s=e[i];if(typeof s=="function"&&r[i].length>0){let a=s[$c]??s,o=_d(r[i],a,(...l)=>rA(l[0]));o&&(i==="loader"&&a.hydrate===!0&&(o.hydrate=!0),o[$c]=a,n[i]=o)}}),e.middleware&&e.middleware.length>0&&r.middleware.length>0&&(n.middleware=e.middleware.map(i=>{let s=i[$c]??i,a=_d(r.middleware,s,(...o)=>rA(o[0]));return a?(a[$c]=s,a):i})),n}function WH(t,e){let r={navigate:[],fetch:[]};if(e.forEach(n=>n({instrument(i){let s=Object.keys(i);for(let a of s)i[a]&&r[a].push(i[a])}})),r.navigate.length>0){let n=t.navigate[$c]??t.navigate,i=_d(r.navigate,n,(...s)=>{let[a,o]=s;return{to:typeof a=="number"||typeof a=="string"?a:a?ul(a):".",...nA(t,o??{})}});i&&(i[$c]=n,t.navigate=i)}if(r.fetch.length>0){let n=t.fetch[$c]??t.fetch,i=_d(r.fetch,n,(...s)=>{let[a,,o,l]=s;return{href:o??".",fetcherKey:a,...nA(t,l??{})}});i&&(i[$c]=n,t.fetch=i)}return t}function _d(t,e,r){return t.length===0?null:async(...n)=>{let i=await iR(t,r(...n),()=>e(...n),t.length-1);if(i.type==="error")throw i.value;return i.value}}async function iR(t,e,r,n){let i=t[n],s;if(i){let a,o=async()=>(a?console.error("You cannot call instrumented handlers more than once"):a=iR(t,e,r,n-1),s=await a,$r(s,"Expected a result"),s.type==="error"&&s.value instanceof Error?{status:"error",error:s.value}:{status:"success",error:void 0});try{await i(o,e)}catch(l){console.error("An instrumentation function threw an error:",l)}a||await o(),await a}else try{s={type:"success",value:await r()}}catch(a){s={type:"error",value:a}}return s||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function rA(t){let{request:e,context:r,params:n,unstable_pattern:i}=t;return{request:KH(e),params:{...n},unstable_pattern:i,context:GH(r)}}function nA(t,e){return{currentUrl:ul(t.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function KH(t){return{method:t.method,url:t.url,headers:{get:(...e)=>t.headers.get(...e)}}}function GH(t){if(XH(t)){let e={...t};return Object.freeze(e),e}else return{get:e=>t.get(e)}}var YH=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function XH(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===YH}var sR=["POST","PUT","PATCH","DELETE"],QH=new Set(sR),JH=["GET",...sR],ZH=new Set(JH),aR=new Set([301,302,303,307,308]),e$=new Set([307,308]),Gy={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},t$={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},i0={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},r$=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),oR="remix-router-transitions",lR=Symbol("ResetLoaderData");function n$(t){const e=t.window?t.window:typeof window<"u"?window:void 0,r=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";$r(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=t.hydrationRouteProperties||[],i=t.mapRouteProperties||r$,s=i;if(t.unstable_instrumentations){let xe=t.unstable_instrumentations;s=Re=>({...i(Re),...qH(xe.map(Ve=>Ve.route).filter(Boolean),Re)})}let a={},o=Ip(t.routes,s,void 0,a),l,c=t.basename||"/";c.startsWith("/")||(c=`/${c}`);let h=t.dataStrategy||l$,d={...t.future},p=null,f=new Set,v=null,x=null,_=null,w=t.hydrationData!=null,S=Dc(o,t.history.location,c),N=!1,j=null,z;if(S==null&&!t.patchRoutesOnNavigation){let xe=Xa(404,{pathname:t.history.location.pathname}),{matches:Re,route:Ve}=fg(o);z=!0,S=Re,j={[Ve.id]:xe}}else if(S&&!t.hydrationData&&vr(S,o,t.history.location.pathname).active&&(S=null),S)if(S.some(xe=>xe.route.lazy))z=!1;else if(!S.some(xe=>jb(xe.route)))z=!0;else{let xe=t.hydrationData?t.hydrationData.loaderData:null,Re=t.hydrationData?t.hydrationData.errors:null;if(Re){let Ve=S.findIndex(tt=>Re[tt.route.id]!==void 0);z=S.slice(0,Ve+1).every(tt=>!h5(tt.route,xe,Re))}else z=S.every(Ve=>!h5(Ve.route,xe,Re))}else{z=!1,S=[];let xe=vr(null,o,t.history.location.pathname);xe.active&&xe.matches&&(N=!0,S=xe.matches)}let W,b={historyAction:t.history.action,location:t.history.location,matches:S,initialized:z,navigation:Gy,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||j,fetchers:new Map,blockers:new Map},T="POP",A=null,F=!1,k,L=!1,R=new Map,le=null,ve=!1,ge=!1,ye=new Set,ce=new Map,be=0,Me=-1,Le=new Map,I=new Set,B=new Map,U=new Map,H=new Set,te=new Map,fe,Ae=null;function Te(){if(p=t.history.listen(({action:xe,location:Re,delta:Ve})=>{if(fe){fe(),fe=void 0;return}Ai(te.size===0||Ve!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let tt=zr({currentLocation:b.location,nextLocation:Re,historyAction:xe});if(tt&&Ve!=null){let O=new Promise(Z=>{fe=Z});t.history.go(Ve*-1),Zt(tt,{state:"blocked",location:Re,proceed(){Zt(tt,{state:"proceeding",proceed:void 0,reset:void 0,location:Re}),O.then(()=>t.history.go(Ve))},reset(){let Z=new Map(b.blockers);Z.set(tt,i0),Qe({blockers:Z})}}),A==null||A.resolve(),A=null;return}return Ie(xe,Re)}),r){N$(e,R);let xe=()=>T$(e,R);e.addEventListener("pagehide",xe),le=()=>e.removeEventListener("pagehide",xe)}return b.initialized||Ie("POP",b.location,{initialHydration:!0}),W}function Pe(){p&&p(),le&&le(),f.clear(),k&&k.abort(),b.fetchers.forEach((xe,Re)=>Vr(Re)),b.blockers.forEach((xe,Re)=>rr(Re))}function et(xe){return f.add(xe),()=>f.delete(xe)}function Qe(xe,Re={}){xe.matches&&(xe.matches=xe.matches.map(O=>{let Z=a[O.route.id],G=O.route;return G.element!==Z.element||G.errorElement!==Z.errorElement||G.hydrateFallbackElement!==Z.hydrateFallbackElement?{...O,route:Z}:O})),b={...b,...xe};let Ve=[],tt=[];b.fetchers.forEach((O,Z)=>{O.state==="idle"&&(H.has(Z)?Ve.push(Z):tt.push(Z))}),H.forEach(O=>{!b.fetchers.has(O)&&!ce.has(O)&&Ve.push(O)}),[...f].forEach(O=>O(b,{deletedFetchers:Ve,newErrors:xe.errors??null,viewTransitionOpts:Re.viewTransitionOpts,flushSync:Re.flushSync===!0})),Ve.forEach(O=>Vr(O)),tt.forEach(O=>b.fetchers.delete(O))}function dt(xe,Re,{flushSync:Ve}={}){var ke,pe;let tt=b.actionData!=null&&b.navigation.formMethod!=null&&ks(b.navigation.formMethod)&&b.navigation.state==="loading"&&((ke=xe.state)==null?void 0:ke._isRedirect)!==!0,O;Re.actionData?Object.keys(Re.actionData).length>0?O=Re.actionData:O=null:tt?O=b.actionData:O=null;let Z=Re.loaderData?fA(b.loaderData,Re.loaderData,Re.matches||[],Re.errors):b.loaderData,G=b.blockers;G.size>0&&(G=new Map(G),G.forEach((Ne,je)=>G.set(je,i0)));let Y=ve?!1:kr(xe,Re.matches||b.matches),ee=F===!0||b.navigation.formMethod!=null&&ks(b.navigation.formMethod)&&((pe=xe.state)==null?void 0:pe._isRedirect)!==!0;l&&(o=l,l=void 0),ve||T==="POP"||(T==="PUSH"?t.history.push(xe,xe.state):T==="REPLACE"&&t.history.replace(xe,xe.state));let re;if(T==="POP"){let Ne=R.get(b.location.pathname);Ne&&Ne.has(xe.pathname)?re={currentLocation:b.location,nextLocation:xe}:R.has(xe.pathname)&&(re={currentLocation:xe,nextLocation:b.location})}else if(L){let Ne=R.get(b.location.pathname);Ne?Ne.add(xe.pathname):(Ne=new Set([xe.pathname]),R.set(b.location.pathname,Ne)),re={currentLocation:b.location,nextLocation:xe}}Qe({...Re,actionData:O,loaderData:Z,historyAction:T,location:xe,initialized:!0,navigation:Gy,revalidation:"idle",restoreScrollPosition:Y,preventScrollReset:ee,blockers:G},{viewTransitionOpts:re,flushSync:Ve===!0}),T="POP",F=!1,L=!1,ve=!1,ge=!1,A==null||A.resolve(),A=null,Ae==null||Ae.resolve(),Ae=null}async function wt(xe,Re){if(A==null||A.resolve(),A=null,typeof xe=="number"){A||(A=xA());let je=A.promise;return t.history.go(xe),je}let Ve=u5(b.location,b.matches,c,xe,Re==null?void 0:Re.fromRouteId,Re==null?void 0:Re.relative),{path:tt,submission:O,error:Z}=iA(!1,Ve,Re),G=b.location,Y=Cp(b.location,tt,Re&&Re.state);Y={...Y,...t.history.encodeLocation(Y)};let ee=Re&&Re.replace!=null?Re.replace:void 0,re="PUSH";ee===!0?re="REPLACE":ee===!1||O!=null&&ks(O.formMethod)&&O.formAction===b.location.pathname+b.location.search&&(re="REPLACE");let ke=Re&&"preventScrollReset"in Re?Re.preventScrollReset===!0:void 0,pe=(Re&&Re.flushSync)===!0,Ne=zr({currentLocation:G,nextLocation:Y,historyAction:re});if(Ne){Zt(Ne,{state:"blocked",location:Y,proceed(){Zt(Ne,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),wt(xe,Re)},reset(){let je=new Map(b.blockers);je.set(Ne,i0),Qe({blockers:je})}});return}await Ie(re,Y,{submission:O,pendingError:Z,preventScrollReset:ke,replace:Re&&Re.replace,enableViewTransition:Re&&Re.viewTransition,flushSync:pe,callSiteDefaultShouldRevalidate:Re&&Re.unstable_defaultShouldRevalidate})}function ae(){Ae||(Ae=xA()),mt(),Qe({revalidation:"loading"});let xe=Ae.promise;return b.navigation.state==="submitting"?xe:b.navigation.state==="idle"?(Ie(b.historyAction,b.location,{startUninterruptedRevalidation:!0}),xe):(Ie(T||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation,enableViewTransition:L===!0}),xe)}async function Ie(xe,Re,Ve){k&&k.abort(),k=null,T=xe,ve=(Ve&&Ve.startUninterruptedRevalidation)===!0,cn(b.location,b.matches),F=(Ve&&Ve.preventScrollReset)===!0,L=(Ve&&Ve.enableViewTransition)===!0;let tt=l||o,O=Ve&&Ve.overrideNavigation,Z=Ve!=null&&Ve.initialHydration&&b.matches&&b.matches.length>0&&!N?b.matches:Dc(tt,Re,c),G=(Ve&&Ve.flushSync)===!0;if(Z&&b.initialized&&!ge&&g$(b.location,Re)&&!(Ve&&Ve.submission&&ks(Ve.submission.formMethod))){dt(Re,{matches:Z},{flushSync:G});return}let Y=vr(Z,tt,Re.pathname);if(Y.active&&Y.matches&&(Z=Y.matches),!Z){let{error:st,notFoundMatches:pt,route:gt}=$t(Re.pathname);dt(Re,{matches:pt,loaderData:{},errors:{[gt.id]:st}},{flushSync:G});return}k=new AbortController;let ee=Jh(t.history,Re,k.signal,Ve&&Ve.submission),re=t.getContext?await t.getContext():new J3,ke;if(Ve&&Ve.pendingError)ke=[Mc(Z).route.id,{type:"error",error:Ve.pendingError}];else if(Ve&&Ve.submission&&ks(Ve.submission.formMethod)){let st=await ne(ee,Re,Ve.submission,Z,re,Y.active,Ve&&Ve.initialHydration===!0,{replace:Ve.replace,flushSync:G});if(st.shortCircuited)return;if(st.pendingActionResult){let[pt,gt]=st.pendingActionResult;if(ba(gt)&&Pp(gt.error)&&gt.error.status===404){k=null,dt(Re,{matches:st.matches,loaderData:{},errors:{[pt]:gt.error}});return}}Z=st.matches||Z,ke=st.pendingActionResult,O=Yy(Re,Ve.submission),G=!1,Y.active=!1,ee=Jh(t.history,ee.url,ee.signal)}let{shortCircuited:pe,matches:Ne,loaderData:je,errors:Oe}=await we(ee,Re,Z,re,Y.active,O,Ve&&Ve.submission,Ve&&Ve.fetcherSubmission,Ve&&Ve.replace,Ve&&Ve.initialHydration===!0,G,ke,Ve&&Ve.callSiteDefaultShouldRevalidate);pe||(k=null,dt(Re,{matches:Ne||Z,...pA(ke),loaderData:je,errors:Oe}))}async function ne(xe,Re,Ve,tt,O,Z,G,Y={}){mt();let ee=E$(Re,Ve);if(Qe({navigation:ee},{flushSync:Y.flushSync===!0}),Z){let pe=await dn(tt,Re.pathname,xe.signal);if(pe.type==="aborted")return{shortCircuited:!0};if(pe.type==="error"){if(pe.partialMatches.length===0){let{matches:je,route:Oe}=fg(o);return{matches:je,pendingActionResult:[Oe.id,{type:"error",error:pe.error}]}}let Ne=Mc(pe.partialMatches).route.id;return{matches:pe.partialMatches,pendingActionResult:[Ne,{type:"error",error:pe.error}]}}else if(pe.matches)tt=pe.matches;else{let{notFoundMatches:Ne,error:je,route:Oe}=$t(Re.pathname);return{matches:Ne,pendingActionResult:[Oe.id,{type:"error",error:je}]}}}let re,ke=d1(tt,Re);if(!ke.route.action&&!ke.route.lazy)re={type:"error",error:Xa(405,{method:xe.method,pathname:Re.pathname,routeId:ke.route.id})};else{let pe=Fd(s,a,xe,tt,ke,G?[]:n,O),Ne=await Ee(xe,pe,O,null);if(re=Ne[ke.route.id],!re){for(let je of tt)if(Ne[je.route.id]){re=Ne[je.route.id];break}}if(xe.signal.aborted)return{shortCircuited:!0}}if(Qu(re)){let pe;return Y&&Y.replace!=null?pe=Y.replace:pe=uA(re.response.headers.get("Location"),new URL(xe.url),c,t.history)===b.location.pathname+b.location.search,await Bt(xe,re,!0,{submission:Ve,replace:pe}),{shortCircuited:!0}}if(ba(re)){let pe=Mc(tt,ke.route.id);return(Y&&Y.replace)!==!0&&(T="PUSH"),{matches:tt,pendingActionResult:[pe.route.id,re,ke.route.id]}}return{matches:tt,pendingActionResult:[ke.route.id,re]}}async function we(xe,Re,Ve,tt,O,Z,G,Y,ee,re,ke,pe,Ne){let je=Z||Yy(Re,G),Oe=G||Y||gA(je),st=!ve&&!re;if(O){if(st){let Ir=me(pe);Qe({navigation:je,...Ir!==void 0?{actionData:Ir}:{}},{flushSync:ke})}let ir=await dn(Ve,Re.pathname,xe.signal);if(ir.type==="aborted")return{shortCircuited:!0};if(ir.type==="error"){if(ir.partialMatches.length===0){let{matches:Dr,route:Sr}=fg(o);return{matches:Dr,loaderData:{},errors:{[Sr.id]:ir.error}}}let Ir=Mc(ir.partialMatches).route.id;return{matches:ir.partialMatches,loaderData:{},errors:{[Ir]:ir.error}}}else if(ir.matches)Ve=ir.matches;else{let{error:Ir,notFoundMatches:Dr,route:Sr}=$t(Re.pathname);return{matches:Dr,loaderData:{},errors:{[Sr.id]:Ir}}}}let pt=l||o,{dsMatches:gt,revalidatingFetchers:ft}=sA(xe,tt,s,a,t.history,b,Ve,Oe,Re,re?[]:n,re===!0,ge,ye,H,B,I,pt,c,t.patchRoutesOnNavigation!=null,pe,Ne);if(Me=++be,!t.dataStrategy&&!gt.some(ir=>ir.shouldLoad)&&!gt.some(ir=>ir.route.middleware&&ir.route.middleware.length>0)&&ft.length===0){let ir=wr();return dt(Re,{matches:Ve,loaderData:{},errors:pe&&ba(pe[1])?{[pe[0]]:pe[1].error}:null,...pA(pe),...ir?{fetchers:new Map(b.fetchers)}:{}},{flushSync:ke}),{shortCircuited:!0}}if(st){let ir={};if(!O){ir.navigation=je;let Ir=me(pe);Ir!==void 0&&(ir.actionData=Ir)}ft.length>0&&(ir.fetchers=Ke(ft)),Qe(ir,{flushSync:ke})}ft.forEach(ir=>{qe(ir.key),ir.controller&&ce.set(ir.key,ir.controller)});let At=()=>ft.forEach(ir=>qe(ir.key));k&&k.signal.addEventListener("abort",At);let{loaderResults:er,fetcherResults:_r}=await it(gt,ft,xe,tt);if(xe.signal.aborted)return{shortCircuited:!0};k&&k.signal.removeEventListener("abort",At),ft.forEach(ir=>ce.delete(ir.key));let pr=pg(er);if(pr)return await Bt(xe,pr.result,!0,{replace:ee}),{shortCircuited:!0};if(pr=pg(_r),pr)return I.add(pr.key),await Bt(xe,pr.result,!0,{replace:ee}),{shortCircuited:!0};let{loaderData:en,errors:mn}=dA(b,Ve,er,pe,ft,_r);re&&b.errors&&(mn={...b.errors,...mn});let gn=wr(),Dn=Gt(Me),In=gn||Dn||ft.length>0;return{matches:Ve,loaderData:en,errors:mn,...In?{fetchers:new Map(b.fetchers)}:{}}}function me(xe){if(xe&&!ba(xe[1]))return{[xe[0]]:xe[1].data};if(b.actionData)return Object.keys(b.actionData).length===0?null:b.actionData}function Ke(xe){return xe.forEach(Re=>{let Ve=b.fetchers.get(Re.key),tt=s0(void 0,Ve?Ve.data:void 0);b.fetchers.set(Re.key,tt)}),new Map(b.fetchers)}async function Je(xe,Re,Ve,tt){qe(xe);let O=(tt&&tt.flushSync)===!0,Z=l||o,G=u5(b.location,b.matches,c,Ve,Re,tt==null?void 0:tt.relative),Y=Dc(Z,G,c),ee=vr(Y,Z,G);if(ee.active&&ee.matches&&(Y=ee.matches),!Y){Rt(xe,Re,Xa(404,{pathname:G}),{flushSync:O});return}let{path:re,submission:ke,error:pe}=iA(!0,G,tt);if(pe){Rt(xe,Re,pe,{flushSync:O});return}let Ne=t.getContext?await t.getContext():new J3,je=(tt&&tt.preventScrollReset)===!0;if(ke&&ks(ke.formMethod)){await ct(xe,Re,re,Y,Ne,ee.active,O,je,ke,tt&&tt.unstable_defaultShouldRevalidate);return}B.set(xe,{routeId:Re,path:re}),await Et(xe,Re,re,Y,Ne,ee.active,O,je,ke)}async function ct(xe,Re,Ve,tt,O,Z,G,Y,ee,re){mt(),B.delete(xe);let ke=b.fetchers.get(xe);bt(xe,A$(ee,ke),{flushSync:G});let pe=new AbortController,Ne=Jh(t.history,Ve,pe.signal,ee);if(Z){let Xt=await dn(tt,new URL(Ne.url).pathname,Ne.signal,xe);if(Xt.type==="aborted")return;if(Xt.type==="error"){Rt(xe,Re,Xt.error,{flushSync:G});return}else if(Xt.matches)tt=Xt.matches;else{Rt(xe,Re,Xa(404,{pathname:Ve}),{flushSync:G});return}}let je=d1(tt,Ve);if(!je.route.action&&!je.route.lazy){let Xt=Xa(405,{method:ee.formMethod,pathname:Ve,routeId:Re});Rt(xe,Re,Xt,{flushSync:G});return}ce.set(xe,pe);let Oe=be,st=Fd(s,a,Ne,tt,je,n,O),pt=await Ee(Ne,st,O,xe),gt=pt[je.route.id];if(!gt){for(let Xt of st)if(pt[Xt.route.id]){gt=pt[Xt.route.id];break}}if(Ne.signal.aborted){ce.get(xe)===pe&&ce.delete(xe);return}if(H.has(xe)){if(Qu(gt)||ba(gt)){bt(xe,Al(void 0));return}}else{if(Qu(gt))if(ce.delete(xe),Me>Oe){bt(xe,Al(void 0));return}else return I.add(xe),bt(xe,s0(ee)),Bt(Ne,gt,!1,{fetcherSubmission:ee,preventScrollReset:Y});if(ba(gt)){Rt(xe,Re,gt.error);return}}let ft=b.navigation.location||b.location,At=Jh(t.history,ft,pe.signal),er=l||o,_r=b.navigation.state!=="idle"?Dc(er,b.navigation.location,c):b.matches;$r(_r,"Didn't find any matches after fetcher action");let pr=++be;Le.set(xe,pr);let en=s0(ee,gt.data);b.fetchers.set(xe,en);let{dsMatches:mn,revalidatingFetchers:gn}=sA(At,O,s,a,t.history,b,_r,ee,ft,n,!1,ge,ye,H,B,I,er,c,t.patchRoutesOnNavigation!=null,[je.route.id,gt],re);gn.filter(Xt=>Xt.key!==xe).forEach(Xt=>{let Tn=Xt.key,un=b.fetchers.get(Tn),Hr=s0(void 0,un?un.data:void 0);b.fetchers.set(Tn,Hr),qe(Tn),Xt.controller&&ce.set(Tn,Xt.controller)}),Qe({fetchers:new Map(b.fetchers)});let Dn=()=>gn.forEach(Xt=>qe(Xt.key));pe.signal.addEventListener("abort",Dn);let{loaderResults:In,fetcherResults:ir}=await it(mn,gn,At,O);if(pe.signal.aborted)return;if(pe.signal.removeEventListener("abort",Dn),Le.delete(xe),ce.delete(xe),gn.forEach(Xt=>ce.delete(Xt.key)),b.fetchers.has(xe)){let Xt=Al(gt.data);b.fetchers.set(xe,Xt)}let Ir=pg(In);if(Ir)return Bt(At,Ir.result,!1,{preventScrollReset:Y});if(Ir=pg(ir),Ir)return I.add(Ir.key),Bt(At,Ir.result,!1,{preventScrollReset:Y});let{loaderData:Dr,errors:Sr}=dA(b,_r,In,void 0,gn,ir);Gt(pr),b.navigation.state==="loading"&&pr>Me?($r(T,"Expected pending action"),k&&k.abort(),dt(b.navigation.location,{matches:_r,loaderData:Dr,errors:Sr,fetchers:new Map(b.fetchers)})):(Qe({errors:Sr,loaderData:fA(b.loaderData,Dr,_r,Sr),fetchers:new Map(b.fetchers)}),ge=!1)}async function Et(xe,Re,Ve,tt,O,Z,G,Y,ee){let re=b.fetchers.get(xe);bt(xe,s0(ee,re?re.data:void 0),{flushSync:G});let ke=new AbortController,pe=Jh(t.history,Ve,ke.signal);if(Z){let gt=await dn(tt,new URL(pe.url).pathname,pe.signal,xe);if(gt.type==="aborted")return;if(gt.type==="error"){Rt(xe,Re,gt.error,{flushSync:G});return}else if(gt.matches)tt=gt.matches;else{Rt(xe,Re,Xa(404,{pathname:Ve}),{flushSync:G});return}}let Ne=d1(tt,Ve);ce.set(xe,ke);let je=be,Oe=Fd(s,a,pe,tt,Ne,n,O),pt=(await Ee(pe,Oe,O,xe))[Ne.route.id];if(ce.get(xe)===ke&&ce.delete(xe),!pe.signal.aborted){if(H.has(xe)){bt(xe,Al(void 0));return}if(Qu(pt))if(Me>je){bt(xe,Al(void 0));return}else{I.add(xe),await Bt(pe,pt,!1,{preventScrollReset:Y});return}if(ba(pt)){Rt(xe,Re,pt.error);return}bt(xe,Al(pt.data))}}async function Bt(xe,Re,Ve,{submission:tt,fetcherSubmission:O,preventScrollReset:Z,replace:G}={}){Ve||(A==null||A.resolve(),A=null),Re.response.headers.has("X-Remix-Revalidate")&&(ge=!0);let Y=Re.response.headers.get("Location");$r(Y,"Expected a Location header on the redirect Response"),Y=uA(Y,new URL(xe.url),c,t.history);let ee=Cp(b.location,Y,{_isRedirect:!0});if(r){let Oe=!1;if(Re.response.headers.has("X-Remix-Reload-Document"))Oe=!0;else if(I2(Y)){const st=QP(Y,!0);Oe=st.origin!==e.location.origin||so(st.pathname,c)==null}if(Oe){G?e.location.replace(Y):e.location.assign(Y);return}}k=null;let re=G===!0||Re.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ke,formAction:pe,formEncType:Ne}=b.navigation;!tt&&!O&&ke&&pe&&Ne&&(tt=gA(b.navigation));let je=tt||O;if(e$.has(Re.response.status)&&je&&ks(je.formMethod))await Ie(re,ee,{submission:{...je,formAction:Y},preventScrollReset:Z||F,enableViewTransition:Ve?L:void 0});else{let Oe=Yy(ee,tt);await Ie(re,ee,{overrideNavigation:Oe,fetcherSubmission:O,preventScrollReset:Z||F,enableViewTransition:Ve?L:void 0})}}async function Ee(xe,Re,Ve,tt){var G;let O,Z={};try{O=await u$(h,xe,Re,tt,Ve,!1)}catch(Y){return Re.filter(ee=>ee.shouldLoad).forEach(ee=>{Z[ee.route.id]={type:"error",error:Y}}),Z}if(xe.signal.aborted)return Z;if(!ks(xe.method))for(let Y of Re){if(((G=O[Y.route.id])==null?void 0:G.type)==="error")break;!O.hasOwnProperty(Y.route.id)&&!b.loaderData.hasOwnProperty(Y.route.id)&&(!b.errors||!b.errors.hasOwnProperty(Y.route.id))&&Y.shouldCallHandler()&&(O[Y.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${Y.route.id}`)})}for(let[Y,ee]of Object.entries(O))if(w$(ee)){let re=ee.result;Z[Y]={type:"redirect",response:p$(re,xe,Y,Re,c)}}else Z[Y]=await f$(ee);return Z}async function it(xe,Re,Ve,tt){let O=Ee(Ve,xe,tt,null),Z=Promise.all(Re.map(async ee=>{if(ee.matches&&ee.match&&ee.request&&ee.controller){let ke=(await Ee(ee.request,ee.matches,tt,ee.key))[ee.match.route.id];return{[ee.key]:ke}}else return Promise.resolve({[ee.key]:{type:"error",error:Xa(404,{pathname:ee.path})}})})),G=await O,Y=(await Z).reduce((ee,re)=>Object.assign(ee,re),{});return{loaderResults:G,fetcherResults:Y}}function mt(){ge=!0,B.forEach((xe,Re)=>{ce.has(Re)&&ye.add(Re),qe(Re)})}function bt(xe,Re,Ve={}){b.fetchers.set(xe,Re),Qe({fetchers:new Map(b.fetchers)},{flushSync:(Ve&&Ve.flushSync)===!0})}function Rt(xe,Re,Ve,tt={}){let O=Mc(b.matches,Re);Vr(xe),Qe({errors:{[O.route.id]:Ve},fetchers:new Map(b.fetchers)},{flushSync:(tt&&tt.flushSync)===!0})}function Ot(xe){return U.set(xe,(U.get(xe)||0)+1),H.has(xe)&&H.delete(xe),b.fetchers.get(xe)||t$}function Vt(xe,Re){qe(xe,Re==null?void 0:Re.reason),bt(xe,Al(null))}function Vr(xe){let Re=b.fetchers.get(xe);ce.has(xe)&&!(Re&&Re.state==="loading"&&Le.has(xe))&&qe(xe),B.delete(xe),Le.delete(xe),I.delete(xe),H.delete(xe),ye.delete(xe),b.fetchers.delete(xe)}function mr(xe){let Re=(U.get(xe)||0)-1;Re<=0?(U.delete(xe),H.add(xe)):U.set(xe,Re),Qe({fetchers:new Map(b.fetchers)})}function qe(xe,Re){let Ve=ce.get(xe);Ve&&(Ve.abort(Re),ce.delete(xe))}function Ft(xe){for(let Re of xe){let Ve=Ot(Re),tt=Al(Ve.data);b.fetchers.set(Re,tt)}}function wr(){let xe=[],Re=!1;for(let Ve of I){let tt=b.fetchers.get(Ve);$r(tt,`Expected fetcher: ${Ve}`),tt.state==="loading"&&(I.delete(Ve),xe.push(Ve),Re=!0)}return Ft(xe),Re}function Gt(xe){let Re=[];for(let[Ve,tt]of Le)if(tt<xe){let O=b.fetchers.get(Ve);$r(O,`Expected fetcher: ${Ve}`),O.state==="loading"&&(qe(Ve),Le.delete(Ve),Re.push(Ve))}return Ft(Re),Re.length>0}function Rr(xe,Re){let Ve=b.blockers.get(xe)||i0;return te.get(xe)!==Re&&te.set(xe,Re),Ve}function rr(xe){b.blockers.delete(xe),te.delete(xe)}function Zt(xe,Re){let Ve=b.blockers.get(xe)||i0;$r(Ve.state==="unblocked"&&Re.state==="blocked"||Ve.state==="blocked"&&Re.state==="blocked"||Ve.state==="blocked"&&Re.state==="proceeding"||Ve.state==="blocked"&&Re.state==="unblocked"||Ve.state==="proceeding"&&Re.state==="unblocked",`Invalid blocker state transition: ${Ve.state} -> ${Re.state}`);let tt=new Map(b.blockers);tt.set(xe,Re),Qe({blockers:tt})}function zr({currentLocation:xe,nextLocation:Re,historyAction:Ve}){if(te.size===0)return;te.size>1&&Ai(!1,"A router only supports one blocker at a time");let tt=Array.from(te.entries()),[O,Z]=tt[tt.length-1],G=b.blockers.get(O);if(!(G&&G.state==="proceeding")&&Z({currentLocation:xe,nextLocation:Re,historyAction:Ve}))return O}function $t(xe){let Re=Xa(404,{pathname:xe}),Ve=l||o,{matches:tt,route:O}=fg(Ve);return{notFoundMatches:tt,route:O,error:Re}}function Ze(xe,Re,Ve){if(v=xe,_=Re,x=Ve||null,!w&&b.navigation===Gy){w=!0;let tt=kr(b.location,b.matches);tt!=null&&Qe({restoreScrollPosition:tt})}return()=>{v=null,_=null,x=null}}function It(xe,Re){return x&&x(xe,Re.map(tt=>TH(tt,b.loaderData)))||xe.key}function cn(xe,Re){if(v&&_){let Ve=It(xe,Re);v[Ve]=_()}}function kr(xe,Re){if(v){let Ve=It(xe,Re),tt=v[Ve];if(typeof tt=="number")return tt}return null}function vr(xe,Re,Ve){if(t.patchRoutesOnNavigation)if(xe){if(Object.keys(xe[0].params).length>0)return{active:!0,matches:_0(Re,Ve,c,!0)}}else return{active:!0,matches:_0(Re,Ve,c,!0)||[]};return{active:!1,matches:null}}async function dn(xe,Re,Ve,tt){if(!t.patchRoutesOnNavigation)return{type:"success",matches:xe};let O=xe;for(;;){let Z=l==null,G=l||o,Y=a;try{await t.patchRoutesOnNavigation({signal:Ve,path:Re,matches:O,fetcherKey:tt,patch:(ke,pe)=>{Ve.aborted||aA(ke,pe,G,Y,s,!1)}})}catch(ke){return{type:"error",error:ke,partialMatches:O}}finally{Z&&!Ve.aborted&&(o=[...o])}if(Ve.aborted)return{type:"aborted"};let ee=Dc(G,Re,c),re=null;if(ee){if(Object.keys(ee[0].params).length===0)return{type:"success",matches:ee};if(re=_0(G,Re,c,!0),!(re&&O.length<re.length&&nr(O,re.slice(0,O.length))))return{type:"success",matches:ee}}if(re||(re=_0(G,Re,c,!0)),!re||nr(O,re))return{type:"success",matches:null};O=re}}function nr(xe,Re){return xe.length===Re.length&&xe.every((Ve,tt)=>Ve.route.id===Re[tt].route.id)}function zn(xe){a={},l=Ip(xe,s,void 0,a)}function on(xe,Re,Ve=!1){let tt=l==null;aA(xe,Re,l||o,a,s,Ve),tt&&(o=[...o],Qe({}))}return W={get basename(){return c},get future(){return d},get state(){return b},get routes(){return o},get window(){return e},initialize:Te,subscribe:et,enableScrollRestoration:Ze,navigate:wt,fetch:Je,revalidate:ae,createHref:xe=>t.history.createHref(xe),encodeLocation:xe=>t.history.encodeLocation(xe),getFetcher:Ot,resetFetcher:Vt,deleteFetcher:mr,dispose:Pe,getBlocker:Rr,deleteBlocker:rr,patchRoutes:on,_internalFetchControllers:ce,_internalSetRoutes:zn,_internalSetStateDoNotUseOrYouWillBreakYourApp(xe){Qe(xe)}},t.unstable_instrumentations&&(W=WH(W,t.unstable_instrumentations.map(xe=>xe.router).filter(Boolean))),W}function i$(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function u5(t,e,r,n,i,s){let a,o;if(i){a=[];for(let c of e)if(a.push(c),c.route.id===i){o=c;break}}else a=e,o=e[e.length-1];let l=Lb(n||".",Rb(a),so(t.pathname,r)||t.pathname,s==="path");if(n==null&&(l.search=t.search,l.hash=t.hash),(n==null||n===""||n===".")&&o){let c=Db(l.search);if(o.route.index&&!c)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!o.route.index&&c){let h=new URLSearchParams(l.search),d=h.getAll("index");h.delete("index"),d.filter(f=>f).forEach(f=>h.append("index",f));let p=h.toString();l.search=p?`?${p}`:""}}return r!=="/"&&(l.pathname=UH({basename:r,pathname:l.pathname})),ul(l)}function iA(t,e,r){if(!r||!i$(r))return{path:e};if(r.formMethod&&!S$(r.formMethod))return{path:e,error:Xa(405,{method:r.formMethod})};let n=()=>({path:e,error:Xa(400,{type:"invalid-body"})}),s=(r.formMethod||"get").toUpperCase(),a=pR(e);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ks(s))return n();let d=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((p,[f,v])=>`${p}${f}=${v}
`,""):String(r.body);return{path:e,submission:{formMethod:s,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:d}}}else if(r.formEncType==="application/json"){if(!ks(s))return n();try{let d=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:e,submission:{formMethod:s,formAction:a,formEncType:r.formEncType,formData:void 0,json:d,text:void 0}}}catch{return n()}}}$r(typeof FormData=="function","FormData is not available in this environment");let o,l;if(r.formData)o=f5(r.formData),l=r.formData;else if(r.body instanceof FormData)o=f5(r.body),l=r.body;else if(r.body instanceof URLSearchParams)o=r.body,l=hA(o);else if(r.body==null)o=new URLSearchParams,l=new FormData;else try{o=new URLSearchParams(r.body),l=hA(o)}catch{return n()}let c={formMethod:s,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(ks(c.formMethod))return{path:e,submission:c};let h=Cu(e);return t&&h.search&&Db(h.search)&&o.append("index",""),h.search=`?${o}`,{path:ul(h),submission:c}}function sA(t,e,r,n,i,s,a,o,l,c,h,d,p,f,v,x,_,w,S,N,j){var ve;let z=N?ba(N[1])?N[1].error:N[1].data:void 0,W=i.createURL(s.location),b=i.createURL(l),T;if(h&&s.errors){let ge=Object.keys(s.errors)[0];T=a.findIndex(ye=>ye.route.id===ge)}else if(N&&ba(N[1])){let ge=N[0];T=a.findIndex(ye=>ye.route.id===ge)-1}let A=N?N[1].statusCode:void 0,F=A&&A>=400,k={currentUrl:W,currentParams:((ve=s.matches[0])==null?void 0:ve.params)||{},nextUrl:b,nextParams:a[0].params,...o,actionResult:z,actionStatus:A},L=fm(a),R=a.map((ge,ye)=>{let{route:ce}=ge,be=null;if(T!=null&&ye>T?be=!1:ce.lazy?be=!0:jb(ce)?h?be=h5(ce,s.loaderData,s.errors):s$(s.loaderData,s.matches[ye],ge)&&(be=!0):be=!1,be!==null)return d5(r,n,t,L,ge,c,e,be);let Me=!1;typeof j=="boolean"?Me=j:F?Me=!1:(d||W.pathname+W.search===b.pathname+b.search||W.search!==b.search||a$(s.matches[ye],ge))&&(Me=!0);let Le={...k,defaultShouldRevalidate:Me},I=V0(ge,Le);return d5(r,n,t,L,ge,c,e,I,Le,j)}),le=[];return v.forEach((ge,ye)=>{if(h||!a.some(H=>H.route.id===ge.routeId)||f.has(ye))return;let ce=s.fetchers.get(ye),be=ce&&ce.state!=="idle"&&ce.data===void 0,Me=Dc(_,ge.path,w);if(!Me){if(S&&be)return;le.push({key:ye,routeId:ge.routeId,path:ge.path,matches:null,match:null,request:null,controller:null});return}if(x.has(ye))return;let Le=d1(Me,ge.path),I=new AbortController,B=Jh(i,ge.path,I.signal),U=null;if(p.has(ye))p.delete(ye),U=Fd(r,n,B,Me,Le,c,e);else if(be)d&&(U=Fd(r,n,B,Me,Le,c,e));else{let H;typeof j=="boolean"?H=j:F?H=!1:H=d;let te={...k,defaultShouldRevalidate:H};V0(Le,te)&&(U=Fd(r,n,B,Me,Le,c,e,te))}U&&le.push({key:ye,routeId:ge.routeId,path:ge.path,matches:U,match:Le,request:B,controller:I})}),{dsMatches:R,revalidatingFetchers:le}}function jb(t){return t.loader!=null||t.middleware!=null&&t.middleware.length>0}function h5(t,e,r){if(t.lazy)return!0;if(!jb(t))return!1;let n=e!=null&&t.id in e,i=r!=null&&r[t.id]!==void 0;return!n&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!n&&!i}function s$(t,e,r){let n=!e||r.route.id!==e.route.id,i=!t.hasOwnProperty(r.route.id);return n||i}function a$(t,e){let r=t.route.path;return t.pathname!==e.pathname||r!=null&&r.endsWith("*")&&t.params["*"]!==e.params["*"]}function V0(t,e){if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate(e);if(typeof r=="boolean")return r}return e.defaultShouldRevalidate}function aA(t,e,r,n,i,s){let a;if(t){let c=n[t];$r(c,`No route found to patch children into: routeId = ${t}`),c.children||(c.children=[]),a=c.children}else a=r;let o=[],l=[];if(e.forEach(c=>{let h=a.find(d=>cR(c,d));h?l.push({existingRoute:h,newRoute:c}):o.push(c)}),o.length>0){let c=Ip(o,i,[t||"_","patch",String((a==null?void 0:a.length)||"0")],n);a.push(...c)}if(s&&l.length>0)for(let c=0;c<l.length;c++){let{existingRoute:h,newRoute:d}=l[c],p=h,[f]=Ip([d],i,[],{},!0);Object.assign(p,{element:f.element?f.element:p.element,errorElement:f.errorElement?f.errorElement:p.errorElement,hydrateFallbackElement:f.hydrateFallbackElement?f.hydrateFallbackElement:p.hydrateFallbackElement})}}function cR(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((r,n)=>{var i;return(i=e.children)==null?void 0:i.some(s=>cR(r,s))}):!1}var oA=new WeakMap,uR=({key:t,route:e,manifest:r,mapRouteProperties:n})=>{let i=r[e.id];if($r(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let s=i.lazy[t];if(!s)return;let a=oA.get(i);a||(a={},oA.set(i,a));let o=a[t];if(o)return o;let l=(async()=>{let c=SH(t),d=i[t]!==void 0&&t!=="hasErrorBoundary";if(c)Ai(!c,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),a[t]=Promise.resolve();else if(d)Ai(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let p=await s();p!=null&&(Object.assign(i,{[t]:p}),Object.assign(i,n(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(p=>p===void 0)&&(i.lazy=void 0))})();return a[t]=l,l},lA=new WeakMap;function o$(t,e,r,n,i){let s=r[t.id];if($r(s,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let h=lA.get(s);if(h)return{lazyRoutePromise:h,lazyHandlerPromise:h};let d=(async()=>{$r(typeof t.lazy=="function","No lazy route function found");let p=await t.lazy(),f={};for(let v in p){let x=p[v];if(x===void 0)continue;let _=AH(v),S=s[v]!==void 0&&v!=="hasErrorBoundary";_?Ai(!_,"Route property "+v+" is not a supported property to be returned from a lazy route function. This property will be ignored."):S?Ai(!S,`Route "${s.id}" has a static property "${v}" defined but its lazy function is also returning a value for this property. The lazy route property "${v}" will be ignored.`):f[v]=x}Object.assign(s,f),Object.assign(s,{...n(s),lazy:void 0})})();return lA.set(s,d),d.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:d}}let a=Object.keys(t.lazy),o=[],l;for(let h of a){if(i&&i.includes(h))continue;let d=uR({key:h,route:t,manifest:r,mapRouteProperties:n});d&&(o.push(d),h===e&&(l=d))}let c=o.length>0?Promise.all(o).then(()=>{}):void 0;return c==null||c.catch(()=>{}),l==null||l.catch(()=>{}),{lazyRoutePromise:c,lazyHandlerPromise:l}}async function cA(t){let e=t.matches.filter(i=>i.shouldLoad),r={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,s)=>{r[e[s].route.id]=i}),r}async function l$(t){return t.matches.some(e=>e.route.middleware)?hR(t,()=>cA(t)):cA(t)}function hR(t,e){return c$(t,e,n=>{if(b$(n))throw n;return n},y$,r);function r(n,i,s){if(s)return Promise.resolve(Object.assign(s.value,{[i]:{type:"error",result:n}}));{let{matches:a}=t,o=Math.min(Math.max(a.findIndex(c=>c.route.id===i),0),Math.max(a.findIndex(c=>c.shouldCallHandler()),0)),l=Mc(a,a[o].route.id).route.id;return Promise.resolve({[l]:{type:"error",result:n}})}}}async function c$(t,e,r,n,i){let{matches:s,request:a,params:o,context:l,unstable_pattern:c}=t,h=s.flatMap(p=>p.route.middleware?p.route.middleware.map(f=>[p.route.id,f]):[]);return await dR({request:a,params:o,context:l,unstable_pattern:c},h,e,r,n,i)}async function dR(t,e,r,n,i,s,a=0){let{request:o}=t;if(o.signal.aborted)throw o.signal.reason??new Error(`Request aborted: ${o.method} ${o.url}`);let l=e[a];if(!l)return await r();let[c,h]=l,d,p=async()=>{if(d)throw new Error("You may only call `next()` once per middleware");try{return d={value:await dR(t,e,r,n,i,s,a+1)},d.value}catch(f){return d={value:await s(f,c,d)},d.value}};try{let f=await h(t,p),v=f!=null?n(f):void 0;return i(v)?v:d?v??d.value:(d={value:await p()},d.value)}catch(f){return await s(f,c,d)}}function fR(t,e,r,n,i){let s=uR({key:"middleware",route:n.route,manifest:e,mapRouteProperties:t}),a=o$(n.route,ks(r.method)?"action":"loader",e,t,i);return{middleware:s,route:a.lazyRoutePromise,handler:a.lazyHandlerPromise}}function d5(t,e,r,n,i,s,a,o,l=null,c){let h=!1,d=fR(t,e,r,i,s);return{...i,_lazyPromises:d,shouldLoad:o,shouldRevalidateArgs:l,shouldCallHandler(p){return h=!0,l?typeof c=="boolean"?V0(i,{...l,defaultShouldRevalidate:c}):typeof p=="boolean"?V0(i,{...l,defaultShouldRevalidate:p}):V0(i,l):o},resolve(p){let{lazy:f,loader:v,middleware:x}=i.route,_=h||o||p&&!ks(r.method)&&(f||v),w=x&&x.length>0&&!v&&!f;return _&&(ks(r.method)||!w)?h$({request:r,unstable_pattern:n,match:i,lazyHandlerPromise:d==null?void 0:d.handler,lazyRoutePromise:d==null?void 0:d.route,handlerOverride:p,scopedContext:a}):Promise.resolve({type:"data",result:void 0})}}}function Fd(t,e,r,n,i,s,a,o=null){return n.map(l=>l.route.id!==i.route.id?{...l,shouldLoad:!1,shouldRevalidateArgs:o,shouldCallHandler:()=>!1,_lazyPromises:fR(t,e,r,l,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:d5(t,e,r,fm(n),l,s,a,!0,o))}async function u$(t,e,r,n,i,s){r.some(c=>{var h;return(h=c._lazyPromises)==null?void 0:h.middleware})&&await Promise.all(r.map(c=>{var h;return(h=c._lazyPromises)==null?void 0:h.middleware}));let a={request:e,unstable_pattern:fm(r),params:r[0].params,context:i,matches:r},l=await t({...a,fetcherKey:n,runClientMiddleware:c=>{let h=a;return hR(h,()=>c({...h,fetcherKey:n,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(r.flatMap(c=>{var h,d;return[(h=c._lazyPromises)==null?void 0:h.handler,(d=c._lazyPromises)==null?void 0:d.route]}))}catch{}return l}async function h$({request:t,unstable_pattern:e,match:r,lazyHandlerPromise:n,lazyRoutePromise:i,handlerOverride:s,scopedContext:a}){let o,l,c=ks(t.method),h=c?"action":"loader",d=p=>{let f,v=new Promise((w,S)=>f=S);l=()=>f(),t.signal.addEventListener("abort",l);let x=w=>typeof p!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${h}" [routeId: ${r.route.id}]`)):p({request:t,unstable_pattern:e,params:r.params,context:a},...w!==void 0?[w]:[]),_=(async()=>{try{return{type:"data",result:await(s?s(S=>x(S)):x())}}catch(w){return{type:"error",result:w}}})();return Promise.race([_,v])};try{let p=c?r.route.action:r.route.loader;if(n||i)if(p){let f,[v]=await Promise.all([d(p).catch(x=>{f=x}),n,i]);if(f!==void 0)throw f;o=v}else{await n;let f=c?r.route.action:r.route.loader;if(f)[o]=await Promise.all([d(f),i]);else if(h==="action"){let v=new URL(t.url),x=v.pathname+v.search;throw Xa(405,{method:t.method,pathname:x,routeId:r.route.id})}else return{type:"data",result:void 0}}else if(p)o=await d(p);else{let f=new URL(t.url),v=f.pathname+f.search;throw Xa(404,{pathname:v})}}catch(p){return{type:"error",result:p}}finally{l&&t.signal.removeEventListener("abort",l)}return o}async function d$(t){let e=t.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?t.body==null?null:t.json():t.text()}async function f$(t){var n,i,s,a,o;let{result:e,type:r}=t;if(Fb(e)){let l;try{l=await d$(e)}catch(c){return{type:"error",error:c}}return r==="error"?{type:"error",error:new dm(e.status,e.statusText,l),statusCode:e.status,headers:e.headers}:{type:"data",data:l,statusCode:e.status,headers:e.headers}}return r==="error"?mA(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(n=e.init)==null?void 0:n.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:x$(e),statusCode:Pp(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Pp(e)?e.status:void 0}:mA(e)?{type:"data",data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function p$(t,e,r,n,i){let s=t.headers.get("Location");if($r(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!I2(s)){let a=n.slice(0,n.findIndex(o=>o.route.id===r)+1);s=u5(new URL(e.url),a,i,s),t.headers.set("Location",s)}return t}function uA(t,e,r,n){let i=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(I2(t)){let s=t,a=s.startsWith("//")?new URL(e.protocol+s):new URL(s);if(i.includes(a.protocol))throw new Error("Invalid redirect location");let o=so(a.pathname,r)!=null;if(a.origin===e.origin&&o)return a.pathname+a.search+a.hash}try{let s=n.createURL(t);if(i.includes(s.protocol))throw new Error("Invalid redirect location")}catch{}return t}function Jh(t,e,r,n){let i=t.createURL(pR(e)).toString(),s={signal:r};if(n&&ks(n.formMethod)){let{formMethod:a,formEncType:o}=n;s.method=a.toUpperCase(),o==="application/json"?(s.headers=new Headers({"Content-Type":o}),s.body=JSON.stringify(n.json)):o==="text/plain"?s.body=n.text:o==="application/x-www-form-urlencoded"&&n.formData?s.body=f5(n.formData):s.body=n.formData}return new Request(i,s)}function f5(t){let e=new URLSearchParams;for(let[r,n]of t.entries())e.append(r,typeof n=="string"?n:n.name);return e}function hA(t){let e=new FormData;for(let[r,n]of t.entries())e.append(r,n);return e}function m$(t,e,r,n=!1,i=!1){let s={},a=null,o,l=!1,c={},h=r&&ba(r[1])?r[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let p=d.route.id,f=e[p];if($r(!Qu(f),"Cannot handle redirect results in processLoaderData"),ba(f)){let v=f.error;if(h!==void 0&&(v=h,h=void 0),a=a||{},i)a[p]=v;else{let x=Mc(t,p);a[x.route.id]==null&&(a[x.route.id]=v)}n||(s[p]=lR),l||(l=!0,o=Pp(f.error)?f.error.status:500),f.headers&&(c[p]=f.headers)}else s[p]=f.data,f.statusCode&&f.statusCode!==200&&!l&&(o=f.statusCode),f.headers&&(c[p]=f.headers)}),h!==void 0&&r&&(a={[r[0]]:h},r[2]&&(s[r[2]]=void 0)),{loaderData:s,errors:a,statusCode:o||200,loaderHeaders:c}}function dA(t,e,r,n,i,s){let{loaderData:a,errors:o}=m$(e,r,n);return i.filter(l=>!l.matches||l.matches.some(c=>c.shouldLoad)).forEach(l=>{let{key:c,match:h,controller:d}=l;if(d&&d.signal.aborted)return;let p=s[c];if($r(p,"Did not find corresponding fetcher result"),ba(p)){let f=Mc(t.matches,h==null?void 0:h.route.id);o&&o[f.route.id]||(o={...o,[f.route.id]:p.error}),t.fetchers.delete(c)}else if(Qu(p))$r(!1,"Unhandled fetcher revalidation redirect");else{let f=Al(p.data);t.fetchers.set(c,f)}}),{loaderData:a,errors:o}}function fA(t,e,r,n){let i=Object.entries(e).filter(([,s])=>s!==lR).reduce((s,[a,o])=>(s[a]=o,s),{});for(let s of r){let a=s.route.id;if(!e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&s.route.loader&&(i[a]=t[a]),n&&n.hasOwnProperty(a))break}return i}function pA(t){return t?ba(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Mc(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function fg(t){let e=t.length===1?t[0]:t.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Xa(t,{pathname:e,routeId:r,method:n,type:i,message:s}={}){let a="Unknown Server Error",o="Unknown @remix-run/router error";return t===400?(a="Bad Request",n&&e&&r?o=`You made a ${n} request to "${e}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:i==="invalid-body"&&(o="Unable to encode submission body")):t===403?(a="Forbidden",o=`Route "${r}" does not match URL "${e}"`):t===404?(a="Not Found",o=`No route matches URL "${e}"`):t===405&&(a="Method Not Allowed",n&&e&&r?o=`You made a ${n.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(o=`Invalid request method "${n.toUpperCase()}"`)),new dm(t||500,a,new Error(o),!0)}function pg(t){let e=Object.entries(t);for(let r=e.length-1;r>=0;r--){let[n,i]=e[r];if(Qu(i))return{key:n,result:i}}}function pR(t){let e=typeof t=="string"?Cu(t):t;return ul({...e,hash:""})}function g$(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function x$(t){var e,r;return new dm(((e=t.init)==null?void 0:e.status)??500,((r=t.init)==null?void 0:r.statusText)??"Internal Server Error",t.data)}function y$(t){return t!=null&&typeof t=="object"&&Object.entries(t).every(([e,r])=>typeof e=="string"&&v$(r))}function v$(t){return t!=null&&typeof t=="object"&&"type"in t&&"result"in t&&(t.type==="data"||t.type==="error")}function w$(t){return Fb(t.result)&&aR.has(t.result.status)}function ba(t){return t.type==="error"}function Qu(t){return(t&&t.type)==="redirect"}function mA(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function Fb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function _$(t){return aR.has(t)}function b$(t){return Fb(t)&&_$(t.status)&&t.headers.has("Location")}function S$(t){return ZH.has(t.toUpperCase())}function ks(t){return QH.has(t.toUpperCase())}function Db(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function d1(t,e){let r=typeof e=="string"?Cu(e).search:e.search;if(t[t.length-1].route.index&&Db(r||""))return t[t.length-1];let n=tR(t);return n[n.length-1]}function gA(t){let{formMethod:e,formAction:r,formEncType:n,text:i,formData:s,json:a}=t;if(!(!e||!r||!n)){if(i!=null)return{formMethod:e,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:r,formEncType:n,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:r,formEncType:n,formData:void 0,json:a,text:void 0}}}function Yy(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function E$(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function s0(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function A$(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Al(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function N$(t,e){try{let r=t.sessionStorage.getItem(oR);if(r){let n=JSON.parse(r);for(let[i,s]of Object.entries(n||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function T$(t,e){if(e.size>0){let r={};for(let[n,i]of e)r[n]=[...i];try{t.sessionStorage.setItem(oR,JSON.stringify(r))}catch(n){Ai(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function xA(){let t,e,r=new Promise((n,i)=>{t=async s=>{n(s);try{await r}catch{}},e=async s=>{i(s);try{await r}catch{}}});return{promise:r,resolve:t,reject:e}}var Th=Q.createContext(null);Th.displayName="DataRouter";var pm=Q.createContext(null);pm.displayName="DataRouterState";var mR=Q.createContext(!1);function k$(){return Q.useContext(mR)}var Mb=Q.createContext({isTransitioning:!1});Mb.displayName="ViewTransition";var gR=Q.createContext(new Map);gR.displayName="Fetchers";var C$=Q.createContext(null);C$.displayName="Await";var oo=Q.createContext(null);oo.displayName="Navigation";var P2=Q.createContext(null);P2.displayName="Location";var dl=Q.createContext({outlet:null,matches:[],isDataRoute:!1});dl.displayName="Route";var Ob=Q.createContext(null);Ob.displayName="RouteError";var xR="REACT_ROUTER_ERROR",I$="REDIRECT",P$="ROUTE_ERROR_RESPONSE";function R$(t){if(t.startsWith(`${xR}:${I$}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function L$(t){if(t.startsWith(`${xR}:${P$}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new dm(e.status,e.statusText,e.data)}catch{}}function j$(t,{relative:e}={}){$r(mm(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=Q.useContext(oo),{hash:i,pathname:s,search:a}=gm(t,{relative:e}),o=s;return r!=="/"&&(o=s==="/"?r:ll([r,s])),n.createHref({pathname:o,search:a,hash:i})}function mm(){return Q.useContext(P2)!=null}function Iu(){return $r(mm(),"useLocation() may be used only in the context of a <Router> component."),Q.useContext(P2).location}var yR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vR(t){Q.useContext(oo).static||Q.useLayoutEffect(t)}function F$(){let{isDataRoute:t}=Q.useContext(dl);return t?X$():D$()}function D$(){$r(mm(),"useNavigate() may be used only in the context of a <Router> component.");let t=Q.useContext(Th),{basename:e,navigator:r}=Q.useContext(oo),{matches:n}=Q.useContext(dl),{pathname:i}=Iu(),s=JSON.stringify(Rb(n)),a=Q.useRef(!1);return vR(()=>{a.current=!0}),Q.useCallback((l,c={})=>{if(Ai(a.current,yR),!a.current)return;if(typeof l=="number"){r.go(l);return}let h=Lb(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ll([e,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[e,r,s,i,t])}var M$=Q.createContext(null);function O$(t){let e=Q.useContext(dl).outlet;return Q.useMemo(()=>e&&Q.createElement(M$.Provider,{value:t},e),[e,t])}function gm(t,{relative:e}={}){let{matches:r}=Q.useContext(dl),{pathname:n}=Iu(),i=JSON.stringify(Rb(r));return Q.useMemo(()=>Lb(t,JSON.parse(i),n,e==="path"),[t,i,n,e])}function B$(t,e,r,n,i){$r(mm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=Q.useContext(oo),{matches:a}=Q.useContext(dl),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",h=o?o.pathnameBase:"/",d=o&&o.route;{let S=d&&d.path||"";_R(c,!d||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let p=Iu(),f;f=p;let v=f.pathname||"/",x=v;if(h!=="/"){let S=h.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let _=Dc(t,{pathname:x});return Ai(d||_!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Ai(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),$$(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:ll([h,s.encodeLocation?s.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?h:ll([h,s.encodeLocation?s.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),a,r,n,i)}function U$(){let t=Y$(),e=Pp(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=Q.createElement(Q.Fragment,null,Q.createElement("p",null," Hey developer "),Q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Q.createElement("code",{style:s},"ErrorBoundary")," or"," ",Q.createElement("code",{style:s},"errorElement")," prop on your route.")),Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),r?Q.createElement("pre",{style:i},r):null,a)}var V$=Q.createElement(U$,null),wR=class extends Q.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const r=L$(t.digest);r&&(t=r)}let e=t!==void 0?Q.createElement(dl.Provider,{value:this.props.routeContext},Q.createElement(Ob.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?Q.createElement(z$,{error:t},e):e}};wR.contextType=mR;var Xy=new WeakMap;function z$({children:t,error:e}){let{basename:r}=Q.useContext(oo);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=R$(e.digest);if(n){let i=Xy.get(e);if(i)throw i;let s=nR(n.location,r);if(rR&&!Xy.get(e))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw Xy.set(e,a),a}return Q.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return t}function H$({routeContext:t,match:e,children:r}){let n=Q.useContext(Th);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),Q.createElement(dl.Provider,{value:t},r)}function $$(t,e=[],r=null,n=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,a=r==null?void 0:r.errors;if(a!=null){let h=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);$r(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let o=!1,l=-1;if(r)for(let h=0;h<s.length;h++){let d=s[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=h),d.route.id){let{loaderData:p,errors:f}=r,v=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!f||f[d.route.id]===void 0);if(d.route.lazy||v){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=r&&n?(h,d)=>{var p,f;n(h,{location:r.location,params:((f=(p=r.matches)==null?void 0:p[0])==null?void 0:f.params)??{},unstable_pattern:fm(r.matches),errorInfo:d})}:void 0;return s.reduceRight((h,d,p)=>{let f,v=!1,x=null,_=null;r&&(f=a&&d.route.id?a[d.route.id]:void 0,x=d.route.errorElement||V$,o&&(l<0&&p===0?(_R("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,_=null):l===p&&(v=!0,_=d.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,p+1)),S=()=>{let N;return f?N=x:v?N=_:d.route.Component?N=Q.createElement(d.route.Component,null):d.route.element?N=d.route.element:N=h,Q.createElement(H$,{match:d,routeContext:{outlet:h,matches:w,isDataRoute:r!=null},children:N})};return r&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?Q.createElement(wR,{location:r.location,revalidation:r.revalidation,component:x,error:f,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:c}):S()},null)}function Bb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q$(t){let e=Q.useContext(Th);return $r(e,Bb(t)),e}function W$(t){let e=Q.useContext(pm);return $r(e,Bb(t)),e}function K$(t){let e=Q.useContext(dl);return $r(e,Bb(t)),e}function Ub(t){let e=K$(t),r=e.matches[e.matches.length-1];return $r(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function G$(){return Ub("useRouteId")}function Y$(){var n;let t=Q.useContext(Ob),e=W$("useRouteError"),r=Ub("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function X$(){let{router:t}=q$("useNavigate"),e=Ub("useNavigate"),r=Q.useRef(!1);return vR(()=>{r.current=!0}),Q.useCallback(async(i,s={})=>{Ai(r.current,yR),r.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var yA={};function _R(t,e,r){!e&&!yA[t]&&(yA[t]=!0,Ai(!1,r))}var vA={};function wA(t,e){!t&&!vA[e]&&(vA[e]=!0,console.warn(e))}var Q$="useOptimistic",_A=jF[Q$],J$=()=>{};function Z$(t){return _A?_A(t):[t,J$]}function eq(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&Ai(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:Q.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&Ai(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:Q.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&Ai(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:Q.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var tq=["HydrateFallback","hydrateFallbackElement"],rq=class{constructor(){this.status="pending",this.promise=new Promise((t,e)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",t(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",e(r))}})}};function nq({router:t,flushSync:e,onError:r,unstable_useTransitions:n}){n=k$()||n;let[s,a]=Q.useState(t.state),[o,l]=Z$(s),[c,h]=Q.useState(),[d,p]=Q.useState({isTransitioning:!1}),[f,v]=Q.useState(),[x,_]=Q.useState(),[w,S]=Q.useState(),N=Q.useRef(new Map),j=Q.useCallback((T,{deletedFetchers:A,newErrors:F,flushSync:k,viewTransitionOpts:L})=>{F&&r&&Object.values(F).forEach(le=>{var ve;return r(le,{location:T.location,params:((ve=T.matches[0])==null?void 0:ve.params)??{},unstable_pattern:fm(T.matches)})}),T.fetchers.forEach((le,ve)=>{le.data!==void 0&&N.current.set(ve,le.data)}),A.forEach(le=>N.current.delete(le)),wA(k===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let R=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(wA(L==null||R,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!L||!R){e&&k?e(()=>a(T)):n===!1?a(T):Q.startTransition(()=>{n===!0&&l(le=>bA(le,T)),a(T)});return}if(e&&k){e(()=>{x&&(f==null||f.resolve(),x.skipTransition()),p({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let le=t.window.document.startViewTransition(()=>{e(()=>a(T))});le.finished.finally(()=>{e(()=>{v(void 0),_(void 0),h(void 0),p({isTransitioning:!1})})}),e(()=>_(le));return}x?(f==null||f.resolve(),x.skipTransition(),S({state:T,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(h(T),p({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[t.window,e,x,f,n,l,r]);Q.useLayoutEffect(()=>t.subscribe(j),[t,j]),Q.useEffect(()=>{d.isTransitioning&&!d.flushSync&&v(new rq)},[d]),Q.useEffect(()=>{if(f&&c&&t.window){let T=c,A=f.promise,F=t.window.document.startViewTransition(async()=>{n===!1?a(T):Q.startTransition(()=>{n===!0&&l(k=>bA(k,T)),a(T)}),await A});F.finished.finally(()=>{v(void 0),_(void 0),h(void 0),p({isTransitioning:!1})}),_(F)}},[c,f,t.window,n,l]),Q.useEffect(()=>{f&&c&&o.location.key===c.location.key&&f.resolve()},[f,x,o.location,c]),Q.useEffect(()=>{!d.isTransitioning&&w&&(h(w.state),p({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}),S(void 0))},[d.isTransitioning,w]);let z=Q.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:T=>t.navigate(T),push:(T,A,F)=>t.navigate(T,{state:A,preventScrollReset:F==null?void 0:F.preventScrollReset}),replace:(T,A,F)=>t.navigate(T,{replace:!0,state:A,preventScrollReset:F==null?void 0:F.preventScrollReset})}),[t]),W=t.basename||"/",b=Q.useMemo(()=>({router:t,navigator:z,static:!1,basename:W,onError:r}),[t,z,W,r]);return Q.createElement(Q.Fragment,null,Q.createElement(Th.Provider,{value:b},Q.createElement(pm.Provider,{value:o},Q.createElement(gR.Provider,{value:N.current},Q.createElement(Mb.Provider,{value:d},Q.createElement(aq,{basename:W,location:o.location,navigationType:o.historyAction,navigator:z,unstable_useTransitions:n},Q.createElement(iq,{routes:t.routes,future:t.future,state:o,onError:r})))))),null)}function bA(t,e){return{...t,navigation:e.navigation.state!=="idle"?e.navigation:t.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:t.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:t.actionData,fetchers:e.fetchers}}var iq=Q.memo(sq);function sq({routes:t,future:e,state:r,onError:n}){return B$(t,void 0,r,n,e)}function bR(t){return O$(t.context)}function aq({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:i,static:s=!1,unstable_useTransitions:a}){$r(!mm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=Q.useMemo(()=>({basename:o,navigator:i,static:s,unstable_useTransitions:a,future:{}}),[o,i,s,a]);typeof r=="string"&&(r=Cu(r));let{pathname:c="/",search:h="",hash:d="",state:p=null,key:f="default"}=r,v=Q.useMemo(()=>{let x=so(c,o);return x==null?null:{location:{pathname:x,search:h,hash:d,state:p,key:f},navigationType:n}},[o,c,h,d,p,f,n]);return Ai(v!=null,`<Router basename="${o}"> is not able to match the URL "${c}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:Q.createElement(oo.Provider,{value:l},Q.createElement(P2.Provider,{children:e,value:v}))}var f1="get",p1="application/x-www-form-urlencoded";function R2(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function oq(t){return R2(t)&&t.tagName.toLowerCase()==="button"}function lq(t){return R2(t)&&t.tagName.toLowerCase()==="form"}function cq(t){return R2(t)&&t.tagName.toLowerCase()==="input"}function uq(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hq(t,e){return t.button===0&&(!e||e==="_self")&&!uq(t)}var mg=null;function dq(){if(mg===null)try{new FormData(document.createElement("form"),0),mg=!1}catch{mg=!0}return mg}var fq=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qy(t){return t!=null&&!fq.has(t)?(Ai(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${p1}"`),null):t}function pq(t,e){let r,n,i,s,a;if(lq(t)){let o=t.getAttribute("action");n=o?so(o,e):null,r=t.getAttribute("method")||f1,i=Qy(t.getAttribute("enctype"))||p1,s=new FormData(t)}else if(oq(t)||cq(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(n=l?so(l,e):null,r=t.getAttribute("formmethod")||o.getAttribute("method")||f1,i=Qy(t.getAttribute("formenctype"))||Qy(o.getAttribute("enctype"))||p1,s=new FormData(o,t),!dq()){let{name:c,type:h,value:d}=t;if(h==="image"){let p=c?`${c}.`:"";s.append(`${p}x`,"0"),s.append(`${p}y`,"0")}else c&&s.append(c,d)}}else{if(R2(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=f1,n=null,i=p1,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Vb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mq(t,e,r,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:e&&so(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function gq(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xq(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function yq(t,e,r){let n=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await gq(s,r);return a.links?a.links():[]}return[]}));return bq(n.flat(1).filter(xq).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function SA(t,e,r,n,i,s){let a=(l,c)=>r[c]?l.route.id!==r[c].route.id:!0,o=(l,c)=>{var h;return r[c].pathname!==l.pathname||((h=r[c].route.path)==null?void 0:h.endsWith("*"))&&r[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var d;let h=n.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=r[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function vq(t,e,{includeHydrateFallback:r}={}){return wq(t.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function wq(t){return[...new Set(t)]}function _q(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function bq(t,e){let r=new Set;return new Set(e),t.reduce((n,i)=>{let s=JSON.stringify(_q(i));return r.has(s)||(r.add(s),n.push({key:s,link:i})),n},[])}function SR(){let t=Q.useContext(Th);return Vb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Sq(){let t=Q.useContext(pm);return Vb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var zb=Q.createContext(void 0);zb.displayName="FrameworkContext";function ER(){let t=Q.useContext(zb);return Vb(t,"You must render this element inside a <HydratedRouter> element"),t}function Eq(t,e){let r=Q.useContext(zb),[n,i]=Q.useState(!1),[s,a]=Q.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=e,p=Q.useRef(null);Q.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let x=w=>{w.forEach(S=>{a(S.isIntersecting)})},_=new IntersectionObserver(x,{threshold:.5});return p.current&&_.observe(p.current),()=>{_.disconnect()}}},[t]),Q.useEffect(()=>{if(n){let x=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(x)}}},[n]);let f=()=>{i(!0)},v=()=>{i(!1),a(!1)};return r?t!=="intent"?[s,p,{}]:[s,p,{onFocus:a0(o,f),onBlur:a0(l,v),onMouseEnter:a0(c,f),onMouseLeave:a0(h,v),onTouchStart:a0(d,f)}]:[!1,p,{}]}function a0(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function Aq({page:t,...e}){let{router:r}=SR(),n=Q.useMemo(()=>Dc(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?Q.createElement(Tq,{page:t,matches:n,...e}):null}function Nq(t){let{manifest:e,routeModules:r}=ER(),[n,i]=Q.useState([]);return Q.useEffect(()=>{let s=!1;return yq(t,e,r).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,r]),n}function Tq({page:t,matches:e,...r}){let n=Iu(),{future:i,manifest:s,routeModules:a}=ER(),{basename:o}=SR(),{loaderData:l,matches:c}=Sq(),h=Q.useMemo(()=>SA(t,e,c,s,n,"data"),[t,e,c,s,n]),d=Q.useMemo(()=>SA(t,e,c,s,n,"assets"),[t,e,c,s,n]),p=Q.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let x=new Set,_=!1;if(e.forEach(S=>{var j;let N=s.routes[S.route.id];!N||!N.hasLoader||(!h.some(z=>z.route.id===S.route.id)&&S.route.id in l&&((j=a[S.route.id])!=null&&j.shouldRevalidate)||N.hasClientLoader?_=!0:x.add(S.route.id))}),x.size===0)return[];let w=mq(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return _&&x.size>0&&w.searchParams.set("_routes",e.filter(S=>x.has(S.route.id)).map(S=>S.route.id).join(",")),[w.pathname+w.search]},[o,i.unstable_trailingSlashAwareDataRequests,l,n,s,h,e,t,a]),f=Q.useMemo(()=>vq(d,s),[d,s]),v=Nq(d);return Q.createElement(Q.Fragment,null,p.map(x=>Q.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...r})),f.map(x=>Q.createElement("link",{key:x,rel:"modulepreload",href:x,...r})),v.map(({key:x,link:_})=>Q.createElement("link",{key:x,nonce:r.nonce,..._})))}function kq(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var Cq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Cq&&(window.__reactRouterVersion="7.12.0")}catch{}function Iq(t,e){return n$({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:vH({window:e==null?void 0:e.window}),hydrationData:Pq(),routes:t,mapRouteProperties:eq,hydrationRouteProperties:tq,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function Pq(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:Rq(t.errors)}),t}function Rq(t){if(!t)return null;let e=Object.entries(t),r={};for(let[n,i]of e)if(i&&i.__type==="RouteErrorResponse")r[n]=new dm(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",r[n]=a}catch{}}if(r[n]==null){let s=new Error(i.message);s.stack="",r[n]=s}}else r[n]=i;return r}var AR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jo=Q.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:p,...f},v){let{basename:x,unstable_useTransitions:_}=Q.useContext(oo),w=typeof c=="string"&&AR.test(c),S=nR(c,x);c=S.to;let N=j$(c,{relative:i}),[j,z,W]=Eq(n,f),b=Dq(c,{replace:a,state:o,target:l,preventScrollReset:h,relative:i,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:_});function T(F){e&&e(F),F.defaultPrevented||b(F)}let A=Q.createElement("a",{...f,...W,href:S.absoluteURL||N,onClick:S.isExternal||s?e:T,ref:kq(v,z),target:l,"data-discover":!w&&r==="render"?"true":void 0});return j&&!w?Q.createElement(Q.Fragment,null,A,Q.createElement(Aq,{page:N})):A});Jo.displayName="Link";var Lq=Q.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:i=!1,style:s,to:a,viewTransition:o,children:l,...c},h){let d=gm(a,{relative:c.relative}),p=Iu(),f=Q.useContext(pm),{navigator:v,basename:x}=Q.useContext(oo),_=f!=null&&Vq(d)&&o===!0,w=v.encodeLocation?v.encodeLocation(d).pathname:d.pathname,S=p.pathname,N=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(S=S.toLowerCase(),N=N?N.toLowerCase():null,w=w.toLowerCase()),N&&x&&(N=so(N,x)||N);const j=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let z=S===w||!i&&S.startsWith(w)&&S.charAt(j)==="/",W=N!=null&&(N===w||!i&&N.startsWith(w)&&N.charAt(w.length)==="/"),b={isActive:z,isPending:W,isTransitioning:_},T=z?e:void 0,A;typeof n=="function"?A=n(b):A=[n,z?"active":null,W?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let F=typeof s=="function"?s(b):s;return Q.createElement(Jo,{...c,"aria-current":T,className:A,ref:h,style:F,to:a,viewTransition:o},typeof l=="function"?l(b):l)});Lq.displayName="NavLink";var jq=Q.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:i,state:s,method:a=f1,action:o,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:p,...f},v)=>{let{unstable_useTransitions:x}=Q.useContext(oo),_=Bq(),w=Uq(o,{relative:c}),S=a.toLowerCase()==="get"?"get":"post",N=typeof o=="string"&&AR.test(o),j=z=>{if(l&&l(z),z.defaultPrevented)return;z.preventDefault();let W=z.nativeEvent.submitter,b=(W==null?void 0:W.getAttribute("formmethod"))||a,T=()=>_(W||z.currentTarget,{fetcherKey:e,method:b,navigate:r,replace:i,state:s,relative:c,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:p});x&&r!==!1?Q.startTransition(()=>T()):T()};return Q.createElement("form",{ref:v,method:S,action:w,onSubmit:n?l:j,...f,"data-discover":!N&&t==="render"?"true":void 0})});jq.displayName="Form";function Fq(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NR(t){let e=Q.useContext(Th);return $r(e,Fq(t)),e}function Dq(t,{target:e,replace:r,state:n,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:o,unstable_useTransitions:l}={}){let c=F$(),h=Iu(),d=gm(t,{relative:s});return Q.useCallback(p=>{if(hq(p,e)){p.preventDefault();let f=r!==void 0?r:ul(h)===ul(d),v=()=>c(t,{replace:f,state:n,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:o});l?Q.startTransition(()=>v()):v()}},[h,c,d,r,n,e,t,i,s,a,o,l])}var Mq=0,Oq=()=>`__${String(++Mq)}__`;function Bq(){let{router:t}=NR("useSubmit"),{basename:e}=Q.useContext(oo),r=G$(),n=t.fetch,i=t.navigate;return Q.useCallback(async(s,a={})=>{let{action:o,method:l,encType:c,formData:h,body:d}=pq(s,e);if(a.navigate===!1){let p=a.fetcherKey||Oq();await n(p,r,a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:d,formMethod:a.method||l,formEncType:a.encType||c,flushSync:a.flushSync})}else await i(a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:d,formMethod:a.method||l,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,i,e,r])}function Uq(t,{relative:e}={}){let{basename:r}=Q.useContext(oo),n=Q.useContext(dl);$r(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...gm(t||".",{relative:e})},a=Iu();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(h=>h==="")){o.delete("index"),l.filter(d=>d).forEach(d=>o.append("index",d));let h=o.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:ll([r,s.pathname])),ul(s)}function Vq(t,{relative:e}={}){let r=Q.useContext(Mb);$r(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=NR("useViewTransitionState"),i=gm(t,{relative:e});if(!r.isTransitioning)return!1;let s=so(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=so(r.nextLocation.pathname,n)||r.nextLocation.pathname;return mx(i.pathname,a)!=null||mx(i.pathname,s)!=null}function zq(t){return Q.createElement(nq,{flushSync:dC.flushSync,...t})}const Hq="modulepreload",$q=function(t){return"/"+t},EA={},m1=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=$q(l),l in EA)return;EA[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Hq,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((p,f)=>{d.addEventListener("load",p),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},AA=t=>{switch(t){case"missing":return"Enter your email and beta code to sign in.";case"invalid_code":case"not_found":return"We couldn't find a match for that email and beta code. Please check both and try again.";case"expired":return"Your beta code has expired. Please contact the admin for an extension or extended access.";default:return"We couldn't verify your beta access. Please try again."}},Hb=({isOpen:t,onClose:e,onSuccess:r})=>{const{user:n,login:i}=ku(),[s,a]=Q.useState(""),[o,l]=Q.useState(""),[c,h]=Q.useState(""),[d,p]=Q.useState(!1),[f,v]=Q.useState(!1),[x,_]=Q.useState("form"),[w,S]=Q.useState(""),[N,j]=Q.useState("first"),z=Q.useRef(!1),[W,b]=Q.useState(!1),[T,A]=Q.useState({email:"",name:"",organization:"",reason:""}),[F,k]=Q.useState(""),[L,R]=Q.useState(""),[le,ve]=Q.useState(!1),ge=Le=>{if(!Le){S("");return}const I=Le-Date.now();if(I<=0){S("Session has expired.");return}const B=Math.floor(I/(60*1e3)),U=Math.floor(B/60),H=B%60;U<=0?S(`Expires in ${H} min`):S(`Expires in ${U}h ${H.toString().padStart(2,"0")}m`)};if(Q.useEffect(()=>{if(!t){a(""),l(""),h(""),p(!1),v(!1),_("form"),S(""),b(!1),A({email:"",name:"",organization:"",reason:""}),k(""),z.current=!1,j("first");return}n&&n.expiresAt&&(_("success"),ge(n.expiresAt),n.email&&!z.current&&(z.current=!0,j(Y3(n.email)?"returning":"first")))},[t,n]),!t)return null;const ye=async Le=>{Le.preventDefault(),h("");const I=s.trim().toLowerCase(),B=o.trim();if(!I||!B){h(AA("missing"));return}v(!0);try{const{status:U,user:H}=await Xz(I,B);if(U!=="success"){h(AA(U));return}z.current=!0,j(Y3(I)?"returning":"first"),i({email:H.email,plan:H.plan||(H.isAdmin?"beta_admin":"beta_tester"),isAdmin:!!H.isAdmin,expiresAt:H.expiresAt}),_("success")}catch(U){console.error("Beta login failed:",U),h("We couldn't verify your beta access right now. Please try again.")}finally{v(!1)}},ce=()=>{A(Le=>({...Le,email:s.trim()||Le.email})),k(""),ve(!1),b(!0),R("")},be=Le=>{Le.preventDefault();const I=T.email.trim().toLowerCase();if(!/\S+@\S+\.\S+/.test(I)){k("Enter a valid email so we can process your request.");return}ve(!0);try{uH({email:I,name:T.name,organization:T.organization,reason:T.reason}),k(""),b(!1),R(`Thank you for showing your interest!
Our team will contact you with a beta access code.
Alternatively, you can contact Mr. Riyasudeen via LinkedIn and share this email address for a beta access code.`)}catch(B){console.error("Failed to record access request",B),k("Could not submit your request right now. Please try again.")}finally{ve(!1)}},Me=()=>{typeof r=="function"&&r(),e()};return u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:[u.jsx("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl transform transition-all duration-200 ease-out scale-95 opacity-0 animate-[fadeInUp_0.2s_ease-out_forwards]",children:x==="success"&&n?u.jsxs(u.Fragment,{children:[N==="returning"?u.jsxs(u.Fragment,{children:[u.jsxs("h2",{className:"mb-2 text-xl font-semibold text-gray-900",children:["Hey"," ",u.jsx("span",{className:"font-medium text-gray-900",children:n.email}),", welcome back!"]}),u.jsx("p",{className:"mb-2 text-sm text-gray-700",children:"We're excited to have you in the Beta again."}),u.jsx("p",{className:"mb-4 text-sm text-gray-700",children:"Pick up where you left off, your projects are waiting."})]}):u.jsxs(u.Fragment,{children:[u.jsxs("h2",{className:"mb-2 text-xl font-semibold text-gray-900",children:["You made it,"," ",u.jsx("span",{className:"font-medium text-gray-900",children:n.email}),"!"]}),u.jsx("p",{className:"mb-2 text-sm text-gray-700",children:"InstaSpec Beta access: Unlocked."}),u.jsx("p",{className:"mb-2 text-sm text-gray-700",children:"Start creating projects, exploring features, and shaping how teams build specs."}),u.jsx("p",{className:"mb-4 text-sm text-gray-700",children:"Your voice matters, hit that feedback button anytime!"})]}),w&&u.jsx("p",{className:"mb-4 text-xs text-gray-500",children:w}),u.jsx("div",{className:"mt-4 flex justify-end",children:u.jsx("button",{type:"button",onClick:Me,className:"rounded-lg bg-blue-600 px-4 py-1.5 text-sm font-medium text-white hover:bg-blue-700",children:"Continue to InstaSpec"})})]}):u.jsxs(u.Fragment,{children:[u.jsx("h2",{className:"mb-1 text-xl font-semibold",children:"Sign in to the InstaSpec Beta"}),u.jsx("p",{className:"mb-4 text-sm text-gray-600",children:"You're early and that's awesome. Enter your email and your beta code to step inside and start exploring what's next."}),u.jsxs("form",{onSubmit:ye,className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Email"}),u.jsx("input",{type:"email",className:"w-full rounded-lg border px-3 py-2 text-sm text-gray-900 placeholder-gray-500 border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:s,onChange:Le=>a(Le.target.value),placeholder:"you@company.com",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Beta access code"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:d?"text":"password",className:"w-full rounded-lg border px-3 py-2 text-sm text-gray-900 placeholder-gray-500 border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 pr-20",value:o,onChange:Le=>l(Le.target.value),placeholder:"Enter the code you received",required:!0}),u.jsx("button",{type:"button",onClick:()=>p(Le=>!Le),className:"absolute inset-y-0 right-2 my-auto rounded-md px-2 text-xs font-medium text-gray-600 hover:bg-gray-100",children:d?"Hide":"Show"})]}),u.jsx("button",{type:"button",onClick:ce,className:"mt-1 text-xs text-blue-600 hover:underline",children:"Need a new code? Request another."})]}),c&&u.jsx("p",{className:"text-xs text-red-600",children:c}),L&&u.jsx("div",{className:"mt-2 rounded-lg border border-green-100 bg-green-50 p-3 text-xs text-green-700 whitespace-pre-line",children:L}),u.jsxs("div",{className:"mt-2 flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:e,className:"rounded-lg px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:f,className:`rounded-lg bg-blue-600 px-4 py-1.5 text-sm font-medium text-white hover:bg-blue-700 ${f?"opacity-60 cursor-not-allowed":""}`,children:f?"Checking...":"Beta Login"})]})]})]})}),W&&u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 px-4",children:u.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Request Early Access"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Share a few details and we'll queue your beta invite."})]}),u.jsx("button",{onClick:()=>b(!1),className:"text-xs uppercase tracking-wide text-gray-500 hover:text-gray-900",children:"Close"})]}),u.jsxs("form",{onSubmit:be,className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Email"}),u.jsx("input",{type:"email",value:T.email,onChange:Le=>A(I=>({...I,email:Le.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400",placeholder:"tester@example.com",required:!0})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Your name"}),u.jsx("input",{type:"text",value:T.name,onChange:Le=>A(I=>({...I,name:Le.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400",placeholder:"Full name"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Organization / Role"}),u.jsx("input",{type:"text",value:T.organization,onChange:Le=>A(I=>({...I,organization:Le.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400",placeholder:"Design Studio, Architect, etc."})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"What will you explore?"}),u.jsx("textarea",{value:T.reason,onChange:Le=>A(I=>({...I,reason:Le.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 h-24",placeholder:"Tell us why you need InstaSpec access."})]}),F&&u.jsx("p",{className:"text-xs text-red-600",children:F}),u.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[u.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 text-sm rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:le,className:`px-4 py-2 text-sm rounded-lg bg-indigo-600 text-white hover:bg-indigo-500 ${le?"opacity-60 cursor-not-allowed":""}`,children:le?"Submitting...":"Join Beta Waitlist"})]})]})]})})]})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wq=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ht=(t,e)=>{const r=Q.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,...c},h)=>Q.createElement("svg",{ref:h,...qq,width:i,height:i,stroke:n,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${Wq(t)}`,o].join(" "),...c},[...e.map(([d,p])=>Q.createElement(d,p)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=Ht("Accessibility",[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=Ht("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=Ht("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=Ht("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=Ht("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=Ht("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=Ht("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=Ht("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=Ht("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Ht("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=Ht("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=Ht("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=Ht("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=Ht("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=Ht("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=Ht("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=Ht("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=Ht("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=Ht("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=Ht("DoorClosed",[["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14",key:"36qu9e"}],["path",{d:"M2 20h20",key:"owomy5"}],["path",{d:"M14 12v.01",key:"xfcn54"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=Ht("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=Ht("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=Ht("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=Ht("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=Ht("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qq=Ht("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=Ht("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=Ht("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zq=Ht("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=Ht("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=Ht("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=Ht("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=Ht("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=Ht("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=Ht("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eW=Ht("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=Ht("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=Ht("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tW=Ht("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=Ht("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rW=Ht("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=Ht("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nW=Ht("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iW=Ht("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=Ht("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=Ht("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sW=Ht("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aW=Ht("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=Ht("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=Ht("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oW=Ht("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=Ht("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cW=Ht("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=Ht("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uW=Ht("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=Ht("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=Ht("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=Ht("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hW=Ht("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=Ht("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dW=Ht("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fW=Ht("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pW=Ht("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=Ht("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mW=Ht("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gW=Ht("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=Ht("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=Ht("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xW=Ht("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),yW=t=>{if(!t)return"Just now";const e=Date.now()-t,r=Math.floor(e/(1e3*60));if(r<1)return"Just now";if(r<60)return`${r}m ago`;const n=Math.floor(r/60);return n<24?`${n}h ago`:`${Math.floor(n/24)}d ago`},tv=10,o0={hours:"24",downloads:"5"},RR=({isOpen:t,onClose:e})=>{const[r,n]=Q.useState([]),[i,s]=Q.useState({totalLogins:0,recentLogins:[]}),[a,o]=Q.useState([]),[l,c]=Q.useState([]),[h,d]=Q.useState(null),[p,f]=Q.useState(""),[v,x]=Q.useState(!1),[_,w]=Q.useState(null),[S,N]=Q.useState("access"),[j,z]=Q.useState("expiring"),[W,b]=Q.useState(!1),[T,A]=Q.useState({}),[F,k]=Q.useState({}),[L,R]=Q.useState({}),[le,ve]=Q.useState({}),ge=Q.useRef(null);Q.useEffect(()=>{r.length&&k(Ee=>{const it={...Ee};return r.forEach(mt=>{it[mt.email]||(it[mt.email]={...o0})}),it})},[r]);const ye=Q.useMemo(()=>{const Ee=r.length,it=r.filter(mt=>mt.isAdmin).length;return{totalUsers:Ee,totalAdmins:it,totalLogins:i.totalLogins}},[r,i.totalLogins]),ce=Q.useMemo(()=>r.filter(Ee=>!!Ee.expiresAt&&(!Ee.expiresAt||Ee.expiresAt>Date.now())),[r]),be=Q.useMemo(()=>r.filter(Ee=>!!Ee.expiresAt&&Ee.expiresAt<=Date.now()),[r]),Me=Q.useMemo(()=>r.filter(Ee=>!Ee.expiresAt),[r]),Le=j==="noExpiry"?Me:j==="expired"?be:ce,I=Q.useCallback(()=>{ve(Zz())},[]);Q.useEffect(()=>{if(t)return w(null),f(""),x(!1),N("access"),z("expiring"),k({}),R({}),Pe(),Qe(),et(),I(),()=>{ge.current&&clearTimeout(ge.current)}},[t,I]);const B=(Ee,it="success")=>{const mt=Date.now();ge.current&&clearTimeout(ge.current),w({message:Ee,tone:it,key:mt}),ge.current=setTimeout(()=>{w(bt=>(bt==null?void 0:bt.key)===mt?null:bt)},3500)},U=Ee=>T[Ee]||{count:0,limit:tv},H=(Ee,it)=>{var mt;return((mt=F[Ee])==null?void 0:mt[it])??o0[it]},te=(Ee,it,mt)=>{k(bt=>({...bt,[Ee]:{...o0,...bt[Ee],[it]:mt}}))},fe=(Ee,it)=>{R(mt=>({...mt,[Ee]:it}))},Ae=async Ee=>{try{const it=await Promise.all(Ee.map(async mt=>{try{const bt=await GP(mt.email);return[mt.email,bt]}catch(bt){return console.error("Failed to load usage for",mt.email,bt),[mt.email,{count:0,limit:tv}]}}));A(Object.fromEntries(it))}catch(it){console.error("Failed to load usage map",it)}},Te=async()=>{try{const Ee=await rH();s(Ee)}catch(Ee){console.error("Failed to refresh login stats",Ee)}},Pe=async()=>{b(!0);try{const Ee=await Gz();Ee.sort((it,mt)=>it.email.localeCompare(mt.email)),n(Ee),await Ae(Ee),await Te()}catch(Ee){console.error("Failed to load beta users",Ee),B("Failed to load beta users.","error")}finally{b(!1)}},et=()=>{o(aH())},Qe=()=>{c(cH())},dt=Ee=>/\S+@\S+\.\S+/.test(Ee||""),wt=Ee=>{n(it=>[...it.filter(bt=>bt.email!==Ee.email),Ee].sort((bt,Rt)=>bt.email.localeCompare(Rt.email)))},ae=async Ee=>{Ee.preventDefault();const it=p.trim().toLowerCase();if(!dt(it)){B("Enter a valid email before adding.","error");return}if(r.some(bt=>bt.email===it)){B("This email already exists in Firestore.","error");return}try{const bt=W3(),Rt=await h1({email:it,code:bt,plan:v?"beta_admin":"beta_tester",isAdmin:v});wt(Rt),A(Ot=>({...Ot,[Rt.email]:{count:0,limit:tv}})),f(""),x(!1),B(`Added ${it}${v?" as admin":""}.`)}catch(bt){console.error("Failed to add beta user",bt),B("Unable to add user. Check console for details.","error")}},Ie=async Ee=>{try{const it=await h1({email:Ee.email,code:Ee.code,plan:Ee.isAdmin?"beta_tester":"beta_admin",isAdmin:!Ee.isAdmin,expiresAt:Ee.expiresAt});wt(it),B(`${it.email} is now ${it.isAdmin?"an admin":"a beta tester"}.`)}catch(it){console.error("Failed to toggle admin",it),B("Unable to update admin state.","error")}},ne=async Ee=>{var it;try{const mt=W3(),bt=await h1({email:Ee.email,code:mt,plan:Ee.plan,isAdmin:Ee.isAdmin,expiresAt:Ee.expiresAt});wt(bt);try{await((it=navigator.clipboard)==null?void 0:it.writeText(mt)),B("New code generated & copied.")}catch{B("New code generated. Copy it manually.","error")}}catch(mt){console.error("Failed to regenerate code",mt),B("Unable to regenerate code.","error")}},we=async Ee=>{if(window.confirm(`Remove ${Ee.email} from the beta list?`))try{await Yz(Ee.email),n(it=>it.filter(mt=>mt.email!==Ee.email)),A(it=>{const mt={...it};return delete mt[Ee.email],mt}),B(`${Ee.email} removed.`)}catch(it){console.error("Failed to delete user",it),B("Unable to delete user.","error")}},me=async Ee=>{const it=`expiry:${Ee.email}`;if(L[it])return;const mt=Number(H(Ee.email,"hours"));if(!Number.isFinite(mt)||mt<=0){B("Enter a positive number of hours.","error");return}fe(it,!0);try{const bt=await fH(Ee.email,mt);wt(bt),B(`Extended expiry for ${Ee.email} by ${mt}h.`)}catch(bt){console.error("Failed to extend expiry",bt),B("Unable to extend expiry.","error")}finally{fe(it,!1)}},Ke=async Ee=>{if(Ee.isAdmin)return;const it=`downloads:${Ee.email}`;if(L[it])return;const mt=Number(H(Ee.email,"downloads"));if(!Number.isFinite(mt)||mt<=0){B("Enter a positive download amount.","error");return}fe(it,!0);try{const bt=await pH(Ee.email,mt);A(Rt=>({...Rt,[Ee.email]:bt})),B(`Added ${mt} downloads to ${Ee.email}.`)}catch(bt){console.error("Failed to extend download limit",bt),B("Unable to extend download limit.","error")}finally{fe(it,!1)}},Je=Ee=>{hH(Ee),Qe(),B("Request archived.")};if(!t)return null;const ct=[{id:"access",label:"Access & Users"},{id:"feedback",label:"Feedback"}],Et=[{id:"expiring",label:"Expiring",description:"Active beta users whose expiry is in the future",count:ce.length},{id:"expired",label:"Expired",description:"Users whose access dates have passed",count:be.length},{id:"noExpiry",label:"No expiry",description:"Unlimited access users",count:Me.length}],Bt=Et.find(Ee=>Ee.id===j)||Et[0];return u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:[u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl mx-4 p-6 relative max-h-[95vh] overflow-y-auto",children:[u.jsx("button",{onClick:e,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:u.jsx(kl,{size:18})}),u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(jp,{className:"text-indigo-600",size:22}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Beta Access Admin Console"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Manage Firestore-stored beta users, admin privileges, personalized codes, and login activity."})]})]}),_&&u.jsxs("div",{className:`mb-4 flex items-center gap-2 rounded-lg border px-3 py-2 text-sm ${_.tone==="error"?"border-red-200 bg-red-50 text-red-700":"border-green-200 bg-green-50 text-green-700"}`,children:[_.tone==="error"?u.jsx(eo,{size:16}):u.jsx(Ca,{size:16}),u.jsx("span",{children:_.message})]}),u.jsx("div",{className:"flex gap-2 border-b border-gray-200 mb-4",children:ct.map(Ee=>u.jsx("button",{onClick:()=>N(Ee.id),className:`px-3 py-2 text-sm font-semibold rounded-t-lg ${S===Ee.id?"text-indigo-600 border-b-2 border-indigo-600 bg-white":"text-gray-500"}`,children:Ee.label},Ee.id))}),S==="access"&&u.jsxs(u.Fragment,{children:[u.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-5",children:[u.jsxs("div",{className:"rounded-xl border border-gray-200 p-4 bg-gray-50",children:[u.jsx("p",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Beta Users"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:ye.totalUsers})]}),u.jsxs("div",{className:"rounded-xl border border-gray-200 p-4 bg-gray-50",children:[u.jsx("p",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Admins"}),u.jsx("p",{className:"text-2xl font-bold text-indigo-600 mt-1",children:ye.totalAdmins})]}),u.jsxs("div",{className:"rounded-xl border border-gray-200 p-4 bg-gray-50",children:[u.jsx("p",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Recorded Logins"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:ye.totalLogins})]})]}),u.jsxs("section",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 bg-gray-50 flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Admin master code"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Read-only constant for admin emails."})]}),u.jsxs("button",{type:"button",onClick:async()=>{var Ee;try{await((Ee=navigator.clipboard)==null?void 0:Ee.writeText(fx)),B("Master code copied.")}catch{B("Unable to copy master code.","error")}},className:"px-3 py-1.5 text-xs border rounded-lg text-gray-700 hover:bg-gray-100 flex items-center gap-1",children:[u.jsx(TR,{size:12})," Copy"]})]}),u.jsx("div",{className:"rounded-lg border border-gray-200 bg-white px-3 py-2 font-mono text-xs tracking-[0.2em] text-gray-900",children:fx})]}),u.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 bg-gray-50 flex flex-col gap-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Default tester code"}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Legacy fallback from ",u.jsx("code",{children:"VITE_BETA_ACCESS_CODE"}),". Share only if needed."]})]}),u.jsx("div",{className:"rounded-lg border border-gray-200 bg-white px-3 py-2 font-mono text-xs tracking-[0.2em] text-gray-900",children:"INSTAspecbeta@2025"})]})]}),u.jsxs("section",{className:"mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Access Requests"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Submitted from the beta login modal."})]}),u.jsxs("button",{onClick:Qe,className:"px-3 py-1.5 text-xs rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-100 flex items-center gap-1",children:[u.jsx(H0,{size:12})," Refresh"]})]}),u.jsx("div",{className:"border border-gray-200 rounded-xl divide-y divide-gray-100 bg-white",children:l.length===0?u.jsxs("div",{className:"p-4 text-xs text-gray-500 flex items-center gap-2",children:[u.jsx(eo,{size:16})," No pending access requests."]}):l.map(Ee=>u.jsxs("div",{className:"p-4 flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-gray-900 break-all",children:Ee.email}),u.jsxs("p",{className:"text-xs text-gray-500",children:[(Ee.name||"Unnamed").trim()||"Unnamed"," "," ",Ee.organization||"No organization provided"]}),Ee.reason&&u.jsx("p",{className:"text-xs text-gray-700 mt-1 whitespace-pre-line",children:Ee.reason}),u.jsx("p",{className:"text-[11px] text-gray-400 mt-1",children:new Date(Ee.createdAt).toLocaleString()})]}),u.jsxs("button",{onClick:()=>Je(Ee.id),className:"self-start md:self-auto px-3 py-1.5 text-xs font-semibold rounded-lg border border-green-200 text-green-700 hover:bg-green-50 flex items-center gap-1",children:[u.jsx(Ca,{size:12})," Mark reviewed"]})]},Ee.id))})]}),u.jsxs("section",{className:"mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Manage Beta Users"}),u.jsx("span",{className:"text-xs text-gray-500",children:"Users load directly from Firestore."})]}),u.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:Et.map(Ee=>u.jsxs("button",{type:"button",onClick:()=>z(Ee.id),className:`px-3 py-1 text-xs font-semibold rounded-full border ${j===Ee.id?"bg-indigo-600 text-white border-indigo-600":"text-gray-600 border-gray-200 hover:border-gray-300"}`,children:[Ee.label," ",u.jsx("span",{className:"font-mono text-[11px]",children:Ee.count})]},Ee.id))}),u.jsx("p",{className:"text-[11px] text-gray-500 mb-4",children:Bt.description}),u.jsxs("form",{onSubmit:ae,className:"flex flex-col md:flex-row gap-3 items-start md:items-end mb-4 bg-gray-50 border border-gray-200 rounded-xl p-3",children:[u.jsxs("div",{className:"w-full",children:[u.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Email"}),u.jsx("input",{type:"email",value:p,onChange:Ee=>f(Ee.target.value),className:"w-full mt-1 rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-500 bg-white",placeholder:"beta-user@example.com",required:!0})]}),u.jsxs("label",{className:"flex items-center gap-2 text-xs font-semibold text-gray-600",children:[u.jsx("input",{type:"checkbox",checked:v,onChange:Ee=>x(Ee.target.checked),className:"rounded border-gray-300"}),"Make admin too"]}),u.jsxs("button",{type:"submit",className:"inline-flex items-center gap-1 rounded-lg bg-indigo-600 text-white text-sm px-4 py-2 hover:bg-indigo-500",disabled:W,children:[u.jsx(qb,{size:14})," Add beta user"]})]}),u.jsx("div",{className:"border border-gray-200 rounded-xl divide-y divide-gray-100",children:W?u.jsxs("div",{className:"p-4 text-sm text-gray-500 flex items-center gap-2",children:[u.jsx(H0,{size:16,className:"animate-spin"})," Loading users"]}):r.length===0?u.jsxs("div",{className:"p-4 text-sm text-gray-500 flex items-center gap-2",children:[u.jsx(eo,{size:16})," No beta users yet."]}):Le.length===0?u.jsxs("div",{className:"p-4 text-sm text-gray-500 flex items-center gap-2",children:[u.jsx(eo,{size:16})," No ",Bt.label.toLowerCase()," users found."]}):Le.map(Ee=>{const it=U(Ee.email),mt=!Ee.isAdmin&&it.count>=it.limit,bt=!Ee.isAdmin&&!mt&&it.count>=Math.max(0,it.limit-2),Rt=Ee.isAdmin?"text-gray-500":mt?"text-red-600 font-semibold":bt?"text-orange-600":"text-gray-500",Ot=`expiry:${Ee.email}`,Vt=`downloads:${Ee.email}`,Vr=typeof Ee.loginCount=="number"?Ee.loginCount:le[Ee.email]||0;return u.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center justify-between gap-3",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center",children:u.jsx(tW,{size:16})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-gray-900 break-all",children:Ee.email}),Ee.isAdmin&&u.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-indigo-600 font-semibold",children:[u.jsx(CA,{size:12})," Admin"]}),u.jsxs("div",{className:"text-xs text-gray-600 font-mono mt-1",children:["Code: ",u.jsx("span",{className:"text-gray-900",children:Ee.code||""})]}),u.jsxs("div",{className:"text-xs text-gray-500",children:["Expires: ",Ee.expiresAt?new Date(Ee.expiresAt).toLocaleString():"No expiry"]}),u.jsxs("div",{className:`text-xs mt-1 ${Rt}`,children:["Downloads:"," ",Ee.isAdmin?"Unlimited":`${it.count} / ${it.limit}`]}),u.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Logins: ",Vr]}),u.jsxs("div",{className:"mt-3 space-y-2",children:[u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-[11px] font-semibold text-gray-600 uppercase",children:"Extend expiry"}),u.jsx("input",{type:"number",min:"1",value:H(Ee.email,"hours"),onChange:mr=>te(Ee.email,"hours",mr.target.value),placeholder:o0.hours,className:"w-20 rounded border border-gray-300 px-2 py-1 text-xs text-gray-900 font-semibold"}),u.jsx("button",{type:"button",onClick:()=>me(Ee),disabled:L[Ot],className:"px-3 py-1 text-xs font-semibold rounded-lg border border-blue-200 text-blue-600 hover:bg-blue-50 disabled:opacity-60",children:L[Ot]?"Extending...":"+ Hours"})]}),!Ee.isAdmin&&u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-[11px] font-semibold text-gray-600 uppercase",children:"Extend downloads"}),u.jsx("input",{type:"number",min:"1",value:H(Ee.email,"downloads"),onChange:mr=>te(Ee.email,"downloads",mr.target.value),placeholder:o0.downloads,className:"w-20 rounded border border-gray-300 px-2 py-1 text-xs text-gray-900 font-semibold"}),u.jsx("button",{type:"button",onClick:()=>Ke(Ee),disabled:L[Vt],className:"px-3 py-1 text-xs font-semibold rounded-lg border border-green-200 text-green-700 hover:bg-green-50 disabled:opacity-60",children:L[Vt]?"Updating...":"+ Downloads"}),mt&&u.jsx("span",{className:"text-[11px] font-semibold text-red-600",children:"Limit reached"})]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[u.jsxs("button",{onClick:()=>ne(Ee),className:"px-3 py-1.5 text-xs font-semibold rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-100 flex items-center gap-1",children:[u.jsx(x5,{size:12})," Regenerate code"]}),u.jsxs("button",{onClick:()=>Ie(Ee),className:`px-3 py-1.5 text-xs font-semibold rounded-lg border flex items-center gap-1 ${Ee.isAdmin?"text-gray-600 border-gray-200 hover:bg-gray-100":"text-indigo-600 border-indigo-200 hover:bg-indigo-50"}`,children:[u.jsx(CA,{size:12})," ",Ee.isAdmin?"Remove admin":"Promote to admin"]}),u.jsxs("button",{onClick:()=>we(Ee),className:"px-3 py-1.5 text-xs font-semibold rounded-lg border border-red-200 text-red-600 hover:bg-red-50 flex items-center gap-1",children:[u.jsx(Dd,{size:12})," Remove"]})]})]},Ee.email)})})]}),u.jsxs("section",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Recent Logins"}),u.jsxs("span",{className:"text-xs text-gray-500",children:["Last ",i.recentLogins.length," sessions"]})]}),u.jsx("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{className:"bg-gray-50 text-left text-xs uppercase text-gray-500",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2",children:"Email"}),u.jsx("th",{className:"px-3 py-2",children:"Role"}),u.jsx("th",{className:"px-3 py-2",children:"Time"})]})}),u.jsx("tbody",{children:i.recentLogins.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"3",className:"px-3 py-4 text-center text-xs text-gray-500",children:"No logins tracked yet."})}):i.recentLogins.map((Ee,it)=>u.jsxs("tr",{className:"border-t border-gray-100",children:[u.jsx("td",{className:"px-3 py-2 font-medium text-gray-800 break-all",children:Ee.email}),u.jsx("td",{className:"px-3 py-2",children:u.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-semibold ${Ee.isAdmin?"text-indigo-600":"text-gray-600"}`,children:[u.jsx(jp,{size:12}),Ee.isAdmin?"Admin":"Beta"]})}),u.jsx("td",{className:"px-3 py-2 text-xs text-gray-500",children:yW(Ee.timestamp)})]},`${Ee.email}-${Ee.timestamp}-${it}`))})]})})]})]}),S==="feedback"&&u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Beta Feedback"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Submissions from the feedback modal."})]}),u.jsxs("button",{onClick:et,className:"px-3 py-1.5 text-xs rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-100 flex items-center gap-1",children:[u.jsx(H0,{size:12})," Refresh"]})]}),u.jsx("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:a.length===0?u.jsxs("div",{className:"p-4 text-sm text-gray-500 flex items-center gap-2",children:[u.jsx(eo,{size:16})," No feedback submitted yet."]}):u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{className:"bg-gray-50 text-left text-xs uppercase text-gray-500",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2",children:"Date"}),u.jsx("th",{className:"px-3 py-2",children:"Email"}),u.jsx("th",{className:"px-3 py-2",children:"Context"}),u.jsx("th",{className:"px-3 py-2",children:"Message"}),u.jsx("th",{className:"px-3 py-2",children:"Image"}),u.jsx("th",{className:"px-3 py-2",children:"Details"})]})}),u.jsx("tbody",{children:a.map(Ee=>u.jsxs("tr",{className:"border-t border-gray-100",children:[u.jsx("td",{className:"px-3 py-2 text-xs text-gray-500",children:new Date(Ee.createdAt).toLocaleString()}),u.jsx("td",{className:"px-3 py-2 break-all",children:Ee.email}),u.jsx("td",{className:"px-3 py-2",children:Ee.context}),u.jsx("td",{className:"px-3 py-2",children:u.jsx("div",{className:"text-xs text-gray-700 max-w-[220px] truncate",children:Ee.message||""})}),u.jsx("td",{className:"px-3 py-2 text-xs text-gray-500",children:Ee.imageDataUrl?"Attached":""}),u.jsx("td",{className:"px-3 py-2",children:u.jsx("button",{onClick:()=>d(Ee),className:"text-xs text-indigo-600 underline",children:"View"})})]},Ee.id))})]})})]}),u.jsx("p",{className:"mt-4 text-[11px] text-gray-500",children:"Beta user data lives in Firestore. Use the Firebase console to perform full resets or to audit history."})]}),h&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:u.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-2xl max-h-[90vh] overflow-auto space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Feedback Details"}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Submitted ",new Date(h.createdAt).toLocaleString()]})]}),u.jsx("button",{onClick:()=>d(null),className:"text-xs uppercase tracking-wide text-gray-500 hover:text-gray-800",children:"Close"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Email"}),u.jsx("div",{className:"text-gray-900",children:h.email})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Context"}),u.jsx("div",{className:"text-gray-900",children:h.context})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase text-gray-500 font-semibold mb-1",children:"Message"}),u.jsx("div",{className:"text-sm text-gray-800 whitespace-pre-wrap bg-gray-50 border border-gray-200 rounded-lg p-3",children:h.message||""})]}),h.imageDataUrl&&u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase text-gray-500 font-semibold mb-1",children:"Screenshot"}),u.jsx("img",{src:h.imageDataUrl,alt:"Feedback attachment",className:"rounded-lg max-h-[60vh] object-contain border border-gray-200"})]})]})})]})},rv=["Landing","Step 1  Project Setup","Step 2  Door Schedule","Step 3  Hardware Sets","Step 4  Validation & Exports","Other"],vW=({isOpen:t,onClose:e})=>{const{user:r}=ku(),[n,i]=Q.useState(rv[0]),[s,a]=Q.useState(""),[o,l]=Q.useState(null),[c,h]=Q.useState(!1),[d,p]=Q.useState(""),[f,v]=Q.useState("");if(Q.useEffect(()=>{t||(i(rv[0]),a(""),l(null),h(!1),p(""),v(""))},[t]),!t||!r)return null;const x=w=>{var j;const S=(j=w.target.files)==null?void 0:j[0];if(!S){l(null);return}const N=new FileReader;N.onloadend=()=>{l(N.result)},N.readAsDataURL(S)},_=w=>{if(w.preventDefault(),!s.trim()){p("Please enter your feedback.");return}h(!0),oH({email:r.email,context:n,message:s.trim(),imageDataUrl:o}),h(!1),v("Thank you! Your feedback just made InstaSpec smarter. Were on it!")};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6",children:u.jsxs("div",{className:"w-full max-w-lg rounded-xl sm:rounded-2xl bg-white p-4 sm:p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Share Feedback"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-sm uppercase tracking-wide",children:"Close"})]}),f?u.jsxs("div",{className:"space-y-4 py-8 text-center",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-green-100 text-green-600 mx-auto",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),u.jsx("p",{className:"text-lg font-semibold text-gray-900",children:f}),u.jsx("p",{className:"text-sm text-gray-500",children:"Got another idea? Keep them coming anytime."}),u.jsx("button",{onClick:e,className:"mt-4 px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700",children:"Close"})]}):u.jsxs("form",{className:"space-y-4",onSubmit:_,children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email"}),u.jsx("input",{type:"email",value:r.email,readOnly:!0,className:"w-full rounded-lg border border-gray-200 bg-gray-100 px-3 py-2 text-sm text-gray-700"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Context"}),u.jsx("select",{className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm",value:n,onChange:w=>i(w.target.value),children:rv.map(w=>u.jsx("option",{value:w,children:w},w))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Feedback"}),u.jsx("textarea",{className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm h-28",placeholder:"Tell us what's working, what isn't, or what you'd love to see.",value:s,onChange:w=>{a(w.target.value),p("")},required:!0}),d&&u.jsx("p",{className:"text-xs text-red-600 mt-1",children:d})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Screenshot (optional)"}),u.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"text-sm"}),o&&u.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Image attached."," ",u.jsx("button",{type:"button",onClick:()=>l(null),className:"text-indigo-600 underline",children:"Remove"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:c,className:`px-4 py-2 text-sm rounded-lg bg-indigo-600 text-white hover:bg-indigo-500 ${c?"opacity-60 cursor-not-allowed":""}`,children:c?"Sending...":"Submit Feedback"})]})]})]})})},wW="feedback";async function _W({email:t,context:e,message:r,imageDataUrl:n=null}){const i=fi(t);if(!i)throw new Error("Feedback must include an email.");if(!r||!r.trim())throw new Error("Feedback must include a message.");await Wr();const s={email:i,context:e||"Other",message:r.trim(),imageDataUrl:n||null,createdAt:Date.now(),createdAtServer:yi()};return{id:(await Yo(vi(lr,wW),s)).id,...s}}const nv=["Step 1 - Project Setup","Step 2 - Door Schedule","Step 3 - Hardware Sets","Step 4 - Validation & Exports","Dashboard / Landing","Other"],bW=({isOpen:t,onClose:e})=>{const{user:r}=ku(),[n,i]=Q.useState(nv[0]),[s,a]=Q.useState(""),[o,l]=Q.useState(null),[c,h]=Q.useState(!1),[d,p]=Q.useState(""),[f,v]=Q.useState("");if(Q.useEffect(()=>{t||(i(nv[0]),a(""),l(null),h(!1),p(""),v(""))},[t]),!t||!r)return null;const x=w=>{var j;const S=(j=w.target.files)==null?void 0:j[0];if(!S){l(null);return}const N=new FileReader;N.onload=()=>{l(N.result)},N.onerror=()=>{p("Unable to read the selected file. Please try a different image.")},N.readAsDataURL(S)},_=async w=>{if(w.preventDefault(),p(""),v(""),!s.trim()){p("Please share a quick description of the issue or suggestion.");return}h(!0);try{await _W({email:r.email,context:n,message:s.trim(),imageDataUrl:o}),v(`Thanks for the feedback!
You're feedback helps InstaSpec to serve better.`)}catch(S){console.error("Feedback submission failed",S),p("Could not send feedback right now. Please try again in a moment.")}finally{h(!1)}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6",children:u.jsxs("div",{className:"w-full max-w-lg rounded-xl sm:rounded-2xl bg-white p-4 sm:p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Report an Error"}),u.jsx("button",{onClick:e,className:"text-sm uppercase tracking-wide text-gray-500 hover:text-gray-800",children:"Close"})]}),f?u.jsxs("div",{className:"space-y-4 py-10 text-center",children:[u.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-green-100 text-green-600",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),u.jsx("p",{className:"text-lg font-semibold text-gray-900 whitespace-pre-line",children:f}),u.jsx("p",{className:"text-sm text-gray-500",children:"Need to flag another issue? You can share more feedback anytime."}),u.jsx("button",{onClick:e,className:"mt-2 px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-500",children:"Close"})]}):u.jsxs("form",{onSubmit:_,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Email"}),u.jsx("input",{type:"email",value:r.email,readOnly:!0,className:"mt-1 w-full rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-700"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Where did this occur?"}),u.jsx("select",{value:n,onChange:w=>i(w.target.value),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm",children:nv.map(w=>u.jsx("option",{value:w,children:w},w))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Feedback"}),u.jsx("textarea",{value:s,onChange:w=>a(w.target.value),placeholder:"Tell us what happened or what you would improve.",className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm h-28",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Screenshot (optional)"}),u.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"text-sm"}),o&&u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Image attached. You can replace it by choosing another file."})]}),d&&u.jsx("p",{className:"text-xs text-red-600",children:d}),u.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[u.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:c,className:`px-4 py-2 text-sm rounded-lg bg-indigo-600 text-white hover:bg-indigo-500 ${c?"opacity-60 cursor-not-allowed":""}`,children:c?"Sending...":"Submit"})]})]})]})})};async function LA(t){if(!fi(t))return[];const r=await Wr(),n=yd(vi(lr,"projects"),FU("owner","==",r.uid));return(await Tp(n)).docs.map(s=>({id:s.id,...s.data()}))}async function l0(t,e){const r=fi(t);if(!r)throw new Error("Missing owner email");const n=await Wr(),i=Date.now(),s={...e,owner:n.uid,userEmail:r,updatedAt:i};if(e.id){const o=Yr(lr,"projects",e.id);return await Af(o,{...s,createdAt:e.createdAt||i},{merge:!0}),{...e,updatedAt:i}}const a=await Yo(vi(lr,"projects"),{...s,createdAt:i});return{...e,id:a.id,createdAt:i,updatedAt:i}}async function jA(t){if(!t)return;await Wr();const e=Yr(lr,"projects",t);await kc(e)}const yu={ANSI_BHMA:{id:"ANSI_BHMA",name:"ANSI/BHMA A156.28",version:"2023",region:"North America",pinConfig:{pins:6,depths:7,macs:4},maxDiffers:117649,hierarchyLevels:[{id:"GGM",name:"Great Grand Master",symbol:"A",order:0},{id:"GMK",name:"Grand Master",symbol:"AA",order:1},{id:"MK",name:"Master Key",symbol:"AAA",order:2},{id:"SMK",name:"Sub-Master",symbol:"AAAA",order:3},{id:"CK",name:"Change Key",symbol:"AAAAA",order:4}],securityGrades:["Grade 1","Grade 2","Grade 3"],recommendations:{"Commercial Office":{depth:3,levels:["GMK","MK","CK"]},"Hospital / Healthcare":{depth:4,levels:["GMK","MK","SMK","CK"]},"Education / School":{depth:3,levels:["GMK","MK","CK"]},"Airport / Transport":{depth:4,levels:["GMK","MK","SMK","CK"]},"Hospitality / Hotel":{depth:4,levels:["GMK","MK","SMK","CK"]},Residential:{depth:2,levels:["MK","CK"]}}},EN:{id:"EN",name:"EN 1303",version:"2015",region:"Europe",pinConfig:{pins:5,depths:6,macs:3},maxDiffers:7776,hierarchyLevels:[{id:"GM",name:"General Master",symbol:"GM",order:0},{id:"MK",name:"Master Key",symbol:"M",order:1},{id:"SK",name:"Sub-Key",symbol:"S",order:2},{id:"UK",name:"User Key",symbol:"U",order:3}],securityGrades:["Class 1","Class 2","Class 3","Class 4","Class 5","Class 6"],recommendations:{"Commercial Office":{depth:2,levels:["MK","UK"]},"Hospital / Healthcare":{depth:3,levels:["GM","MK","UK"]},"Education / School":{depth:2,levels:["MK","UK"]},"Airport / Transport":{depth:3,levels:["GM","MK","UK"]},"Hospitality / Hotel":{depth:3,levels:["GM","MK","UK"]},Residential:{depth:2,levels:["MK","UK"]}}}},FA=t=>yu[t]||yu.ANSI_BHMA,SW=(t,e)=>{const r=yu[t]||yu.ANSI_BHMA,n=r.recommendations[e];return n?n.levels.map(i=>r.hierarchyLevels.find(s=>s.id===i)):r.recommendations["Commercial Office"].levels.map(i=>r.hierarchyLevels.find(s=>s.id===i))},EW=(t,e)=>{const r=[],n=[];return e===0?t!=="GMK"&&r.push({type:"invalid_gmk_symbol",message:'EN 1303 requires General Master Key to use symbol "GMK"',expected:"GMK",actual:t}):e===1?/^MK-\d+$/.test(t)||r.push({type:"invalid_mk_format",message:'EN 1303 Master Key must follow format "MK-X" (e.g., MK-1, MK-2)',expected:"MK-[number]",actual:t}):e===2?/^SK-\d+$/.test(t)||r.push({type:"invalid_sk_format",message:'EN 1303 Sub-Key must follow format "SK-X" (e.g., SK-1, SK-2)',expected:"SK-[number]",actual:t}):/^CK-\d{3,}$/.test(t)||r.push({type:"invalid_ck_format",message:'EN 1303 Change Key must follow format "CK-XXX" (e.g., CK-101, CK-201)',expected:"CK-[3+ digits]",actual:t}),{errors:r,warnings:n,isValid:r.length===0}},AW=(t,e)=>{const r=[],n=[],i=["I","O","Q","X"];for(const s of i)t.includes(s)&&r.push({type:"restricted_letter",message:`ANSI/BHMA prohibits using letters ${i.join(", ")} in key symbols`,letter:s,symbol:t});if(e===0)(t.length!==1||!/^[A-Z]$/.test(t))&&r.push({type:"invalid_top_level_format",message:"ANSI/BHMA top-level master must be single letter (e.g., A)",expected:"Single letter A-Z",actual:t});else if(e===1){if((t.length!==2||!/^[A-Z]{2}$/.test(t))&&r.push({type:"invalid_level1_format",message:"ANSI/BHMA Level 1 master must be two letters (e.g., AA, AB)",expected:"Two letters",actual:t}),t.length===2){const s=t[0],a=t[1],o=s.charCodeAt(0),l=a.charCodeAt(0);Math.abs(l-o)>10&&n.push({type:"unusual_pairing",message:`Unusual letter pairing "${t}". Standard practice uses consecutive letters (AA, AB, AC)`,symbol:t})}}else e===2?(t.length!==3||!/^[A-Z]{3}$/.test(t))&&r.push({type:"invalid_level2_format",message:"ANSI/BHMA Level 2 keys must be three letters (e.g., AAA, AAB)",expected:"Three letters",actual:t}):/^[A-Z]{2,3}\d+$/.test(t)||r.push({type:"invalid_change_key_format",message:"ANSI/BHMA Change Key must be letters followed by numbers (e.g., AA1, AAA1)",expected:"[Letters][Numbers]",actual:t});return{errors:r,warnings:n,isValid:r.length===0}},NW=(t,e)=>{const r=[],n=[];if(e==="EN"){const i=t.filter(o=>o.keySymbol.startsWith("MK-")).sort((o,l)=>{const c=parseInt(o.keySymbol.split("-")[1]),h=parseInt(l.keySymbol.split("-")[1]);return c-h});for(let o=0;o<i.length;o++){const l=o+1;parseInt(i[o].keySymbol.split("-")[1])!==l&&n.push({type:"sequence_gap",message:`EN 1303 recommends sequential numbering. Expected MK-${l}, found ${i[o].keySymbol}`,expected:`MK-${l}`,actual:i[o].keySymbol})}const s=t.filter(o=>o.keySymbol.startsWith("CK-")),a={};s.forEach(o=>{const l=o.keySymbol.substring(3,4);a[l]||(a[l]=[]),a[l].push(o)}),Object.entries(a).forEach(([o,l])=>{const c=l.sort((d,p)=>{const f=parseInt(d.keySymbol.split("-")[1]),v=parseInt(p.keySymbol.split("-")[1]);return f-v}),h=parseInt(o)*100+1;for(let d=0;d<c.length;d++){const p=h+d;parseInt(c[d].keySymbol.split("-")[1])!==p&&n.push({type:"change_key_gap",message:`Change key numbering gap detected. Expected CK-${String(p).padStart(3,"0")}, found ${c[d].keySymbol}`,master:`MK-${o}`})}})}else if(e==="ANSI_BHMA"){const s=t.filter(a=>a.hierarchyLevel===1&&/^[A-Z]{2}$/.test(a.keySymbol)).sort((a,o)=>a.keySymbol.localeCompare(o.keySymbol));for(let a=1;a<s.length;a++){const o=s[a-1].keySymbol[1],l=s[a].keySymbol[1],c=String.fromCharCode(o.charCodeAt(0)+1);l!==c&&n.push({type:"letter_sequence_gap",message:`ANSI/BHMA recommends consecutive letters. After ${s[a-1].keySymbol}, expected ${s[a-1].keySymbol[0]}${c}, found ${s[a].keySymbol}`,expected:`${s[a-1].keySymbol[0]}${c}`,actual:s[a].keySymbol})}}return{errors:r,warnings:n,isValid:r.length===0}},TW=(t,e,r)=>{const n=[],i=[];e==="EN"?(t>4&&i.push({type:"excessive_depth",message:"EN 1303 typically uses 2-4 hierarchy levels. More than 4 levels may complicate system management",current:t,recommended:"2-4 levels"}),t<2&&n.push({type:"insufficient_depth",message:"EN 1303 requires at least 2 hierarchy levels (Master and User keys)",current:t,minimum:2})):e==="ANSI_BHMA"&&(t>5&&n.push({type:"exceeds_maximum_depth",message:"ANSI/BHMA practical limit is 5 hierarchy levels",current:t,maximum:5}),t<2&&n.push({type:"insufficient_depth",message:"ANSI/BHMA requires at least 2 hierarchy levels",current:t,minimum:2}));const a={"Commercial Office":{min:2,max:3,optimal:3},"Hospital / Healthcare":{min:3,max:4,optimal:4},"Education / School":{min:2,max:3,optimal:3},"Airport / Transport":{min:3,max:4,optimal:4},"Hospitality / Hotel":{min:3,max:4,optimal:4},Residential:{min:2,max:2,optimal:2}}[r];return a&&(t<a.min&&i.push({type:"below_facility_minimum",message:`${r} facilities typically require at least ${a.min} levels`,facility:r,current:t,recommended:a.optimal}),t>a.max&&i.push({type:"above_facility_maximum",message:`${r} facilities rarely need more than ${a.max} levels`,facility:r,current:t,recommended:a.optimal})),{errors:n,warnings:i,isValid:n.length===0}},kW=(t,e)=>{const r=[],n=[];return e!=="ANSI_BHMA"?{errors:r,warnings:n,isValid:!0}:(t.forEach(i=>{if(i.parentHierarchyId){const s=t.find(a=>a.hierarchyId===i.parentHierarchyId);s&&(i.keySymbol.startsWith(s.keySymbol)||r.push({type:"invalid_parent_child_pairing",message:"ANSI/BHMA requires child keys to start with parent symbol",parent:s.keySymbol,child:i.keySymbol,expected:`${s.keySymbol}[letter/number]`}))}}),{errors:r,warnings:n,isValid:r.length===0})},CW=(t,e,r,n)=>{const i=[],s=[],a=[...t.map(c=>({keySymbol:c.keySymbol,hierarchyLevel:c.order,levelType:c.levelType})),...e.map(c=>({keySymbol:c.keySymbol,hierarchyLevel:3,levelType:"CK"}))];a.forEach(c=>{let h;r==="EN"?h=EW(c.keySymbol,c.hierarchyLevel):h=AW(c.keySymbol,c.hierarchyLevel),i.push(...h.errors),s.push(...h.warnings)});const o=NW(a,r);i.push(...o.errors),s.push(...o.warnings);const l=TW(t.length,r,n);if(i.push(...l.errors),s.push(...l.warnings),r==="ANSI_BHMA"){const c=kW(t,r);i.push(...c.errors),s.push(...c.warnings)}return{errors:i,warnings:s,isValid:i.length===0}},LR=Q.createContext(null),fl=()=>{const t=Q.useContext(LR);if(!t)throw new Error("useMasterKey must be used within MasterKeyProvider");return t},iv=({children:t,projectId:e,projectDoors:r=[]})=>{const[n,i]=Q.useState(null),[s,a]=Q.useState([]),[o,l]=Q.useState([]),[c,h]=Q.useState([]),[d,p]=Q.useState([]),[f,v]=Q.useState([]),[x,_]=Q.useState([]),[w,S]=Q.useState(!1),[N,j]=Q.useState(null),[z,W]=Q.useState(!1),[b,T]=Q.useState("zone_based"),[A,F]=Q.useState("ANSI_BHMA"),k=Q.useCallback(Ie=>Ie?Uh(Yr(lr,"mk_projects",Ie),we=>{if(we.exists()){const me={id:we.id,...we.data()};i(me),console.log(" MK Project updated:",{differsUsed:me.differsUsed,totalPhysicalKeys:me.totalPhysicalKeys,totalCylinders:me.totalCylinders})}else console.log(" MK Project document does not exist:",Ie),i(null)},we=>{console.error("Error listening to MK project:",we),j(we.message)}):void 0,[]);Q.useEffect(()=>{if(!e)return;S(!0);let Ie=null;const ne=Uh(Yr(lr,"projects",e),we=>{if(we.exists()){const me=we.data();W(!!me.mkSystemEnabled),T(me.mkApproach||"zone_based"),F(me.mkStandard||"ANSI_BHMA"),me.mkSystemEnabled&&me.mkProjectId?(Ie&&Ie(),Ie=k(me.mkProjectId)):(Ie&&(Ie(),Ie=null),i(null))}S(!1)},we=>{console.error("Error listening to project:",we),j(we.message),S(!1)});return()=>{ne(),Ie&&Ie()}},[e,k]);const L=Q.useCallback(async Ie=>{try{if(S(!0),j(null),await Wr(),console.log("toggleMKSystem called with:",Ie),Ie){const ne=Yr(vi(lr,"mk_projects")),we=FA(A),me=we.pinConfig,Ke=we.maxDiffers;await Af(ne,{projectId:e,keyingApproach:b||"zone_based",standard:A,standardVersion:we.version,hierarchyLevels:4,maxDiffersAvailable:Ke,differsUsed:0,manufacturer:"Schlage",keyway:"C Keyway",pinConfiguration:me,securityLevel:"standard",constructionKeyingEnabled:!1,constructionMasterKey:null,statistics:{totalDoors:0,keyedDoors:0,unkeyedDoors:0,totalKeys:0,zonesDefined:0},mkSystemStatus:"in_progress",createdAt:yi(),updatedAt:yi(),completedAt:null}),await Ga(Yr(lr,"projects",e),{mkSystemEnabled:!0,mkSystemStatus:"not_started",mkApproach:b,mkStandard:A,mkProjectId:ne.id}),console.log(`MK project created: ${ne.id}`)}else{const we=(await om(Yr(lr,"projects",e))).data();we!=null&&we.mkProjectId?(await Ga(Yr(lr,"projects",e),{mkSystemEnabled:!1,mkSystemStatus:null,mkApproach:null,mkProjectId:null}),console.log(`MK project disabled for project ${e}`)):await Ga(Yr(lr,"projects",e),{mkSystemEnabled:!1,mkSystemStatus:null,mkApproach:null})}W(Ie),console.log("MK system toggled successfully")}catch(ne){throw console.error("Error toggling MK system:",ne),j(ne.message),ne}finally{S(!1)}},[e,b,A]),R=Q.useCallback(async Ie=>{try{j(null),await Wr(),console.log("updateMKApproach called with:",Ie),await Ga(Yr(lr,"projects",e),{mkApproach:Ie}),n!=null&&n.id&&await Ga(Yr(lr,"mk_projects",n.id),{keyingApproach:Ie,updatedAt:yi()}),T(Ie),console.log("MK approach updated successfully")}catch(ne){throw console.error("Error updating MK approach:",ne),j(ne.message),ne}},[e,n]),le=Q.useCallback(async Ie=>{try{if(j(null),await Wr(),console.log("updateStandard called with:",Ie),await Ga(Yr(lr,"projects",e),{mkStandard:Ie}),n!=null&&n.id){const ne=FA(Ie);await Ga(Yr(lr,"mk_projects",n.id),{standard:Ie,standardVersion:ne.version,pinConfiguration:ne.pinConfig,maxDiffersAvailable:ne.maxDiffers,updatedAt:yi()})}F(Ie),console.log("Standard updated successfully")}catch(ne){throw console.error("Error updating standard:",ne),j(ne.message),ne}},[e,n]),ve=Q.useCallback(async Ie=>{try{if(j(null),await Wr(),!(n!=null&&n.id))throw new Error("No MK project found");console.log("updateMKProject called with:",Ie),await Ga(Yr(lr,"mk_projects",n.id),{...Ie,updatedAt:yi()}),console.log("MK Project updated successfully")}catch(ne){throw console.error("Error updating MK project:",ne),j(ne.message),ne}},[n]);Q.useEffect(()=>{if(!(n!=null&&n.id))return;const Ie=yd(vi(lr,"mk_projects",n.id,"hierarchies")),ne=Uh(Ie,we=>{const me=we.docs.map(Je=>({hierarchyId:Je.id,...Je.data()}));a(me);const Ke=ge(me);l(Ke)});return()=>ne()},[n==null?void 0:n.id]),Q.useEffect(()=>{if(!(n!=null&&n.id))return;const Ie=yd(vi(lr,"mk_projects",n.id,"zones")),ne=Uh(Ie,we=>{const me=we.docs.map(Ke=>({zoneId:Ke.id,...Ke.data()}));h(me),console.log(" Zones updated:",me.length,"zones")});return()=>ne()},[n==null?void 0:n.id]),Q.useEffect(()=>{if(!(n!=null&&n.id))return;const Ie=yd(vi(lr,"mk_projects",n.id,"assignments")),ne=Uh(Ie,we=>{const me=we.docs.map(Ke=>({assignmentId:Ke.id,...Ke.data()}));p(me),console.log(" Assignments updated:",me.length,"assignments")});return()=>ne()},[n==null?void 0:n.id]),Q.useEffect(()=>{if(!(n!=null&&n.id)){v([]);return}const Ie=yd(vi(lr,"mk_projects",n.id,"ka_groups")),ne=Uh(Ie,we=>{const me=we.docs.map(Ke=>({id:Ke.id,...Ke.data()}));v(me),console.log(" KA Groups updated:",me.length,"groups")});return()=>ne()},[n==null?void 0:n.id]);const ge=Ie=>{const ne=new Map,we=[];return Ie.forEach(me=>{ne.set(me.hierarchyId,{...me,children:[]})}),Ie.forEach(me=>{const Ke=ne.get(me.hierarchyId);if(me.parentHierarchyId){const Je=ne.get(me.parentHierarchyId);Je&&Je.children.push(Ke)}else we.push(Ke)}),we},ye=Q.useCallback(async Ie=>{if(n!=null&&n.id){await Wr();try{const ne=vi(lr,"mk_projects",n.id,"hierarchies");await Yo(ne,{...Ie,createdAt:yi(),updatedAt:yi()}),console.log("Hierarchy level added successfully")}catch(ne){throw console.error("Failed to add hierarchy level:",ne),ne}}},[n]),ce=Q.useCallback(async(Ie,ne)=>{if(n!=null&&n.id){await Wr();try{const we=Yr(lr,"mk_projects",n.id,"hierarchies",Ie);await Ga(we,{...ne,updatedAt:yi()}),console.log("Hierarchy level updated successfully")}catch(we){throw console.error("Failed to update hierarchy level:",we),we}}},[n]),be=Q.useCallback(async Ie=>{if(n!=null&&n.id){await Wr();try{const ne=s.some(Ke=>Ke.parentHierarchyId===Ie),we=d.some(Ke=>Ke.hierarchyId===Ie);if(ne||we)throw new Error("Cannot delete level with children or door assignments");const me=Yr(lr,"mk_projects",n.id,"hierarchies",Ie);await kc(me),console.log("Hierarchy level deleted successfully")}catch(ne){throw console.error("Failed to delete hierarchy level:",ne),ne}}},[n,s,d]),Me=Q.useCallback(async Ie=>{if(n!=null&&n.id){await Wr();try{const ne=SW(A,Ie),we=await Tp(vi(lr,"mk_projects",n.id,"hierarchies")),me=Hy(lr);we.docs.forEach(Je=>{me.delete(Je.ref)}),await me.commit();let Ke=null;for(let Je=0;Je<ne.length;Je++){const ct=ne[Je],Et=vi(lr,"mk_projects",n.id,"hierarchies");Ke=(await Yo(Et,{levelName:ct.name,levelType:ct.id,keySymbol:ct.symbol,order:Je,parentHierarchyId:Ke,description:`${ct.name} for ${Ie}`,createdAt:yi(),updatedAt:yi()})).id}console.log("Hierarchy template applied successfully")}catch(ne){throw console.error("Failed to apply hierarchy template:",ne),ne}}},[n,A]),Le=Q.useCallback(async Ie=>{if(n!=null&&n.id){await Wr();try{const ne=vi(lr,"mk_projects",n.id,"zones"),we=await Yo(ne,{...Ie,createdAt:yi(),updatedAt:yi()});return console.log("Zone created successfully"),we.id}catch(ne){throw console.error("Failed to create zone:",ne),ne}}},[n]),I=Q.useCallback(async(Ie,ne)=>{if(n!=null&&n.id){await Wr();try{const we={};ne==="zone_based"?Ie.forEach(Je=>{we[Je.zone]||(we[Je.zone]={name:Je.zone,doors:[]}),we[Je.zone].doors.push(Je.id)}):ne==="floor_based"?Ie.forEach(Je=>{const ct=`Floor ${Je.level}`;we[ct]||(we[ct]={name:ct,doors:[]}),we[ct].doors.push(Je.id)}):ne==="functional"&&Ie.forEach(Je=>{we[Je.use]||(we[Je.use]={name:Je.use,doors:[]}),we[Je.use].doors.push(Je.id)});const me=["#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899"];let Ke=0;for(const[Je,ct]of Object.entries(we))await Le({zoneName:ct.name,color:me[Ke%me.length],doorCount:ct.doors.length}),Ke++;console.log("Zones auto-generated successfully")}catch(we){throw console.error("Failed to auto-generate zones:",we),we}}},[n,Le]),B=Q.useCallback(async Ie=>{if(n!=null&&n.id){await Wr();try{const ne=Yr(lr,"mk_projects",n.id,"zones",Ie);await kc(ne),console.log("Zone deleted successfully")}catch(ne){throw console.error("Failed to delete zone:",ne),ne}}},[n]),U=Q.useCallback(async()=>{if(n!=null&&n.id){await Wr();try{const Ie=new Set;s.forEach(ct=>{Ie.add(ct.keySymbol)}),d.forEach(ct=>{Ie.add(ct.keySymbol)});const ne=Ie.size;let we=0,me=0;s.forEach(ct=>{we+=ct.keyQuantity||2});const Ke=new Set;d.forEach(ct=>{const Et=r.find(Ee=>Ee.id===ct.doorId),Bt=(Et==null?void 0:Et.qty)||1;if(ct.keyType==="KA"&&ct.kaGroupId){if(!Ke.has(ct.kaGroupId)){const Ee=f.find(it=>it.id===ct.kaGroupId);Ee&&(we+=Ee.keyQuantity||0,Ke.add(ct.kaGroupId))}}else ct.keyType,we+=ct.keyQuantity||2;me+=Bt});const Je=Yr(lr,"mk_projects",n.id);await Ga(Je,{differsUsed:ne,totalPhysicalKeys:we,totalCylinders:me,updatedAt:yi()}),console.log(`Differs updated: ${ne} unique keys, ${we} physical keys, ${me} cylinders`)}catch(Ie){console.error("Failed to update differs count:",Ie)}}},[n,s,d,f,r]),H=Q.useCallback(async(Ie,ne,we,me={})=>{if(!(n!=null&&n.id))return;await Wr();const{keyType:Ke="KD",keyQuantity:Je=2,kaGroupId:ct=null,kaGroupName:Et=null}=me;try{const Bt=vi(lr,"mk_projects",n.id,"assignments");await Yo(Bt,{doorId:Ie,hierarchyId:ne,keySymbol:we,keyType:Ke,keyQuantity:Je,kaGroupId:ct,kaGroupName:Et,assignedAt:yi()}),await U(),console.log("Door assigned to key successfully:",Ke,we)}catch(Bt){throw console.error("Failed to assign door:",Bt),Bt}},[n,U]),te=Q.useCallback(async(Ie,ne,we)=>{if(n!=null&&n.id){await Wr();try{const me=Hy(lr),Ke=vi(lr,"mk_projects",n.id,"assignments");Ie.forEach(Je=>{const ct=Yr(Ke);me.set(ct,{doorId:Je,hierarchyId:ne,keySymbol:we,assignedAt:yi()})}),await me.commit(),console.log("Bulk door assignment completed successfully")}catch(me){throw console.error("Failed to bulk assign doors:",me),me}}},[n]),fe=Q.useCallback(async Ie=>{if(n!=null&&n.id){await Wr();try{const ne=vi(lr,"mk_projects",n.id,"assignments"),me=(await Tp(ne)).docs.find(Ke=>Ke.data().doorId===Ie);me&&(await kc(Yr(lr,"mk_projects",n.id,"assignments",me.id)),await U(),console.log("Door unassigned successfully"))}catch(ne){throw console.error("Failed to unassign door:",ne),ne}}},[n,U]),Ae=Q.useCallback((Ie,ne)=>A==="ANSI_BHMA"?`${Ie}${(ne+1)*10}`:`CK-${Ie.split("-")[1]||"1"}${(ne+1)*100}`,[A]),Te=Q.useCallback(async(Ie,ne,we,me,Ke=5)=>{if(n!=null&&n.id){if(ne.length<2)throw new Error("KA group must have at least 2 doors");await Wr();try{const ct=f.filter(it=>it.masterKeyId===we).length,Et=Ae(me,ct),Bt=vi(lr,"mk_projects",n.id,"ka_groups"),Ee=await Yo(Bt,{name:Ie,changeKeySymbol:Et,masterKeyId:we,masterKeySymbol:me,doorIds:ne,keyQuantity:Ke,createdAt:yi(),updatedAt:yi()});for(const it of ne){const mt=d.find(bt=>bt.doorId===it);mt&&await kc(Yr(lr,"mk_projects",n.id,"assignments",mt.assignmentId)),await H(it,we,Et,{keyType:"KA",keyQuantity:0,kaGroupId:Ee.id,kaGroupName:Ie})}return console.log("KA Group created:",Ie,Et),Ee.id}catch(Je){throw console.error("Failed to create KA group:",Je),Je}}},[n,f,d,Ae,H,A]),Pe=Q.useCallback(async(Ie,ne)=>{if(n!=null&&n.id){await Wr();try{const we=Yr(lr,"mk_projects",n.id,"ka_groups",Ie);if(await Ga(we,{...ne,updatedAt:yi()}),ne.name){const me=f.find(Ke=>Ke.id===Ie);if(me){const Ke=Hy(lr);me.doorIds.forEach(Je=>{const ct=d.find(Et=>Et.doorId===Je);if(ct){const Et=Yr(lr,"mk_projects",n.id,"assignments",ct.assignmentId);Ke.update(Et,{kaGroupName:ne.name})}}),await Ke.commit()}}console.log("KA Group updated")}catch(we){throw console.error("Failed to update KA group:",we),we}}},[n,f,d]),et=Q.useCallback(async Ie=>{if(n!=null&&n.id){await Wr();try{const ne=f.find(we=>we.id===Ie);if(!ne)return;await kc(Yr(lr,"mk_projects",n.id,"ka_groups",Ie));for(const we of ne.doorIds){const me=d.find(Ke=>Ke.doorId===we);me&&await kc(Yr(lr,"mk_projects",n.id,"assignments",me.assignmentId))}console.log("KA Group deleted")}catch(ne){throw console.error("Failed to delete KA group:",ne),ne}}},[n,f,d]),Qe=Q.useCallback(async(Ie,ne)=>{if(n!=null&&n.id){if(ne<1)throw new Error("Key quantity must be at least 1");await Wr();try{const we=d.find(Ke=>Ke.doorId===Ie);if(!we)throw new Error("Door not assigned");const me=Yr(lr,"mk_projects",n.id,"assignments",we.assignmentId);await Ga(me,{keyQuantity:ne}),console.log("Key quantity updated:",Ie,ne)}catch(we){throw console.error("Failed to update key quantity:",we),we}}},[n,d]),dt=Q.useCallback(async(Ie,ne)=>{if(n!=null&&n.id){await Wr();try{const we=[],me=[],Ke=Ie.filter(Ee=>!d.some(it=>it.doorId===Ee.id));Ke.length>0&&we.push({type:"unassigned_doors",severity:"error",message:`${Ke.length} doors not assigned to any key`,count:Ke.length}),n.differsUsed>n.maxDiffersAvailable&&we.push({type:"exceeds_differs",severity:"error",message:"Design exceeds available differs",details:`${n.differsUsed} > ${n.maxDiffersAvailable}`}),s.length===0&&we.push({type:"no_hierarchy",severity:"error",message:"No hierarchy levels defined"});const Je=CW(s,d,A,ne),ct=Je.errors.filter(Ee=>Ee.type==="exceeds_maximum_depth"||Ee.type==="insufficient_depth"||Ee.type==="invalid_parent_child_pairing");we.push(...ct.map(Ee=>({...Ee,severity:"error"})));const Et=Je.warnings.filter(Ee=>Ee.type==="excessive_depth"||Ee.type==="below_facility_minimum"||Ee.type==="above_facility_maximum");me.push(...Et.map(Ee=>({...Ee,severity:"warning"})));const Bt=vi(lr,"mk_projects",n.id,"validations");return await Yo(Bt,{errors:we,warnings:me,validatedAt:yi(),isValid:we.length===0}),console.log("Validation completed:",{errors:we.length,warnings:me.length}),{errors:we,warnings:me,isValid:we.length===0}}catch(we){throw console.error("Validation failed:",we),we}}},[n,d,s,A]),wt=Q.useCallback(async(Ie,ne,we)=>{if(n!=null&&n.id){await Wr();try{const me={project:n,hierarchies:s,zones:c,assignments:d,doors:we,standard:yu[A],generatedAt:new Date().toISOString()},Ke=vi(lr,"mk_projects",n.id,"exports");return await Yo(Ke,{format:Ie,options:ne,generatedAt:yi()}),console.log("Export generated successfully"),me}catch(me){throw console.error("Export generation failed:",me),me}}},[n,s,c,d,A]),ae={projectId:e,mkSystemEnabled:z,mkApproach:b,standard:A,toggleMKSystem:L,updateMKApproach:R,updateStandard:le,updateMKProject:ve,mkProject:n,hierarchies:s,hierarchyTree:o,zones:c,assignments:d,kaGroups:f,validationIssues:x,loading:w,error:N,addHierarchyLevel:ye,updateHierarchyLevel:ce,deleteHierarchyLevel:be,applyHierarchyTemplate:Me,createZone:Le,autoGenerateZones:I,deleteZone:B,assignDoorToKey:H,bulkAssignDoors:te,unassignDoor:fe,createKAGroup:Te,updateKAGroup:Pe,deleteKAGroup:et,updateKeyQuantity:Qe,generateKASymbol:Ae,validateDesign:dt,generateExport:wt,statistics:(n==null?void 0:n.statistics)||{totalDoors:0,keyedDoors:0,unkeyedDoors:0,totalKeys:0,zonesDefined:0},isComplete:(n==null?void 0:n.mkSystemStatus)==="completed",differsRemaining:((n==null?void 0:n.maxDiffersAvailable)||0)-((n==null?void 0:n.differsUsed)||0),differsUsagePercentage:n!=null&&n.maxDiffersAvailable?(n.differsUsed/n.maxDiffersAvailable*100).toFixed(1):0};return u.jsx(LR.Provider,{value:ae,children:t})},IW=({facilityType:t})=>{const[e,r]=Q.useState(!1),{mkSystemEnabled:n,mkApproach:i,toggleMKSystem:s,updateMKApproach:a,loading:o}=fl(),l={"Commercial Office":"Standard 4-level hierarchy recommended","Hospital / Healthcare":"Departmental isolation with 4-5 levels","Education / School":"Complex 5-level hierarchy with wing separation","Airport / Transport":"Zone-based security with 3-4 levels","Hospitality / Hotel":"Floor-based hierarchy with 4 levels",Residential:"Simple 3-level hierarchy"},c=async()=>{try{await s(!n)}catch(d){console.error("Failed to toggle MK system:",d)}},h=async d=>{try{await a(d)}catch(p){console.error("Failed to update approach:",p)}};return u.jsxs("div",{children:[u.jsxs("div",{className:"mb-6 text-center",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Would you like to design a Master Key System?"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Design a professional master keying system for doors in this project with hierarchy levels, security zones, and key symbols."})]}),u.jsx("div",{className:"flex flex-col gap-1 mb-4",children:u.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"Master Key System (Optional)"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Enable to start designing your master keying system."})]}),u.jsxs("div",{className:"flex items-center gap-3 self-start",children:[u.jsx("span",{className:"text-[11px] font-semibold text-gray-500 uppercase tracking-wide whitespace-nowrap",children:n?"Master key ON":"Master key OFF"}),u.jsx("button",{type:"button",role:"switch","aria-checked":n,onClick:c,disabled:o,className:`relative inline-flex h-5 w-10 shrink-0 items-center rounded-full transition-colors ${n?"bg-indigo-600":"bg-gray-300"} ${o?"opacity-50 cursor-not-allowed":""}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition ${n?"translate-x-[22px]":"translate-x-1"}`})})]})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx("div",{className:`col-span-full text-xs font-bold uppercase tracking-wide rounded px-3 py-2 border ${n?"text-indigo-700 bg-indigo-50 border-indigo-100":"text-gray-500 bg-gray-50 border-gray-200"}`,children:n?`FACILITY: ${t.toUpperCase()}`:"MASTER KEY SYSTEM"}),n?u.jsxs("div",{className:"col-span-full space-y-3",children:[t&&u.jsxs("p",{className:"text-xs text-indigo-700 font-medium",children:[" ",l[t]||"Standard 4-level hierarchy recommended"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"Quick Setup Options:"}),u.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[u.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"mkApproach",value:"zone_based",checked:i==="zone_based",onChange:d=>h(d.target.value),className:"mt-0.5 text-indigo-600 focus:ring-indigo-500"}),u.jsx("span",{children:"Use building zones (automatic from doors)"})]}),u.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"mkApproach",value:"custom_hierarchy",checked:i==="custom_hierarchy",onChange:d=>h(d.target.value),className:"mt-0.5 text-indigo-600 focus:ring-indigo-500"}),u.jsx("span",{children:"Custom hierarchy design (step-by-step wizard)"})]}),u.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"mkApproach",value:"imported",checked:i==="imported",onChange:d=>h(d.target.value),className:"mt-0.5 text-indigo-600 focus:ring-indigo-500"}),u.jsx("span",{children:"Import existing keying schedule"})]})]})]}),u.jsxs("div",{className:"border-t border-gray-200 pt-3 mt-3",children:[u.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"What you'll be able to do:"}),u.jsxs("ul",{className:"space-y-1 text-xs text-gray-600",children:[u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-indigo-600 mt-0.5",children:""}),u.jsx("span",{children:"Define access hierarchy and security zones"})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-indigo-600 mt-0.5",children:""}),u.jsx("span",{children:"Generate professional keying schedules"})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-indigo-600 mt-0.5",children:""}),u.jsx("span",{children:"Export key symbols and bitting lists"})]})]})]})]}):u.jsxs("div",{className:"col-span-full text-sm text-gray-500 border border-dashed border-gray-300 rounded-lg px-3 py-4 bg-gray-50",children:["Master Key System is currently turned off. Flip the toggle above if you want to design a professional keying system for your doors with hierarchy levels, security zones, and key symbols.",u.jsxs("button",{onClick:()=>r(!e),className:"text-xs text-indigo-600 hover:text-indigo-700 mt-3 flex items-center gap-1",children:["Learn more about Master Key Systems",u.jsx(z0,{className:`w-3 h-3 transition-transform ${e?"rotate-180":""}`})]}),e&&u.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-600 space-y-2",children:[u.jsx("p",{className:"font-semibold",children:"What is a Master Key System?"}),u.jsx("p",{children:'A master key system allows different keys to open different sets of locks, while "master" keys can open multiple locks in the hierarchy.'}),u.jsx("p",{children:"For example, a floor manager's key opens all rooms on their floor, while a building master key opens all floors."}),u.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[u.jsx("p",{className:"font-semibold mb-2",children:"Common Use Cases:"}),u.jsxs("ul",{className:"space-y-1 text-[11px]",children:[u.jsxs("li",{children:[u.jsx("span",{className:"font-semibold",children:"Commercial Offices:"})," Floor-based access with department suites"]}),u.jsxs("li",{children:[u.jsx("span",{className:"font-semibold",children:"Healthcare:"})," Department isolation with staff hierarchies"]}),u.jsxs("li",{children:[u.jsx("span",{className:"font-semibold",children:"Education:"})," Building and wing-based access control"]}),u.jsxs("li",{children:[u.jsx("span",{className:"font-semibold",children:"Hotels:"})," Guest rooms with floor master keys"]})]})]})]})]})]})]})},PW=({onNext:t,projectName:e="Untitled Project"})=>{var c;const{mkProject:r,mkApproach:n,standard:i,updateMKApproach:s,updateStandard:a}=fl(),o=[{id:"zone_based",title:"Zone-Based Keying",description:"Organize keys by functional zones (Admin, Classrooms, Labs)",icon:p5,recommended:["Education / School","Office Building","Healthcare"],features:["Easy to understand","Simple administration","Best for smaller buildings"]},{id:"floor_based",title:"Floor-Based Keying",description:"Organize keys by building floors (Floor 1, Floor 2, etc.)",icon:ev,recommended:["Office Building","Apartment / Residential","Hotel / Lodging"],features:["Clear hierarchy","Vertical organization","Best for multi-story buildings"]},{id:"functional",title:"Functional Keying",description:"Organize keys by department or function (HR, IT, Maintenance)",icon:Ml,recommended:["Office Building","Healthcare","Industrial / Warehouse"],features:["Role-based access","Flexible management","Best for complex organizations"]}],l=async h=>{await s(h)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:u.jsx(Ml,{className:"w-8 h-8 text-indigo-600"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome to Master Key System Design"}),u.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"This wizard will guide you through creating a complete master key system for your project. You'll define key levels, organize doors, and generate professional keying schedules."})]}),u.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-lg p-6 border border-indigo-100",children:[u.jsx("h3",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider mb-3",children:"Project Summary"}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs text-indigo-600 font-semibold uppercase tracking-wider mb-1",children:"Project Name"}),u.jsx("div",{className:"text-sm font-bold text-indigo-900",children:e})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs text-indigo-600 font-semibold uppercase tracking-wider mb-1",children:"Keying Approach"}),u.jsx("div",{className:"text-sm font-bold text-indigo-900 capitalize",children:((c=r==null?void 0:r.keyingApproach)==null?void 0:c.replace("_"," "))||"Not Set"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs text-indigo-600 font-semibold uppercase tracking-wider mb-1",children:"System Capacity"}),u.jsx("div",{className:"text-sm font-bold text-indigo-900",children:"Professional"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs text-indigo-600 font-semibold uppercase tracking-wider mb-1",children:"Status"}),u.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-600 text-white text-xs font-semibold rounded-full",children:(r==null?void 0:r.mkSystemStatus)||"Not Started"})]})]})]}),u.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6",children:[u.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-2 flex items-center gap-2",children:[u.jsx(ev,{className:"w-6 h-6 text-indigo-600"}),"Select Industry Standard"]}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose the standard that applies to your region and requirements. This determines pin configuration, key hierarchy levels, and compliance rules."}),u.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Object.values(yu).map(h=>{const d=i===h.id;return u.jsxs("button",{onClick:()=>a(h.id),className:`p-4 border-2 rounded-lg text-left transition-all ${d?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300"}`,children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsx("div",{className:"font-bold text-gray-900",children:h.name}),d&&u.jsx(Ca,{className:"text-indigo-600 flex-shrink-0",size:20})]}),u.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[h.region,"  Version ",h.version]}),u.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[h.pinConfig.pins,"-pin system, ",h.pinConfig.depths," depths, MACS ",h.pinConfig.macs]}),u.jsx("div",{className:"text-xs font-semibold text-indigo-600",children:"Professional grade master key system"})]},h.id)})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Choose Your Keying Approach"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select the organizational strategy that best fits your building and security needs. You can change this later if needed."}),u.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:o.map(h=>{const d=h.icon,p=n===h.id;return u.jsxs("button",{onClick:()=>l(h.id),className:`text-left p-5 rounded-xl border-2 transition-all ${p?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-200 bg-white hover:border-indigo-300 hover:shadow-sm"}`,children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${p?"bg-indigo-600":"bg-gray-100"}`,children:u.jsx(d,{className:p?"text-white":"text-gray-600",size:24})}),p&&u.jsx(Ca,{className:"text-indigo-600",size:24})]}),u.jsx("h4",{className:`text-base font-bold mb-2 ${p?"text-indigo-900":"text-gray-900"}`,children:h.title}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:h.description}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Best For:"}),u.jsx("div",{className:"flex flex-wrap gap-1",children:h.recommended.map(f=>u.jsx("span",{className:"text-[10px] px-2 py-1 bg-gray-100 text-gray-600 rounded-full font-medium",children:f},f))}),u.jsx("div",{className:"space-y-1 mt-3",children:h.features.map((f,v)=>u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[u.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),f]},v))})]})]},h.id)})})]}),u.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-6 border-2 border-indigo-200",children:[u.jsx("h3",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider mb-2",children:"Your Selected Workflow"}),n==="zone_based"&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(p5,{className:"w-5 h-5 text-indigo-600"}),u.jsx("span",{className:"font-bold text-indigo-900",children:"Zone-Based Keying"})]}),u.jsxs("p",{className:"text-sm text-indigo-800 mb-4",children:["Zones will be ",u.jsx("strong",{children:"automatically generated"})," from your door data. You'll skip the Zone Definition step and go straight to assigning doors."]}),u.jsx("div",{className:"space-y-2",children:[{step:1,title:"Hierarchy Planning",desc:"Plan your key hierarchy structure"},{step:2,title:"Hierarchy Setup",desc:"Define master key levels"},{step:3,title:"Door Assignment",desc:"Assign doors (zones auto-created)"},{step:4,title:"Validation",desc:"Review and validate design"},{step:5,title:"Export",desc:"Generate keying schedules"}].map(h=>u.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[u.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-indigo-600 text-white font-bold flex items-center justify-center",children:h.step}),u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold text-indigo-900",children:h.title}),u.jsxs("span",{className:"text-indigo-700",children:[" - ",h.desc]})]})]},h.step))})]}),n==="custom_hierarchy"&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(ev,{className:"w-5 h-5 text-indigo-600"}),u.jsx("span",{className:"font-bold text-indigo-900",children:"Custom Hierarchy Design"})]}),u.jsxs("p",{className:"text-sm text-indigo-800 mb-4",children:["You'll go through the ",u.jsx("strong",{children:"complete wizard"})," with full control over hierarchy levels, zone creation, and door assignments."]}),u.jsx("div",{className:"space-y-2",children:[{step:1,title:"Hierarchy Planning",desc:"Plan your key hierarchy structure"},{step:2,title:"Hierarchy Setup",desc:"Define master key levels"},{step:3,title:"Zone Definition",desc:"Create custom security zones"},{step:4,title:"Door Assignment",desc:"Assign doors to keys and zones"},{step:5,title:"Validation",desc:"Review and validate design"},{step:6,title:"Export",desc:"Generate keying schedules"}].map(h=>u.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[u.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-indigo-600 text-white font-bold flex items-center justify-center",children:h.step}),u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold text-indigo-900",children:h.title}),u.jsxs("span",{className:"text-indigo-700",children:[" - ",h.desc]})]})]},h.step))})]}),n==="imported"&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(Ml,{className:"w-5 h-5 text-indigo-600"}),u.jsx("span",{className:"font-bold text-indigo-900",children:"Import Existing Schedule"})]}),u.jsxs("p",{className:"text-sm text-indigo-800 mb-4",children:["You'll ",u.jsx("strong",{children:"skip design steps"})," and import an existing keying schedule. Then validate and export as needed."]}),u.jsx("div",{className:"space-y-2",children:[{step:1,title:"Validation",desc:"Validate imported keying schedule"},{step:2,title:"Export",desc:"Generate updated schedules"}].map(h=>u.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[u.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-indigo-600 text-white font-bold flex items-center justify-center",children:h.step}),u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold text-indigo-900",children:h.title}),u.jsxs("span",{className:"text-indigo-700",children:[" - ",h.desc]})]})]},h.step))})]}),!n&&u.jsx("p",{className:"text-sm text-gray-600",children:"Please select a keying approach above to see your workflow."})]})]})},sv=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n})=>{const{mkProject:i,standard:s,updateMKProject:a}=fl(),[o,l]=Q.useState((i==null?void 0:i.hierarchyLevels)||null),[c,h]=Q.useState(!1),d=yu[s],p=s==="ANSI_BHMA",f=r.length,v=z=>{if(f===0)return{total:0,breakdown:[]};switch(z){case 1:return{total:1,breakdown:[{label:"Single Key",count:1}]};case 2:const W=Math.max(2,Math.ceil(f/10));return{total:W+1,breakdown:[{label:"Master Key",count:1},{label:"Change Keys",count:W}]};case 3:const b=Math.max(3,Math.ceil(f/8)),T=Math.max(2,Math.ceil(b/3));return{total:1+T+b,breakdown:[{label:"Grand Master Key",count:1},{label:"Master Keys",count:T},{label:"Change Keys",count:b}]};case 4:const A=Math.max(4,Math.ceil(f/6)),F=Math.max(3,Math.ceil(A/4)),k=Math.max(2,Math.ceil(F/2));return{total:1+k+F+A,breakdown:[{label:"Great Grand Master",count:1},{label:"Grand Master Keys",count:k},{label:"Master Keys",count:F},{label:"Change Keys",count:A}]};default:return{total:0,breakdown:[]}}},x=z=>{switch(z){case 1:return`
  
     SKD / KD     Single Key Opens All Doors
                  (Keyed Alike or Keyed Different)
  
        
        
    All Doors`;case 2:return`
       
         A    Master Key (Opens All)
       
          
    
              
    
  AA1 AA2 AA3  Change Keys (Zone/Area Specific)
    
              
  Zone1 Zone2 Zone3`;case 3:return`
         
           A    Grand Master Key (Opens All)
         
            
      
                 
        
    AA        AB    Master Keys (Building/Floor)
        
                 
        
                
  
 AA1AA2 AB1AB2  Change Keys (Rooms/Doors)
  `;case 4:return`
           
             A    Great Grand Master (Opens All)
           
              
         
                  
         
       AA      AB    Grand Master Keys (Campus/Building)
         
                  
         
        
   AAA  AAB  ... ...  Master Keys (Floors/Wings)
    
            
    
  ... ...
 AAA1AAA2           Change Keys (Individual Rooms)
 `;default:return""}},_=z=>{switch(z){case 1:return`
  
     SKD / KD     Single Key Opens All Doors
                  (Keyed Alike or Keyed Different)
  
        
        
    All Doors`;case 2:return`
       
         MK    Master Key (Opens All)
       
          
    
              
  
  CK-1CK-2CK-3  User Keys (Zone/Area Specific)
  
              
  Zone1 Zone2 Zone3`;case 3:return`
         
          GMK    General Master Key (Opens All)
         
            
      
                 
      
    MK-1     MK-2   Master Keys (Building/Floor)
      
                 
        
                
 
 CK-1CK-2CK-3CK-4  User Keys (Rooms/Doors)
 `;case 4:return`
           
            GGMK   Great General Master (Opens All)
           
              
         
                  
       
      GMK-1  GMK-2   General Master Keys (Campus/Building)
       
                  
         
       
   MK-1 MK-2  ... ...  Master Keys (Floors/Wings)
   
            
    
  ... ...
 CK-1CK-2             User Keys (Individual Rooms)
 `;default:return""}},w=z=>({1:["Small residential","Storage units","Single-tenant facilities"],2:["Small offices","Retail stores","Apartment buildings","Small schools"],3:["Commercial offices","Hospitals","Universities","Hotels","Large schools"],4:["Multi-building campuses","Airport terminals","Hospital systems","Corporate headquarters"]})[z]||[],S=async z=>{l(z),h(!0);try{await a({hierarchyLevels:z})}catch(W){console.error("Failed to save hierarchy level:",W),n&&await n("Error",`Failed to save selection: ${W.message}`)}finally{h(!1)}},N=async()=>{await n(p?"ANSI/BHMA Key Symbols":"EN 1303 Key Symbols",p?`ANSI/BHMA Nomenclature:

 A = Great Grand Master Key (GGMK)
 AA = Grand Master Key (GMK)
 AAA = Master Key (MK)
 AAAA = Sub-Master Key (SMK)
 AAAAA = Change Key (CK)

Pattern: Each level adds one letter "A"

Example System:
  A  AA  AAA  AAA1

Keys are numbered sequentially:
  AA1, AA2, AA3...
  AAA1, AAA2, AAA3...`:`EN 1303 Nomenclature:

 GGMK = Great General Master Key
 GMK = General Master Key
 MK = Master Key
 SK = Sub-Key
 UK / CK = User Key / Change Key

Pattern: Descriptive abbreviations

Example System:
  GMK  MK-1  CK-101

Keys use zone/building codes:
  MK-1, MK-2, MK-3...
  CK-101, CK-102, CK-103...`)},j=[{level:1,title:"Single Key (SKD/KD)",subtitle:"All doors keyed alike or different",recommended:!1,icon:$b},{level:2,title:"2-Level System",subtitle:p?"Master  Change Keys":"Master  User Keys",recommended:!1,icon:p5},{level:3,title:"3-Level System",subtitle:p?"Grand Master  Master  Change":"General Master  Master  User",recommended:!0,icon:cW},{level:4,title:"4-Level System",subtitle:p?"Great GM  GM  Master  Change":"Great GM  GM  Master  User",recommended:!1,icon:iW}];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:u.jsx(Lp,{className:"w-8 h-8 text-indigo-600"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Hierarchy Planning"}),u.jsxs("p",{className:"text-gray-600 max-w-2xl mx-auto",children:["Choose the hierarchy depth for your master key system based on ",d.name,"."]})]}),u.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-4",children:u.jsxs("div",{className:"flex items-start justify-between gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(L2,{className:"w-5 h-5 text-indigo-600"}),u.jsxs("h3",{className:"font-bold text-indigo-900",children:["Current Standard: ",d.name]})]}),u.jsxs("p",{className:"text-sm text-indigo-700 mb-2",children:[p?"North American":"European"," standard  ",d.pinConfig.pins," pins, ",d.pinConfig.depths," depths"]}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs("button",{onClick:N,className:"text-xs text-indigo-600 hover:text-indigo-800 underline flex items-center gap-1",children:[u.jsx(Zq,{size:14}),"View key naming conventions"]})})]}),f>0&&u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:f}),u.jsx("div",{className:"text-xs text-indigo-700",children:"Total Doors"})]})]})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Select Hierarchy Level"}),j.map(z=>{const W=z.icon,b=v(z.level),T=o===z.level,A=w(z.level);return u.jsxs("button",{onClick:()=>S(z.level),disabled:c,className:`w-full text-left transition-all ${T?"bg-indigo-50 border-2 border-indigo-600 shadow-lg scale-[1.02]":"bg-white border-2 border-gray-200 hover:border-indigo-300 hover:shadow-md"} rounded-xl p-6 relative`,children:[z.recommended&&u.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:u.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-600 text-white text-xs font-bold px-4 py-1 rounded-full shadow-lg flex items-center gap-1",children:[u.jsx("span",{children:""})," RECOMMENDED"]})}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[u.jsx("div",{className:`flex-shrink-0 w-14 h-14 rounded-lg flex items-center justify-center ${T?"bg-indigo-100":"bg-gray-100"}`,children:u.jsx(W,{className:`w-7 h-7 ${T?"text-indigo-600":"text-gray-600"}`})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:`text-lg font-bold mb-1 ${T?"text-indigo-900":"text-gray-900"}`,children:z.title}),u.jsx("p",{className:`text-sm ${T?"text-indigo-700":"text-gray-600"}`,children:z.subtitle})]}),T&&u.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center",children:u.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),u.jsx("div",{className:`rounded-lg p-4 mb-4 ${T?"bg-white border border-indigo-200":"bg-gray-50 border border-gray-200"}`,children:u.jsx("pre",{className:`text-xs font-mono leading-relaxed overflow-x-auto ${T?"text-indigo-900":"text-gray-700"}`,children:p?x(z.level):_(z.level)})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h5",{className:`text-sm font-bold mb-2 ${T?"text-indigo-900":"text-gray-900"}`,children:"Typical Use Cases:"}),u.jsx("ul",{className:"space-y-1",children:A.map((F,k)=>u.jsxs("li",{className:`text-sm flex items-start gap-2 ${T?"text-indigo-700":"text-gray-600"}`,children:[u.jsx("span",{className:T?"text-indigo-500":"text-gray-400",children:""}),u.jsx("span",{children:F})]},k))})]}),f>0&&u.jsxs("div",{className:`rounded-lg p-4 ${T?"bg-white border border-indigo-200":"bg-gray-50 border border-gray-200"}`,children:[u.jsxs("h5",{className:`text-sm font-bold mb-3 ${T?"text-indigo-900":"text-gray-900"}`,children:["Estimated Key Count for ",f," doors:"]}),u.jsxs("div",{className:"space-y-2",children:[b.breakdown.map((F,k)=>u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:`text-xs ${T?"text-indigo-700":"text-gray-600"}`,children:F.label}),u.jsx("span",{className:`text-sm font-bold ${T?"text-indigo-900":"text-gray-900"}`,children:F.count})]},k)),u.jsx("div",{className:`pt-2 mt-2 border-t ${T?"border-indigo-200":"border-gray-200"}`,children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:`text-sm font-bold ${T?"text-indigo-900":"text-gray-900"}`,children:"Total Keys:"}),u.jsx("span",{className:`text-xl font-bold ${T?"text-indigo-600":"text-gray-900"}`,children:b.total})]})})]})]})]})]})]},z.level)})]}),o&&u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:u.jsxs("p",{className:"text-sm text-blue-800",children:[u.jsx("strong",{children:"Next Step:"})," You'll define the specific hierarchy levels and key symbols based on your ",o,"-level system selection."]})})]})},$0=(t,e,r,n="")=>{if(t==="ANSI_BHMA"){if(e===1)return"A";if(e===2)return"A"+String.fromCharCode(65+r);if(e===3)return n?n+String.fromCharCode(65+r):"AA"+String.fromCharCode(65+r);if(e===4)return n?`${n}${r+1}`:`AAA${r+1}`}else{if(e===1)return"GMK";if(e===2)return`MK-${r+1}`;if(e===3)return`SK-${r+1}`;if(e===4)return`CK-${r*100+1}`}return`KEY-${e}-${r}`},Md=(t,e,r,n,i=null)=>{const s=t==="ANSI_BHMA";if(e===1)return s?"Grand Master Key":"General Master Key";if(e===2){if(r==="zone_based"&&i)return`${i} Master`;if(r==="floor_based")return`Floor ${n+1} Master`;if(r==="functional"){const a=["Administration","Operations","Facilities","Security","Services","Staff"];return`${a[n%a.length]} Master`}else return`Master Key ${n+1}`}return e===3?i?`${i} Sub-Master`:s?"Sub-Master Key":"Sub-Key":e===4?s?"Change Key":"User Key":`Level ${e} Key`},jR=(t,e)=>{if(!t||t.length===0)return 3;let r=0;if(e==="zone_based")r=new Set(t.map(i=>i.zone).filter(Boolean)).size;else if(e==="floor_based")r=new Set(t.map(i=>i.level).filter(Boolean)).size;else if(e==="functional"){const n=new Set(t.map(i=>i.use).filter(Boolean));r=Math.min(n.size,6)}else r=Math.ceil(t.length/30);return Math.max(2,Math.min(r,10))},FR=(t,e)=>!t||t.length===0?[]:e==="zone_based"?[...new Set(t.map(n=>n.zone).filter(Boolean))].sort():e==="floor_based"?[...new Set(t.map(n=>n.level).filter(Boolean))].sort():e==="functional"?[...new Set(t.map(n=>n.use).filter(Boolean))].slice(0,6).sort():[],RW=(t,e,r)=>!t||t.length===0?0:e==="zone_based"?t.filter(n=>n.zone===r).length:e==="floor_based"?t.filter(n=>n.level===r).length:e==="functional"?t.filter(n=>n.use===r).length:Math.ceil(t.length/4),LW=(t,e,r,n,i)=>{const s={standard:t,hierarchyLevels:e,approach:r,totalDoors:(n==null?void 0:n.length)||0,levels:[],estimatedTotalKeys:0},a=jR(n,r),o=FR(n,r),l={level:1,name:Md(t,1,r,0),symbol:$0(t,1,0),description:`Opens all ${s.totalDoors} doors`,count:1,keys:[{symbol:$0(t,1,0),name:Md(t,1,r,0)}]};if(s.levels.push(l),s.estimatedTotalKeys+=1,e>=2){const c=[];for(let d=0;d<a;d++){const p=o[d]||null,f=p?RW(n,r,p):0;c.push({symbol:$0(t,2,d),name:Md(t,2,r,d,p),doorCount:f})}const h={level:2,name:"Master Keys",description:`${a} master keys for ${r.replace("_"," ")} organization`,count:a,keys:c};s.levels.push(h),s.estimatedTotalKeys+=a}if(e>=3){const c=s.totalDoors||a*30,h={level:3,name:t==="ANSI_BHMA"?"Change Keys":"User Keys",description:"Created automatically when doors are assigned",count:c,keys:[]};s.levels.push(h),s.estimatedTotalKeys+=c}if(e>=4){const c=s.totalDoors||a*30,h={level:4,name:t==="ANSI_BHMA"?"Change Keys":"User Keys",description:"Individual room/door keys",count:c,keys:[]};s.levels.push(h)}return s},jW=(t,e,r,n,i)=>{const s=[],a=jR(n,r),o=FR(n,r);if(s.push({levelName:Md(t,1,r,0),levelType:e===4?"GGM":"GMK",keySymbol:$0(t,1,0),order:0,parentHierarchyId:null,description:`${Md(t,1,r,0)} - Opens all doors in ${i}`,autoGenerated:!0}),e>=2)for(let l=0;l<a;l++){const c=o[l]||`Group ${l+1}`;s.push({levelName:Md(t,2,r,l,c),levelType:e===4?"GMK":"MK",keySymbol:$0(t,2,l),order:l+1,parentHierarchyId:null,description:`Master key for ${c}`,autoGenerated:!0})}return s},FW=(t,e)=>{const r=t==="ANSI_BHMA";return e===2?r?"2-Level System: Master  Change Keys":"2-Level System: Master  User Keys":e===3?r?"3-Level System: Grand Master  Master  Change":"3-Level System: General Master  Master  User":e===4?r?"4-Level System: Great GM  Grand Master  Master  Change":"4-Level System: Great GM  General Master  Master  User":"Single Key System (SKD/KD)"},av=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n,showConfirm:i})=>{var le;const{mkProject:s,hierarchies:a,hierarchyTree:o,standard:l,mkApproach:c,addHierarchyLevel:h,deleteHierarchyLevel:d,applyHierarchyTemplate:p}=fl(),[f,v]=Q.useState(!1),[x,_]=Q.useState({levelName:"",keySymbol:"",parentHierarchyId:null}),[w,S]=Q.useState(!1),[N,j]=Q.useState(!1),z=yu[l],W=(s==null?void 0:s.facilityType)||"Commercial Office",b=(s==null?void 0:s.hierarchyLevels)||3,T=FW(l,b),A=async()=>{const ve=LW(l,b,c,r);let ge=`This will create:

`;if(ve.levels.forEach((ce,be)=>{ge+=`**Level ${ce.level}: ${ce.name}**
`,ce.keys&&ce.keys.length>0&&ce.keys.length<=10?ce.keys.forEach(Me=>{const Le=Me.doorCount?` (${Me.doorCount} doors)`:"";ge+=`   ${Me.symbol} - ${Me.name}${Le}
`}):ce.count&&(ge+=`   ${ce.count} key${ce.count!==1?"s":""} - ${ce.description}
`),ge+=`
`}),ge+=`**Total Estimated Keys:** ${ve.estimatedTotalKeys}

`,ge+="Change keys will be created automatically when you assign doors in Step 4.",!!(i?await i("Auto-Generate Hierarchy",ge,"Generate Hierarchy","Cancel"):confirm(ge))){if(a.length>0){if(!(i?await i("Replace Existing","This will replace your existing hierarchy levels. Continue?","Yes, Replace","Cancel"):confirm("This will replace your existing hierarchy levels. Continue?")))return;for(const be of a)await d(be.hierarchyId)}j(!0);try{const ce=jW(l,b,c,r,W);let be=null;for(const Me of ce){const Le={...Me,parentHierarchyId:Me.order===0?null:be};if(await h(Le),Me.order===0){await new Promise(B=>setTimeout(B,300));const I=a;I.length>0&&(be=I[0].hierarchyId)}}n&&await n("Success",`Hierarchy generated successfully!

${ce.length} levels created based on your ${b}-level plan.`)}catch(ce){n&&await n("Error",`Failed to generate hierarchy: ${ce.message}`)}finally{j(!1)}}},F=async()=>{if(i?await i("Replace Hierarchy","This will replace your current hierarchy. Continue?","Yes, Replace","Cancel"):confirm("This will replace your current hierarchy. Continue?")){S(!0);try{await p(W),n&&await n("Success","Template applied successfully!")}catch(ge){n&&await n("Error",`Failed to apply template: ${ge.message}`)}finally{S(!1)}}},k=async ve=>{ve.preventDefault();try{await h({...x,order:a.length,levelType:"custom"}),v(!1),_({levelName:"",keySymbol:"",parentHierarchyId:null})}catch(ge){n&&await n("Error",`Failed to add level: ${ge.message}`)}},L=async ve=>{if(i?await i("Delete Level","Delete this hierarchy level?","Yes, Delete","Cancel"):confirm("Delete this hierarchy level?"))try{await d(ve)}catch(ye){n&&await n("Error",`Failed to delete: ${ye.message}`)}},R=(ve,ge=0)=>ve.map(ye=>u.jsxs("div",{style:{marginLeft:ge*24},children:[u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-lg mb-2 hover:shadow-sm transition-shadow",children:[u.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"font-bold text-indigo-600",children:ye.keySymbol})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-semibold text-gray-900",children:ye.levelName}),u.jsx("div",{className:"text-sm text-gray-500",children:ye.description||ye.levelType})]}),ge<2&&ye.children&&ye.children.length>0&&u.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500",children:[ye.children.length," child",ye.children.length!==1?"ren":""]}),u.jsx("button",{onClick:()=>L(ye.hierarchyId),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete level",children:u.jsx(Dd,{size:16})})]}),ye.children&&ye.children.length>0&&R(ye.children,ge+1)]},ye.hierarchyId));return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:u.jsx(Lp,{className:"w-8 h-8 text-indigo-600"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Hierarchy Setup"}),u.jsxs("p",{className:"text-gray-600 max-w-2xl mx-auto",children:["Define your master key hierarchy levels based on ",z.name,"."]})]}),u.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-2 border-emerald-200 rounded-xl p-6",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center",children:u.jsx(Ca,{className:"w-7 h-7 text-emerald-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("h3",{className:"font-bold text-emerald-900",children:"Your Hierarchy Plan"}),u.jsx("span",{className:"px-2 py-0.5 bg-emerald-600 text-white text-xs font-bold rounded-full",children:"FROM STEP 1.5"})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-3",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs text-emerald-700 font-semibold mb-1",children:"Standard"}),u.jsx("div",{className:"text-sm font-bold text-emerald-900",children:z.name})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs text-emerald-700 font-semibold mb-1",children:"Hierarchy System"}),u.jsx("div",{className:"text-sm font-bold text-emerald-900",children:T})]})]}),u.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-emerald-200",children:[u.jsx("div",{className:"text-xs font-semibold text-emerald-800 mb-2",children:"Structure:"}),u.jsxs("div",{className:"grid gap-1 text-sm text-emerald-700",children:[b>=1&&u.jsxs("div",{children:[" Level 1: ",l==="ANSI_BHMA"?"Grand Master":"General Master"," (1 key)"]}),b>=2&&u.jsxs("div",{children:[" Level 2: ","Master Keys"," (estimated: ",Math.ceil(r.length/30)||3,"-",Math.ceil(r.length/20)||6," keys)"]}),b>=3&&u.jsxs("div",{children:[" Level 3: ",l==="ANSI_BHMA"?"Change Keys":"User Keys"," (created per door assignment)"]}),b>=4&&u.jsx("div",{children:" Level 4: Individual Room Keys (created per door assignment)"})]})]})]})]})}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-xl p-5",children:[u.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[u.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:u.jsx(xh,{className:"w-6 h-6 text-indigo-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-bold text-indigo-900 mb-1",children:"Auto-Generate from Plan"}),u.jsxs("p",{className:"text-sm text-indigo-700",children:["Automatically create ",b,"-level hierarchy based on your Step 1.5 selection."]})]})]}),u.jsx("button",{onClick:A,disabled:N||!b,className:"w-full px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all font-semibold flex items-center justify-center gap-2 shadow-md",children:N?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):u.jsxs(u.Fragment,{children:[u.jsx(xh,{size:18}),"Generate Hierarchy"]})})]}),u.jsxs("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-xl p-5",children:[u.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[u.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:u.jsx(L2,{className:"w-6 h-6 text-gray-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:"Apply Template"}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Use facility-based template for ",W," (",((le=z.recommendations[W])==null?void 0:le.depth)||3," levels)."]})]})]}),u.jsx("button",{onClick:F,disabled:w,className:"w-full px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-semibold",children:w?"Applying...":"Apply Template"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Current Hierarchy"}),a.length===0?u.jsxs("div",{className:"text-center py-12 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl",children:[u.jsx(Lp,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"No hierarchy levels defined yet."}),u.jsx("p",{className:"text-sm text-gray-400",children:"Apply a template or add levels manually to get started."})]}):u.jsxs("div",{className:"space-y-2",children:[R(o),u.jsx("div",{className:"mt-4 p-3 bg-emerald-50 border border-emerald-200 rounded-lg",children:u.jsxs("div",{className:"text-sm text-emerald-800",children:[u.jsx("strong",{children:a.length})," hierarchy level",a.length!==1?"s":""," defined"]})})]})]}),!f&&u.jsxs("button",{onClick:()=>v(!0),className:"w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-indigo-400 hover:text-indigo-600 flex items-center justify-center gap-2 transition-colors",children:[u.jsx(qb,{size:20}),"Add Custom Level"]}),f&&u.jsxs("form",{onSubmit:k,className:"bg-gray-50 border border-gray-200 rounded-lg p-4 space-y-3",children:[u.jsx("h4",{className:"font-semibold text-gray-900",children:"Add Custom Hierarchy Level"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Level Name"}),u.jsx("input",{type:"text",value:x.levelName,onChange:ve=>_({...x,levelName:ve.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Master Key",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Key Symbol"}),u.jsx("input",{type:"text",value:x.keySymbol,onChange:ve=>_({...x,keySymbol:ve.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., AA",required:!0}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For ANSI: Use A, AA, AAA pattern. For EN: Use GM, M, S pattern."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Parent Level"}),u.jsxs("select",{value:x.parentHierarchyId||"",onChange:ve=>_({...x,parentHierarchyId:ve.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[u.jsx("option",{value:"",children:"None (Top Level)"}),a.map(ve=>u.jsx("option",{value:ve.hierarchyId,children:ve.levelName},ve.hierarchyId))]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Add Level"}),u.jsx("button",{type:"button",onClick:()=>{v(!1),_({levelName:"",keySymbol:"",parentHierarchyId:null})},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})},DA=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n,showConfirm:i})=>{const{mkProject:s,zones:a,mkApproach:o,createZone:l,autoGenerateZones:c,deleteZone:h}=fl(),[d,p]=Q.useState(!1),[f,v]=Q.useState({zoneName:"",color:"#3B82F6"}),[x,_]=Q.useState(!1),w=[{name:"Red",value:"#EF4444"},{name:"Orange",value:"#F59E0B"},{name:"Green",value:"#10B981"},{name:"Blue",value:"#3B82F6"},{name:"Purple",value:"#8B5CF6"},{name:"Pink",value:"#EC4899"},{name:"Indigo",value:"#6366F1"},{name:"Teal",value:"#14B8A6"}],S=async()=>{if(r.length===0){n&&await n("No Doors Found","No doors found in project. Please add doors in Step 1 first.");return}const W=a.length>0?"This will replace existing zones. Continue?":`Auto-generate ${r.length} zone${r.length!==1?"s":""} based on your door data?`,b=a.length>0?"Replace Zones":"Generate Zones";if(i?await i(b,W,a.length>0?"Yes, Replace":"Generate","Cancel"):confirm(W)){if(a.length>0)for(const A of a)await h(A.zoneId);_(!0);try{await c(r,o),n&&await n("Success","Zones generated successfully!")}catch(A){n&&await n("Error",`Failed to generate zones: ${A.message}`)}finally{_(!1)}}},N=async W=>{W.preventDefault();try{await l({...f,doorCount:0}),p(!1),v({zoneName:"",color:"#3B82F6"})}catch(b){n&&await n("Error",`Failed to create zone: ${b.message}`)}},j=async W=>{if(i?await i("Delete Zone","Delete this zone?","Yes, Delete","Cancel"):confirm("Delete this zone?"))try{await h(W)}catch(T){n&&await n("Error",`Failed to delete zone: ${T.message}`)}},z=()=>{switch(o){case"zone_based":return"by Building Zones";case"floor_based":return"by Floor Levels";case"functional":return"by Functional Use";default:return""}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:u.jsx(Jy,{className:"w-8 h-8 text-indigo-600"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Zone Definition"}),u.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Create zones to organize your doors for master key assignment."})]}),u.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-white rounded-lg flex items-center justify-center shadow-sm",children:u.jsx(xh,{className:"w-6 h-6 text-indigo-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:"Auto-Generate Zones"}),u.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Automatically create zones ",z()," from your project's ",r.length," door",r.length!==1?"s":"","."]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:S,disabled:x||r.length===0,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:x?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):u.jsxs(u.Fragment,{children:[u.jsx(xh,{size:16}),"Generate Zones"]})}),r.length===0&&u.jsx("span",{className:"text-sm text-gray-500 self-center",children:"No doors available in project"})]})]})]})}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[u.jsx(kf,{className:"w-5 h-5 text-indigo-600"}),"Defined Zones"]}),a.length>0&&u.jsx("div",{className:"px-3 py-1 bg-emerald-50 border border-emerald-200 rounded-full",children:u.jsxs("span",{className:"text-sm font-semibold text-emerald-800",children:[a.length," zone",a.length!==1?"s":""]})})]}),a.length===0?u.jsxs("div",{className:"text-center py-12 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl",children:[u.jsx(Jy,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"No zones defined yet."}),u.jsx("p",{className:"text-sm text-gray-400",children:"Auto-generate zones or add them manually to get started."})]}):u.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:a.map(W=>u.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white border-2 border-gray-200 rounded-lg hover:shadow-md transition-shadow",children:[u.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center shadow-sm",style:{backgroundColor:W.color+"20",border:`2px solid ${W.color}`},children:u.jsx(Jy,{size:20,style:{color:W.color}})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-semibold text-gray-900 truncate",children:W.zoneName}),u.jsxs("div",{className:"text-sm text-gray-500",children:[W.doorCount||0," door",W.doorCount!==1?"s":""]})]}),u.jsx("button",{onClick:()=>j(W.zoneId),className:"flex-shrink-0 p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete zone",children:u.jsx(Dd,{size:16})})]},W.zoneId))})]}),!d&&u.jsxs("button",{onClick:()=>p(!0),className:"w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-indigo-400 hover:text-indigo-600 flex items-center justify-center gap-2 transition-colors",children:[u.jsx(qb,{size:20}),"Add Custom Zone"]}),d&&u.jsxs("form",{onSubmit:N,className:"bg-gray-50 border border-gray-200 rounded-lg p-4 space-y-4",children:[u.jsx("h4",{className:"font-semibold text-gray-900",children:"Add Custom Zone"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Zone Name"}),u.jsx("input",{type:"text",value:f.zoneName,onChange:W=>v({...f,zoneName:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., East Wing, Admin Area, Building A",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Zone Color"}),u.jsx("div",{className:"grid grid-cols-8 gap-2",children:w.map(W=>u.jsx("button",{type:"button",onClick:()=>v({...f,color:W.value}),className:`w-10 h-10 rounded-lg border-2 transition-all ${f.color===W.value?"border-gray-900 scale-110 shadow-md":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:W.value},title:W.name},W.value))})]}),u.jsxs("div",{className:"flex gap-2 pt-2",children:[u.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Add Zone"}),u.jsx("button",{type:"button",onClick:()=>{p(!1),v({zoneName:"",color:"#3B82F6"})},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]}),a.length>0&&u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:u.jsxs("p",{className:"text-sm text-blue-800",children:[u.jsx("strong",{children:"Next Step:"})," You'll assign doors to specific hierarchy levels within these zones."]})})]})},DW=(t,e)=>{let r=e.find(n=>n.levelName.toLowerCase()===t.toLowerCase()||n.levelName.toLowerCase().includes(t.toLowerCase()));if(!r){const n=t.toLowerCase().split(/\s+/);r=e.find(i=>{const s=i.levelName.toLowerCase().split(/\s+/);return n.some(a=>s.some(o=>o.includes(a)||a.includes(o)))})}return r},y5=(t,e,r,n)=>{if(t==="ANSI_BHMA")return`${e}${r+1}`;{const i=e.match(/(\d+)/),s=i?i[1]:"1",a=String(r+1).padStart(2,"0");return`CK-${s}${a}`}},MW=(t,e)=>t.mark?`Door ${t.mark} Key`:t.use?`${t.use} Key`:e?`${e} Key ${t.id.slice(-4)}`:`Change Key ${t.id.slice(-4)}`,OW=(t,e)=>{const r=[];let n=e.find(s=>s.hierarchyId===t);for(;n&&n.parentHierarchyId;){const s=e.find(a=>a.hierarchyId===n.parentHierarchyId);if(s)r.push(s),n=s;else break}const i=e.find(s=>!s.parentHierarchyId&&s.hierarchyId!==t);return i&&!r.some(s=>s.hierarchyId===i.hierarchyId)&&r.push(i),r},BW=(t,e,r,n)=>{const i={assignments:[],changeKeys:[],masterCounts:{},totalChangeKeys:0,unassignedDoors:[]},s=r.filter(o=>o.order>0&&o.order<=r.length-1),a={};return t.forEach(o=>{const l=o.zone||"Unassigned";a[l]||(a[l]=[]),a[l].push(o)}),Object.entries(a).forEach(([o,l])=>{const c=DW(o,s);if(!c){i.unassignedDoors.push(...l);return}i.masterCounts[c.hierarchyId]||(i.masterCounts[c.hierarchyId]={master:c,count:0,zoneName:o});const h=OW(c.hierarchyId,r);l.forEach((d,p)=>{const f=y5(n,c.keySymbol,i.masterCounts[c.hierarchyId].count,c.hierarchyId),v=MW(d,o),x={doorId:d.id,door:d,changeKeySymbol:f,changeKeyName:v,masterKeyId:c.hierarchyId,masterKeySymbol:c.keySymbol,masterKeyName:c.levelName,parentMasterKeys:h.map(_=>({id:_.hierarchyId,symbol:_.keySymbol,name:_.levelName})),zoneName:o};i.assignments.push(x),i.changeKeys.push({symbol:f,name:v,doorId:d.id,masterKeyId:c.hierarchyId,zoneName:o}),i.masterCounts[c.hierarchyId].count++,i.totalChangeKeys++})}),i},UW=(t,e,r)=>{const n=r==="ANSI_BHMA";let i=`This will create:

`;const s=e.find(l=>!l.parentHierarchyId);s&&(i+=`**${s.levelName} (${s.keySymbol})**
`,i+=` Opens all ${t.totalChangeKeys} door${t.totalChangeKeys!==1?"s":""}

`),i+=`**Master Keys:**
`,Object.values(t.masterCounts).forEach(({master:l,count:c,zoneName:h})=>{i+=` ${l.keySymbol} (${l.levelName}) - ${c} door${c!==1?"s":""}
`;const d=t.changeKeys.filter(p=>p.masterKeyId===l.hierarchyId).slice(0,3);d.length>0&&(i+=`   Change Keys: ${d.map(p=>p.symbol).join(", ")}`,c>3&&(i+=`... (${c-3} more)`),i+=`
`)}),t.unassignedDoors.length>0&&(i+=`
 **${t.unassignedDoors.length} door${t.unassignedDoors.length!==1?"s":""} could not be auto-assigned**
`,i+=`These doors have no matching zone/master. You'll need to assign them manually.
`),i+=`
**Total Change Keys:** ${t.totalChangeKeys}
`;const a=Object.keys(t.masterCounts).length,o=s?1:0;return i+=`**Total Keys in System:** ${o+a+t.totalChangeKeys}
`,i+=`(${o} GMK + ${a} MK + ${t.totalChangeKeys} CK)
`,i},VW=(t,e,r)=>{const n={totalDoors:r.length,assignedDoors:t.length,unassignedDoors:r.length-t.length,progressPercentage:r.length>0?Math.round(t.length/r.length*100):0,masterStats:{}};return e.forEach(i=>{const s=t.filter(a=>a.hierarchyId===i.hierarchyId);n.masterStats[i.hierarchyId]={hierarchy:i,assignedCount:s.length,symbol:i.keySymbol,name:i.levelName}}),n},ov=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n,showConfirm:i})=>{const{hierarchies:s,zones:a,assignments:o,kaGroups:l,standard:c,assignDoorToKey:h,bulkAssignDoors:d,unassignDoor:p,createKAGroup:f,updateKeyQuantity:v}=fl(),[x,_]=Q.useState(""),[w,S]=Q.useState("all"),[N,j]=Q.useState("all"),[z,W]=Q.useState([]),[b,T]=Q.useState(null),[A,F]=Q.useState(!1),[k,L]=Q.useState(!1),[R,le]=Q.useState(!1),[ve,ge]=Q.useState(""),[ye,ce]=Q.useState(5),[be,Me]=Q.useState([]);Q.useMemo(()=>VW(o,s,r),[o,s,r]);const Le=Q.useMemo(()=>{const ne=new Set(r.map(we=>we.level).filter(Boolean));return Array.from(ne).sort()},[r]),I=Q.useMemo(()=>{const ne=new Set(r.map(we=>we.zone).filter(Boolean));return Array.from(ne).sort()},[r]),B=ne=>o.some(we=>we.doorId===ne),U=ne=>o.find(we=>we.doorId===ne),H=Q.useMemo(()=>r.filter(ne=>{var Je,ct,Et;const we=!x||((Je=ne.mark)==null?void 0:Je.toLowerCase().includes(x.toLowerCase()))||((ct=ne.use)==null?void 0:ct.toLowerCase().includes(x.toLowerCase()))||((Et=ne.zone)==null?void 0:Et.toLowerCase().includes(x.toLowerCase())),me=w==="all"||ne.zone===w,Ke=N==="all"||ne.level===N;return we&&me&&Ke}),[r,x,w,N]),te=r.filter(ne=>B(ne.id)).length,fe=r.length,Ae=fe>0?Math.round(te/fe*100):0,Te=ne=>{W(we=>we.includes(ne)?we.filter(me=>me!==ne):[...we,ne])},Pe=()=>{const ne=H.filter(we=>!B(we.id));W(ne.map(we=>we.id))},et=()=>{W([])},Qe=async()=>{if(z.length===0||!b){n&&await n("Selection Required","Please select doors and a hierarchy level");return}F(!0);try{let ne=o.filter(we=>we.hierarchyId===b.hierarchyId).length;for(const we of z){const me=y5(c,b.keySymbol,ne,b.hierarchyId);await h(we,b.hierarchyId,me),ne++}n&&await n("Success",`Successfully assigned ${z.length} door${z.length!==1?"s":""}`),et()}catch(ne){n&&await n("Error",`Failed to assign doors: ${ne.message}`)}finally{F(!1)}},dt=async(ne,we)=>{F(!0);try{const me=o.filter(Je=>Je.hierarchyId===we.hierarchyId).length,Ke=y5(c,we.keySymbol,me,we.hierarchyId);await h(ne,we.hierarchyId,Ke)}catch(me){n&&await n("Error",`Failed to assign door: ${me.message}`)}finally{F(!1)}},wt=async ne=>{F(!0);try{await p(ne),n&&await n("Success","Door unassigned successfully")}catch(we){n&&await n("Error",`Failed to unassign door: ${we.message}`)}finally{F(!1)}},ae=async()=>{if(!ve.trim()){n&&await n("Name Required","Please enter a name for the KA group");return}if(be.length<2){n&&await n("Selection Required","KA group must have at least 2 doors");return}if(!r.find(me=>me.id===be[0]))return;const we=s.find(me=>me.order>0);if(!we){n&&await n("No Master Key","Please create master keys in Step 2 first");return}F(!0);try{await f(ve,be,we.hierarchyId,we.keySymbol,ye),n&&await n("Success",`KA Group "${ve}" created with ${be.length} doors`),le(!1),ge(""),ce(5),Me([]),et()}catch(me){n&&await n("Error",`Failed to create KA group: ${me.message}`)}finally{F(!1)}},Ie=async()=>{if(r.length===0){n&&await n("No Doors","No doors found in project to assign.");return}if(s.length===0){n&&await n("No Hierarchy","Please create hierarchy levels in Step 2 first.");return}const ne=BW(r,a,s,c);if(ne.assignments.length===0){n&&await n("Cannot Auto-Assign","No zones could be matched to master keys. Please ensure your zones match your master key names.");return}const we=UW(ne,s,c);if(i?await i("Auto-Assign Doors",we,"Confirm Assignment","Cancel"):confirm(we)){L(!0);try{for(const Ke of ne.assignments)await h(Ke.doorId,Ke.masterKeyId,Ke.changeKeySymbol);n&&await n("Success",`Auto-assigned ${ne.assignments.length} door${ne.assignments.length!==1?"s":""} successfully!

${ne.totalChangeKeys} change keys created.`)}catch(Ke){n&&await n("Error",`Failed to auto-assign doors: ${Ke.message}`)}finally{L(!1)}}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:u.jsx(Ju,{className:"w-8 h-8 text-indigo-600"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Door Assignment"}),u.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Assign doors to hierarchy levels to define which keys open which doors."})]}),u.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"text-sm font-semibold text-indigo-900 mb-1",children:"Assignment Progress"}),u.jsxs("div",{className:"text-2xl font-bold text-indigo-600 mb-2",children:[te," / ",fe," doors"]}),te>0&&u.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),u.jsxs("span",{className:"text-gray-700",children:[u.jsxs("strong",{children:[r.filter(ne=>B(ne.id)).reduce((ne,we)=>ne+(we.qty||1),0)," cylinders"]})," assigned"]})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),u.jsxs("span",{className:"text-gray-600",children:[r.reduce((ne,we)=>ne+(we.qty||1),0)," total cylinders in schedule"]})]})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("div",{className:"text-3xl font-bold text-indigo-600",children:[Ae,"%"]}),u.jsx("div",{className:"text-sm text-indigo-700",children:"Complete"})]})]}),u.jsx("div",{className:"w-full bg-indigo-200 rounded-full h-3 overflow-hidden",children:u.jsx("div",{className:"bg-indigo-600 h-full rounded-full transition-all duration-500",style:{width:`${Ae}%`}})})]}),s.length>0&&u.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-xl p-6",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(Lp,{className:"w-5 h-5 text-blue-600"}),u.jsx("h3",{className:"font-bold text-blue-900",children:"Master Key Hierarchy"})]}),u.jsx("div",{className:"space-y-3",children:s.map((ne,we)=>{const me=o.filter(Je=>Je.hierarchyId===ne.hierarchyId).length,Ke=ne.order===0;return u.jsxs("div",{className:"flex items-center gap-3 bg-white bg-opacity-60 rounded-lg p-3",style:{marginLeft:`${ne.order*16}px`},children:[u.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${Ke?"bg-blue-100":"bg-cyan-100"}`,children:u.jsx("span",{className:`font-bold text-sm ${Ke?"text-blue-700":"text-cyan-700"}`,children:ne.keySymbol})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:ne.levelName}),u.jsx("div",{className:"text-xs text-gray-600",children:Ke?`Opens all ${fe} doors`:`${me} door${me!==1?"s":""} assigned`})]}),!Ke&&me>0&&u.jsx("div",{className:"flex-shrink-0",children:u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700",children:me})})]},ne.hierarchyId)})})]}),r.length>0&&te<fe&&s.length>0&&u.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-xl p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(xh,{className:"w-5 h-5 text-indigo-600"}),u.jsx("h3",{className:"font-bold text-indigo-900",children:"Smart Auto-Assignment"})]}),u.jsx("p",{className:"text-sm text-indigo-700 mb-2",children:"Automatically assign all doors to master keys based on zones and hierarchy."}),u.jsxs("div",{className:"flex items-center gap-4 text-xs text-indigo-600",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(dW,{className:"w-4 h-4"}),u.jsxs("span",{children:[fe-te," unassigned doors"]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Lp,{className:"w-4 h-4"}),u.jsxs("span",{children:[s.filter(ne=>ne.order>0).length," master keys"]})]})]})]}),u.jsx("button",{onClick:Ie,disabled:k||A,className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg flex items-center gap-2 font-semibold",children:k?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),u.jsx("span",{children:"Assigning..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(xh,{className:"w-5 h-5"}),u.jsx("span",{children:"Auto-Assign All Doors"})]})})]})}),u.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[u.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"relative",children:[u.jsx(IR,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),u.jsx("input",{type:"text",value:x,onChange:ne=>_(ne.target.value),placeholder:"Search doors...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{className:"relative",children:[u.jsx(PA,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),u.jsxs("select",{value:w,onChange:ne=>S(ne.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",children:[u.jsx("option",{value:"all",children:"All Zones"}),I.map(ne=>u.jsx("option",{value:ne,children:ne},ne))]})]}),u.jsxs("div",{className:"relative",children:[u.jsx(PA,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),u.jsxs("select",{value:N,onChange:ne=>j(ne.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",children:[u.jsx("option",{value:"all",children:"All Levels"}),Le.map(ne=>u.jsxs("option",{value:ne,children:["Floor ",ne]},ne))]})]})]}),z.length>0&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center gap-3",children:[u.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:[z.length," door",z.length!==1?"s":""," selected"]}),u.jsxs("select",{value:(b==null?void 0:b.hierarchyId)||"",onChange:ne=>{const we=s.find(me=>me.hierarchyId===ne.target.value);T(we)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[u.jsx("option",{value:"",children:"Select hierarchy level..."}),s.map(ne=>u.jsxs("option",{value:ne.hierarchyId,children:[ne.keySymbol," - ",ne.levelName]},ne.hierarchyId))]}),u.jsx("button",{onClick:Qe,disabled:!b||A,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:A?"Assigning...":"Assign Selected"}),u.jsxs("button",{onClick:()=>{z.length>=2?(Me(z),le(!0)):n==null||n("Selection Required","Please select at least 2 doors to create a KA group")},disabled:z.length<2,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[u.jsx(gg,{size:16}),"Create KA Group"]}),u.jsx("button",{onClick:et,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear"})]})]}),H.some(ne=>!B(ne.id))&&u.jsxs("button",{onClick:Pe,className:"text-sm text-indigo-600 hover:text-indigo-700 font-semibold",children:["Select all unassigned (",H.filter(ne=>!B(ne.id)).length,")"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[u.jsx(kf,{className:"w-5 h-5 text-indigo-600"}),"Doors (",H.length,")"]}),H.length===0?u.jsxs("div",{className:"text-center py-12 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl",children:[u.jsx(Ju,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500",children:"No doors match your filters."})]}):u.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:H.map(ne=>{const we=B(ne.id),me=U(ne.id),Ke=z.includes(ne.id),Je=me?s.find(ct=>ct.hierarchyId===me.hierarchyId):null;return u.jsxs("div",{className:`flex items-center gap-3 p-4 border-2 rounded-lg transition-all ${we?"bg-emerald-50 border-emerald-200":Ke?"bg-indigo-50 border-indigo-400":"bg-white border-gray-200 hover:border-gray-300"}`,children:[!we&&u.jsx("button",{onClick:()=>Te(ne.id),className:"flex-shrink-0",children:Ke?u.jsx(Ca,{className:"text-indigo-600",size:20}):u.jsx(Yq,{className:"text-gray-400",size:20})}),u.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center ${we?"bg-emerald-100":"bg-gray-100"}`,children:u.jsx(Ju,{size:20,className:we?"text-emerald-600":"text-gray-600"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"font-semibold text-gray-900",children:ne.mark}),ne.qty>1&&u.jsxs("div",{className:"px-2 py-0.5 bg-orange-100 border border-orange-300 rounded text-xs font-bold text-orange-700",children:["QTY ",ne.qty]})]}),u.jsxs("div",{className:"text-sm text-gray-600 truncate",children:[ne.use,"  Floor ",ne.level,"  ",ne.zone]})]}),we&&Je?u.jsxs("div",{className:"flex items-center gap-2",children:[me.keyType==="KA"?u.jsx("div",{className:"flex-shrink-0 p-1.5 bg-purple-100 rounded-lg",title:"Keyed Alike - Shared key with other doors",children:u.jsx(gg,{size:16,className:"text-purple-600"})}):u.jsx("div",{className:"flex-shrink-0 p-1.5 bg-blue-100 rounded-lg",title:"Keyed Differ - Unique key",children:u.jsx(Ml,{size:16,className:"text-blue-600"})}),u.jsx("div",{className:"flex-shrink-0 px-3 py-1 bg-emerald-100 border border-emerald-300 rounded-full",children:u.jsx("span",{className:"text-sm font-semibold text-emerald-800",children:me.keySymbol||Je.keySymbol})}),u.jsx("div",{className:"flex-shrink-0 px-2 py-0.5 bg-cyan-50 border border-cyan-200 rounded text-xs text-cyan-700",children:Je.keySymbol}),me.keyType==="KA"?u.jsx("div",{className:"flex-shrink-0 px-2 py-1 bg-purple-50 border border-purple-200 rounded text-xs text-purple-700 font-medium",children:me.kaGroupName||"KA Group"}):u.jsxs("div",{className:"flex-shrink-0 px-2 py-1 bg-gray-50 border border-gray-200 rounded text-xs text-gray-700",children:[me.keyQuantity||2," keys"]}),u.jsx("button",{onClick:()=>wt(ne.id),disabled:A,className:"flex-shrink-0 p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Unassign door",children:u.jsx(kl,{size:16})})]}):u.jsxs("select",{onChange:ct=>{if(ct.target.value){const Et=s.find(Bt=>Bt.hierarchyId===ct.target.value);Et&&(dt(ne.id,Et),ct.target.value="")}},className:"flex-shrink-0 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",disabled:A,children:[u.jsx("option",{value:"",children:"Assign to..."}),s.map(ct=>u.jsxs("option",{value:ct.hierarchyId,children:[ct.keySymbol," - ",ct.levelName]},ct.hierarchyId))]})]},ne.id)})})]}),te>0&&u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:u.jsxs("p",{className:"text-sm text-blue-800",children:[u.jsx("strong",{children:"Progress:"})," ",te," of ",fe," doors assigned.",te===fe?" Ready for validation!":" Keep assigning to complete your design."]})}),R&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-t-2xl",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"p-2 bg-white bg-opacity-20 rounded-lg",children:u.jsx(gg,{className:"w-6 h-6"})}),u.jsx("h2",{className:"text-2xl font-bold",children:"Create Keyed Alike Group"})]}),u.jsx("p",{className:"text-purple-100 text-sm",children:"Create a group of doors that share the same key - one key opens all doors in this group"})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"KA Group Name *"}),u.jsx("input",{type:"text",value:ve,onChange:ne=>ge(ne.target.value),placeholder:"e.g., Conference Rooms, Bathrooms, Storage Closets",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",autoFocus:!0}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Give this group a descriptive name"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Number of Physical Keys *"}),u.jsx("input",{type:"number",min:"1",max:"100",value:ye,onChange:ne=>ce(parseInt(ne.target.value)||1),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Total number of keys to manufacture for this group (one key opens all ",be.length," doors)"]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:["Selected Doors (",be.length,")"]}),u.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 max-h-60 overflow-y-auto",children:u.jsx("div",{className:"space-y-2",children:be.map(ne=>{const we=r.find(me=>me.id===ne);return we?u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-lg",children:[u.jsx(Ju,{size:18,className:"text-gray-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-medium text-gray-900",children:we.mark}),u.jsx("div",{className:"text-xs text-gray-600 truncate",children:we.use})]}),u.jsx("button",{onClick:()=>Me(be.filter(me=>me!==ne)),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:u.jsx(kl,{size:16})})]},ne):null})})}),be.length<2&&u.jsx("p",{className:"text-xs text-red-600 mt-2",children:" KA group must have at least 2 doors"})]}),u.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-4",children:[u.jsxs("h4",{className:"font-semibold text-purple-900 mb-2 flex items-center gap-2",children:[u.jsx(pW,{size:18}),"Summary"]}),u.jsxs("ul",{className:"text-sm text-purple-800 space-y-1",children:[u.jsxs("li",{children:[" ",u.jsxs("strong",{children:[be.length," doors"]})," will share the same key"]}),u.jsxs("li",{children:[" ",u.jsxs("strong",{children:[ye," physical keys"]})," will be manufactured"]}),u.jsxs("li",{children:[" One key opens all ",be.length," doors in this group"]}),u.jsx("li",{children:" Cost-effective: Fewer unique keys to manage"})]})]})]}),u.jsxs("div",{className:"bg-gray-50 px-6 py-4 rounded-b-2xl flex items-center justify-end gap-3",children:[u.jsx("button",{onClick:()=>{le(!1),ge(""),ce(5)},className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Cancel"}),u.jsx("button",{onClick:ae,disabled:A||!ve.trim()||be.length<2,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg font-semibold flex items-center gap-2",children:A?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Creating..."]}):u.jsxs(u.Fragment,{children:[u.jsx(gg,{size:18}),"Create KA Group"]})})]})]})})]})},xg=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n})=>{const{mkProject:i,hierarchies:s,assignments:a,standard:o,validateDesign:l}=fl(),[c,h]=Q.useState(null),[d,p]=Q.useState(!1),f=(i==null?void 0:i.facilityType)||"Commercial Office";Q.useEffect(()=>{v()},[]);const v=async()=>{p(!0);try{const b=await l(r,f);h(b)}catch(b){console.error("Validation error:",b),n&&await n("Validation Failed",`Validation failed: ${b.message}`)}finally{p(!1)}},x=r.length,_=r.filter(b=>a.some(T=>T.doorId===b.id)).length,w=s.length,S=(i==null?void 0:i.differsUsed)||0,N=(i==null?void 0:i.maxDiffersAvailable)||0,j=N-S,z=(i==null?void 0:i.totalPhysicalKeys)||0,W=(i==null?void 0:i.totalCylinders)||0;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:u.jsx(Ca,{className:"w-8 h-8 text-indigo-600"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Design Validation"}),u.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Review your master key system design for errors and standards compliance."})]}),c&&u.jsx("div",{className:`border-2 rounded-xl p-6 ${c.isValid?"bg-emerald-50 border-emerald-300":"bg-amber-50 border-amber-300"}`,children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`flex-shrink-0 w-16 h-16 rounded-full flex items-center justify-center ${c.isValid?"bg-emerald-100":"bg-amber-100"}`,children:c.isValid?u.jsx(Ca,{className:"w-8 h-8 text-emerald-600"}):u.jsx(eo,{className:"w-8 h-8 text-amber-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:`text-2xl font-bold mb-1 ${c.isValid?"text-emerald-900":"text-amber-900"}`,children:c.isValid?"Design Ready!":"Action Required"}),u.jsx("div",{className:`text-sm ${c.isValid?"text-emerald-700":"text-amber-700"}`,children:c.isValid?"Your master key system is complete and ready to export.":"Please address the items below before proceeding."})]}),u.jsxs("button",{onClick:v,disabled:d,className:"flex-shrink-0 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2 font-semibold",children:[u.jsx(H0,{size:16,className:d?"animate-spin":""}),"Re-validate"]})]})}),u.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:u.jsx(kf,{size:20,className:"text-blue-600"})}),u.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Total Doors"})]}),u.jsx("div",{className:"text-3xl font-bold text-gray-900",children:x})]}),u.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:u.jsx(Ca,{size:20,className:"text-emerald-600"})}),u.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Assigned"})]}),u.jsx("div",{className:"text-3xl font-bold text-emerald-600",children:_}),u.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[x>0?Math.round(_/x*100):0,"% Complete"]})]}),u.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:u.jsx(Ml,{size:20,className:"text-purple-600"})}),u.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Unique Keys"})]}),u.jsx("div",{className:"text-3xl font-bold text-purple-600",children:S}),u.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["of ",N.toLocaleString()," available"]})]}),u.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:u.jsx(CR,{size:20,className:"text-orange-600"})}),u.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Cylinders"})]}),u.jsx("div",{className:"text-3xl font-bold text-orange-600",children:W}),u.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[z," keys to cut"]})]})]}),u.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"System Capacity"}),u.jsxs("div",{className:"mb-4",children:[S<=100&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-6xl mb-2",children:""}),u.jsx("div",{className:"text-2xl font-bold text-emerald-600 mb-2",children:"Excellent"}),u.jsxs("div",{className:"text-lg text-gray-700 mb-4",children:["Very High Capacity  ",j.toLocaleString()," keys available"]}),u.jsx("div",{className:"max-w-md mx-auto bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:u.jsxs("div",{className:"text-sm text-emerald-800 space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Unique Keys:"}),u.jsxs("strong",{children:[S," of ",N.toLocaleString()]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Physical Keys:"}),u.jsxs("strong",{children:[z," to manufacture"]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Cylinders:"}),u.jsxs("strong",{children:[W," in system"]})]})]})})]}),S>100&&S<=500&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-6xl mb-2",children:""}),u.jsx("div",{className:"text-2xl font-bold text-yellow-600 mb-1",children:"Good"}),u.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:[S," unique keys | Capacity: High"]}),u.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[u.jsxs("div",{children:[u.jsxs("strong",{children:[z," physical keys"]})," to manufacture"]}),u.jsxs("div",{children:[u.jsxs("strong",{children:[W," cylinders"]})," in system"]}),u.jsx("div",{className:"mt-2 text-gray-500",children:"System is performing well with room for expansion"})]})]}),S>500&&S<=1e3&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-6xl mb-2",children:""}),u.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:"Consult Locksmith"}),u.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:[S," unique keys | Capacity: Moderate"]}),u.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[u.jsxs("div",{children:[u.jsxs("strong",{children:[z," physical keys"]})," to manufacture"]}),u.jsxs("div",{children:[u.jsxs("strong",{children:[W," cylinders"]})," in system"]}),u.jsx("div",{className:"mt-2 text-orange-600",children:"Consider reviewing system design with a professional locksmith"})]})]}),S>1e3&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-6xl mb-2",children:""}),u.jsx("div",{className:"text-2xl font-bold text-red-600 mb-1",children:"At Capacity"}),u.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:[S," unique keys | Capacity: Critical"]}),u.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[u.jsxs("div",{children:[u.jsxs("strong",{children:[z," physical keys"]})," to manufacture"]}),u.jsxs("div",{children:[u.jsxs("strong",{children:[W," cylinders"]})," in system"]}),u.jsx("div",{className:"mt-2 text-red-600 font-semibold",children:"System approaching maximum capacity - professional review required"})]})]})]})]})}),c&&c.errors.length>0&&u.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6",children:[u.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[u.jsx(eo,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-bold text-red-900 text-lg mb-1",children:["Issues to Resolve (",c.errors.length,")"]}),u.jsx("p",{className:"text-sm text-red-700",children:"Please address these issues before exporting your design."})]})]}),u.jsx("div",{className:"space-y-3",children:c.errors.map((b,T)=>u.jsx("div",{className:"bg-white border border-red-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-red-600 font-bold text-sm",children:T+1})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-semibold text-red-900 mb-1",children:b.message}),b.details&&u.jsx("div",{className:"text-sm text-red-700",children:b.details}),b.count&&u.jsxs("div",{className:"text-sm text-red-700 mt-1",children:["Affected items: ",u.jsx("strong",{children:b.count})]}),b.type==="unassigned_doors"&&u.jsx("div",{className:"mt-2",children:u.jsx("button",{onClick:e,className:"text-sm text-red-700 hover:text-red-900 font-semibold underline",children:" Go to Step 4 to assign remaining doors"})})]})]})},T))})]}),c&&c.warnings.length>0&&u.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:[u.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[u.jsx(bd,{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-bold text-amber-900 text-lg mb-1",children:["Recommendations (",c.warnings.length,")"]}),u.jsx("p",{className:"text-sm text-amber-700",children:"These are suggestions to improve your design (optional)."})]})]}),u.jsx("div",{className:"space-y-3",children:c.warnings.map((b,T)=>u.jsx("div",{className:"bg-white border border-amber-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(bd,{className:"flex-shrink-0 text-amber-600 mt-0.5",size:20}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium text-amber-900",children:b.message}),b.current!==void 0&&u.jsxs("div",{className:"text-sm text-amber-700 mt-1",children:["Current: ",b.current,b.recommended&&`  Recommended: ${b.recommended}`]})]})]})},T))})]}),c&&c.isValid&&u.jsx("div",{className:"bg-emerald-50 border-2 border-emerald-200 rounded-xl p-6",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx(Ca,{className:"flex-shrink-0 text-emerald-600 mt-0.5",size:28}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-emerald-900 text-xl mb-2",children:" All Systems Go!"}),u.jsx("div",{className:"text-emerald-800 mb-4",children:"Your master key system design is complete and meets all requirements. You're ready to export your keying schedule."}),u.jsxs("ul",{className:"text-sm text-emerald-800 space-y-1.5",children:[u.jsxs("li",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-600 rounded-full"}),"All ",x," doors have been assigned"]}),u.jsxs("li",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-600 rounded-full"}),w," hierarchy levels configured"]}),u.jsxs("li",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-600 rounded-full"}),S," unique keys within capacity limits"]}),u.jsxs("li",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-600 rounded-full"}),W," cylinders ready for installation"]})]}),u.jsx("div",{className:"mt-4 pt-4 border-t border-emerald-300",children:u.jsx("button",{onClick:t,className:"px-6 py-3 bg-emerald-600 text-white rounded-lg font-semibold hover:bg-emerald-700 transition-colors shadow-md",children:"Proceed to Export "})})]})]})})]})};function Sn(t){"@babel/helpers - typeof";return Sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(t)}var Fo=Uint8Array,Ia=Uint16Array,Kb=Int32Array,Gb=new Fo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Yb=new Fo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),MA=new Fo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DR=function(t,e){for(var r=new Ia(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new Kb(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return{b:r,r:i}},MR=DR(Gb,2),zW=MR.b,v5=MR.r;zW[28]=258,v5[258]=28;var HW=DR(Yb,0),OA=HW.r,w5=new Ia(32768);for(var Wn=0;Wn<32768;++Wn){var Sc=(Wn&43690)>>1|(Wn&21845)<<1;Sc=(Sc&52428)>>2|(Sc&13107)<<2,Sc=(Sc&61680)>>4|(Sc&3855)<<4,w5[Wn]=((Sc&65280)>>8|(Sc&255)<<8)>>1}var q0=function(t,e,r){for(var n=t.length,i=0,s=new Ia(e);i<n;++i)t[i]&&++s[t[i]-1];var a=new Ia(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(r){o=new Ia(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var c=i<<4|t[i],h=e-t[i],d=a[t[i]-1]++<<h,p=d|(1<<h)-1;d<=p;++d)o[w5[d]>>l]=c}else for(o=new Ia(n),i=0;i<n;++i)t[i]&&(o[i]=w5[a[t[i]-1]++]>>15-t[i]);return o},yh=new Fo(288);for(var Wn=0;Wn<144;++Wn)yh[Wn]=8;for(var Wn=144;Wn<256;++Wn)yh[Wn]=9;for(var Wn=256;Wn<280;++Wn)yh[Wn]=7;for(var Wn=280;Wn<288;++Wn)yh[Wn]=8;var yx=new Fo(32);for(var Wn=0;Wn<32;++Wn)yx[Wn]=5;var $W=q0(yh,9,0),qW=q0(yx,5,0),OR=function(t){return(t+7)/8|0},WW=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Fo(t.subarray(e,r))},Sl=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},c0=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},lv=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,s=r.slice();if(!i)return{t:UR,l:0};if(i==1){var a=new Fo(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(z,W){return z.f-W.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,h=1,d=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};h!=i-1;)o=r[r[c].f<r[d].f?c++:d++],l=r[c!=h&&r[c].f<r[d].f?c++:d++],r[h++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=s[0].s,n=1;n<i;++n)s[n].s>p&&(p=s[n].s);var f=new Ia(p+1),v=_5(r[h-1],f,0);if(v>e){var n=0,x=0,_=v-e,w=1<<_;for(s.sort(function(W,b){return f[b.s]-f[W.s]||W.f-b.f});n<i;++n){var S=s[n].s;if(f[S]>e)x+=w-(1<<v-f[S]),f[S]=e;else break}for(x>>=_;x>0;){var N=s[n].s;f[N]<e?x-=1<<e-f[N]++-1:++n}for(;n>=0&&x;--n){var j=s[n].s;f[j]==e&&(--f[j],++x)}v=e}return{t:new Fo(f),l:v}},_5=function(t,e,r){return t.s==-1?Math.max(_5(t.l,e,r+1),_5(t.r,e,r+1)):e[t.s]=r},BA=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Ia(++e),n=0,i=t[0],s=1,a=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[o]}return{c:r.subarray(0,n),n:e}},u0=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},BR=function(t,e,r){var n=r.length,i=OR(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<n;++s)t[i+s+4]=r[s];return(i+4+n)*8},UA=function(t,e,r,n,i,s,a,o,l,c,h){Sl(e,h++,r),++i[256];for(var d=lv(i,15),p=d.t,f=d.l,v=lv(s,15),x=v.t,_=v.l,w=BA(p),S=w.c,N=w.n,j=BA(x),z=j.c,W=j.n,b=new Ia(19),T=0;T<S.length;++T)++b[S[T]&31];for(var T=0;T<z.length;++T)++b[z[T]&31];for(var A=lv(b,7),F=A.t,k=A.l,L=19;L>4&&!F[MA[L-1]];--L);var R=c+5<<3,le=u0(i,yh)+u0(s,yx)+a,ve=u0(i,p)+u0(s,x)+a+14+3*L+u0(b,F)+2*b[16]+3*b[17]+7*b[18];if(l>=0&&R<=le&&R<=ve)return BR(e,h,t.subarray(l,l+c));var ge,ye,ce,be;if(Sl(e,h,1+(ve<le)),h+=2,ve<le){ge=q0(p,f,0),ye=p,ce=q0(x,_,0),be=x;var Me=q0(F,k,0);Sl(e,h,N-257),Sl(e,h+5,W-1),Sl(e,h+10,L-4),h+=14;for(var T=0;T<L;++T)Sl(e,h+3*T,F[MA[T]]);h+=3*L;for(var Le=[S,z],I=0;I<2;++I)for(var B=Le[I],T=0;T<B.length;++T){var U=B[T]&31;Sl(e,h,Me[U]),h+=F[U],U>15&&(Sl(e,h,B[T]>>5&127),h+=B[T]>>12)}}else ge=$W,ye=yh,ce=qW,be=yx;for(var T=0;T<o;++T){var H=n[T];if(H>255){var U=H>>18&31;c0(e,h,ge[U+257]),h+=ye[U+257],U>7&&(Sl(e,h,H>>23&31),h+=Gb[U]);var te=H&31;c0(e,h,ce[te]),h+=be[te],te>3&&(c0(e,h,H>>5&8191),h+=Yb[te])}else c0(e,h,ge[H]),h+=ye[H]}return c0(e,h,ge[256]),h+ye[256]},KW=new Kb([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),UR=new Fo(0),GW=function(t,e,r,n,i,s){var a=s.z||t.length,o=new Fo(n+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(n,o.length-i),c=s.l,h=(s.r||0)&7;if(e){h&&(l[0]=s.r>>3);for(var d=KW[e-1],p=d>>13,f=d&8191,v=(1<<r)-1,x=s.p||new Ia(32768),_=s.h||new Ia(v+1),w=Math.ceil(r/3),S=2*w,N=function(wt){return(t[wt]^t[wt+1]<<w^t[wt+2]<<S)&v},j=new Kb(25e3),z=new Ia(288),W=new Ia(32),b=0,T=0,A=s.i||0,F=0,k=s.w||0,L=0;A+2<a;++A){var R=N(A),le=A&32767,ve=_[R];if(x[le]=ve,_[R]=le,k<=A){var ge=a-A;if((b>7e3||F>24576)&&(ge>423||!c)){h=UA(t,l,0,j,z,W,T,F,L,A-L,h),F=b=T=0,L=A;for(var ye=0;ye<286;++ye)z[ye]=0;for(var ye=0;ye<30;++ye)W[ye]=0}var ce=2,be=0,Me=f,Le=le-ve&32767;if(ge>2&&R==N(A-Le))for(var I=Math.min(p,ge)-1,B=Math.min(32767,A),U=Math.min(258,ge);Le<=B&&--Me&&le!=ve;){if(t[A+ce]==t[A+ce-Le]){for(var H=0;H<U&&t[A+H]==t[A+H-Le];++H);if(H>ce){if(ce=H,be=Le,H>I)break;for(var te=Math.min(Le,H-2),fe=0,ye=0;ye<te;++ye){var Ae=A-Le+ye&32767,Te=x[Ae],Pe=Ae-Te&32767;Pe>fe&&(fe=Pe,ve=Ae)}}}le=ve,ve=x[le],Le+=le-ve&32767}if(be){j[F++]=268435456|v5[ce]<<18|OA[be];var et=v5[ce]&31,Qe=OA[be]&31;T+=Gb[et]+Yb[Qe],++z[257+et],++W[Qe],k=A+ce,++b}else j[F++]=t[A],++z[t[A]]}}for(A=Math.max(A,k);A<a;++A)j[F++]=t[A],++z[t[A]];h=UA(t,l,c,j,z,W,T,F,L,A-L,h),c||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=_,s.p=x,s.i=A,s.w=k)}else{for(var A=s.w||0;A<a+c;A+=65535){var dt=A+65535;dt>=a&&(l[h/8|0]=c,dt=a),h=BR(l,h+1,t.subarray(A,dt))}s.i=a}return WW(o,0,n+OR(h)+i)},VR=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,s=r.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=n+=r[a];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},YW=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new Fo(s.length+t.length);a.set(s),a.set(t,s.length),t=a,i.w=s.length}return GW(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},zR=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},XW=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=VR();i.p(e.dictionary),zR(t,2,i.d())}};function b5(t,e){e||(e={});var r=VR();r.p(t);var n=YW(t,e,e.dictionary?6:2,4);return XW(n,e),zR(n,n.length-4,r.d()),n}var QW=typeof TextDecoder<"u"&&new TextDecoder,JW=0;try{QW.decode(UR,{stream:!0}),JW=1}catch{}function ZW(t){if(Array.isArray(t))return t}function eK(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function VA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function tK(t,e){if(t){if(typeof t=="string")return VA(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?VA(t,e):void 0}}function rK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zA(t,e){return ZW(t)||eK(t,e)||tK(t,e)||rK()}function HA(t,e="utf8"){return new TextDecoder(e).decode(t)}const nK=new TextEncoder;function iK(t){return nK.encode(t)}const sK=1024*8,aK=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),cv={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Xb{constructor(e=sK,r={}){wn(this,"buffer");wn(this,"byteLength");wn(this,"byteOffset");wn(this,"length");wn(this,"offset");wn(this,"lastWrittenByte");wn(this,"littleEndian");wn(this,"_data");wn(this,"_mark");wn(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=r.offset?r.offset>>>0:0,s=e.byteLength-i;let a=i;(ArrayBuffer.isView(e)||e instanceof Xb)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=cv[r].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===aK&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const l=new cv[r](o.buffer);return this.offset+=n,l.reverse(),l}const a=new cv[r](s);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return HA(this.readBytes(e))}decodeText(e=1,r="utf8"){return HA(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(iK(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Cf(t){let e=t.length;for(;--e>=0;)t[e]=0}const oK=3,lK=258,HR=29,cK=256,uK=cK+1+HR,$R=30,hK=512,dK=new Array((uK+2)*2);Cf(dK);const fK=new Array($R*2);Cf(fK);const pK=new Array(hK);Cf(pK);const mK=new Array(lK-oK+1);Cf(mK);const gK=new Array(HR);Cf(gK);const xK=new Array($R);Cf(xK);const yK=(t,e,r,n)=>{let i=t&65535|0,s=t>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do i=i+e[n++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0};var S5=yK;const vK=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},wK=new Uint32Array(vK()),_K=(t,e,r,n)=>{const i=wK,s=n+r;t^=-1;for(let a=n;a<s;a++)t=t>>>8^i[(t^e[a])&255];return t^-1};var Ho=_K,E5={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},qR={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const bK=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var SK=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)bK(r,n)&&(t[n]=r[n])}}return t},EK=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,i=0,s=t.length;n<s;n++){let a=t[n];r.set(a,i),i+=a.length}return r},WR={assign:SK,flattenChunks:EK};let KR=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{KR=!1}const Fp=new Uint8Array(256);for(let t=0;t<256;t++)Fp[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Fp[254]=Fp[254]=1;var AK=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,i,s,a=t.length,o=0;for(i=0;i<a;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),s=0,i=0;s<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const NK=(t,e)=>{if(e<65534&&t.subarray&&KR)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var TK=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,i;const s=new Array(r*2);for(i=0,n=0;n<r;){let a=t[n++];if(a<128){s[i++]=a;continue}let o=Fp[a];if(o>4){s[i++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<r;)a=a<<6|t[n++]&63,o--;if(o>1){s[i++]=65533;continue}a<65536?s[i++]=a:(a-=65536,s[i++]=55296|a>>10&1023,s[i++]=56320|a&1023)}return NK(s,i)},kK=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Fp[t[r]]>e?r:e},A5={string2buf:AK,buf2string:TK,utf8border:kK};function CK(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var IK=CK;const yg=16209,PK=16191;var RK=function(e,r){let n,i,s,a,o,l,c,h,d,p,f,v,x,_,w,S,N,j,z,W,b,T,A,F;const k=e.state;n=e.next_in,A=e.input,i=n+(e.avail_in-5),s=e.next_out,F=e.output,a=s-(r-e.avail_out),o=s+(e.avail_out-257),l=k.dmax,c=k.wsize,h=k.whave,d=k.wnext,p=k.window,f=k.hold,v=k.bits,x=k.lencode,_=k.distcode,w=(1<<k.lenbits)-1,S=(1<<k.distbits)-1;e:do{v<15&&(f+=A[n++]<<v,v+=8,f+=A[n++]<<v,v+=8),N=x[f&w];t:for(;;){if(j=N>>>24,f>>>=j,v-=j,j=N>>>16&255,j===0)F[s++]=N&65535;else if(j&16){z=N&65535,j&=15,j&&(v<j&&(f+=A[n++]<<v,v+=8),z+=f&(1<<j)-1,f>>>=j,v-=j),v<15&&(f+=A[n++]<<v,v+=8,f+=A[n++]<<v,v+=8),N=_[f&S];r:for(;;){if(j=N>>>24,f>>>=j,v-=j,j=N>>>16&255,j&16){if(W=N&65535,j&=15,v<j&&(f+=A[n++]<<v,v+=8,v<j&&(f+=A[n++]<<v,v+=8)),W+=f&(1<<j)-1,W>l){e.msg="invalid distance too far back",k.mode=yg;break e}if(f>>>=j,v-=j,j=s-a,W>j){if(j=W-j,j>h&&k.sane){e.msg="invalid distance too far back",k.mode=yg;break e}if(b=0,T=p,d===0){if(b+=c-j,j<z){z-=j;do F[s++]=p[b++];while(--j);b=s-W,T=F}}else if(d<j){if(b+=c+d-j,j-=d,j<z){z-=j;do F[s++]=p[b++];while(--j);if(b=0,d<z){j=d,z-=j;do F[s++]=p[b++];while(--j);b=s-W,T=F}}}else if(b+=d-j,j<z){z-=j;do F[s++]=p[b++];while(--j);b=s-W,T=F}for(;z>2;)F[s++]=T[b++],F[s++]=T[b++],F[s++]=T[b++],z-=3;z&&(F[s++]=T[b++],z>1&&(F[s++]=T[b++]))}else{b=s-W;do F[s++]=F[b++],F[s++]=F[b++],F[s++]=F[b++],z-=3;while(z>2);z&&(F[s++]=F[b++],z>1&&(F[s++]=F[b++]))}}else if(j&64){e.msg="invalid distance code",k.mode=yg;break e}else{N=_[(N&65535)+(f&(1<<j)-1)];continue r}break}}else if(j&64)if(j&32){k.mode=PK;break e}else{e.msg="invalid literal/length code",k.mode=yg;break e}else{N=x[(N&65535)+(f&(1<<j)-1)];continue t}break}}while(n<i&&s<o);z=v>>3,n-=z,v-=z<<3,f&=(1<<v)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<o?257+(o-s):257-(s-o),k.hold=f,k.bits=v};const Vh=15,$A=852,qA=592,WA=0,uv=1,KA=2,LK=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),jK=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),FK=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),DK=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),MK=(t,e,r,n,i,s,a,o)=>{const l=o.bits;let c=0,h=0,d=0,p=0,f=0,v=0,x=0,_=0,w=0,S=0,N,j,z,W,b,T=null,A;const F=new Uint16Array(Vh+1),k=new Uint16Array(Vh+1);let L=null,R,le,ve;for(c=0;c<=Vh;c++)F[c]=0;for(h=0;h<n;h++)F[e[r+h]]++;for(f=l,p=Vh;p>=1&&F[p]===0;p--);if(f>p&&(f=p),p===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,o.bits=1,0;for(d=1;d<p&&F[d]===0;d++);for(f<d&&(f=d),_=1,c=1;c<=Vh;c++)if(_<<=1,_-=F[c],_<0)return-1;if(_>0&&(t===WA||p!==1))return-1;for(k[1]=0,c=1;c<Vh;c++)k[c+1]=k[c]+F[c];for(h=0;h<n;h++)e[r+h]!==0&&(a[k[e[r+h]]++]=h);if(t===WA?(T=L=a,A=20):t===uv?(T=LK,L=jK,A=257):(T=FK,L=DK,A=0),S=0,h=0,c=d,b=s,v=f,x=0,z=-1,w=1<<f,W=w-1,t===uv&&w>$A||t===KA&&w>qA)return 1;for(;;){R=c-x,a[h]+1<A?(le=0,ve=a[h]):a[h]>=A?(le=L[a[h]-A],ve=T[a[h]-A]):(le=96,ve=0),N=1<<c-x,j=1<<v,d=j;do j-=N,i[b+(S>>x)+j]=R<<24|le<<16|ve|0;while(j!==0);for(N=1<<c-1;S&N;)N>>=1;if(N!==0?(S&=N-1,S+=N):S=0,h++,--F[c]===0){if(c===p)break;c=e[r+a[h]]}if(c>f&&(S&W)!==z){for(x===0&&(x=f),b+=d,v=c-x,_=1<<v;v+x<p&&(_-=F[v+x],!(_<=0));)v++,_<<=1;if(w+=1<<v,t===uv&&w>$A||t===KA&&w>qA)return 1;z=S&W,i[z]=f<<24|v<<16|b-s|0}}return S!==0&&(i[b+S]=c-x<<24|64<<16|0),o.bits=f,0};var W0=MK;const OK=0,GR=1,YR=2,{Z_FINISH:GA,Z_BLOCK:BK,Z_TREES:vg,Z_OK:vh,Z_STREAM_END:UK,Z_NEED_DICT:VK,Z_STREAM_ERROR:ao,Z_DATA_ERROR:XR,Z_MEM_ERROR:QR,Z_BUF_ERROR:zK,Z_DEFLATED:YA}=qR,j2=16180,XA=16181,QA=16182,JA=16183,ZA=16184,eN=16185,tN=16186,rN=16187,nN=16188,iN=16189,vx=16190,El=16191,hv=16192,sN=16193,dv=16194,aN=16195,oN=16196,lN=16197,cN=16198,wg=16199,_g=16200,uN=16201,hN=16202,dN=16203,fN=16204,pN=16205,fv=16206,mN=16207,gN=16208,Yn=16209,JR=16210,ZR=16211,HK=852,$K=592,qK=15,WK=qK,xN=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function KK(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const kh=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<j2||e.mode>ZR?1:0},e8=t=>{if(kh(t))return ao;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=j2,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(HK),e.distcode=e.distdyn=new Int32Array($K),e.sane=1,e.back=-1,vh},t8=t=>{if(kh(t))return ao;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,e8(t)},r8=(t,e)=>{let r;if(kh(t))return ao;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ao:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,t8(t))},n8=(t,e)=>{if(!t)return ao;const r=new KK;t.state=r,r.strm=t,r.window=null,r.mode=j2;const n=r8(t,e);return n!==vh&&(t.state=null),n},GK=t=>n8(t,WK);let yN=!0,pv,mv;const YK=t=>{if(yN){pv=new Int32Array(512),mv=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(W0(GR,t.lens,0,288,pv,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;W0(YR,t.lens,0,32,mv,0,t.work,{bits:5}),yN=!1}t.lencode=pv,t.lenbits=9,t.distcode=mv,t.distbits=5},i8=(t,e,r,n)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(r-n,r-n+i),s.wnext),n-=i,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},XK=(t,e)=>{let r,n,i,s,a,o,l,c,h,d,p,f,v,x,_=0,w,S,N,j,z,W,b,T;const A=new Uint8Array(4);let F,k;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(kh(t)||!t.output||!t.input&&t.avail_in!==0)return ao;r=t.state,r.mode===El&&(r.mode=hv),a=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,c=r.hold,h=r.bits,d=o,p=l,T=vh;e:for(;;)switch(r.mode){case j2:if(r.wrap===0){r.mode=hv;break}for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,A[0]=c&255,A[1]=c>>>8&255,r.check=Ho(r.check,A,2,0),c=0,h=0,r.mode=XA;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=Yn;break}if((c&15)!==YA){t.msg="unknown compression method",r.mode=Yn;break}if(c>>>=4,h-=4,b=(c&15)+8,r.wbits===0&&(r.wbits=b),b>15||b>r.wbits){t.msg="invalid window size",r.mode=Yn;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=c&512?iN:El,c=0,h=0;break;case XA:for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(r.flags=c,(r.flags&255)!==YA){t.msg="unknown compression method",r.mode=Yn;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Yn;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(A[0]=c&255,A[1]=c>>>8&255,r.check=Ho(r.check,A,2,0)),c=0,h=0,r.mode=QA;case QA:for(;h<32;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(A[0]=c&255,A[1]=c>>>8&255,A[2]=c>>>16&255,A[3]=c>>>24&255,r.check=Ho(r.check,A,4,0)),c=0,h=0,r.mode=JA;case JA:for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(A[0]=c&255,A[1]=c>>>8&255,r.check=Ho(r.check,A,2,0)),c=0,h=0,r.mode=ZA;case ZA:if(r.flags&1024){for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(A[0]=c&255,A[1]=c>>>8&255,r.check=Ho(r.check,A,2,0)),c=0,h=0}else r.head&&(r.head.extra=null);r.mode=eN;case eN:if(r.flags&1024&&(f=r.length,f>o&&(f=o),f&&(r.head&&(b=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+f),b)),r.flags&512&&r.wrap&4&&(r.check=Ho(r.check,n,f,s)),o-=f,s+=f,r.length-=f),r.length))break e;r.length=0,r.mode=tN;case tN:if(r.flags&2048){if(o===0)break e;f=0;do b=n[s+f++],r.head&&b&&r.length<65536&&(r.head.name+=String.fromCharCode(b));while(b&&f<o);if(r.flags&512&&r.wrap&4&&(r.check=Ho(r.check,n,f,s)),o-=f,s+=f,b)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=rN;case rN:if(r.flags&4096){if(o===0)break e;f=0;do b=n[s+f++],r.head&&b&&r.length<65536&&(r.head.comment+=String.fromCharCode(b));while(b&&f<o);if(r.flags&512&&r.wrap&4&&(r.check=Ho(r.check,n,f,s)),o-=f,s+=f,b)break e}else r.head&&(r.head.comment=null);r.mode=nN;case nN:if(r.flags&512){for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(r.wrap&4&&c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Yn;break}c=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=El;break;case iN:for(;h<32;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}t.adler=r.check=xN(c),c=0,h=0,r.mode=vx;case vx:if(r.havedict===0)return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=c,r.bits=h,VK;t.adler=r.check=1,r.mode=El;case El:if(e===BK||e===vg)break e;case hv:if(r.last){c>>>=h&7,h-=h&7,r.mode=fv;break}for(;h<3;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}switch(r.last=c&1,c>>>=1,h-=1,c&3){case 0:r.mode=sN;break;case 1:if(YK(r),r.mode=wg,e===vg){c>>>=2,h-=2;break e}break;case 2:r.mode=oN;break;case 3:t.msg="invalid block type",r.mode=Yn}c>>>=2,h-=2;break;case sN:for(c>>>=h&7,h-=h&7;h<32;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Yn;break}if(r.length=c&65535,c=0,h=0,r.mode=dv,e===vg)break e;case dv:r.mode=aN;case aN:if(f=r.length,f){if(f>o&&(f=o),f>l&&(f=l),f===0)break e;i.set(n.subarray(s,s+f),a),o-=f,s+=f,l-=f,a+=f,r.length-=f;break}r.mode=El;break;case oN:for(;h<14;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(r.nlen=(c&31)+257,c>>>=5,h-=5,r.ndist=(c&31)+1,c>>>=5,h-=5,r.ncode=(c&15)+4,c>>>=4,h-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Yn;break}r.have=0,r.mode=lN;case lN:for(;r.have<r.ncode;){for(;h<3;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}r.lens[L[r.have++]]=c&7,c>>>=3,h-=3}for(;r.have<19;)r.lens[L[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,F={bits:r.lenbits},T=W0(OK,r.lens,0,19,r.lencode,0,r.work,F),r.lenbits=F.bits,T){t.msg="invalid code lengths set",r.mode=Yn;break}r.have=0,r.mode=cN;case cN:for(;r.have<r.nlen+r.ndist;){for(;_=r.lencode[c&(1<<r.lenbits)-1],w=_>>>24,S=_>>>16&255,N=_&65535,!(w<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(N<16)c>>>=w,h-=w,r.lens[r.have++]=N;else{if(N===16){for(k=w+2;h<k;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(c>>>=w,h-=w,r.have===0){t.msg="invalid bit length repeat",r.mode=Yn;break}b=r.lens[r.have-1],f=3+(c&3),c>>>=2,h-=2}else if(N===17){for(k=w+3;h<k;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}c>>>=w,h-=w,b=0,f=3+(c&7),c>>>=3,h-=3}else{for(k=w+7;h<k;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}c>>>=w,h-=w,b=0,f=11+(c&127),c>>>=7,h-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Yn;break}for(;f--;)r.lens[r.have++]=b}}if(r.mode===Yn)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Yn;break}if(r.lenbits=9,F={bits:r.lenbits},T=W0(GR,r.lens,0,r.nlen,r.lencode,0,r.work,F),r.lenbits=F.bits,T){t.msg="invalid literal/lengths set",r.mode=Yn;break}if(r.distbits=6,r.distcode=r.distdyn,F={bits:r.distbits},T=W0(YR,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,F),r.distbits=F.bits,T){t.msg="invalid distances set",r.mode=Yn;break}if(r.mode=wg,e===vg)break e;case wg:r.mode=_g;case _g:if(o>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=c,r.bits=h,RK(t,p),a=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,c=r.hold,h=r.bits,r.mode===El&&(r.back=-1);break}for(r.back=0;_=r.lencode[c&(1<<r.lenbits)-1],w=_>>>24,S=_>>>16&255,N=_&65535,!(w<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(S&&!(S&240)){for(j=w,z=S,W=N;_=r.lencode[W+((c&(1<<j+z)-1)>>j)],w=_>>>24,S=_>>>16&255,N=_&65535,!(j+w<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}c>>>=j,h-=j,r.back+=j}if(c>>>=w,h-=w,r.back+=w,r.length=N,S===0){r.mode=pN;break}if(S&32){r.back=-1,r.mode=El;break}if(S&64){t.msg="invalid literal/length code",r.mode=Yn;break}r.extra=S&15,r.mode=uN;case uN:if(r.extra){for(k=r.extra;h<k;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=hN;case hN:for(;_=r.distcode[c&(1<<r.distbits)-1],w=_>>>24,S=_>>>16&255,N=_&65535,!(w<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(!(S&240)){for(j=w,z=S,W=N;_=r.distcode[W+((c&(1<<j+z)-1)>>j)],w=_>>>24,S=_>>>16&255,N=_&65535,!(j+w<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}c>>>=j,h-=j,r.back+=j}if(c>>>=w,h-=w,r.back+=w,S&64){t.msg="invalid distance code",r.mode=Yn;break}r.offset=N,r.extra=S&15,r.mode=dN;case dN:if(r.extra){for(k=r.extra;h<k;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Yn;break}r.mode=fN;case fN:if(l===0)break e;if(f=p-l,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Yn;break}f>r.wnext?(f-=r.wnext,v=r.wsize-f):v=r.wnext-f,f>r.length&&(f=r.length),x=r.window}else x=i,v=a-r.offset,f=r.length;f>l&&(f=l),l-=f,r.length-=f;do i[a++]=x[v++];while(--f);r.length===0&&(r.mode=_g);break;case pN:if(l===0)break e;i[a++]=r.length,l--,r.mode=_g;break;case fv:if(r.wrap){for(;h<32;){if(o===0)break e;o--,c|=n[s++]<<h,h+=8}if(p-=l,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?Ho(r.check,i,p,a-p):S5(r.check,i,p,a-p)),p=l,r.wrap&4&&(r.flags?c:xN(c))!==r.check){t.msg="incorrect data check",r.mode=Yn;break}c=0,h=0}r.mode=mN;case mN:if(r.wrap&&r.flags){for(;h<32;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(r.wrap&4&&c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Yn;break}c=0,h=0}r.mode=gN;case gN:T=UK;break e;case Yn:T=XR;break e;case JR:return QR;case ZR:default:return ao}return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=c,r.bits=h,(r.wsize||p!==t.avail_out&&r.mode<Yn&&(r.mode<fv||e!==GA))&&i8(t,t.output,t.next_out,p-t.avail_out),d-=t.avail_in,p-=t.avail_out,t.total_in+=d,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?Ho(r.check,i,p,t.next_out-p):S5(r.check,i,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===El?128:0)+(r.mode===wg||r.mode===dv?256:0),(d===0&&p===0||e===GA)&&T===vh&&(T=zK),T},QK=t=>{if(kh(t))return ao;let e=t.state;return e.window&&(e.window=null),t.state=null,vh},JK=(t,e)=>{if(kh(t))return ao;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,vh):ao},ZK=(t,e)=>{const r=e.length;let n,i,s;return kh(t)||(n=t.state,n.wrap!==0&&n.mode!==vx)?ao:n.mode===vx&&(i=1,i=S5(i,e,r,0),i!==n.check)?XR:(s=i8(t,e,r,r),s?(n.mode=JR,QR):(n.havedict=1,vh))};var eG=t8,tG=r8,rG=e8,nG=GK,iG=n8,sG=XK,aG=QK,oG=JK,lG=ZK,cG="pako inflate (from Nodeca project)",Cl={inflateReset:eG,inflateReset2:tG,inflateResetKeep:rG,inflateInit:nG,inflateInit2:iG,inflate:sG,inflateEnd:aG,inflateGetHeader:oG,inflateSetDictionary:lG,inflateInfo:cG};function uG(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var hG=uG;const s8=Object.prototype.toString,{Z_NO_FLUSH:dG,Z_FINISH:fG,Z_OK:Dp,Z_STREAM_END:gv,Z_NEED_DICT:xv,Z_STREAM_ERROR:pG,Z_DATA_ERROR:vN,Z_MEM_ERROR:mG}=qR;function xm(t){this.options=WR.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new IK,this.strm.avail_out=0;let r=Cl.inflateInit2(this.strm,e.windowBits);if(r!==Dp)throw new Error(E5[r]);if(this.header=new hG,Cl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=A5.string2buf(e.dictionary):s8.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Cl.inflateSetDictionary(this.strm,e.dictionary),r!==Dp)))throw new Error(E5[r])}xm.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?fG:dG,s8.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=Cl.inflate(r,a),s===xv&&i&&(s=Cl.inflateSetDictionary(r,i),s===Dp?s=Cl.inflate(r,a):s===vN&&(s=xv));r.avail_in>0&&s===gv&&r.state.wrap>0&&t[r.next_in]!==0;)Cl.inflateReset(r),s=Cl.inflate(r,a);switch(s){case pG:case vN:case xv:case mG:return this.onEnd(s),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||s===gv))if(this.options.to==="string"){let l=A5.utf8border(r.output,r.next_out),c=r.next_out-l,h=A5.buf2string(r.output,l);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(l,l+c),0),this.onData(h)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===Dp&&o===0)){if(s===gv)return s=Cl.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};xm.prototype.onData=function(t){this.chunks.push(t)};xm.prototype.onEnd=function(t){t===Dp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=WR.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function gG(t,e){const r=new xm(e);if(r.push(t),r.err)throw r.msg||E5[r.err];return r.result}var xG=xm,yG=gG,vG={Inflate:xG,inflate:yG};const{Inflate:wG,inflate:_G}=vG;var wN=wG,bG=_G;const a8=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;a8[t]=e}const _N=4294967295;function SG(t,e,r){let n=t;for(let i=0;i<r;i++)n=a8[(n^e[i])&255]^n>>>8;return n}function EG(t,e){return(SG(_N,t,e)^_N)>>>0}function bN(t,e,r){const n=t.readUint32(),i=EG(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function o8(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function l8(t,e,r,n){let i=0;for(;i<n;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-n]&255}function c8(t,e,r,n){let i=0;if(r.length===0)for(;i<n;i++)e[i]=t[i];else for(;i<n;i++)e[i]=t[i]+r[i]&255}function u8(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-i]+r[s]>>1)&255}}function h8(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+AG(e[s-i],r[s],r[s-i])&255}}function AG(t,e,r){const n=t+e-r,i=Math.abs(n-t),s=Math.abs(n-e),a=Math.abs(n-r);return i<=s&&i<=a?t:s<=a?e:r}function NG(t,e,r,n,i,s){switch(t){case 0:o8(e,r,i);break;case 1:l8(e,r,i,s);break;case 2:c8(e,r,n,i);break;case 3:u8(e,r,n,i,s);break;case 4:h8(e,r,n,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const TG=new Uint16Array([255]),kG=new Uint8Array(TG.buffer),CG=kG[0]===255;function IG(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*i,l=new Uint8Array(n*r*o);let c=0;for(let h=0;h<7;h++){const d=a[h],p=Math.ceil((r-d.x)/d.xStep),f=Math.ceil((n-d.y)/d.yStep);if(p<=0||f<=0)continue;const v=p*o,x=new Uint8Array(v);for(let _=0;_<f;_++){const w=e[c++],S=e.subarray(c,c+v);c+=v;const N=new Uint8Array(v);NG(w,S,N,x,v,o),x.set(N);for(let j=0;j<p;j++){const z=d.x+j*d.xStep,W=d.y+_*d.yStep;if(!(z>=r||W>=n))for(let b=0;b<o;b++)l[(W*r+z)*o+b]=N[j*o+b]}}}if(s===16){const h=new Uint16Array(l.buffer);if(CG)for(let d=0;d<h.length;d++)h[d]=PG(h[d]);return h}else return l}function PG(t){return(t&255)<<8|t>>8&255}const RG=new Uint16Array([255]),LG=new Uint8Array(RG.buffer),jG=LG[0]===255,FG=new Uint8Array(0);function SN(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,a=Math.ceil(s/8)*i,o=Math.ceil(s/8*i*r),l=new Uint8Array(n*o);let c=FG,h=0,d,p;for(let f=0;f<n;f++){switch(d=e.subarray(h+1,h+1+o),p=l.subarray(f*o,(f+1)*o),e[h]){case 0:o8(d,p,o);break;case 1:l8(d,p,o,a);break;case 2:c8(d,p,c,o);break;case 3:u8(d,p,c,o,a);break;case 4:h8(d,p,c,o,a);break;default:throw new Error(`Unsupported filter: ${e[h]}`)}c=p,h+=o+1}if(s===16){const f=new Uint16Array(l.buffer);if(jG)for(let v=0;v<f.length;v++)f[v]=DG(f[v]);return f}else return l}function DG(t){return(t&255)<<8|t>>8&255}const g1=Uint8Array.of(137,80,78,71,13,10,26,10);function EN(t){if(!MG(t.readBytes(g1.length)))throw new Error("wrong PNG signature")}function MG(t){if(t.length<g1.length)return!1;for(let e=0;e<g1.length;e++)if(t[e]!==g1[e])return!1;return!0}const OG="tEXt",BG=0,d8=new TextDecoder("latin1");function UG(t){if(zG(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const VG=/^[\u0000-\u00FF]*$/;function zG(t){if(!VG.test(t))throw new Error("invalid latin1 text")}function HG(t,e,r){const n=f8(e);t[n]=$G(e,r-n.length-1)}function f8(t){for(t.mark();t.readByte()!==BG;);const e=t.offset;t.reset();const r=d8.decode(t.readBytes(e-t.offset-1));return t.skip(1),UG(r),r}function $G(t,e){return d8.decode(t.readBytes(e))}const ya={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},yv={UNKNOWN:-1,DEFLATE:0},AN={UNKNOWN:-1,ADAPTIVE:0},vv={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},bg={NONE:0,BACKGROUND:1,PREVIOUS:2},wv={SOURCE:0,OVER:1};class qG extends Xb{constructor(r,n={}){super(r);wn(this,"_checkCrc");wn(this,"_inflator");wn(this,"_png");wn(this,"_apng");wn(this,"_end");wn(this,"_hasPalette");wn(this,"_palette");wn(this,"_hasTransparency");wn(this,"_transparency");wn(this,"_compressionMethod");wn(this,"_filterMethod");wn(this,"_interlaceMethod");wn(this,"_colorType");wn(this,"_isAnimated");wn(this,"_numberOfFrames");wn(this,"_numberOfPlays");wn(this,"_frames");wn(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new wN,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=yv.UNKNOWN,this._filterMethod=AN.UNKNOWN,this._interlaceMethod=vv.UNKNOWN,this._colorType=ya.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(EN(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(EN(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case OG:HG(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?bN(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=i+r;break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?bN(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=WG(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case ya.GREYSCALE:i=1;break;case ya.TRUECOLOUR:i=3;break;case ya.INDEXED_COLOUR:i=1;break;case ya.GREYSCALE_ALPHA:i=2;break;case ya.TRUECOLOUR_ALPHA:i=4;break;case ya.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==yv.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<n;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case ya.GREYSCALE:case ya.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case ya.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ya.UNKNOWN:case ya.GREYSCALE_ALPHA:case ya.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=f8(this),i=this.readUint8();if(i!==yv.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:bG(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:r,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(r);if(i){if(i.data=SN({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(i,s,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,i){switch(r.disposeOp){case bg.NONE:break;case bg.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let a=0;a<this._png.width;a++){const o=(s*r.width+a)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[o+l]=0}break;case bg.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const i=1<<this._png.depth,s=(a,o)=>{const l=((a+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,c=(a*n.width+o)*this._png.channels;return{index:l,frameIndex:c}};switch(n.blendOp){case wv.SOURCE:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:c}=s(a,o);for(let h=0;h<this._png.channels;h++)r.data[l+h]=n.data[c+h]}break;case wv.OVER:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:c}=s(a,o);for(let h=0;h<this._png.channels;h++){const d=n.data[c+this._png.channels-1]/i,p=h%(this._png.channels-1)===0?1:n.data[c+h],f=Math.floor(d*p+(1-d)*r.data[l+h]);r.data[l+h]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==AN.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===vv.NO_INTERLACE)this._png.data=SN({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===vv.ADAM7)this._png.data=IG({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:bg.NONE,blendOp:wv.SOURCE,data:r}),this._inflator=new wN,this._writingDataChunks=!1}}function WG(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var NN;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(NN||(NN={}));function KG(t,e){return new qG(t,e).decode()}var Er=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function _v(){Er.console&&typeof Er.console.log=="function"&&Er.console.log.apply(Er.console,arguments)}var Fn={log:_v,warn:function(t){Er.console&&(typeof Er.console.warn=="function"?Er.console.warn.apply(Er.console,arguments):_v.call(null,arguments))},error:function(t){Er.console&&(typeof Er.console.error=="function"?Er.console.error.apply(Er.console,arguments):_v(t))}};function bv(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){zu(n.response,e,r)},n.onerror=function(){Fn.error("could not download file")},n.send()}function TN(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Sg(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var zu=Er.saveAs||((typeof window>"u"?"undefined":Sn(window))!=="object"||window!==Er?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Er.URL||Er.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?TN(i.href)?bv(t,e,r):Sg(i,i.target="_blank"):Sg(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Sg(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(TN(t))bv(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Sg(n)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Sn(s)!=="object"&&(Fn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return bv(t,e,r);var i=t.type==="application/octet-stream",s=/constructor/i.test(Er.HTMLElement)||Er.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Sn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var h=o.result;h=a?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=h:location=h,n=null},o.readAsDataURL(t)}else{var l=Er.URL||Er.webkitURL,c=l.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function p8(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,s=r[n].process,a=i.exec(t);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}var x1=Er.atob.bind(Er),kN=Er.btoa.bind(Er);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Sv(t,e){var r=t[0],n=t[1],i=t[2],s=t[3];r=Ss(r,n,i,s,e[0],7,-680876936),s=Ss(s,r,n,i,e[1],12,-389564586),i=Ss(i,s,r,n,e[2],17,606105819),n=Ss(n,i,s,r,e[3],22,-1044525330),r=Ss(r,n,i,s,e[4],7,-176418897),s=Ss(s,r,n,i,e[5],12,1200080426),i=Ss(i,s,r,n,e[6],17,-1473231341),n=Ss(n,i,s,r,e[7],22,-45705983),r=Ss(r,n,i,s,e[8],7,1770035416),s=Ss(s,r,n,i,e[9],12,-1958414417),i=Ss(i,s,r,n,e[10],17,-42063),n=Ss(n,i,s,r,e[11],22,-1990404162),r=Ss(r,n,i,s,e[12],7,1804603682),s=Ss(s,r,n,i,e[13],12,-40341101),i=Ss(i,s,r,n,e[14],17,-1502002290),r=Es(r,n=Ss(n,i,s,r,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Es(s,r,n,i,e[6],9,-1069501632),i=Es(i,s,r,n,e[11],14,643717713),n=Es(n,i,s,r,e[0],20,-373897302),r=Es(r,n,i,s,e[5],5,-701558691),s=Es(s,r,n,i,e[10],9,38016083),i=Es(i,s,r,n,e[15],14,-660478335),n=Es(n,i,s,r,e[4],20,-405537848),r=Es(r,n,i,s,e[9],5,568446438),s=Es(s,r,n,i,e[14],9,-1019803690),i=Es(i,s,r,n,e[3],14,-187363961),n=Es(n,i,s,r,e[8],20,1163531501),r=Es(r,n,i,s,e[13],5,-1444681467),s=Es(s,r,n,i,e[2],9,-51403784),i=Es(i,s,r,n,e[7],14,1735328473),r=As(r,n=Es(n,i,s,r,e[12],20,-1926607734),i,s,e[5],4,-378558),s=As(s,r,n,i,e[8],11,-2022574463),i=As(i,s,r,n,e[11],16,1839030562),n=As(n,i,s,r,e[14],23,-35309556),r=As(r,n,i,s,e[1],4,-1530992060),s=As(s,r,n,i,e[4],11,1272893353),i=As(i,s,r,n,e[7],16,-155497632),n=As(n,i,s,r,e[10],23,-1094730640),r=As(r,n,i,s,e[13],4,681279174),s=As(s,r,n,i,e[0],11,-358537222),i=As(i,s,r,n,e[3],16,-722521979),n=As(n,i,s,r,e[6],23,76029189),r=As(r,n,i,s,e[9],4,-640364487),s=As(s,r,n,i,e[12],11,-421815835),i=As(i,s,r,n,e[15],16,530742520),r=Ns(r,n=As(n,i,s,r,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Ns(s,r,n,i,e[7],10,1126891415),i=Ns(i,s,r,n,e[14],15,-1416354905),n=Ns(n,i,s,r,e[5],21,-57434055),r=Ns(r,n,i,s,e[12],6,1700485571),s=Ns(s,r,n,i,e[3],10,-1894986606),i=Ns(i,s,r,n,e[10],15,-1051523),n=Ns(n,i,s,r,e[1],21,-2054922799),r=Ns(r,n,i,s,e[8],6,1873313359),s=Ns(s,r,n,i,e[15],10,-30611744),i=Ns(i,s,r,n,e[6],15,-1560198380),n=Ns(n,i,s,r,e[13],21,1309151649),r=Ns(r,n,i,s,e[4],6,-145523070),s=Ns(s,r,n,i,e[11],10,-1120210379),i=Ns(i,s,r,n,e[2],15,718787259),n=Ns(n,i,s,r,e[9],21,-343485551),t[0]=qc(r,t[0]),t[1]=qc(n,t[1]),t[2]=qc(i,t[2]),t[3]=qc(s,t[3])}function F2(t,e,r,n,i,s){return e=qc(qc(e,t),qc(n,s)),qc(e<<i|e>>>32-i,r)}function Ss(t,e,r,n,i,s,a){return F2(e&r|~e&n,t,e,i,s,a)}function Es(t,e,r,n,i,s,a){return F2(e&n|r&~n,t,e,i,s,a)}function As(t,e,r,n,i,s,a){return F2(e^r^n,t,e,i,s,a)}function Ns(t,e,r,n,i,s,a){return F2(r^(e|~n),t,e,i,s,a)}function m8(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Sv(n,GG(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Sv(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,Sv(n,i),n}function GG(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var CN="0123456789abcdef".split("");function YG(t){for(var e="",r=0;r<4;r++)e+=CN[t>>8*r+4&15]+CN[t>>8*r&15];return e}function XG(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function N5(t){return m8(t).map(XG).join("")}var QG=function(t){for(var e=0;e<t.length;e++)t[e]=YG(t[e]);return t.join("")}(m8("hello"))!="5d41402abc4b2a76b9719d911017c592";function qc(t,e){if(QG){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function T5(t,e){var r,n,i,s;if(t!==r){for(var a=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var h=o[l];c=(c+h+a.charCodeAt(l))%256,o[l]=o[c],o[c]=h}r=t,n=o}else o=n;var d=e.length,p=0,f=0,v="";for(l=0;l<d;l++)f=(f+(h=o[p=(p+1)%256]))%256,o[p]=o[f],o[f]=h,a=o[(o[p]+o[f])%256],v+=String.fromCharCode(e.charCodeAt(l)^a);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var IN={print:4,modify:8,copy:16,"annot-forms":32};function Zh(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(IN.perm!==void 0)throw new Error("Invalid permission: "+o);i+=IN[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=N5(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=T5(this.encryptionKey,this.padding)}function ed(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[n]}return e}function PN(t){if(Sn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!i],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[r]){var a=e[r][s];try{a[0].apply(t,n)}catch(o){Er.console&&Fn.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function wx(t){if(!(this instanceof wx))return new wx(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function g8(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function $u(t,e,r,n,i){if(!(this instanceof $u))return new $u(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,g8.call(this,n,i)}function Sd(t,e,r,n,i){if(!(this instanceof Sd))return new Sd(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,g8.call(this,n,i)}function ur(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,c="S",h=null;Sn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,s=t.compress||t.compressPdf||s,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,p={},f={internal:{},__private__:{}};f.__private__.PubSub=PN;var v="1.3",x=f.__private__.getPdfVersion=function(){return v};f.__private__.setPdfVersion=function(E){v=E};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return _};var w=f.__private__.getPageFormat=function(E){return _[E]};i=i||"a4";var S="compat",N="advanced",j=S;function z(){this.saveGraphicsState(),ae(new nr(Ot,0,0,-Ot,0,dr()*Ot).toString()+" cm"),this.setFontSize(this.getFontSize()/Ot),c="n",j=N}function W(){this.restoreGraphicsState(),c="S",j=S}var b=f.__private__.combineFontStyleAndFontWeight=function(E,V){if(E=="bold"&&V=="normal"||E=="bold"&&V==400||E=="normal"&&V=="italic"||E=="bold"&&V=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return V&&(E=V==400||V==="normal"?E==="italic"?"italic":"normal":V!=700&&V!=="bold"||E!=="normal"?(V==700?"bold":V)+""+E:"bold"),E};f.advancedAPI=function(E){var V=j===S;return V&&z.call(this),typeof E!="function"||(E(this),V&&W.call(this)),this},f.compatAPI=function(E){var V=j===N;return V&&W.call(this),typeof E!="function"||(E(this),V&&z.call(this)),this},f.isAdvancedAPI=function(){return j===N};var T,A=function(E){if(j!==N)throw new Error(E+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=f.roundToPrecision=f.__private__.roundToPrecision=function(E,V){var ue=e||V;if(isNaN(E)||isNaN(ue))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return E.toFixed(ue).replace(/0+$/,"")};T=f.hpf=f.__private__.hpf=typeof l=="number"?function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return F(E,l)}:l==="smart"?function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return F(E,E>-1&&E<1?16:5)}:function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return F(E,16)};var k=f.f2=f.__private__.f2=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.f2");return F(E,2)},L=f.__private__.f3=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.f3");return F(E,3)},R=f.scale=f.__private__.scale=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.scale");return j===S?E*Ot:j===N?E:void 0},le=function(E){return R(function(V){return j===S?dr()-V:j===N?V:void 0}(E))};f.__private__.setPrecision=f.setPrecision=function(E){typeof parseInt(E,10)=="number"&&(e=parseInt(E,10))};var ve,ge="00000000000000000000000000000000",ye=f.__private__.getFileId=function(){return ge},ce=f.__private__.setFileId=function(E){return ge=E!==void 0&&/^[a-fA-F0-9]{32}$/.test(E)?E.toUpperCase():ge.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(Pn=new Zh(h.userPermissions,h.userPassword,h.ownerPassword,ge)),ge};f.setFileId=function(E){return ce(E),this},f.getFileId=function(){return ye()};var be=f.__private__.convertDateToPDFDate=function(E){var V=E.getTimezoneOffset(),ue=V<0?"+":"-",Se=Math.floor(Math.abs(V/60)),Be=Math.abs(V%60),Ce=[ue,U(Se),"'",U(Be),"'"].join("");return["D:",E.getFullYear(),U(E.getMonth()+1),U(E.getDate()),U(E.getHours()),U(E.getMinutes()),U(E.getSeconds()),Ce].join("")},Me=f.__private__.convertPDFDateToDate=function(E){var V=parseInt(E.substr(2,4),10),ue=parseInt(E.substr(6,2),10)-1,Se=parseInt(E.substr(8,2),10),Be=parseInt(E.substr(10,2),10),Ce=parseInt(E.substr(12,2),10),Ye=parseInt(E.substr(14,2),10);return new Date(V,ue,Se,Be,Ce,Ye,0)},Le=f.__private__.setCreationDate=function(E){var V;if(E===void 0&&(E=new Date),E instanceof Date)V=be(E);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(E))throw new Error("Invalid argument passed to jsPDF.setCreationDate");V=E}return ve=V},I=f.__private__.getCreationDate=function(E){var V=ve;return E==="jsDate"&&(V=Me(ve)),V};f.setCreationDate=function(E){return Le(E),this},f.getCreationDate=function(E){return I(E)};var B,U=f.__private__.padd2=function(E){return("0"+parseInt(E)).slice(-2)},H=f.__private__.padd2Hex=function(E){return("00"+(E=E.toString())).substr(E.length)},te=0,fe=[],Ae=[],Te=0,Pe=[],et=[],Qe=!1,dt=Ae;f.__private__.setCustomOutputDestination=function(E){Qe=!0,dt=E};var wt=function(E){Qe||(dt=E)};f.__private__.resetCustomOutputDestination=function(){Qe=!1,dt=Ae};var ae=f.__private__.out=function(E){return E=E.toString(),Te+=E.length+1,dt.push(E),dt},Ie=f.__private__.write=function(E){return ae(arguments.length===1?E.toString():Array.prototype.join.call(arguments," "))},ne=f.__private__.getArrayBuffer=function(E){for(var V=E.length,ue=new ArrayBuffer(V),Se=new Uint8Array(ue);V--;)Se[V]=E.charCodeAt(V);return ue},we=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return we};var me=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(E){return me=j===N?E/Ot:E,this};var Ke,Je=f.__private__.getFontSize=f.getFontSize=function(){return j===S?me:me*Ot},ct=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(E){return ct=E,this},f.__private__.getR2L=f.getR2L=function(){return ct};var Et,Bt=f.__private__.setZoomMode=function(E){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(E))Ke=E;else if(isNaN(E)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(E)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+E+'" is not recognized.');Ke=E}else Ke=parseInt(E,10)};f.__private__.getZoomMode=function(){return Ke};var Ee,it=f.__private__.setPageMode=function(E){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(E)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+E+'" is not recognized.');Et=E};f.__private__.getPageMode=function(){return Et};var mt=f.__private__.setLayoutMode=function(E){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(E)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+E+'" is not recognized.');Ee=E};f.__private__.getLayoutMode=function(){return Ee},f.__private__.setDisplayMode=f.setDisplayMode=function(E,V,ue){return Bt(E),mt(V),it(ue),this};var bt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(E){if(Object.keys(bt).indexOf(E)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return bt[E]},f.__private__.getDocumentProperties=function(){return bt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(E){for(var V in bt)bt.hasOwnProperty(V)&&E[V]&&(bt[V]=E[V]);return this},f.__private__.setDocumentProperty=function(E,V){if(Object.keys(bt).indexOf(E)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return bt[E]=V};var Rt,Ot,Vt,Vr,mr,qe={},Ft={},wr=[],Gt={},Rr={},rr={},Zt={},zr=null,$t=0,Ze=[],It=new PN(f),cn=t.hotfixes||[],kr={},vr={},dn=[],nr=function E(V,ue,Se,Be,Ce,Ye){if(!(this instanceof E))return new E(V,ue,Se,Be,Ce,Ye);isNaN(V)&&(V=1),isNaN(ue)&&(ue=0),isNaN(Se)&&(Se=0),isNaN(Be)&&(Be=1),isNaN(Ce)&&(Ce=0),isNaN(Ye)&&(Ye=0),this._matrix=[V,ue,Se,Be,Ce,Ye]};Object.defineProperty(nr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(E){this._matrix[0]=E}}),Object.defineProperty(nr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(E){this._matrix[1]=E}}),Object.defineProperty(nr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(E){this._matrix[2]=E}}),Object.defineProperty(nr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(E){this._matrix[3]=E}}),Object.defineProperty(nr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(E){this._matrix[4]=E}}),Object.defineProperty(nr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(E){this._matrix[5]=E}}),Object.defineProperty(nr.prototype,"a",{get:function(){return this._matrix[0]},set:function(E){this._matrix[0]=E}}),Object.defineProperty(nr.prototype,"b",{get:function(){return this._matrix[1]},set:function(E){this._matrix[1]=E}}),Object.defineProperty(nr.prototype,"c",{get:function(){return this._matrix[2]},set:function(E){this._matrix[2]=E}}),Object.defineProperty(nr.prototype,"d",{get:function(){return this._matrix[3]},set:function(E){this._matrix[3]=E}}),Object.defineProperty(nr.prototype,"e",{get:function(){return this._matrix[4]},set:function(E){this._matrix[4]=E}}),Object.defineProperty(nr.prototype,"f",{get:function(){return this._matrix[5]},set:function(E){this._matrix[5]=E}}),Object.defineProperty(nr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nr.prototype.join=function(E){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(E)},nr.prototype.multiply=function(E){var V=E.sx*this.sx+E.shy*this.shx,ue=E.sx*this.shy+E.shy*this.sy,Se=E.shx*this.sx+E.sy*this.shx,Be=E.shx*this.shy+E.sy*this.sy,Ce=E.tx*this.sx+E.ty*this.shx+this.tx,Ye=E.tx*this.shy+E.ty*this.sy+this.ty;return new nr(V,ue,Se,Be,Ce,Ye)},nr.prototype.decompose=function(){var E=this.sx,V=this.shy,ue=this.shx,Se=this.sy,Be=this.tx,Ce=this.ty,Ye=Math.sqrt(E*E+V*V),Ut=(E/=Ye)*ue+(V/=Ye)*Se;ue-=E*Ut,Se-=V*Ut;var Wt=Math.sqrt(ue*ue+Se*Se);return Ut/=Wt,E*(Se/=Wt)<V*(ue/=Wt)&&(E=-E,V=-V,Ut=-Ut,Ye=-Ye),{scale:new nr(Ye,0,0,Wt,0,0),translate:new nr(1,0,0,1,Be,Ce),rotate:new nr(E,V,-V,E,0,0),skew:new nr(1,0,Ut,1,0,0)}},nr.prototype.toString=function(E){return this.join(" ")},nr.prototype.inversed=function(){var E=this.sx,V=this.shy,ue=this.shx,Se=this.sy,Be=this.tx,Ce=this.ty,Ye=1/(E*Se-V*ue),Ut=Se*Ye,Wt=-V*Ye,kt=-ue*Ye,Qt=E*Ye;return new nr(Ut,Wt,kt,Qt,-Ut*Be-kt*Ce,-Wt*Be-Qt*Ce)},nr.prototype.applyToPoint=function(E){var V=E.x*this.sx+E.y*this.shx+this.tx,ue=E.x*this.shy+E.y*this.sy+this.ty;return new Tt(V,ue)},nr.prototype.applyToRectangle=function(E){var V=this.applyToPoint(E),ue=this.applyToPoint(new Tt(E.x+E.w,E.y+E.h));return new Ur(V.x,V.y,ue.x-V.x,ue.y-V.y)},nr.prototype.clone=function(){var E=this.sx,V=this.shy,ue=this.shx,Se=this.sy,Be=this.tx,Ce=this.ty;return new nr(E,V,ue,Se,Be,Ce)},f.Matrix=nr;var zn=f.matrixMult=function(E,V){return V.multiply(E)},on=new nr(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=on;var xe=function(E,V){if(!Rr[E]){var ue=(V instanceof $u?"Sh":"P")+(Object.keys(Gt).length+1).toString(10);V.id=ue,Rr[E]=ue,Gt[ue]=V,It.publish("addPattern",V)}};f.ShadingPattern=$u,f.TilingPattern=Sd,f.addShadingPattern=function(E,V){return A("addShadingPattern()"),xe(E,V),this},f.beginTilingPattern=function(E){A("beginTilingPattern()"),qr(E.boundingBox[0],E.boundingBox[1],E.boundingBox[2]-E.boundingBox[0],E.boundingBox[3]-E.boundingBox[1],E.matrix)},f.endTilingPattern=function(E,V){A("endTilingPattern()"),V.stream=et[B].join(`
`),xe(E,V),It.publish("endTilingPattern",V),dn.pop().restore()};var Re,Ve=f.__private__.newObject=function(){var E=tt();return O(E,!0),E},tt=f.__private__.newObjectDeferred=function(){return te++,fe[te]=function(){return Te},te},O=function(E,V){return V=typeof V=="boolean"&&V,fe[E]=Te,V&&ae(E+" 0 obj"),E},Z=f.__private__.newAdditionalObject=function(){var E={objId:tt(),content:""};return Pe.push(E),E},G=tt(),Y=tt(),ee=f.__private__.decodeColorString=function(E){var V=E.split(" ");if(V.length!==2||V[1]!=="g"&&V[1]!=="G")V.length!==5||V[4]!=="k"&&V[4]!=="K"||(V=[(1-V[0])*(1-V[3]),(1-V[1])*(1-V[3]),(1-V[2])*(1-V[3]),"r"]);else{var ue=parseFloat(V[0]);V=[ue,ue,ue,"r"]}for(var Se="#",Be=0;Be<3;Be++)Se+=("0"+Math.floor(255*parseFloat(V[Be])).toString(16)).slice(-2);return Se},re=f.__private__.encodeColorString=function(E){var V;typeof E=="string"&&(E={ch1:E});var ue=E.ch1,Se=E.ch2,Be=E.ch3,Ce=E.ch4,Ye=E.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ue=="string"&&ue.charAt(0)!=="#"){var Ut=new p8(ue);if(Ut.ok)ue=Ut.toHex();else if(!/^\d*\.?\d*$/.test(ue))throw new Error('Invalid color "'+ue+'" passed to jsPDF.encodeColorString.')}if(typeof ue=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ue)&&(ue="#"+ue[1]+ue[1]+ue[2]+ue[2]+ue[3]+ue[3]),typeof ue=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ue)){var Wt=parseInt(ue.substr(1),16);ue=Wt>>16&255,Se=Wt>>8&255,Be=255&Wt}if(Se===void 0||Ce===void 0&&ue===Se&&Se===Be)V=typeof ue=="string"?ue+" "+Ye[0]:E.precision===2?k(ue/255)+" "+Ye[0]:L(ue/255)+" "+Ye[0];else if(Ce===void 0||Sn(Ce)==="object"){if(Ce&&!isNaN(Ce.a)&&Ce.a===0)return["1.","1.","1.",Ye[1]].join(" ");V=typeof ue=="string"?[ue,Se,Be,Ye[1]].join(" "):E.precision===2?[k(ue/255),k(Se/255),k(Be/255),Ye[1]].join(" "):[L(ue/255),L(Se/255),L(Be/255),Ye[1]].join(" ")}else V=typeof ue=="string"?[ue,Se,Be,Ce,Ye[2]].join(" "):E.precision===2?[k(ue),k(Se),k(Be),k(Ce),Ye[2]].join(" "):[L(ue),L(Se),L(Be),L(Ce),Ye[2]].join(" ");return V},ke=f.__private__.getFilters=function(){return a},pe=f.__private__.putStream=function(E){var V=(E=E||{}).data||"",ue=E.filters||ke(),Se=E.alreadyAppliedFilters||[],Be=E.addLength1||!1,Ce=V.length,Ye=E.objectId,Ut=function(P){return P};if(h!==null&&Ye===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Ut=Pn.encryptor(Ye,0));var Wt={};ue===!0&&(ue=["FlateEncode"]);var kt=E.additionalKeyValues||[],Qt=(Wt=ur.API.processDataByFilters!==void 0?ur.API.processDataByFilters(V,ue):{data:V,reverseChain:[]}).reverseChain+(Array.isArray(Se)?Se.join(" "):Se.toString());if(Wt.data.length!==0&&(kt.push({key:"Length",value:Wt.data.length}),Be===!0&&kt.push({key:"Length1",value:Ce})),Qt.length!=0)if(Qt.split("/").length-1==1)kt.push({key:"Filter",value:Qt});else{kt.push({key:"Filter",value:"["+Qt+"]"});for(var Or=0;Or<kt.length;Or+=1)if(kt[Or].key==="DecodeParms"){for(var fn=[],xn=0;xn<Wt.reverseChain.split("/").length-1;xn+=1)fn.push("null");fn.push(kt[Or].value),kt[Or].value="["+fn.join(" ")+"]"}}ae("<<");for(var g=0;g<kt.length;g++)ae("/"+kt[g].key+" "+kt[g].value);ae(">>"),Wt.data.length!==0&&(ae("stream"),ae(Ut(Wt.data)),ae("endstream"))},Ne=f.__private__.putPage=function(E){var V=E.number,ue=E.data,Se=E.objId,Be=E.contentsObjId;O(Se,!0),ae("<</Type /Page"),ae("/Parent "+E.rootDictionaryObjId+" 0 R"),ae("/Resources "+E.resourceDictionaryObjId+" 0 R"),ae("/MediaBox ["+parseFloat(T(E.mediaBox.bottomLeftX))+" "+parseFloat(T(E.mediaBox.bottomLeftY))+" "+T(E.mediaBox.topRightX)+" "+T(E.mediaBox.topRightY)+"]"),E.cropBox!==null&&ae("/CropBox ["+T(E.cropBox.bottomLeftX)+" "+T(E.cropBox.bottomLeftY)+" "+T(E.cropBox.topRightX)+" "+T(E.cropBox.topRightY)+"]"),E.bleedBox!==null&&ae("/BleedBox ["+T(E.bleedBox.bottomLeftX)+" "+T(E.bleedBox.bottomLeftY)+" "+T(E.bleedBox.topRightX)+" "+T(E.bleedBox.topRightY)+"]"),E.trimBox!==null&&ae("/TrimBox ["+T(E.trimBox.bottomLeftX)+" "+T(E.trimBox.bottomLeftY)+" "+T(E.trimBox.topRightX)+" "+T(E.trimBox.topRightY)+"]"),E.artBox!==null&&ae("/ArtBox ["+T(E.artBox.bottomLeftX)+" "+T(E.artBox.bottomLeftY)+" "+T(E.artBox.topRightX)+" "+T(E.artBox.topRightY)+"]"),typeof E.userUnit=="number"&&E.userUnit!==1&&ae("/UserUnit "+E.userUnit),It.publish("putPage",{objId:Se,pageContext:Ze[V],pageNumber:V,page:ue}),ae("/Contents "+Be+" 0 R"),ae(">>"),ae("endobj");var Ce=ue.join(`
`);return j===N&&(Ce+=`
Q`),O(Be,!0),pe({data:Ce,filters:ke(),objectId:Be}),ae("endobj"),Se},je=f.__private__.putPages=function(){var E,V,ue=[];for(E=1;E<=$t;E++)Ze[E].objId=tt(),Ze[E].contentsObjId=tt();for(E=1;E<=$t;E++)ue.push(Ne({number:E,data:et[E],objId:Ze[E].objId,contentsObjId:Ze[E].contentsObjId,mediaBox:Ze[E].mediaBox,cropBox:Ze[E].cropBox,bleedBox:Ze[E].bleedBox,trimBox:Ze[E].trimBox,artBox:Ze[E].artBox,userUnit:Ze[E].userUnit,rootDictionaryObjId:G,resourceDictionaryObjId:Y}));O(G,!0),ae("<</Type /Pages");var Se="/Kids [";for(V=0;V<$t;V++)Se+=ue[V]+" 0 R ";ae(Se+"]"),ae("/Count "+$t),ae(">>"),ae("endobj"),It.publish("postPutPages")},Oe=function(E){It.publish("putFont",{font:E,out:ae,newObject:Ve,putStream:pe}),E.isAlreadyPutted!==!0&&(E.objectNumber=Ve(),ae("<<"),ae("/Type /Font"),ae("/BaseFont /"+ed(E.postScriptName)),ae("/Subtype /Type1"),typeof E.encoding=="string"&&ae("/Encoding /"+E.encoding),ae("/FirstChar 32"),ae("/LastChar 255"),ae(">>"),ae("endobj"))},st=function(E){E.objectNumber=Ve();var V=[];V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Form"}),V.push({key:"BBox",value:"["+[T(E.x),T(E.y),T(E.x+E.width),T(E.y+E.height)].join(" ")+"]"}),V.push({key:"Matrix",value:"["+E.matrix.toString()+"]"});var ue=E.pages[1].join(`
`);pe({data:ue,additionalKeyValues:V,objectId:E.objectNumber}),ae("endobj")},pt=function(E,V){V||(V=21);var ue=Ve(),Se=function(Ye,Ut){var Wt,kt=[],Qt=1/(Ut-1);for(Wt=0;Wt<1;Wt+=Qt)kt.push(Wt);if(kt.push(1),Ye[0].offset!=0){var Or={offset:0,color:Ye[0].color};Ye.unshift(Or)}if(Ye[Ye.length-1].offset!=1){var fn={offset:1,color:Ye[Ye.length-1].color};Ye.push(fn)}for(var xn="",g=0,P=0;P<kt.length;P++){for(Wt=kt[P];Wt>Ye[g+1].offset;)g++;var M=Ye[g].offset,se=(Wt-M)/(Ye[g+1].offset-M),ze=Ye[g].color,Xe=Ye[g+1].color;xn+=H(Math.round((1-se)*ze[0]+se*Xe[0]).toString(16))+H(Math.round((1-se)*ze[1]+se*Xe[1]).toString(16))+H(Math.round((1-se)*ze[2]+se*Xe[2]).toString(16))}return xn.trim()}(E.colors,V),Be=[];Be.push({key:"FunctionType",value:"0"}),Be.push({key:"Domain",value:"[0.0 1.0]"}),Be.push({key:"Size",value:"["+V+"]"}),Be.push({key:"BitsPerSample",value:"8"}),Be.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Be.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pe({data:Se,additionalKeyValues:Be,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ue}),ae("endobj"),E.objectNumber=Ve(),ae("<< /ShadingType "+E.type),ae("/ColorSpace /DeviceRGB");var Ce="/Coords ["+T(parseFloat(E.coords[0]))+" "+T(parseFloat(E.coords[1]))+" ";E.type===2?Ce+=T(parseFloat(E.coords[2]))+" "+T(parseFloat(E.coords[3])):Ce+=T(parseFloat(E.coords[2]))+" "+T(parseFloat(E.coords[3]))+" "+T(parseFloat(E.coords[4]))+" "+T(parseFloat(E.coords[5])),ae(Ce+="]"),E.matrix&&ae("/Matrix ["+E.matrix.toString()+"]"),ae("/Function "+ue+" 0 R"),ae("/Extend [true true]"),ae(">>"),ae("endobj")},gt=function(E,V){var ue=tt(),Se=Ve();V.push({resourcesOid:ue,objectOid:Se}),E.objectNumber=Se;var Be=[];Be.push({key:"Type",value:"/Pattern"}),Be.push({key:"PatternType",value:"1"}),Be.push({key:"PaintType",value:"1"}),Be.push({key:"TilingType",value:"1"}),Be.push({key:"BBox",value:"["+E.boundingBox.map(T).join(" ")+"]"}),Be.push({key:"XStep",value:T(E.xStep)}),Be.push({key:"YStep",value:T(E.yStep)}),Be.push({key:"Resources",value:ue+" 0 R"}),E.matrix&&Be.push({key:"Matrix",value:"["+E.matrix.toString()+"]"}),pe({data:E.stream,additionalKeyValues:Be,objectId:E.objectNumber}),ae("endobj")},ft=function(E){for(var V in E.objectNumber=Ve(),ae("<<"),E)switch(V){case"opacity":ae("/ca "+k(E[V]));break;case"stroke-opacity":ae("/CA "+k(E[V]))}ae(">>"),ae("endobj")},At=function(E){O(E.resourcesOid,!0),ae("<<"),ae("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var V in ae("/Font <<"),qe)qe.hasOwnProperty(V)&&(d===!1||d===!0&&p.hasOwnProperty(V))&&ae("/"+V+" "+qe[V].objectNumber+" 0 R");ae(">>")}(),function(){if(Object.keys(Gt).length>0){for(var V in ae("/Shading <<"),Gt)Gt.hasOwnProperty(V)&&Gt[V]instanceof $u&&Gt[V].objectNumber>=0&&ae("/"+V+" "+Gt[V].objectNumber+" 0 R");It.publish("putShadingPatternDict"),ae(">>")}}(),function(V){if(Object.keys(Gt).length>0){for(var ue in ae("/Pattern <<"),Gt)Gt.hasOwnProperty(ue)&&Gt[ue]instanceof f.TilingPattern&&Gt[ue].objectNumber>=0&&Gt[ue].objectNumber<V&&ae("/"+ue+" "+Gt[ue].objectNumber+" 0 R");It.publish("putTilingPatternDict"),ae(">>")}}(E.objectOid),function(){if(Object.keys(rr).length>0){var V;for(V in ae("/ExtGState <<"),rr)rr.hasOwnProperty(V)&&rr[V].objectNumber>=0&&ae("/"+V+" "+rr[V].objectNumber+" 0 R");It.publish("putGStateDict"),ae(">>")}}(),function(){for(var V in ae("/XObject <<"),kr)kr.hasOwnProperty(V)&&kr[V].objectNumber>=0&&ae("/"+V+" "+kr[V].objectNumber+" 0 R");It.publish("putXobjectDict"),ae(">>")}(),ae(">>"),ae("endobj")},er=function(E){Ft[E.fontName]=Ft[E.fontName]||{},Ft[E.fontName][E.fontStyle]=E.id},_r=function(E,V,ue,Se,Be){var Ce={id:"F"+(Object.keys(qe).length+1).toString(10),postScriptName:E,fontName:V,fontStyle:ue,encoding:Se,isStandardFont:Be||!1,metadata:{}};return It.publish("addFont",{font:Ce,instance:this}),qe[Ce.id]=Ce,er(Ce),Ce.id},pr=f.__private__.pdfEscape=f.pdfEscape=function(E,V){return function(ue,Se){var Be,Ce,Ye,Ut,Wt,kt,Qt,Or,fn;if(Ye=(Se=Se||{}).sourceEncoding||"Unicode",Wt=Se.outputEncoding,(Se.autoencode||Wt)&&qe[Rt].metadata&&qe[Rt].metadata[Ye]&&qe[Rt].metadata[Ye].encoding&&(Ut=qe[Rt].metadata[Ye].encoding,!Wt&&qe[Rt].encoding&&(Wt=qe[Rt].encoding),!Wt&&Ut.codePages&&(Wt=Ut.codePages[0]),typeof Wt=="string"&&(Wt=Ut[Wt]),Wt)){for(Qt=!1,kt=[],Be=0,Ce=ue.length;Be<Ce;Be++)(Or=Wt[ue.charCodeAt(Be)])?kt.push(String.fromCharCode(Or)):kt.push(ue[Be]),kt[Be].charCodeAt(0)>>8&&(Qt=!0);ue=kt.join("")}for(Be=ue.length;Qt===void 0&&Be!==0;)ue.charCodeAt(Be-1)>>8&&(Qt=!0),Be--;if(!Qt)return ue;for(kt=Se.noBOM?[]:[254,255],Be=0,Ce=ue.length;Be<Ce;Be++){if((fn=(Or=ue.charCodeAt(Be))>>8)>>8)throw new Error("Character at position "+Be+" of string '"+ue+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");kt.push(fn),kt.push(Or-(fn<<8))}return String.fromCharCode.apply(void 0,kt)}(E,V).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},en=f.__private__.beginPage=function(E){et[++$t]=[],Ze[$t]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(E[0]),topRightY:Number(E[1])}},Dn($t),wt(et[B])},mn=function(E,V){var ue,Se,Be;switch(r=V||r,typeof E=="string"&&(ue=w(E.toLowerCase()),Array.isArray(ue)&&(Se=ue[0],Be=ue[1])),Array.isArray(E)&&(Se=E[0]*Ot,Be=E[1]*Ot),isNaN(Se)&&(Se=i[0],Be=i[1]),(Se>14400||Be>14400)&&(Fn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Se=Math.min(14400,Se),Be=Math.min(14400,Be)),i=[Se,Be],r.substr(0,1)){case"l":Be>Se&&(i=[Be,Se]);break;case"p":Se>Be&&(i=[Be,Se])}en(i),xr(Ji),ae(ut),qt!==0&&ae(qt+" J"),yt!==0&&ae(yt+" j"),It.publish("addPage",{pageNumber:$t})},gn=function(E){E>0&&E<=$t&&(et.splice(E,1),Ze.splice(E,1),$t--,B>$t&&(B=$t),this.setPage(B))},Dn=function(E){E>0&&E<=$t&&(B=E)},In=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return et.length-1},ir=function(E,V,ue){var Se,Be=void 0;return ue=ue||{},E=E!==void 0?E:qe[Rt].fontName,V=V!==void 0?V:qe[Rt].fontStyle,Se=E.toLowerCase(),Ft[Se]!==void 0&&Ft[Se][V]!==void 0?Be=Ft[Se][V]:Ft[E]!==void 0&&Ft[E][V]!==void 0?Be=Ft[E][V]:ue.disableWarning===!1&&Fn.warn("Unable to look up font label for font '"+E+"', '"+V+"'. Refer to getFontList() for available fonts."),Be||ue.noFallback||(Be=Ft.times[V])==null&&(Be=Ft.times.normal),Be},Ir=f.__private__.putInfo=function(){var E=Ve(),V=function(Se){return Se};for(var ue in h!==null&&(V=Pn.encryptor(E,0)),ae("<<"),ae("/Producer ("+pr(V("jsPDF "+ur.version))+")"),bt)bt.hasOwnProperty(ue)&&bt[ue]&&ae("/"+ue.substr(0,1).toUpperCase()+ue.substr(1)+" ("+pr(V(bt[ue]))+")");ae("/CreationDate ("+pr(V(ve))+")"),ae(">>"),ae("endobj")},Dr=f.__private__.putCatalog=function(E){var V=(E=E||{}).rootDictionaryObjId||G;switch(Ve(),ae("<<"),ae("/Type /Catalog"),ae("/Pages "+V+" 0 R"),Ke||(Ke="fullwidth"),Ke){case"fullwidth":ae("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ae("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ae("/OpenAction [3 0 R /Fit]");break;case"original":ae("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ue=""+Ke;ue.substr(ue.length-1)==="%"&&(Ke=parseInt(Ke)/100),typeof Ke=="number"&&ae("/OpenAction [3 0 R /XYZ null null "+k(Ke)+"]")}switch(Ee||(Ee="continuous"),Ee){case"continuous":ae("/PageLayout /OneColumn");break;case"single":ae("/PageLayout /SinglePage");break;case"two":case"twoleft":ae("/PageLayout /TwoColumnLeft");break;case"tworight":ae("/PageLayout /TwoColumnRight")}Et&&ae("/PageMode /"+Et),It.publish("putCatalog"),ae(">>"),ae("endobj")},Sr=f.__private__.putTrailer=function(){ae("trailer"),ae("<<"),ae("/Size "+(te+1)),ae("/Root "+te+" 0 R"),ae("/Info "+(te-1)+" 0 R"),h!==null&&ae("/Encrypt "+Pn.oid+" 0 R"),ae("/ID [ <"+ge+"> <"+ge+"> ]"),ae(">>")},Xt=f.__private__.putHeader=function(){ae("%PDF-"+v),ae("%")},Tn=f.__private__.putXRef=function(){var E="0000000000";ae("xref"),ae("0 "+(te+1)),ae("0000000000 65535 f ");for(var V=1;V<=te;V++)typeof fe[V]=="function"?ae((E+fe[V]()).slice(-10)+" 00000 n "):fe[V]!==void 0?ae((E+fe[V]).slice(-10)+" 00000 n "):ae("0000000000 00000 n ")},un=f.__private__.buildDocument=function(){var E;te=0,Te=0,Ae=[],fe=[],Pe=[],G=tt(),Y=tt(),wt(Ae),It.publish("buildDocument"),Xt(),je(),function(){It.publish("putAdditionalObjects");for(var ue=0;ue<Pe.length;ue++){var Se=Pe[ue];O(Se.objId,!0),ae(Se.content),ae("endobj")}It.publish("postPutAdditionalObjects")}(),E=[],function(){for(var ue in qe)qe.hasOwnProperty(ue)&&(d===!1||d===!0&&p.hasOwnProperty(ue))&&Oe(qe[ue])}(),function(){var ue;for(ue in rr)rr.hasOwnProperty(ue)&&ft(rr[ue])}(),function(){for(var ue in kr)kr.hasOwnProperty(ue)&&st(kr[ue])}(),function(ue){var Se;for(Se in Gt)Gt.hasOwnProperty(Se)&&(Gt[Se]instanceof $u?pt(Gt[Se]):Gt[Se]instanceof Sd&&gt(Gt[Se],ue))}(E),It.publish("putResources"),E.forEach(At),At({resourcesOid:Y,objectOid:Number.MAX_SAFE_INTEGER}),It.publish("postPutResources"),h!==null&&(Pn.oid=Ve(),ae("<<"),ae("/Filter /Standard"),ae("/V "+Pn.v),ae("/R "+Pn.r),ae("/U <"+Pn.toHexString(Pn.U)+">"),ae("/O <"+Pn.toHexString(Pn.O)+">"),ae("/P "+Pn.P),ae(">>"),ae("endobj")),Ir(),Dr();var V=Te;return Tn(),Sr(),ae("startxref"),ae(""+V),ae("%%EOF"),wt(et[B]),Ae.join(`
`)},Hr=f.__private__.getBlob=function(E){return new Blob([ne(E)],{type:"application/pdf"})},Oa=f.output=f.__private__.output=(Re=function(E,V){switch(typeof(V=V||{})=="string"?V={filename:V}:V.filename=V.filename||"generated.pdf",E){case void 0:return un();case"save":f.save(V.filename);break;case"arraybuffer":return ne(un());case"blob":return Hr(un());case"bloburi":case"bloburl":if(Er.URL!==void 0&&typeof Er.URL.createObjectURL=="function")return Er.URL&&Er.URL.createObjectURL(Hr(un()))||void 0;Fn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ue="",Se=un();try{ue=kN(Se)}catch{ue=kN(unescape(encodeURIComponent(Se)))}return"data:application/pdf;filename="+V.filename+";base64,"+ue;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Er)==="[object Window]"){var Be="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ce=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';V.pdfObjectUrl&&(Be=V.pdfObjectUrl,Ce="");var Ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Be+'"'+Ce+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(V)+");<\/script></body></html>",Ut=Er.open();return Ut!==null&&Ut.document.write(Ye),Ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Er)==="[object Window]"){var Wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(V.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+V.filename+'" width="500px" height="400px" /></body></html>',kt=Er.open();if(kt!==null){kt.document.write(Wt);var Qt=this;kt.document.documentElement.querySelector("#pdfViewer").onload=function(){kt.document.title=V.filename,kt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Qt.output("bloburl"))}}return kt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Er)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Or='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",V)+'"></iframe></body></html>',fn=Er.open();if(fn!==null&&(fn.document.write(Or),fn.document.title=V.filename),fn||typeof safari>"u")return fn;break;case"datauri":case"dataurl":return Er.document.location.href=this.output("datauristring",V);default:return null}},Re.foo=function(){try{return Re.apply(this,arguments)}catch(ue){var E=ue.stack||"";~E.indexOf(" at ")&&(E=E.split(" at ")[1]);var V="Error in function "+E.split(`
`)[0].split("<")[0]+": "+ue.message;if(!Er.console)throw new Error(V);Er.console.error(V,ue),Er.alert&&alert(V)}},Re.foo.bar=Re,Re.foo),ri=function(E){return Array.isArray(cn)===!0&&cn.indexOf(E)>-1};switch(n){case"pt":Ot=1;break;case"mm":Ot=72/25.4;break;case"cm":Ot=72/2.54;break;case"in":Ot=72;break;case"px":Ot=ri("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ot=12;break;case"ex":Ot=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ot=n}var Pn=null;Le(),ce();var Gs=f.__private__.getPageInfo=f.getPageInfo=function(E){if(isNaN(E)||E%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ze[E].objId,pageNumber:E,pageContext:Ze[E]}},Oo=f.__private__.getPageInfoByObjId=function(E){if(isNaN(E)||E%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var V in Ze)if(Ze[V].objId===E)break;return Gs(V)},Ru=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Ze[B].objId,pageNumber:B,pageContext:Ze[B]}};f.addPage=function(){return mn.apply(this,arguments),this},f.setPage=function(){return Dn.apply(this,arguments),wt.call(this,et[B]),this},f.insertPage=function(E){return this.addPage(),this.movePage(B,E),this},f.movePage=function(E,V){var ue,Se;if(E>V){ue=et[E],Se=Ze[E];for(var Be=E;Be>V;Be--)et[Be]=et[Be-1],Ze[Be]=Ze[Be-1];et[V]=ue,Ze[V]=Se,this.setPage(V)}else if(E<V){ue=et[E],Se=Ze[E];for(var Ce=E;Ce<V;Ce++)et[Ce]=et[Ce+1],Ze[Ce]=Ze[Ce+1];et[V]=ue,Ze[V]=Se,this.setPage(V)}return this},f.deletePage=function(){return gn.apply(this,arguments),this},f.__private__.text=f.text=function(E,V,ue,Se,Be){var Ce,Ye,Ut,Wt,kt,Qt,Or,fn,xn,g=(Se=Se||{}).scope||this;if(typeof E=="number"&&typeof V=="number"&&(typeof ue=="string"||Array.isArray(ue))){var P=ue;ue=V,V=E,E=P}if(arguments[3]instanceof nr==0?(Ut=arguments[4],Wt=arguments[5],Sn(Or=arguments[3])==="object"&&Or!==null||(typeof Ut=="string"&&(Wt=Ut,Ut=null),typeof Or=="string"&&(Wt=Or,Or=null),typeof Or=="number"&&(Ut=Or,Or=null),Se={flags:Or,angle:Ut,align:Wt})):(A("The transform parameter of text() with a Matrix value"),xn=Be),isNaN(V)||isNaN(ue)||E==null)throw new Error("Invalid arguments passed to jsPDF.text");if(E.length===0)return g;var M,se="",ze=typeof Se.lineHeightFactor=="number"?Se.lineHeightFactor:Va,Xe=g.internal.scaleFactor;function Ct(pn){return pn=pn.split("	").join(Array(Se.TabLen||9).join(" ")),pr(pn,Or)}function Nr(pn){for(var Ln,mi=pn.concat(),Fi=[],vl=mi.length;vl--;)typeof(Ln=mi.shift())=="string"?Fi.push(Ln):Array.isArray(pn)&&(Ln.length===1||Ln[1]===void 0&&Ln[2]===void 0)?Fi.push(Ln[0]):Fi.push([Ln[0],Ln[1],Ln[2]]);return Fi}function Mn(pn,Ln){var mi;if(typeof pn=="string")mi=Ln(pn)[0];else if(Array.isArray(pn)){for(var Fi,vl,zf=pn.concat(),Mh=[],Nm=zf.length;Nm--;)typeof(Fi=zf.shift())=="string"?Mh.push(Ln(Fi)[0]):Array.isArray(Fi)&&typeof Fi[0]=="string"&&(vl=Ln(Fi[0],Fi[1],Fi[2]),Mh.push([vl[0],vl[1],vl[2]]));mi=Mh}return mi}var Gr=!1,On=!0;if(typeof E=="string")Gr=!0;else if(Array.isArray(E)){var Hi=E.concat();Ye=[];for(var xs,Bn=Hi.length;Bn--;)(typeof(xs=Hi.shift())!="string"||Array.isArray(xs)&&typeof xs[0]!="string")&&(On=!1);Gr=On}if(Gr===!1)throw new Error('Type of text must be string or Array. "'+E+'" is not recognized.');typeof E=="string"&&(E=E.match(/[\r?\n]/)?E.split(/\r\n|\r|\n/g):[E]);var ys=me/g.internal.scaleFactor,Ha=ys*(ze-1);switch(Se.baseline){case"bottom":ue-=Ha;break;case"top":ue+=ys-Ha;break;case"hanging":ue+=ys-2*Ha;break;case"middle":ue+=ys/2-Ha}if((Qt=Se.maxWidth||0)>0&&(typeof E=="string"?E=g.splitTextToSize(E,Qt):Object.prototype.toString.call(E)==="[object Array]"&&(E=E.reduce(function(pn,Ln){return pn.concat(g.splitTextToSize(Ln,Qt))},[]))),Ce={text:E,x:V,y:ue,options:Se,mutex:{pdfEscape:pr,activeFontKey:Rt,fonts:qe,activeFontSize:me}},It.publish("preProcessText",Ce),E=Ce.text,Ut=(Se=Ce.options).angle,xn instanceof nr==0&&Ut&&typeof Ut=="number"){Ut*=Math.PI/180,Se.rotationDirection===0&&(Ut=-Ut),j===N&&(Ut=-Ut);var gl=Math.cos(Ut),jf=Math.sin(Ut);xn=new nr(gl,jf,-jf,gl,0,0)}else Ut&&Ut instanceof nr&&(xn=Ut);j!==N||xn||(xn=on),(kt=Se.charSpace||Pt)!==void 0&&(se+=T(R(kt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(fn=Se.horizontalScale)!==void 0&&(se+=T(100*fn)+` Tz
`),Se.lang;var Ds=-1,xl=Se.renderingMode!==void 0?Se.renderingMode:Se.stroke,Fh=g.internal.getCurrentPageInfo().pageContext;switch(xl){case 0:case!1:case"fill":Ds=0;break;case 1:case!0:case"stroke":Ds=1;break;case 2:case"fillThenStroke":Ds=2;break;case 3:case"invisible":Ds=3;break;case 4:case"fillAndAddForClipping":Ds=4;break;case 5:case"strokeAndAddPathForClipping":Ds=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ds=6;break;case 7:case"addToPathForClipping":Ds=7}var Em=Fh.usedRenderingMode!==void 0?Fh.usedRenderingMode:-1;Ds!==-1?se+=Ds+` Tr
`:Em!==-1&&(se+=`0 Tr
`),Ds!==-1&&(Fh.usedRenderingMode=Ds),Wt=Se.align||"left";var $a,Lu=me*ze,Ff=g.internal.pageSize.getWidth(),Df=qe[Rt];kt=Se.charSpace||Pt,Qt=Se.maxWidth||0,Or=Object.assign({autoencode:!0,noBOM:!0},Se.flags);var lc=[],ju=function(pn){return g.getStringUnitWidth(pn,{font:Df,charSpace:kt,fontSize:me,doKerning:!1})*me/Xe};if(Object.prototype.toString.call(E)==="[object Array]"){var ua;Ye=Nr(E),Wt!=="left"&&($a=Ye.map(ju));var ha,cc=0;if(Wt==="right"){V-=$a[0],E=[],Bn=Ye.length;for(var yl=0;yl<Bn;yl++)yl===0?(ha=q(V),ua=_e(ue)):(ha=R(cc-$a[yl]),ua=-Lu),E.push([Ye[yl],ha,ua]),cc=$a[yl]}else if(Wt==="center"){V-=$a[0]/2,E=[],Bn=Ye.length;for(var uc=0;uc<Bn;uc++)uc===0?(ha=q(V),ua=_e(ue)):(ha=R((cc-$a[uc])/2),ua=-Lu),E.push([Ye[uc],ha,ua]),cc=$a[uc]}else if(Wt==="left"){E=[],Bn=Ye.length;for(var Mf=0;Mf<Bn;Mf++)E.push(Ye[Mf])}else if(Wt==="justify"&&Df.encoding==="Identity-H"){E=[],Bn=Ye.length,Qt=Qt!==0?Qt:Ff;for(var Dh=0,pi=0;pi<Bn;pi++)if(ua=pi===0?_e(ue):-Lu,ha=pi===0?q(V):Dh,pi<Bn-1){var Am=R((Qt-$a[pi])/(Ye[pi].split(" ").length-1)),Bo=Ye[pi].split(" ");E.push([Bo[0]+" ",ha,ua]),Dh=0;for(var Uo=1;Uo<Bo.length;Uo++){var Of=(ju(Bo[Uo-1]+" "+Bo[Uo])-ju(Bo[Uo]))*Xe+Am;Uo==Bo.length-1?E.push([Bo[Uo],Of,0]):E.push([Bo[Uo]+" ",Of,0]),Dh-=Of}}else E.push([Ye[pi],ha,ua]);E.push(["",Dh,0])}else{if(Wt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(E=[],Bn=Ye.length,Qt=Qt!==0?Qt:Ff,pi=0;pi<Bn;pi++){ua=pi===0?_e(ue):-Lu,ha=pi===0?q(V):0;var Bf=Ye[pi].split(" ").length-1,Uf=Bf>0?(Qt-$a[pi])/Bf:0;pi<Bn-1?lc.push(T(R(Uf))):lc.push(0),E.push([Ye[pi],ha,ua])}}}(typeof Se.R2L=="boolean"?Se.R2L:ct)===!0&&(E=Mn(E,function(pn,Ln,mi){return[pn.split("").reverse().join(""),Ln,mi]})),Ce={text:E,x:V,y:ue,options:Se,mutex:{pdfEscape:pr,activeFontKey:Rt,fonts:qe,activeFontSize:me}},It.publish("postProcessText",Ce),E=Ce.text,M=Ce.mutex.isHex||!1;var Vf=qe[Rt].encoding;Vf!=="WinAnsiEncoding"&&Vf!=="StandardEncoding"||(E=Mn(E,function(pn,Ln,mi){return[Ct(pn),Ln,mi]})),Ye=Nr(E),E=[];for(var hc,dc,fc,Fu=Array.isArray(Ye[0])?1:0,pc="",Du=function(pn,Ln,mi){var Fi="";return mi instanceof nr?(mi=typeof Se.angle=="number"?zn(mi,new nr(1,0,0,1,pn,Ln)):zn(new nr(1,0,0,1,pn,Ln),mi),j===N&&(mi=zn(new nr(1,0,0,-1,0,0),mi)),Fi=mi.join(" ")+` Tm
`):Fi=T(pn)+" "+T(Ln)+` Td
`,Fi},qa=0;qa<Ye.length;qa++){switch(pc="",Fu){case 1:fc=(M?"<":"(")+Ye[qa][0]+(M?">":")"),hc=parseFloat(Ye[qa][1]),dc=parseFloat(Ye[qa][2]);break;case 0:fc=(M?"<":"(")+Ye[qa]+(M?">":")"),hc=q(V),dc=_e(ue)}lc!==void 0&&lc[qa]!==void 0&&(pc=lc[qa]+` Tw
`),qa===0?E.push(pc+Du(hc,dc,xn)+fc):Fu===0?E.push(pc+fc):Fu===1&&E.push(pc+Du(hc,dc,xn)+fc)}E=Fu===0?E.join(` Tj
T* `):E.join(` Tj
`),E+=` Tj
`;var Vo=`BT
/`;return Vo+=Rt+" "+me+` Tf
`,Vo+=T(me*ze)+` TL
`,Vo+=or+`
`,Vo+=se,Vo+=E,ae(Vo+="ET"),p[Rt]=!0,g};var co=f.__private__.clip=f.clip=function(E){return ae(E==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return co("evenodd")},f.__private__.discardPath=f.discardPath=function(){return ae("n"),this};var Ys=f.__private__.isValidStyle=function(E){var V=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(E)!==-1&&(V=!0),V};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(E){return Ys(E)&&(c=E),this};var ni=f.__private__.getStyle=f.getStyle=function(E){var V=c;switch(E){case"D":case"S":V="S";break;case"F":V="f";break;case"FD":case"DF":V="B";break;case"f":case"f*":case"B":case"B*":V=E}return V},Ba=f.close=function(){return ae("h"),this};f.stroke=function(){return ae("S"),this},f.fill=function(E){return ps("f",E),this},f.fillEvenOdd=function(E){return ps("f*",E),this},f.fillStroke=function(E){return ps("B",E),this},f.fillStrokeEvenOdd=function(E){return ps("B*",E),this};var ps=function(E,V){Sn(V)==="object"?ic(V,E):ae(E)},Ua=function(E){E===null||j===N&&E===void 0||(E=ni(E),ae(E))};function nc(E,V,ue,Se,Be){var Ce=new Sd(V||this.boundingBox,ue||this.xStep,Se||this.yStep,this.gState,Be||this.matrix);Ce.stream=this.stream;var Ye=E+"$$"+this.cloneIndex+++"$$";return xe(Ye,Ce),Ce}var ic=function(E,V){var ue=Rr[E.key],Se=Gt[ue];if(Se instanceof $u)ae("q"),ae(sc(V)),Se.gState&&f.setGState(Se.gState),ae(E.matrix.toString()+" cm"),ae("/"+ue+" sh"),ae("Q");else if(Se instanceof Sd){var Be=new nr(1,0,0,-1,0,dr());E.matrix&&(Be=Be.multiply(E.matrix||on),ue=nc.call(Se,E.key,E.boundingBox,E.xStep,E.yStep,Be).id),ae("q"),ae("/Pattern cs"),ae("/"+ue+" scn"),Se.gState&&f.setGState(Se.gState),ae(V),ae("Q")}},sc=function(E){switch(E){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},uo=f.moveTo=function(E,V){return ae(T(R(E))+" "+T(le(V))+" m"),this},Xs=f.lineTo=function(E,V){return ae(T(R(E))+" "+T(le(V))+" l"),this},ms=f.curveTo=function(E,V,ue,Se,Be,Ce){return ae([T(R(E)),T(le(V)),T(R(ue)),T(le(Se)),T(R(Be)),T(le(Ce)),"c"].join(" ")),this};f.__private__.line=f.line=function(E,V,ue,Se,Be){if(isNaN(E)||isNaN(V)||isNaN(ue)||isNaN(Se)||!Ys(Be))throw new Error("Invalid arguments passed to jsPDF.line");return j===S?this.lines([[ue-E,Se-V]],E,V,[1,1],Be||"S"):this.lines([[ue-E,Se-V]],E,V,[1,1]).stroke()},f.__private__.lines=f.lines=function(E,V,ue,Se,Be,Ce){var Ye,Ut,Wt,kt,Qt,Or,fn,xn,g,P,M,se;if(typeof E=="number"&&(se=ue,ue=V,V=E,E=se),Se=Se||[1,1],Ce=Ce||!1,isNaN(V)||isNaN(ue)||!Array.isArray(E)||!Array.isArray(Se)||!Ys(Be)||typeof Ce!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(uo(V,ue),Ye=Se[0],Ut=Se[1],kt=E.length,P=V,M=ue,Wt=0;Wt<kt;Wt++)(Qt=E[Wt]).length===2?(P=Qt[0]*Ye+P,M=Qt[1]*Ut+M,Xs(P,M)):(Or=Qt[0]*Ye+P,fn=Qt[1]*Ut+M,xn=Qt[2]*Ye+P,g=Qt[3]*Ut+M,P=Qt[4]*Ye+P,M=Qt[5]*Ut+M,ms(Or,fn,xn,g,P,M));return Ce&&Ba(),Ua(Be),this},f.path=function(E){for(var V=0;V<E.length;V++){var ue=E[V],Se=ue.c;switch(ue.op){case"m":uo(Se[0],Se[1]);break;case"l":Xs(Se[0],Se[1]);break;case"c":ms.apply(this,Se);break;case"h":Ba()}}return this},f.__private__.rect=f.rect=function(E,V,ue,Se,Be){if(isNaN(E)||isNaN(V)||isNaN(ue)||isNaN(Se)||!Ys(Be))throw new Error("Invalid arguments passed to jsPDF.rect");return j===S&&(Se=-Se),ae([T(R(E)),T(le(V)),T(R(ue)),T(R(Se)),"re"].join(" ")),Ua(Be),this},f.__private__.triangle=f.triangle=function(E,V,ue,Se,Be,Ce,Ye){if(isNaN(E)||isNaN(V)||isNaN(ue)||isNaN(Se)||isNaN(Be)||isNaN(Ce)||!Ys(Ye))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ue-E,Se-V],[Be-ue,Ce-Se],[E-Be,V-Ce]],E,V,[1,1],Ye,!0),this},f.__private__.roundedRect=f.roundedRect=function(E,V,ue,Se,Be,Ce,Ye){if(isNaN(E)||isNaN(V)||isNaN(ue)||isNaN(Se)||isNaN(Be)||isNaN(Ce)||!Ys(Ye))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ut=4/3*(Math.SQRT2-1);return Be=Math.min(Be,.5*ue),Ce=Math.min(Ce,.5*Se),this.lines([[ue-2*Be,0],[Be*Ut,0,Be,Ce-Ce*Ut,Be,Ce],[0,Se-2*Ce],[0,Ce*Ut,-Be*Ut,Ce,-Be,Ce],[2*Be-ue,0],[-Be*Ut,0,-Be,-Ce*Ut,-Be,-Ce],[0,2*Ce-Se],[0,-Ce*Ut,Be*Ut,-Ce,Be,-Ce]],E+Be,V,[1,1],Ye,!0),this},f.__private__.ellipse=f.ellipse=function(E,V,ue,Se,Be){if(isNaN(E)||isNaN(V)||isNaN(ue)||isNaN(Se)||!Ys(Be))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ce=4/3*(Math.SQRT2-1)*ue,Ye=4/3*(Math.SQRT2-1)*Se;return uo(E+ue,V),ms(E+ue,V-Ye,E+Ce,V-Se,E,V-Se),ms(E-Ce,V-Se,E-ue,V-Ye,E-ue,V),ms(E-ue,V+Ye,E-Ce,V+Se,E,V+Se),ms(E+Ce,V+Se,E+ue,V+Ye,E+ue,V),Ua(Be),this},f.__private__.circle=f.circle=function(E,V,ue,Se){if(isNaN(E)||isNaN(V)||isNaN(ue)||!Ys(Se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(E,V,ue,ue,Se)},f.setFont=function(E,V,ue){return ue&&(V=b(V,ue)),Rt=ir(E,V,{disableWarning:!1}),this};var ac=f.__private__.getFont=f.getFont=function(){return qe[ir.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var E,V,ue={};for(E in Ft)if(Ft.hasOwnProperty(E))for(V in ue[E]=[],Ft[E])Ft[E].hasOwnProperty(V)&&ue[E].push(V);return ue},f.addFont=function(E,V,ue,Se,Be){var Ce=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ce.indexOf(arguments[3])!==-1?Be=arguments[3]:arguments[3]&&Ce.indexOf(arguments[3])==-1&&(ue=b(ue,Se)),_r.call(this,E,V,ue,Be=Be||"Identity-H")};var Va,Ji=t.lineWidth||.200025,oc=f.__private__.getLineWidth=f.getLineWidth=function(){return Ji},xr=f.__private__.setLineWidth=f.setLineWidth=function(E){return Ji=E,ae(T(R(E))+" w"),this};f.__private__.setLineDash=ur.API.setLineDash=ur.API.setLineDashPattern=function(E,V){if(E=E||[],V=V||0,isNaN(V)||!Array.isArray(E))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return E=E.map(function(ue){return T(R(ue))}).join(" "),V=T(R(V)),ae("["+E+"] "+V+" d"),this};var ho=f.__private__.getLineHeight=f.getLineHeight=function(){return me*Va};f.__private__.getLineHeight=f.getLineHeight=function(){return me*Va};var ml=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(E){return typeof(E=E||1.15)=="number"&&(Va=E),this},za=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Va};ml(t.lineHeight);var q=f.__private__.getHorizontalCoordinate=function(E){return R(E)},_e=f.__private__.getVerticalCoordinate=function(E){return j===N?E:Ze[B].mediaBox.topRightY-Ze[B].mediaBox.bottomLeftY-R(E)},Ue=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(E){return T(q(E))},$e=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(E){return T(_e(E))},ut=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return ee(ut)},f.__private__.setStrokeColor=f.setDrawColor=function(E,V,ue,Se){return ut=re({ch1:E,ch2:V,ch3:ue,ch4:Se,pdfColorType:"draw",precision:2}),ae(ut),this};var rt=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return ee(rt)},f.__private__.setFillColor=f.setFillColor=function(E,V,ue,Se){return rt=re({ch1:E,ch2:V,ch3:ue,ch4:Se,pdfColorType:"fill",precision:2}),ae(rt),this};var or=t.textColor||"0 g",zt=f.__private__.getTextColor=f.getTextColor=function(){return ee(or)};f.__private__.setTextColor=f.setTextColor=function(E,V,ue,Se){return or=re({ch1:E,ch2:V,ch3:ue,ch4:Se,pdfColorType:"text",precision:3}),this};var Pt=t.charSpace,yr=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Pt||0)};f.__private__.setCharSpace=f.setCharSpace=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Pt=E,this};var qt=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(E){var V=f.CapJoinStyles[E];if(V===void 0)throw new Error("Line cap style of '"+E+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return qt=V,ae(V+" J"),this};var yt=0;f.__private__.setLineJoin=f.setLineJoin=function(E){var V=f.CapJoinStyles[E];if(V===void 0)throw new Error("Line join style of '"+E+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yt=V,ae(V+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(E){if(E=E||0,isNaN(E))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ae(T(R(E))+" M"),this},f.GState=wx,f.setGState=function(E){(E=typeof E=="string"?rr[Zt[E]]:hr(null,E)).equals(zr)||(ae("/"+E.id+" gs"),zr=E)};var hr=function(E,V){if(!E||!Zt[E]){var ue=!1;for(var Se in rr)if(rr.hasOwnProperty(Se)&&rr[Se].equals(V)){ue=!0;break}if(ue)V=rr[Se];else{var Be="GS"+(Object.keys(rr).length+1).toString(10);rr[Be]=V,V.id=Be}return E&&(Zt[E]=V.id),It.publish("addGState",V),V}};f.addGState=function(E,V){return hr(E,V),this},f.saveGraphicsState=function(){return ae("q"),wr.push({key:Rt,size:me,color:or}),this},f.restoreGraphicsState=function(){ae("Q");var E=wr.pop();return Rt=E.key,me=E.size,or=E.color,zr=null,this},f.setCurrentTransformationMatrix=function(E){return ae(E.toString()+" cm"),this},f.comment=function(E){return ae("#"+E),this};var Tt=function(E,V){var ue=E||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ue},set:function(Ce){isNaN(Ce)||(ue=parseFloat(Ce))}});var Se=V||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Se},set:function(Ce){isNaN(Ce)||(Se=parseFloat(Ce))}});var Be="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Be},set:function(Ce){Be=Ce.toString()}}),this},Ur=function(E,V,ue,Se){Tt.call(this,E,V),this.type="rect";var Be=ue||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Be},set:function(Ye){isNaN(Ye)||(Be=parseFloat(Ye))}});var Ce=Se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ce},set:function(Ye){isNaN(Ye)||(Ce=parseFloat(Ye))}}),this},Lr=function(){this.page=$t,this.currentPage=B,this.pages=et.slice(0),this.pagesContext=Ze.slice(0),this.x=Vt,this.y=Vr,this.matrix=mr,this.width=Fs(B),this.height=ca(B),this.outputDestination=dt,this.id="",this.objectNumber=-1};Lr.prototype.restore=function(){$t=this.page,B=this.currentPage,Ze=this.pagesContext,et=this.pages,Vt=this.x,Vr=this.y,mr=this.matrix,Mr(B,this.width),ii(B,this.height),dt=this.outputDestination};var qr=function(E,V,ue,Se,Be){dn.push(new Lr),$t=B=0,et=[],Vt=E,Vr=V,mr=Be,en([ue,Se])};for(var Rn in f.beginFormObject=function(E,V,ue,Se,Be){return qr(E,V,ue,Se,Be),this},f.endFormObject=function(E){return function(V){if(vr[V])dn.pop().restore();else{var ue=new Lr,Se="Xo"+(Object.keys(kr).length+1).toString(10);ue.id=Se,vr[V]=Se,kr[Se]=ue,It.publish("addFormObject",ue),dn.pop().restore()}}(E),this},f.doFormObject=function(E,V){var ue=kr[vr[E]];return ae("q"),ae(V.toString()+" cm"),ae("/"+ue.id+" Do"),ae("Q"),this},f.getFormObject=function(E){var V=kr[vr[E]];return{x:V.x,y:V.y,width:V.width,height:V.height,matrix:V.matrix}},f.save=function(E,V){return E=E||"generated.pdf",(V=V||{}).returnPromise=V.returnPromise||!1,V.returnPromise===!1?(zu(Hr(un()),E),typeof zu.unload=="function"&&Er.setTimeout&&setTimeout(zu.unload,911),this):new Promise(function(ue,Se){try{var Be=zu(Hr(un()),E);typeof zu.unload=="function"&&Er.setTimeout&&setTimeout(zu.unload,911),ue(Be)}catch(Ce){Se(Ce.message)}})},ur.API)ur.API.hasOwnProperty(Rn)&&(Rn==="events"&&ur.API.events.length?function(E,V){var ue,Se,Be;for(Be=V.length-1;Be!==-1;Be--)ue=V[Be][0],Se=V[Be][1],E.subscribe.apply(E,[ue].concat(typeof Se=="function"?[Se]:Se))}(It,ur.API.events):f[Rn]=ur.API[Rn]);function Fs(E){return Ze[E].mediaBox.topRightX-Ze[E].mediaBox.bottomLeftX}function Mr(E,V){Ze[E].mediaBox.topRightX=V+Ze[E].mediaBox.bottomLeftX}function ca(E){return Ze[E].mediaBox.topRightY-Ze[E].mediaBox.bottomLeftY}function ii(E,V){Ze[E].mediaBox.topRightY=V+Ze[E].mediaBox.bottomLeftY}var gs=f.getPageWidth=function(E){return Fs(E=E||B)/Ot},si=f.setPageWidth=function(E,V){Mr(E,V*Ot)},dr=f.getPageHeight=function(E){return ca(E=E||B)/Ot},ai=f.setPageHeight=function(E,V){ii(E,V*Ot)};return f.internal={pdfEscape:pr,getStyle:ni,getFont:ac,getFontSize:Je,getCharSpace:yr,getTextColor:zt,getLineHeight:ho,getLineHeightFactor:za,getLineWidth:oc,write:Ie,getHorizontalCoordinate:q,getVerticalCoordinate:_e,getCoordinateString:Ue,getVerticalCoordinateString:$e,collections:{},newObject:Ve,newAdditionalObject:Z,newObjectDeferred:tt,newObjectDeferredBegin:O,getFilters:ke,putStream:pe,events:It,scaleFactor:Ot,pageSize:{getWidth:function(){return gs(B)},setWidth:function(E){si(B,E)},getHeight:function(){return dr(B)},setHeight:function(E){ai(B,E)}},encryptionOptions:h,encryption:Pn,getEncryptor:function(E){return h!==null?Pn.encryptor(E,0):function(V){return V}},output:Oa,getNumberOfPages:In,get pages(){return et},out:ae,f2:k,f3:L,getPageInfo:Gs,getPageInfoByObjId:Oo,getCurrentPageInfo:Ru,getPDFVersion:x,Point:Tt,Rectangle:Ur,Matrix:nr,hasHotfix:ri},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return gs(B)},set:function(E){si(B,E)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return dr(B)},set:function(E){ai(B,E)},enumerable:!0,configurable:!0}),(function(E){for(var V=0,ue=we.length;V<ue;V++){var Se=_r.call(this,E[V][0],E[V][1],E[V][2],we[V][3],!0);d===!1&&(p[Se]=!0);var Be=E[V][0].split("-");er({id:Se,fontName:Be[0],fontStyle:Be[1]||""})}It.publish("addFonts",{fonts:qe,dictionary:Ft})}).call(f,we),Rt="F1",mn(i,r),It.publish("initialized"),f}Zh.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Zh.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Zh.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Zh.prototype.processOwnerPassword=function(t,e){return T5(N5(e).substr(0,5),t)},Zh.prototype.encryptor=function(t,e){var r=N5(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return T5(r,n)}},wx.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Sn(t)!==Sn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},ur.API={events:[]},ur.version="4.0.0";var ci=ur.API,Qb=1,Ch=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},zh=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Cr=function(t){return t.toFixed(2)},Ec=function(t){return t.toFixed(5)};ci.__acroform__={};var la=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},RN=function(t){return t*Qb},$o=function(t){var e=new y8,r=tr.internal.getHeight(t)||0,n=tr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Cr(n)),Number(Cr(r))],e},JG=ci.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},ZG=ci.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},eY=ci.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},bi=ci.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return eY(t,e-1)},Si=ci.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return JG(t,e-1)},Ei=ci.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ZG(t,e-1)},tY=ci.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],s=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=r(i)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(i+a)||0,l.upperRight_Y=n(s)||0,[Number(Cr(l.lowerLeft_X)),Number(Cr(l.lowerLeft_Y)),Number(Cr(l.upperRight_X)),Number(Cr(l.upperRight_Y))]},rY=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=k5(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Cr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=$o(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},k5=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(k){return k.split(`
`)}):i.map(function(k){return[k]});var s=r,a=tr.internal.getHeight(t)||0;a=a<0?-a:a;var o=tr.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(k,L,R){if(k+1<i.length){var le=L+" "+i[k+1][0];return Eg(le,t,R).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var c,h,d=Eg("3",t,s).height,p=t.multiline?a-s:(a-d)/2,f=p+=2,v=0,x=0,_=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Eg(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var w="",S=0,N=0;N<i.length;N++)if(i.hasOwnProperty(N)){var j=!1;if(i[N].length!==1&&_!==i[N].length-1){if((d+2)*(S+2)+2>a)continue e;w+=i[N][_],j=!0,x=N,N--}else{w=(w+=i[N][_]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var z=parseInt(N),W=l(z,w,s),b=N>=i.length-1;if(W&&!b){w+=" ",_=0;continue}if(W||b){if(b)x=z;else if(t.multiline&&(d+2)*(S+2)+2>a)continue e}else{if(!t.multiline||(d+2)*(S+2)+2>a)continue e;x=z}}for(var T="",A=v;A<=x;A++){var F=i[A];if(t.multiline){if(A===x){T+=F[_]+" ",_=(_+1)%F.length;continue}if(A===v){T+=F[F.length-1]+" ";continue}}T+=F[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,h=Eg(T,t,s).width,t.textAlign){case"right":c=o-h-2;break;case"center":c=(o-h)/2;break;default:c=2}e+=Cr(c)+" "+Cr(f)+` Td
`,e+="("+Ch(T)+`) Tj
`,e+=-Cr(c)+` 0 Td
`,f=-(s+2),h=0,v=j?x:x+1,S++,w=""}break}return n.text=e,n.fontSize=s,n},Eg=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},nY={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},iY=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},sY=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Do.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(nY)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Qb=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new v8,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&iY(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var s=!n;for(var a in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=tY(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=tr.createDefaultAppearanceStream(o),Sn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var h=rY(o);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(o.appearanceStreamContent){var d="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var f=o.appearanceStreamContent[p];if(d+="/"+p+" ",d+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var a in f)if(f.hasOwnProperty(a)){var v=f[a];typeof v=="function"&&(v=v.call(i,o)),d+="/"+a+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=f)=="function"&&(v=v.call(i,o)),d+="/"+a+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}s&&function(x,_){for(var w in x)if(x.hasOwnProperty(w)){var S=w,N=x[w];_.internal.newObjectDeferredBegin(N.objId,!0),Sn(N)==="object"&&typeof N.putStream=="function"&&N.putStream(),delete x[S]}}(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},x8=ci.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Sn(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+Ch(n(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ev=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Ch(n(t))+")"},Zo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Zo.prototype.toString=function(){return this.objId+" 0 R"},Zo.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Zo.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:x8(i,this.objId,this.scope)}):i instanceof Zo?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var y8=function(){Zo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};la(y8,Zo);var v8=function(){Zo.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Ch(r(t))+")"}},set:function(r){t=r}})};la(v8,Zo);var Do=function t(){Zo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!bi(e,3)},set:function(w){w?this.F=Si(e,3):this.F=Ei(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');r=w}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(w){n=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(w){n[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(w){n[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(w){n[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(w){n[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof _x)return;s="FieldObject"+t.FieldNum++}var w=function(S){return S};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Ch(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/Qb:c},set:function(w){c=w}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(w){h=w}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof _x||this instanceof ih))return Ev(d,this.objId,this.scope)},set:function(w){w=w.toString(),d=w}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Wi==0?Ev(p,this.objId,this.scope):p},set:function(w){w=w.toString(),p=this instanceof Wi==0?w.substr(0,1)==="("?zh(w.substr(1,w.length-2)):zh(w):w}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wi==1?zh(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof Wi==1?"/"+w:w}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Wi==0?Ev(f,this.objId,this.scope):f},set:function(w){w=w.toString(),f=this instanceof Wi==0?w.substr(0,1)==="("?zh(w.substr(1,w.length-2)):zh(w):w}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wi==1?zh(f.substr(1,f.length-1)):f},set:function(w){w=w.toString(),f=this instanceof Wi==1?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(w){w=!!w,x=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(w){v=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,1)},set:function(w){w?this.Ff=Si(this.Ff,1):this.Ff=Ei(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,2)},set:function(w){w?this.Ff=Si(this.Ff,2):this.Ff=Ei(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,3)},set:function(w){w?this.Ff=Si(this.Ff,3):this.Ff=Ei(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');_=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(_){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:_=2;break;case"center":case 1:_=1;break;default:_=0}}})};la(Do,Zo);var Od=function(){Do.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return x8(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(s,a,o){o||(o=1);for(var l,c=[];l=a.exec(s);)c.push(l[o]);return c}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,18)},set:function(r){r?this.Ff=Si(this.Ff,18):this.Ff=Ei(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Si(this.Ff,19):this.Ff=Ei(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,20)},set:function(r){r?(this.Ff=Si(this.Ff,20),e.sort()):this.Ff=Ei(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,22)},set:function(r){r?this.Ff=Si(this.Ff,22):this.Ff=Ei(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,23)},set:function(r){r?this.Ff=Si(this.Ff,23):this.Ff=Ei(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,27)},set:function(r){r?this.Ff=Si(this.Ff,27):this.Ff=Ei(this.Ff,27)}}),this.hasAppearanceStream=!1};la(Od,Do);var Bd=function(){Od.call(this),this.fontName="helvetica",this.combo=!1};la(Bd,Od);var Ud=function(){Bd.call(this),this.combo=!0};la(Ud,Bd);var y1=function(){Ud.call(this),this.edit=!0};la(y1,Ud);var Wi=function(){Do.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,15)},set:function(r){r?this.Ff=Si(this.Ff,15):this.Ff=Ei(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,16)},set:function(r){r?this.Ff=Si(this.Ff,16):this.Ff=Ei(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,17)},set:function(r){r?this.Ff=Si(this.Ff,17):this.Ff=Ei(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,26)},set:function(r){r?this.Ff=Si(this.Ff,26):this.Ff=Ei(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+Ch(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){Sn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};la(Wi,Do);var v1=function(){Wi.call(this),this.pushButton=!0};la(v1,Wi);var Vd=function(){Wi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};la(Vd,Wi);var _x=function(){var t,e;Do.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),n)a.push("/"+s+" ("+Ch(i(n[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Sn(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=tr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};la(_x,Do),Vd.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Vd.prototype.createOption=function(t){var e=new _x;return e.Parent=this,e.optionName=t,this.Kids.push(e),aY.call(this.scope,e),e};var w1=function(){Wi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=tr.CheckBox.createAppearanceStream()};la(w1,Wi);var ih=function(){Do.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,13)},set:function(e){e?this.Ff=Si(this.Ff,13):this.Ff=Ei(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,21)},set:function(e){e?this.Ff=Si(this.Ff,21):this.Ff=Ei(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,23)},set:function(e){e?this.Ff=Si(this.Ff,23):this.Ff=Ei(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,24)},set:function(e){e?this.Ff=Si(this.Ff,24):this.Ff=Ei(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,25)},set:function(e){e?this.Ff=Si(this.Ff,25):this.Ff=Ei(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,26)},set:function(e){e?this.Ff=Si(this.Ff,26):this.Ff=Ei(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};la(ih,Do);var _1=function(){ih.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,14)},set:function(t){t?this.Ff=Si(this.Ff,14):this.Ff=Ei(this.Ff,14)}}),this.password=!0};la(_1,ih);var tr={CheckBox:{createAppearanceStream:function(){return{N:{On:tr.CheckBox.YesNormal},D:{On:tr.CheckBox.YesPushDown,Off:tr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=$o(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=k5(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Cr(tr.internal.getWidth(t))+" "+Cr(tr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Cr(s.fontSize)+" Tf "+i),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=$o(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],s=tr.internal.getHeight(t),a=tr.internal.getWidth(t),o=k5(t,t.caption);return i.push("1 g"),i.push("0 0 "+Cr(a)+" "+Cr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Cr(a-1)+" "+Cr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+Cr(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=$o(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Cr(tr.internal.getWidth(t))+" "+Cr(tr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:tr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=tr.RadioButton.Circle.YesNormal,e.D[t]=tr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=$o(t);e.scope=t.scope;var r=[],n=tr.internal.getWidth(t)<=tr.internal.getHeight(t)?tr.internal.getWidth(t)/4:tr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=tr.internal.Bezier_C,s=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ec(tr.internal.getWidth(t)/2)+" "+Ec(tr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=$o(t);e.scope=t.scope;var r=[],n=tr.internal.getWidth(t)<=tr.internal.getHeight(t)?tr.internal.getWidth(t)/4:tr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*tr.internal.Bezier_C).toFixed(5)),a=Number((n*tr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ec(tr.internal.getWidth(t)/2)+" "+Ec(tr.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ec(tr.internal.getWidth(t)/2)+" "+Ec(tr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=$o(t);e.scope=t.scope;var r=[],n=tr.internal.getWidth(t)<=tr.internal.getHeight(t)?tr.internal.getWidth(t)/4:tr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*tr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ec(tr.internal.getWidth(t)/2)+" "+Ec(tr.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:tr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=tr.RadioButton.Cross.YesNormal,e.D[t]=tr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=$o(t);e.scope=t.scope;var r=[],n=tr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Cr(tr.internal.getWidth(t)-2)+" "+Cr(tr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Cr(n.x1.x)+" "+Cr(n.x1.y)+" m"),r.push(Cr(n.x2.x)+" "+Cr(n.x2.y)+" l"),r.push(Cr(n.x4.x)+" "+Cr(n.x4.y)+" m"),r.push(Cr(n.x3.x)+" "+Cr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=$o(t);e.scope=t.scope;var r=tr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Cr(tr.internal.getWidth(t))+" "+Cr(tr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Cr(tr.internal.getWidth(t)-2)+" "+Cr(tr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Cr(r.x1.x)+" "+Cr(r.x1.y)+" m"),n.push(Cr(r.x2.x)+" "+Cr(r.x2.y)+" l"),n.push(Cr(r.x4.x)+" "+Cr(r.x4.y)+" m"),n.push(Cr(r.x3.x)+" "+Cr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=$o(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Cr(tr.internal.getWidth(t))+" "+Cr(tr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};tr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=tr.internal.getWidth(t),r=tr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},tr.internal.getWidth=function(t){var e=0;return Sn(t)==="object"&&(e=RN(t.Rect[2])),e},tr.internal.getHeight=function(t){var e=0;return Sn(t)==="object"&&(e=RN(t.Rect[3])),e};var aY=ci.addField=function(t){if(sY(this,t),!(t instanceof Do))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ci.AcroFormChoiceField=Od,ci.AcroFormListBox=Bd,ci.AcroFormComboBox=Ud,ci.AcroFormEditBox=y1,ci.AcroFormButton=Wi,ci.AcroFormPushButton=v1,ci.AcroFormRadioButton=Vd,ci.AcroFormCheckBox=w1,ci.AcroFormTextField=ih,ci.AcroFormPasswordField=_1,ci.AcroFormAppearance=tr,ci.AcroForm={ChoiceField:Od,ListBox:Bd,ComboBox:Ud,EditBox:y1,Button:Wi,PushButton:v1,RadioButton:Vd,CheckBox:w1,TextField:ih,PasswordField:_1,Appearance:tr},ur.AcroForm={ChoiceField:Od,ListBox:Bd,ComboBox:Ud,EditBox:y1,Button:Wi,PushButton:v1,RadioButton:Vd,CheckBox:w1,TextField:ih,PasswordField:_1,Appearance:tr};ur.AcroForm;function w8(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(k,L){var R,le,ve,ge,ye,ce=r;if((L=L||r)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(W(k))for(ye in n)for(ve=n[ye],R=0;R<ve.length;R+=1){for(ge=!0,le=0;le<ve[R].length;le+=1)if(ve[R][le]!==void 0&&ve[R][le]!==k[le]){ge=!1;break}if(ge===!0){ce=ye;break}}else for(ye in n)for(ve=n[ye],R=0;R<ve.length;R+=1){for(ge=!0,le=0;le<ve[R].length;le+=1)if(ve[R][le]!==void 0&&ve[R][le]!==k.charCodeAt(le)){ge=!1;break}if(ge===!0){ce=ye;break}}return ce===r&&L!==r&&(ce=L),ce},s=function k(L){for(var R=this.internal.write,le=this.internal.putStream,ve=(0,this.internal.getFilters)();ve.indexOf("FlateEncode")!==-1;)ve.splice(ve.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var ge=[];if(ge.push({key:"Type",value:"/XObject"}),ge.push({key:"Subtype",value:"/Image"}),ge.push({key:"Width",value:L.width}),ge.push({key:"Height",value:L.height}),L.colorSpace===w.INDEXED?ge.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(ge.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===w.DEVICE_CMYK&&ge.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ge.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&ge.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var ye="",ce=0,be=L.transparency.length;ce<be;ce++)ye+=L.transparency[ce]+" "+L.transparency[ce]+" ";ge.push({key:"Mask",value:"["+ye+"]"})}L.sMask!==void 0&&ge.push({key:"SMask",value:L.objectId+1+" 0 R"});var Me=L.filter!==void 0?["/"+L.filter]:void 0;if(le({data:L.data,additionalKeyValues:ge,alreadyAppliedFilters:Me,objectId:L.objectId}),R("endobj"),"sMask"in L&&L.sMask!==void 0){var Le,I=(Le=L.sMaskBitsPerComponent)!==null&&Le!==void 0?Le:L.bitsPerComponent,B={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:I,data:L.sMask};"filter"in L&&(B.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(I," /Columns ").concat(L.width),B.filter=L.filter),k.call(this,B)}if(L.colorSpace===w.INDEXED){var U=this.internal.newObject();le({data:T(new Uint8Array(L.palette)),objectId:U}),R("endobj")}},a=function(){var k=this.internal.collections[e+"images"];for(var L in k)s.call(this,k[L])},o=function(){var k,L=this.internal.collections[e+"images"],R=this.internal.write;for(var le in L)R("/I"+(k=L[le]).index,k.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var k=this.internal.collections[e+"images"];return l.call(this),k},h=function(){return Object.keys(this.internal.collections[e+"images"]).length},d=function(k){return typeof t["process"+k.toUpperCase()]=="function"},p=function(k){return Sn(k)==="object"&&k.nodeType===1},f=function(k,L){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var R=""+k.getAttribute("src");if(R.indexOf("data:image/")===0)return x1(unescape(R).split("base64,").pop());var le=t.loadFile(R,!0);if(le!==void 0)return le}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var ve;switch(L){case"PNG":ve="image/png";break;case"WEBP":ve="image/webp";break;default:ve="image/jpeg"}return x1(k.toDataURL(ve,1).split("base64,").pop())}},v=function(k){var L=this.internal.collections[e+"images"];if(L){for(var R in L)if(k===L[R].alias)return L[R]}},x=function(k,L,R){return k||L||(k=-96,L=-96),k<0&&(k=-1*R.width*72/k/this.internal.scaleFactor),L<0&&(L=-1*R.height*72/L/this.internal.scaleFactor),k===0&&(k=L*R.width/R.height),L===0&&(L=k*R.height/R.width),[k,L]},_=function(k,L,R,le,ve,ge){var ye=x.call(this,R,le,ve),ce=this.internal.getCoordinateString,be=this.internal.getVerticalCoordinateString,Me=c.call(this);if(R=ye[0],le=ye[1],Me[ve.index]=ve,ge){ge*=Math.PI/180;var Le=Math.cos(ge),I=Math.sin(ge),B=function(H){return H.toFixed(4)},U=[B(Le),B(I),B(-1*I),B(Le),0,0,"cm"]}this.internal.write("q"),ge?(this.internal.write([1,"0","0",1,ce(k),be(L+le),"cm"].join(" ")),this.internal.write(U.join(" ")),this.internal.write([ce(R),"0","0",ce(le),"0","0","cm"].join(" "))):this.internal.write([ce(R),"0","0",ce(le),ce(k),be(L+le),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ve.index+" Do"),this.internal.write("Q")},w=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=t.__addimage__.sHashCode=function(k){var L,R,le=0;if(typeof k=="string")for(R=k.length,L=0;L<R;L++)le=(le<<5)-le+k.charCodeAt(L),le|=0;else if(W(k))for(R=k.byteLength/2,L=0;L<R;L++)le=(le<<5)-le+k[L],le|=0;return le},j=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var L=!0;return k.length===0&&(L=!1),k.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(L=!1),L},z=t.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var L=k.indexOf(",");return L<0?null:k.substring(0,L).trim().endsWith("base64")?k.substring(L+1):null};t.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var W=t.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},b=t.__addimage__.binaryStringToUint8Array=function(k){for(var L=k.length,R=new Uint8Array(L),le=0;le<L;le++)R[le]=k.charCodeAt(le);return R},T=t.__addimage__.arrayBufferToBinaryString=function(k){for(var L="",R=W(k)?k:new Uint8Array(k),le=0;le<R.length;le+=8192)L+=String.fromCharCode.apply(null,R.subarray(le,le+8192));return L};t.addImage=function(){var k,L,R,le,ve,ge,ye,ce,be;if(typeof arguments[1]=="number"?(L=r,R=arguments[1],le=arguments[2],ve=arguments[3],ge=arguments[4],ye=arguments[5],ce=arguments[6],be=arguments[7]):(L=arguments[1],R=arguments[2],le=arguments[3],ve=arguments[4],ge=arguments[5],ye=arguments[6],ce=arguments[7],be=arguments[8]),Sn(k=arguments[0])==="object"&&!p(k)&&"imageData"in k){var Me=k;k=Me.imageData,L=Me.format||L||r,R=Me.x||R||0,le=Me.y||le||0,ve=Me.w||Me.width||ve,ge=Me.h||Me.height||ge,ye=Me.alias||ye,ce=Me.compression||ce,be=Me.rotation||Me.angle||be}var Le=this.internal.getFilters();if(ce===void 0&&Le.indexOf("FlateEncode")!==-1&&(ce="SLOW"),isNaN(R)||isNaN(le))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var I=A.call(this,k,L,ye,ce);return _.call(this,R,le,ve,ge,I,be),this};var A=function(k,L,R,le){var ve,ge,ye;if(typeof k=="string"&&i(k)===r){k=unescape(k);var ce=F(k,!1);(ce!==""||(ce=t.loadFile(k,!0))!==void 0)&&(k=ce)}if(p(k)&&(k=f(k,L)),L=i(k,L),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((ye=R)==null||ye.length===0)&&(R=function(be){return typeof be=="string"||W(be)?N(be):W(be.data)?N(be.data):null}(k)),(ve=v.call(this,R))||(k instanceof Uint8Array||L==="RGBA"||(ge=k,k=b(k)),ve=this["process"+L.toUpperCase()](k,h.call(this),R,function(be){return be&&typeof be=="string"&&(be=be.toUpperCase()),be in t.image_compression?be:S.NONE}(le),ge)),!ve)throw new Error("An unknown error occurred whilst processing the image.");return ve},F=t.__addimage__.convertBase64ToBinaryString=function(k,L){L=typeof L!="boolean"||L;var R,le="";if(typeof k=="string"){var ve;R=(ve=z(k))!==null&&ve!==void 0?ve:k;try{le=x1(R)}catch(ge){if(L)throw j(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ge.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return le};t.getImageProperties=function(k){var L,R,le="";if(p(k)&&(k=f(k)),typeof k=="string"&&i(k)===r&&((le=F(k,!1))===""&&(le=t.loadFile(k)||""),k=le),R=i(k),!d(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(k instanceof Uint8Array||(k=b(k)),!(L=this["process"+R.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=R,L}})(ur.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};ur.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,h=!1,d=0;d<c.length&&!h;d++)switch((n=c[d]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var p=0;p<c.length;p++){n=c[p];var f=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(x.objId),S=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+f(w(n.contents))+")",s+=" /Popup "+_.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+f(w(S))+") >>",x.content=s;var N=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(s+=" /Open true"),s+=" >>",_.content=s,this.internal.write(x.objId,"0 R",_.objId,"0 R");break;case"freetext":i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var j=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(v(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var z=this.annotations._nameMap[n.options.name];n.options.pageNumber=z.page,n.options.top=z.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(v(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var W=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+W+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:c(n),w:l(r+i),h:c(n+s)},options:a,type:"link"})},t.textWithLink=function(r,n,i,s){var a,o,l=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var h=this.splitTextToSize(r,o).length;a=Math.ceil(c*h)}else o=l,a=c;return this.text(r,n,i,s),i+=.2*c,s.align==="center"&&(n-=l/2),s.align==="right"&&(n-=l),this.link(n,i-c,o,a,s),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(ur.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},o=t.__arabicParser__.isArabicEndLetter=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(x){return a(x)&&i.indexOf(x.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(x){var _=0,w=r,S="",N=0;for(_=0;_<x.length;_+=1)w[x.charCodeAt(_)]!==void 0?(N++,typeof(w=w[x.charCodeAt(_)])=="number"&&(S+=String.fromCharCode(w),w=r,N=0),_===x.length-1&&(w=r,S+=x.charAt(_-(N-1)),_-=N-1,N=0)):(w=r,S+=x.charAt(_-N),_-=N,N=0);return S};t.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(x,_,w){return a(x)?s(x)===!1?-1:!c(x)||!a(_)&&!a(w)||!a(w)&&o(_)||o(x)&&!a(_)||o(x)&&l(_)||o(x)&&o(_)?0:h(x)&&a(_)&&!o(_)&&a(w)&&c(w)?3:o(x)||!a(w)?1:2:-1},f=function(x){var _=0,w=0,S=0,N="",j="",z="",W=(x=x||"").split("\\s+"),b=[];for(_=0;_<W.length;_+=1){for(b.push(""),w=0;w<W[_].length;w+=1)N=W[_][w],j=W[_][w-1],z=W[_][w+1],a(N)?(S=p(N,j,z),b[_]+=S!==-1?String.fromCharCode(e[N.charCodeAt(0)][S]):N):b[_]+=N;b[_]=d(b[_])}return b.join(" ")},v=t.__arabicParser__.processArabic=t.processArabic=function(){var x,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(_)){var S=0;for(w=[],S=0;S<_.length;S+=1)Array.isArray(_[S])?w.push([f(_[S][0]),_[S][1],_[S][2]]):w.push([f(_[S])]);x=w}else x=f(_);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};t.events.push(["preProcessText",v])}(ur.API),ur.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ur.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(x){l=x}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(x){v=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){n.call(this);var h=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),p=c.scaleFactor||this.internal.scaleFactor,f=0,v=0,x=0,_=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=c.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(N,j){return N.concat(_.splitTextToSize(j,w))},[])):l=Array.isArray(l)?l:[l];for(var S=0;S<l.length;S++)f<(x=this.getStringUnitWidth(l[S],{font:d})*h)&&(f=x);return f!==0&&(v=l.length),{w:f/=p,h:Math.max((v*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var c=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,f&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,h,d,p){if(n.call(this),!h)throw new Error("No data for PDF table.");var f,v,x,_,w=[],S=[],N=[],j={},z={},W=[],b=[],T=(p=p||{}).autoSize||!1,A=p.printHeaders!==!1,F=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,k=p.margins||Object.assign({width:this.getPageWidth()},e),L=typeof p.padding=="number"?p.padding:3,R=p.headerBackgroundColor||"#c8c8c8",le=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=A,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=le,this.setFontSize(F),d==null)S=w=Object.keys(h[0]),N=w.map(function(){return"left"});else if(Array.isArray(d)&&Sn(d[0])==="object")for(w=d.map(function(Me){return Me.name}),S=d.map(function(Me){return Me.prompt||Me.name||""}),N=d.map(function(Me){return Me.align||"left"}),f=0;f<d.length;f+=1)z[d[f].name]=.7499990551181103*d[f].width;else Array.isArray(d)&&typeof d[0]=="string"&&(S=w=d,N=w.map(function(){return"left"}));if(T||Array.isArray(d)&&typeof d[0]=="string")for(f=0;f<w.length;f+=1){for(j[_=w[f]]=h.map(function(Me){return Me[_]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(S[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=j[_],this.setFont(void 0,"normal"),x=0;x<v.length;x+=1)W.push(this.getTextDimensions(v[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);z[_]=Math.max.apply(null,W)+L+L,W=[]}if(A){var ve={};for(f=0;f<w.length;f+=1)ve[w[f]]={},ve[w[f]].text=S[f],ve[w[f]].align=N[f];var ge=o.call(this,ve,z);b=w.map(function(Me){return new s(l,c,z[Me],ge,ve[Me].text,void 0,ve[Me].align)}),this.setTableHeaderRow(b),this.printHeaderRow(1,!1)}var ye=d.reduce(function(Me,Le){return Me[Le.name]=Le.align,Me},{});for(f=0;f<h.length;f+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:f,data:h[f]},this);var ce=o.call(this,h[f],z);for(x=0;x<w.length;x+=1){var be=h[f][w[x]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:f,col:x,data:be},this),a.call(this,new s(l,c,z[w[x]],ce,be,f+2,ye[w[x]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var h=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(f){var v=l[f];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,c[f]-h-h)},this).map(function(f){return this.getLineHeightFactor()*f.length*d/p+h+h},this).reduce(function(f,v){return Math.max(f,v)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){h=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(h.y=this.internal.__cell__.margins.top||0,p.push(h)),h.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,h),this.setTextColor(v)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(ur.API);var _8={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},b8=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],C5=w8(b8),S8=[100,200,300,400,500,600,700,800,900],oY=w8(S8);function Av(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return _8[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),i=function(s){return typeof C5[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function LN(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var lY={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},jN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function FN(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function DN(t){return t.trimLeft()}function cY(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function uY(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Ag,MN,ON,Hh,Ng,BN,UN,VN,Nv=["times"];function zN(t,e,r,n,i){var s=4,a=$N;switch(i){case ur.API.image_compression.FAST:s=1,a=HN;break;case ur.API.image_compression.MEDIUM:s=6,a=qN;break;case ur.API.image_compression.SLOW:s=9,a=WN}t=function(l,c,h,d){for(var p,f=l.length/c,v=new Uint8Array(l.length+f),x=[hY,HN,$N,qN,WN],_=0;_<f;_+=1){var w=_*c,S=l.subarray(w,w+c);if(d)v.set(d(S,h,p),w+_);else{for(var N=x.length,j=[],z=0;z<N;z+=1)j[z]=x[z](S,h,p);var W=fY(j.concat());v.set(j[W],w+_)}p=S}return v}(t,e,Math.ceil(r*n/8),a);var o=b5(t,{level:s});return ur.API.__addimage__.arrayBufferToBinaryString(o)}function hY(t){var e=Array.apply([],t);return e.unshift(0),e}function HN(t,e){var r=t.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var s=t[i-e]||0;n[i+1]=t[i]-s+256&255}return n}function $N(t,e,r){var n=t.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var a=r&&r[s]||0;i[s+1]=t[s]-a+256&255}return i}function qN(t,e,r){var n=t.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var a=t[s-e]||0,o=r&&r[s]||0;i[s+1]=t[s]+256-(a+o>>>1)&255}return i}function WN(t,e,r){var n=t.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var a=dY(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);i[s+1]=t[s]-a+256&255}return i}function dY(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),i=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=i&&n<=s?t:i<=s?e:r}function fY(t){var e=t.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Tv(t,e,r){var n=e*r,i=Math.floor(n/8),s=16-(n-8*i+r),a=(1<<r)-1;return E8(t,i)>>s&a}function KN(t,e,r,n){var i=r*n,s=Math.floor(i/8),a=16-(i-8*s+n),o=(1<<n)-1,l=(e&o)<<a;(function(c,h,d){if(h+1<c.byteLength)c.setUint16(h,d,!1);else{var p=d>>8&255;c.setUint8(h,p)}})(t,s,E8(t,s)&~(o<<a)&65535|l)}function E8(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function pY(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,a=1<<1+(7&i);t[e++],t[e++];var o=null,l=null;s&&(o=e,l=a,e+=3*a);var c=!0,h=[],d=0,p=null,f=0,v=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,v=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=t[e++];d=t[e++]|t[e++]<<8,p=t[e++],1&x||(p=null),f=x>>2&7,e++;break;case 254:for(;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,j=t[e++],z=j>>6&1,W=1<<1+(7&j),b=o,T=l,A=!1;j>>7&&(A=!0,b=e,T=W,e+=3*W);var F=e;for(e++;;){var k;if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}h.push({x:_,y:w,width:S,height:N,has_local_palette:A,palette_offset:b,palette_size:T,data_offset:F,data_length:e-F,transparent_index:p,interlaced:!!z,delay:d,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return v},this.frameInfo=function(L){if(L<0||L>=h.length)throw new Error("Frame index out of range.");return h[L]},this.decodeAndBlitFrameBGRA=function(L,R){var le=this.frameInfo(L),ve=le.width*le.height,ge=new Uint8Array(ve);GN(t,le.data_offset,ge,ve);var ye=le.palette_offset,ce=le.transparent_index;ce===null&&(ce=256);var be=le.width,Me=r-be,Le=be,I=4*(le.y*r+le.x),B=4*((le.y+le.height)*r+le.x),U=I,H=4*Me;le.interlaced===!0&&(H+=4*r*7);for(var te=8,fe=0,Ae=ge.length;fe<Ae;++fe){var Te=ge[fe];if(Le===0&&(Le=be,(U+=H)>=B&&(H=4*Me+4*r*(te-1),U=I+(be+Me)*(te<<1),te>>=1)),Te===ce)U+=4;else{var Pe=t[ye+3*Te],et=t[ye+3*Te+1],Qe=t[ye+3*Te+2];R[U++]=Qe,R[U++]=et,R[U++]=Pe,R[U++]=255}--Le}},this.decodeAndBlitFrameRGBA=function(L,R){var le=this.frameInfo(L),ve=le.width*le.height,ge=new Uint8Array(ve);GN(t,le.data_offset,ge,ve);var ye=le.palette_offset,ce=le.transparent_index;ce===null&&(ce=256);var be=le.width,Me=r-be,Le=be,I=4*(le.y*r+le.x),B=4*((le.y+le.height)*r+le.x),U=I,H=4*Me;le.interlaced===!0&&(H+=4*r*7);for(var te=8,fe=0,Ae=ge.length;fe<Ae;++fe){var Te=ge[fe];if(Le===0&&(Le=be,(U+=H)>=B&&(H=4*Me+4*r*(te-1),U=I+(be+Me)*(te<<1),te>>=1)),Te===ce)U+=4;else{var Pe=t[ye+3*Te],et=t[ye+3*Te+1],Qe=t[ye+3*Te+2];R[U++]=Pe,R[U++]=et,R[U++]=Qe,R[U++]=255}--Le}}}function GN(t,e,r,n){for(var i=t[e++],s=1<<i,a=s+1,o=a+1,l=i+1,c=(1<<l)-1,h=0,d=0,p=0,f=t[e++],v=new Int32Array(4096),x=null;;){for(;h<16&&f!==0;)d|=t[e++]<<h,h+=8,f===1?f=t[e++]:--f;if(h<l)break;var _=d&c;if(d>>=l,h-=l,_!==s){if(_===a)break;for(var w=_<o?_:x,S=0,N=w;N>s;)N=v[N]>>8,++S;var j=N;if(p+S+(w!==_?1:0)>n)return void Fn.log("Warning, gif stream longer than expected.");r[p++]=j;var z=p+=S;for(w!==_&&(r[p++]=j),N=w;S--;)N=v[N],r[--z]=255&N,N>>=8;x!==null&&o<4096&&(v[o++]=x<<8|j,o>=c+1&&l<12&&(++l,c=c<<1|1)),x=_}else o=a+1,c=(1<<(l=i+1))-1,x=null}return p!==n&&Fn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function kv(t){var e,r,n,i,s,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),h=new Array(64),d=new Array(65535),p=new Array(65535),f=new Array(64),v=new Array(64),x=[],_=0,w=7,S=new Array(64),N=new Array(64),j=new Array(64),z=new Array(256),W=new Array(2048),b=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],le=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ve=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ge(I,B){for(var U=0,H=0,te=new Array,fe=1;fe<=16;fe++){for(var Ae=1;Ae<=I[fe];Ae++)te[B[H]]=[],te[B[H]][0]=U,te[B[H]][1]=fe,H++,U++;U*=2}return te}function ye(I){for(var B=I[0],U=I[1]-1;U>=0;)B&1<<U&&(_|=1<<w),U--,--w<0&&(_==255?(ce(255),ce(0)):ce(_),w=7,_=0)}function ce(I){x.push(I)}function be(I){ce(I>>8&255),ce(255&I)}function Me(I,B,U,H,te){for(var fe,Ae=te[0],Te=te[240],Pe=function(me,Ke){var Je,ct,Et,Bt,Ee,it,mt,bt,Rt,Ot,Vt=0;for(Rt=0;Rt<8;++Rt){Je=me[Vt],ct=me[Vt+1],Et=me[Vt+2],Bt=me[Vt+3],Ee=me[Vt+4],it=me[Vt+5],mt=me[Vt+6];var Vr=Je+(bt=me[Vt+7]),mr=Je-bt,qe=ct+mt,Ft=ct-mt,wr=Et+it,Gt=Et-it,Rr=Bt+Ee,rr=Bt-Ee,Zt=Vr+Rr,zr=Vr-Rr,$t=qe+wr,Ze=qe-wr;me[Vt]=Zt+$t,me[Vt+4]=Zt-$t;var It=.707106781*(Ze+zr);me[Vt+2]=zr+It,me[Vt+6]=zr-It;var cn=.382683433*((Zt=rr+Gt)-(Ze=Ft+mr)),kr=.5411961*Zt+cn,vr=1.306562965*Ze+cn,dn=.707106781*($t=Gt+Ft),nr=mr+dn,zn=mr-dn;me[Vt+5]=zn+kr,me[Vt+3]=zn-kr,me[Vt+1]=nr+vr,me[Vt+7]=nr-vr,Vt+=8}for(Vt=0,Rt=0;Rt<8;++Rt){Je=me[Vt],ct=me[Vt+8],Et=me[Vt+16],Bt=me[Vt+24],Ee=me[Vt+32],it=me[Vt+40],mt=me[Vt+48];var on=Je+(bt=me[Vt+56]),xe=Je-bt,Re=ct+mt,Ve=ct-mt,tt=Et+it,O=Et-it,Z=Bt+Ee,G=Bt-Ee,Y=on+Z,ee=on-Z,re=Re+tt,ke=Re-tt;me[Vt]=Y+re,me[Vt+32]=Y-re;var pe=.707106781*(ke+ee);me[Vt+16]=ee+pe,me[Vt+48]=ee-pe;var Ne=.382683433*((Y=G+O)-(ke=Ve+xe)),je=.5411961*Y+Ne,Oe=1.306562965*ke+Ne,st=.707106781*(re=O+Ve),pt=xe+st,gt=xe-st;me[Vt+40]=gt+je,me[Vt+24]=gt-je,me[Vt+8]=pt+Oe,me[Vt+56]=pt-Oe,Vt++}for(Rt=0;Rt<64;++Rt)Ot=me[Rt]*Ke[Rt],f[Rt]=Ot>0?Ot+.5|0:Ot-.5|0;return f}(I,B),et=0;et<64;++et)v[b[et]]=Pe[et];var Qe=v[0]-U;U=v[0],Qe==0?ye(H[0]):(ye(H[p[fe=32767+Qe]]),ye(d[fe]));for(var dt=63;dt>0&&v[dt]==0;)dt--;if(dt==0)return ye(Ae),U;for(var wt,ae=1;ae<=dt;){for(var Ie=ae;v[ae]==0&&ae<=dt;)++ae;var ne=ae-Ie;if(ne>=16){wt=ne>>4;for(var we=1;we<=wt;++we)ye(Te);ne&=15}fe=32767+v[ae],ye(te[(ne<<4)+p[fe]]),ye(d[fe]),ae++}return dt!=63&&ye(Ae),U}function Le(I){I=Math.min(Math.max(I,1),100),s!=I&&(function(B){for(var U=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var te=a((U[H]*B+50)/100);te=Math.min(Math.max(te,1),255),o[b[H]]=te}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ae=0;Ae<64;Ae++){var Te=a((fe[Ae]*B+50)/100);Te=Math.min(Math.max(Te,1),255),l[b[Ae]]=Te}for(var Pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],et=0,Qe=0;Qe<8;Qe++)for(var dt=0;dt<8;dt++)c[et]=1/(o[b[et]]*Pe[Qe]*Pe[dt]*8),h[et]=1/(l[b[et]]*Pe[Qe]*Pe[dt]*8),et++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),s=I)}this.encode=function(I,B){B&&Le(B),x=new Array,_=0,w=7,be(65496),be(65504),be(16),ce(74),ce(70),ce(73),ce(70),ce(0),ce(1),ce(1),ce(0),be(1),be(1),ce(0),ce(0),function(){be(65499),be(132),ce(0);for(var ct=0;ct<64;ct++)ce(o[ct]);ce(1);for(var Et=0;Et<64;Et++)ce(l[Et])}(),function(ct,Et){be(65472),be(17),ce(8),be(Et),be(ct),ce(3),ce(1),ce(17),ce(0),ce(2),ce(17),ce(1),ce(3),ce(17),ce(1)}(I.width,I.height),function(){be(65476),be(418),ce(0);for(var ct=0;ct<16;ct++)ce(T[ct+1]);for(var Et=0;Et<=11;Et++)ce(A[Et]);ce(16);for(var Bt=0;Bt<16;Bt++)ce(F[Bt+1]);for(var Ee=0;Ee<=161;Ee++)ce(k[Ee]);ce(1);for(var it=0;it<16;it++)ce(L[it+1]);for(var mt=0;mt<=11;mt++)ce(R[mt]);ce(17);for(var bt=0;bt<16;bt++)ce(le[bt+1]);for(var Rt=0;Rt<=161;Rt++)ce(ve[Rt])}(),be(65498),be(12),ce(3),ce(1),ce(0),ce(2),ce(17),ce(3),ce(17),ce(0),ce(63),ce(0);var U=0,H=0,te=0;_=0,w=7,this.encode.displayName="_encode_";for(var fe,Ae,Te,Pe,et,Qe,dt,wt,ae,Ie=I.data,ne=I.width,we=I.height,me=4*ne,Ke=0;Ke<we;){for(fe=0;fe<me;){for(et=me*Ke+fe,dt=-1,wt=0,ae=0;ae<64;ae++)Qe=et+(wt=ae>>3)*me+(dt=4*(7&ae)),Ke+wt>=we&&(Qe-=me*(Ke+1+wt-we)),fe+dt>=me&&(Qe-=fe+dt-me+4),Ae=Ie[Qe++],Te=Ie[Qe++],Pe=Ie[Qe++],S[ae]=(W[Ae]+W[Te+256|0]+W[Pe+512|0]>>16)-128,N[ae]=(W[Ae+768|0]+W[Te+1024|0]+W[Pe+1280|0]>>16)-128,j[ae]=(W[Ae+1280|0]+W[Te+1536|0]+W[Pe+1792|0]>>16)-128;U=Me(S,c,U,e,n),H=Me(N,h,H,r,i),te=Me(j,h,te,r,i),fe+=32}Ke+=8}if(w>=0){var Je=[];Je[1]=w+1,Je[0]=(1<<w+1)-1,ye(Je)}return be(65497),new Uint8Array(x)},t=t||50,function(){for(var I=String.fromCharCode,B=0;B<256;B++)z[B]=I(B)}(),e=ge(T,A),r=ge(L,R),n=ge(F,k),i=ge(le,ve),function(){for(var I=1,B=2,U=1;U<=15;U++){for(var H=I;H<B;H++)p[32767+H]=U,d[32767+H]=[],d[32767+H][1]=U,d[32767+H][0]=H;for(var te=-(B-1);te<=-I;te++)p[32767+te]=U,d[32767+te]=[],d[32767+te][1]=U,d[32767+te][0]=B-1+te;I<<=1,B<<=1}}(),function(){for(var I=0;I<256;I++)W[I]=19595*I,W[I+256|0]=38470*I,W[I+512|0]=7471*I+32768,W[I+768|0]=-11059*I,W[I+1024|0]=-21709*I,W[I+1280|0]=32768*I+8421375,W[I+1536|0]=-27439*I,W[I+1792|0]=-5329*I}(),Le(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function xo(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function YN(t){function e(A){if(!A)throw Error("assert :P")}function r(A,F,k){for(var L=0;4>L;L++)if(A[F+L]!=k.charCodeAt(L))return!0;return!1}function n(A,F,k,L,R){for(var le=0;le<R;le++)A[F+le]=k[L+le]}function i(A,F,k,L){for(var R=0;R<L;R++)A[F+R]=k}function s(A){return new Int32Array(A)}function a(A,F){for(var k=[],L=0;L<A;L++)k.push(new F);return k}function o(A,F){var k=[];return function L(R,le,ve){for(var ge=ve[le],ye=0;ye<ge&&(R.push(ve.length>le+1?[]:new F),!(ve.length<le+1));ye++)L(R[ye],le+1,ve)}(k,0,A),k}var l=function(){var A=this;function F(m,y){for(var C=1<<y-1>>>0;m&C;)C>>>=1;return C?(m&C-1)+C:m}function k(m,y,C,D,K){e(!(D%C));do m[y+(D-=C)]=K;while(0<D)}function L(m,y,C,D,K){if(e(2328>=K),512>=K)var X=s(512);else if((X=s(K))==null)return 0;return function(J,ie,oe,he,Fe,Ge){var de,De,He=ie,at=1<<oe,We=s(16),ot=s(16);for(e(Fe!=0),e(he!=null),e(J!=null),e(0<oe),De=0;De<Fe;++De){if(15<he[De])return 0;++We[he[De]]}if(We[0]==Fe)return 0;for(ot[1]=0,de=1;15>de;++de){if(We[de]>1<<de)return 0;ot[de+1]=ot[de]+We[de]}for(De=0;De<Fe;++De)de=he[De],0<he[De]&&(Ge[ot[de]++]=De);if(ot[15]==1)return(he=new R).g=0,he.value=Ge[0],k(J,He,1,at,he),at;var ht,St=-1,_t=at-1,cr=0,Jt=1,jr=1,sr=1<<oe;for(De=0,de=1,Fe=2;de<=oe;++de,Fe<<=1){if(Jt+=jr<<=1,0>(jr-=We[de]))return 0;for(;0<We[de];--We[de])(he=new R).g=de,he.value=Ge[De++],k(J,He+cr,Fe,sr,he),cr=F(cr,de)}for(de=oe+1,Fe=2;15>=de;++de,Fe<<=1){if(Jt+=jr<<=1,0>(jr-=We[de]))return 0;for(;0<We[de];--We[de]){if(he=new R,(cr&_t)!=St){for(He+=sr,ht=1<<(St=de)-oe;15>St&&!(0>=(ht-=We[St]));)++St,ht<<=1;at+=sr=1<<(ht=St-oe),J[ie+(St=cr&_t)].g=ht+oe,J[ie+St].value=He-ie-St}he.g=de-oe,he.value=Ge[De++],k(J,He+(cr>>oe),Fe,sr,he),cr=F(cr,de)}}return Jt!=2*ot[15]-1?0:at}(m,y,C,D,K,X)}function R(){this.value=this.g=0}function le(){this.value=this.g=0}function ve(){this.G=a(5,R),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(ju,le)}function ge(m,y,C,D){e(m!=null),e(y!=null),e(2147483648>D),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=y,m.pa=C,m.Jd=y,m.Yc=C+D,m.Zc=4<=D?C+D-4+1:C,Ae(m)}function ye(m,y){for(var C=0;0<y--;)C|=Pe(m,128)<<y;return C}function ce(m,y){var C=ye(m,y);return Te(m)?-C:C}function be(m,y,C,D){var K,X=0;for(e(m!=null),e(y!=null),e(4294967288>D),m.Sb=D,m.Ra=0,m.u=0,m.h=0,4<D&&(D=4),K=0;K<D;++K)X+=y[C+K]<<8*K;m.Ra=X,m.bb=D,m.oa=y,m.pa=C}function Me(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<cc-8>>>0,++m.bb,m.u-=8;H(m)&&(m.h=1,m.u=0)}function Le(m,y){if(e(0<=y),!m.h&&y<=ha){var C=U(m)&ua[y];return m.u+=y,Me(m),C}return m.h=1,m.u=0}function I(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function B(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(m){return m.Ra>>>(m.u&cc-1)>>>0}function H(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>cc}function te(m,y){m.u=y,m.h=H(m)}function fe(m){m.u>=yl&&(e(m.u>=yl),Me(m))}function Ae(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function Te(m){return ye(m,1)}function Pe(m,y){var C=m.Ca;0>m.b&&Ae(m);var D=m.b,K=C*y>>>8,X=(m.I>>>D>K)+0;for(X?(C-=K,m.I-=K+1<<D>>>0):C=K+1,D=C,K=0;256<=D;)K+=8,D>>=8;return D=7^K+uc[D],m.b-=D,m.Ca=(C<<D)-1,X}function et(m,y,C){m[y+0]=C>>24&255,m[y+1]=C>>16&255,m[y+2]=C>>8&255,m[y+3]=255&C}function Qe(m,y){return m[y+0]|m[y+1]<<8}function dt(m,y){return Qe(m,y)|m[y+2]<<16}function wt(m,y){return Qe(m,y)|Qe(m,y+2)<<16}function ae(m,y){var C=1<<y;return e(m!=null),e(0<y),m.X=s(C),m.X==null?0:(m.Mb=32-y,m.Xa=y,1)}function Ie(m,y){e(m!=null),e(y!=null),e(m.Xa==y.Xa),n(y.X,0,m.X,0,1<<y.Xa)}function ne(){this.X=[],this.Xa=this.Mb=0}function we(m,y,C,D){e(C!=null),e(D!=null);var K=C[0],X=D[0];return K==0&&(K=(m*X+y/2)/y),X==0&&(X=(y*K+m/2)/m),0>=K||0>=X?0:(C[0]=K,D[0]=X,1)}function me(m,y){return m+(1<<y)-1>>>y}function Ke(m,y){return((4278255360&m)+(4278255360&y)>>>0&4278255360)+((16711935&m)+(16711935&y)>>>0&16711935)>>>0}function Je(m,y){A[y]=function(C,D,K,X,J,ie,oe){var he;for(he=0;he<J;++he){var Fe=A[m](ie[oe+he-1],K,X+he);ie[oe+he]=Ke(C[D+he],Fe)}}}function ct(){this.ud=this.hd=this.jd=0}function Et(m,y){return((4278124286&(m^y))>>>1)+(m&y)>>>0}function Bt(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function Ee(m,y){return Bt(m+(m-y+.5>>1))}function it(m,y,C){return Math.abs(y-C)-Math.abs(m-C)}function mt(m,y,C,D,K,X,J){for(D=X[J-1],C=0;C<K;++C)X[J+C]=D=Ke(m[y+C],D)}function bt(m,y,C,D,K){var X;for(X=0;X<C;++X){var J=m[y+X],ie=J>>8&255,oe=16711935&(oe=(oe=16711935&J)+((ie<<16)+ie));D[K+X]=(4278255360&J)+oe>>>0}}function Rt(m,y){y.jd=255&m,y.hd=m>>8&255,y.ud=m>>16&255}function Ot(m,y,C,D,K,X){var J;for(J=0;J<D;++J){var ie=y[C+J],oe=ie>>>8,he=ie,Fe=255&(Fe=(Fe=ie>>>16)+((m.jd<<24>>24)*(oe<<24>>24)>>>5));he=255&(he=(he+=(m.hd<<24>>24)*(oe<<24>>24)>>>5)+((m.ud<<24>>24)*(Fe<<24>>24)>>>5)),K[X+J]=(4278255360&ie)+(Fe<<16)+he}}function Vt(m,y,C,D,K){A[y]=function(X,J,ie,oe,he,Fe,Ge,de,De){for(oe=Ge;oe<de;++oe)for(Ge=0;Ge<De;++Ge)he[Fe++]=K(ie[D(X[J++])])},A[m]=function(X,J,ie,oe,he,Fe,Ge){var de=8>>X.b,De=X.Ea,He=X.K[0],at=X.w;if(8>de)for(X=(1<<X.b)-1,at=(1<<de)-1;J<ie;++J){var We,ot=0;for(We=0;We<De;++We)We&X||(ot=D(oe[he++])),Fe[Ge++]=K(He[ot&at]),ot>>=de}else A["VP8LMapColor"+C](oe,he,He,at,Fe,Ge,J,ie,De)}}function Vr(m,y,C,D,K){for(C=y+C;y<C;){var X=m[y++];D[K++]=X>>16&255,D[K++]=X>>8&255,D[K++]=255&X}}function mr(m,y,C,D,K){for(C=y+C;y<C;){var X=m[y++];D[K++]=X>>16&255,D[K++]=X>>8&255,D[K++]=255&X,D[K++]=X>>24&255}}function qe(m,y,C,D,K){for(C=y+C;y<C;){var X=(J=m[y++])>>16&240|J>>12&15,J=240&J|J>>28&15;D[K++]=X,D[K++]=J}}function Ft(m,y,C,D,K){for(C=y+C;y<C;){var X=(J=m[y++])>>16&248|J>>13&7,J=J>>5&224|J>>3&31;D[K++]=X,D[K++]=J}}function wr(m,y,C,D,K){for(C=y+C;y<C;){var X=m[y++];D[K++]=255&X,D[K++]=X>>8&255,D[K++]=X>>16&255}}function Gt(m,y,C,D,K,X){if(X==0)for(C=y+C;y<C;)et(D,((X=m[y++])[0]>>24|X[1]>>8&65280|X[2]<<8&16711680|X[3]<<24)>>>0),K+=32;else n(D,K,m,y,C)}function Rr(m,y){A[y][0]=A[m+"0"],A[y][1]=A[m+"1"],A[y][2]=A[m+"2"],A[y][3]=A[m+"3"],A[y][4]=A[m+"4"],A[y][5]=A[m+"5"],A[y][6]=A[m+"6"],A[y][7]=A[m+"7"],A[y][8]=A[m+"8"],A[y][9]=A[m+"9"],A[y][10]=A[m+"10"],A[y][11]=A[m+"11"],A[y][12]=A[m+"12"],A[y][13]=A[m+"13"],A[y][14]=A[m+"0"],A[y][15]=A[m+"0"]}function rr(m){return m==G2||m==Y2||m==Rm||m==X2}function Zt(){this.eb=[],this.size=this.A=this.fb=0}function zr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $t(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Zt,this.f.kb=new zr,this.sd=null}function Ze(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function It(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function cn(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function kr(m,y){var C=m.T,D=y.ba.f.RGBA,K=D.eb,X=D.fb+m.ka*D.A,J=Ka[y.ba.S],ie=m.y,oe=m.O,he=m.f,Fe=m.N,Ge=m.ea,de=m.W,De=y.cc,He=y.dc,at=y.Mc,We=y.Nc,ot=m.ka,ht=m.ka+m.T,St=m.U,_t=St+1>>1;for(ot==0?J(ie,oe,null,null,he,Fe,Ge,de,he,Fe,Ge,de,K,X,null,null,St):(J(y.ec,y.fc,ie,oe,De,He,at,We,he,Fe,Ge,de,K,X-D.A,K,X,St),++C);ot+2<ht;ot+=2)De=he,He=Fe,at=Ge,We=de,Fe+=m.Rc,de+=m.Rc,X+=2*D.A,J(ie,(oe+=2*m.fa)-m.fa,ie,oe,De,He,at,We,he,Fe,Ge,de,K,X-D.A,K,X,St);return oe+=m.fa,m.j+ht<m.o?(n(y.ec,y.fc,ie,oe,St),n(y.cc,y.dc,he,Fe,_t),n(y.Mc,y.Nc,Ge,de,_t),C--):1&ht||J(ie,oe,null,null,he,Fe,Ge,de,he,Fe,Ge,de,K,X+D.A,null,null,St),C}function vr(m,y,C){var D=m.F,K=[m.J];if(D!=null){var X=m.U,J=y.ba.S,ie=J==Pm||J==Rm;y=y.ba.f.RGBA;var oe=[0],he=m.ka;oe[0]=m.T,m.Kb&&(he==0?--oe[0]:(--he,K[0]-=m.width),m.j+m.ka+m.T==m.o&&(oe[0]=m.o-m.j-he));var Fe=y.eb;he=y.fb+he*y.A,m=P4(D,K[0],m.width,X,oe,Fe,he+(ie?0:3),y.A),e(C==oe),m&&rr(J)&&Hf(Fe,he,ie,X,oe,y.A)}return 0}function dn(m){var y=m.ma,C=y.ba.S,D=11>C,K=C==Cm||C==Im||C==Pm||C==K2||C==12||rr(C);if(y.memory=null,y.Ib=null,y.Jb=null,y.Nd=null,!Ff(y.Oa,m,K?11:12))return 0;if(K&&rr(C)&&Nr(),m.da)alert("todo:use_scaling");else{if(D){if(y.Ib=cn,m.Kb){if(C=m.U+1>>1,y.memory=s(m.U+2*C),y.memory==null)return 0;y.ec=y.memory,y.fc=0,y.cc=y.ec,y.dc=y.fc+m.U,y.Mc=y.cc,y.Nc=y.dc+C,y.Ib=kr,Nr()}}else alert("todo:EmitYUV");K&&(y.Jb=vr,D&&Xe())}if(D&&!K4){for(m=0;256>m;++m)Xj[m]=89858*(m-128)+jm>>Lm,Zj[m]=-22014*(m-128)+jm,Jj[m]=-45773*(m-128),Qj[m]=113618*(m-128)+jm>>Lm;for(m=qf;m<Z2;++m)y=76283*(m-16)+jm>>Lm,eF[m-qf]=Ir(y,255),tF[m-qf]=Ir(y+8>>4,15);K4=1}return 1}function nr(m){var y=m.ma,C=m.U,D=m.T;return e(!(1&m.ka)),0>=C||0>=D?0:(C=y.Ib(m,y),y.Jb!=null&&y.Jb(m,y,C),y.Dc+=C,1)}function zn(m){m.ma.memory=null}function on(m,y,C,D){return Le(m,8)!=47?0:(y[0]=Le(m,14)+1,C[0]=Le(m,14)+1,D[0]=Le(m,1),Le(m,3)!=0?0:!m.h)}function xe(m,y){if(4>m)return m+1;var C=m-2>>1;return(2+(1&m)<<C)+Le(y,C)+1}function Re(m,y){return 120<y?y-120:1<=(C=((C=Dj[y-1])>>4)*m+(8-(15&C)))?C:1;var C}function Ve(m,y,C){var D=U(C),K=m[y+=255&D].g-8;return 0<K&&(te(C,C.u+8),D=U(C),y+=m[y].value,y+=D&(1<<K)-1),te(C,C.u+m[y].g),m[y].value}function tt(m,y,C){return C.g+=m.g,C.value+=m.value<<y>>>0,e(8>=C.g),m.g}function O(m,y,C){var D=m.xc;return e((y=D==0?0:m.vc[m.md*(C>>D)+(y>>D)])<m.Wb),m.Ya[y]}function Z(m,y,C,D){var K=m.ab,X=m.c*y,J=m.C;y=J+y;var ie=C,oe=D;for(D=m.Ta,C=m.Ua;0<K--;){var he=m.gc[K],Fe=J,Ge=y,de=ie,De=oe,He=(oe=D,ie=C,he.Ea);switch(e(Fe<Ge),e(Ge<=he.nc),he.hc){case 2:pi(de,De,(Ge-Fe)*He,oe,ie);break;case 0:var at=Fe,We=Ge,ot=oe,ht=ie,St=(sr=he).Ea;at==0&&(Mf(de,De,null,null,1,ot,ht),mt(de,De+1,0,0,St-1,ot,ht+1),De+=St,ht+=St,++at);for(var _t=1<<sr.b,cr=_t-1,Jt=me(St,sr.b),jr=sr.K,sr=sr.w+(at>>sr.b)*Jt;at<We;){var Zr=jr,Di=sr,Fr=1;for(Dh(de,De,ot,ht-St,1,ot,ht);Fr<St;){var ar=(Fr&~cr)+_t;ar>St&&(ar=St),(0,Bf[Zr[Di++]>>8&15])(de,De+ +Fr,ot,ht+Fr-St,ar-Fr,ot,ht+Fr),Fr=ar}De+=St,ht+=St,++at&cr||(sr+=Jt)}Ge!=he.nc&&n(oe,ie-He,oe,ie+(Ge-Fe-1)*He,He);break;case 1:for(He=de,We=De,St=(de=he.Ea)-(ht=de&~(ot=(De=1<<he.b)-1)),at=me(de,he.b),_t=he.K,he=he.w+(Fe>>he.b)*at;Fe<Ge;){for(cr=_t,Jt=he,jr=new ct,sr=We+ht,Zr=We+de;We<sr;)Rt(cr[Jt++],jr),Uf(jr,He,We,De,oe,ie),We+=De,ie+=De;We<Zr&&(Rt(cr[Jt++],jr),Uf(jr,He,We,St,oe,ie),We+=St,ie+=St),++Fe&ot||(he+=at)}break;case 3:if(de==oe&&De==ie&&0<he.b){for(We=oe,de=He=ie+(Ge-Fe)*He-(ht=(Ge-Fe)*me(he.Ea,he.b)),De=oe,ot=ie,at=[],ht=(St=ht)-1;0<=ht;--ht)at[ht]=De[ot+ht];for(ht=St-1;0<=ht;--ht)We[de+ht]=at[ht];Am(he,Fe,Ge,oe,He,oe,ie)}else Am(he,Fe,Ge,de,De,oe,ie)}ie=D,oe=C}oe!=C&&n(D,C,ie,oe,X)}function G(m,y){var C=m.V,D=m.Ba+m.c*m.C,K=y-m.C;if(e(y<=m.l.o),e(16>=K),0<K){var X=m.l,J=m.Ta,ie=m.Ua,oe=X.width;if(Z(m,K,C,D),K=ie=[ie],e((C=m.C)<(D=y)),e(X.v<X.va),D>X.o&&(D=X.o),C<X.j){var he=X.j-C;C=X.j,K[0]+=he*oe}if(C>=D?C=0:(K[0]+=4*X.v,X.ka=C-X.j,X.U=X.va-X.v,X.T=D-C,C=1),C){if(ie=ie[0],11>(C=m.ca).S){var Fe=C.f.RGBA,Ge=(D=C.S,K=X.U,X=X.T,he=Fe.eb,Fe.A),de=X;for(Fe=Fe.fb+m.Ma*Fe.A;0<de--;){var De=J,He=ie,at=K,We=he,ot=Fe;switch(D){case km:Vf(De,He,at,We,ot);break;case Cm:hc(De,He,at,We,ot);break;case G2:hc(De,He,at,We,ot),Hf(We,ot,0,at,1,0);break;case O4:Fu(De,He,at,We,ot);break;case Im:Gt(De,He,at,We,ot,1);break;case Y2:Gt(De,He,at,We,ot,1),Hf(We,ot,0,at,1,0);break;case Pm:Gt(De,He,at,We,ot,0);break;case Rm:Gt(De,He,at,We,ot,0),Hf(We,ot,1,at,1,0);break;case K2:dc(De,He,at,We,ot);break;case X2:dc(De,He,at,We,ot),I4(We,ot,at,1,0);break;case B4:fc(De,He,at,We,ot);break;default:e(0)}ie+=oe,Fe+=Ge}m.Ma+=X}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=C.height)}}m.C=y,e(m.C<=m.i)}function Y(m){var y;if(0<m.ua)return 0;for(y=0;y<m.Wb;++y){var C=m.Ya[y].G,D=m.Ya[y].H;if(0<C[1][D[1]+0].g||0<C[2][D[2]+0].g||0<C[3][D[3]+0].g)return 0}return 1}function ee(m,y,C,D,K,X){if(m.Z!=0){var J=m.qd,ie=m.rd;for(e(gc[m.Z]!=null);y<C;++y)gc[m.Z](J,ie,D,K,D,K,X),J=D,ie=K,K+=X;m.qd=J,m.rd=ie}}function re(m,y){var C=m.l.ma,D=C.Z==0||C.Z==1?m.l.j:m.C;if(D=m.C<D?D:m.C,e(y<=m.l.o),y>D){var K=m.l.width,X=C.ca,J=C.tb+K*D,ie=m.V,oe=m.Ba+m.c*D,he=m.gc;e(m.ab==1),e(he[0].hc==3),Uo(he[0],D,y,ie,oe,X,J),ee(C,D,y,X,J,K)}m.C=m.Ma=y}function ke(m,y,C,D,K,X,J){var ie=m.$/D,oe=m.$%D,he=m.m,Fe=m.s,Ge=C+m.$,de=Ge;K=C+D*K;var De=C+D*X,He=280+Fe.ua,at=m.Pb?ie:16777216,We=0<Fe.ua?Fe.Wa:null,ot=Fe.wc,ht=Ge<De?O(Fe,oe,ie):null;e(m.C<X),e(De<=K);var St=!1;e:for(;;){for(;St||Ge<De;){var _t=0;if(ie>=at){var cr=Ge-C;e((at=m).Pb),at.wd=at.m,at.xd=cr,0<at.s.ua&&Ie(at.s.Wa,at.s.vb),at=ie+Oj}if(oe&ot||(ht=O(Fe,oe,ie)),e(ht!=null),ht.Qb&&(y[Ge]=ht.qb,St=!0),!St)if(fe(he),ht.jc){_t=he,cr=y;var Jt=Ge,jr=ht.pd[U(_t)&ju-1];e(ht.jc),256>jr.g?(te(_t,_t.u+jr.g),cr[Jt]=jr.value,_t=0):(te(_t,_t.u+jr.g-256),e(256<=jr.value),_t=jr.value),_t==0&&(St=!0)}else _t=Ve(ht.G[0],ht.H[0],he);if(he.h)break;if(St||256>_t){if(!St)if(ht.nd)y[Ge]=(ht.qb|_t<<8)>>>0;else{if(fe(he),St=Ve(ht.G[1],ht.H[1],he),fe(he),cr=Ve(ht.G[2],ht.H[2],he),Jt=Ve(ht.G[3],ht.H[3],he),he.h)break;y[Ge]=(Jt<<24|St<<16|_t<<8|cr)>>>0}if(St=!1,++Ge,++oe>=D&&(oe=0,++ie,J!=null&&ie<=X&&!(ie%16)&&J(m,ie),We!=null))for(;de<Ge;)_t=y[de++],We.X[(506832829*_t&4294967295)>>>We.Mb]=_t}else if(280>_t){if(_t=xe(_t-256,he),cr=Ve(ht.G[4],ht.H[4],he),fe(he),cr=Re(D,cr=xe(cr,he)),he.h)break;if(Ge-C<cr||K-Ge<_t)break e;for(Jt=0;Jt<_t;++Jt)y[Ge+Jt]=y[Ge+Jt-cr];for(Ge+=_t,oe+=_t;oe>=D;)oe-=D,++ie,J!=null&&ie<=X&&!(ie%16)&&J(m,ie);if(e(Ge<=K),oe&ot&&(ht=O(Fe,oe,ie)),We!=null)for(;de<Ge;)_t=y[de++],We.X[(506832829*_t&4294967295)>>>We.Mb]=_t}else{if(!(_t<He))break e;for(St=_t-280,e(We!=null);de<Ge;)_t=y[de++],We.X[(506832829*_t&4294967295)>>>We.Mb]=_t;_t=Ge,e(!(St>>>(cr=We).Xa)),y[_t]=cr.X[St],St=!0}St||e(he.h==H(he))}if(m.Pb&&he.h&&Ge<K)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&Ie(m.s.vb,m.s.Wa);else{if(he.h)break e;J!=null&&J(m,ie>X?X:ie),m.a=0,m.$=Ge-C}return 1}return m.a=3,0}function pe(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var y=m.Wa;y!=null&&(y.X=null),m.vb=null,e(m!=null)}function Ne(){var m=new kt;return m==null?null:(m.a=0,m.xb=z4,Rr("Predictor","VP8LPredictors"),Rr("Predictor","VP8LPredictors_C"),Rr("PredictorAdd","VP8LPredictorsAdd"),Rr("PredictorAdd","VP8LPredictorsAdd_C"),pi=bt,Uf=Ot,Vf=Vr,hc=mr,dc=qe,fc=Ft,Fu=wr,A.VP8LMapColor32b=Bo,A.VP8LMapColor8b=Of,m)}function je(m,y,C,D,K){var X=1,J=[m],ie=[y],oe=D.m,he=D.s,Fe=null,Ge=0;e:for(;;){if(C)for(;X&&Le(oe,1);){var de=J,De=ie,He=D,at=1,We=He.m,ot=He.gc[He.ab],ht=Le(We,2);if(He.Oc&1<<ht)X=0;else{switch(He.Oc|=1<<ht,ot.hc=ht,ot.Ea=de[0],ot.nc=De[0],ot.K=[null],++He.ab,e(4>=He.ab),ht){case 0:case 1:ot.b=Le(We,3)+2,at=je(me(ot.Ea,ot.b),me(ot.nc,ot.b),0,He,ot.K),ot.K=ot.K[0];break;case 3:var St,_t=Le(We,8)+1,cr=16<_t?0:4<_t?1:2<_t?2:3;if(de[0]=me(ot.Ea,cr),ot.b=cr,St=at=je(_t,1,0,He,ot.K)){var Jt,jr=_t,sr=ot,Zr=1<<(8>>sr.b),Di=s(Zr);if(Di==null)St=0;else{var Fr=sr.K[0],ar=sr.w;for(Di[0]=sr.K[0][0],Jt=1;Jt<1*jr;++Jt)Di[Jt]=Ke(Fr[ar+Jt],Di[Jt-1]);for(;Jt<4*Zr;++Jt)Di[Jt]=0;sr.K[0]=null,sr.K[0]=Di,St=1}}at=St;break;case 2:break;default:e(0)}X=at}}if(J=J[0],ie=ie[0],X&&Le(oe,1)&&!(X=1<=(Ge=Le(oe,4))&&11>=Ge)){D.a=3;break e}var Mt;if(Mt=X)t:{var gi,Pr,tn,Hn=D,Zi=J,Ms=ie,oi=Ge,vs=C,Os=Hn.m,Mi=Hn.s,sn=[null],yn=1,li=0,vn=Mj[oi];r:for(;;){if(vs&&Le(Os,1)){var es=Le(Os,3)+2,po=me(Zi,es),xi=me(Ms,es),Qs=po*xi;if(!je(po,xi,0,Hn,sn))break r;for(sn=sn[0],Mi.xc=es,gi=0;gi<Qs;++gi){var jn=sn[gi]>>8&65535;sn[gi]=jn,jn>=yn&&(yn=jn+1)}}if(Os.h)break r;for(Pr=0;5>Pr;++Pr){var Oi=U4[Pr];!Pr&&0<oi&&(Oi+=1<<oi),li<Oi&&(li=Oi)}var fa=a(yn*vn,R),Bs=yn,pa=a(Bs,ve);if(pa==null)var ma=null;else e(65536>=Bs),ma=pa;var Js=s(li);if(ma==null||Js==null||fa==null){Hn.a=1;break r}var ga=fa;for(gi=tn=0;gi<yn;++gi){var Un=ma[gi],xa=Un.G,mo=Un.H,Mu=0,_l=1,ts=0;for(Pr=0;5>Pr;++Pr){Oi=U4[Pr],xa[Pr]=ga,mo[Pr]=tn,!Pr&&0<oi&&(Oi+=1<<oi);i:{var Dm,ey=Oi,Mm=Hn,Wf=Js,iF=ga,sF=tn,ty=0,xc=Mm.m,aF=Le(xc,1);if(i(Wf,0,0,ey),aF){var oF=Le(xc,1)+1,lF=Le(xc,1),X4=Le(xc,lF==0?1:8);Wf[X4]=1,oF==2&&(Wf[X4=Le(xc,8)]=1);var Om=1}else{var Q4=s(19),J4=Le(xc,4)+4;if(19<J4){Mm.a=3;var Bm=0;break i}for(Dm=0;Dm<J4;++Dm)Q4[Fj[Dm]]=Le(xc,3);var ry=void 0,Kf=void 0,Z4=Mm,cF=Q4,Um=ey,eS=Wf,ny=0,yc=Z4.m,tS=8,rS=a(128,R);n:for(;L(rS,0,7,cF,19);){if(Le(yc,1)){var uF=2+2*Le(yc,3);if((ry=2+Le(yc,uF))>Um)break n}else ry=Um;for(Kf=0;Kf<Um&&ry--;){fe(yc);var nS=rS[0+(127&U(yc))];te(yc,yc.u+nS.g);var Oh=nS.value;if(16>Oh)eS[Kf++]=Oh,Oh!=0&&(tS=Oh);else{var hF=Oh==16,iS=Oh-16,dF=Lj[iS],sS=Le(yc,Rj[iS])+dF;if(Kf+sS>Um)break n;for(var fF=hF?tS:0;0<sS--;)eS[Kf++]=fF}}ny=1;break n}ny||(Z4.a=3),Om=ny}(Om=Om&&!xc.h)&&(ty=L(iF,sF,8,Wf,ey)),Om&&ty!=0?Bm=ty:(Mm.a=3,Bm=0)}if(Bm==0)break r;if(_l&&jj[Pr]==1&&(_l=ga[tn].g==0),Mu+=ga[tn].g,tn+=Bm,3>=Pr){var Gf,iy=Js[0];for(Gf=1;Gf<Oi;++Gf)Js[Gf]>iy&&(iy=Js[Gf]);ts+=iy}}if(Un.nd=_l,Un.Qb=0,_l&&(Un.qb=(xa[3][mo[3]+0].value<<24|xa[1][mo[1]+0].value<<16|xa[2][mo[2]+0].value)>>>0,Mu==0&&256>xa[0][mo[0]+0].value&&(Un.Qb=1,Un.qb+=xa[0][mo[0]+0].value<<8)),Un.jc=!Un.Qb&&6>ts,Un.jc){var Vm,bl=Un;for(Vm=0;Vm<ju;++Vm){var vc=Vm,wc=bl.pd[vc],zm=bl.G[0][bl.H[0]+vc];256<=zm.value?(wc.g=zm.g+256,wc.value=zm.value):(wc.g=0,wc.value=0,vc>>=tt(zm,8,wc),vc>>=tt(bl.G[1][bl.H[1]+vc],16,wc),vc>>=tt(bl.G[2][bl.H[2]+vc],0,wc),tt(bl.G[3][bl.H[3]+vc],24,wc))}}}Mi.vc=sn,Mi.Wb=yn,Mi.Ya=ma,Mi.yc=fa,Mt=1;break t}Mt=0}if(!(X=Mt)){D.a=3;break e}if(0<Ge){if(he.ua=1<<Ge,!ae(he.Wa,Ge)){D.a=1,X=0;break e}}else he.ua=0;var sy=D,aS=J,pF=ie,ay=sy.s,oy=ay.xc;if(sy.c=aS,sy.i=pF,ay.md=me(aS,oy),ay.wc=oy==0?-1:(1<<oy)-1,C){D.xb=qj;break e}if((Fe=s(J*ie))==null){D.a=1,X=0;break e}X=(X=ke(D,Fe,0,J,ie,ie,null))&&!oe.h;break e}return X?(K!=null?K[0]=Fe:(e(Fe==null),e(C)),D.$=0,C||pe(he)):pe(he),X}function Oe(m,y){var C=m.c*m.i,D=C+y+16*y;return e(m.c<=y),m.V=s(D),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+C+y,1)}function st(m,y){var C=m.C,D=y-C,K=m.V,X=m.Ba+m.c*C;for(e(y<=m.l.o);0<D;){var J=16<D?16:D,ie=m.l.ma,oe=m.l.width,he=oe*J,Fe=ie.ca,Ge=ie.tb+oe*C,de=m.Ta,De=m.Ua;Z(m,J,K,X),R4(de,De,Fe,Ge,he),ee(ie,C,C+J,Fe,Ge,oe),D-=J,K+=J*m.c,C+=J}e(C==y),m.C=m.Ma=y}function pt(){this.ub=this.yd=this.td=this.Rb=0}function gt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ft(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function At(){this.Yb=function(){var m=[];return function y(C,D,K){for(var X=K[D],J=0;J<X&&(C.push(K.length>D+1?[]:0),!(K.length<D+1));J++)y(C[J],D+1,K)}(m,0,[3,11]),m}()}function er(){this.jb=s(3),this.Wc=o([4,8],At),this.Xc=o([4,17],At)}function _r(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function pr(){this.ld=this.La=this.dd=this.tc=0}function en(){this.Na=this.la=0}function mn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function gn(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Dn(){this.uc=this.M=this.Nb=0,this.wa=Array(new pr),this.Y=0,this.ya=Array(new gn),this.aa=0,this.l=new Dr}function In(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ir(){this.cb=this.a=0,this.sc="",this.m=new I,this.Od=new pt,this.Kc=new gt,this.ed=new _r,this.Qa=new ft,this.Ic=this.$c=this.Aa=0,this.D=new Dn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,I),this.ia=0,this.pb=a(4,mn),this.Pa=new er,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new In),this.Hd=0,this.rb=Array(new en),this.sb=0,this.wa=Array(new pr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new gn),this.L=this.aa=0,this.gd=o([4,2],pr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ir(m,y){return 0>m?0:m>y?y:m}function Dr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Sr(){var m=new ir;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,$f||($f=Hr)),m}function Xt(m,y,C){return m.a==0&&(m.a=y,m.sc=C,m.cb=0),0}function Tn(m,y,C){return 3<=C&&m[y+0]==157&&m[y+1]==1&&m[y+2]==42}function un(m,y){if(m==null)return 0;if(m.a=0,m.sc="OK",y==null)return Xt(m,2,"null VP8Io passed to VP8GetHeaders()");var C=y.data,D=y.w,K=y.ha;if(4>K)return Xt(m,7,"Truncated header.");var X=C[D+0]|C[D+1]<<8|C[D+2]<<16,J=m.Od;if(J.Rb=!(1&X),J.td=X>>1&7,J.yd=X>>4&1,J.ub=X>>5,3<J.td)return Xt(m,3,"Incorrect keyframe parameters.");if(!J.yd)return Xt(m,4,"Frame not displayable.");D+=3,K-=3;var ie=m.Kc;if(J.Rb){if(7>K)return Xt(m,7,"cannot parse picture header");if(!Tn(C,D,K))return Xt(m,3,"Bad code word");ie.c=16383&(C[D+4]<<8|C[D+3]),ie.Td=C[D+4]>>6,ie.i=16383&(C[D+6]<<8|C[D+5]),ie.Ud=C[D+6]>>6,D+=7,K-=7,m.za=ie.c+15>>4,m.Ub=ie.i+15>>4,y.width=ie.c,y.height=ie.i,y.Da=0,y.j=0,y.v=0,y.va=y.width,y.o=y.height,y.da=0,y.ib=y.width,y.hb=y.height,y.U=y.width,y.T=y.height,i((X=m.Pa).jb,0,255,X.jb.length),e((X=m.Qa)!=null),X.Cb=0,X.Bb=0,X.Fb=1,i(X.Zb,0,0,X.Zb.length),i(X.Lb,0,0,X.Lb)}if(J.ub>K)return Xt(m,7,"bad partition length");ge(X=m.m,C,D,J.ub),D+=J.ub,K-=J.ub,J.Rb&&(ie.Ld=Te(X),ie.Kd=Te(X)),ie=m.Qa;var oe,he=m.Pa;if(e(X!=null),e(ie!=null),ie.Cb=Te(X),ie.Cb){if(ie.Bb=Te(X),Te(X)){for(ie.Fb=Te(X),oe=0;4>oe;++oe)ie.Zb[oe]=Te(X)?ce(X,7):0;for(oe=0;4>oe;++oe)ie.Lb[oe]=Te(X)?ce(X,6):0}if(ie.Bb)for(oe=0;3>oe;++oe)he.jb[oe]=Te(X)?ye(X,8):255}else ie.Bb=0;if(X.Ka)return Xt(m,3,"cannot parse segment header");if((ie=m.ed).zd=Te(X),ie.Tb=ye(X,6),ie.wb=ye(X,3),ie.Pc=Te(X),ie.Pc&&Te(X)){for(he=0;4>he;++he)Te(X)&&(ie.vd[he]=ce(X,6));for(he=0;4>he;++he)Te(X)&&(ie.od[he]=ce(X,6))}if(m.L=ie.Tb==0?0:ie.zd?1:2,X.Ka)return Xt(m,3,"cannot parse filter header");var Fe=K;if(K=oe=D,D=oe+Fe,ie=Fe,m.Xb=(1<<ye(m.m,2))-1,Fe<3*(he=m.Xb))C=7;else{for(oe+=3*he,ie-=3*he,Fe=0;Fe<he;++Fe){var Ge=C[K+0]|C[K+1]<<8|C[K+2]<<16;Ge>ie&&(Ge=ie),ge(m.Jc[+Fe],C,oe,Ge),oe+=Ge,ie-=Ge,K+=3}ge(m.Jc[+he],C,oe,ie),C=oe<D?0:5}if(C!=0)return Xt(m,C,"cannot parse partitions");for(C=ye(oe=m.m,7),K=Te(oe)?ce(oe,4):0,D=Te(oe)?ce(oe,4):0,ie=Te(oe)?ce(oe,4):0,he=Te(oe)?ce(oe,4):0,oe=Te(oe)?ce(oe,4):0,Fe=m.Qa,Ge=0;4>Ge;++Ge){if(Fe.Cb){var de=Fe.Zb[Ge];Fe.Fb||(de+=C)}else{if(0<Ge){m.pb[Ge]=m.pb[0];continue}de=C}var De=m.pb[Ge];De.Sc[0]=Q2[Ir(de+K,127)],De.Sc[1]=J2[Ir(de+0,127)],De.Eb[0]=2*Q2[Ir(de+D,127)],De.Eb[1]=101581*J2[Ir(de+ie,127)]>>16,8>De.Eb[1]&&(De.Eb[1]=8),De.Qc[0]=Q2[Ir(de+he,117)],De.Qc[1]=J2[Ir(de+oe,127)],De.lc=de+oe}if(!J.Rb)return Xt(m,4,"Not a key frame.");for(Te(X),J=m.Pa,C=0;4>C;++C){for(K=0;8>K;++K)for(D=0;3>D;++D)for(ie=0;11>ie;++ie)he=Pe(X,Hj[C][K][D][ie])?ye(X,8):Vj[C][K][D][ie],J.Wc[C][K].Yb[D][ie]=he;for(K=0;17>K;++K)J.Xc[C][K]=J.Wc[C][$j[K]]}return m.kc=Te(X),m.kc&&(m.Bd=ye(X,8)),m.cb=1}function Hr(m,y,C,D,K,X,J){var ie=y[K].Yb[C];for(C=0;16>K;++K){if(!Pe(m,ie[C+0]))return K;for(;!Pe(m,ie[C+1]);)if(ie=y[++K].Yb[0],C=0,K==16)return 16;var oe=y[K+1].Yb;if(Pe(m,ie[C+2])){var he=m,Fe=0;if(Pe(he,(de=ie)[(Ge=C)+3]))if(Pe(he,de[Ge+6])){for(ie=0,Ge=2*(Fe=Pe(he,de[Ge+8]))+(de=Pe(he,de[Ge+9+Fe])),Fe=0,de=Bj[Ge];de[ie];++ie)Fe+=Fe+Pe(he,de[ie]);Fe+=3+(8<<Ge)}else Pe(he,de[Ge+7])?(Fe=7+2*Pe(he,165),Fe+=Pe(he,145)):Fe=5+Pe(he,159);else Fe=Pe(he,de[Ge+4])?3+Pe(he,de[Ge+5]):2;ie=oe[2]}else Fe=1,ie=oe[1];oe=J+Uj[K],0>(he=m).b&&Ae(he);var Ge,de=he.b,De=(Ge=he.Ca>>1)-(he.I>>de)>>31;--he.b,he.Ca+=De,he.Ca|=1,he.I-=(Ge+1&De)<<de,X[oe]=((Fe^De)-De)*D[(0<K)+0]}return 16}function Oa(m){var y=m.rb[m.sb-1];y.la=0,y.Na=0,i(m.zc,0,0,m.zc.length),m.ja=0}function ri(m,y,C,D,K){K=m[y+C+32*D]+(K>>3),m[y+C+32*D]=-256&K?0>K?0:255:K}function Pn(m,y,C,D,K,X){ri(m,y,0,C,D+K),ri(m,y,1,C,D+X),ri(m,y,2,C,D-X),ri(m,y,3,C,D-K)}function Gs(m){return(20091*m>>16)+m}function Oo(m,y,C,D){var K,X=0,J=s(16);for(K=0;4>K;++K){var ie=m[y+0]+m[y+8],oe=m[y+0]-m[y+8],he=(35468*m[y+4]>>16)-Gs(m[y+12]),Fe=Gs(m[y+4])+(35468*m[y+12]>>16);J[X+0]=ie+Fe,J[X+1]=oe+he,J[X+2]=oe-he,J[X+3]=ie-Fe,X+=4,y++}for(K=X=0;4>K;++K)ie=(m=J[X+0]+4)+J[X+8],oe=m-J[X+8],he=(35468*J[X+4]>>16)-Gs(J[X+12]),ri(C,D,0,0,ie+(Fe=Gs(J[X+4])+(35468*J[X+12]>>16))),ri(C,D,1,0,oe+he),ri(C,D,2,0,oe-he),ri(C,D,3,0,ie-Fe),X++,D+=32}function Ru(m,y,C,D){var K=m[y+0]+4,X=35468*m[y+4]>>16,J=Gs(m[y+4]),ie=35468*m[y+1]>>16;Pn(C,D,0,K+J,m=Gs(m[y+1]),ie),Pn(C,D,1,K+X,m,ie),Pn(C,D,2,K-X,m,ie),Pn(C,D,3,K-J,m,ie)}function co(m,y,C,D,K){Oo(m,y,C,D),K&&Oo(m,y+16,C,D+4)}function Ys(m,y,C,D){Du(m,y+0,C,D,1),Du(m,y+32,C,D+128,1)}function ni(m,y,C,D){var K;for(m=m[y+0]+4,K=0;4>K;++K)for(y=0;4>y;++y)ri(C,D,y,K,m)}function Ba(m,y,C,D){m[y+0]&&pn(m,y+0,C,D),m[y+16]&&pn(m,y+16,C,D+4),m[y+32]&&pn(m,y+32,C,D+128),m[y+48]&&pn(m,y+48,C,D+128+4)}function ps(m,y,C,D){var K,X=s(16);for(K=0;4>K;++K){var J=m[y+0+K]+m[y+12+K],ie=m[y+4+K]+m[y+8+K],oe=m[y+4+K]-m[y+8+K],he=m[y+0+K]-m[y+12+K];X[0+K]=J+ie,X[8+K]=J-ie,X[4+K]=he+oe,X[12+K]=he-oe}for(K=0;4>K;++K)J=(m=X[0+4*K]+3)+X[3+4*K],ie=X[1+4*K]+X[2+4*K],oe=X[1+4*K]-X[2+4*K],he=m-X[3+4*K],C[D+0]=J+ie>>3,C[D+16]=he+oe>>3,C[D+32]=J-ie>>3,C[D+48]=he-oe>>3,D+=64}function Ua(m,y,C){var D,K=y-32,X=da,J=255-m[K-1];for(D=0;D<C;++D){var ie,oe=X,he=J+m[y-1];for(ie=0;ie<C;++ie)m[y+ie]=oe[he+m[K+ie]];y+=32}}function nc(m,y){Ua(m,y,4)}function ic(m,y){Ua(m,y,8)}function sc(m,y){Ua(m,y,16)}function uo(m,y){var C;for(C=0;16>C;++C)n(m,y+32*C,m,y-32,16)}function Xs(m,y){var C;for(C=16;0<C;--C)i(m,y,m[y-1],16),y+=32}function ms(m,y,C){var D;for(D=0;16>D;++D)i(y,C+32*D,m,16)}function ac(m,y){var C,D=16;for(C=0;16>C;++C)D+=m[y-1+32*C]+m[y+C-32];ms(D>>5,m,y)}function Va(m,y){var C,D=8;for(C=0;16>C;++C)D+=m[y-1+32*C];ms(D>>4,m,y)}function Ji(m,y){var C,D=8;for(C=0;16>C;++C)D+=m[y+C-32];ms(D>>4,m,y)}function oc(m,y){ms(128,m,y)}function xr(m,y,C){return m+2*y+C+2>>2}function ho(m,y){var C,D=y-32;for(D=new Uint8Array([xr(m[D-1],m[D+0],m[D+1]),xr(m[D+0],m[D+1],m[D+2]),xr(m[D+1],m[D+2],m[D+3]),xr(m[D+2],m[D+3],m[D+4])]),C=0;4>C;++C)n(m,y+32*C,D,0,D.length)}function ml(m,y){var C=m[y-1],D=m[y-1+32],K=m[y-1+64],X=m[y-1+96];et(m,y+0,16843009*xr(m[y-1-32],C,D)),et(m,y+32,16843009*xr(C,D,K)),et(m,y+64,16843009*xr(D,K,X)),et(m,y+96,16843009*xr(K,X,X))}function za(m,y){var C,D=4;for(C=0;4>C;++C)D+=m[y+C-32]+m[y-1+32*C];for(D>>=3,C=0;4>C;++C)i(m,y+32*C,D,4)}function q(m,y){var C=m[y-1+0],D=m[y-1+32],K=m[y-1+64],X=m[y-1-32],J=m[y+0-32],ie=m[y+1-32],oe=m[y+2-32],he=m[y+3-32];m[y+0+96]=xr(D,K,m[y-1+96]),m[y+1+96]=m[y+0+64]=xr(C,D,K),m[y+2+96]=m[y+1+64]=m[y+0+32]=xr(X,C,D),m[y+3+96]=m[y+2+64]=m[y+1+32]=m[y+0+0]=xr(J,X,C),m[y+3+64]=m[y+2+32]=m[y+1+0]=xr(ie,J,X),m[y+3+32]=m[y+2+0]=xr(oe,ie,J),m[y+3+0]=xr(he,oe,ie)}function _e(m,y){var C=m[y+1-32],D=m[y+2-32],K=m[y+3-32],X=m[y+4-32],J=m[y+5-32],ie=m[y+6-32],oe=m[y+7-32];m[y+0+0]=xr(m[y+0-32],C,D),m[y+1+0]=m[y+0+32]=xr(C,D,K),m[y+2+0]=m[y+1+32]=m[y+0+64]=xr(D,K,X),m[y+3+0]=m[y+2+32]=m[y+1+64]=m[y+0+96]=xr(K,X,J),m[y+3+32]=m[y+2+64]=m[y+1+96]=xr(X,J,ie),m[y+3+64]=m[y+2+96]=xr(J,ie,oe),m[y+3+96]=xr(ie,oe,oe)}function Ue(m,y){var C=m[y-1+0],D=m[y-1+32],K=m[y-1+64],X=m[y-1-32],J=m[y+0-32],ie=m[y+1-32],oe=m[y+2-32],he=m[y+3-32];m[y+0+0]=m[y+1+64]=X+J+1>>1,m[y+1+0]=m[y+2+64]=J+ie+1>>1,m[y+2+0]=m[y+3+64]=ie+oe+1>>1,m[y+3+0]=oe+he+1>>1,m[y+0+96]=xr(K,D,C),m[y+0+64]=xr(D,C,X),m[y+0+32]=m[y+1+96]=xr(C,X,J),m[y+1+32]=m[y+2+96]=xr(X,J,ie),m[y+2+32]=m[y+3+96]=xr(J,ie,oe),m[y+3+32]=xr(ie,oe,he)}function $e(m,y){var C=m[y+0-32],D=m[y+1-32],K=m[y+2-32],X=m[y+3-32],J=m[y+4-32],ie=m[y+5-32],oe=m[y+6-32],he=m[y+7-32];m[y+0+0]=C+D+1>>1,m[y+1+0]=m[y+0+64]=D+K+1>>1,m[y+2+0]=m[y+1+64]=K+X+1>>1,m[y+3+0]=m[y+2+64]=X+J+1>>1,m[y+0+32]=xr(C,D,K),m[y+1+32]=m[y+0+96]=xr(D,K,X),m[y+2+32]=m[y+1+96]=xr(K,X,J),m[y+3+32]=m[y+2+96]=xr(X,J,ie),m[y+3+64]=xr(J,ie,oe),m[y+3+96]=xr(ie,oe,he)}function ut(m,y){var C=m[y-1+0],D=m[y-1+32],K=m[y-1+64],X=m[y-1+96];m[y+0+0]=C+D+1>>1,m[y+2+0]=m[y+0+32]=D+K+1>>1,m[y+2+32]=m[y+0+64]=K+X+1>>1,m[y+1+0]=xr(C,D,K),m[y+3+0]=m[y+1+32]=xr(D,K,X),m[y+3+32]=m[y+1+64]=xr(K,X,X),m[y+3+64]=m[y+2+64]=m[y+0+96]=m[y+1+96]=m[y+2+96]=m[y+3+96]=X}function rt(m,y){var C=m[y-1+0],D=m[y-1+32],K=m[y-1+64],X=m[y-1+96],J=m[y-1-32],ie=m[y+0-32],oe=m[y+1-32],he=m[y+2-32];m[y+0+0]=m[y+2+32]=C+J+1>>1,m[y+0+32]=m[y+2+64]=D+C+1>>1,m[y+0+64]=m[y+2+96]=K+D+1>>1,m[y+0+96]=X+K+1>>1,m[y+3+0]=xr(ie,oe,he),m[y+2+0]=xr(J,ie,oe),m[y+1+0]=m[y+3+32]=xr(C,J,ie),m[y+1+32]=m[y+3+64]=xr(D,C,J),m[y+1+64]=m[y+3+96]=xr(K,D,C),m[y+1+96]=xr(X,K,D)}function or(m,y){var C;for(C=0;8>C;++C)n(m,y+32*C,m,y-32,8)}function zt(m,y){var C;for(C=0;8>C;++C)i(m,y,m[y-1],8),y+=32}function Pt(m,y,C){var D;for(D=0;8>D;++D)i(y,C+32*D,m,8)}function yr(m,y){var C,D=8;for(C=0;8>C;++C)D+=m[y+C-32]+m[y-1+32*C];Pt(D>>4,m,y)}function qt(m,y){var C,D=4;for(C=0;8>C;++C)D+=m[y+C-32];Pt(D>>3,m,y)}function yt(m,y){var C,D=4;for(C=0;8>C;++C)D+=m[y-1+32*C];Pt(D>>3,m,y)}function hr(m,y){Pt(128,m,y)}function Tt(m,y,C){var D=m[y-C],K=m[y+0],X=3*(K-D)+W2[1020+m[y-2*C]-m[y+C]],J=Tm[112+(X+4>>3)];m[y-C]=da[255+D+Tm[112+(X+3>>3)]],m[y+0]=da[255+K-J]}function Ur(m,y,C,D){var K=m[y+0],X=m[y+C];return Wa[255+m[y-2*C]-m[y-C]]>D||Wa[255+X-K]>D}function Lr(m,y,C,D){return 4*Wa[255+m[y-C]-m[y+0]]+Wa[255+m[y-2*C]-m[y+C]]<=D}function qr(m,y,C,D,K){var X=m[y-3*C],J=m[y-2*C],ie=m[y-C],oe=m[y+0],he=m[y+C],Fe=m[y+2*C],Ge=m[y+3*C];return 4*Wa[255+ie-oe]+Wa[255+J-he]>D?0:Wa[255+m[y-4*C]-X]<=K&&Wa[255+X-J]<=K&&Wa[255+J-ie]<=K&&Wa[255+Ge-Fe]<=K&&Wa[255+Fe-he]<=K&&Wa[255+he-oe]<=K}function Rn(m,y,C,D){var K=2*D+1;for(D=0;16>D;++D)Lr(m,y+D,C,K)&&Tt(m,y+D,C)}function Fs(m,y,C,D){var K=2*D+1;for(D=0;16>D;++D)Lr(m,y+D*C,1,K)&&Tt(m,y+D*C,1)}function Mr(m,y,C,D){var K;for(K=3;0<K;--K)Rn(m,y+=4*C,C,D)}function ca(m,y,C,D){var K;for(K=3;0<K;--K)Fs(m,y+=4,C,D)}function ii(m,y,C,D,K,X,J,ie){for(X=2*X+1;0<K--;){if(qr(m,y,C,X,J))if(Ur(m,y,C,ie))Tt(m,y,C);else{var oe=m,he=y,Fe=C,Ge=oe[he-2*Fe],de=oe[he-Fe],De=oe[he+0],He=oe[he+Fe],at=oe[he+2*Fe],We=27*(ht=W2[1020+3*(De-de)+W2[1020+Ge-He]])+63>>7,ot=18*ht+63>>7,ht=9*ht+63>>7;oe[he-3*Fe]=da[255+oe[he-3*Fe]+ht],oe[he-2*Fe]=da[255+Ge+ot],oe[he-Fe]=da[255+de+We],oe[he+0]=da[255+De-We],oe[he+Fe]=da[255+He-ot],oe[he+2*Fe]=da[255+at-ht]}y+=D}}function gs(m,y,C,D,K,X,J,ie){for(X=2*X+1;0<K--;){if(qr(m,y,C,X,J))if(Ur(m,y,C,ie))Tt(m,y,C);else{var oe=m,he=y,Fe=C,Ge=oe[he-Fe],de=oe[he+0],De=oe[he+Fe],He=Tm[112+(4+(at=3*(de-Ge))>>3)],at=Tm[112+(at+3>>3)],We=He+1>>1;oe[he-2*Fe]=da[255+oe[he-2*Fe]+We],oe[he-Fe]=da[255+Ge+at],oe[he+0]=da[255+de-He],oe[he+Fe]=da[255+De-We]}y+=D}}function si(m,y,C,D,K,X){ii(m,y,C,1,16,D,K,X)}function dr(m,y,C,D,K,X){ii(m,y,1,C,16,D,K,X)}function ai(m,y,C,D,K,X){var J;for(J=3;0<J;--J)gs(m,y+=4*C,C,1,16,D,K,X)}function E(m,y,C,D,K,X){var J;for(J=3;0<J;--J)gs(m,y+=4,1,C,16,D,K,X)}function V(m,y,C,D,K,X,J,ie){ii(m,y,K,1,8,X,J,ie),ii(C,D,K,1,8,X,J,ie)}function ue(m,y,C,D,K,X,J,ie){ii(m,y,1,K,8,X,J,ie),ii(C,D,1,K,8,X,J,ie)}function Se(m,y,C,D,K,X,J,ie){gs(m,y+4*K,K,1,8,X,J,ie),gs(C,D+4*K,K,1,8,X,J,ie)}function Be(m,y,C,D,K,X,J,ie){gs(m,y+4,1,K,8,X,J,ie),gs(C,D+4,1,K,8,X,J,ie)}function Ce(){this.ba=new $t,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new It,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ye(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ut(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Wt(){this.ua=0,this.Wa=new ne,this.vb=new ne,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ve,this.yc=new R}function kt(){this.xb=this.a=0,this.l=new Dr,this.ca=new $t,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new B,this.Pb=0,this.wd=new B,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Wt,this.ab=0,this.gc=a(4,Ut),this.Oc=0}function Qt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Dr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Or(m,y,C,D,K,X,J){for(m=m==null?0:m[y+0],y=0;y<J;++y)K[X+y]=m+C[D+y]&255,m=K[X+y]}function fn(m,y,C,D,K,X,J){var ie;if(m==null)Or(null,null,C,D,K,X,J);else for(ie=0;ie<J;++ie)K[X+ie]=m[y+ie]+C[D+ie]&255}function xn(m,y,C,D,K,X,J){if(m==null)Or(null,null,C,D,K,X,J);else{var ie,oe=m[y+0],he=oe,Fe=oe;for(ie=0;ie<J;++ie)he=Fe+(oe=m[y+ie])-he,Fe=C[D+ie]+(-256&he?0>he?0:255:he)&255,he=oe,K[X+ie]=Fe}}function g(m,y,C,D){var K=y.width,X=y.o;if(e(m!=null&&y!=null),0>C||0>=D||C+D>X)return null;if(!m.Cc){if(m.ga==null){var J;if(m.ga=new Qt,(J=m.ga==null)||(J=y.width*y.o,e(m.Gb.length==0),m.Gb=s(J),m.Uc=0,m.Gb==null?J=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,J=1),J=!J),!J){J=m.ga;var ie=m.Fa,oe=m.P,he=m.qc,Fe=m.mb,Ge=m.nb,de=oe+1,De=he-1,He=J.l;if(e(ie!=null&&Fe!=null&&y!=null),gc[0]=null,gc[1]=Or,gc[2]=fn,gc[3]=xn,J.ca=Fe,J.tb=Ge,J.c=y.width,J.i=y.height,e(0<J.c&&0<J.i),1>=he)y=0;else if(J.$a=3&ie[oe+0],J.Z=ie[oe+0]>>2&3,J.Lc=ie[oe+0]>>4&3,oe=ie[oe+0]>>6&3,0>J.$a||1<J.$a||4<=J.Z||1<J.Lc||oe)y=0;else if(He.put=nr,He.ac=dn,He.bc=zn,He.ma=J,He.width=y.width,He.height=y.height,He.Da=y.Da,He.v=y.v,He.va=y.va,He.j=y.j,He.o=y.o,J.$a)e:{e(J.$a==1),y=Ne();t:for(;;){if(y==null){y=0;break e}if(e(J!=null),J.mc=y,y.c=J.c,y.i=J.i,y.l=J.l,y.l.ma=J,y.l.width=J.c,y.l.height=J.i,y.a=0,be(y.m,ie,de,De),!je(J.c,J.i,1,y,null)||(y.ab==1&&y.gc[0].hc==3&&Y(y.s)?(J.ic=1,ie=y.c*y.i,y.Ta=null,y.Ua=0,y.V=s(ie),y.Ba=0,y.V==null?(y.a=1,y=0):y=1):(J.ic=0,y=Oe(y,J.c)),!y))break t;y=1;break e}J.mc=null,y=0}else y=De>=J.c*J.i;J=!y}if(J)return null;m.ga.Lc!=1?m.Ga=0:D=X-C}e(m.ga!=null),e(C+D<=X);e:{if(y=(ie=m.ga).c,X=ie.l.o,ie.$a==0){if(de=m.rc,De=m.Vc,He=m.Fa,oe=m.P+1+C*y,he=m.mb,Fe=m.nb+C*y,e(oe<=m.P+m.qc),ie.Z!=0)for(e(gc[ie.Z]!=null),J=0;J<D;++J)gc[ie.Z](de,De,He,oe,he,Fe,y),de=he,De=Fe,Fe+=y,oe+=y;else for(J=0;J<D;++J)n(he,Fe,He,oe,y),de=he,De=Fe,Fe+=y,oe+=y;m.rc=de,m.Vc=De}else{if(e(ie.mc!=null),y=C+D,e((J=ie.mc)!=null),e(y<=J.i),J.C>=y)y=1;else if(ie.ic||Xe(),ie.ic){ie=J.V,de=J.Ba,De=J.c;var at=J.i,We=(He=1,oe=J.$/De,he=J.$%De,Fe=J.m,Ge=J.s,J.$),ot=De*at,ht=De*y,St=Ge.wc,_t=We<ht?O(Ge,he,oe):null;e(We<=ot),e(y<=at),e(Y(Ge));t:for(;;){for(;!Fe.h&&We<ht;){if(he&St||(_t=O(Ge,he,oe)),e(_t!=null),fe(Fe),256>(at=Ve(_t.G[0],_t.H[0],Fe)))ie[de+We]=at,++We,++he>=De&&(he=0,++oe<=y&&!(oe%16)&&re(J,oe));else{if(!(280>at)){He=0;break t}at=xe(at-256,Fe);var cr,Jt=Ve(_t.G[4],_t.H[4],Fe);if(fe(Fe),!(We>=(Jt=Re(De,Jt=xe(Jt,Fe)))&&ot-We>=at)){He=0;break t}for(cr=0;cr<at;++cr)ie[de+We+cr]=ie[de+We+cr-Jt];for(We+=at,he+=at;he>=De;)he-=De,++oe<=y&&!(oe%16)&&re(J,oe);We<ht&&he&St&&(_t=O(Ge,he,oe))}e(Fe.h==H(Fe))}re(J,oe>y?y:oe);break t}!He||Fe.h&&We<ot?(He=0,J.a=Fe.h?5:3):J.$=We,y=He}else y=ke(J,J.V,J.Ba,J.c,J.i,y,st);if(!y){D=0;break e}}C+D>=X&&(m.Cc=1),D=1}if(!D)return null;if(m.Cc&&((D=m.ga)!=null&&(D.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+C*K}function P(m,y,C,D,K,X){for(;0<K--;){var J,ie=m,oe=y+(C?1:0),he=m,Fe=y+(C?0:3);for(J=0;J<D;++J){var Ge=he[Fe+4*J];Ge!=255&&(Ge*=32897,ie[oe+4*J+0]=ie[oe+4*J+0]*Ge>>23,ie[oe+4*J+1]=ie[oe+4*J+1]*Ge>>23,ie[oe+4*J+2]=ie[oe+4*J+2]*Ge>>23)}y+=X}}function M(m,y,C,D,K){for(;0<D--;){var X;for(X=0;X<C;++X){var J=m[y+2*X+0],ie=15&(he=m[y+2*X+1]),oe=4369*ie,he=(240&he|he>>4)*oe>>16;m[y+2*X+0]=(240&J|J>>4)*oe>>16&240|(15&J|J<<4)*oe>>16>>4&15,m[y+2*X+1]=240&he|ie}y+=K}}function se(m,y,C,D,K,X,J,ie){var oe,he,Fe=255;for(he=0;he<K;++he){for(oe=0;oe<D;++oe){var Ge=m[y+oe];X[J+4*oe]=Ge,Fe&=Ge}y+=C,J+=ie}return Fe!=255}function ze(m,y,C,D,K){var X;for(X=0;X<K;++X)C[D+X]=m[y+X]>>8}function Xe(){Hf=P,I4=M,P4=se,R4=ze}function Ct(m,y,C){A[m]=function(D,K,X,J,ie,oe,he,Fe,Ge,de,De,He,at,We,ot,ht,St){var _t,cr=St-1>>1,Jt=ie[oe+0]|he[Fe+0]<<16,jr=Ge[de+0]|De[He+0]<<16;e(D!=null);var sr=3*Jt+jr+131074>>2;for(y(D[K+0],255&sr,sr>>16,at,We),X!=null&&(sr=3*jr+Jt+131074>>2,y(X[J+0],255&sr,sr>>16,ot,ht)),_t=1;_t<=cr;++_t){var Zr=ie[oe+_t]|he[Fe+_t]<<16,Di=Ge[de+_t]|De[He+_t]<<16,Fr=Jt+Zr+jr+Di+524296,ar=Fr+2*(Zr+jr)>>3;sr=ar+Jt>>1,Jt=(Fr=Fr+2*(Jt+Di)>>3)+Zr>>1,y(D[K+2*_t-1],255&sr,sr>>16,at,We+(2*_t-1)*C),y(D[K+2*_t-0],255&Jt,Jt>>16,at,We+(2*_t-0)*C),X!=null&&(sr=Fr+jr>>1,Jt=ar+Di>>1,y(X[J+2*_t-1],255&sr,sr>>16,ot,ht+(2*_t-1)*C),y(X[J+2*_t+0],255&Jt,Jt>>16,ot,ht+(2*_t+0)*C)),Jt=Zr,jr=Di}1&St||(sr=3*Jt+jr+131074>>2,y(D[K+St-1],255&sr,sr>>16,at,We+(St-1)*C),X!=null&&(sr=3*jr+Jt+131074>>2,y(X[J+St-1],255&sr,sr>>16,ot,ht+(St-1)*C)))}}function Nr(){Ka[km]=Wj,Ka[Cm]=H4,Ka[O4]=Kj,Ka[Im]=$4,Ka[Pm]=q4,Ka[K2]=W4,Ka[B4]=Gj,Ka[G2]=H4,Ka[Y2]=$4,Ka[Rm]=q4,Ka[X2]=W4}function Mn(m){return m&-16384?0>m?0:255:m>>Yj}function Gr(m,y){return Mn((19077*m>>8)+(26149*y>>8)-14234)}function On(m,y,C){return Mn((19077*m>>8)-(6419*y>>8)-(13320*C>>8)+8708)}function Hi(m,y){return Mn((19077*m>>8)+(33050*y>>8)-17685)}function xs(m,y,C,D,K){D[K+0]=Gr(m,C),D[K+1]=On(m,y,C),D[K+2]=Hi(m,y)}function Bn(m,y,C,D,K){D[K+0]=Hi(m,y),D[K+1]=On(m,y,C),D[K+2]=Gr(m,C)}function ys(m,y,C,D,K){var X=On(m,y,C);y=X<<3&224|Hi(m,y)>>3,D[K+0]=248&Gr(m,C)|X>>5,D[K+1]=y}function Ha(m,y,C,D,K){var X=240&Hi(m,y)|15;D[K+0]=240&Gr(m,C)|On(m,y,C)>>4,D[K+1]=X}function gl(m,y,C,D,K){D[K+0]=255,xs(m,y,C,D,K+1)}function jf(m,y,C,D,K){Bn(m,y,C,D,K),D[K+3]=255}function Ds(m,y,C,D,K){xs(m,y,C,D,K),D[K+3]=255}function xl(m,y,C){A[m]=function(D,K,X,J,ie,oe,he,Fe,Ge){for(var de=Fe+(-2&Ge)*C;Fe!=de;)y(D[K+0],X[J+0],ie[oe+0],he,Fe),y(D[K+1],X[J+0],ie[oe+0],he,Fe+C),K+=2,++J,++oe,Fe+=2*C;1&Ge&&y(D[K+0],X[J+0],ie[oe+0],he,Fe)}}function Fh(m,y,C){return C==0?m==0?y==0?6:5:y==0?4:0:C}function Em(m,y,C,D,K){switch(m>>>30){case 3:Du(y,C,D,K,0);break;case 2:qa(y,C,D,K);break;case 1:pn(y,C,D,K)}}function $a(m,y){var C,D,K=y.M,X=y.Nb,J=m.oc,ie=m.pc+40,oe=m.oc,he=m.pc+584,Fe=m.oc,Ge=m.pc+600;for(C=0;16>C;++C)J[ie+32*C-1]=129;for(C=0;8>C;++C)oe[he+32*C-1]=129,Fe[Ge+32*C-1]=129;for(0<K?J[ie-1-32]=oe[he-1-32]=Fe[Ge-1-32]=129:(i(J,ie-32-1,127,21),i(oe,he-32-1,127,9),i(Fe,Ge-32-1,127,9)),D=0;D<m.za;++D){var de=y.ya[y.aa+D];if(0<D){for(C=-1;16>C;++C)n(J,ie+32*C-4,J,ie+32*C+12,4);for(C=-1;8>C;++C)n(oe,he+32*C-4,oe,he+32*C+4,4),n(Fe,Ge+32*C-4,Fe,Ge+32*C+4,4)}var De=m.Gd,He=m.Hd+D,at=de.ad,We=de.Hc;if(0<K&&(n(J,ie-32,De[He].y,0,16),n(oe,he-32,De[He].f,0,8),n(Fe,Ge-32,De[He].ea,0,8)),de.Za){var ot=J,ht=ie-32+16;for(0<K&&(D>=m.za-1?i(ot,ht,De[He].y[15],4):n(ot,ht,De[He+1].y,0,4)),C=0;4>C;C++)ot[ht+128+C]=ot[ht+256+C]=ot[ht+384+C]=ot[ht+0+C];for(C=0;16>C;++C,We<<=2)ot=J,ht=ie+G4[C],fo[de.Ob[C]](ot,ht),Em(We,at,16*+C,ot,ht)}else if(ot=Fh(D,K,de.Ob[0]),mc[ot](J,ie),We!=0)for(C=0;16>C;++C,We<<=2)Em(We,at,16*+C,J,ie+G4[C]);for(C=de.Gc,ot=Fh(D,K,de.Dd),wl[ot](oe,he),wl[ot](Fe,Ge),We=at,ot=oe,ht=he,255&(de=0|C)&&(170&de?Vo(We,256,ot,ht):Ln(We,256,ot,ht)),de=Fe,We=Ge,255&(C>>=8)&&(170&C?Vo(at,320,de,We):Ln(at,320,de,We)),K<m.Ub-1&&(n(De[He].y,0,J,ie+480,16),n(De[He].f,0,oe,he+224,8),n(De[He].ea,0,Fe,Ge+224,8)),C=8*X*m.B,De=m.sa,He=m.ta+16*D+16*X*m.R,at=m.qa,de=m.ra+8*D+C,We=m.Ha,ot=m.Ia+8*D+C,C=0;16>C;++C)n(De,He+C*m.R,J,ie+32*C,16);for(C=0;8>C;++C)n(at,de+C*m.B,oe,he+32*C,8),n(We,ot+C*m.B,Fe,Ge+32*C,8)}}function Lu(m,y,C,D,K,X,J,ie,oe){var he=[0],Fe=[0],Ge=0,de=oe!=null?oe.kd:0,De=oe??new Ye;if(m==null||12>C)return 7;De.data=m,De.w=y,De.ha=C,y=[y],C=[C],De.gb=[De.gb];e:{var He=y,at=C,We=De.gb;if(e(m!=null),e(at!=null),e(We!=null),We[0]=0,12<=at[0]&&!r(m,He[0],"RIFF")){if(r(m,He[0]+8,"WEBP")){We=3;break e}var ot=wt(m,He[0]+4);if(12>ot||4294967286<ot){We=3;break e}if(de&&ot>at[0]-8){We=7;break e}We[0]=ot,He[0]+=12,at[0]-=12}We=0}if(We!=0)return We;for(ot=0<De.gb[0],C=C[0];;){e:{var ht=m;at=y,We=C;var St=he,_t=Fe,cr=He=[0];if((sr=Ge=[Ge])[0]=0,8>We[0])We=7;else{if(!r(ht,at[0],"VP8X")){if(wt(ht,at[0]+4)!=10){We=3;break e}if(18>We[0]){We=7;break e}var Jt=wt(ht,at[0]+8),jr=1+dt(ht,at[0]+12);if(2147483648<=jr*(ht=1+dt(ht,at[0]+15))){We=3;break e}cr!=null&&(cr[0]=Jt),St!=null&&(St[0]=jr),_t!=null&&(_t[0]=ht),at[0]+=18,We[0]-=18,sr[0]=1}We=0}}if(Ge=Ge[0],He=He[0],We!=0)return We;if(at=!!(2&He),!ot&&Ge)return 3;if(X!=null&&(X[0]=!!(16&He)),J!=null&&(J[0]=at),ie!=null&&(ie[0]=0),J=he[0],He=Fe[0],Ge&&at&&oe==null){We=0;break}if(4>C){We=7;break}if(ot&&Ge||!ot&&!Ge&&!r(m,y[0],"ALPH")){C=[C],De.na=[De.na],De.P=[De.P],De.Sa=[De.Sa];e:{Jt=m,We=y,ot=C;var sr=De.gb;St=De.na,_t=De.P,cr=De.Sa,jr=22,e(Jt!=null),e(ot!=null),ht=We[0];var Zr=ot[0];for(e(St!=null),e(cr!=null),St[0]=null,_t[0]=null,cr[0]=0;;){if(We[0]=ht,ot[0]=Zr,8>Zr){We=7;break e}var Di=wt(Jt,ht+4);if(4294967286<Di){We=3;break e}var Fr=8+Di+1&-2;if(jr+=Fr,0<sr&&jr>sr){We=3;break e}if(!r(Jt,ht,"VP8 ")||!r(Jt,ht,"VP8L")){We=0;break e}if(Zr[0]<Fr){We=7;break e}r(Jt,ht,"ALPH")||(St[0]=Jt,_t[0]=ht+8,cr[0]=Di),ht+=Fr,Zr-=Fr}}if(C=C[0],De.na=De.na[0],De.P=De.P[0],De.Sa=De.Sa[0],We!=0)break}C=[C],De.Ja=[De.Ja],De.xa=[De.xa];e:if(sr=m,We=y,ot=C,St=De.gb[0],_t=De.Ja,cr=De.xa,Jt=We[0],ht=!r(sr,Jt,"VP8 "),jr=!r(sr,Jt,"VP8L"),e(sr!=null),e(ot!=null),e(_t!=null),e(cr!=null),8>ot[0])We=7;else{if(ht||jr){if(sr=wt(sr,Jt+4),12<=St&&sr>St-12){We=3;break e}if(de&&sr>ot[0]-8){We=7;break e}_t[0]=sr,We[0]+=8,ot[0]-=8,cr[0]=jr}else cr[0]=5<=ot[0]&&sr[Jt+0]==47&&!(sr[Jt+4]>>5),_t[0]=ot[0];We=0}if(C=C[0],De.Ja=De.Ja[0],De.xa=De.xa[0],y=y[0],We!=0)break;if(4294967286<De.Ja)return 3;if(ie==null||at||(ie[0]=De.xa?2:1),J=[J],He=[He],De.xa){if(5>C){We=7;break}ie=J,de=He,at=X,m==null||5>C?m=0:5<=C&&m[y+0]==47&&!(m[y+4]>>5)?(ot=[0],sr=[0],St=[0],be(_t=new B,m,y,C),on(_t,ot,sr,St)?(ie!=null&&(ie[0]=ot[0]),de!=null&&(de[0]=sr[0]),at!=null&&(at[0]=St[0]),m=1):m=0):m=0}else{if(10>C){We=7;break}ie=He,m==null||10>C||!Tn(m,y+3,C-3)?m=0:(de=m[y+0]|m[y+1]<<8|m[y+2]<<16,at=16383&(m[y+7]<<8|m[y+6]),m=16383&(m[y+9]<<8|m[y+8]),1&de||3<(de>>1&7)||!(de>>4&1)||de>>5>=De.Ja||!at||!m?m=0:(J&&(J[0]=at),ie&&(ie[0]=m),m=1))}if(!m||(J=J[0],He=He[0],Ge&&(he[0]!=J||Fe[0]!=He)))return 3;oe!=null&&(oe[0]=De,oe.offset=y-oe.w,e(4294967286>y-oe.w),e(oe.offset==oe.ha-C));break}return We==0||We==7&&Ge&&oe==null?(X!=null&&(X[0]|=De.na!=null&&0<De.na.length),D!=null&&(D[0]=J),K!=null&&(K[0]=He),0):We}function Ff(m,y,C){var D=y.width,K=y.height,X=0,J=0,ie=D,oe=K;if(y.Da=m!=null&&0<m.Da,y.Da&&(ie=m.cd,oe=m.bd,X=m.v,J=m.j,11>C||(X&=-2,J&=-2),0>X||0>J||0>=ie||0>=oe||X+ie>D||J+oe>K))return 0;if(y.v=X,y.j=J,y.va=X+ie,y.o=J+oe,y.U=ie,y.T=oe,y.da=m!=null&&0<m.da,y.da){if(!we(ie,oe,C=[m.ib],X=[m.hb]))return 0;y.ib=C[0],y.hb=X[0]}return y.ob=m!=null&&m.ob,y.Kb=m==null||!m.Sd,y.da&&(y.ob=y.ib<3*D/4&&y.hb<3*K/4,y.Kb=0),1}function Df(m){if(m==null)return 2;if(11>m.S){var y=m.f.RGBA;y.fb+=(m.height-1)*y.A,y.A=-y.A}else y=m.f.kb,m=m.height,y.O+=(m-1)*y.fa,y.fa=-y.fa,y.N+=(m-1>>1)*y.Ab,y.Ab=-y.Ab,y.W+=(m-1>>1)*y.Db,y.Db=-y.Db,y.F!=null&&(y.J+=(m-1)*y.lb,y.lb=-y.lb);return 0}function lc(m,y,C,D){if(D==null||0>=m||0>=y)return 2;if(C!=null){if(C.Da){var K=C.cd,X=C.bd,J=-2&C.v,ie=-2&C.j;if(0>J||0>ie||0>=K||0>=X||J+K>m||ie+X>y)return 2;m=K,y=X}if(C.da){if(!we(m,y,K=[C.ib],X=[C.hb]))return 2;m=K[0],y=X[0]}}D.width=m,D.height=y;e:{var oe=D.width,he=D.height;if(m=D.S,0>=oe||0>=he||!(m>=km&&13>m))m=2;else{if(0>=D.Rd&&D.sd==null){J=X=K=y=0;var Fe=(ie=oe*Y4[m])*he;if(11>m||(X=(he+1)/2*(y=(oe+1)/2),m==12&&(J=(K=oe)*he)),(he=s(Fe+2*X+J))==null){m=1;break e}D.sd=he,11>m?((oe=D.f.RGBA).eb=he,oe.fb=0,oe.A=ie,oe.size=Fe):((oe=D.f.kb).y=he,oe.O=0,oe.fa=ie,oe.Fd=Fe,oe.f=he,oe.N=0+Fe,oe.Ab=y,oe.Cd=X,oe.ea=he,oe.W=0+Fe+X,oe.Db=y,oe.Ed=X,m==12&&(oe.F=he,oe.J=0+Fe+2*X),oe.Tc=J,oe.lb=K)}if(y=1,K=D.S,X=D.width,J=D.height,K>=km&&13>K)if(11>K)m=D.f.RGBA,y&=(ie=Math.abs(m.A))*(J-1)+X<=m.size,y&=ie>=X*Y4[K],y&=m.eb!=null;else{m=D.f.kb,ie=(X+1)/2,Fe=(J+1)/2,oe=Math.abs(m.fa),he=Math.abs(m.Ab);var Ge=Math.abs(m.Db),de=Math.abs(m.lb),De=de*(J-1)+X;y&=oe*(J-1)+X<=m.Fd,y&=he*(Fe-1)+ie<=m.Cd,y=(y&=Ge*(Fe-1)+ie<=m.Ed)&oe>=X&he>=ie&Ge>=ie,y&=m.y!=null,y&=m.f!=null,y&=m.ea!=null,K==12&&(y&=de>=X,y&=De<=m.Tc,y&=m.F!=null)}else y=0;m=y?0:2}}return m!=0||C!=null&&C.fd&&(m=Df(D)),m}var ju=64,ua=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ha=24,cc=32,yl=8,uc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Je("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(m){return m},A.Predictor2=function(m,y,C){return y[C+0]},A.Predictor3=function(m,y,C){return y[C+1]},A.Predictor4=function(m,y,C){return y[C-1]},A.Predictor5=function(m,y,C){return Et(Et(m,y[C+1]),y[C+0])},A.Predictor6=function(m,y,C){return Et(m,y[C-1])},A.Predictor7=function(m,y,C){return Et(m,y[C+0])},A.Predictor8=function(m,y,C){return Et(y[C-1],y[C+0])},A.Predictor9=function(m,y,C){return Et(y[C+0],y[C+1])},A.Predictor10=function(m,y,C){return Et(Et(m,y[C-1]),Et(y[C+0],y[C+1]))},A.Predictor11=function(m,y,C){var D=y[C+0];return 0>=it(D>>24&255,m>>24&255,(y=y[C-1])>>24&255)+it(D>>16&255,m>>16&255,y>>16&255)+it(D>>8&255,m>>8&255,y>>8&255)+it(255&D,255&m,255&y)?D:m},A.Predictor12=function(m,y,C){var D=y[C+0];return(Bt((m>>24&255)+(D>>24&255)-((y=y[C-1])>>24&255))<<24|Bt((m>>16&255)+(D>>16&255)-(y>>16&255))<<16|Bt((m>>8&255)+(D>>8&255)-(y>>8&255))<<8|Bt((255&m)+(255&D)-(255&y)))>>>0},A.Predictor13=function(m,y,C){var D=y[C-1];return(Ee((m=Et(m,y[C+0]))>>24&255,D>>24&255)<<24|Ee(m>>16&255,D>>16&255)<<16|Ee(m>>8&255,D>>8&255)<<8|Ee(255&m,255&D))>>>0};var Mf=A.PredictorAdd0;A.PredictorAdd1=mt,Je("Predictor2","PredictorAdd2"),Je("Predictor3","PredictorAdd3"),Je("Predictor4","PredictorAdd4"),Je("Predictor5","PredictorAdd5"),Je("Predictor6","PredictorAdd6"),Je("Predictor7","PredictorAdd7"),Je("Predictor8","PredictorAdd8"),Je("Predictor9","PredictorAdd9"),Je("Predictor10","PredictorAdd10"),Je("Predictor11","PredictorAdd11"),Je("Predictor12","PredictorAdd12"),Je("Predictor13","PredictorAdd13");var Dh=A.PredictorAdd2;Vt("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),Vt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var pi,Am=A.ColorIndexInverseTransform,Bo=A.MapARGB,Uo=A.VP8LColorIndexInverseTransformAlpha,Of=A.MapAlpha,Bf=A.VP8LPredictorsAdd=[];Bf.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var Uf,Vf,hc,dc,fc,Fu,pc,Du,qa,Vo,pn,Ln,mi,Fi,vl,zf,Mh,Nm,E4,A4,N4,T4,k4,C4,Hf,I4,P4,R4,L4=s(511),j4=s(2041),F4=s(225),D4=s(767),M4=0,W2=j4,Tm=F4,da=D4,Wa=L4,km=0,Cm=1,O4=2,Im=3,Pm=4,K2=5,B4=6,G2=7,Y2=8,Rm=9,X2=10,Rj=[2,3,7],Lj=[3,3,11],U4=[280,256,256,256,40],jj=[0,1,1,1,0],Fj=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Dj=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Mj=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Oj=8,Q2=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],J2=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],$f=null,Bj=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Uj=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],V4=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Vj=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],zj=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Hj=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],$j=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],mc=[],fo=[],wl=[],qj=1,z4=2,gc=[],Ka=[];Ct("UpsampleRgbLinePair",xs,3),Ct("UpsampleBgrLinePair",Bn,3),Ct("UpsampleRgbaLinePair",Ds,4),Ct("UpsampleBgraLinePair",jf,4),Ct("UpsampleArgbLinePair",gl,4),Ct("UpsampleRgba4444LinePair",Ha,2),Ct("UpsampleRgb565LinePair",ys,2);var Wj=A.UpsampleRgbLinePair,Kj=A.UpsampleBgrLinePair,H4=A.UpsampleRgbaLinePair,$4=A.UpsampleBgraLinePair,q4=A.UpsampleArgbLinePair,W4=A.UpsampleRgba4444LinePair,Gj=A.UpsampleRgb565LinePair,Lm=16,jm=1<<Lm-1,qf=-227,Z2=482,Yj=6,K4=0,Xj=s(256),Qj=s(256),Jj=s(256),Zj=s(256),eF=s(Z2-qf),tF=s(Z2-qf);xl("YuvToRgbRow",xs,3),xl("YuvToBgrRow",Bn,3),xl("YuvToRgbaRow",Ds,4),xl("YuvToBgraRow",jf,4),xl("YuvToArgbRow",gl,4),xl("YuvToRgba4444Row",Ha,2),xl("YuvToRgb565Row",ys,2);var G4=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Fm=[0,2,8],rF=[8,7,6,4,4,2,2,2,1,1,1,1],nF=1;this.WebPDecodeRGBA=function(m,y,C,D,K){var X=Cm,J=new Ce,ie=new $t;J.ba=ie,ie.S=X,ie.width=[ie.width],ie.height=[ie.height];var oe=ie.width,he=ie.height,Fe=new Ze;if(Fe==null||m==null)var Ge=2;else e(Fe!=null),Ge=Lu(m,y,C,Fe.width,Fe.height,Fe.Pd,Fe.Qd,Fe.format,null);if(Ge!=0?oe=0:(oe!=null&&(oe[0]=Fe.width[0]),he!=null&&(he[0]=Fe.height[0]),oe=1),oe){ie.width=ie.width[0],ie.height=ie.height[0],D!=null&&(D[0]=ie.width),K!=null&&(K[0]=ie.height);e:{if(D=new Dr,(K=new Ye).data=m,K.w=y,K.ha=C,K.kd=1,y=[0],e(K!=null),((m=Lu(K.data,K.w,K.ha,null,null,null,y,null,K))==0||m==7)&&y[0]&&(m=4),(y=m)==0){if(e(J!=null),D.data=K.data,D.w=K.w+K.offset,D.ha=K.ha-K.offset,D.put=nr,D.ac=dn,D.bc=zn,D.ma=J,K.xa){if((m=Ne())==null){J=1;break e}if(function(de,De){var He=[0],at=[0],We=[0];t:for(;;){if(de==null)return 0;if(De==null)return de.a=2,0;if(de.l=De,de.a=0,be(de.m,De.data,De.w,De.ha),!on(de.m,He,at,We)){de.a=3;break t}if(de.xb=z4,De.width=He[0],De.height=at[0],!je(He[0],at[0],1,de,null))break t;return 1}return e(de.a!=0),0}(m,D)){if(D=(y=lc(D.width,D.height,J.Oa,J.ba))==0){t:{D=m;r:for(;;){if(D==null){D=0;break t}if(e(D.s.yc!=null),e(D.s.Ya!=null),e(0<D.s.Wb),e((C=D.l)!=null),e((K=C.ma)!=null),D.xb!=0){if(D.ca=K.ba,D.tb=K.tb,e(D.ca!=null),!Ff(K.Oa,C,Im)){D.a=2;break r}if(!Oe(D,C.width)||C.da)break r;if((C.da||rr(D.ca.S))&&Xe(),11>D.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),D.ca.f.kb.F!=null&&Xe()),D.Pb&&0<D.s.ua&&D.s.vb.X==null&&!ae(D.s.vb,D.s.Wa.Xa)){D.a=1;break r}D.xb=0}if(!ke(D,D.V,D.Ba,D.c,D.i,C.o,G))break r;K.Dc=D.Ma,D=1;break t}e(D.a!=0),D=0}D=!D}D&&(y=m.a)}else y=m.a}else{if((m=new Sr)==null){J=1;break e}if(m.Fa=K.na,m.P=K.P,m.qc=K.Sa,un(m,D)){if((y=lc(D.width,D.height,J.Oa,J.ba))==0){if(m.Aa=0,C=J.Oa,e((K=m)!=null),C!=null){if(0<(oe=0>(oe=C.Md)?0:100<oe?255:255*oe/100)){for(he=Fe=0;4>he;++he)12>(Ge=K.pb[he]).lc&&(Ge.ia=oe*rF[0>Ge.lc?0:Ge.lc]>>3),Fe|=Ge.ia;Fe&&(alert("todo:VP8InitRandom"),K.ia=1)}K.Ga=C.Id,100<K.Ga?K.Ga=100:0>K.Ga&&(K.Ga=0)}(function(de,De){if(de==null)return 0;if(De==null)return Xt(de,2,"NULL VP8Io parameter in VP8Decode().");if(!de.cb&&!un(de,De))return 0;if(e(de.cb),De.ac==null||De.ac(De)){De.ob&&(de.L=0);var He=Fm[de.L];if(de.L==2?(de.yb=0,de.zb=0):(de.yb=De.v-He>>4,de.zb=De.j-He>>4,0>de.yb&&(de.yb=0),0>de.zb&&(de.zb=0)),de.Va=De.o+15+He>>4,de.Hb=De.va+15+He>>4,de.Hb>de.za&&(de.Hb=de.za),de.Va>de.Ub&&(de.Va=de.Ub),0<de.L){var at=de.ed;for(He=0;4>He;++He){var We;if(de.Qa.Cb){var ot=de.Qa.Lb[He];de.Qa.Fb||(ot+=at.Tb)}else ot=at.Tb;for(We=0;1>=We;++We){var ht=de.gd[He][We],St=ot;if(at.Pc&&(St+=at.vd[0],We&&(St+=at.od[0])),0<(St=0>St?0:63<St?63:St)){var _t=St;0<at.wb&&(_t=4<at.wb?_t>>2:_t>>1)>9-at.wb&&(_t=9-at.wb),1>_t&&(_t=1),ht.dd=_t,ht.tc=2*St+_t,ht.ld=40<=St?2:15<=St?1:0}else ht.tc=0;ht.La=We}}}He=0}else Xt(de,6,"Frame setup failed"),He=de.a;if(He=He==0){if(He){de.$c=0,0<de.Aa||(de.Ic=nF);t:{He=de.Ic,at=4*(_t=de.za);var cr=32*_t,Jt=_t+1,jr=0<de.L?_t*(0<de.Aa?2:1):0,sr=(de.Aa==2?2:1)*_t;if((ht=at+832+(We=3*(16*He+Fm[de.L])/2*cr)+(ot=de.Fa!=null&&0<de.Fa.length?de.Kc.c*de.Kc.i:0))!=ht)He=0;else{if(ht>de.Vb){if(de.Vb=0,de.Ec=s(ht),de.Fc=0,de.Ec==null){He=Xt(de,1,"no memory during frame initialization.");break t}de.Vb=ht}ht=de.Ec,St=de.Fc,de.Ac=ht,de.Bc=St,St+=at,de.Gd=a(cr,In),de.Hd=0,de.rb=a(Jt+1,en),de.sb=1,de.wa=jr?a(jr,pr):null,de.Y=0,de.D.Nb=0,de.D.wa=de.wa,de.D.Y=de.Y,0<de.Aa&&(de.D.Y+=_t),e(!0),de.oc=ht,de.pc=St,St+=832,de.ya=a(sr,gn),de.aa=0,de.D.ya=de.ya,de.D.aa=de.aa,de.Aa==2&&(de.D.aa+=_t),de.R=16*_t,de.B=8*_t,_t=(cr=Fm[de.L])*de.R,cr=cr/2*de.B,de.sa=ht,de.ta=St+_t,de.qa=de.sa,de.ra=de.ta+16*He*de.R+cr,de.Ha=de.qa,de.Ia=de.ra+8*He*de.B+cr,de.$c=0,St+=We,de.mb=ot?ht:null,de.nb=ot?St:null,e(St+ot<=de.Fc+de.Vb),Oa(de),i(de.Ac,de.Bc,0,at),He=1}}if(He){if(De.ka=0,De.y=de.sa,De.O=de.ta,De.f=de.qa,De.N=de.ra,De.ea=de.Ha,De.Vd=de.Ia,De.fa=de.R,De.Rc=de.B,De.F=null,De.J=0,!M4){for(He=-255;255>=He;++He)L4[255+He]=0>He?-He:He;for(He=-1020;1020>=He;++He)j4[1020+He]=-128>He?-128:127<He?127:He;for(He=-112;112>=He;++He)F4[112+He]=-16>He?-16:15<He?15:He;for(He=-255;510>=He;++He)D4[255+He]=0>He?0:255<He?255:He;M4=1}pc=ps,Du=co,Vo=Ys,pn=ni,Ln=Ba,qa=Ru,mi=si,Fi=dr,vl=V,zf=ue,Mh=ai,Nm=E,E4=Se,A4=Be,N4=Rn,T4=Fs,k4=Mr,C4=ca,fo[0]=za,fo[1]=nc,fo[2]=ho,fo[3]=ml,fo[4]=q,fo[5]=Ue,fo[6]=_e,fo[7]=$e,fo[8]=rt,fo[9]=ut,mc[0]=ac,mc[1]=sc,mc[2]=uo,mc[3]=Xs,mc[4]=Va,mc[5]=Ji,mc[6]=oc,wl[0]=yr,wl[1]=ic,wl[2]=or,wl[3]=zt,wl[4]=yt,wl[5]=qt,wl[6]=hr,He=1}else He=0}He&&(He=function(Zr,Di){for(Zr.M=0;Zr.M<Zr.Va;++Zr.M){var Fr,ar=Zr.Jc[Zr.M&Zr.Xb],Mt=Zr.m,gi=Zr;for(Fr=0;Fr<gi.za;++Fr){var Pr=Mt,tn=gi,Hn=tn.Ac,Zi=tn.Bc+4*Fr,Ms=tn.zc,oi=tn.ya[tn.aa+Fr];if(tn.Qa.Bb?oi.$b=Pe(Pr,tn.Pa.jb[0])?2+Pe(Pr,tn.Pa.jb[2]):Pe(Pr,tn.Pa.jb[1]):oi.$b=0,tn.kc&&(oi.Ad=Pe(Pr,tn.Bd)),oi.Za=!Pe(Pr,145)+0,oi.Za){var vs=oi.Ob,Os=0;for(tn=0;4>tn;++tn){var Mi,sn=Ms[0+tn];for(Mi=0;4>Mi;++Mi){sn=zj[Hn[Zi+Mi]][sn];for(var yn=V4[Pe(Pr,sn[0])];0<yn;)yn=V4[2*yn+Pe(Pr,sn[yn])];sn=-yn,Hn[Zi+Mi]=sn}n(vs,Os,Hn,Zi,4),Os+=4,Ms[0+tn]=sn}}else sn=Pe(Pr,156)?Pe(Pr,128)?1:3:Pe(Pr,163)?2:0,oi.Ob[0]=sn,i(Hn,Zi,sn,4),i(Ms,0,sn,4);oi.Dd=Pe(Pr,142)?Pe(Pr,114)?Pe(Pr,183)?1:3:2:0}if(gi.m.Ka)return Xt(Zr,7,"Premature end-of-partition0 encountered.");for(;Zr.ja<Zr.za;++Zr.ja){if(gi=ar,Pr=(Mt=Zr).rb[Mt.sb-1],Hn=Mt.rb[Mt.sb+Mt.ja],Fr=Mt.ya[Mt.aa+Mt.ja],Zi=Mt.kc?Fr.Ad:0)Pr.la=Hn.la=0,Fr.Za||(Pr.Na=Hn.Na=0),Fr.Hc=0,Fr.Gc=0,Fr.ia=0;else{var li,vn;if(Pr=Hn,Hn=gi,Zi=Mt.Pa.Xc,Ms=Mt.ya[Mt.aa+Mt.ja],oi=Mt.pb[Ms.$b],tn=Ms.ad,vs=0,Os=Mt.rb[Mt.sb-1],sn=Mi=0,i(tn,vs,0,384),Ms.Za)var es=0,po=Zi[3];else{yn=s(16);var xi=Pr.Na+Os.Na;if(xi=$f(Hn,Zi[1],xi,oi.Eb,0,yn,0),Pr.Na=Os.Na=(0<xi)+0,1<xi)pc(yn,0,tn,vs);else{var Qs=yn[0]+3>>3;for(yn=0;256>yn;yn+=16)tn[vs+yn]=Qs}es=1,po=Zi[0]}var jn=15&Pr.la,Oi=15&Os.la;for(yn=0;4>yn;++yn){var fa=1&Oi;for(Qs=vn=0;4>Qs;++Qs)jn=jn>>1|(fa=(xi=$f(Hn,po,xi=fa+(1&jn),oi.Sc,es,tn,vs))>es)<<7,vn=vn<<2|(3<xi?3:1<xi?2:tn[vs+0]!=0),vs+=16;jn>>=4,Oi=Oi>>1|fa<<7,Mi=(Mi<<8|vn)>>>0}for(po=jn,es=Oi>>4,li=0;4>li;li+=2){for(vn=0,jn=Pr.la>>4+li,Oi=Os.la>>4+li,yn=0;2>yn;++yn){for(fa=1&Oi,Qs=0;2>Qs;++Qs)xi=fa+(1&jn),jn=jn>>1|(fa=0<(xi=$f(Hn,Zi[2],xi,oi.Qc,0,tn,vs)))<<3,vn=vn<<2|(3<xi?3:1<xi?2:tn[vs+0]!=0),vs+=16;jn>>=2,Oi=Oi>>1|fa<<5}sn|=vn<<4*li,po|=jn<<4<<li,es|=(240&Oi)<<li}Pr.la=po,Os.la=es,Ms.Hc=Mi,Ms.Gc=sn,Ms.ia=43690&sn?0:oi.ia,Zi=!(Mi|sn)}if(0<Mt.L&&(Mt.wa[Mt.Y+Mt.ja]=Mt.gd[Fr.$b][Fr.Za],Mt.wa[Mt.Y+Mt.ja].La|=!Zi),gi.Ka)return Xt(Zr,7,"Premature end-of-file encountered.")}if(Oa(Zr),Mt=Di,gi=1,Fr=(ar=Zr).D,Pr=0<ar.L&&ar.M>=ar.zb&&ar.M<=ar.Va,ar.Aa==0)t:{if(Fr.M=ar.M,Fr.uc=Pr,$a(ar,Fr),gi=1,Fr=(vn=ar.D).Nb,Pr=(sn=Fm[ar.L])*ar.R,Hn=sn/2*ar.B,yn=16*Fr*ar.R,Qs=8*Fr*ar.B,Zi=ar.sa,Ms=ar.ta-Pr+yn,oi=ar.qa,tn=ar.ra-Hn+Qs,vs=ar.Ha,Os=ar.Ia-Hn+Qs,Oi=(jn=vn.M)==0,Mi=jn>=ar.Va-1,ar.Aa==2&&$a(ar,vn),vn.uc)for(fa=(xi=ar).D.M,e(xi.D.uc),vn=xi.yb;vn<xi.Hb;++vn){es=vn,po=fa;var Bs=(pa=(ts=xi).D).Nb;li=ts.R;var pa=pa.wa[pa.Y+es],ma=ts.sa,Js=ts.ta+16*Bs*li+16*es,ga=pa.dd,Un=pa.tc;if(Un!=0)if(e(3<=Un),ts.L==1)0<es&&T4(ma,Js,li,Un+4),pa.La&&C4(ma,Js,li,Un),0<po&&N4(ma,Js,li,Un+4),pa.La&&k4(ma,Js,li,Un);else{var xa=ts.B,mo=ts.qa,Mu=ts.ra+8*Bs*xa+8*es,_l=ts.Ha,ts=ts.Ia+8*Bs*xa+8*es;Bs=pa.ld,0<es&&(Fi(ma,Js,li,Un+4,ga,Bs),zf(mo,Mu,_l,ts,xa,Un+4,ga,Bs)),pa.La&&(Nm(ma,Js,li,Un,ga,Bs),A4(mo,Mu,_l,ts,xa,Un,ga,Bs)),0<po&&(mi(ma,Js,li,Un+4,ga,Bs),vl(mo,Mu,_l,ts,xa,Un+4,ga,Bs)),pa.La&&(Mh(ma,Js,li,Un,ga,Bs),E4(mo,Mu,_l,ts,xa,Un,ga,Bs))}}if(ar.ia&&alert("todo:DitherRow"),Mt.put!=null){if(vn=16*jn,jn=16*(jn+1),Oi?(Mt.y=ar.sa,Mt.O=ar.ta+yn,Mt.f=ar.qa,Mt.N=ar.ra+Qs,Mt.ea=ar.Ha,Mt.W=ar.Ia+Qs):(vn-=sn,Mt.y=Zi,Mt.O=Ms,Mt.f=oi,Mt.N=tn,Mt.ea=vs,Mt.W=Os),Mi||(jn-=sn),jn>Mt.o&&(jn=Mt.o),Mt.F=null,Mt.J=null,ar.Fa!=null&&0<ar.Fa.length&&vn<jn&&(Mt.J=g(ar,Mt,vn,jn-vn),Mt.F=ar.mb,Mt.F==null&&Mt.F.length==0)){gi=Xt(ar,3,"Could not decode alpha data.");break t}vn<Mt.j&&(sn=Mt.j-vn,vn=Mt.j,e(!(1&sn)),Mt.O+=ar.R*sn,Mt.N+=ar.B*(sn>>1),Mt.W+=ar.B*(sn>>1),Mt.F!=null&&(Mt.J+=Mt.width*sn)),vn<jn&&(Mt.O+=Mt.v,Mt.N+=Mt.v>>1,Mt.W+=Mt.v>>1,Mt.F!=null&&(Mt.J+=Mt.v),Mt.ka=vn-Mt.j,Mt.U=Mt.va-Mt.v,Mt.T=jn-vn,gi=Mt.put(Mt))}Fr+1!=ar.Ic||Mi||(n(ar.sa,ar.ta-Pr,Zi,Ms+16*ar.R,Pr),n(ar.qa,ar.ra-Hn,oi,tn+8*ar.B,Hn),n(ar.Ha,ar.Ia-Hn,vs,Os+8*ar.B,Hn))}if(!gi)return Xt(Zr,6,"Output aborted.")}return 1}(de,De)),De.bc!=null&&De.bc(De),He&=1}return He?(de.cb=0,He):0})(m,D)||(y=m.a)}}else y=m.a}y==0&&J.Oa!=null&&J.Oa.fd&&(y=Df(J.ba))}J=y}X=J!=0?null:11>X?ie.f.RGBA.eb:ie.f.kb.y}else X=null;return X};var Y4=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(A,F){for(var k="",L=0;L<4;L++)k+=String.fromCharCode(A[F++]);return k}function h(A,F){return A[F+0]|A[F+1]<<8}function d(A,F){return(A[F+0]|A[F+1]<<8|A[F+2]<<16)>>>0}function p(A,F){return(A[F+0]|A[F+1]<<8|A[F+2]<<16|A[F+3]<<24)>>>0}new l;var f=[0],v=[0],x=[],_=new l,w=t,S=function(A,F){var k={},L=0,R=!1,le=0,ve=0;if(k.frames=[],!function(I,B){for(var U=0;U<4;U++)if(I[B+U]!="RIFF".charCodeAt(U))return!0;return!1}(A,F)){for(p(A,F+=4),F+=8;F<A.length;){var ge=c(A,F),ye=p(A,F+=4);F+=4;var ce=ye+(1&ye);switch(ge){case"VP8 ":case"VP8L":k.frames[L]===void 0&&(k.frames[L]={}),(Le=k.frames[L]).src_off=R?ve:F-8,Le.src_size=le+ye+8,L++,R&&(R=!1,le=0,ve=0);break;case"VP8X":(Le=k.header={}).feature_flags=A[F];var be=F+4;Le.canvas_width=1+d(A,be),be+=3,Le.canvas_height=1+d(A,be),be+=3;break;case"ALPH":R=!0,le=ce+8,ve=F-8;break;case"ANIM":(Le=k.header).bgcolor=p(A,F),be=F+4,Le.loop_count=h(A,be),be+=2;break;case"ANMF":var Me,Le;(Le=k.frames[L]={}).offset_x=2*d(A,F),F+=3,Le.offset_y=2*d(A,F),F+=3,Le.width=1+d(A,F),F+=3,Le.height=1+d(A,F),F+=3,Le.duration=d(A,F),F+=3,Me=A[F++],Le.dispose=1&Me,Le.blend=Me>>1&1}ge!="ANMF"&&(F+=ce)}return k}}(w,0);S.response=w,S.rgbaoutput=!0,S.dataurl=!1;var N=S.header?S.header:null,j=S.frames?S.frames:null;if(N){N.loop_counter=N.loop_count,f=[N.canvas_height],v=[N.canvas_width];for(var z=0;z<j.length&&j[z].blend!=0;z++);}var W=j[0],b=_.WebPDecodeRGBA(w,W.src_off,W.src_size,v,f);W.rgba=b,W.imgwidth=v[0],W.imgheight=f[0];for(var T=0;T<v[0]*f[0]*4;T++)x[T]=b[T];return this.width=v,this.height=f,this.data=x,this}(function(t){var e,r,n,i,s,a,o,l,c,h=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new l,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new a,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new a,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new h}]);var d=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var B=I;Object.defineProperty(this,"pdf",{get:function(){return B}});var U=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return U},set:function(ae){U=!!ae}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(ae){H=!!ae}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(ae){isNaN(ae)||(te=ae)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(ae){isNaN(ae)||(fe=ae)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ae){var Ie;typeof ae=="number"?Ie=[ae,ae,ae,ae]:((Ie=new Array(4))[0]=ae[0],Ie[1]=ae.length>=2?ae[1]:Ie[0],Ie[2]=ae.length>=3?ae[2]:Ie[0],Ie[3]=ae.length>=4?ae[3]:Ie[1]),c.margin=Ie}});var Ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ae},set:function(ae){Ae=ae}});var Te=0;Object.defineProperty(this,"lastBreak",{get:function(){return Te},set:function(ae){Te=ae}});var Pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Pe},set:function(ae){Pe=ae}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ae){ae instanceof h&&(c=ae)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ae){c.path=ae}});var et=[];Object.defineProperty(this,"ctxStack",{get:function(){return et},set:function(ae){et=ae}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ae){var Ie;Ie=p(ae),this.ctx.fillStyle=Ie.style,this.ctx.isFillTransparent=Ie.a===0,this.ctx.fillOpacity=Ie.a,this.pdf.setFillColor(Ie.r,Ie.g,Ie.b,{a:Ie.a}),this.pdf.setTextColor(Ie.r,Ie.g,Ie.b,{a:Ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ae){var Ie=p(ae);this.ctx.strokeStyle=Ie.style,this.ctx.isStrokeTransparent=Ie.a===0,this.ctx.strokeOpacity=Ie.a,Ie.a===0?this.pdf.setDrawColor(255,255,255):(Ie.a,this.pdf.setDrawColor(Ie.r,Ie.g,Ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ae){["butt","round","square"].indexOf(ae)!==-1&&(this.ctx.lineCap=ae,this.pdf.setLineCap(ae))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ae){isNaN(ae)||(this.ctx.lineWidth=ae,this.pdf.setLineWidth(ae))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ae){["bevel","round","miter"].indexOf(ae)!==-1&&(this.ctx.lineJoin=ae,this.pdf.setLineJoin(ae))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ae){isNaN(ae)||(this.ctx.miterLimit=ae,this.pdf.setMiterLimit(ae))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ae){this.ctx.textBaseline=ae}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ae){["right","end","center","left","start"].indexOf(ae)!==-1&&(this.ctx.textAlign=ae)}});var Qe=null,dt=null,wt=null;Object.defineProperty(this,"fontFaces",{get:function(){return wt},set:function(ae){Qe=null,dt=null,wt=ae}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ae){var Ie;if(this.ctx.font=ae,(Ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ae))!==null){var ne=Ie[1];Ie[2];var we=Ie[3],me=Ie[4];Ie[5];var Ke=Ie[6],Je=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(me)[2];me=Math.floor(Je==="px"?parseFloat(me)*this.pdf.internal.scaleFactor:Je==="em"?parseFloat(me)*this.pdf.getFontSize():parseFloat(me)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(me);var ct=function(Vt){var Vr,mr,qe=[],Ft=Vt.trim();if(Ft==="")return Nv;if(Ft in jN)return[jN[Ft]];for(;Ft!=="";){switch(mr=null,Vr=(Ft=DN(Ft)).charAt(0)){case'"':case"'":mr=cY(Ft.substring(1),Vr);break;default:mr=uY(Ft)}if(mr===null||(qe.push(mr[0]),(Ft=DN(mr[1]))!==""&&Ft.charAt(0)!==","))return Nv;Ft=Ft.replace(/^,/,"")}return qe}(Ke);if(this.fontFaces){var Et=function(Vt,Vr){var mr=Vt.getFontList(),qe=JSON.stringify(mr);if(Qe===null||dt!==qe){var Ft=function(wr){var Gt=[];return Object.keys(wr).forEach(function(Rr){wr[Rr].forEach(function(rr){var Zt=null;switch(rr){case"bold":Zt={family:Rr,weight:"bold"};break;case"italic":Zt={family:Rr,style:"italic"};break;case"bolditalic":Zt={family:Rr,weight:"bold",style:"italic"};break;case"":case"normal":Zt={family:Rr}}Zt!==null&&(Zt.ref={name:Rr,style:rr},Gt.push(Zt))})}),Gt}(mr);Qe=function(wr){for(var Gt={},Rr=0;Rr<wr.length;++Rr){var rr=Av(wr[Rr]),Zt=rr.family,zr=rr.stretch,$t=rr.style,Ze=rr.weight;Gt[Zt]=Gt[Zt]||{},Gt[Zt][zr]=Gt[Zt][zr]||{},Gt[Zt][zr][$t]=Gt[Zt][zr][$t]||{},Gt[Zt][zr][$t][Ze]=rr}return Gt}(Ft.concat(Vr)),dt=qe}return Qe}(this.pdf,this.fontFaces),Bt=ct.map(function(Vt){return{family:Vt,stretch:"normal",weight:we,style:ne}}),Ee=function(Vt,Vr,mr){for(var qe=(mr=mr||{}).defaultFontFamily||"times",Ft=Object.assign({},lY,mr.genericFontFamilies||{}),wr=null,Gt=null,Rr=0;Rr<Vr.length;++Rr)if(Ft[(wr=Av(Vr[Rr])).family]&&(wr.family=Ft[wr.family]),Vt.hasOwnProperty(wr.family)){Gt=Vt[wr.family];break}if(!(Gt=Gt||Vt[qe]))throw new Error("Could not find a font-family for the rule '"+FN(wr)+"' and default family '"+qe+"'.");if(Gt=function(rr,Zt){if(Zt[rr])return Zt[rr];var zr=C5[rr],$t=zr<=C5.normal?-1:1,Ze=LN(Zt,b8,zr,$t);if(!Ze)throw new Error("Could not find a matching font-stretch value for "+rr);return Ze}(wr.stretch,Gt),Gt=function(rr,Zt){if(Zt[rr])return Zt[rr];for(var zr=_8[rr],$t=0;$t<zr.length;++$t)if(Zt[zr[$t]])return Zt[zr[$t]];throw new Error("Could not find a matching font-style for "+rr)}(wr.style,Gt),!(Gt=function(rr,Zt){if(Zt[rr])return Zt[rr];if(rr===400&&Zt[500])return Zt[500];if(rr===500&&Zt[400])return Zt[400];var zr=oY[rr],$t=LN(Zt,S8,zr,rr<400?-1:1);if(!$t)throw new Error("Could not find a matching font-weight for value "+rr);return $t}(wr.weight,Gt)))throw new Error("Failed to resolve a font for the rule '"+FN(wr)+"'.");return Gt}(Et,Bt);this.pdf.setFont(Ee.ref.name,Ee.ref.style)}else{var it="";(we==="bold"||parseInt(we,10)>=700||ne==="bold")&&(it="bold"),ne==="italic"&&(it+="italic"),it.length===0&&(it="normal");for(var mt="",bt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Rt=0;Rt<ct.length;Rt++){if(this.pdf.internal.getFont(ct[Rt],it,{noFallback:!0,disableWarning:!0})!==void 0){mt=ct[Rt];break}if(it==="bolditalic"&&this.pdf.internal.getFont(ct[Rt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)mt=ct[Rt],it="bold";else if(this.pdf.internal.getFont(ct[Rt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){mt=ct[Rt],it="normal";break}}if(mt===""){for(var Ot=0;Ot<ct.length;Ot++)if(bt[ct[Ot]]){mt=bt[ct[Ot]];break}}mt=mt===""?"Times":mt,this.pdf.setFont(mt,it)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ae){this.ctx.globalCompositeOperation=ae}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ae){this.ctx.globalAlpha=ae}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ae){this.ctx.lineDashOffset=ae,Le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ae){this.ctx.lineDash=ae,Le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ae){this.ctx.ignoreClearRect=!!ae}})};d.prototype.setLineDash=function(I){this.lineDash=I},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){j.call(this,"fill",!1)},d.prototype.stroke=function(){j.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(I,B){if(isNaN(I)||isNaN(B))throw Fn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var U=this.ctx.transform.applyToPoint(new a(I,B));this.path.push({type:"mt",x:U.x,y:U.y}),this.ctx.lastPoint=new a(I,B)},d.prototype.closePath=function(){var I=new a(0,0),B=0;for(B=this.path.length-1;B!==-1;B--)if(this.path[B].type==="begin"&&Sn(this.path[B+1])==="object"&&typeof this.path[B+1].x=="number"){I=new a(this.path[B+1].x,this.path[B+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(I.x,I.y)},d.prototype.lineTo=function(I,B){if(isNaN(I)||isNaN(B))throw Fn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var U=this.ctx.transform.applyToPoint(new a(I,B));this.path.push({type:"lt",x:U.x,y:U.y}),this.ctx.lastPoint=new a(U.x,U.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},d.prototype.quadraticCurveTo=function(I,B,U,H){if(isNaN(U)||isNaN(H)||isNaN(I)||isNaN(B))throw Fn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new a(U,H)),fe=this.ctx.transform.applyToPoint(new a(I,B));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:te.x,y:te.y}),this.ctx.lastPoint=new a(te.x,te.y)},d.prototype.bezierCurveTo=function(I,B,U,H,te,fe){if(isNaN(te)||isNaN(fe)||isNaN(I)||isNaN(B)||isNaN(U)||isNaN(H))throw Fn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ae=this.ctx.transform.applyToPoint(new a(te,fe)),Te=this.ctx.transform.applyToPoint(new a(I,B)),Pe=this.ctx.transform.applyToPoint(new a(U,H));this.path.push({type:"bct",x1:Te.x,y1:Te.y,x2:Pe.x,y2:Pe.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new a(Ae.x,Ae.y)},d.prototype.arc=function(I,B,U,H,te,fe){if(isNaN(I)||isNaN(B)||isNaN(U)||isNaN(H)||isNaN(te))throw Fn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var Ae=this.ctx.transform.applyToPoint(new a(I,B));I=Ae.x,B=Ae.y;var Te=this.ctx.transform.applyToPoint(new a(0,U)),Pe=this.ctx.transform.applyToPoint(new a(0,0));U=Math.sqrt(Math.pow(Te.x-Pe.x,2)+Math.pow(Te.y-Pe.y,2))}Math.abs(te-H)>=2*Math.PI&&(H=0,te=2*Math.PI),this.path.push({type:"arc",x:I,y:B,radius:U,startAngle:H,endAngle:te,counterclockwise:fe})},d.prototype.arcTo=function(I,B,U,H,te){throw new Error("arcTo not implemented.")},d.prototype.rect=function(I,B,U,H){if(isNaN(I)||isNaN(B)||isNaN(U)||isNaN(H))throw Fn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,B),this.lineTo(I+U,B),this.lineTo(I+U,B+H),this.lineTo(I,B+H),this.lineTo(I,B),this.lineTo(I+U,B),this.lineTo(I,B)},d.prototype.fillRect=function(I,B,U,H){if(isNaN(I)||isNaN(B)||isNaN(U)||isNaN(H))throw Fn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,B,U,H),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},d.prototype.strokeRect=function(I,B,U,H){if(isNaN(I)||isNaN(B)||isNaN(U)||isNaN(H))throw Fn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(I,B,U,H),this.stroke())},d.prototype.clearRect=function(I,B,U,H){if(isNaN(I)||isNaN(B)||isNaN(U)||isNaN(H))throw Fn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,B,U,H))},d.prototype.save=function(I){I=typeof I!="boolean"||I;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("q");if(this.pdf.setPage(B),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},d.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("Q");this.pdf.setPage(B),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(I){var B,U,H,te;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))B=0,U=0,H=0,te=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(fe!==null)B=parseInt(fe[1]),U=parseInt(fe[2]),H=parseInt(fe[3]),te=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)B=parseInt(fe[1]),U=parseInt(fe[2]),H=parseInt(fe[3]),te=parseFloat(fe[4]);else{if(te=1,typeof I=="string"&&I.charAt(0)!=="#"){var Ae=new p8(I);I=Ae.ok?Ae.toHex():"#000000"}I.length===4?(B=I.substring(1,2),B+=B,U=I.substring(2,3),U+=U,H=I.substring(3,4),H+=H):(B=I.substring(1,3),U=I.substring(3,5),H=I.substring(5,7)),B=parseInt(B,16),U=parseInt(U,16),H=parseInt(H,16)}}return{r:B,g:U,b:H,a:te,style:I}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(I,B,U,H){if(isNaN(B)||isNaN(U)||typeof I!="string")throw Fn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!f.call(this)){var te=ce(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;L.call(this,{text:I,x:B,y:U,scale:fe,angle:te,align:this.textAlign,maxWidth:H})}},d.prototype.strokeText=function(I,B,U,H){if(isNaN(B)||isNaN(U)||typeof I!="string")throw Fn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){H=isNaN(H)?void 0:H;var te=ce(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;L.call(this,{text:I,x:B,y:U,scale:fe,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:H})}},d.prototype.measureText=function(I){if(typeof I!="string")throw Fn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var B=this.pdf,U=this.pdf.internal.scaleFactor,H=B.internal.getFontSize(),te=B.getStringUnitWidth(I)*H/B.internal.scaleFactor;return new function(fe){var Ae=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ae}}),this}({width:te*=Math.round(96*U/72*1e4)/1e4})},d.prototype.scale=function(I,B){if(isNaN(I)||isNaN(B))throw Fn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var U=new l(I,0,0,B,0,0);this.ctx.transform=this.ctx.transform.multiply(U)},d.prototype.rotate=function(I){if(isNaN(I))throw Fn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var B=new l(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(B)},d.prototype.translate=function(I,B){if(isNaN(I)||isNaN(B))throw Fn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var U=new l(1,0,0,1,I,B);this.ctx.transform=this.ctx.transform.multiply(U)},d.prototype.transform=function(I,B,U,H,te,fe){if(isNaN(I)||isNaN(B)||isNaN(U)||isNaN(H)||isNaN(te)||isNaN(fe))throw Fn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ae=new l(I,B,U,H,te,fe);this.ctx.transform=this.ctx.transform.multiply(Ae)},d.prototype.setTransform=function(I,B,U,H,te,fe){I=isNaN(I)?1:I,B=isNaN(B)?0:B,U=isNaN(U)?0:U,H=isNaN(H)?1:H,te=isNaN(te)?0:te,fe=isNaN(fe)?0:fe,this.ctx.transform=new l(I,B,U,H,te,fe)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(I,B,U,H,te,fe,Ae,Te,Pe){var et=this.pdf.getImageProperties(I),Qe=1,dt=1,wt=1,ae=1;H!==void 0&&Te!==void 0&&(wt=Te/H,ae=Pe/te,Qe=et.width/H*Te/H,dt=et.height/te*Pe/te),fe===void 0&&(fe=B,Ae=U,B=0,U=0),H!==void 0&&Te===void 0&&(Te=H,Pe=te),H===void 0&&Te===void 0&&(Te=et.width,Pe=et.height);var Ie=this.ctx.transform.decompose(),ne=ce(Ie.rotate.shx),we=new l,me=(we=(we=(we=we.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new o(fe-B*wt,Ae-U*ae,H*Qe,te*dt));if(this.autoPaging){for(var Ke,Je=_.call(this,me),ct=[],Et=0;Et<Je.length;Et+=1)ct.indexOf(Je[Et])===-1&&ct.push(Je[Et]);N(ct);for(var Bt=ct[0],Ee=ct[ct.length-1],it=Bt;it<Ee+1;it++){this.pdf.setPage(it);var mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bt=it===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Vt=it===1?0:Rt+(it-2)*Ot;if(this.ctx.clip_path.length!==0){var Vr=this.path;Ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Ke,this.posX+this.margin[3],-Vt+bt+this.ctx.prevPageLastElemOffset),z.call(this,"fill",!0),this.path=Vr}var mr=JSON.parse(JSON.stringify(me));mr=S([mr],this.posX+this.margin[3],-Vt+bt+this.ctx.prevPageLastElemOffset)[0];var qe=(it>Bt||it<Ee)&&x.call(this);qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,Ot,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",mr.x,mr.y,mr.w,mr.h,null,null,ne),qe&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(I,"JPEG",me.x,me.y,me.w,me.h,null,null,ne)};var _=function(I,B,U){var H=[];B=B||this.pdf.internal.pageSize.width,U=U||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":H.push(Math.floor((I.y+te)/U)+1);break;case"arc":H.push(Math.floor((I.y+te-I.radius)/U)+1),H.push(Math.floor((I.y+te+I.radius)/U)+1);break;case"qct":var fe=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);H.push(Math.floor((fe.y+te)/U)+1),H.push(Math.floor((fe.y+fe.h+te)/U)+1);break;case"bct":var Ae=Me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);H.push(Math.floor((Ae.y+te)/U)+1),H.push(Math.floor((Ae.y+Ae.h+te)/U)+1);break;case"rect":H.push(Math.floor((I.y+te)/U)+1),H.push(Math.floor((I.y+I.h+te)/U)+1)}for(var Te=0;Te<H.length;Te+=1)for(;this.pdf.internal.getNumberOfPages()<H[Te];)w.call(this);return H},w=function(){var I=this.fillStyle,B=this.strokeStyle,U=this.font,H=this.lineCap,te=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=B,this.font=U,this.lineCap=H,this.lineWidth=te,this.lineJoin=fe},S=function(I,B,U){for(var H=0;H<I.length;H++)switch(I[H].type){case"bct":I[H].x2+=B,I[H].y2+=U;case"qct":I[H].x1+=B,I[H].y1+=U;default:I[H].x+=B,I[H].y+=U}return I},N=function(I){return I.sort(function(B,U){return B-U})},j=function(I,B){var U=this.fillStyle,H=this.strokeStyle,te=this.lineCap,fe=this.lineWidth,Ae=Math.abs(fe*this.ctx.transform.scaleX),Te=this.lineJoin;if(this.autoPaging){for(var Pe,et,Qe=JSON.parse(JSON.stringify(this.path)),dt=JSON.parse(JSON.stringify(this.path)),wt=[],ae=0;ae<dt.length;ae++)if(dt[ae].x!==void 0)for(var Ie=_.call(this,dt[ae]),ne=0;ne<Ie.length;ne+=1)wt.indexOf(Ie[ne])===-1&&wt.push(Ie[ne]);for(var we=0;we<wt.length;we++)for(;this.pdf.internal.getNumberOfPages()<wt[we];)w.call(this);N(wt);for(var me=wt[0],Ke=wt[wt.length-1],Je=me;Je<Ke+1;Je++){this.pdf.setPage(Je),this.fillStyle=U,this.strokeStyle=H,this.lineCap=te,this.lineWidth=Ae,this.lineJoin=Te;var ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Et=Je===1?this.posY+this.margin[0]:this.margin[0],Bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ee=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=Je===1?0:Bt+(Je-2)*Ee;if(this.ctx.clip_path.length!==0){var mt=this.path;Pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Pe,this.posX+this.margin[3],-it+Et+this.ctx.prevPageLastElemOffset),z.call(this,I,!0),this.path=mt}if(et=JSON.parse(JSON.stringify(Qe)),this.path=S(et,this.posX+this.margin[3],-it+Et+this.ctx.prevPageLastElemOffset),B===!1||Je===0){var bt=(Je>me||Je<Ke)&&x.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,Ee,null).clip().discardPath()),z.call(this,I,B),bt&&this.pdf.restoreGraphicsState()}this.lineWidth=fe}this.path=Qe}else this.lineWidth=Ae,z.call(this,I,B),this.lineWidth=fe},z=function(I,B){if((I!=="stroke"||B||!v.call(this))&&(I==="stroke"||B||!f.call(this))){for(var U,H,te=[],fe=this.path,Ae=0;Ae<fe.length;Ae++){var Te=fe[Ae];switch(Te.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:Te,deltas:[],abs:[]});break;case"lt":var Pe=te.length;if(fe[Ae-1]&&!isNaN(fe[Ae-1].x)&&(U=[Te.x-fe[Ae-1].x,Te.y-fe[Ae-1].y],Pe>0)){for(;Pe>=0;Pe--)if(te[Pe-1].close!==!0&&te[Pe-1].begin!==!0){te[Pe-1].deltas.push(U),te[Pe-1].abs.push(Te);break}}break;case"bct":U=[Te.x1-fe[Ae-1].x,Te.y1-fe[Ae-1].y,Te.x2-fe[Ae-1].x,Te.y2-fe[Ae-1].y,Te.x-fe[Ae-1].x,Te.y-fe[Ae-1].y],te[te.length-1].deltas.push(U);break;case"qct":var et=fe[Ae-1].x+2/3*(Te.x1-fe[Ae-1].x),Qe=fe[Ae-1].y+2/3*(Te.y1-fe[Ae-1].y),dt=Te.x+2/3*(Te.x1-Te.x),wt=Te.y+2/3*(Te.y1-Te.y),ae=Te.x,Ie=Te.y;U=[et-fe[Ae-1].x,Qe-fe[Ae-1].y,dt-fe[Ae-1].x,wt-fe[Ae-1].y,ae-fe[Ae-1].x,Ie-fe[Ae-1].y],te[te.length-1].deltas.push(U);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(Te)}}H=B?null:I==="stroke"?"stroke":"fill";for(var ne=!1,we=0;we<te.length;we++)if(te[we].arc)for(var me=te[we].abs,Ke=0;Ke<me.length;Ke++){var Je=me[Ke];Je.type==="arc"?T.call(this,Je.x,Je.y,Je.radius,Je.startAngle,Je.endAngle,Je.counterclockwise,void 0,B,!ne):R.call(this,Je.x,Je.y),ne=!0}else if(te[we].close===!0)this.pdf.internal.out("h"),ne=!1;else if(te[we].begin!==!0){var ct=te[we].start.x,Et=te[we].start.y;le.call(this,te[we].deltas,ct,Et),ne=!0}H&&A.call(this,H),B&&F.call(this)}},W=function(I){var B=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,U=B*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-U;case"top":return I+B-U;case"hanging":return I+B-2*U;case"middle":return I+B/2-U;default:return I}},b=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(B,U){this.colorStops.push([B,U])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(I,B,U,H,te,fe,Ae,Te,Pe){for(var et=ge.call(this,U,H,te,fe),Qe=0;Qe<et.length;Qe++){var dt=et[Qe];Qe===0&&(Pe?k.call(this,dt.x1+I,dt.y1+B):R.call(this,dt.x1+I,dt.y1+B)),ve.call(this,I,B,dt.x2,dt.y2,dt.x3,dt.y3,dt.x4,dt.y4)}Te?F.call(this):A.call(this,Ae)},A=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(I,B){this.pdf.internal.out(r(I)+" "+n(B)+" m")},L=function(I){var B;switch(I.align){case"right":case"end":B="right";break;case"center":B="center";break;default:B="left"}var U,H,te,fe=this.pdf.getTextDimensions(I.text),Ae=W.call(this,I.y),Te=b.call(this,Ae)-fe.h,Pe=this.ctx.transform.applyToPoint(new a(I.x,Ae));if(this.autoPaging){var et=this.ctx.transform.decompose(),Qe=new l;Qe=(Qe=(Qe=Qe.multiply(et.translate)).multiply(et.skew)).multiply(et.scale);for(var dt=this.ctx.transform.applyToRectangle(new o(I.x,Ae,fe.w,fe.h)),wt=Qe.applyToRectangle(new o(I.x,Te,fe.w,fe.h)),ae=_.call(this,wt),Ie=[],ne=0;ne<ae.length;ne+=1)Ie.indexOf(ae[ne])===-1&&Ie.push(ae[ne]);N(Ie);for(var we=Ie[0],me=Ie[Ie.length-1],Ke=we;Ke<me+1;Ke++){this.pdf.setPage(Ke);var Je=Ke===1?this.posY+this.margin[0]:this.margin[0],ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[2],Bt=Et-this.margin[0],Ee=this.pdf.internal.pageSize.width-this.margin[1],it=Ee-this.margin[3],mt=Ke===1?0:ct+(Ke-2)*Bt;if(this.ctx.clip_path.length!==0){var bt=this.path;U=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(U,this.posX+this.margin[3],-1*mt+Je),z.call(this,"fill",!0),this.path=bt}var Rt=S([JSON.parse(JSON.stringify(wt))],this.posX+this.margin[3],-mt+Je+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(H=this.pdf.internal.getFontSize(),this.pdf.setFontSize(H*I.scale),te=this.lineWidth,this.lineWidth=te*I.scale);var Ot=this.autoPaging!=="text";if(Ot||Rt.y+Rt.h<=Et){if(Ot||Rt.y>=Je&&Rt.x<=Ee){var Vt=Ot?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||Ee-Rt.x)[0],Vr=S([JSON.parse(JSON.stringify(dt))],this.posX+this.margin[3],-mt+Je+this.ctx.prevPageLastElemOffset)[0],mr=Ot&&(Ke>we||Ke<me)&&x.call(this);mr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],it,Bt,null).clip().discardPath()),this.pdf.text(Vt,Vr.x,Vr.y,{angle:I.angle,align:B,renderingMode:I.renderingMode}),mr&&this.pdf.restoreGraphicsState()}}else Rt.y<Et&&(this.ctx.prevPageLastElemOffset+=Et-Rt.y);I.scale>=.01&&(this.pdf.setFontSize(H),this.lineWidth=te)}}else I.scale>=.01&&(H=this.pdf.internal.getFontSize(),this.pdf.setFontSize(H*I.scale),te=this.lineWidth,this.lineWidth=te*I.scale),this.pdf.text(I.text,Pe.x+this.posX,Pe.y+this.posY,{angle:I.angle,align:B,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(H),this.lineWidth=te)},R=function(I,B,U,H){U=U||0,H=H||0,this.pdf.internal.out(r(I+U)+" "+n(B+H)+" l")},le=function(I,B,U){return this.pdf.lines(I,B,U,null,null)},ve=function(I,B,U,H,te,fe,Ae,Te){this.pdf.internal.out([e(i(U+I)),e(s(H+B)),e(i(te+I)),e(s(fe+B)),e(i(Ae+I)),e(s(Te+B)),"c"].join(" "))},ge=function(I,B,U,H){for(var te=2*Math.PI,fe=Math.PI/2;B>U;)B-=te;var Ae=Math.abs(U-B);Ae<te&&H&&(Ae=te-Ae);for(var Te=[],Pe=H?-1:1,et=B;Ae>1e-5;){var Qe=et+Pe*Math.min(Ae,fe);Te.push(ye.call(this,I,et,Qe)),Ae-=Math.abs(Qe-et),et=Qe}return Te},ye=function(I,B,U){var H=(U-B)/2,te=I*Math.cos(H),fe=I*Math.sin(H),Ae=te,Te=-fe,Pe=Ae*Ae+Te*Te,et=Pe+Ae*te+Te*fe,Qe=4/3*(Math.sqrt(2*Pe*et)-et)/(Ae*fe-Te*te),dt=Ae-Qe*Te,wt=Te+Qe*Ae,ae=dt,Ie=-wt,ne=H+B,we=Math.cos(ne),me=Math.sin(ne);return{x1:I*Math.cos(B),y1:I*Math.sin(B),x2:dt*we-wt*me,y2:dt*me+wt*we,x3:ae*we-Ie*me,y3:ae*me+Ie*we,x4:I*Math.cos(U),y4:I*Math.sin(U)}},ce=function(I){return 180*I/Math.PI},be=function(I,B,U,H,te,fe){var Ae=I+.5*(U-I),Te=B+.5*(H-B),Pe=te+.5*(U-te),et=fe+.5*(H-fe),Qe=Math.min(I,te,Ae,Pe),dt=Math.max(I,te,Ae,Pe),wt=Math.min(B,fe,Te,et),ae=Math.max(B,fe,Te,et);return new o(Qe,wt,dt-Qe,ae-wt)},Me=function(I,B,U,H,te,fe,Ae,Te){var Pe,et,Qe,dt,wt,ae,Ie,ne,we,me,Ke,Je,ct,Et,Bt=U-I,Ee=H-B,it=te-U,mt=fe-H,bt=Ae-te,Rt=Te-fe;for(et=0;et<41;et++)we=(Ie=(Qe=I+(Pe=et/40)*Bt)+Pe*((wt=U+Pe*it)-Qe))+Pe*(wt+Pe*(te+Pe*bt-wt)-Ie),me=(ne=(dt=B+Pe*Ee)+Pe*((ae=H+Pe*mt)-dt))+Pe*(ae+Pe*(fe+Pe*Rt-ae)-ne),et==0?(Ke=we,Je=me,ct=we,Et=me):(Ke=Math.min(Ke,we),Je=Math.min(Je,me),ct=Math.max(ct,we),Et=Math.max(Et,me));return new o(Math.round(Ke),Math.round(Je),Math.round(ct-Ke),Math.round(Et-Je))},Le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,B,U=(I=this.ctx.lineDash,B=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:B}));this.prevLineDash!==U&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=U)}}})(ur.API),function(t){var e=function(a){var o,l,c,h,d,p,f,v,x,_;for(l=[],c=0,h=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;h>c;c+=4)(d=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(p=(d=((d=((d=((d=(d-(_=d%85))/85)-(x=d%85))/85)-(v=d%85))/85)-(f=d%85))/85)%85,l.push(p+33,f+33,v+33,x+33,_+33)):l.push(122);return function(w,S){for(var N=S;N>0;N--)w.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(a){var o,l,c,h,d,p=String,f="length",v=255,x="charCodeAt",_="slice",w="replace";for(a[_](-2),a=a[_](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),c=[],h=0,d=(a+=o="uuuuu"[_](a[f]%5||5))[f];d>h;h+=5)l=52200625*(a[x](h)-33)+614125*(a[x](h+1)-33)+7225*(a[x](h+2)-33)+85*(a[x](h+3)-33)+(a[x](h+4)-33),c.push(v&l>>24,v&l>>16,v&l>>8,v&l);return function(S,N){for(var j=N;j>0;j--)S.pop()}(c,o[f]),p.fromCharCode.apply(p,c)},n=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},s=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return(o=b5(o)).reduce(function(c,h){return c+String.fromCharCode(h)},"")};t.processDataByFilters=function(a,o){var l=0,c=a||"",h=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:h.reverse().join(" ")}}}(ur.API),function(t){t.loadFile=function(e,r,n){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,c,h){var d=new XMLHttpRequest,p=0,f=function(v){var x=v.length,_=[],w=String.fromCharCode;for(p=0;p<x;p+=1)_.push(w(255&v.charCodeAt(p)));return _.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?h(f(this.responseText)):h(void 0)}),d.send(null),c&&d.status===200)return f(d.responseText)}(i,s,a)}catch{}return o}(e,r,n)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile}(ur.API),function(t){function e(){return(Er.html2canvas?Promise.resolve(Er.html2canvas):m1(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Er.DOMPurify?Promise.resolve(Er.DOMPurify):m1(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=Sn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var c=document.createElement(o);for(var h in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[h]=l.style[h];return c},s=function o(l,c){for(var h=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)c!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||h.appendChild(o(d,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(h.width=l.width,h.height=l.height,h.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(h.value=l.value),h.addEventListener("load",function(){h.scrollTop=l.scrollTop,h.scrollLeft=l.scrollLeft},!0)),h},a=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),h=o.convert(Promise.resolve(),c);return(h=h.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(r).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=this.opt.jsPDF,h=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=h,h)for(var f=0;f<h.length;++f){var v=h[f],x=v.src.find(function(_){return _.format==="truetype"});x&&c.addFont(x.url,v.ref.name,v.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),l(this.prop.container,p)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(c,h){return Math.floor(c*h/72*96)}return this.then(function(){(o=o||ur.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,c,h){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,c,h){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,h?this.progress.stack.concat(h):null)},a.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(h,d){return c.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(p){return c.updateProgress(null,h),p}).then(h,d).then(function(p){return c.updateProgress(1),p})})},a.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then;var h=this;o&&(o=o.bind(h)),l&&(l=l.bind(h));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:a.convert(Object.assign({},h),Promise.prototype),p=c.call(d,o,l);return a.convert(p,h.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,ur.getPageSize=function(o,l,c){if(Sn(o)==="object"){var h=o;o=h.orientation,l=h.unit||l,c=h.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+c).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var v,x=0,_=0;if(f.hasOwnProperty(p))x=f[p][1]/d,_=f[p][0]/d;else try{x=c[1],_=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",_>x&&(v=_,_=x,x=v);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>_&&(v=_,_=x,x=v)}return{width:_,height:x,unit:l,k:d,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Av):null;var c=new a(l);return l.worker?c:c.from(o).doCallback()}}(ur.API),ur.API.addJS=function(t){return ON=t,this.internal.events.subscribe("postPutResources",function(){Ag=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ag+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),MN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ON+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ag!==void 0&&MN!==void 0&&this.internal.out("/Names <</JavaScript "+Ag+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=n.exec(a);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,h=[];for(s=0;s<c;s++){var d=r.internal.newObject();h.push(d);var p=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<h.length;s++)r.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,s){var a={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var a=n.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])}(ur.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,s,a,o){var l,c=this.decode.DCT_DECODE,h=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,l=function(d){for(var p,f=256*d.charCodeAt(4)+d.charCodeAt(5),v=d.length,x={width:0,height:0,numcomponents:1},_=4;_<v;_+=2){if(_+=f,e.indexOf(d.charCodeAt(_+1))!==-1){p=256*d.charCodeAt(_+5)+d.charCodeAt(_+6),x={width:256*d.charCodeAt(_+7)+d.charCodeAt(_+8),height:p,numcomponents:d.charCodeAt(_+9)};break}f=256*d.charCodeAt(_+2)+d.charCodeAt(_+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}h={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:i}}return h}}(ur.API),ur.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=KG(t,{checkCrc:!0}),a=s.width,o=s.height,l=s.channels,c=s.palette,h=s.depth;i=c&&l===1?function(T){for(var A=T.width,F=T.height,k=T.data,L=T.palette,R=T.depth,le=!1,ve=[],ge=[],ye=void 0,ce=!1,be=0,Me=0;Me<L.length;Me++){var Le=zA(L[Me],4),I=Le[0],B=Le[1],U=Le[2],H=Le[3];ve.push(I,B,U),H!=null&&(H===0?(be++,ge.length<1&&ge.push(Me)):H<255&&(ce=!0))}if(ce||be>1){le=!0,ge=void 0;var te=A*F;ye=new Uint8Array(te);for(var fe=new DataView(k.buffer),Ae=0;Ae<te;Ae++){var Te=Tv(fe,Ae,R),Pe=zA(L[Te],4)[3];ye[Ae]=Pe}}else be===0&&(ge=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:le?8:void 0,colorBytes:k,alphaBytes:ye,needSMask:le,palette:ve,mask:ge}}(s):l===2||l===4?function(T){for(var A=T.data,F=T.width,k=T.height,L=T.channels,R=T.depth,le=L===2?"DeviceGray":"DeviceRGB",ve=L-1,ge=F*k,ye=ve,ce=ge*ye,be=1*ge,Me=Math.ceil(ce*R/8),Le=Math.ceil(be*R/8),I=new Uint8Array(Me),B=new Uint8Array(Le),U=new DataView(A.buffer),H=new DataView(I.buffer),te=new DataView(B.buffer),fe=!1,Ae=0;Ae<ge;Ae++){for(var Te=Ae*L,Pe=0;Pe<ye;Pe++)KN(H,Tv(U,Te+Pe,R),Ae*ye+Pe,R);var et=Tv(U,Te+ye,R);et<(1<<R)-1&&(fe=!0),KN(te,et,1*Ae,R)}return{colorSpace:le,colorsPerPixel:ve,sMaskBitsPerComponent:fe?R:void 0,colorBytes:I,alphaBytes:B,needSMask:fe}}(s):function(T){var A=T.data,F=T.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:F,colorsPerPixel:F==="DeviceGray"?1:3,colorBytes:A instanceof Uint16Array?function(k){for(var L=k.length,R=new Uint8Array(2*L),le=new DataView(R.buffer,R.byteOffset,R.byteLength),ve=0;ve<L;ve++)le.setUint16(2*ve,k[ve],!1);return R}(A):A,needSMask:!1}}(s);var d,p,f,v=i,x=v.colorSpace,_=v.colorsPerPixel,w=v.sMaskBitsPerComponent,S=v.colorBytes,N=v.alphaBytes,j=v.needSMask,z=v.palette,W=v.mask,b=null;return n!==ur.API.image_compression.NONE&&typeof b5=="function"?(b=function(T){var A;switch(T){case ur.API.image_compression.FAST:A=11;break;case ur.API.image_compression.MEDIUM:A=13;break;case ur.API.image_compression.SLOW:A=14;break;default:A=12}return A}(n),d=this.decode.FLATE_DECODE,p="/Predictor ".concat(b," /Colors ").concat(_," /BitsPerComponent ").concat(h," /Columns ").concat(a),t=zN(S,Math.ceil(a*_*h/8),_,h,n),j&&(f=zN(N,Math.ceil(a*w/8),1,w,n))):(d=void 0,p=void 0,t=S,j&&(f=N)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:r,data:t,index:e,filter:d,decodeParameters:p,transparency:W,palette:z,sMask:f,predictor:b,width:a,height:o,bitsPerComponent:h,sMaskBitsPerComponent:w,colorSpace:x}}},function(t){t.processGIF89A=function(e,r,n,i){var s=new pY(e),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},h=new kv(100).encode(c,100);return t.processJPEG.call(this,h,r,n,i)},t.processGIF87A=t.processGIF89A}(ur.API),xo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},xo.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Fn.log("bit decode error:"+r)}},xo.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},xo.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*i*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},xo.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},xo.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,h=n*this.width*4+4*i;this.data[h]=l,this.data[h+1]=o,this.data[h+2]=a,this.data[h+3]=c}this.pos+=t}},xo.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&r)/r*255|0,c=(a>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=o,this.data[h+3]=255}this.pos+=t}},xo.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},xo.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=a}},xo.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,i){var s=new xo(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new kv(100).encode(l,100);return t.processJPEG.call(this,c,r,n,i)}}(ur.API),YN.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,i){var s=new YN(e),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new kv(100).encode(l,100);return t.processJPEG.call(this,c,r,n,i)}}(ur.API),ur.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,c=0;c<i;c+=4){var h=n[c],d=n[c+1],p=n[c+2],f=n[c+3];s[o++]=h,s[o++]=d,s[o++]=p,a[l++]=f}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:v,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ur.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Hh=ur.API,Ng=Hh.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=c.fof?c.fof:1,d=e.doKerning!==!1,p=0,f=t.length,v=0,x=o[0]||l,_=[];for(r=0;r<f;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?_.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+a*(1e3/s)||0)/1e3):(p=d&&Sn(c[n])==="object"&&!isNaN(parseInt(c[n][v],10))?c[n][v]/h:0,_.push((o[n]||x)/l+p)),v=n;return _},BN=Hh.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Hh.processArabic&&(t=Hh.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:Ng.apply(this,arguments).reduce(function(s,a){return s+a},0)},UN=function(t,e,r,n){for(var i=[],s=0,a=t.length,o=0;s!==a&&o+e[s]<r;)o+=e[s],s++;i.push(t.slice(0,s));var l=s;for(o=0;s!==a;)o+e[s]>n&&(i.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},VN=function(t,e,r){r||(r={});var n,i,s,a,o,l,c,h=[],d=[h],p=r.textIndent||0,f=0,v=0,x=t.split(" "),_=Ng.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var w=Array(l).join(" "),S=[];x.map(function(j){(j=j.split(/\s*\n/)).length>1?S=S.concat(j.map(function(z,W){return(W&&z.length?`
`:"")+z})):S.push(j[0])}),x=S,l=BN.apply(this,[w,r])}for(s=0,a=x.length;s<a;s++){var N=0;if(n=x[s],l&&n[0]==`
`&&(n=n.substr(1),N=1),p+f+(v=(i=Ng.apply(this,[n,r])).reduce(function(j,z){return j+z},0))>e||N){if(v>e){for(o=UN.apply(this,[n,i,e-(p+f),e]),h.push(o.shift()),h=[o.pop()];o.length;)d.push([o.shift()]);v=i.slice(n.length-(h[0]?h[0].length:0)).reduce(function(j,z){return j+z},0)}else h=[n];d.push(h),p=v+l,f=_}else h.push(n),p+=f+v,f=_}return c=l?function(j,z){return(z?w:"")+j.join(" ")}:function(j){return j.join(" ")},d.map(c)},Hh.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var d=this.internal.getFont(h.fontName,h.fontStyle),p="Unicode";return d.metadata[p]?{widths:d.metadata[p].widths||{0:1},kerning:d.metadata[p].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(VN.apply(this,[n[o],a,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[r[s]]=e[s],i[e[s]]=r[s];var a=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var f,v,x,_,w=["{"];for(var S in p){if(f=p[S],isNaN(parseInt(S,10))?v="'"+S+"'":(S=parseInt(S,10),v=(v=a(S).slice(2)).slice(0,-1)+i[v.slice(-1)]),typeof f=="number")f<0?(x=a(f).slice(3),_="-"):(x=a(f).slice(2),_=""),x=_+x.slice(0,-1)+i[x.slice(-1)];else{if(Sn(f)!=="object")throw new Error("Don't know what to do with value type "+Sn(f)+".");x=o(f)}w.push(v+x)}return w.push("}"),w.join("")},l=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,v,x,_,w={},S=1,N=w,j=[],z="",W="",b=p.length-1,T=1;T<b;T+=1)(_=p[T])=="'"?f?(x=f.join(""),f=void 0):f=[]:f?f.push(_):_=="{"?(j.push([N,x]),N={},x=void 0):_=="}"?((v=j.pop())[0][v[1]]=N,x=void 0,N=v[0]):_=="-"?S=-1:x===void 0?n.hasOwnProperty(_)?(z+=n[_],x=parseInt(z,16)*S,S=1,z=""):z+=_:n.hasOwnProperty(_)?(W+=n[_],N[x]=parseInt(W,16)*S,S=1,x=void 0,W=""):W+=_;return w},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var f=p.font,v=d.Unicode[f.postScriptName];v&&(f.metadata.Unicode={},f.metadata.Unicode.widths=v.widths,f.metadata.Unicode.kerning=v.kerning);var x=h.Unicode[f.postScriptName];x&&(f.metadata.Unicode.encoding=x,f.encoding=x.codePages[0])}])}(ur.API),function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=r.charCodeAt(s);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,s=r.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(x1(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,n)}}])}(ur),ur.API.addSvgAsImage=function(t,e,r,n,i,s,a,o){if(isNaN(e)||isNaN(r))throw Fn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw Fn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(Er.canvg?Promise.resolve(Er.canvg):m1(()=>import("./index.es-DrzfVTXR.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(c,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(h)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),e,r,n,i,a,o)})},ur.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},ur.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,h=0,d=0;function p(v,x){var _,w=!1;for(_=0;_<v.length;_+=1)v[_]===x&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=o.length;for(d=0;d<f;d+=1)r[o[d]].value=r[o[d]].defaultValue,r[o[d]].explicitSet=!1}if(Sn(t)==="object"){for(i in t)if(s=t[i],p(o,i)&&s!==void 0){if(r[i].type==="boolean"&&typeof s=="boolean")r[i].value=s;else if(r[i].type==="name"&&p(r[i].valueSet,s))r[i].value=s;else if(r[i].type==="integer"&&Number.isInteger(s))r[i].value=s;else if(r[i].type==="array"){for(c=0;c<s.length;c+=1)if(n=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(h=0;h<s[c].length;h+=1)typeof s[c][h]!="number"&&(n=!1);n===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}r[i].value="["+l.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,x=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?x.push("/"+v+" /"+r[v].value):x.push("/"+v+" "+r[v].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+a.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(ur.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],h=[""],d=0,p=s.length;d<p;++d){if(o=a.metadata.characterToGlyph(s.charCodeAt(d)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(d),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return h.join("");o=o.toString(16),h.push(c[4-o.length],o)}return h.join("")},n=function(s){var a,o,l,c,h,d,p;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,p=(o=Object.keys(s).sort(function(f,v){return f-v})).length;d<p;d++)a=o[d],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(c=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,h=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var d=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),f="",v=0;v<p.length;v++)f+=String.fromCharCode(p[v]);var x=c();h({data:f,addLength1:!0,objectId:x}),l("endobj");var _=c();h({data:n(o.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var w=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+ed(o.fontName)),l("/FontFile2 "+x+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var S=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+ed(o.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+_+" 0 R"),l("/BaseFont /"+ed(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+S+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,h=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var d=o.metadata.rawData,p="",f=0;f<d.length;f++)p+=String.fromCharCode(d[f]);var v=c();h({data:p,addLength1:!0,objectId:v}),l("endobj");var x=c();h({data:n(o.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var _=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+ed(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var w=0;w<o.metadata.hmtx.widths.length;w++)o.metadata.hmtx.widths[w]=parseInt(o.metadata.hmtx.widths[w]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+ed(o.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",l=s.x,c=s.y,h=s.options||{},d=s.mutex||{},p=d.pdfEscape,f=d.activeFontKey,v=d.fonts,x=f,_="",w=0,S="",N=v[x].encoding;if(v[x].encoding!=="Identity-H")return{text:o,x:l,y:c,options:h,mutex:d};for(S=o,x=f,Array.isArray(o)&&(S=o[0]),w=0;w<S.length;w+=1)v[x].metadata.hasOwnProperty("cmap")&&(a=v[x].metadata.cmap.unicode.codeMap[S[w].charCodeAt(0)]),a||S[w].charCodeAt(0)<256&&v[x].metadata.hasOwnProperty("Unicode")?_+=S[w]:_+="";var j="";return parseInt(x.slice(1))<14||N==="WinAnsiEncoding"?j=p(_,x).split("").map(function(z){return z.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(j=r(_,v[x])),d.isHex=!0,{text:j,x:l,y:c,options:h,mutex:d}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([i(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(i(Object.assign({},l,{text:a[c]})).text);s.text=o}else s.text=i(Object.assign({},l,{text:a})).text}])}(ur),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ur.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,s,a,o,l,c,h,d=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,N=0;this.__bidiEngine__={};var j=function(k){var L=k.charCodeAt(),R=L>>8,le=x[R];return le!==void 0?d[256*le+(255&L)]:R===252||R===253?"AL":w.test(R)?"L":R===8?"R":"N"},z=function(k){for(var L,R=0;R<k.length;R++){if((L=j(k.charAt(R)))==="L")return!1;if(L==="R")return!0}return!1},W=function(k,L,R,le){var ve,ge,ye,ce,be=L[le];switch(be){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"N":case"AN":break;case"EN":S&&(be="AN");break;case"AL":S=!0,be="R";break;case"WS":case"BN":be="N";break;case"CS":le<1||le+1>=L.length||(ve=R[le-1])!=="EN"&&ve!=="AN"||(ge=L[le+1])!=="EN"&&ge!=="AN"?be="N":S&&(ge="AN"),be=ge===ve?ge:"N";break;case"ES":be=(ve=le>0?R[le-1]:"B")==="EN"&&le+1<L.length&&L[le+1]==="EN"?"EN":"N";break;case"ET":if(le>0&&R[le-1]==="EN"){be="EN";break}if(S){be="N";break}for(ye=le+1,ce=L.length;ye<ce&&L[ye]==="ET";)ye++;be=ye<ce&&L[ye]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(ce=L.length,ye=le+1;ye<ce&&L[ye]==="NSM";)ye++;if(ye<ce){var Me=k[le],Le=Me>=1425&&Me<=2303||Me===64286;if(ve=L[ye],Le&&(ve==="R"||ve==="AL")){be="R";break}}}be=le<1||(ve=L[le-1])==="B"?"N":R[le-1];break;case"B":S=!1,i=!0,be=N;break;case"S":s=!0,be="N"}return be},b=function(k,L,R){var le=k.split("");return R&&T(le,R,{hiLevel:N}),le.reverse(),L&&L.reverse(),le.join("")},T=function(k,L,R){var le,ve,ge,ye,ce,be=-1,Me=k.length,Le=0,I=[],B=N?f:p,U=[];for(S=!1,i=!1,s=!1,ve=0;ve<Me;ve++)U[ve]=j(k[ve]);for(ge=0;ge<Me;ge++){if(ce=Le,I[ge]=W(k,U,I,ge),le=240&(Le=B[ce][v[I[ge]]]),Le&=15,L[ge]=ye=B[Le][5],le>0)if(le===16){for(ve=be;ve<ge;ve++)L[ve]=1;be=-1}else be=-1;if(B[Le][6])be===-1&&(be=ge);else if(be>-1){for(ve=be;ve<ge;ve++)L[ve]=ye;be=-1}U[ge]==="B"&&(L[ge]=0),R.hiLevel|=ye}s&&function(H,te,fe){for(var Ae=0;Ae<fe;Ae++)if(H[Ae]==="S"){te[Ae]=N;for(var Te=Ae-1;Te>=0&&H[Te]==="WS";Te--)te[Te]=N}}(U,L,Me)},A=function(k,L,R,le,ve){if(!(ve.hiLevel<k)){if(k===1&&N===1&&!i)return L.reverse(),void(R&&R.reverse());for(var ge,ye,ce,be,Me=L.length,Le=0;Le<Me;){if(le[Le]>=k){for(ce=Le+1;ce<Me&&le[ce]>=k;)ce++;for(be=Le,ye=ce-1;be<ye;be++,ye--)ge=L[be],L[be]=L[ye],L[ye]=ge,R&&(ge=R[be],R[be]=R[ye],R[ye]=ge);Le=ce}Le++}}},F=function(k,L,R){var le=k.split(""),ve={hiLevel:N};return R||(R=[]),T(le,R,ve),function(ge,ye,ce){if(ce.hiLevel!==0&&h)for(var be,Me=0;Me<ge.length;Me++)ye[Me]===1&&(be=_.indexOf(ge[Me]))>=0&&(ge[Me]=_[be+1])}(le,R,ve),A(2,le,L,R,ve),A(1,le,L,R,ve),le.join("")};return this.__bidiEngine__.doBidiReorder=function(k,L,R){if(function(ve,ge){if(ge)for(var ye=0;ye<ve.length;ye++)ge[ye]=ye;o===void 0&&(o=z(ve)),c===void 0&&(c=z(ve))}(k,L),a||!l||c)if(a&&l&&o^c)N=o?1:0,k=b(k,L,R);else if(!a&&l&&c)N=o?1:0,k=F(k,L,R),k=b(k,L);else if(!a||o||l||c){if(a&&!l&&o^c)k=b(k,L),o?(N=0,k=F(k,L,R)):(N=1,k=F(k,L,R),k=b(k,L));else if(a&&o&&!l&&c)N=1,k=F(k,L,R),k=b(k,L);else if(!a&&!l&&o^c){var le=h;o?(N=1,k=F(k,L,R),N=0,h=!1,k=F(k,L,R),h=le):(N=0,k=F(k,L,R),k=b(k,L),N=1,h=!1,k=F(k,L,R),h=le,k=b(k,L))}}else N=0,k=F(k,L,R);else N=o?1:0,k=F(k,L,R);return k},this.__bidiEngine__.setOptions=function(k){k&&(a=k.isInputVisual,l=k.isOutputVisual,o=k.isInputRtl,c=k.isOutputRtl,h=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([r.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([r.doBidiReorder(i[o])]);n.text=a}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(ur),ur.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new vu(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new CY(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new mY(this.contents),this.head=new xY(this),this.name=new bY(this),this.cmap=new A8(this),this.toUnicode={},this.hhea=new yY(this),this.maxp=new SY(this),this.hmtx=new EY(this),this.post=new wY(this),this.os2=new vY(this),this.loca=new kY(this),this.glyf=new AY(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Mo,vu=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,s,a,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*s+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,s;for(s=[],n=0,i=e.length;n<i;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),mY=function(){var t;function e(r){var n,i,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,s,a,o,l,c,h,d,p,f,v,x;for(x in f=Object.keys(r).length,l=Math.log(2),d=16*Math.floor(Math.log(f)/l),a=Math.floor(d/l),h=16*f-d,(i=new vu).writeInt(this.scalarType),i.writeShort(f),i.writeShort(d),i.writeShort(a),i.writeShort(h),s=16*f,c=i.pos+s,o=null,v=[],r)for(p=r[x],i.writeString(x),i.writeInt(t(p)),i.writeInt(c),i.writeInt(p.length),v=v.concat(p),x==="head"&&(o=c),c+=p.length;c%4;)v.push(0),c++;return i.write(v),n=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(n),i.data},t=function(r){var n,i,s,a;for(r=N8.call(r);r.length%4;)r.push(0);for(s=new vu(r),i=0,n=0,a=r.length;n<a;n=n+=4)i+=s.readUInt32();return 4294967295&i},e}(),gY={}.hasOwnProperty,pl=function(t,e){for(var r in e)gY.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Mo=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var xY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pl(t,Mo),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new vu).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),XN=function(){function t(e,r){var n,i,s,a,o,l,c,h,d,p,f,v,x,_,w,S,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),p=f/2,e.pos+=6,s=function(){var j,z;for(z=[],l=j=0;0<=p?j<p:j>p;l=0<=p?++j:--j)z.push(e.readUInt16());return z}(),e.pos+=2,x=function(){var j,z;for(z=[],l=j=0;0<=p?j<p:j>p;l=0<=p?++j:--j)z.push(e.readUInt16());return z}(),c=function(){var j,z;for(z=[],l=j=0;0<=p?j<p:j>p;l=0<=p?++j:--j)z.push(e.readUInt16());return z}(),h=function(){var j,z;for(z=[],l=j=0;0<=p?j<p:j>p;l=0<=p?++j:--j)z.push(e.readUInt16());return z}(),i=(this.length-e.pos+this.offset)/2,o=function(){var j,z;for(z=[],l=j=0;0<=i?j<i:j>i;l=0<=i?++j:--j)z.push(e.readUInt16());return z}(),l=w=0,N=s.length;w<N;l=++w)for(_=s[l],n=S=v=x[l];v<=_?S<=_:S>=_;n=v<=_?++S:--S)h[l]===0?a=n+c[l]:(a=o[h[l]/2+(n-v)-(p-l)]||0)!==0&&(a+=c[l]),this.codeMap[n]=65535&a}e.pos=d}return t.encode=function(e,r){var n,i,s,a,o,l,c,h,d,p,f,v,x,_,w,S,N,j,z,W,b,T,A,F,k,L,R,le,ve,ge,ye,ce,be,Me,Le,I,B,U,H,te,fe,Ae,Te,Pe,et,Qe;switch(le=new vu,a=Object.keys(e).sort(function(dt,wt){return dt-wt}),r){case"macroman":for(x=0,_=function(){var dt=[];for(v=0;v<256;++v)dt.push(0);return dt}(),S={0:0},s={},ve=0,be=a.length;ve<be;ve++)S[Te=e[i=a[ve]]]==null&&(S[Te]=++x),s[i]={old:e[i],new:S[e[i]]},_[i]=S[e[i]];return le.writeUInt16(1),le.writeUInt16(0),le.writeUInt32(12),le.writeUInt16(0),le.writeUInt16(262),le.writeUInt16(0),le.write(_),{charMap:s,subtable:le.data,maxGlyphID:x+1};case"unicode":for(L=[],d=[],N=0,S={},n={},w=c=null,ge=0,Me=a.length;ge<Me;ge++)S[z=e[i=a[ge]]]==null&&(S[z]=++N),n[i]={old:z,new:S[z]},o=S[z]-i,w!=null&&o===c||(w&&d.push(w),L.push(i),c=o),w=i;for(w&&d.push(w),d.push(65535),L.push(65535),F=2*(A=L.length),T=2*Math.pow(Math.log(A)/Math.LN2,2),p=Math.log(T/2)/Math.LN2,b=2*A-T,l=[],W=[],f=[],v=ye=0,Le=L.length;ye<Le;v=++ye){if(k=L[v],h=d[v],k===65535){l.push(0),W.push(0);break}if(k-(R=n[k].new)>=32768)for(l.push(0),W.push(2*(f.length+A-v)),i=ce=k;k<=h?ce<=h:ce>=h;i=k<=h?++ce:--ce)f.push(n[i].new);else l.push(R-k),W.push(0)}for(le.writeUInt16(3),le.writeUInt16(1),le.writeUInt32(12),le.writeUInt16(4),le.writeUInt16(16+8*A+2*f.length),le.writeUInt16(0),le.writeUInt16(F),le.writeUInt16(T),le.writeUInt16(p),le.writeUInt16(b),fe=0,I=d.length;fe<I;fe++)i=d[fe],le.writeUInt16(i);for(le.writeUInt16(0),Ae=0,B=L.length;Ae<B;Ae++)i=L[Ae],le.writeUInt16(i);for(Pe=0,U=l.length;Pe<U;Pe++)o=l[Pe],le.writeUInt16(o);for(et=0,H=W.length;et<H;et++)j=W[et],le.writeUInt16(j);for(Qe=0,te=f.length;Qe<te;Qe++)x=f[Qe],le.writeUInt16(x);return{charMap:n,subtable:le.data,maxGlyphID:N+1}}},t}(),A8=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pl(t,Mo),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new XN(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,i;return r==null&&(r="macroman"),n=XN.encode(e,r),(i=new vu).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),yY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pl(t,Mo),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),vY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pl(t,Mo),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),wY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pl(t,Mo),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)r=e.readByte(),i.push(this.names.push(e.readString(r)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var a,o,l;for(l=[],s=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;s=0<=o?++a:--a)l.push(e.readUInt32());return l}).call(this)}},t}(),_Y=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},bY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pl(t,Mo),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,i,s,a,o,l,c,h,d,p;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},s=h=0,d=n.length;h<d;s=++h)i=n[s],e.pos=i.offset,c=e.readString(i.length),a=new _Y(c,i),l[p=i.nameID]==null&&(l[p]=[]),l[i.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),SY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pl(t,Mo),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),EY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pl(t,Mo),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,i,s,a,o,l;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,h;for(h=[],r=c=0;0<=i?c<i:c>i;r=0<=i?++c:--c)h.push(e.readInt16());return h}(),this.widths=(function(){var c,h,d,p;for(p=[],c=0,h=(d=this.metrics).length;c<h;c++)s=d[c],p.push(s.advance);return p}).call(this),n=this.widths[this.widths.length-1],l=[],r=a=0;0<=i?a<i:a>i;r=0<=i?++a:--a)l.push(this.widths.push(n));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),N8=[].slice,AY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pl(t,Mo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,i,s,a,o,l,c,h,d;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,a=(o=new vu(r.read(i))).readShort(),c=o.readShort(),d=o.readShort(),l=o.readShort(),h=o.readShort(),this.cache[e]=a===-1?new TY(o,c,d,l,h):new NY(o,a,c,d,l,h),this.cache[e]))},t.prototype.encode=function(e,r,n){var i,s,a,o,l;for(a=[],s=[],o=0,l=r.length;o<l;o++)i=e[r[o]],s.push(a.length),i&&(a=a.concat(i.encode(n)));return s.push(a.length),{table:a,offsets:s}},t}(),NY=function(){function t(e,r,n,i,s,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),TY=function(){function t(e,r,n,i,s){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new vu(N8.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),kY=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pl(t,Mo),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,a=0;a<n.length;++a)if(n[a]=i,s<r.length&&r[s]==a){++s,n[a]=i;var o=this.offsets[a],l=this.offsets[a+1]-o;l>0&&(i+=l)}for(var c=new Array(4*n.length),h=0;h<n.length;++h)c[4*h+3]=255&n[h],c[4*h+2]=(65280&n[h])>>8,c[4*h+1]=(16711680&n[h])>>16,c[4*h]=(4278190080&n[h])>>24;return c},t}(),CY=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,s;for(r in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,s,a,o,l;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in r=[],i)(n=i[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in l=this.glyphsFor(r))n=l[s],i[s]=n;return i},t.prototype.encode=function(e,r){var n,i,s,a,o,l,c,h,d,p,f,v,x,_,w;for(i in n=A8.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),f={0:0},w=n.charMap)f[(l=w[i]).old]=l.new;for(v in p=n.maxGlyphID,a)v in f||(f[v]=p++);return h=function(S){var N,j;for(N in j={},S)j[S[N]]=N;return j}(f),d=Object.keys(h).sort(function(S,N){return S-N}),x=function(){var S,N,j;for(j=[],S=0,N=d.length;S<N;S++)o=d[S],j.push(h[o]);return j}(),s=this.font.glyf.encode(a,x,f),c=this.font.loca.encode(s.offsets,x),_={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},t}();ur.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,s,a;if(Array.isArray(r))return"["+function(){var o,l,c;for(c=[],o=0,l=r.length;o<l;o++)n=r[o],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in s=["<<"],r)a=r[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+r},e}();function T8(t,e,r,n,i){n=n||{};var s=1.15,a=i.internal.scaleFactor,o=i.internal.getFontSize()/a,l=i.getLineHeightFactor?i.getLineHeightFactor():s,c=o*l,h=/\r\n|\r|\n/g,d="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(d=typeof t=="string"?t.split(h):t,p=d.length||1),r+=o*(2-s),n.valign==="middle"?r-=p/2*c:n.valign==="bottom"&&(r-=p*c),n.halign==="center"||n.halign==="right"){var f=o;if(n.halign==="center"&&(f*=.5),d&&p>=1){for(var v=0;v<d.length;v++)i.text(d[v],e-i.getStringUnitWidth(d[v])*f,r),r+=c;return i}e-=i.getStringUnitWidth(t)*f}return n.halign==="justify"?i.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(t,e,r),i}var QN={},zd=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:QN=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,i,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,l=a.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var h=t.unifyColor(e.fillColor);h&&(n=this.jsPDFDocument).setFillColor.apply(n,h),h=t.unifyColor(e.textColor),h&&(i=this.jsPDFDocument).setTextColor.apply(i,h),h=t.unifyColor(e.lineColor),h&&(s=this.jsPDFDocument).setDrawColor.apply(s,h),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,i,s){return this.jsPDFDocument.rect(e,r,n,i,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return QN||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),I5=function(t,e){return I5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},I5(t,e)};function k8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");I5(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var C8=function(t){k8(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function IY(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function PY(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function bx(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],i=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,a){return Math.max(s,a)},0);return i}function I8(t,e,r,n){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:s});var a=P8(i,!1);a&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,a)}function P8(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function D2(t,e){var r,n,i,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function R8(t,e){var r=D2(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function RY(t,e,r,n,i){var s={},a=1.3333333333333333,o=Cv(e,function(N){return i.getComputedStyle(N).backgroundColor});o!=null&&(s.fillColor=o);var l=Cv(e,function(N){return i.getComputedStyle(N).color});l!=null&&(s.textColor=l);var c=jY(n,r);c&&(s.cellPadding=c);var h="borderTopColor",d=a*r,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var f=(parseFloat(p)||0)/d;f&&(s.lineWidth=f)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/d,right:(parseFloat(n.borderRightWidth)||0)/d,bottom:(parseFloat(n.borderBottomWidth)||0)/d,left:(parseFloat(n.borderLeftWidth)||0)/d},s.lineWidth.top||(s.lineWidth.right?h="borderRightColor":s.lineWidth.bottom?h="borderBottomColor":s.lineWidth.left&&(h="borderLeftColor"));var v=Cv(e,function(N){return i.getComputedStyle(N)[h]});v!=null&&(s.lineColor=v);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var _=parseInt(n.fontSize||"");isNaN(_)||(s.fontSize=_/a);var w=LY(n);w&&(s.fontStyle=w);var S=(n.fontFamily||"").toLowerCase();return t.indexOf(S)!==-1&&(s.font=S),s}function LY(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function Cv(t,e){var r=L8(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function L8(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:L8(t.parentElement,e):r}function jY(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(o){return parseInt(o||"0")/n}),a=D2(s,0);return i>a.top&&(a.top=i),i>a.bottom&&(a.bottom=i),a}function j8(t,e,r,n,i){var s,a;n===void 0&&(n=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),c=t.scaleFactor(),h=[],d=[],p=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:h,body:d,foot:p};for(var f=0;f<o.rows.length;f++){var v=o.rows[f],x=(a=(s=v==null?void 0:v.parentElement)===null||s===void 0?void 0:s.tagName)===null||a===void 0?void 0:a.toLowerCase(),_=FY(l,c,r,v,n,i);_&&(x==="thead"?h.push(_):x==="tfoot"?p.push(_):d.push(_))}return{head:h,body:d,foot:p}}function FY(t,e,r,n,i,s){for(var a=new C8(n),o=0;o<n.cells.length;o++){var l=n.cells[o],c=r.getComputedStyle(l);if(i||c.display!=="none"){var h=void 0;s&&(h=RY(t,l,e,c,r)),a.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:h,_element:l,content:DY(l)})}}var d=r.getComputedStyle(n);if(a.length>0&&(i||d.display!=="none"))return a}function DY(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function MY(t,e,r){for(var n=0,i=[t,e,r];n<i.length;n++){var s=i[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Fl(t,e,r,n,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function F8(t,e){var r=new zd(t),n=r.getDocumentOptions(),i=r.getGlobalOptions();MY(i,n,e);var s=Fl({},i,n,e),a;typeof window<"u"&&(a=window);var o=OY(i,n,e),l=BY(i,n,e),c=UY(r,s),h=zY(r,s,a);return{id:e.tableId,content:h,hooks:l,styles:o,settings:c}}function OY(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var c=t[l],h=e[l],d=r[l];n.columnStyles=Fl({},c,h,d)}else{var p=[t,e,r],f=p.map(function(v){return v[l]||{}});n[l]=Fl({},f[0],f[1],f[2])}},s=0,a=Object.keys(n);s<a.length;s++){var o=a[s];i(o)}return n}function BY(t,e,r){for(var n=[t,e,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,a=n;s<a.length;s++){var o=a[s];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function UY(t,e){var r,n,i,s,a,o,l,c,h,d,p,f,v=D2(e.margin,40/t.scaleFactor()),x=(r=VY(t,e.startY))!==null&&r!==void 0?r:v.top,_;e.showFoot===!0?_="everyPage":e.showFoot===!1?_="never":_=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var w;e.showHead===!0?w="everyPage":e.showHead===!1?w="never":w=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var S=(s=e.useCss)!==null&&s!==void 0?s:!1,N=e.theme||(S?"plain":"striped"),j=!!e.horizontalPageBreak,z=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:S,theme:N,startY:x,margin:v,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(h=e.tableWidth)!==null&&h!==void 0?h:"auto",showHead:w,showFoot:_,tableLineWidth:(d=e.tableLineWidth)!==null&&d!==void 0?d:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:j,horizontalPageBreakRepeat:z,horizontalPageBreakBehaviour:(f=e.horizontalPageBreakBehaviour)!==null&&f!==void 0?f:"afterAllRows"}}function VY(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),i=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var a=r.startPageNumber+r.pageNumber-1;s=a===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function zY(t,e,r){var n=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(r){var o=j8(t,e.html,r,a,e.useCss)||{};n=o.head||n,i=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||HY(n,i,s);return{columns:l,head:n,body:i,foot:s}}function HY(t,e,r){var n=t[0]||e[0]||r[0]||[],i=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var a=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(a=(o==null?void 0:o.colSpan)||1);for(var l=0;l<a;l++){var c=void 0;Array.isArray(n)?c=i.length:c=s+(l>0?"_".concat(l):"");var h={dataKey:c};i.push(h)}}),i}var P5=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),$Y=function(t){k8(e,t);function e(r,n,i,s,a,o){var l=t.call(this,r,n,o)||this;return l.cell=i,l.row=s,l.column=a,l.section=s.section,l}return e}(P5),qY=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,i,s,a){for(var o=0,l=r;o<l.length;o++){var c=l[o],h=new $Y(e,this,n,i,s,a),d=c(h)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],d)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var s=i[n];s(new P5(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var s=i[n];s(new P5(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),D8=function(){function t(e,r,n,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof C8&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=i,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,i){var s;return Math.max(n,((s=r.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var i=r.cells[n.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(i,s){var a=n.cells[s.index];if(!a)return 0;var o=r.getLineHeight(a.styles.fontSize),l=a.padding("vertical"),c=l+o;return c>i?c:i},0)},t}(),M8=function(){function t(e,r,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*r,s=n*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=D2(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),WY=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,i=e.allRows();n<i.length;n++){var s=i[n],a=s.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(r=Math.max(r,a.styles.cellWidth))}return r},t}();function KY(t,e){GY(t,e);var r=[],n=0;e.columns.forEach(function(s){var a=s.getMaxCustomCellWidth(e);a?s.width=a:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var i=e.getWidth(t.pageSize().width)-n;i&&(i=R5(r,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=R5(r,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.log("Of the table content, ".concat(i," units width could not fit page"))),XY(e),QY(e,t),YY(e)}function GY(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,i=R8(t,e);e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c){var h=e.hooks.didParseCell;e.callCellHooks(t,h,c,s,l,null);var d=c.padding("horizontal");c.contentWidth=bx(c.text,c.styles,t)+d;var p=bx(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,t);if(c.minReadableWidth=p+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||n===!0)c.contentWidth>i?(c.minWidth=i,c.wrappedWidth=i):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var f=10/r;c.minWidth=c.styles.minCellWidth||f,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var h=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},d=h.cellWidth||h.minCellWidth;d&&typeof d=="number"&&(l.minWidth=d,l.wrappedWidth=d)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function R5(t,e,r){for(var n=e,i=t.reduce(function(f,v){return f+v.wrappedWidth},0),s=0;s<t.length;s++){var a=t[s],o=a.wrappedWidth/i,l=n*o,c=a.width+l,h=r(a),d=c<h?h:c;e-=d-a.width,a.width=d}if(e=Math.round(e*1e10)/1e10,e){var p=t.filter(function(f){return e<0?f.width>r(f):!0});p.length&&(e=R5(p,e,r))}return e}function YY(t){for(var e={},r=1,n=t.allRows(),i=0;i<n.length;i++)for(var s=n[i],a=0,o=t.columns;a<o.length;a++){var l=o[a],c=e[l.index];if(r>1)r--,delete s.cells[l.index];else if(c)c.cell.height+=s.height,r=c.cell.colSpan,delete s.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var h=s.cells[l.index];if(!h)continue;if(h.height=s.height,h.rowSpan>1){var d=n.length-i,p=h.rowSpan>d?d:h.rowSpan;e[l.index]={cell:h,left:p,row:s}}}}}function XY(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],i=null,s=0,a=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(a-=1,a>1&&t.columns[o+1])s+=l.width,delete n.cells[l.index];else if(i){var c=i;delete n.cells[l.index],i=null,c.width=l.width+s}else{var c=n.cells[l.index];if(!c)continue;if(a=c.colSpan,s=0,c.colSpan>1){i=c,s+=l.width;continue}c.width=l.width+s}}}function QY(t,e){for(var r={count:0,height:0},n=0,i=t.allRows();n<i.length;n++){for(var s=i[n],a=0,o=t.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c){e.applyStyles(c.styles,!0);var h=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,h+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=JN(c.text,h,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=JN(c.text,h,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var d=c.styles.overflow(c.text,h);typeof d=="string"?c.text=[d]:c.text=d}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=c.contentHeight/c.rowSpan;c.rowSpan>1&&r.count*r.height<p*c.rowSpan?r={height:p,count:c.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>s.height&&(s.height=p)}}r.count--}}function JN(t,e,r,n,i){return t.map(function(s){return JY(s,e,r,n,i)})}function JY(t,e,r,n,i){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=bx(t,r,n))return t;for(;e<bx(t+i,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function O8(t,e){var r=new zd(t),n=ZY(e,r.scaleFactor()),i=new qY(e,n);return KY(r,i),r.applyStyles(r.userStyles),i}function ZY(t,e){var r=t.content,n=tX(r.columns);if(r.head.length===0){var i=ZN(n,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=ZN(n,"foot");i&&r.foot.push(i)}var s=t.settings.theme,a=t.styles;return{columns:n,head:Iv("head",r.head,n,a,s,e),body:Iv("body",r.body,n,a,s,e),foot:Iv("foot",r.foot,n,a,s,e)}}function Iv(t,e,r,n,i,s){var a={},o=e.map(function(l,c){for(var h=0,d={},p=0,f=0,v=0,x=r;v<x.length;v++){var _=x[v];if(a[_.index]==null||a[_.index].left===0)if(f===0){var w=void 0;Array.isArray(l)?w=l[_.index-p-h]:w=l[_.dataKey];var S={};typeof w=="object"&&!Array.isArray(w)&&(S=(w==null?void 0:w.styles)||{});var N=rX(t,_,c,i,n,s,S),j=new M8(w,N,t);d[_.dataKey]=j,d[_.index]=j,f=j.colSpan-1,a[_.index]={left:j.rowSpan-1,times:f}}else f--,p++;else a[_.index].left--,f=a[_.index].times,h++}return new D8(l,c,t,d)});return o}function ZN(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var i=eX(e,n.raw);i!=null&&(r[n.dataKey]=i)}}),Object.keys(r).length>0?r:null}function eX(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function tX(t){return t.map(function(e,r){var n,i;return typeof e=="object"?i=(n=e.dataKey)!==null&&n!==void 0?n:r:i=r,new WY(i,e,r)})}function rX(t,e,r,n,i,s,a){var o=PY(n),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var c=Fl({},o.table,o[t],i.styles,l),h=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},d=t==="body"?h:{},p=t==="body"&&r%2===0?Fl({},o.alternateRow,i.alternateRowStyles):{},f=IY(s),v=Fl({},f,c,p,d);return Fl(v,a)}function nX(t,e,r){var n;r===void 0&&(r={});var i=R8(t,e),s=new Map,a=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var f=e.columns.find(function(v){return v.dataKey===p||v.index===p});f&&!s.has(f.index)&&(s.set(f.index,!0),a.push(f.index),o.push(e.columns[f.index]),i-=f.wrappedWidth)});for(var c=!0,h=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;h<e.columns.length;){if(s.has(h)){h++;continue}var d=e.columns[h].wrappedWidth;if(c||i>=d)c=!1,a.push(h),o.push(e.columns[h]),i-=d;else break;h++}return{colIndexes:a,columns:o,lastIndex:h-1}}function iX(t,e){for(var r=[],n=0;n<e.columns.length;n++){var i=nX(t,e,{start:n});i.columns.length&&(r.push(i),n=i.lastIndex)}return r}function B8(t,e){var r=e.settings,n=r.startY,i=r.margin,s={x:i.left,y:n},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+i.bottom+a;if(r.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(p,f){return p+f.height},0);o+=c}var h=new zd(t);(r.pageBreak==="always"||r.startY!=null&&o>h.pageSize().height)&&(V8(h),s.y=i.top),e.callWillDrawPageHooks(h,s);var d=Fl({},s);e.startPageNumber=h.pageNumber(),r.horizontalPageBreak?sX(h,e,d,s):(h.applyStyles(h.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(p){return Xl(h,e,p,s,e.columns)}),h.applyStyles(h.userStyles),e.body.forEach(function(p,f){var v=f===e.body.length-1;Sx(h,e,p,v,d,s,e.columns)}),h.applyStyles(h.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(p){return Xl(h,e,p,s,e.columns)})),I8(h,e,d,s),e.callEndPageHooks(h,s),e.finalY=s.y,t.lastAutoTable=e,h.applyStyles(h.userStyles)}function sX(t,e,r,n){var i=iX(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(c,h){t.applyStyles(t.userStyles),h>0?K0(t,e,r,n,c.columns,!0):eT(t,e,n,c.columns),aX(t,e,r,n,c.columns),Pv(t,e,n,c.columns)});else for(var a=-1,o=i[0],l=function(){var c=a;if(o){t.applyStyles(t.userStyles);var h=o.columns;a>=0?K0(t,e,r,n,h,!0):eT(t,e,n,h),c=tT(t,e,a+1,n,h),Pv(t,e,n,h)}var d=c-a;i.slice(1).forEach(function(p){t.applyStyles(t.userStyles),K0(t,e,r,n,p.columns,!0),tT(t,e,a+1,n,p.columns,d),Pv(t,e,n,p.columns)}),a=c};a<e.body.length-1;)l()}function eT(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return Xl(t,e,s,r,n)})}function aX(t,e,r,n,i){t.applyStyles(t.userStyles),e.body.forEach(function(s,a){var o=a===e.body.length-1;Sx(t,e,s,o,r,n,i)})}function tT(t,e,r,n,i,s){t.applyStyles(t.userStyles),s=s??e.body.length;var a=Math.min(r+s,e.body.length),o=-1;return e.body.slice(r,a).forEach(function(l,c){var h=r+c===e.body.length-1,d=U8(t,e,h,n);l.canEntireRowFit(d,i)&&(Xl(t,e,l,n,i),o=r+c)}),o}function Pv(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return Xl(t,e,s,r,n)})}function oX(t,e,r){var n=r.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),s=Math.floor((e-i)/n);return Math.max(0,s)}function lX(t,e,r,n){var i={};t.spansMultiplePages=!0,t.height=0;for(var s=0,a=0,o=r.columns;a<o.length;a++){var l=o[a],c=t.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var h=new M8(c.raw,c.styles,c.section);h=Fl(h,c),h.text=[];var d=oX(c,e,n);c.text.length>d&&(h.text=c.text.splice(d,c.text.length));var p=n.scaleFactor(),f=n.getLineHeightFactor();c.contentHeight=c.getContentHeight(p,f),c.contentHeight>=e&&(c.contentHeight=e,h.styles.minCellHeight-=e),c.contentHeight>t.height&&(t.height=c.contentHeight),h.contentHeight=h.getContentHeight(p,f),h.contentHeight>s&&(s=h.contentHeight),i[l.index]=h}}var v=new D8(t.raw,-1,t.section,i,!0);v.height=s;for(var x=0,_=r.columns;x<_.length;x++){var l=_[x],h=v.cells[l.index];h&&(h.height=v.height);var c=t.cells[l.index];c&&(c.height=t.height)}return v}function cX(t,e,r,n){var i=t.pageSize().height,s=n.settings.margin,a=s.top+s.bottom,o=i-a;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),c=l<r;if(l>o)return console.log("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var h=e.hasRowSpan(n.columns),d=e.getMaxCellHeight(n.columns)>o;return d?(h&&console.log("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(h||n.settings.rowPageBreak==="avoid")}function Sx(t,e,r,n,i,s,a){var o=U8(t,e,n,s);if(r.canEntireRowFit(o,a))Xl(t,e,r,s,a);else if(cX(t,r,o,e)){var l=lX(r,o,e,t);Xl(t,e,r,s,a),K0(t,e,i,s,a),Sx(t,e,l,n,i,s,a)}else K0(t,e,i,s,a),Sx(t,e,r,n,i,s,a)}function Xl(t,e,r,n,i){n.x=e.settings.margin.left;for(var s=0,a=i;s<a.length;s++){var o=a[s],l=r.cells[o.index];if(!l){n.x+=o.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var c=e.callCellHooks(t,e.hooks.willDrawCell,l,r,o,n);if(c===!1){n.x+=o.width;continue}uX(t,l,n);var h=l.getTextPos();T8(l.text,h.x,h.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function uX(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=P8(n.lineWidth,n.fillColor);i&&t.rect(e.x,r.y,e.width,e.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),hX(t,e,r,n.lineWidth))}function hX(t,e,r,n){var i,s,a,o;n.top&&(i=r.x,s=r.y,a=r.x+e.width,o=r.y,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),l(n.top,i,s,a,o)),n.bottom&&(i=r.x,s=r.y+e.height,a=r.x+e.width,o=r.y+e.height,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),l(n.bottom,i,s,a,o)),n.left&&(i=r.x,s=r.y,a=r.x,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,i,s,a,o)),n.right&&(i=r.x+e.width,s=r.y,a=r.x+e.width,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,i,s,a,o));function l(c,h,d,p,f){t.getDocument().setLineWidth(c),t.getDocument().line(h,d,p,f,"S")}}function U8(t,e,r,n){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-i}function K0(t,e,r,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(o){return Xl(t,e,o,n,i)}),e.callEndPageHooks(t,n);var a=e.settings.margin;I8(t,e,r,n),V8(t),e.pageNumber++,n.x=a.left,n.y=a.top,r.y=a.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return Xl(t,e,o,n,i)}),t.applyStyles(t.userStyles))}function V8(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function dX(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],i=F8(this,n),s=O8(this,i);return B8(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,i){T8(e,r,n,i,this)},t.API.autoTableSetDefaults=function(e){return zd.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){zd.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new zd(this),s=j8(i,e,window,r,!1),a=s.head,o=s.body,l=((n=a[0])===null||n===void 0?void 0:n.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var Rv;function h0(t,e){var r=F8(t,e),n=O8(t,r);B8(t,n)}try{if(typeof window<"u"&&window){var rT=window,nT=rT.jsPDF||((Rv=rT.jspdf)===null||Rv===void 0?void 0:Rv.jsPDF);nT&&dX(nT)}}catch(t){console.error("Could not apply autoTable plugin",t)}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Ex={};Ex.version="0.18.5";var z8=1252,fX=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],H8=function(t){fX.indexOf(t)!=-1&&(z8=t)};function pX(){H8(1252)}var Mp=function(t){H8(t)};function mX(){Mp(1200),pX()}var Tg=function(e){return String.fromCharCode(e)},iT=function(e){return String.fromCharCode(e)},Ax,Wc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Op(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),s=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,i=t.charCodeAt(c++),o=(n&15)<<2|i>>6,l=i&63,isNaN(n)?o=l=64:isNaN(i)&&(l=64),e+=Wc.charAt(s)+Wc.charAt(a)+Wc.charAt(o)+Wc.charAt(l);return e}function Ql(t){var e="",r=0,n=0,i=0,s=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)s=Wc.indexOf(t.charAt(c++)),a=Wc.indexOf(t.charAt(c++)),r=s<<2|a>>4,e+=String.fromCharCode(r),o=Wc.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Wc.indexOf(t.charAt(c++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var hn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),rc=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function wh(t){return hn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function sT(t){return hn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Ao=function(e){return hn?rc(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function M2(t){if(typeof ArrayBuffer>"u")return Ao(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function ym(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function gX(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var os=hn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:rc(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),i=0;for(e=0,r=0;e<t.length;r+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function xX(t){for(var e=[],r=0,n=t.length+250,i=wh(t.length+255),s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a<128)i[r++]=a;else if(a<2048)i[r++]=192|a>>6&31,i[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++s)&1023;i[r++]=240|a>>8&7,i[r++]=128|a>>2&63,i[r++]=128|o>>6&15|(a&3)<<4,i[r++]=128|o&63}else i[r++]=224|a>>12&15,i[r++]=128|a>>6&63,i[r++]=128|a&63;r>n&&(e.push(i.slice(0,r)),r=0,i=wh(65535),n=65530)}return e.push(i.slice(0,r)),os(e)}var G0=/\u0000/g,kg=/[\u0001-\u0006]/g;function Hd(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function ko(t,e){var r=""+t;return r.length>=e?r:hi("0",e-r.length)+r}function Jb(t,e){var r=""+t;return r.length>=e?r:hi(" ",e-r.length)+r}function Nx(t,e){var r=""+t;return r.length>=e?r:r+hi(" ",e-r.length)}function yX(t,e){var r=""+Math.round(t);return r.length>=e?r:hi("0",e-r.length)+r}function vX(t,e){var r=""+t;return r.length>=e?r:hi("0",e-r.length)+r}var aT=Math.pow(2,32);function $h(t,e){if(t>aT||t<-aT)return yX(t,e);var r=Math.round(t);return vX(r,e)}function Tx(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var oT=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Lv=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function wX(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var di={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},lT={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},_X={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function kx(t,e,r){for(var n=t<0?-1:1,i=t*n,s=0,a=1,o=0,l=1,c=0,h=0,d=Math.floor(i);c<e&&(d=Math.floor(i),o=d*a+s,h=d*c+l,!(i-d<5e-8));)i=1/(i-d),s=a,a=o,l=c,c=h;if(h>e&&(c>e?(h=l,o=s):(h=c,o=a)),!r)return[0,n*o,h];var p=Math.floor(n*o/h);return[p,n*o-p*h,h]}function Cg(t,e,r){if(t>2958465||t<0)return null;var n=t|0,i=Math.floor(86400*(t-n)),s=0,a=[],o={D:n,T:i,u:86400*(t-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=kX(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var $8=new Date(1899,11,31,0,0,0),bX=$8.getTime(),SX=new Date(1900,2,1,0,0,0);function q8(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=SX&&(r+=24*60*60*1e3),(r-(bX+(t.getTimezoneOffset()-$8.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Zb(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function EX(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function AX(t){var e=t<0?12:11,r=Zb(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function NX(t){var e=Zb(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function TX(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=AX(t):e===10?r=t.toFixed(10).substr(0,12):r=NX(t),Zb(EX(r.toUpperCase()))}function L5(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):TX(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return wu(14,q8(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function kX(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function CX(t,e,r,n){var i="",s=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return Lv[r.m-1][1];case 5:return Lv[r.m-1][0];default:return Lv[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return oT[r.q][0];default:return oT[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?ko(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,s=Math.round(a*(r.S+r.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=ko(s,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var h=c>0?ko(l,c):"";return h}function Kc(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var W8=/%/g;function IX(t,e,r){var n=e.replace(W8,""),i=e.length-n.length;return Ol(t,n,r*Math.pow(10,2*i))+hi("%",i)}function PX(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Ol(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function K8(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+K8(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,h){return l+c+h.substr(0,(i+s)%i)+"."+h.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var G8=/# (\?+)( ?)\/( ?)(\d+)/;function RX(t,e,r){var n=parseInt(t[4],10),i=Math.round(e*n),s=Math.floor(i/n),a=i-s*n,o=n;return r+(s===0?"":""+s)+" "+(a===0?hi(" ",t[1].length+1+t[4].length):Jb(a,t[1].length)+t[2]+"/"+t[3]+ko(o,t[4].length))}function LX(t,e,r){return r+(e===0?"":""+e)+hi(" ",t[1].length+2+t[4].length)}var Y8=/^#*0*\.([0#]+)/,X8=/\).*[0#]/,Q8=/\(###\) ###\\?-####/;function Vs(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function cT(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function uT(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function jX(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function FX(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Ya(t,e,r){if(t.charCodeAt(0)===40&&!e.match(X8)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ya("n",n,r):"("+Ya("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return PX(t,e,r);if(e.indexOf("%")!==-1)return IX(t,e,r);if(e.indexOf("E")!==-1)return K8(e,r);if(e.charCodeAt(0)===36)return"$"+Ya(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+$h(l,e.length);if(e.match(/^[#?]+$/))return i=$h(r,0),i==="0"&&(i=""),i.length>e.length?i:Vs(e.substr(0,e.length-i.length))+i;if(s=e.match(G8))return RX(s,l,c);if(e.match(/^#+0+$/))return c+$h(l,e.length-e.indexOf("0"));if(s=e.match(Y8))return i=cT(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Vs(s[1])).replace(/\.$/,"."+Vs(s[1])).replace(/\.(\d*)$/,function(v,x){return"."+x+hi("0",Vs(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+cT(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+Kc($h(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ya(t,e,-r):Kc(""+(Math.floor(r)+jX(r,s[1].length)))+"."+ko(uT(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Ya(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Hd(Ya(t,e.replace(/[\\-]/g,""),r)),a=0,Hd(Hd(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<i.length?i.charAt(a++):v==="0"?"0":""}));if(e.match(Q8))return i=Ya(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=kx(l,Math.pow(10,a)-1,!1),i=""+c,h=Ol("n",s[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+s[2]+"/"+s[3],h=Nx(o[2],a),h.length<s[4].length&&(h=Vs(s[4].substr(s[4].length-h.length))+h),i+=h,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=kx(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Jb(o[1],a)+s[2]+"/"+s[3]+Nx(o[2],a):hi(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=$h(r,0),e.length<=i.length?i:Vs(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,p=e.length-i.length-d;return Vs(e.substr(0,d)+i+e.substr(e.length-p))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=uT(r,s[1].length),r<0?"-"+Ya(t,e,-r):Kc(FX(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?ko(0,3-v.length):"")+v})+"."+ko(a,s[1].length);switch(e){case"###,##0.00":return Ya(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var f=Kc($h(l,0));return f!=="0"?c+f:"";case"###,###.00":return Ya(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Ya(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function DX(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Ol(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function MX(t,e,r){var n=e.replace(W8,""),i=e.length-n.length;return Ol(t,n,r*Math.pow(10,2*i))+hi("%",i)}function J8(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+J8(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,h){return l+c+h.substr(0,(i+s)%i)+"."+h.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function qo(t,e,r){if(t.charCodeAt(0)===40&&!e.match(X8)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?qo("n",n,r):"("+qo("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return DX(t,e,r);if(e.indexOf("%")!==-1)return MX(t,e,r);if(e.indexOf("E")!==-1)return J8(e,r);if(e.charCodeAt(0)===36)return"$"+qo(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+ko(l,e.length);if(e.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>e.length?i:Vs(e.substr(0,e.length-i.length))+i;if(s=e.match(G8))return LX(s,l,c);if(e.match(/^#+0+$/))return c+ko(l,e.length-e.indexOf("0"));if(s=e.match(Y8))return i=(""+r).replace(/^([^\.]+)$/,"$1."+Vs(s[1])).replace(/\.$/,"."+Vs(s[1])),i=i.replace(/\.(\d*)$/,function(v,x){return"."+x+hi("0",Vs(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+Kc(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+qo(t,e,-r):Kc(""+r)+"."+hi("0",s[1].length);if(s=e.match(/^#,#*,#0/))return qo(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Hd(qo(t,e.replace(/[\\-]/g,""),r)),a=0,Hd(Hd(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<i.length?i.charAt(a++):v==="0"?"0":""}));if(e.match(Q8))return i=qo(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=kx(l,Math.pow(10,a)-1,!1),i=""+c,h=Ol("n",s[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+s[2]+"/"+s[3],h=Nx(o[2],a),h.length<s[4].length&&(h=Vs(s[4].substr(s[4].length-h.length))+h),i+=h,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=kx(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Jb(o[1],a)+s[2]+"/"+s[3]+Nx(o[2],a):hi(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+r,e.length<=i.length?i:Vs(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,p=e.length-i.length-d;return Vs(e.substr(0,d)+i+e.substr(e.length-p))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+qo(t,e,-r):Kc(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?ko(0,3-v.length):"")+v})+"."+ko(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var f=Kc(""+l);return f!=="0"?c+f:"";default:if(e.match(/\.[0#?]*$/))return qo(t,e.slice(0,e.lastIndexOf(".")),r)+Vs(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Ol(t,e,r){return(r|0)===r?qo(t,e,r):Ya(t,e,r)}function OX(t){for(var e=[],r=!1,n=0,i=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(i,n-i),i=n+1}if(e[e.length]=t.substr(i),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Z8=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function eL(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":Tx(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(Z8))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function BX(t,e,r,n){for(var i=[],s="",a=0,o="",l="t",c,h,d,p="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!Tx(t,a))throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(d=t.charCodeAt(++a))!==34&&a<t.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++a;break;case"\\":var f=t.charAt(++a),v=f==="("||f===")"?f:"t";i[i.length]={t:v,v:f},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=Cg(e,r,t.charAt(a+1)==="2"),c==null))return"";i[i.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=Cg(e,r),c==null))return"";for(s=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var x={t:o,v:o};if(c==null&&(c=Cg(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(x.v=c.H>=12?"P":"A"),x.t="T",p="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(x.v=c.H>=12?"PM":"AM"),x.t="T",a+=5,p="h"):t.substr(a,5).toUpperCase()==="/"?(c!=null&&(x.v=c.H>=12?"":""),x.t="T",a+=5,p="h"):(x.t="t",++a),c==null&&x.t==="T")return"";i[i.length]=x,l=o;break;case"[":for(s=o;t.charAt(a++)!=="]"&&a<t.length;)s+=t.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Z8)){if(c==null&&(c=Cg(e,r),c==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",eL(t)||(i[i.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=o;++a<t.length&&(o=t.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;t.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)s+=t.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"t",v:o},++a;break}var _=0,w=0,S;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=p,l="h",_<1&&(_=1);break;case"s":(S=i[a].v.match(/\.0+$/))&&(w=Math.max(w,S[0].length-1)),_<3&&(_=3);case"d":case"y":case"M":case"e":l=i[a].t;break;case"m":l==="s"&&(i[a].t="M",_<2&&(_=2));break;case"X":break;case"Z":_<1&&i[a].v.match(/[Hh]/)&&(_=1),_<2&&i[a].v.match(/[Mm]/)&&(_=2),_<3&&i[a].v.match(/[Ss]/)&&(_=3)}switch(_){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var N="",j;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=CX(i[a].t.charCodeAt(0),i[a].v,c,w),i[a].t="t";break;case"n":case"?":for(j=a+1;i[j]!=null&&((o=i[j].t)==="?"||o==="D"||(o===" "||o==="t")&&i[j+1]!=null&&(i[j+1].t==="?"||i[j+1].t==="t"&&i[j+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[j].v==="/"||i[j].v===" "&&i[j+1]!=null&&i[j+1].t=="?"));)i[a].v+=i[j].v,i[j]={v:"",t:";"},++j;N+=i[a].v,a=j-1;break;case"G":i[a].t="t",i[a].v=L5(e,r);break}var z="",W,b;if(N.length>0){N.charCodeAt(0)==40?(W=e<0&&N.charCodeAt(0)===45?-e:e,b=Ol("n",N,W)):(W=e<0&&n>1?-e:e,b=Ol("n",N,W),W<0&&i[0]&&i[0].t=="t"&&(b=b.substr(1),i[0].v="-"+i[0].v)),j=b.length-1;var T=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){T=a;break}var A=i.length;if(T===i.length&&b.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(j>=i[a].v.length-1?(j-=i[a].v.length,i[a].v=b.substr(j+1,i[a].v.length)):j<0?i[a].v="":(i[a].v=b.substr(0,j+1),j=-1),i[a].t="t",A=a);j>=0&&A<i.length&&(i[A].v=b.substr(0,j+1)+i[A].v)}else if(T!==i.length&&b.indexOf("E")===-1){for(j=b.indexOf(".")-1,a=T;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(h=i[a].v.indexOf(".")>-1&&a===T?i[a].v.indexOf(".")-1:i[a].v.length-1,z=i[a].v.substr(h+1);h>=0;--h)j>=0&&(i[a].v.charAt(h)==="0"||i[a].v.charAt(h)==="#")&&(z=b.charAt(j--)+z);i[a].v=z,i[a].t="t",A=a}for(j>=0&&A<i.length&&(i[A].v=b.substr(0,j+1)+i[A].v),j=b.indexOf(".")+1,a=T;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==T)){for(h=i[a].v.indexOf(".")>-1&&a===T?i[a].v.indexOf(".")+1:0,z=i[a].v.substr(0,h);h<i[a].v.length;++h)j<b.length&&(z+=b.charAt(j++));i[a].v=z,i[a].t="t",A=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(W=n>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Ol(i[a].t,i[a].v,W),i[a].t="t");var F="";for(a=0;a!==i.length;++a)i[a]!=null&&(F+=i[a].v);return F}var hT=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function dT(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function UX(t,e){var r=OX(t),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(hT),o=r[1].match(hT);return dT(e,a)?[n,r[0]]:dT(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,s]}function wu(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:di)[t],n==null&&(n=r.table&&r.table[lT[t]]||di[lT[t]]),n==null&&(n=_X[t]||"General");break}if(Tx(n,0))return L5(e,r);e instanceof Date&&(e=q8(e,r.date1904));var i=UX(n,e);if(Tx(i[1]))return L5(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return BX(i[1],e,r,i[0])}function tL(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(di[r]==null){e<0&&(e=r);continue}if(di[r]==t){e=r;break}}e<0&&(e=391)}return di[e]=t,e}function O2(t){for(var e=0;e!=392;++e)t[e]!==void 0&&tL(t[e],e)}function B2(){di=wX()}var rL=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function VX(t){var e=typeof t=="number"?di[t]:t;return e=e.replace(rL,"(\\d+)"),new RegExp("^"+e+"$")}function zX(t,e,r){var n=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(e.match(rL)||[]).forEach(function(d,p){var f=parseInt(r[p+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=f;break;case"d":s=f;break;case"h":a=f;break;case"s":l=f;break;case"m":a>=0?o=f:i=f;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var h=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&i==-1&&s==-1?h:c+"T"+h}var HX=function(){var t={};t.version="1.2.0";function e(){for(var b=0,T=new Array(256),A=0;A!=256;++A)b=A,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,b=b&1?-306674912^b>>>1:b>>>1,T[A]=b;return typeof Int32Array<"u"?new Int32Array(T):T}var r=e();function n(b){var T=0,A=0,F=0,k=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)k[F]=b[F];for(F=0;F!=256;++F)for(A=b[F],T=256+F;T<4096;T+=256)A=k[T]=A>>>8^b[A&255];var L=[];for(F=1;F!=16;++F)L[F-1]=typeof Int32Array<"u"?k.subarray(F*256,F*256+256):k.slice(F*256,F*256+256);return L}var i=n(r),s=i[0],a=i[1],o=i[2],l=i[3],c=i[4],h=i[5],d=i[6],p=i[7],f=i[8],v=i[9],x=i[10],_=i[11],w=i[12],S=i[13],N=i[14];function j(b,T){for(var A=T^-1,F=0,k=b.length;F<k;)A=A>>>8^r[(A^b.charCodeAt(F++))&255];return~A}function z(b,T){for(var A=T^-1,F=b.length-15,k=0;k<F;)A=N[b[k++]^A&255]^S[b[k++]^A>>8&255]^w[b[k++]^A>>16&255]^_[b[k++]^A>>>24]^x[b[k++]]^v[b[k++]]^f[b[k++]]^p[b[k++]]^d[b[k++]]^h[b[k++]]^c[b[k++]]^l[b[k++]]^o[b[k++]]^a[b[k++]]^s[b[k++]]^r[b[k++]];for(F+=15;k<F;)A=A>>>8^r[(A^b[k++])&255];return~A}function W(b,T){for(var A=T^-1,F=0,k=b.length,L=0,R=0;F<k;)L=b.charCodeAt(F++),L<128?A=A>>>8^r[(A^L)&255]:L<2048?(A=A>>>8^r[(A^(192|L>>6&31))&255],A=A>>>8^r[(A^(128|L&63))&255]):L>=55296&&L<57344?(L=(L&1023)+64,R=b.charCodeAt(F++)&1023,A=A>>>8^r[(A^(240|L>>8&7))&255],A=A>>>8^r[(A^(128|L>>2&63))&255],A=A>>>8^r[(A^(128|R>>6&15|(L&3)<<4))&255],A=A>>>8^r[(A^(128|R&63))&255]):(A=A>>>8^r[(A^(224|L>>12&15))&255],A=A>>>8^r[(A^(128|L>>6&63))&255],A=A>>>8^r[(A^(128|L&63))&255]);return~A}return t.table=r,t.bstr=j,t.buf=z,t.str=W,t}(),kn=function(){var e={};e.version="1.2.1";function r(O,Z){for(var G=O.split("/"),Y=Z.split("/"),ee=0,re=0,ke=Math.min(G.length,Y.length);ee<ke;++ee){if(re=G[ee].length-Y[ee].length)return re;if(G[ee]!=Y[ee])return G[ee]<Y[ee]?-1:1}return G.length-Y.length}function n(O){if(O.charAt(O.length-1)=="/")return O.slice(0,-1).indexOf("/")===-1?O:n(O.slice(0,-1));var Z=O.lastIndexOf("/");return Z===-1?O:O.slice(0,Z+1)}function i(O){if(O.charAt(O.length-1)=="/")return i(O.slice(0,-1));var Z=O.lastIndexOf("/");return Z===-1?O:O.slice(Z+1)}function s(O,Z){typeof Z=="string"&&(Z=new Date(Z));var G=Z.getHours();G=G<<6|Z.getMinutes(),G=G<<5|Z.getSeconds()>>>1,O.write_shift(2,G);var Y=Z.getFullYear()-1980;Y=Y<<4|Z.getMonth()+1,Y=Y<<5|Z.getDate(),O.write_shift(2,Y)}function a(O){var Z=O.read_shift(2)&65535,G=O.read_shift(2)&65535,Y=new Date,ee=G&31;G>>>=5;var re=G&15;G>>>=4,Y.setMilliseconds(0),Y.setFullYear(G+1980),Y.setMonth(re-1),Y.setDate(ee);var ke=Z&31;Z>>>=5;var pe=Z&63;return Z>>>=6,Y.setHours(Z),Y.setMinutes(pe),Y.setSeconds(ke<<1),Y}function o(O){Sa(O,0);for(var Z={},G=0;O.l<=O.length-4;){var Y=O.read_shift(2),ee=O.read_shift(2),re=O.l+ee,ke={};switch(Y){case 21589:G=O.read_shift(1),G&1&&(ke.mtime=O.read_shift(4)),ee>5&&(G&2&&(ke.atime=O.read_shift(4)),G&4&&(ke.ctime=O.read_shift(4))),ke.mtime&&(ke.mt=new Date(ke.mtime*1e3));break}O.l=re,Z[Y]=ke}return Z}var l;function c(){return l||(l={})}function h(O,Z){if(O[0]==80&&O[1]==75)return Zt(O,Z);if((O[0]|32)==109&&(O[1]|32)==105)return nr(O,Z);if(O.length<512)throw new Error("CFB file size "+O.length+" < 512");var G=3,Y=512,ee=0,re=0,ke=0,pe=0,Ne=0,je=[],Oe=O.slice(0,512);Sa(Oe,0);var st=d(Oe);switch(G=st[0],G){case 3:Y=512;break;case 4:Y=4096;break;case 0:if(st[1]==0)return Zt(O,Z);default:throw new Error("Major Version: Expected 3 or 4 saw "+G)}Y!==512&&(Oe=O.slice(0,Y),Sa(Oe,28));var pt=O.slice(0,Y);p(Oe,G);var gt=Oe.read_shift(4,"i");if(G===3&&gt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+gt);Oe.l+=4,ke=Oe.read_shift(4,"i"),Oe.l+=4,Oe.chk("00100000","Mini Stream Cutoff Size: "),pe=Oe.read_shift(4,"i"),ee=Oe.read_shift(4,"i"),Ne=Oe.read_shift(4,"i"),re=Oe.read_shift(4,"i");for(var ft=-1,At=0;At<109&&(ft=Oe.read_shift(4,"i"),!(ft<0));++At)je[At]=ft;var er=f(O,Y);_(Ne,re,er,Y,je);var _r=S(er,ke,je,Y);_r[ke].name="!Directory",ee>0&&pe!==R&&(_r[pe].name="!MiniFAT"),_r[je[0]].name="!FAT",_r.fat_addrs=je,_r.ssz=Y;var pr={},en=[],mn=[],gn=[];N(ke,_r,er,en,ee,pr,mn,pe),v(mn,gn,en),en.shift();var Dn={FileIndex:mn,FullPaths:gn};return Z&&Z.raw&&(Dn.raw={header:pt,sectors:er}),Dn}function d(O){if(O[O.l]==80&&O[O.l+1]==75)return[0,0];O.chk(le,"Header Signature: "),O.l+=16;var Z=O.read_shift(2,"u");return[O.read_shift(2,"u"),Z]}function p(O,Z){var G=9;switch(O.l+=2,G=O.read_shift(2)){case 9:if(Z!=3)throw new Error("Sector Shift: Expected 9 saw "+G);break;case 12:if(Z!=4)throw new Error("Sector Shift: Expected 12 saw "+G);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+G)}O.chk("0600","Mini Sector Shift: "),O.chk("000000000000","Reserved: ")}function f(O,Z){for(var G=Math.ceil(O.length/Z)-1,Y=[],ee=1;ee<G;++ee)Y[ee-1]=O.slice(ee*Z,(ee+1)*Z);return Y[G-1]=O.slice(G*Z),Y}function v(O,Z,G){for(var Y=0,ee=0,re=0,ke=0,pe=0,Ne=G.length,je=[],Oe=[];Y<Ne;++Y)je[Y]=Oe[Y]=Y,Z[Y]=G[Y];for(;pe<Oe.length;++pe)Y=Oe[pe],ee=O[Y].L,re=O[Y].R,ke=O[Y].C,je[Y]===Y&&(ee!==-1&&je[ee]!==ee&&(je[Y]=je[ee]),re!==-1&&je[re]!==re&&(je[Y]=je[re])),ke!==-1&&(je[ke]=Y),ee!==-1&&Y!=je[Y]&&(je[ee]=je[Y],Oe.lastIndexOf(ee)<pe&&Oe.push(ee)),re!==-1&&Y!=je[Y]&&(je[re]=je[Y],Oe.lastIndexOf(re)<pe&&Oe.push(re));for(Y=1;Y<Ne;++Y)je[Y]===Y&&(re!==-1&&je[re]!==re?je[Y]=je[re]:ee!==-1&&je[ee]!==ee&&(je[Y]=je[ee]));for(Y=1;Y<Ne;++Y)if(O[Y].type!==0){if(pe=Y,pe!=je[pe])do pe=je[pe],Z[Y]=Z[pe]+"/"+Z[Y];while(pe!==0&&je[pe]!==-1&&pe!=je[pe]);je[Y]=-1}for(Z[0]+="/",Y=1;Y<Ne;++Y)O[Y].type!==2&&(Z[Y]+="/")}function x(O,Z,G){for(var Y=O.start,ee=O.size,re=[],ke=Y;G&&ee>0&&ke>=0;)re.push(Z.slice(ke*L,ke*L+L)),ee-=L,ke=qu(G,ke*4);return re.length===0?nt(0):os(re).slice(0,O.size)}function _(O,Z,G,Y,ee){var re=R;if(O===R){if(Z!==0)throw new Error("DIFAT chain shorter than expected")}else if(O!==-1){var ke=G[O],pe=(Y>>>2)-1;if(!ke)return;for(var Ne=0;Ne<pe&&(re=qu(ke,Ne*4))!==R;++Ne)ee.push(re);_(qu(ke,Y-4),Z-1,G,Y,ee)}}function w(O,Z,G,Y,ee){var re=[],ke=[];ee||(ee=[]);var pe=Y-1,Ne=0,je=0;for(Ne=Z;Ne>=0;){ee[Ne]=!0,re[re.length]=Ne,ke.push(O[Ne]);var Oe=G[Math.floor(Ne*4/Y)];if(je=Ne*4&pe,Y<4+je)throw new Error("FAT boundary crossed: "+Ne+" 4 "+Y);if(!O[Oe])break;Ne=qu(O[Oe],je)}return{nodes:re,data:wT([ke])}}function S(O,Z,G,Y){var ee=O.length,re=[],ke=[],pe=[],Ne=[],je=Y-1,Oe=0,st=0,pt=0,gt=0;for(Oe=0;Oe<ee;++Oe)if(pe=[],pt=Oe+Z,pt>=ee&&(pt-=ee),!ke[pt]){Ne=[];var ft=[];for(st=pt;st>=0;){ft[st]=!0,ke[st]=!0,pe[pe.length]=st,Ne.push(O[st]);var At=G[Math.floor(st*4/Y)];if(gt=st*4&je,Y<4+gt)throw new Error("FAT boundary crossed: "+st+" 4 "+Y);if(!O[At]||(st=qu(O[At],gt),ft[st]))break}re[pt]={nodes:pe,data:wT([Ne])}}return re}function N(O,Z,G,Y,ee,re,ke,pe){for(var Ne=0,je=Y.length?2:0,Oe=Z[O].data,st=0,pt=0,gt;st<Oe.length;st+=128){var ft=Oe.slice(st,st+128);Sa(ft,64),pt=ft.read_shift(2),gt=i4(ft,0,pt-je),Y.push(gt);var At={name:gt,type:ft.read_shift(1),color:ft.read_shift(1),L:ft.read_shift(4,"i"),R:ft.read_shift(4,"i"),C:ft.read_shift(4,"i"),clsid:ft.read_shift(16),state:ft.read_shift(4,"i"),start:0,size:0},er=ft.read_shift(2)+ft.read_shift(2)+ft.read_shift(2)+ft.read_shift(2);er!==0&&(At.ct=j(ft,ft.l-8));var _r=ft.read_shift(2)+ft.read_shift(2)+ft.read_shift(2)+ft.read_shift(2);_r!==0&&(At.mt=j(ft,ft.l-8)),At.start=ft.read_shift(4,"i"),At.size=ft.read_shift(4,"i"),At.size<0&&At.start<0&&(At.size=At.type=0,At.start=R,At.name=""),At.type===5?(Ne=At.start,ee>0&&Ne!==R&&(Z[Ne].name="!StreamData")):At.size>=4096?(At.storage="fat",Z[At.start]===void 0&&(Z[At.start]=w(G,At.start,Z.fat_addrs,Z.ssz)),Z[At.start].name=At.name,At.content=Z[At.start].data.slice(0,At.size)):(At.storage="minifat",At.size<0?At.size=0:Ne!==R&&At.start!==R&&Z[Ne]&&(At.content=x(At,Z[Ne].data,(Z[pe]||{}).data))),At.content&&Sa(At.content,0),re[gt]=At,ke.push(At)}}function j(O,Z){return new Date((Aa(O,Z+4)/1e7*Math.pow(2,32)+Aa(O,Z)/1e7-11644473600)*1e3)}function z(O,Z){return c(),h(l.readFileSync(O),Z)}function W(O,Z){var G=Z&&Z.type;switch(G||hn&&Buffer.isBuffer(O)&&(G="buffer"),G||"base64"){case"file":return z(O,Z);case"base64":return h(Ao(Ql(O)),Z);case"binary":return h(Ao(O),Z)}return h(O,Z)}function b(O,Z){var G=Z||{},Y=G.root||"Root Entry";if(O.FullPaths||(O.FullPaths=[]),O.FileIndex||(O.FileIndex=[]),O.FullPaths.length!==O.FileIndex.length)throw new Error("inconsistent CFB structure");O.FullPaths.length===0&&(O.FullPaths[0]=Y+"/",O.FileIndex[0]={name:Y,type:5}),G.CLSID&&(O.FileIndex[0].clsid=G.CLSID),T(O)}function T(O){var Z="Sh33tJ5";if(!kn.find(O,"/"+Z)){var G=nt(4);G[0]=55,G[1]=G[3]=50,G[2]=54,O.FileIndex.push({name:Z,type:2,content:G,size:4,L:69,R:69,C:69}),O.FullPaths.push(O.FullPaths[0]+Z),A(O)}}function A(O,Z){b(O);for(var G=!1,Y=!1,ee=O.FullPaths.length-1;ee>=0;--ee){var re=O.FileIndex[ee];switch(re.type){case 0:Y?G=!0:(O.FileIndex.pop(),O.FullPaths.pop());break;case 1:case 2:case 5:Y=!0,isNaN(re.R*re.L*re.C)&&(G=!0),re.R>-1&&re.L>-1&&re.R==re.L&&(G=!0);break;default:G=!0;break}}if(!(!G&&!Z)){var ke=new Date(1987,1,19),pe=0,Ne=Object.create?Object.create(null):{},je=[];for(ee=0;ee<O.FullPaths.length;++ee)Ne[O.FullPaths[ee]]=!0,O.FileIndex[ee].type!==0&&je.push([O.FullPaths[ee],O.FileIndex[ee]]);for(ee=0;ee<je.length;++ee){var Oe=n(je[ee][0]);Y=Ne[Oe],Y||(je.push([Oe,{name:i(Oe).replace("/",""),type:1,clsid:ge,ct:ke,mt:ke,content:null}]),Ne[Oe]=!0)}for(je.sort(function(gt,ft){return r(gt[0],ft[0])}),O.FullPaths=[],O.FileIndex=[],ee=0;ee<je.length;++ee)O.FullPaths[ee]=je[ee][0],O.FileIndex[ee]=je[ee][1];for(ee=0;ee<je.length;++ee){var st=O.FileIndex[ee],pt=O.FullPaths[ee];if(st.name=i(pt).replace("/",""),st.L=st.R=st.C=-(st.color=1),st.size=st.content?st.content.length:0,st.start=0,st.clsid=st.clsid||ge,ee===0)st.C=je.length>1?1:-1,st.size=0,st.type=5;else if(pt.slice(-1)=="/"){for(pe=ee+1;pe<je.length&&n(O.FullPaths[pe])!=pt;++pe);for(st.C=pe>=je.length?-1:pe,pe=ee+1;pe<je.length&&n(O.FullPaths[pe])!=n(pt);++pe);st.R=pe>=je.length?-1:pe,st.type=1}else n(O.FullPaths[ee+1]||"")==n(pt)&&(st.R=ee+1),st.type=2}}}function F(O,Z){var G=Z||{};if(G.fileType=="mad")return zn(O,G);switch(A(O),G.fileType){case"zip":return $t(O,G)}var Y=function(gt){for(var ft=0,At=0,er=0;er<gt.FileIndex.length;++er){var _r=gt.FileIndex[er];if(_r.content){var pr=_r.content.length;pr>0&&(pr<4096?ft+=pr+63>>6:At+=pr+511>>9)}}for(var en=gt.FullPaths.length+3>>2,mn=ft+7>>3,gn=ft+127>>7,Dn=mn+At+en+gn,In=Dn+127>>7,ir=In<=109?0:Math.ceil((In-109)/127);Dn+In+ir+127>>7>In;)ir=++In<=109?0:Math.ceil((In-109)/127);var Ir=[1,ir,In,gn,en,At,ft,0];return gt.FileIndex[0].size=ft<<6,Ir[7]=(gt.FileIndex[0].start=Ir[0]+Ir[1]+Ir[2]+Ir[3]+Ir[4]+Ir[5])+(Ir[6]+7>>3),Ir}(O),ee=nt(Y[7]<<9),re=0,ke=0;{for(re=0;re<8;++re)ee.write_shift(1,ve[re]);for(re=0;re<8;++re)ee.write_shift(2,0);for(ee.write_shift(2,62),ee.write_shift(2,3),ee.write_shift(2,65534),ee.write_shift(2,9),ee.write_shift(2,6),re=0;re<3;++re)ee.write_shift(2,0);for(ee.write_shift(4,0),ee.write_shift(4,Y[2]),ee.write_shift(4,Y[0]+Y[1]+Y[2]+Y[3]-1),ee.write_shift(4,0),ee.write_shift(4,4096),ee.write_shift(4,Y[3]?Y[0]+Y[1]+Y[2]-1:R),ee.write_shift(4,Y[3]),ee.write_shift(-4,Y[1]?Y[0]-1:R),ee.write_shift(4,Y[1]),re=0;re<109;++re)ee.write_shift(-4,re<Y[2]?Y[1]+re:-1)}if(Y[1])for(ke=0;ke<Y[1];++ke){for(;re<236+ke*127;++re)ee.write_shift(-4,re<Y[2]?Y[1]+re:-1);ee.write_shift(-4,ke===Y[1]-1?R:ke+1)}var pe=function(gt){for(ke+=gt;re<ke-1;++re)ee.write_shift(-4,re+1);gt&&(++re,ee.write_shift(-4,R))};for(ke=re=0,ke+=Y[1];re<ke;++re)ee.write_shift(-4,ye.DIFSECT);for(ke+=Y[2];re<ke;++re)ee.write_shift(-4,ye.FATSECT);pe(Y[3]),pe(Y[4]);for(var Ne=0,je=0,Oe=O.FileIndex[0];Ne<O.FileIndex.length;++Ne)Oe=O.FileIndex[Ne],Oe.content&&(je=Oe.content.length,!(je<4096)&&(Oe.start=ke,pe(je+511>>9)));for(pe(Y[6]+7>>3);ee.l&511;)ee.write_shift(-4,ye.ENDOFCHAIN);for(ke=re=0,Ne=0;Ne<O.FileIndex.length;++Ne)Oe=O.FileIndex[Ne],Oe.content&&(je=Oe.content.length,!(!je||je>=4096)&&(Oe.start=ke,pe(je+63>>6)));for(;ee.l&511;)ee.write_shift(-4,ye.ENDOFCHAIN);for(re=0;re<Y[4]<<2;++re){var st=O.FullPaths[re];if(!st||st.length===0){for(Ne=0;Ne<17;++Ne)ee.write_shift(4,0);for(Ne=0;Ne<3;++Ne)ee.write_shift(4,-1);for(Ne=0;Ne<12;++Ne)ee.write_shift(4,0);continue}Oe=O.FileIndex[re],re===0&&(Oe.start=Oe.size?Oe.start-1:R);var pt=re===0&&G.root||Oe.name;if(je=2*(pt.length+1),ee.write_shift(64,pt,"utf16le"),ee.write_shift(2,je),ee.write_shift(1,Oe.type),ee.write_shift(1,Oe.color),ee.write_shift(-4,Oe.L),ee.write_shift(-4,Oe.R),ee.write_shift(-4,Oe.C),Oe.clsid)ee.write_shift(16,Oe.clsid,"hex");else for(Ne=0;Ne<4;++Ne)ee.write_shift(4,0);ee.write_shift(4,Oe.state||0),ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(4,Oe.start),ee.write_shift(4,Oe.size),ee.write_shift(4,0)}for(re=1;re<O.FileIndex.length;++re)if(Oe=O.FileIndex[re],Oe.size>=4096)if(ee.l=Oe.start+1<<9,hn&&Buffer.isBuffer(Oe.content))Oe.content.copy(ee,ee.l,0,Oe.size),ee.l+=Oe.size+511&-512;else{for(Ne=0;Ne<Oe.size;++Ne)ee.write_shift(1,Oe.content[Ne]);for(;Ne&511;++Ne)ee.write_shift(1,0)}for(re=1;re<O.FileIndex.length;++re)if(Oe=O.FileIndex[re],Oe.size>0&&Oe.size<4096)if(hn&&Buffer.isBuffer(Oe.content))Oe.content.copy(ee,ee.l,0,Oe.size),ee.l+=Oe.size+63&-64;else{for(Ne=0;Ne<Oe.size;++Ne)ee.write_shift(1,Oe.content[Ne]);for(;Ne&63;++Ne)ee.write_shift(1,0)}if(hn)ee.l=ee.length;else for(;ee.l<ee.length;)ee.write_shift(1,0);return ee}function k(O,Z){var G=O.FullPaths.map(function(Ne){return Ne.toUpperCase()}),Y=G.map(function(Ne){var je=Ne.split("/");return je[je.length-(Ne.slice(-1)=="/"?2:1)]}),ee=!1;Z.charCodeAt(0)===47?(ee=!0,Z=G[0].slice(0,-1)+Z):ee=Z.indexOf("/")!==-1;var re=Z.toUpperCase(),ke=ee===!0?G.indexOf(re):Y.indexOf(re);if(ke!==-1)return O.FileIndex[ke];var pe=!re.match(kg);for(re=re.replace(G0,""),pe&&(re=re.replace(kg,"!")),ke=0;ke<G.length;++ke)if((pe?G[ke].replace(kg,"!"):G[ke]).replace(G0,"")==re||(pe?Y[ke].replace(kg,"!"):Y[ke]).replace(G0,"")==re)return O.FileIndex[ke];return null}var L=64,R=-2,le="d0cf11e0a1b11ae1",ve=[208,207,17,224,161,177,26,225],ge="00000000000000000000000000000000",ye={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:R,FREESECT:-1,HEADER_SIGNATURE:le,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ge,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(O,Z,G){c();var Y=F(O,G);l.writeFileSync(Z,Y)}function be(O){for(var Z=new Array(O.length),G=0;G<O.length;++G)Z[G]=String.fromCharCode(O[G]);return Z.join("")}function Me(O,Z){var G=F(O,Z);switch(Z&&Z.type||"buffer"){case"file":return c(),l.writeFileSync(Z.filename,G),G;case"binary":return typeof G=="string"?G:be(G);case"base64":return Op(typeof G=="string"?G:be(G));case"buffer":if(hn)return Buffer.isBuffer(G)?G:rc(G);case"array":return typeof G=="string"?Ao(G):G}return G}var Le;function I(O){try{var Z=O.InflateRaw,G=new Z;if(G._processChunk(new Uint8Array([3,0]),G._finishFlushFlag),G.bytesRead)Le=O;else throw new Error("zlib does not expose bytesRead")}catch(Y){console.error("cannot use native zlib: "+(Y.message||Y))}}function B(O,Z){if(!Le)return Rr(O,Z);var G=Le.InflateRaw,Y=new G,ee=Y._processChunk(O.slice(O.l),Y._finishFlushFlag);return O.l+=Y.bytesRead,ee}function U(O){return Le?Le.deflateRawSync(O):Ot(O)}var H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],fe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ae(O){var Z=(O<<1|O<<11)&139536|(O<<5|O<<15)&558144;return(Z>>16|Z>>8|Z)&255}for(var Te=typeof Uint8Array<"u",Pe=Te?new Uint8Array(256):[],et=0;et<256;++et)Pe[et]=Ae(et);function Qe(O,Z){var G=Pe[O&255];return Z<=8?G>>>8-Z:(G=G<<8|Pe[O>>8&255],Z<=16?G>>>16-Z:(G=G<<8|Pe[O>>16&255],G>>>24-Z))}function dt(O,Z){var G=Z&7,Y=Z>>>3;return(O[Y]|(G<=6?0:O[Y+1]<<8))>>>G&3}function wt(O,Z){var G=Z&7,Y=Z>>>3;return(O[Y]|(G<=5?0:O[Y+1]<<8))>>>G&7}function ae(O,Z){var G=Z&7,Y=Z>>>3;return(O[Y]|(G<=4?0:O[Y+1]<<8))>>>G&15}function Ie(O,Z){var G=Z&7,Y=Z>>>3;return(O[Y]|(G<=3?0:O[Y+1]<<8))>>>G&31}function ne(O,Z){var G=Z&7,Y=Z>>>3;return(O[Y]|(G<=1?0:O[Y+1]<<8))>>>G&127}function we(O,Z,G){var Y=Z&7,ee=Z>>>3,re=(1<<G)-1,ke=O[ee]>>>Y;return G<8-Y||(ke|=O[ee+1]<<8-Y,G<16-Y)||(ke|=O[ee+2]<<16-Y,G<24-Y)||(ke|=O[ee+3]<<24-Y),ke&re}function me(O,Z,G){var Y=Z&7,ee=Z>>>3;return Y<=5?O[ee]|=(G&7)<<Y:(O[ee]|=G<<Y&255,O[ee+1]=(G&7)>>8-Y),Z+3}function Ke(O,Z,G){var Y=Z&7,ee=Z>>>3;return G=(G&1)<<Y,O[ee]|=G,Z+1}function Je(O,Z,G){var Y=Z&7,ee=Z>>>3;return G<<=Y,O[ee]|=G&255,G>>>=8,O[ee+1]=G,Z+8}function ct(O,Z,G){var Y=Z&7,ee=Z>>>3;return G<<=Y,O[ee]|=G&255,G>>>=8,O[ee+1]=G&255,O[ee+2]=G>>>8,Z+16}function Et(O,Z){var G=O.length,Y=2*G>Z?2*G:Z+5,ee=0;if(G>=Z)return O;if(hn){var re=sT(Y);if(O.copy)O.copy(re);else for(;ee<O.length;++ee)re[ee]=O[ee];return re}else if(Te){var ke=new Uint8Array(Y);if(ke.set)ke.set(O);else for(;ee<G;++ee)ke[ee]=O[ee];return ke}return O.length=Y,O}function Bt(O){for(var Z=new Array(O),G=0;G<O;++G)Z[G]=0;return Z}function Ee(O,Z,G){var Y=1,ee=0,re=0,ke=0,pe=0,Ne=O.length,je=Te?new Uint16Array(32):Bt(32);for(re=0;re<32;++re)je[re]=0;for(re=Ne;re<G;++re)O[re]=0;Ne=O.length;var Oe=Te?new Uint16Array(Ne):Bt(Ne);for(re=0;re<Ne;++re)je[ee=O[re]]++,Y<ee&&(Y=ee),Oe[re]=0;for(je[0]=0,re=1;re<=Y;++re)je[re+16]=pe=pe+je[re-1]<<1;for(re=0;re<Ne;++re)pe=O[re],pe!=0&&(Oe[re]=je[pe+16]++);var st=0;for(re=0;re<Ne;++re)if(st=O[re],st!=0)for(pe=Qe(Oe[re],Y)>>Y-st,ke=(1<<Y+4-st)-1;ke>=0;--ke)Z[pe|ke<<st]=st&15|re<<4;return Y}var it=Te?new Uint16Array(512):Bt(512),mt=Te?new Uint16Array(32):Bt(32);if(!Te){for(var bt=0;bt<512;++bt)it[bt]=0;for(bt=0;bt<32;++bt)mt[bt]=0}(function(){for(var O=[],Z=0;Z<32;Z++)O.push(5);Ee(O,mt,32);var G=[];for(Z=0;Z<=143;Z++)G.push(8);for(;Z<=255;Z++)G.push(9);for(;Z<=279;Z++)G.push(7);for(;Z<=287;Z++)G.push(8);Ee(G,it,288)})();var Rt=function(){for(var Z=Te?new Uint8Array(32768):[],G=0,Y=0;G<fe.length-1;++G)for(;Y<fe[G+1];++Y)Z[Y]=G;for(;Y<32768;++Y)Z[Y]=29;var ee=Te?new Uint8Array(259):[];for(G=0,Y=0;G<te.length-1;++G)for(;Y<te[G+1];++Y)ee[Y]=G;function re(pe,Ne){for(var je=0;je<pe.length;){var Oe=Math.min(65535,pe.length-je),st=je+Oe==pe.length;for(Ne.write_shift(1,+st),Ne.write_shift(2,Oe),Ne.write_shift(2,~Oe&65535);Oe-- >0;)Ne[Ne.l++]=pe[je++]}return Ne.l}function ke(pe,Ne){for(var je=0,Oe=0,st=Te?new Uint16Array(32768):[];Oe<pe.length;){var pt=Math.min(65535,pe.length-Oe);if(pt<10){for(je=me(Ne,je,+(Oe+pt==pe.length)),je&7&&(je+=8-(je&7)),Ne.l=je/8|0,Ne.write_shift(2,pt),Ne.write_shift(2,~pt&65535);pt-- >0;)Ne[Ne.l++]=pe[Oe++];je=Ne.l*8;continue}je=me(Ne,je,+(Oe+pt==pe.length)+2);for(var gt=0;pt-- >0;){var ft=pe[Oe];gt=(gt<<5^ft)&32767;var At=-1,er=0;if((At=st[gt])&&(At|=Oe&-32768,At>Oe&&(At-=32768),At<Oe))for(;pe[At+er]==pe[Oe+er]&&er<250;)++er;if(er>2){ft=ee[er],ft<=22?je=Je(Ne,je,Pe[ft+1]>>1)-1:(Je(Ne,je,3),je+=5,Je(Ne,je,Pe[ft-23]>>5),je+=3);var _r=ft<8?0:ft-4>>2;_r>0&&(ct(Ne,je,er-te[ft]),je+=_r),ft=Z[Oe-At],je=Je(Ne,je,Pe[ft]>>3),je-=3;var pr=ft<4?0:ft-2>>1;pr>0&&(ct(Ne,je,Oe-At-fe[ft]),je+=pr);for(var en=0;en<er;++en)st[gt]=Oe&32767,gt=(gt<<5^pe[Oe])&32767,++Oe;pt-=er-1}else ft<=143?ft=ft+48:je=Ke(Ne,je,1),je=Je(Ne,je,Pe[ft]),st[gt]=Oe&32767,++Oe}je=Je(Ne,je,0)-1}return Ne.l=(je+7)/8|0,Ne.l}return function(Ne,je){return Ne.length<8?re(Ne,je):ke(Ne,je)}}();function Ot(O){var Z=nt(50+Math.floor(O.length*1.1)),G=Rt(O,Z);return Z.slice(0,G)}var Vt=Te?new Uint16Array(32768):Bt(32768),Vr=Te?new Uint16Array(32768):Bt(32768),mr=Te?new Uint16Array(128):Bt(128),qe=1,Ft=1;function wr(O,Z){var G=Ie(O,Z)+257;Z+=5;var Y=Ie(O,Z)+1;Z+=5;var ee=ae(O,Z)+4;Z+=4;for(var re=0,ke=Te?new Uint8Array(19):Bt(19),pe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ne=1,je=Te?new Uint8Array(8):Bt(8),Oe=Te?new Uint8Array(8):Bt(8),st=ke.length,pt=0;pt<ee;++pt)ke[H[pt]]=re=wt(O,Z),Ne<re&&(Ne=re),je[re]++,Z+=3;var gt=0;for(je[0]=0,pt=1;pt<=Ne;++pt)Oe[pt]=gt=gt+je[pt-1]<<1;for(pt=0;pt<st;++pt)(gt=ke[pt])!=0&&(pe[pt]=Oe[gt]++);var ft=0;for(pt=0;pt<st;++pt)if(ft=ke[pt],ft!=0){gt=Pe[pe[pt]]>>8-ft;for(var At=(1<<7-ft)-1;At>=0;--At)mr[gt|At<<ft]=ft&7|pt<<3}var er=[];for(Ne=1;er.length<G+Y;)switch(gt=mr[ne(O,Z)],Z+=gt&7,gt>>>=3){case 16:for(re=3+dt(O,Z),Z+=2,gt=er[er.length-1];re-- >0;)er.push(gt);break;case 17:for(re=3+wt(O,Z),Z+=3;re-- >0;)er.push(0);break;case 18:for(re=11+ne(O,Z),Z+=7;re-- >0;)er.push(0);break;default:er.push(gt),Ne<gt&&(Ne=gt);break}var _r=er.slice(0,G),pr=er.slice(G);for(pt=G;pt<286;++pt)_r[pt]=0;for(pt=Y;pt<30;++pt)pr[pt]=0;return qe=Ee(_r,Vt,286),Ft=Ee(pr,Vr,30),Z}function Gt(O,Z){if(O[0]==3&&!(O[1]&3))return[wh(Z),2];for(var G=0,Y=0,ee=sT(Z||1<<18),re=0,ke=ee.length>>>0,pe=0,Ne=0;!(Y&1);){if(Y=wt(O,G),G+=3,Y>>>1)Y>>1==1?(pe=9,Ne=5):(G=wr(O,G),pe=qe,Ne=Ft);else{G&7&&(G+=8-(G&7));var je=O[G>>>3]|O[(G>>>3)+1]<<8;if(G+=32,je>0)for(!Z&&ke<re+je&&(ee=Et(ee,re+je),ke=ee.length);je-- >0;)ee[re++]=O[G>>>3],G+=8;continue}for(;;){!Z&&ke<re+32767&&(ee=Et(ee,re+32767),ke=ee.length);var Oe=we(O,G,pe),st=Y>>>1==1?it[Oe]:Vt[Oe];if(G+=st&15,st>>>=4,!(st>>>8&255))ee[re++]=st;else{if(st==256)break;st-=257;var pt=st<8?0:st-4>>2;pt>5&&(pt=0);var gt=re+te[st];pt>0&&(gt+=we(O,G,pt),G+=pt),Oe=we(O,G,Ne),st=Y>>>1==1?mt[Oe]:Vr[Oe],G+=st&15,st>>>=4;var ft=st<4?0:st-2>>1,At=fe[st];for(ft>0&&(At+=we(O,G,ft),G+=ft),!Z&&ke<gt&&(ee=Et(ee,gt+100),ke=ee.length);re<gt;)ee[re]=ee[re-At],++re}}}return Z?[ee,G+7>>>3]:[ee.slice(0,re),G+7>>>3]}function Rr(O,Z){var G=O.slice(O.l||0),Y=Gt(G,Z);return O.l+=Y[1],Y[0]}function rr(O,Z){if(O)typeof console<"u"&&console.error(Z);else throw new Error(Z)}function Zt(O,Z){var G=O;Sa(G,0);var Y=[],ee=[],re={FileIndex:Y,FullPaths:ee};b(re,{root:Z.root});for(var ke=G.length-4;(G[ke]!=80||G[ke+1]!=75||G[ke+2]!=5||G[ke+3]!=6)&&ke>=0;)--ke;G.l=ke+4,G.l+=4;var pe=G.read_shift(2);G.l+=6;var Ne=G.read_shift(4);for(G.l=Ne,ke=0;ke<pe;++ke){G.l+=20;var je=G.read_shift(4),Oe=G.read_shift(4),st=G.read_shift(2),pt=G.read_shift(2),gt=G.read_shift(2);G.l+=8;var ft=G.read_shift(4),At=o(G.slice(G.l+st,G.l+st+pt));G.l+=st+pt+gt;var er=G.l;G.l=ft+4,zr(G,je,Oe,re,At),G.l=er}return re}function zr(O,Z,G,Y,ee){O.l+=2;var re=O.read_shift(2),ke=O.read_shift(2),pe=a(O);if(re&8257)throw new Error("Unsupported ZIP encryption");for(var Ne=O.read_shift(4),je=O.read_shift(4),Oe=O.read_shift(4),st=O.read_shift(2),pt=O.read_shift(2),gt="",ft=0;ft<st;++ft)gt+=String.fromCharCode(O[O.l++]);if(pt){var At=o(O.slice(O.l,O.l+pt));(At[21589]||{}).mt&&(pe=At[21589].mt),((ee||{})[21589]||{}).mt&&(pe=ee[21589].mt)}O.l+=pt;var er=O.slice(O.l,O.l+je);switch(ke){case 8:er=B(O,Oe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ke)}var _r=!1;re&8&&(Ne=O.read_shift(4),Ne==134695760&&(Ne=O.read_shift(4),_r=!0),je=O.read_shift(4),Oe=O.read_shift(4)),je!=Z&&rr(_r,"Bad compressed size: "+Z+" != "+je),Oe!=G&&rr(_r,"Bad uncompressed size: "+G+" != "+Oe),xe(Y,gt,er,{unsafe:!0,mt:pe})}function $t(O,Z){var G=Z||{},Y=[],ee=[],re=nt(1),ke=G.compression?8:0,pe=0,Ne=0,je=0,Oe=0,st=0,pt=O.FullPaths[0],gt=pt,ft=O.FileIndex[0],At=[],er=0;for(Ne=1;Ne<O.FullPaths.length;++Ne)if(gt=O.FullPaths[Ne].slice(pt.length),ft=O.FileIndex[Ne],!(!ft.size||!ft.content||gt=="Sh33tJ5")){var _r=Oe,pr=nt(gt.length);for(je=0;je<gt.length;++je)pr.write_shift(1,gt.charCodeAt(je)&127);pr=pr.slice(0,pr.l),At[st]=HX.buf(ft.content,0);var en=ft.content;ke==8&&(en=U(en)),re=nt(30),re.write_shift(4,67324752),re.write_shift(2,20),re.write_shift(2,pe),re.write_shift(2,ke),ft.mt?s(re,ft.mt):re.write_shift(4,0),re.write_shift(-4,At[st]),re.write_shift(4,en.length),re.write_shift(4,ft.content.length),re.write_shift(2,pr.length),re.write_shift(2,0),Oe+=re.length,Y.push(re),Oe+=pr.length,Y.push(pr),Oe+=en.length,Y.push(en),re=nt(46),re.write_shift(4,33639248),re.write_shift(2,0),re.write_shift(2,20),re.write_shift(2,pe),re.write_shift(2,ke),re.write_shift(4,0),re.write_shift(-4,At[st]),re.write_shift(4,en.length),re.write_shift(4,ft.content.length),re.write_shift(2,pr.length),re.write_shift(2,0),re.write_shift(2,0),re.write_shift(2,0),re.write_shift(2,0),re.write_shift(4,0),re.write_shift(4,_r),er+=re.l,ee.push(re),er+=pr.length,ee.push(pr),++st}return re=nt(22),re.write_shift(4,101010256),re.write_shift(2,0),re.write_shift(2,0),re.write_shift(2,st),re.write_shift(2,st),re.write_shift(4,er),re.write_shift(4,Oe),re.write_shift(2,0),os([os(Y),os(ee),re])}var Ze={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function It(O,Z){if(O.ctype)return O.ctype;var G=O.name||"",Y=G.match(/\.([^\.]+)$/);return Y&&Ze[Y[1]]||Z&&(Y=(G=Z).match(/[\.\\]([^\.\\])+$/),Y&&Ze[Y[1]])?Ze[Y[1]]:"application/octet-stream"}function cn(O){for(var Z=Op(O),G=[],Y=0;Y<Z.length;Y+=76)G.push(Z.slice(Y,Y+76));return G.join(`\r
`)+`\r
`}function kr(O){var Z=O.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(je){var Oe=je.charCodeAt(0).toString(16).toUpperCase();return"="+(Oe.length==1?"0"+Oe:Oe)});Z=Z.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Z.charAt(0)==`
`&&(Z="=0D"+Z.slice(1)),Z=Z.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var G=[],Y=Z.split(`\r
`),ee=0;ee<Y.length;++ee){var re=Y[ee];if(re.length==0){G.push("");continue}for(var ke=0;ke<re.length;){var pe=76,Ne=re.slice(ke,ke+pe);Ne.charAt(pe-1)=="="?pe--:Ne.charAt(pe-2)=="="?pe-=2:Ne.charAt(pe-3)=="="&&(pe-=3),Ne=re.slice(ke,ke+pe),ke+=pe,ke<re.length&&(Ne+="="),G.push(Ne)}}return G.join(`\r
`)}function vr(O){for(var Z=[],G=0;G<O.length;++G){for(var Y=O[G];G<=O.length&&Y.charAt(Y.length-1)=="=";)Y=Y.slice(0,Y.length-1)+O[++G];Z.push(Y)}for(var ee=0;ee<Z.length;++ee)Z[ee]=Z[ee].replace(/[=][0-9A-Fa-f]{2}/g,function(re){return String.fromCharCode(parseInt(re.slice(1),16))});return Ao(Z.join(`\r
`))}function dn(O,Z,G){for(var Y="",ee="",re="",ke,pe=0;pe<10;++pe){var Ne=Z[pe];if(!Ne||Ne.match(/^\s*$/))break;var je=Ne.match(/^(.*?):\s*([^\s].*)$/);if(je)switch(je[1].toLowerCase()){case"content-location":Y=je[2].trim();break;case"content-type":re=je[2].trim();break;case"content-transfer-encoding":ee=je[2].trim();break}}switch(++pe,ee.toLowerCase()){case"base64":ke=Ao(Ql(Z.slice(pe).join("")));break;case"quoted-printable":ke=vr(Z.slice(pe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ee)}var Oe=xe(O,Y.slice(G.length),ke,{unsafe:!0});re&&(Oe.ctype=re)}function nr(O,Z){if(be(O.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var G=Z&&Z.root||"",Y=(hn&&Buffer.isBuffer(O)?O.toString("binary"):be(O)).split(`\r
`),ee=0,re="";for(ee=0;ee<Y.length;++ee)if(re=Y[ee],!!/^Content-Location:/i.test(re)&&(re=re.slice(re.indexOf("file")),G||(G=re.slice(0,re.lastIndexOf("/")+1)),re.slice(0,G.length)!=G))for(;G.length>0&&(G=G.slice(0,G.length-1),G=G.slice(0,G.lastIndexOf("/")+1),re.slice(0,G.length)!=G););var ke=(Y[1]||"").match(/boundary="(.*?)"/);if(!ke)throw new Error("MAD cannot find boundary");var pe="--"+(ke[1]||""),Ne=[],je=[],Oe={FileIndex:Ne,FullPaths:je};b(Oe);var st,pt=0;for(ee=0;ee<Y.length;++ee){var gt=Y[ee];gt!==pe&&gt!==pe+"--"||(pt++&&dn(Oe,Y.slice(st,ee),G),st=ee)}return Oe}function zn(O,Z){var G=Z||{},Y=G.boundary||"SheetJS";Y="------="+Y;for(var ee=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Y.slice(2)+'"',"","",""],re=O.FullPaths[0],ke=re,pe=O.FileIndex[0],Ne=1;Ne<O.FullPaths.length;++Ne)if(ke=O.FullPaths[Ne].slice(re.length),pe=O.FileIndex[Ne],!(!pe.size||!pe.content||ke=="Sh33tJ5")){ke=ke.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(er){return"_x"+er.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(er){return"_u"+er.charCodeAt(0).toString(16)+"_"});for(var je=pe.content,Oe=hn&&Buffer.isBuffer(je)?je.toString("binary"):be(je),st=0,pt=Math.min(1024,Oe.length),gt=0,ft=0;ft<=pt;++ft)(gt=Oe.charCodeAt(ft))>=32&&gt<128&&++st;var At=st>=pt*4/5;ee.push(Y),ee.push("Content-Location: "+(G.root||"file:///C:/SheetJS/")+ke),ee.push("Content-Transfer-Encoding: "+(At?"quoted-printable":"base64")),ee.push("Content-Type: "+It(pe,ke)),ee.push(""),ee.push(At?kr(Oe):cn(Oe))}return ee.push(Y+`--\r
`),ee.join(`\r
`)}function on(O){var Z={};return b(Z,O),Z}function xe(O,Z,G,Y){var ee=Y&&Y.unsafe;ee||b(O);var re=!ee&&kn.find(O,Z);if(!re){var ke=O.FullPaths[0];Z.slice(0,ke.length)==ke?ke=Z:(ke.slice(-1)!="/"&&(ke+="/"),ke=(ke+Z).replace("//","/")),re={name:i(Z),type:2},O.FileIndex.push(re),O.FullPaths.push(ke),ee||kn.utils.cfb_gc(O)}return re.content=G,re.size=G?G.length:0,Y&&(Y.CLSID&&(re.clsid=Y.CLSID),Y.mt&&(re.mt=Y.mt),Y.ct&&(re.ct=Y.ct)),re}function Re(O,Z){b(O);var G=kn.find(O,Z);if(G){for(var Y=0;Y<O.FileIndex.length;++Y)if(O.FileIndex[Y]==G)return O.FileIndex.splice(Y,1),O.FullPaths.splice(Y,1),!0}return!1}function Ve(O,Z,G){b(O);var Y=kn.find(O,Z);if(Y){for(var ee=0;ee<O.FileIndex.length;++ee)if(O.FileIndex[ee]==Y)return O.FileIndex[ee].name=i(G),O.FullPaths[ee]=G,!0}return!1}function tt(O){A(O,!0)}return e.find=k,e.read=W,e.parse=h,e.write=Me,e.writeFile=ce,e.utils={cfb_new:on,cfb_add:xe,cfb_del:Re,cfb_mov:Ve,cfb_gc:tt,ReadShift:X0,CheckField:wL,prep_blob:Sa,bconcat:os,use_zlib:I,_deflateRaw:Ot,_inflateRaw:Rr,consts:ye},e}();function $X(t){return typeof t=="string"?M2(t):Array.isArray(t)?gX(t):t}function vm(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=M2(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Up(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var i=new Blob([$X(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=t,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=ym(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function fs(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function fT(t,e){for(var r=[],n=fs(t),i=0;i!==n.length;++i)r[t[n[i]][e]]==null&&(r[t[n[i]][e]]=n[i]);return r}function e4(t){for(var e=[],r=fs(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function U2(t){for(var e=[],r=fs(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function qX(t){for(var e=[],r=fs(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var Cx=new Date(1899,11,30,0,0,0);function aa(t,e){var r=t.getTime(),n=Cx.getTime()+(t.getTimezoneOffset()-Cx.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var nL=new Date,WX=Cx.getTime()+(nL.getTimezoneOffset()-Cx.getTimezoneOffset())*6e4,pT=nL.getTimezoneOffset();function iL(t){var e=new Date;return e.setTime(t*24*60*60*1e3+WX),e.getTimezoneOffset()!==pT&&e.setTime(e.getTime()+(e.getTimezoneOffset()-pT)*6e4),e}var mT=new Date("2017-02-19T19:06:09.000Z"),sL=isNaN(mT.getFullYear())?new Date("2/19/17"):mT,KX=sL.getFullYear()==2017;function qs(t,e){var r=new Date(t);if(KX)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(sL.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function V2(t,e){if(hn&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],i=0;i!=t.length;++i)n.push(String.fromCharCode(t[i]));return n.join("")}function oa(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=oa(t[r]));return e}function hi(t,e){for(var r="";r.length<e;)r+=t;return r}function Bl(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var GX=["january","february","march","april","may","june","july","august","september","october","november","december"];function Bp(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&GX.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}function Br(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return hn?n=rc(r):n=xX(r),kn.utils.cfb_add(t,e,n)}kn.utils.cfb_add(t,e,r)}else t.file(e,r)}function t4(){return kn.utils.cfb_new()}var ji=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,YX={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},r4=e4(YX),n4=/[&<>'"]/g,XX=/[\u0000-\u0008\u000b-\u001f]/g;function En(t){var e=t+"";return e.replace(n4,function(r){return r4[r]}).replace(XX,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function gT(t){return En(t).replace(/ /g,"_x0020_")}var aL=/[\u0000-\u001f]/g;function QX(t){var e=t+"";return e.replace(n4,function(r){return r4[r]}).replace(/\n/g,"<br/>").replace(aL,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function JX(t){var e=t+"";return e.replace(n4,function(r){return r4[r]}).replace(aL,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function ZX(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function eQ(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function jv(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(i=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|s&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function xT(t){var e=wh(2*t.length),r,n,i=1,s=0,a=0,o;for(n=0;n<t.length;n+=i)i=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),i=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),i=3):(i=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function yT(t){return rc(t,"binary").toString("utf8")}var Ig="foo bar baz",Y0=hn&&(yT(Ig)==jv(Ig)&&yT||xT(Ig)==jv(Ig)&&xT)||jv,Up=hn?function(t){return rc(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,i=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},tQ=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)n=n.replace(t[i][0],t[i][1]);return n}}(),oL=/(^\s|\s$|\n)/;function ls(t,e){return"<"+t+(e.match(oL)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Vp(t){return fs(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Lt(t,e,r){return"<"+t+(r!=null?Vp(r):"")+(e!=null?(e.match(oL)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function j5(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function rQ(t,e){switch(typeof t){case"string":var r=Lt("vt:lpwstr",En(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Lt((t|0)==t?"vt:i4":"vt:r8",En(String(t)));case"boolean":return Lt("vt:bool",t?"true":"false")}if(t instanceof Date)return Lt("vt:filetime",j5(t));throw new Error("Unable to serialize "+t)}var Gi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},If=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ea={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function nQ(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function iQ(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=n?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)t[r+o]=s&255;t[r+6]=(i&15)<<4|s&15,t[r+7]=i>>4|n}var vT=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var i=0,s=t[0][n].length;i<s;i+=r)e.push.apply(e,t[0][n].slice(i,i+r));return e},wT=hn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:rc(e)})):vT(t)}:vT,_T=function(t,e,r){for(var n=[],i=e;i<r;i+=2)n.push(String.fromCharCode(b0(t,i)));return n.join("").replace(G0,"")},i4=hn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(G0,""):_T(t,e,r)}:_T,bT=function(t,e,r){for(var n=[],i=e;i<e+r;++i)n.push(("0"+t[i].toString(16)).slice(-2));return n.join("")},lL=hn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):bT(t,e,r)}:bT,ST=function(t,e,r){for(var n=[],i=e;i<r;i++)n.push(String.fromCharCode(td(t,i)));return n.join("")},wm=hn?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):ST(e,r,n)}:ST,cL=function(t,e){var r=Aa(t,e);return r>0?wm(t,e+4,e+4+r-1):""},uL=cL,hL=function(t,e){var r=Aa(t,e);return r>0?wm(t,e+4,e+4+r-1):""},dL=hL,fL=function(t,e){var r=2*Aa(t,e);return r>0?wm(t,e+4,e+4+r-1):""},pL=fL,mL=function(e,r){var n=Aa(e,r);return n>0?i4(e,r+4,r+4+n):""},gL=mL,xL=function(t,e){var r=Aa(t,e);return r>0?wm(t,e+4,e+4+r):""},yL=xL,vL=function(t,e){return nQ(t,e)},Ix=vL,s4=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};hn&&(uL=function(e,r){if(!Buffer.isBuffer(e))return cL(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},dL=function(e,r){if(!Buffer.isBuffer(e))return hL(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},pL=function(e,r){if(!Buffer.isBuffer(e))return fL(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},gL=function(e,r){if(!Buffer.isBuffer(e))return mL(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},yL=function(e,r){if(!Buffer.isBuffer(e))return xL(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},Ix=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):vL(e,r)},s4=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var td=function(t,e){return t[e]},b0=function(t,e){return t[e+1]*256+t[e]},sQ=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Aa=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},qu=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},aQ=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function X0(t,e){var r="",n,i,s=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,hn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(b0(this,c)),c+=2;t*=2;break;case"utf8":r=wm(this,this.l,this.l+t);break;case"utf16le":t*=2,r=i4(this,this.l,this.l+t);break;case"wstr":return X0.call(this,t,"dbcs");case"lpstr-ansi":r=uL(this,this.l),t=4+Aa(this,this.l);break;case"lpstr-cp":r=dL(this,this.l),t=4+Aa(this,this.l);break;case"lpwstr":r=pL(this,this.l),t=4+2*Aa(this,this.l);break;case"lpp4":t=4+Aa(this,this.l),r=gL(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Aa(this,this.l),r=yL(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=td(this,this.l+t++))!==0;)s.push(Tg(a));r=s.join("");break;case"_wstr":for(t=0,r="";(a=b0(this,this.l+t))!==0;)s.push(Tg(a)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=td(this,c),this.l=c+1,o=X0.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Tg(b0(this,c))),c+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=td(this,c),this.l=c+1,o=X0.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Tg(td(this,c))),c+=1}r=s.join("");break;default:switch(t){case 1:return n=td(this,this.l),this.l++,n;case 2:return n=(e==="i"?sQ:b0)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?qu:aQ)(this,this.l),this.l+=4,n):(i=Aa(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=Ix(this,this.l):i=Ix([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:r=lL(this,this.l,t);break}}return this.l+=t,r}var oQ=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},lQ=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},cQ=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function uQ(t,e,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=e.length;++i)cQ(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(r==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,oQ(this,e,this.l);break;case 8:if(n=8,r==="f"){iQ(this,e,this.l);break}case 16:break;case-4:n=4,lQ(this,e,this.l);break}return this.l+=n,this}function wL(t,e){var r=lL(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Sa(t,e){t.l=e,t.read_shift=X0,t.chk=wL,t.write_shift=uQ}function hl(t,e){t.l+=e}function nt(t){var e=wh(t);return Sa(e,0),e}function sa(){var t=[],e=hn?256:2048,r=function(c){var h=nt(c);return Sa(h,0),h},n=r(e),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(c){return n&&c<n.length-n.l?n:(i(),n=r(Math.max(c+1,e)))},a=function(){return i(),os(t)},o=function(c){i(),n=c,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:a,_bufs:t}}function vt(t,e,r,n){var i=+e,s;if(!isNaN(i)){n||(n=nne[i].p||(r||[]).length||0),s=1+(i>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var a=t.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&s4(r)&&t.push(r)}}function Q0(t,e,r){var n=oa(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function ET(t,e,r){var n=oa(t);return n.s=Q0(n.s,e.s,r),n.e=Q0(n.e,e.s,r),n}function J0(t,e){if(t.cRel&&t.c<0)for(t=oa(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=oa(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Nn(t);return!t.cRel&&t.cRel!=null&&(r=fQ(r)),!t.rRel&&t.rRel!=null&&(r=hQ(r)),r}function Fv(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Ps(t.s.c)+":"+(t.e.cRel?"":"$")+Ps(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+us(t.s.r)+":"+(t.e.rRel?"":"$")+us(t.e.r):J0(t.s,e.biff)+":"+J0(t.e,e.biff)}function a4(t){return parseInt(dQ(t),10)-1}function us(t){return""+(t+1)}function hQ(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function dQ(t){return t.replace(/\$(\d+)$/,"$1")}function o4(t){for(var e=pQ(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Ps(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function fQ(t){return t.replace(/^([A-Z])/,"$$$1")}function pQ(t){return t.replace(/^\$([A-Z])/,"$1")}function mQ(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Yi(t){for(var e=0,r=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:e-1}}function Nn(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Fa(t){var e=t.indexOf(":");return e==-1?{s:Yi(t),e:Yi(t)}:{s:Yi(t.slice(0,e)),e:Yi(t.slice(e+1))}}function Ri(t,e){return typeof e>"u"||typeof e=="number"?Ri(t.s,t.e):(typeof t!="string"&&(t=Nn(t)),typeof e!="string"&&(e=Nn(e)),t==e?t:t+":"+e)}function Gn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,s=t.length;for(r=0;n<s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.s.c=--r,r=0;n<s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(e.s.r=--r,n===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.e.c=--r,r=0;n!=s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return e.e.r=--r,e}function AT(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=wu(t.z,r?aa(e):e)}catch{}try{return t.w=wu((t.XF||{}).numFmtId||(r?14:0),r?aa(e):e)}catch{return""+e}}function Jl(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?_m[t.v]||t.v:e==null?AT(t,t.v):AT(t,e))}function Ih(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function _L(t,e,r){var n=r||{},i=t?Array.isArray(t):n.dense,s=t||(i?[]:{}),a=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Yi(n.origin):n.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var h=Gn(s["!ref"]);c.s.c=h.s.c,c.s.r=h.s.r,c.e.c=Math.max(c.e.c,h.e.c),c.e.r=Math.max(c.e.r,h.e.r),a==-1&&(c.e.r=a=h.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=e[d].length;++p)if(!(typeof e[d][p]>"u")){var f={v:e[d][p]},v=a+d,x=o+p;if(c.s.r>v&&(c.s.r=v),c.s.c>x&&(c.s.c=x),c.e.r<v&&(c.e.r=v),c.e.c<x&&(c.e.c=x),e[d][p]&&typeof e[d][p]=="object"&&!Array.isArray(e[d][p])&&!(e[d][p]instanceof Date))f=e[d][p];else if(Array.isArray(f.v)&&(f.f=e[d][p][1],f.v=f.v[0]),f.v===null)if(f.f)f.t="n";else if(n.nullError)f.t="e",f.v=0;else if(n.sheetStubs)f.t="z";else continue;else typeof f.v=="number"?f.t="n":typeof f.v=="boolean"?f.t="b":f.v instanceof Date?(f.z=n.dateNF||di[14],n.cellDates?(f.t="d",f.w=wu(f.z,aa(f.v))):(f.t="n",f.v=aa(f.v),f.w=wu(f.z,f.v))):f.t="s";if(i)s[v]||(s[v]=[]),s[v][x]&&s[v][x].z&&(f.z=s[v][x].z),s[v][x]=f;else{var _=Nn({c:x,r:v});s[_]&&s[_].z&&(f.z=s[_].z),s[_]=f}}}return c.s.c<1e7&&(s["!ref"]=Ri(c)),s}function Pf(t,e){return _L(null,t,e)}function gQ(t){return t.read_shift(4,"i")}function Po(t,e){return e||(e=nt(4)),e.write_shift(4,t),e}function Rs(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Xi(t,e){var r=!1;return e==null&&(r=!0,e=nt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function xQ(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function yQ(t,e){return e||(e=nt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function l4(t,e){var r=t.l,n=t.read_shift(1),i=Rs(t),s=[],a={t:i,h:i};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)s.push(xQ(t));a.r=s}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}function vQ(t,e){var r=!1;return e==null&&(r=!0,e=nt(15+4*t.t.length)),e.write_shift(1,0),Xi(t.t,e),r?e.slice(0,e.l):e}var wQ=l4;function _Q(t,e){var r=!1;return e==null&&(r=!0,e=nt(23+4*t.t.length)),e.write_shift(1,1),Xi(t.t,e),e.write_shift(4,1),yQ({},e),r?e.slice(0,e.l):e}function lo(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Ph(t,e){return e==null&&(e=nt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Rh(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Lh(t,e){return e==null&&(e=nt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var bQ=Rs,bL=Xi;function c4(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function Px(t,e){var r=!1;return e==null&&(r=!0,e=nt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var SQ=Rs,F5=c4,u4=Px;function SL(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var i=n===0?Ix([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):qu(e,0)>>2;return r?i/100:i}function EL(t,e){e==null&&(e=nt(4));var r=0,n=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?i:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function AL(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function EQ(t,e){return e||(e=nt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var jh=AL,Rf=EQ;function Lf(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function _h(t,e){return(e||nt(8)).write_shift(8,t,"f")}function AQ(t){var e={},r=t.read_shift(1),n=r>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var c=jQ[i];c&&(e.rgb=DT(c));break;case 2:e.rgb=DT([a,o,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function Rx(t,e){if(e||(e=nt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function NQ(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function TQ(t,e){e||(e=nt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}var NL=2,wa=3,Pg=11,Lx=19,Rg=64,kQ=65,CQ=71,IQ=4108,PQ=4126,is=80,NT={1:{n:"CodePage",t:NL},2:{n:"Category",t:is},3:{n:"PresentationFormat",t:is},4:{n:"ByteCount",t:wa},5:{n:"LineCount",t:wa},6:{n:"ParagraphCount",t:wa},7:{n:"SlideCount",t:wa},8:{n:"NoteCount",t:wa},9:{n:"HiddenCount",t:wa},10:{n:"MultimediaClipCount",t:wa},11:{n:"ScaleCrop",t:Pg},12:{n:"HeadingPairs",t:IQ},13:{n:"TitlesOfParts",t:PQ},14:{n:"Manager",t:is},15:{n:"Company",t:is},16:{n:"LinksUpToDate",t:Pg},17:{n:"CharacterCount",t:wa},19:{n:"SharedDoc",t:Pg},22:{n:"HyperlinksChanged",t:Pg},23:{n:"AppVersion",t:wa,p:"version"},24:{n:"DigSig",t:kQ},26:{n:"ContentType",t:is},27:{n:"ContentStatus",t:is},28:{n:"Language",t:is},29:{n:"Version",t:is},255:{},2147483648:{n:"Locale",t:Lx},2147483651:{n:"Behavior",t:Lx},1919054434:{}},TT={1:{n:"CodePage",t:NL},2:{n:"Title",t:is},3:{n:"Subject",t:is},4:{n:"Author",t:is},5:{n:"Keywords",t:is},6:{n:"Comments",t:is},7:{n:"Template",t:is},8:{n:"LastAuthor",t:is},9:{n:"RevNumber",t:is},10:{n:"EditTime",t:Rg},11:{n:"LastPrinted",t:Rg},12:{n:"CreatedDate",t:Rg},13:{n:"ModifiedDate",t:Rg},14:{n:"PageCount",t:wa},15:{n:"WordCount",t:wa},16:{n:"CharCount",t:wa},17:{n:"Thumbnail",t:CQ},18:{n:"Application",t:is},19:{n:"DocSecurity",t:wa},255:{},2147483648:{n:"Locale",t:Lx},2147483651:{n:"Behavior",t:Lx},1919054434:{}};function RQ(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var LQ=RQ([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),jQ=oa(LQ),_m={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},FQ={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Lg={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function TL(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function kL(t,e){var r=qX(FQ),n=[],i;n[n.length]=ji,n[n.length]=Lt("Types",null,{xmlns:Gi.CT,"xmlns:xsd":Gi.xsd,"xmlns:xsi":Gi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Lt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(i=t[l][0],n[n.length]=Lt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:Lg[l][e.bookType]||Lg[l].xlsx}))},a=function(l){(t[l]||[]).forEach(function(c){n[n.length]=Lt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:Lg[l][e.bookType]||Lg[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(c){n[n.length]=Lt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:r[l][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var ln={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function CL(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function $d(t){var e=[ji,Lt("Relationships",null,{xmlns:Gi.RELS})];return fs(t["!id"]).forEach(function(r){e[e.length]=Lt("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function bn(t,e,r,n,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=n,i.Target=r,[ln.HLINK,ln.XPATH,ln.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}function DQ(t){var e=[ji];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function kT(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function MQ(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function OQ(t){var e=[ji];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(kT(t[r][0],t[r][1])),e.push(MQ("",t[r][0]));return e.push(kT("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function IL(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Ex.version+"</meta:generator></office:meta></office:document-meta>"}var sh=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Dv(t,e,r,n,i){i[t]!=null||e==null||e===""||(i[t]=e,e=En(e),n[n.length]=r?Lt(t,e,r):ls(t,e))}function PL(t,e){var r=e||{},n=[ji,Lt("cp:coreProperties",null,{"xmlns:cp":Gi.CORE_PROPS,"xmlns:dc":Gi.dc,"xmlns:dcterms":Gi.dcterms,"xmlns:dcmitype":Gi.dcmitype,"xmlns:xsi":Gi.xsi})],i={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&Dv("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:j5(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),t.ModifiedDate!=null&&Dv("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:j5(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var s=0;s!=sh.length;++s){var a=sh[s],o=r.Props&&r.Props[a[1]]!=null?r.Props[a[1]]:t?t[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&Dv(a[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var qd=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],RL=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function LL(t){var e=[],r=Lt;return t||(t={}),t.Application="SheetJS",e[e.length]=ji,e[e.length]=Lt("Properties",null,{xmlns:Gi.EXT_PROPS,"xmlns:vt":Gi.vt}),qd.forEach(function(n){if(t[n[1]]!==void 0){var i;switch(n[2]){case"string":i=En(String(t[n[1]]));break;case"bool":i=t[n[1]]?"true":"false";break}i!==void 0&&(e[e.length]=r(n[0],i))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+En(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function jL(t){var e=[ji,Lt("Properties",null,{xmlns:Gi.CUST_PROPS,"xmlns:vt":Gi.vt})];if(!t)return e.join("");var r=1;return fs(t).forEach(function(i){++r,e[e.length]=Lt("property",rQ(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:En(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var CT={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function BQ(t,e){var r=[];return fs(CT).map(function(n){for(var i=0;i<sh.length;++i)if(sh[i][1]==n)return sh[i];for(i=0;i<qd.length;++i)if(qd[i][1]==n)return qd[i];throw n}).forEach(function(n){if(t[n[1]]!=null){var i=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(ls(CT[n[1]]||n[1],i))}}),Lt("DocumentProperties",r.join(""),{xmlns:Ea.o})}function UQ(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return t&&fs(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var a=0;a<sh.length;++a)if(s==sh[a][1])return;for(a=0;a<qd.length;++a)if(s==qd[a][1])return;for(a=0;a<r.length;++a)if(s==r[a])return;var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(Lt(gT(s),o,{"dt:dt":l}))}}),e&&fs(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(Lt(gT(s),a,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Ea.o+'">'+i.join("")+"</"+n+">"}function VQ(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),i=(r-n)/Math.pow(2,32);n*=1e7,i*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),i+=s);var a=nt(8);return a.write_shift(4,n),a.write_shift(4,i),a}function IT(t,e){var r=nt(4),n=nt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=nt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=VQ(e);break;case 31:case 80:for(n=nt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return os([r,n])}var FL=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function zQ(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function PT(t,e,r){var n=nt(8),i=[],s=[],a=8,o=0,l=nt(8),c=nt(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),a+=8+l.length,!e){c=nt(8),c.write_shift(4,0),i.unshift(c);var h=[nt(4)];for(h[0].write_shift(4,t.length),o=0;o<t.length;++o){var d=t[o][0];for(l=nt(8+2*(d.length+1)+(d.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);h.push(l)}l=os(h),s.unshift(l),a+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(FL.indexOf(t[o][0])>-1||RL.indexOf(t[o][0])>-1)&&t[o][1]!=null){var p=t[o][1],f=0;if(e){f=+e[t[o][0]];var v=r[f];if(v.p=="version"&&typeof p=="string"){var x=p.split(".");p=(+x[0]<<16)+(+x[1]||0)}l=IT(v.t,p)}else{var _=zQ(p);_==-1&&(_=31,p=String(p)),l=IT(_,p)}s.push(l),c=nt(8),c.write_shift(4,e?f:2+o),i.push(c),a+=8+l.length}var w=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,w),w+=s[o].length;return n.write_shift(4,a),n.write_shift(4,s.length),os([n].concat(i).concat(s))}function RT(t,e,r,n,i,s){var a=nt(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,kn.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var l=PT(t,r,n);if(o.push(l),i){var c=PT(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(c)}return os(o)}function HQ(t,e){e||(e=nt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function $Q(t,e){return t.read_shift(e)===1}function zs(t,e){return e||(e=nt(2)),e.write_shift(2,+!!t),e}function DL(t){return t.read_shift(2,"u")}function Qa(t,e){return e||(e=nt(2)),e.write_shift(2,t),e}function ML(t,e,r){return r||(r=nt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function OL(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var a=n?t.read_shift(n,i):"";return a}function qQ(t){var e=t.t||"",r=nt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=nt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var i=[r,n];return os(i)}function WQ(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function KQ(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):WQ(t,n,r)}function GQ(t,e,r){if(r.biff>5)return KQ(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function BL(t,e,r){return r||(r=nt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function LT(t,e){e||(e=nt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function YQ(t){var e=nt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),s=i>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(r=0;r<a.length;++r)e.write_shift(4,a[r]);if(s==28)n=n.slice(1),LT(n,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));var o=i>-1?n.slice(0,i):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),s&8&&LT(i>-1?n.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function bh(t,e,r,n){return n||(n=nt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function XQ(t,e,r){var n=r.biff>8?4:2,i=t.read_shift(n),s=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[i,s,a]}function QQ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);return{s:{c:n,r:e},e:{c:i,r}}}function UL(t,e){return e||(e=nt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function h4(t,e,r){var n=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=nt(i);return s.write_shift(2,n),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function JQ(t,e){var r=!e||e.biff==8,n=nt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function ZQ(t,e){var r=!e||e.biff>=8?2:1,n=nt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function eJ(t,e){var r=nt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],i=0;i<t.length;++i)n[i]=qQ(t[i]);var s=os([r].concat(n));return s.parts=[r.length].concat(n.map(function(a){return a.length})),s}function tJ(){var t=nt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function rJ(t){var e=nt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function nJ(t,e){var r=t.name||"Arial",n=e&&e.biff==5,i=n?15+r.length:16+2*r.length,s=nt(i);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function iJ(t,e,r,n){var i=nt(10);return bh(t,e,n,i),i.write_shift(4,r),i}function sJ(t,e,r,n,i){var s=!i||i.biff==8,a=nt(8+ +s+(1+s)*r.length);return bh(t,e,n,a),a.write_shift(2,r.length),s&&a.write_shift(1,1),a.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),a}function aJ(t,e,r,n){var i=r&&r.biff==5;n||(n=nt(i?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(i?1:2,e.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}function oJ(t,e){var r=e.biff==8||!e.biff?4:2,n=nt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function jT(t,e,r,n){var i=r&&r.biff==5;n||(n=nt(i?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function lJ(t){var e=nt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function cJ(t,e,r,n,i,s){var a=nt(8);return bh(t,e,n,a),ML(r,s,a),a}function uJ(t,e,r,n){var i=nt(14);return bh(t,e,n,i),_h(r,i),i}function hJ(t,e,r){if(r.biff<8)return dJ(t,e,r);for(var n=[],i=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(XQ(t,r.biff>8?12:6,r));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return n}function dJ(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=OL(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function fJ(t){var e=nt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)UL(t[r],e);return e}function pJ(t){var e=nt(24),r=Yi(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(n[i],16));return os([e,YQ(t[1])])}function mJ(t){var e=t[1].Tooltip,r=nt(10+2*(e.length+1));r.write_shift(2,2048);var n=Yi(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<e.length;++i)r.write_shift(2,e.charCodeAt(i));return r.write_shift(2,0),r}function gJ(t){return t||(t=nt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function xJ(t,e,r){if(!r.cellStyles)return hl(t,e);var n=r&&r.biff>=12?4:2,i=t.read_shift(n),s=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s:i,e:s,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function yJ(t,e){var r=nt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function vJ(t){for(var e=nt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}function wJ(t,e,r){var n=nt(15);return Sm(n,t,e),n.write_shift(8,r,"f"),n}function _J(t,e,r){var n=nt(9);return Sm(n,t,e),n.write_shift(2,r),n}var bJ=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=e4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],h=wh(1);switch(l.type){case"base64":h=Ao(Ql(o));break;case"binary":h=Ao(o);break;case"buffer":case"array":h=o;break}Sa(h,0);var d=h.read_shift(1),p=!!(d&136),f=!1,v=!1;switch(d){case 2:break;case 3:break;case 48:f=!0,p=!0;break;case 49:f=!0,p=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var x=0,_=521;d==2&&(x=h.read_shift(2)),h.l+=3,d!=2&&(x=h.read_shift(4)),x>1048576&&(x=1e6),d!=2&&(_=h.read_shift(2));var w=h.read_shift(2),S=l.codepage||1252;d!=2&&(h.l+=16,h.read_shift(1),h[h.l]!==0&&(S=t[h[h.l]]),h.l+=1,h.l+=2),v&&(h.l+=36);for(var N=[],j={},z=Math.min(h.length,d==2?521:_-10-(f?264:0)),W=v?32:11;h.l<z&&h[h.l]!=13;)switch(j={},j.name=Ax.utils.decode(S,h.slice(h.l,h.l+W)).replace(/[\u0000\r\n].*$/g,""),h.l+=W,j.type=String.fromCharCode(h.read_shift(1)),d!=2&&!v&&(j.offset=h.read_shift(4)),j.len=h.read_shift(1),d==2&&(j.offset=h.read_shift(2)),j.dec=h.read_shift(1),j.name.length&&N.push(j),d!=2&&(h.l+=v?13:14),j.type){case"B":(!f||j.len!=8)&&l.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+j.type)}if(h[h.l]!==13&&(h.l=_-1),h.read_shift(1)!==13)throw new Error("DBF Terminator not found "+h.l+" "+h[h.l]);h.l=_;var b=0,T=0;for(c[0]=[],T=0;T!=N.length;++T)c[0][T]=N[T].name;for(;x-- >0;){if(h[h.l]===42){h.l+=w;continue}for(++h.l,c[++b]=[],T=0,T=0;T!=N.length;++T){var A=h.slice(h.l,h.l+N[T].len);h.l+=N[T].len,Sa(A,0);var F=Ax.utils.decode(S,A);switch(N[T].type){case"C":F.trim().length&&(c[b][T]=F.replace(/\s+$/,""));break;case"D":F.length===8?c[b][T]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):c[b][T]=F;break;case"F":c[b][T]=parseFloat(F.trim());break;case"+":case"I":c[b][T]=v?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":c[b][T]=!0;break;case"N":case"F":c[b][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));c[b][T]="##MEMO##"+(v?parseInt(F.trim(),10):A.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(c[b][T]=+F||0);break;case"@":c[b][T]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":c[b][T]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":c[b][T]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[b][T]=-A.read_shift(-8,"f");break;case"B":if(f&&N[T].len==8){c[b][T]=A.read_shift(8,"f");break}case"G":case"P":A.l+=N[T].len;break;case"0":if(N[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[T].type)}}}if(d!=2&&h.l<h.length&&h[h.l++]!=26)throw new Error("DBF EOF Marker missing "+(h.l-1)+" of "+h.length+" "+h[h.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=N,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var h=Pf(r(o,c),c);return h["!cols"]=c.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete c.DBF,h}function i(o,l){try{return Ih(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&Mp(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var h=sa(),d=Ox(o,{header:1,raw:!0,cellDates:!0}),p=d[0],f=d.slice(1),v=o["!cols"]||[],x=0,_=0,w=0,S=1;for(x=0;x<p.length;++x){if(((v[x]||{}).DBF||{}).name){p[x]=v[x].DBF.name,++w;continue}if(p[x]!=null){if(++w,typeof p[x]=="number"&&(p[x]=p[x].toString(10)),typeof p[x]!="string")throw new Error("DBF Invalid column name "+p[x]+" |"+typeof p[x]+"|");if(p.indexOf(p[x])!==x){for(_=0;_<1024;++_)if(p.indexOf(p[x]+"_"+_)==-1){p[x]+="_"+_;break}}}}var N=Gn(o["!ref"]),j=[],z=[],W=[];for(x=0;x<=N.e.c-N.s.c;++x){var b="",T="",A=0,F=[];for(_=0;_<f.length;++_)f[_][x]!=null&&F.push(f[_][x]);if(F.length==0||p[x]==null){j[x]="?";continue}for(_=0;_<F.length;++_){switch(typeof F[_]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=F[_]instanceof Date?"D":"C";break;default:T="C"}A=Math.max(A,String(F[_]).length),b=b&&b!=T?"C":T}A>250&&(A=250),T=((v[x]||{}).DBF||{}).type,T=="C"&&v[x].DBF.len>A&&(A=v[x].DBF.len),b=="B"&&T=="N"&&(b="N",W[x]=v[x].DBF.dec,A=v[x].DBF.len),z[x]=b=="C"||T=="N"?A:s[b]||0,S+=z[x],j[x]=b}var k=h.next(32);for(k.write_shift(4,318902576),k.write_shift(4,f.length),k.write_shift(2,296+32*w),k.write_shift(2,S),x=0;x<4;++x)k.write_shift(4,0);for(k.write_shift(4,0|(+e[z8]||3)<<8),x=0,_=0;x<p.length;++x)if(p[x]!=null){var L=h.next(32),R=(p[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);L.write_shift(1,R,"sbcs"),L.write_shift(1,j[x]=="?"?"C":j[x],"sbcs"),L.write_shift(4,_),L.write_shift(1,z[x]||s[j[x]]||0),L.write_shift(1,W[x]||0),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(1,0),L.write_shift(4,0),L.write_shift(4,0),_+=z[x]||s[j[x]]||0}var le=h.next(264);for(le.write_shift(4,13),x=0;x<65;++x)le.write_shift(4,0);for(x=0;x<f.length;++x){var ve=h.next(S);for(ve.write_shift(1,0),_=0;_<p.length;++_)if(p[_]!=null)switch(j[_]){case"L":ve.write_shift(1,f[x][_]==null?63:f[x][_]?84:70);break;case"B":ve.write_shift(8,f[x][_]||0,"f");break;case"N":var ge="0";for(typeof f[x][_]=="number"&&(ge=f[x][_].toFixed(W[_]||0)),w=0;w<z[_]-ge.length;++w)ve.write_shift(1,32);ve.write_shift(1,ge,"sbcs");break;case"D":f[x][_]?(ve.write_shift(4,("0000"+f[x][_].getFullYear()).slice(-4),"sbcs"),ve.write_shift(2,("00"+(f[x][_].getMonth()+1)).slice(-2),"sbcs"),ve.write_shift(2,("00"+f[x][_].getDate()).slice(-2),"sbcs")):ve.write_shift(8,"00000000","sbcs");break;case"C":var ye=String(f[x][_]!=null?f[x][_]:"").slice(0,z[_]);for(ve.write_shift(1,ye,"sbcs"),w=0;w<z[_]-ye.length;++w)ve.write_shift(1,32);break}}return h.next(1).write_shift(1,26),h.end()}return{to_workbook:i,to_sheet:n,from_sheet:a}}(),SJ=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+fs(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,f){var v=t[f];return typeof v=="number"?iT(v):v},n=function(p,f,v){var x=f.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return x==59?p:iT(x)};t["|"]=254;function i(p,f){switch(f.type){case"base64":return s(Ql(p),f);case"binary":return s(p,f);case"buffer":return s(hn&&Buffer.isBuffer(p)?p.toString("binary"):ym(p),f);case"array":return s(V2(p),f)}throw new Error("Unrecognized type "+f.type)}function s(p,f){var v=p.split(/[\n\r]+/),x=-1,_=-1,w=0,S=0,N=[],j=[],z=null,W={},b=[],T=[],A=[],F=0,k;for(+f.codepage>=0&&Mp(+f.codepage);w!==v.length;++w){F=0;var L=v[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),R=L.replace(/;;/g,"\0").split(";").map(function(H){return H.replace(/\u0000/g,";")}),le=R[0],ve;if(L.length>0)switch(le){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":R[1].charAt(0)=="P"&&j.push(L.slice(3).replace(/;;/g,";"));break;case"C":var ge=!1,ye=!1,ce=!1,be=!1,Me=-1,Le=-1;for(S=1;S<R.length;++S)switch(R[S].charAt(0)){case"A":break;case"X":_=parseInt(R[S].slice(1))-1,ye=!0;break;case"Y":for(x=parseInt(R[S].slice(1))-1,ye||(_=0),k=N.length;k<=x;++k)N[k]=[];break;case"K":ve=R[S].slice(1),ve.charAt(0)==='"'?ve=ve.slice(1,ve.length-1):ve==="TRUE"?ve=!0:ve==="FALSE"?ve=!1:isNaN(Bl(ve))?isNaN(Bp(ve).getDate())||(ve=qs(ve)):(ve=Bl(ve),z!==null&&eL(z)&&(ve=iL(ve))),ge=!0;break;case"E":be=!0;var I=_Z(R[S].slice(1),{r:x,c:_});N[x][_]=[N[x][_],I];break;case"S":ce=!0,N[x][_]=[N[x][_],"S5S"];break;case"G":break;case"R":Me=parseInt(R[S].slice(1))-1;break;case"C":Le=parseInt(R[S].slice(1))-1;break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+L)}if(ge&&(N[x][_]&&N[x][_].length==2?N[x][_][0]=ve:N[x][_]=ve,z=null),ce){if(be)throw new Error("SYLK shared formula cannot have own formula");var B=Me>-1&&N[Me][Le];if(!B||!B[1])throw new Error("SYLK shared formula cannot find base");N[x][_][1]=bZ(B[1],{r:x-Me,c:_-Le})}break;case"F":var U=0;for(S=1;S<R.length;++S)switch(R[S].charAt(0)){case"X":_=parseInt(R[S].slice(1))-1,++U;break;case"Y":for(x=parseInt(R[S].slice(1))-1,k=N.length;k<=x;++k)N[k]=[];break;case"M":F=parseInt(R[S].slice(1))/20;break;case"F":break;case"G":break;case"P":z=j[parseInt(R[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=R[S].slice(1).split(" "),k=parseInt(A[0],10);k<=parseInt(A[1],10);++k)F=parseInt(A[2],10),T[k-1]=F===0?{hidden:!0}:{wch:F},d4(T[k-1]);break;case"C":_=parseInt(R[S].slice(1))-1,T[_]||(T[_]={});break;case"R":x=parseInt(R[S].slice(1))-1,b[x]||(b[x]={}),F>0?(b[x].hpt=F,b[x].hpx=qL(F)):F===0&&(b[x].hidden=!0);break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+L)}U<1&&(z=null);break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+L)}}return b.length>0&&(W["!rows"]=b),T.length>0&&(W["!cols"]=T),f&&f.sheetRows&&(N=N.slice(0,f.sheetRows)),[N,W]}function a(p,f){var v=i(p,f),x=v[0],_=v[1],w=Pf(x,f);return fs(_).forEach(function(S){w[S]=_[S]}),w}function o(p,f){return Ih(a(p,f),f)}function l(p,f,v,x){var _="C;Y"+(v+1)+";X"+(x+1)+";K";switch(p.t){case"n":_+=p.v||0,p.f&&!p.F&&(_+=";E"+p4(p.f,{r:v,c:x}));break;case"b":_+=p.v?"TRUE":"FALSE";break;case"e":_+=p.w||p.v;break;case"d":_+='"'+(p.w||p.v)+'"';break;case"s":_+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return _}function c(p,f){f.forEach(function(v,x){var _="F;W"+(x+1)+" "+(x+1)+" ";v.hidden?_+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=jx(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=Fx(v.wpx)),typeof v.wch=="number"&&(_+=Math.round(v.wch))),_.charAt(_.length-1)!=" "&&p.push(_)})}function h(p,f){f.forEach(function(v,x){var _="F;";v.hidden?_+="M0;":v.hpt?_+="M"+20*v.hpt+";":v.hpx&&(_+="M"+20*Dx(v.hpx)+";"),_.length>2&&p.push(_+"R"+(x+1))})}function d(p,f){var v=["ID;PWXL;N;E"],x=[],_=Gn(p["!ref"]),w,S=Array.isArray(p),N=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),p["!cols"]&&c(v,p["!cols"]),p["!rows"]&&h(v,p["!rows"]),v.push("B;Y"+(_.e.r-_.s.r+1)+";X"+(_.e.c-_.s.c+1)+";D"+[_.s.c,_.s.r,_.e.c,_.e.r].join(" "));for(var j=_.s.r;j<=_.e.r;++j)for(var z=_.s.c;z<=_.e.c;++z){var W=Nn({r:j,c:z});w=S?(p[j]||[])[z]:p[W],!(!w||w.v==null&&(!w.f||w.F))&&x.push(l(w,p,j,z))}return v.join(N)+N+x.join(N)+N+"E"+N}return{to_workbook:o,to_sheet:a,from_sheet:d}}(),EJ=function(){function t(s,a){switch(a.type){case"base64":return e(Ql(s),a);case"binary":return e(s,a);case"buffer":return e(hn&&Buffer.isBuffer(s)?s.toString("binary"):ym(s),a);case"array":return e(V2(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),l=-1,c=-1,h=0,d=[];h!==o.length;++h){if(o[h].trim()==="BOT"){d[++l]=[],c=0;continue}if(!(l<0)){var p=o[h].trim().split(","),f=p[0],v=p[1];++h;for(var x=o[h]||"";(x.match(/["]/g)||[]).length&1&&h<o.length-1;)x+=`
`+o[++h];switch(x=x.trim(),+f){case-1:if(x==="BOT"){d[++l]=[],c=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?d[l][c]=!0:x==="FALSE"?d[l][c]=!1:isNaN(Bl(v))?isNaN(Bp(v).getDate())?d[l][c]=v:d[l][c]=qs(v):d[l][c]=Bl(v),++c;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),d[l][c++]=x!==""?x:null;break}if(x==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function r(s,a){return Pf(t(s,a),a)}function n(s,a){return Ih(r(s,a),a)}var i=function(){var s=function(l,c,h,d,p){l.push(c),l.push(h+","+d),l.push('"'+p.replace(/"/g,'""')+'"')},a=function(l,c,h,d){l.push(c+","+h),l.push(c==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var c=[],h=Gn(l["!ref"]),d,p=Array.isArray(l);s(c,"TABLE",0,1,"sheetjs"),s(c,"VECTORS",0,h.e.r-h.s.r+1,""),s(c,"TUPLES",0,h.e.c-h.s.c+1,""),s(c,"DATA",0,0,"");for(var f=h.s.r;f<=h.e.r;++f){a(c,-1,0,"BOT");for(var v=h.s.c;v<=h.e.c;++v){var x=Nn({r:f,c:v});if(d=p?(l[f]||[])[v]:l[x],!d){a(c,1,0,"");continue}switch(d.t){case"n":var _=d.w;!_&&d.v!=null&&(_=d.v),_==null?d.f&&!d.F?a(c,1,0,"="+d.f):a(c,1,0,""):a(c,0,_,"V");break;case"b":a(c,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=wu(d.z||di[14],aa(qs(d.v)))),a(c,0,d.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var w=`\r
`,S=c.join(w);return S}}();return{to_workbook:n,to_sheet:r,from_sheet:i}}(),VL=function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,p){for(var f=d.split(`
`),v=-1,x=-1,_=0,w=[];_!==f.length;++_){var S=f[_].trim().split(":");if(S[0]==="cell"){var N=Yi(S[1]);if(w.length<=N.r)for(v=w.length;v<=N.r;++v)w[v]||(w[v]=[]);switch(v=N.r,x=N.c,S[2]){case"t":w[v][x]=t(S[3]);break;case"v":w[v][x]=+S[3];break;case"vtf":var j=S[S.length-1];case"vtc":switch(S[3]){case"nl":w[v][x]=!!+S[4];break;default:w[v][x]=+S[4];break}S[2]=="vtf"&&(w[v][x]=[w[v][x],j])}}}return p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),w}function n(d,p){return Pf(r(d,p),p)}function i(d,p){return Ih(n(d,p),p)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(d){if(!d||!d["!ref"])return"";for(var p=[],f=[],v,x="",_=Fa(d["!ref"]),w=Array.isArray(d),S=_.s.r;S<=_.e.r;++S)for(var N=_.s.c;N<=_.e.c;++N)if(x=Nn({r:S,c:N}),v=w?(d[S]||[])[N]:d[x],!(!v||v.v==null||v.t==="z")){switch(f=["cell",x,"t"],v.t){case"s":case"str":f.push(e(v.v));break;case"n":v.f?(f[2]="vtf",f[3]="n",f[4]=v.v,f[5]=e(v.f)):(f[2]="v",f[3]=v.v);break;case"b":f[2]="vt"+(v.f?"f":"c"),f[3]="nl",f[4]=v.v?"1":"0",f[5]=e(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var j=aa(qs(v.v));f[2]="vtc",f[3]="nd",f[4]=""+j,f[5]=v.w||wu(v.z||di[14],j);break;case"e":continue}p.push(f.join(":"))}return p.push("sheet:c:"+(_.e.c-_.s.c+1)+":r:"+(_.e.r-_.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function h(d){return[s,a,o,a,c(d),l].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:h}}(),AJ=function(){function t(h,d,p,f,v){v.raw?d[p][f]=h:h===""||(h==="TRUE"?d[p][f]=!0:h==="FALSE"?d[p][f]=!1:isNaN(Bl(h))?isNaN(Bp(h).getDate())?d[p][f]=h:d[p][f]=qs(h):d[p][f]=Bl(h))}function e(h,d){var p=d||{},f=[];if(!h||h.length===0)return f;for(var v=h.split(/[\r\n]/),x=v.length-1;x>=0&&v[x].length===0;)--x;for(var _=10,w=0,S=0;S<=x;++S)w=v[S].indexOf(" "),w==-1?w=v[S].length:w++,_=Math.max(_,w);for(S=0;S<=x;++S){f[S]=[];var N=0;for(t(v[S].slice(0,_).trim(),f,S,N,p),N=1;N<=(v[S].length-_)/10+1;++N)t(v[S].slice(_+(N-1)*10,_+N*10).trim(),f,S,N,p)}return p.sheetRows&&(f=f.slice(0,p.sheetRows)),f}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(h){for(var d={},p=!1,f=0,v=0;f<h.length;++f)(v=h.charCodeAt(f))==34?p=!p:!p&&v in r&&(d[v]=(d[v]||0)+1);v=[];for(f in d)Object.prototype.hasOwnProperty.call(d,f)&&v.push([d[f],f]);if(!v.length){d=n;for(f in d)Object.prototype.hasOwnProperty.call(d,f)&&v.push([d[f],f])}return v.sort(function(x,_){return x[0]-_[0]||n[x[1]]-n[_[1]]}),r[v.pop()[1]]||44}function s(h,d){var p=d||{},f="",v=p.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};h.slice(0,4)=="sep="?h.charCodeAt(5)==13&&h.charCodeAt(6)==10?(f=h.charAt(4),h=h.slice(7)):h.charCodeAt(5)==13||h.charCodeAt(5)==10?(f=h.charAt(4),h=h.slice(6)):f=i(h.slice(0,1024)):p&&p.FS?f=p.FS:f=i(h.slice(0,1024));var _=0,w=0,S=0,N=0,j=0,z=f.charCodeAt(0),W=!1,b=0,T=h.charCodeAt(0);h=h.replace(/\r\n/mg,`
`);var A=p.dateNF!=null?VX(p.dateNF):null;function F(){var k=h.slice(N,j),L={};if(k.charAt(0)=='"'&&k.charAt(k.length-1)=='"'&&(k=k.slice(1,-1).replace(/""/g,'"')),k.length===0)L.t="z";else if(p.raw)L.t="s",L.v=k;else if(k.trim().length===0)L.t="s",L.v=k;else if(k.charCodeAt(0)==61)k.charCodeAt(1)==34&&k.charCodeAt(k.length-1)==34?(L.t="s",L.v=k.slice(2,-1).replace(/""/g,'"')):SZ(k)?(L.t="n",L.f=k.slice(1)):(L.t="s",L.v=k);else if(k=="TRUE")L.t="b",L.v=!0;else if(k=="FALSE")L.t="b",L.v=!1;else if(!isNaN(S=Bl(k)))L.t="n",p.cellText!==!1&&(L.w=k),L.v=S;else if(!isNaN(Bp(k).getDate())||A&&k.match(A)){L.z=p.dateNF||di[14];var R=0;A&&k.match(A)&&(k=zX(k,p.dateNF,k.match(A)||[]),R=1),p.cellDates?(L.t="d",L.v=qs(k,R)):(L.t="n",L.v=aa(qs(k,R))),p.cellText!==!1&&(L.w=wu(L.z,L.v instanceof Date?aa(L.v):L.v)),p.cellNF||delete L.z}else L.t="s",L.v=k;if(L.t=="z"||(p.dense?(v[_]||(v[_]=[]),v[_][w]=L):v[Nn({c:w,r:_})]=L),N=j+1,T=h.charCodeAt(N),x.e.c<w&&(x.e.c=w),x.e.r<_&&(x.e.r=_),b==z)++w;else if(w=0,++_,p.sheetRows&&p.sheetRows<=_)return!0}e:for(;j<h.length;++j)switch(b=h.charCodeAt(j)){case 34:T===34&&(W=!W);break;case z:case 10:case 13:if(!W&&F())break e;break}return j-N>0&&F(),v["!ref"]=Ri(x),v}function a(h,d){return!(d&&d.PRN)||d.FS||h.slice(0,4)=="sep="||h.indexOf("	")>=0||h.indexOf(",")>=0||h.indexOf(";")>=0?s(h,d):Pf(e(h,d),d)}function o(h,d){var p="",f=d.type=="string"?[0,0,0,0]:Mne(h,d);switch(d.type){case"base64":p=Ql(h);break;case"binary":p=h;break;case"buffer":d.codepage==65001?p=h.toString("utf8"):d.codepage&&typeof Ax<"u"||(p=hn&&Buffer.isBuffer(h)?h.toString("binary"):ym(h));break;case"array":p=V2(h);break;case"string":p=h;break;default:throw new Error("Unrecognized type "+d.type)}return f[0]==239&&f[1]==187&&f[2]==191?p=Y0(p.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?p=Y0(p):d.type=="binary"&&typeof Ax<"u",p.slice(0,19)=="socialcalc:version:"?VL.to_sheet(d.type=="string"?p:Y0(p),d):a(p,d)}function l(h,d){return Ih(o(h,d),d)}function c(h){for(var d=[],p=Gn(h["!ref"]),f,v=Array.isArray(h),x=p.s.r;x<=p.e.r;++x){for(var _=[],w=p.s.c;w<=p.e.c;++w){var S=Nn({r:x,c:w});if(f=v?(h[x]||[])[w]:h[S],!f||f.v==null){_.push("          ");continue}for(var N=(f.w||(Jl(f),f.w)||"").slice(0,10);N.length<10;)N+=" ";_.push(N+(w===0?" ":""))}d.push(_.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}(),FT=function(){function t(I,B,U){if(I){Sa(I,I.l||0);for(var H=U.Enum||Me;I.l<I.length;){var te=I.read_shift(2),fe=H[te]||H[65535],Ae=I.read_shift(2),Te=I.l+Ae,Pe=fe.f&&fe.f(I,Ae,U);if(I.l=Te,B(Pe,fe,te))return}}}function e(I,B){switch(B.type){case"base64":return r(Ao(Ql(I)),B);case"binary":return r(Ao(I),B);case"buffer":case"array":return r(I,B)}throw"Unsupported type "+B.type}function r(I,B){if(!I)return I;var U=B||{},H=U.dense?[]:{},te="Sheet1",fe="",Ae=0,Te={},Pe=[],et=[],Qe={s:{r:0,c:0},e:{r:0,c:0}},dt=U.sheetRows||0;if(I[2]==0&&(I[3]==8||I[3]==9)&&I.length>=16&&I[14]==5&&I[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(I[2]==2)U.Enum=Me,t(I,function(ne,we,me){switch(me){case 0:U.vers=ne,ne>=4096&&(U.qpro=!0);break;case 6:Qe=ne;break;case 204:ne&&(fe=ne);break;case 222:fe=ne;break;case 15:case 51:U.qpro||(ne[1].v=ne[1].v.slice(1));case 13:case 14:case 16:me==14&&(ne[2]&112)==112&&(ne[2]&15)>1&&(ne[2]&15)<15&&(ne[1].z=U.dateNF||di[14],U.cellDates&&(ne[1].t="d",ne[1].v=iL(ne[1].v))),U.qpro&&ne[3]>Ae&&(H["!ref"]=Ri(Qe),Te[te]=H,Pe.push(te),H=U.dense?[]:{},Qe={s:{r:0,c:0},e:{r:0,c:0}},Ae=ne[3],te=fe||"Sheet"+(Ae+1),fe="");var Ke=U.dense?(H[ne[0].r]||[])[ne[0].c]:H[Nn(ne[0])];if(Ke){Ke.t=ne[1].t,Ke.v=ne[1].v,ne[1].z!=null&&(Ke.z=ne[1].z),ne[1].f!=null&&(Ke.f=ne[1].f);break}U.dense?(H[ne[0].r]||(H[ne[0].r]=[]),H[ne[0].r][ne[0].c]=ne[1]):H[Nn(ne[0])]=ne[1];break}},U);else if(I[2]==26||I[2]==14)U.Enum=Le,I[2]==14&&(U.qpro=!0,I.l=0),t(I,function(ne,we,me){switch(me){case 204:te=ne;break;case 22:ne[1].v=ne[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ne[3]>Ae&&(H["!ref"]=Ri(Qe),Te[te]=H,Pe.push(te),H=U.dense?[]:{},Qe={s:{r:0,c:0},e:{r:0,c:0}},Ae=ne[3],te="Sheet"+(Ae+1)),dt>0&&ne[0].r>=dt)break;U.dense?(H[ne[0].r]||(H[ne[0].r]=[]),H[ne[0].r][ne[0].c]=ne[1]):H[Nn(ne[0])]=ne[1],Qe.e.c<ne[0].c&&(Qe.e.c=ne[0].c),Qe.e.r<ne[0].r&&(Qe.e.r=ne[0].r);break;case 27:ne[14e3]&&(et[ne[14e3][0]]=ne[14e3][1]);break;case 1537:et[ne[0]]=ne[1],ne[0]==Ae&&(te=ne[1]);break}},U);else throw new Error("Unrecognized LOTUS BOF "+I[2]);if(H["!ref"]=Ri(Qe),Te[fe||te]=H,Pe.push(fe||te),!et.length)return{SheetNames:Pe,Sheets:Te};for(var wt={},ae=[],Ie=0;Ie<et.length;++Ie)Te[Pe[Ie]]?(ae.push(et[Ie]||Pe[Ie]),wt[et[Ie]]=Te[et[Ie]]||Te[Pe[Ie]]):(ae.push(et[Ie]),wt[et[Ie]]={"!ref":"A1"});return{SheetNames:ae,Sheets:wt}}function n(I,B){var U=B||{};if(+U.codepage>=0&&Mp(+U.codepage),U.type=="string")throw new Error("Cannot write WK1 to JS string");var H=sa(),te=Gn(I["!ref"]),fe=Array.isArray(I),Ae=[];jt(H,0,s(1030)),jt(H,6,l(te));for(var Te=Math.min(te.e.r,8191),Pe=te.s.r;Pe<=Te;++Pe)for(var et=us(Pe),Qe=te.s.c;Qe<=te.e.c;++Qe){Pe===te.s.r&&(Ae[Qe]=Ps(Qe));var dt=Ae[Qe]+et,wt=fe?(I[Pe]||[])[Qe]:I[dt];if(!(!wt||wt.t=="z"))if(wt.t=="n")(wt.v|0)==wt.v&&wt.v>=-32768&&wt.v<=32767?jt(H,13,f(Pe,Qe,wt.v)):jt(H,14,x(Pe,Qe,wt.v));else{var ae=Jl(wt);jt(H,15,d(Pe,Qe,ae.slice(0,239)))}}return jt(H,1),H.end()}function i(I,B){var U=B||{};if(+U.codepage>=0&&Mp(+U.codepage),U.type=="string")throw new Error("Cannot write WK3 to JS string");var H=sa();jt(H,0,a(I));for(var te=0,fe=0;te<I.SheetNames.length;++te)(I.Sheets[I.SheetNames[te]]||{})["!ref"]&&jt(H,27,be(I.SheetNames[te],fe++));var Ae=0;for(te=0;te<I.SheetNames.length;++te){var Te=I.Sheets[I.SheetNames[te]];if(!(!Te||!Te["!ref"])){for(var Pe=Gn(Te["!ref"]),et=Array.isArray(Te),Qe=[],dt=Math.min(Pe.e.r,8191),wt=Pe.s.r;wt<=dt;++wt)for(var ae=us(wt),Ie=Pe.s.c;Ie<=Pe.e.c;++Ie){wt===Pe.s.r&&(Qe[Ie]=Ps(Ie));var ne=Qe[Ie]+ae,we=et?(Te[wt]||[])[Ie]:Te[ne];if(!(!we||we.t=="z"))if(we.t=="n")jt(H,23,F(wt,Ie,Ae,we.v));else{var me=Jl(we);jt(H,22,b(wt,Ie,Ae,me.slice(0,239)))}}++Ae}}return jt(H,1),H.end()}function s(I){var B=nt(2);return B.write_shift(2,I),B}function a(I){var B=nt(26);B.write_shift(2,4096),B.write_shift(2,4),B.write_shift(4,0);for(var U=0,H=0,te=0,fe=0;fe<I.SheetNames.length;++fe){var Ae=I.SheetNames[fe],Te=I.Sheets[Ae];if(!(!Te||!Te["!ref"])){++te;var Pe=Fa(Te["!ref"]);U<Pe.e.r&&(U=Pe.e.r),H<Pe.e.c&&(H=Pe.e.c)}}return U>8191&&(U=8191),B.write_shift(2,U),B.write_shift(1,te),B.write_shift(1,H),B.write_shift(2,0),B.write_shift(2,0),B.write_shift(1,1),B.write_shift(1,2),B.write_shift(4,0),B.write_shift(4,0),B}function o(I,B,U){var H={s:{c:0,r:0},e:{c:0,r:0}};return B==8&&U.qpro?(H.s.c=I.read_shift(1),I.l++,H.s.r=I.read_shift(2),H.e.c=I.read_shift(1),I.l++,H.e.r=I.read_shift(2),H):(H.s.c=I.read_shift(2),H.s.r=I.read_shift(2),B==12&&U.qpro&&(I.l+=2),H.e.c=I.read_shift(2),H.e.r=I.read_shift(2),B==12&&U.qpro&&(I.l+=2),H.s.c==65535&&(H.s.c=H.e.c=H.s.r=H.e.r=0),H)}function l(I){var B=nt(8);return B.write_shift(2,I.s.c),B.write_shift(2,I.s.r),B.write_shift(2,I.e.c),B.write_shift(2,I.e.r),B}function c(I,B,U){var H=[{c:0,r:0},{t:"n",v:0},0,0];return U.qpro&&U.vers!=20768?(H[0].c=I.read_shift(1),H[3]=I.read_shift(1),H[0].r=I.read_shift(2),I.l+=2):(H[2]=I.read_shift(1),H[0].c=I.read_shift(2),H[0].r=I.read_shift(2)),H}function h(I,B,U){var H=I.l+B,te=c(I,B,U);if(te[1].t="s",U.vers==20768){I.l++;var fe=I.read_shift(1);return te[1].v=I.read_shift(fe,"utf8"),te}return U.qpro&&I.l++,te[1].v=I.read_shift(H-I.l,"cstr"),te}function d(I,B,U){var H=nt(7+U.length);H.write_shift(1,255),H.write_shift(2,B),H.write_shift(2,I),H.write_shift(1,39);for(var te=0;te<H.length;++te){var fe=U.charCodeAt(te);H.write_shift(1,fe>=128?95:fe)}return H.write_shift(1,0),H}function p(I,B,U){var H=c(I,B,U);return H[1].v=I.read_shift(2,"i"),H}function f(I,B,U){var H=nt(7);return H.write_shift(1,255),H.write_shift(2,B),H.write_shift(2,I),H.write_shift(2,U,"i"),H}function v(I,B,U){var H=c(I,B,U);return H[1].v=I.read_shift(8,"f"),H}function x(I,B,U){var H=nt(13);return H.write_shift(1,255),H.write_shift(2,B),H.write_shift(2,I),H.write_shift(8,U,"f"),H}function _(I,B,U){var H=I.l+B,te=c(I,B,U);if(te[1].v=I.read_shift(8,"f"),U.qpro)I.l=H;else{var fe=I.read_shift(2);j(I.slice(I.l,I.l+fe),te),I.l+=fe}return te}function w(I,B,U){var H=B&32768;return B&=-32769,B=(H?I:0)+(B>=8192?B-16384:B),(H?"":"$")+(U?Ps(B):us(B))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function j(I,B){Sa(I,0);for(var U=[],H=0,te="",fe="",Ae="",Te="";I.l<I.length;){var Pe=I[I.l++];switch(Pe){case 0:U.push(I.read_shift(8,"f"));break;case 1:fe=w(B[0].c,I.read_shift(2),!0),te=w(B[0].r,I.read_shift(2),!1),U.push(fe+te);break;case 2:{var et=w(B[0].c,I.read_shift(2),!0),Qe=w(B[0].r,I.read_shift(2),!1);fe=w(B[0].c,I.read_shift(2),!0),te=w(B[0].r,I.read_shift(2),!1),U.push(et+Qe+":"+fe+te)}break;case 3:if(I.l<I.length){console.error("WK1 premature formula end");return}break;case 4:U.push("("+U.pop()+")");break;case 5:U.push(I.read_shift(2));break;case 6:{for(var dt="";Pe=I[I.l++];)dt+=String.fromCharCode(Pe);U.push('"'+dt.replace(/"/g,'""')+'"')}break;case 8:U.push("-"+U.pop());break;case 23:U.push("+"+U.pop());break;case 22:U.push("NOT("+U.pop()+")");break;case 20:case 21:Te=U.pop(),Ae=U.pop(),U.push(["AND","OR"][Pe-20]+"("+Ae+","+Te+")");break;default:if(Pe<32&&N[Pe])Te=U.pop(),Ae=U.pop(),U.push(Ae+N[Pe]+Te);else if(S[Pe]){if(H=S[Pe][1],H==69&&(H=I[I.l++]),H>U.length){console.error("WK1 bad formula parse 0x"+Pe.toString(16)+":|"+U.join("|")+"|");return}var wt=U.slice(-H);U.length-=H,U.push(S[Pe][0]+"("+wt.join(",")+")")}else return Pe<=7?console.error("WK1 invalid opcode "+Pe.toString(16)):Pe<=24?console.error("WK1 unsupported op "+Pe.toString(16)):Pe<=30?console.error("WK1 invalid opcode "+Pe.toString(16)):Pe<=115?console.error("WK1 unsupported function opcode "+Pe.toString(16)):console.error("WK1 unrecognized opcode "+Pe.toString(16))}}U.length==1?B[1].f=""+U[0]:console.error("WK1 bad formula parse |"+U.join("|")+"|")}function z(I){var B=[{c:0,r:0},{t:"n",v:0},0];return B[0].r=I.read_shift(2),B[3]=I[I.l++],B[0].c=I[I.l++],B}function W(I,B){var U=z(I);return U[1].t="s",U[1].v=I.read_shift(B-4,"cstr"),U}function b(I,B,U,H){var te=nt(6+H.length);te.write_shift(2,I),te.write_shift(1,U),te.write_shift(1,B),te.write_shift(1,39);for(var fe=0;fe<H.length;++fe){var Ae=H.charCodeAt(fe);te.write_shift(1,Ae>=128?95:Ae)}return te.write_shift(1,0),te}function T(I,B){var U=z(I);U[1].v=I.read_shift(2);var H=U[1].v>>1;if(U[1].v&1)switch(H&7){case 0:H=(H>>3)*5e3;break;case 1:H=(H>>3)*500;break;case 2:H=(H>>3)/20;break;case 3:H=(H>>3)/200;break;case 4:H=(H>>3)/2e3;break;case 5:H=(H>>3)/2e4;break;case 6:H=(H>>3)/16;break;case 7:H=(H>>3)/64;break}return U[1].v=H,U}function A(I,B){var U=z(I),H=I.read_shift(4),te=I.read_shift(4),fe=I.read_shift(2);if(fe==65535)return H===0&&te===3221225472?(U[1].t="e",U[1].v=15):H===0&&te===3489660928?(U[1].t="e",U[1].v=42):U[1].v=0,U;var Ae=fe&32768;return fe=(fe&32767)-16446,U[1].v=(1-Ae*2)*(te*Math.pow(2,fe+32)+H*Math.pow(2,fe)),U}function F(I,B,U,H){var te=nt(14);if(te.write_shift(2,I),te.write_shift(1,U),te.write_shift(1,B),H==0)return te.write_shift(4,0),te.write_shift(4,0),te.write_shift(2,65535),te;var fe=0,Ae=0,Te=0,Pe=0;return H<0&&(fe=1,H=-H),Ae=Math.log2(H)|0,H/=Math.pow(2,Ae-31),Pe=H>>>0,Pe&2147483648||(H/=2,++Ae,Pe=H>>>0),H-=Pe,Pe|=2147483648,Pe>>>=0,H*=Math.pow(2,32),Te=H>>>0,te.write_shift(4,Te),te.write_shift(4,Pe),Ae+=16383+(fe?32768:0),te.write_shift(2,Ae),te}function k(I,B){var U=A(I);return I.l+=B-14,U}function L(I,B){var U=z(I),H=I.read_shift(4);return U[1].v=H>>6,U}function R(I,B){var U=z(I),H=I.read_shift(8,"f");return U[1].v=H,U}function le(I,B){var U=R(I);return I.l+=B-10,U}function ve(I,B){return I[I.l+B-1]==0?I.read_shift(B,"cstr"):""}function ge(I,B){var U=I[I.l++];U>B-1&&(U=B-1);for(var H="";H.length<U;)H+=String.fromCharCode(I[I.l++]);return H}function ye(I,B,U){if(!(!U.qpro||B<21)){var H=I.read_shift(1);I.l+=17,I.l+=1,I.l+=2;var te=I.read_shift(B-21,"cstr");return[H,te]}}function ce(I,B){for(var U={},H=I.l+B;I.l<H;){var te=I.read_shift(2);if(te==14e3){for(U[te]=[0,""],U[te][0]=I.read_shift(2);I[I.l];)U[te][1]+=String.fromCharCode(I[I.l]),I.l++;I.l++}}return U}function be(I,B){var U=nt(5+I.length);U.write_shift(2,14e3),U.write_shift(2,B);for(var H=0;H<I.length;++H){var te=I.charCodeAt(H);U[U.l++]=te>127?95:te}return U[U.l++]=0,U}var Me={0:{n:"BOF",f:DL},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:_},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ve},222:{n:"SHEETNAMELP",f:ge},65535:{n:""}},Le={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:W},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:k},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ce},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:L},38:{n:"??"},39:{n:"NUMBER27",f:R},40:{n:"FORMULA28",f:le},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ve},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ye},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}}(),NJ=/^\s|\s$|[\t\n\r]/;function zL(t,e){if(!e.bookSST)return"";var r=[ji];r[r.length]=Lt("sst",null,{xmlns:If[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var i=t[n],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(NJ)&&(s+=' xml:space="preserve"'),s+=">"+En(i.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function TJ(t){return[t.read_shift(4),t.read_shift(4)]}function kJ(t,e){return e||(e=nt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var CJ=vQ;function IJ(t){var e=sa();vt(e,159,kJ(t));for(var r=0;r<t.length;++r)vt(e,19,CJ(t[r]));return vt(e,160),e.end()}function PJ(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function HL(t){var e=0,r,n=PJ(t),i=n.length+1,s,a,o,l,c;for(r=wh(i),r[0]=n.length,s=1;s!=i;++s)r[s]=n[s-1];for(s=i-1;s>=0;--s)a=r[s],o=e&16384?1:0,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var RJ=function(){function t(i,s){switch(s.type){case"base64":return e(Ql(i),s);case"binary":return e(i,s);case"buffer":return e(hn&&Buffer.isBuffer(i)?i.toString("binary"):ym(i),s);case"array":return e(V2(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(h,d){Array.isArray(o)&&(o[d]=[]);for(var p=/\\\w+\b/g,f=0,v,x=-1;v=p.exec(h);){switch(v[0]){case"\\cell":var _=h.slice(f,p.lastIndex-v[0].length);if(_[0]==" "&&(_=_.slice(1)),++x,_.length){var w={v:_,t:"s"};Array.isArray(o)?o[d][x]=w:o[Nn({r:d,c:x})]=w}break}f=p.lastIndex}x>c.e.c&&(c.e.c=x)}),o["!ref"]=Ri(c),o}function r(i,s){return Ih(t(i,s),s)}function n(i){for(var s=["{\\rtf1\\ansi"],a=Gn(i["!ref"]),o,l=Array.isArray(i),c=a.s.r;c<=a.e.r;++c){s.push("\\trowd\\trautofit1");for(var h=a.s.c;h<=a.e.c;++h)s.push("\\cellx"+(h+1));for(s.push("\\pard\\intbl"),h=a.s.c;h<=a.e.c;++h){var d=Nn({r:c,c:h});o=l?(i[c]||[])[h]:i[d],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(Jl(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function DT(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}var LJ=6,Ul=LJ;function jx(t){return Math.floor((t+Math.round(128/Ul)/256)*Ul)}function Fx(t){return Math.floor((t-5)/Ul*100+.5)/100}function D5(t){return Math.round((t*Ul+5)/Ul*256)/256}function d4(t){t.width?(t.wpx=jx(t.width),t.wch=Fx(t.wpx),t.MDW=Ul):t.wpx?(t.wch=Fx(t.wpx),t.width=D5(t.wch),t.MDW=Ul):typeof t.wch=="number"&&(t.width=D5(t.wch),t.wpx=jx(t.width),t.MDW=Ul),t.customWidth&&delete t.customWidth}var jJ=96,$L=jJ;function Dx(t){return t*96/$L}function qL(t){return t*$L/96}function FJ(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Lt("numFmt",null,{numFmtId:n,formatCode:En(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Lt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function DJ(t){var e=[];return e[e.length]=Lt("cellXfs",null),t.forEach(function(r){e[e.length]=Lt("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Lt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function WL(t,e){var r=[ji,Lt("styleSheet",null,{xmlns:If[0],"xmlns:vt":Gi.vt})],n;return t.SSF&&(n=FJ(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=DJ(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function MJ(t,e){var r=t.read_shift(2),n=Rs(t);return[r,n]}function OJ(t,e,r){r||(r=nt(6+4*e.length)),r.write_shift(2,t),Xi(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function BJ(t,e,r){var n={};n.sz=t.read_shift(2)/20;var i=NQ(t);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=AQ(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Rs(t),n}function UJ(t,e){e||(e=nt(25+4*32)),e.write_shift(2,t.sz*20),TQ(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),Rx(t.color,e);var n=0;return n=2,e.write_shift(1,n),Xi(t.name,e),e.length>e.l?e.slice(0,e.l):e}var VJ=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Mv,zJ=hl;function MT(t,e){e||(e=nt(4*3+8*7+16*1)),Mv||(Mv=e4(VJ));var r=Mv[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(Rx({auto:1},e),Rx({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function HJ(t,e){var r=t.l+e,n=t.read_shift(2),i=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:i}}function KL(t,e,r){r||(r=nt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function d0(t,e){return e||(e=nt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var $J=hl;function qJ(t,e){return e||(e=nt(51)),e.write_shift(1,0),d0(null,e),d0(null,e),d0(null,e),d0(null,e),d0(null,e),e.length>e.l?e.slice(0,e.l):e}function WJ(t,e){return e||(e=nt(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),Px(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function KJ(t,e,r){var n=nt(2052);return n.write_shift(4,t),Px(e,n),Px(r,n),n.length>n.l?n.slice(0,n.l):n}function GJ(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&++r}),r!=0&&(vt(t,615,Po(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&vt(t,44,OJ(i,e[i]))}),vt(t,616))}}function YJ(t){var e=1;vt(t,611,Po(e)),vt(t,43,UJ({sz:12,color:{theme:1},name:"Calibri",family:2})),vt(t,612)}function XJ(t){var e=2;vt(t,603,Po(e)),vt(t,45,MT({patternType:"none"})),vt(t,45,MT({patternType:"gray125"})),vt(t,604)}function QJ(t){var e=1;vt(t,613,Po(e)),vt(t,46,qJ()),vt(t,614)}function JJ(t){var e=1;vt(t,626,Po(e)),vt(t,47,KL({numFmtId:0},65535)),vt(t,627)}function ZJ(t,e){vt(t,617,Po(e.length)),e.forEach(function(r){vt(t,47,KL(r,0))}),vt(t,618)}function eZ(t){var e=1;vt(t,619,Po(e)),vt(t,48,WJ({xfId:0,name:"Normal"})),vt(t,620)}function tZ(t){var e=0;vt(t,505,Po(e)),vt(t,506)}function rZ(t){var e=0;vt(t,508,KJ(e,"TableStyleMedium9","PivotStyleMedium4")),vt(t,509)}function nZ(t,e){var r=sa();return vt(r,278),GJ(r,t.SSF),YJ(r),XJ(r),QJ(r),JJ(r),ZJ(r,e.cellXfs),eZ(r),tZ(r),rZ(r),vt(r,279),r.end()}function GL(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[ji];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function iZ(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Rs(t)}}function sZ(t){var e=nt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Xi(t.name,e),e.slice(0,e.l)}function aZ(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function oZ(t){var e=nt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function lZ(t,e){var r=nt(8+2*e.length);return r.write_shift(4,t),Xi(e,r),r.slice(0,r.l)}function cZ(t){return t.l+=4,t.read_shift(4)!=0}function uZ(t,e){var r=nt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function hZ(){var t=sa();return vt(t,332),vt(t,334,Po(1)),vt(t,335,sZ({name:"XLDAPR",version:12e4,flags:3496657072})),vt(t,336),vt(t,339,lZ(1,"XLDAPR")),vt(t,52),vt(t,35,Po(514)),vt(t,4096,Po(0)),vt(t,4097,Qa(1)),vt(t,36),vt(t,53),vt(t,340),vt(t,337,uZ(1)),vt(t,51,oZ([[1,0]])),vt(t,338),vt(t,333),t.end()}function YL(){var t=[ji];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function dZ(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Nn(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var Ed=1024;function XL(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[Lt("xml",null,{"xmlns:v":Ea.v,"xmlns:o":Ea.o,"xmlns:x":Ea.x,"xmlns:mv":Ea.mv}).replace(/\/>/,">"),Lt("o:shapelayout",Lt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Lt("v:shapetype",[Lt("v:stroke",null,{joinstyle:"miter"}),Lt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Ed<t*1e3;)Ed+=1e3;return e.forEach(function(s){var a=Yi(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Lt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=Lt("v:fill",l,o),h={on:"t",obscured:"t"};++Ed,i=i.concat(["<v:shape"+Vp({id:"_x0000_s"+Ed,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,Lt("v:shadow",null,h),Lt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ls("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),ls("x:AutoFill","False"),ls("x:Row",String(a.r)),ls("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function QL(t){var e=[ji,Lt("comments",null,{xmlns:If[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(i){var s=En(i.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var i=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(i=r.indexOf(En(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(ls("t",En(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(ls("t",En(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function fZ(t,e,r){var n=[ji,Lt("ThreadedComments",null,{xmlns:Gi.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(Lt("threadedComment",ls("text",a.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function pZ(t){var e=[ji,Lt("personList",null,{xmlns:Gi.TCMNT,"xmlns:x":If[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Lt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function mZ(t){var e={};e.iauthor=t.read_shift(4);var r=jh(t);return e.rfx=r.s,e.ref=Nn(r.s),t.l+=16,e}function gZ(t,e){return e==null&&(e=nt(36)),e.write_shift(4,t[1].iauthor),Rf(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var xZ=Rs;function yZ(t){return Xi(t.slice(0,54))}function vZ(t){var e=sa(),r=[];return vt(e,628),vt(e,630),t.forEach(function(n){n[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),vt(e,632,yZ(i.a)))})}),vt(e,631),vt(e,633),t.forEach(function(n){n[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var s={s:Yi(n[0]),e:Yi(n[0])};vt(e,635,gZ([s,i])),i.t&&i.t.length>0&&vt(e,637,_Q(i)),vt(e,636),delete i.iauthor})}),vt(e,634),vt(e,629),e.end()}function wZ(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&kn.utils.cfb_add(t,i,e.FileIndex[n].content)}})}var JL=["xlsb","xlsm","xlam","biff8","xla"],_Z=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=s.length>0?parseInt(s,10)|0:0,h=a.length>0?parseInt(a,10)|0:0;return o?h+=e.c:--h,l?c+=e.r:--c,i+(o?"":"$")+Ps(h)+(l?"":"$")+us(c)}return function(i,s){return e=s,i.replace(t,r)}}(),f4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,p4=function(){return function(e,r){return e.replace(f4,function(n,i,s,a,o,l){var c=o4(a)-(s?0:r.c),h=a4(l)-(o?0:r.r),d=h==0?"":o?h+1:"["+h+"]",p=c==0?"":s?c+1:"["+c+"]";return i+"R"+d+"C"+p})}}();function bZ(t,e){return t.replace(f4,function(r,n,i,s,a,o){return n+(i=="$"?i+s:Ps(o4(s)+e.c))+(a=="$"?a+o:us(a4(o)+e.r))})}function SZ(t){return t.length!=1}function Ni(t){t.l+=1}function _u(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function ZL(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return ej(t);r.biff==12&&(n=4)}var i=t.read_shift(n),s=t.read_shift(n),a=_u(t),o=_u(t);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function ej(t){var e=_u(t),r=_u(t),n=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function EZ(t,e,r){if(r.biff<8)return ej(t);var n=t.read_shift(r.biff==12?4:2),i=t.read_shift(r.biff==12?4:2),s=_u(t),a=_u(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function tj(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return AZ(t);var n=t.read_shift(r&&r.biff==12?4:2),i=_u(t);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function AZ(t){var e=_u(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function NZ(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function TZ(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return kZ(t);var i=t.read_shift(n>=12?4:2),s=t.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function kZ(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:i,rRel:n}}function CZ(t,e,r){var n=(t[t.l++]&96)>>5,i=ZL(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function IZ(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var a=ZL(t,s,r);return[n,i,a]}function PZ(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function RZ(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,i]}function LZ(t,e,r){var n=(t[t.l++]&96)>>5,i=EZ(t,e-1,r);return[n,i]}function jZ(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function OT(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function FZ(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),i=[],s=0;s<=n;++s)i.push(t.read_shift(r&&r.biff==2?1:2));return i}function DZ(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function MZ(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function OZ(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function BZ(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function rj(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function UZ(t){return t.read_shift(2),rj(t)}function VZ(t){return t.read_shift(2),rj(t)}function zZ(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=tj(t,0,r);return[n,i]}function HZ(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=TZ(t,0,r);return[n,i]}function $Z(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=tj(t,0,r);return[n,i,s]}function qZ(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(r&&r.biff<=3?1:2);return[qee[i],sj[i],n]}function WZ(t,e,r){var n=t[t.l++],i=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:KZ(t);return[i,(s[0]===0?sj:$ee)[s[1]]]}function KZ(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function GZ(t,e,r){t.l+=r&&r.biff==2?3:4}function YZ(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function XZ(t){return t.l++,_m[t.read_shift(1)]}function QZ(t){return t.l++,t.read_shift(2)}function JZ(t){return t.l++,t.read_shift(1)!==0}function ZZ(t){return t.l++,Lf(t)}function eee(t,e,r){return t.l++,OL(t,e-1,r)}function tee(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=$Q(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=_m[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Lf(t);break;case 2:r[1]=GQ(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function ree(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),i=[],s=0;s!=n;++s)i.push((r.biff==12?jh:QQ)(t));return i}function nee(t,e,r){var n=0,i=0;r.biff==12?(n=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var s=0,a=[];s!=n&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=tee(t,r.biff);return a}function iee(t,e,r){var n=t.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,s=t.read_shift(i);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function see(t,e,r){if(r.biff==5)return aee(t);var n=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[n,i,s]}function aee(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function oee(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function lee(t,e,r){var n=t.read_shift(1)>>>5&3,i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function cee(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function uee(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,i]}var hee=hl,dee=hl,fee=hl;function bm(t,e,r){return t.l+=2,[NZ(t)]}function m4(t){return t.l+=6,[]}var pee=bm,mee=m4,gee=m4,xee=bm;function nj(t){return t.l+=2,[DL(t),t.read_shift(2)&1]}var yee=bm,vee=nj,wee=m4,_ee=bm,bee=bm,See=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Eee(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),a=See[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:i,C:s}}function Aee(t){return t.l+=2,[t.read_shift(4)]}function Nee(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function Tee(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function kee(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Cee(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Iee(t){return t.l+=4,[0,0]}var BT={1:{n:"PtgExp",f:YZ},2:{n:"PtgTbl",f:fee},3:{n:"PtgAdd",f:Ni},4:{n:"PtgSub",f:Ni},5:{n:"PtgMul",f:Ni},6:{n:"PtgDiv",f:Ni},7:{n:"PtgPower",f:Ni},8:{n:"PtgConcat",f:Ni},9:{n:"PtgLt",f:Ni},10:{n:"PtgLe",f:Ni},11:{n:"PtgEq",f:Ni},12:{n:"PtgGe",f:Ni},13:{n:"PtgGt",f:Ni},14:{n:"PtgNe",f:Ni},15:{n:"PtgIsect",f:Ni},16:{n:"PtgUnion",f:Ni},17:{n:"PtgRange",f:Ni},18:{n:"PtgUplus",f:Ni},19:{n:"PtgUminus",f:Ni},20:{n:"PtgPercent",f:Ni},21:{n:"PtgParen",f:Ni},22:{n:"PtgMissArg",f:Ni},23:{n:"PtgStr",f:eee},26:{n:"PtgSheet",f:Nee},27:{n:"PtgEndSheet",f:Tee},28:{n:"PtgErr",f:XZ},29:{n:"PtgBool",f:JZ},30:{n:"PtgInt",f:QZ},31:{n:"PtgNum",f:ZZ},32:{n:"PtgArray",f:jZ},33:{n:"PtgFunc",f:qZ},34:{n:"PtgFuncVar",f:WZ},35:{n:"PtgName",f:iee},36:{n:"PtgRef",f:zZ},37:{n:"PtgArea",f:CZ},38:{n:"PtgMemArea",f:oee},39:{n:"PtgMemErr",f:hee},40:{n:"PtgMemNoMem",f:dee},41:{n:"PtgMemFunc",f:lee},42:{n:"PtgRefErr",f:cee},43:{n:"PtgAreaErr",f:PZ},44:{n:"PtgRefN",f:HZ},45:{n:"PtgAreaN",f:LZ},46:{n:"PtgMemAreaN",f:kee},47:{n:"PtgMemNoMemN",f:Cee},57:{n:"PtgNameX",f:see},58:{n:"PtgRef3d",f:$Z},59:{n:"PtgArea3d",f:IZ},60:{n:"PtgRefErr3d",f:uee},61:{n:"PtgAreaErr3d",f:RZ},255:{}},Pee={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ree={1:{n:"PtgElfLel",f:nj},2:{n:"PtgElfRw",f:_ee},3:{n:"PtgElfCol",f:pee},6:{n:"PtgElfRwV",f:bee},7:{n:"PtgElfColV",f:xee},10:{n:"PtgElfRadical",f:yee},11:{n:"PtgElfRadicalS",f:wee},13:{n:"PtgElfColS",f:mee},15:{n:"PtgElfColSV",f:gee},16:{n:"PtgElfRadicalLel",f:vee},25:{n:"PtgList",f:Eee},29:{n:"PtgSxName",f:Aee},255:{}},Lee={0:{n:"PtgAttrNoop",f:Iee},1:{n:"PtgAttrSemi",f:BZ},2:{n:"PtgAttrIf",f:MZ},4:{n:"PtgAttrChoose",f:FZ},8:{n:"PtgAttrGoto",f:DZ},16:{n:"PtgAttrSum",f:GZ},32:{n:"PtgAttrBaxcel",f:OT},33:{n:"PtgAttrBaxcel",f:OT},64:{n:"PtgAttrSpace",f:UZ},65:{n:"PtgAttrSpaceSemi",f:VZ},128:{n:"PtgAttrIfError",f:OZ},255:{}};function jee(t,e,r,n){if(n.biff<8)return hl(t,e);for(var i=t.l+e,s=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=nee(t,0,n),s.push(r[a][1]);break;case"PtgMemArea":r[a][2]=ree(t,r[a][1],n),s.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),s.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=i-t.l,e!==0&&s.push(hl(t,e)),s}function Fee(t,e,r){for(var n=t.l+e,i,s,a=[];n!=t.l;)e=n-t.l,s=t[t.l],i=BT[s]||BT[Pee[s]],(s===24||s===25)&&(i=(s===24?Ree:Lee)[t[t.l+1]]),!i||!i.f?hl(t,e):a.push([i.n,i.f(t,e,r)]);return a}function Dee(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],i=[],s=0;s<n.length;++s){var a=n[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var Mee={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Oee(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function ij(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(t[n[0]][0]){case 357:return i=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(i=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function UT(t,e,r){var n=ij(t,e,r);return n=="#REF"?n:Oee(n,r)}function hf(t,e,r,n,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,c,h,d=0,p=0,f,v="";if(!t[0]||!t[0][0])return"";for(var x=-1,_="",w=0,S=t[0].length;w<S;++w){var N=t[0][w];switch(N[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),x>=0){switch(t[0][x][1][0]){case 0:_=hi(" ",t[0][x][1][1]);break;case 1:_=hi("\r",t[0][x][1][1]);break;default:if(_="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}c=c+_,x=-1}o.push(c+Mee[N[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":h=Q0(N[1][1],a,i),o.push(J0(h,s));break;case"PtgRefN":h=r?Q0(N[1][1],r,i):N[1][1],o.push(J0(h,s));break;case"PtgRef3d":d=N[1][1],h=Q0(N[1][2],a,i),v=UT(n,d,i),o.push(v+"!"+J0(h,s));break;case"PtgFunc":case"PtgFuncVar":var j=N[1][0],z=N[1][1];j||(j=0),j&=127;var W=j==0?[]:o.slice(-j);o.length-=j,z==="User"&&(z=W.shift()),o.push(z+"("+W.join(",")+")");break;case"PtgBool":o.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(N[1]);break;case"PtgNum":o.push(String(N[1]));break;case"PtgStr":o.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(N[1]);break;case"PtgAreaN":f=ET(N[1][1],r?{s:r}:a,i),o.push(Fv(f,i));break;case"PtgArea":f=ET(N[1][1],a,i),o.push(Fv(f,i));break;case"PtgArea3d":d=N[1][1],f=N[1][2],v=UT(n,d,i),o.push(v+"!"+Fv(f,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=N[1][2];var b=(n.names||[])[p-1]||(n[0]||[])[p],T=b?b.Name:"SH33TJSNAME"+String(p);T&&T.slice(0,6)=="_xlfn."&&!i.xlfn&&(T=T.slice(6)),o.push(T);break;case"PtgNameX":var A=N[1][1];p=N[1][2];var F;if(i.biff<=5)A<0&&(A=-A),n[A]&&(F=n[A][p]);else{var k="";if(((n[A]||[])[0]||[])[0]==14849||(((n[A]||[])[0]||[])[0]==1025?n[A][p]&&n[A][p].itab>0&&(k=n.SheetNames[n[A][p].itab-1]+"!"):k=n.SheetNames[p-1]+"!"),n[A]&&n[A][p])k+=n[A][p].Name;else if(n[0]&&n[0][p])k+=n[0][p].Name;else{var L=(ij(n,A,i)||"").split(";;");L[p-1]?k=L[p-1]:k+="SH33TJSERRX"}o.push(k);break}F||(F={Name:"SH33TJSERRY"}),o.push(F.Name);break;case"PtgParen":var R="(",le=")";if(x>=0){switch(_="",t[0][x][1][0]){case 2:R=hi(" ",t[0][x][1][1])+R;break;case 3:R=hi("\r",t[0][x][1][1])+R;break;case 4:le=hi(" ",t[0][x][1][1])+le;break;case 5:le=hi("\r",t[0][x][1][1])+le;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}x=-1}o.push(R+o.pop()+le);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":h={c:N[1][1],r:N[1][0]};var ve={c:r.c,r:r.r};if(n.sharedf[Nn(h)]){var ge=n.sharedf[Nn(h)];o.push(hf(ge,a,ve,n,i))}else{var ye=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(h.c<c[0].s.c||h.c>c[0].e.c)&&!(h.r<c[0].s.r||h.r>c[0].e.r)){o.push(hf(c[1],a,ve,n,i)),ye=!0;break}ye||o.push(N[1])}break;case"PtgArray":o.push("{"+Dee(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&x>=0&&ce.indexOf(t[0][w][0])==-1){N=t[0][x];var be=!0;switch(N[1][0]){case 4:be=!1;case 0:_=hi(" ",N[1][1]);break;case 5:be=!1;case 1:_=hi("\r",N[1][1]);break;default:if(_="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}o.push((be?_:"")+o.pop()+(be?"":_)),x=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function Bee(t){if(t==null){var e=nt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return _h(t);return _h(0)}function Uee(t,e,r,n,i){var s=bh(e,r,i),a=Bee(t.v),o=nt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=nt(t.bf.length),h=0;h<t.bf.length;++h)c[h]=t.bf[h];var d=os([s,a,o,c]);return d}function z2(t,e,r){var n=t.read_shift(4),i=Fee(t,n,r),s=t.read_shift(4),a=s>0?jee(t,s,i,r):null;return[i,a]}var Vee=z2,H2=z2,zee=z2,Hee=z2,$ee={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},sj={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},qee={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Wee(t){var e="of:="+t.replace(f4,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function Kee(t){return t.replace(/\./,"!")}var Z0=typeof Map<"u";function g4(t,e,r){var n=0,i=t.length;if(r){if(Z0?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=Z0?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<i;++n)if(t[n].t===e)return t.Count++,n;return t[i]={t:e},t.Count++,t.Unique++,r&&(Z0?(r.has(e)||r.set(e,[]),r.get(e).push(i)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(i))),i}function $2(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Ul=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=Fx(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=D5(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function aj(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Pu(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(n==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){tL(e.z,i),r.ssf[i]=e.z,r.revssf[e.z]=n=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===n)return i;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Gee(t,e,r){if(t&&t["!ref"]){var n=Gn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function Yee(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Ri(t[r])+'"/>';return e+"</mergeCells>"}function Xee(t,e,r,n,i){var s=!1,a={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}s=!0,a.codeName=Up(En(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),o=(o||"")+Lt("outlinePr",null,c)}!s&&!o||(i[i.length]=Lt("sheetPr",o,a))}var Qee=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Jee=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Zee(t){var e={sheet:1};return Qee.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),Jee.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=HL(t.password).toString(16).toUpperCase()),Lt("sheetProtection",null,e)}function ete(t){return aj(t),Lt("pageMargins",null,t)}function tte(t,e){for(var r=["<cols>"],n,i=0;i!=e.length;++i)(n=e[i])&&(r[r.length]=Lt("col",null,$2(i,n)));return r[r.length]="</cols>",r.join("")}function rte(t,e,r,n){var i=typeof t.ref=="string"?t.ref:Ri(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,a=Fa(i);a.s.r==a.e.r&&(a.e.r=Fa(e["!ref"]).e.r,i=Ri(a));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Lt("autoFilter",null,{ref:i})}function nte(t,e,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Lt("sheetViews",Lt("sheetView",null,i),{})}function ite(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",s=t.t,a=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=_m[t.v];break;case"d":n&&n.cellDates?i=qs(t.v,-1).toISOString():(t=oa(t),t.t="n",i=""+(t.v=aa(qs(t.v)))),typeof t.z>"u"&&(t.z=di[14]);break;default:i=t.v;break}var o=ls("v",En(i)),l={r:e},c=Pu(n.cellXfs,t,n);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=ls("v",""+g4(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=a),typeof t.f=="string"&&t.f){var h=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Lt("f",En(t.f),h)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Lt("c",o,l)}function ste(t,e,r,n){var i=[],s=[],a=Gn(t["!ref"]),o="",l,c="",h=[],d=0,p=0,f=t["!rows"],v=Array.isArray(t),x={r:c},_,w=-1;for(p=a.s.c;p<=a.e.c;++p)h[p]=Ps(p);for(d=a.s.r;d<=a.e.r;++d){for(s=[],c=us(d),p=a.s.c;p<=a.e.c;++p){l=h[p]+c;var S=v?(t[d]||[])[p]:t[l];S!==void 0&&(o=ite(S,l,t,e))!=null&&s.push(o)}(s.length>0||f&&f[d])&&(x={r:c},f&&f[d]&&(_=f[d],_.hidden&&(x.hidden=1),w=-1,_.hpx?w=Dx(_.hpx):_.hpt&&(w=_.hpt),w>-1&&(x.ht=w,x.customHeight=1),_.level&&(x.outlineLevel=_.level)),i[i.length]=Lt("row",s.join(""),x))}if(f)for(;d<f.length;++d)f&&f[d]&&(x={r:d+1},_=f[d],_.hidden&&(x.hidden=1),w=-1,_.hpx?w=Dx(_.hpx):_.hpt&&(w=_.hpt),w>-1&&(x.ht=w,x.customHeight=1),_.level&&(x.outlineLevel=_.level),i[i.length]=Lt("row","",x));return i.join("")}function oj(t,e,r,n){var i=[ji,Lt("worksheet",null,{xmlns:If[0],"xmlns:r":Gi.r})],s=r.SheetNames[t],a=0,o="",l=r.Sheets[s];l==null&&(l={});var c=l["!ref"]||"A1",h=Gn(c);if(h.e.c>16383||h.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575),c=Ri(h)}n||(n={}),l["!comments"]=[];var d=[];Xee(l,r,t,e,i),i[i.length]=Lt("dimension",null,{ref:c}),i[i.length]=nte(l,e,t,r),e.sheetFormat&&(i[i.length]=Lt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=tte(l,l["!cols"])),i[a=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=ste(l,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),l["!protect"]&&(i[i.length]=Zee(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=rte(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=Yee(l["!merges"]));var p=-1,f,v=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(x){x[1].Target&&(f={ref:x[0]},x[1].Target.charAt(0)!="#"&&(v=bn(n,-1,En(x[1].Target).replace(/#.*$/,""),ln.HLINK),f["r:id"]="rId"+v),(p=x[1].Target.indexOf("#"))>-1&&(f.location=En(x[1].Target.slice(p+1))),x[1].Tooltip&&(f.tooltip=En(x[1].Tooltip)),i[i.length]=Lt("hyperlink",null,f))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=ete(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=ls("ignoredErrors",Lt("ignoredError",null,{numberStoredAsText:1,sqref:c}))),d.length>0&&(v=bn(n,-1,"../drawings/drawing"+(t+1)+".xml",ln.DRAW),i[i.length]=Lt("drawing",null,{"r:id":"rId"+v}),l["!drawing"]=d),l["!comments"].length>0&&(v=bn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",ln.VML),i[i.length]=Lt("legacyDrawing",null,{"r:id":"rId"+v}),l["!legacy"]=v),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function ate(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=i/20),r}function ote(t,e,r){var n=nt(145),i=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;i.hpx?s=Dx(i.hpx)*20:i.hpt&&(s=i.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:t,c:0},h=0;h<16;++h)if(!(e.s.c>h+1<<10||e.e.c<h<<10)){for(var d=-1,p=-1,f=h<<10;f<h+1<<10;++f){c.c=f;var v=Array.isArray(r)?(r[c.r]||[])[c.c]:r[Nn(c)];v&&(d<0&&(d=f),p=f)}d<0||(++o,n.write_shift(4,d),n.write_shift(4,p))}var x=n.l;return n.l=l,n.write_shift(4,o),n.l=x,n.length>n.l?n.slice(0,n.l):n}function lte(t,e,r,n){var i=ote(n,r,e);(i.length>17||(e["!rows"]||[])[n])&&vt(t,0,i)}var cte=jh,ute=Rf;function hte(){}function dte(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=bQ(t),r}function fte(t,e,r){r==null&&(r=nt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return Rx({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),bL(t,r),r.slice(0,r.l)}function pte(t){var e=lo(t);return[e]}function mte(t,e,r){return r==null&&(r=nt(8)),Ph(e,r)}function gte(t){var e=Rh(t);return[e]}function xte(t,e,r){return r==null&&(r=nt(4)),Lh(e,r)}function yte(t){var e=lo(t),r=t.read_shift(1);return[e,r,"b"]}function vte(t,e,r){return r==null&&(r=nt(9)),Ph(e,r),r.write_shift(1,t.v?1:0),r}function wte(t){var e=Rh(t),r=t.read_shift(1);return[e,r,"b"]}function _te(t,e,r){return r==null&&(r=nt(5)),Lh(e,r),r.write_shift(1,t.v?1:0),r}function bte(t){var e=lo(t),r=t.read_shift(1);return[e,r,"e"]}function Ste(t,e,r){return r==null&&(r=nt(9)),Ph(e,r),r.write_shift(1,t.v),r}function Ete(t){var e=Rh(t),r=t.read_shift(1);return[e,r,"e"]}function Ate(t,e,r){return r==null&&(r=nt(8)),Lh(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function Nte(t){var e=lo(t),r=t.read_shift(4);return[e,r,"s"]}function Tte(t,e,r){return r==null&&(r=nt(12)),Ph(e,r),r.write_shift(4,e.v),r}function kte(t){var e=Rh(t),r=t.read_shift(4);return[e,r,"s"]}function Cte(t,e,r){return r==null&&(r=nt(8)),Lh(e,r),r.write_shift(4,e.v),r}function Ite(t){var e=lo(t),r=Lf(t);return[e,r,"n"]}function Pte(t,e,r){return r==null&&(r=nt(16)),Ph(e,r),_h(t.v,r),r}function Rte(t){var e=Rh(t),r=Lf(t);return[e,r,"n"]}function Lte(t,e,r){return r==null&&(r=nt(12)),Lh(e,r),_h(t.v,r),r}function jte(t){var e=lo(t),r=SL(t);return[e,r,"n"]}function Fte(t,e,r){return r==null&&(r=nt(12)),Ph(e,r),EL(t.v,r),r}function Dte(t){var e=Rh(t),r=SL(t);return[e,r,"n"]}function Mte(t,e,r){return r==null&&(r=nt(8)),Lh(e,r),EL(t.v,r),r}function Ote(t){var e=lo(t),r=l4(t);return[e,r,"is"]}function Bte(t){var e=lo(t),r=Rs(t);return[e,r,"str"]}function Ute(t,e,r){return r==null&&(r=nt(12+4*t.v.length)),Ph(e,r),Xi(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Vte(t){var e=Rh(t),r=Rs(t);return[e,r,"str"]}function zte(t,e,r){return r==null&&(r=nt(8+4*t.v.length)),Lh(e,r),Xi(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Hte(t,e,r){var n=t.l+e,i=lo(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"b"];if(r.cellFormula){t.l+=2;var o=H2(t,n-t.l,r);a[3]=hf(o,null,i,r.supbooks,r)}else t.l=n;return a}function $te(t,e,r){var n=t.l+e,i=lo(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"e"];if(r.cellFormula){t.l+=2;var o=H2(t,n-t.l,r);a[3]=hf(o,null,i,r.supbooks,r)}else t.l=n;return a}function qte(t,e,r){var n=t.l+e,i=lo(t);i.r=r["!row"];var s=Lf(t),a=[i,s,"n"];if(r.cellFormula){t.l+=2;var o=H2(t,n-t.l,r);a[3]=hf(o,null,i,r.supbooks,r)}else t.l=n;return a}function Wte(t,e,r){var n=t.l+e,i=lo(t);i.r=r["!row"];var s=Rs(t),a=[i,s,"str"];if(r.cellFormula){t.l+=2;var o=H2(t,n-t.l,r);a[3]=hf(o,null,i,r.supbooks,r)}else t.l=n;return a}var Kte=jh,Gte=Rf;function Yte(t,e){return e==null&&(e=nt(4)),e.write_shift(4,t),e}function Xte(t,e){var r=t.l+e,n=jh(t),i=c4(t),s=Rs(t),a=Rs(t),o=Rs(t);t.l=r;var l={rfx:n,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function Qte(t,e){var r=nt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Rf({s:Yi(t[0]),e:Yi(t[0])},r),u4("rId"+e,r);var n=t[1].Target.indexOf("#"),i=n==-1?"":t[1].Target.slice(n+1);return Xi(i||"",r),Xi(t[1].Tooltip||"",r),Xi("",r),r.slice(0,r.l)}function Jte(){}function Zte(t,e,r){var n=t.l+e,i=AL(t),s=t.read_shift(1),a=[i];if(a[2]=s,r.cellFormula){var o=Vee(t,n-t.l,r);a[1]=o}else t.l=n;return a}function ere(t,e,r){var n=t.l+e,i=jh(t),s=[i];if(r.cellFormula){var a=Hee(t,n-t.l,r);s[1]=a,t.l=n}else t.l=n;return s}function tre(t,e,r){r==null&&(r=nt(18));var n=$2(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),r.write_shift(2,i),r}var lj=["left","right","top","bottom","header","footer"];function rre(t){var e={};return lj.forEach(function(r){e[r]=Lf(t)}),e}function nre(t,e){return e==null&&(e=nt(6*8)),aj(t),lj.forEach(function(r){_h(t[r],e)}),e}function ire(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function sre(t,e,r){r==null&&(r=nt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function are(t){var e=nt(24);return e.write_shift(4,4),e.write_shift(4,1),Rf(t,e),e}function ore(t,e){return e==null&&(e=nt(16*4+2)),e.write_shift(2,t.password?HL(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function lre(){}function cre(){}function ure(t,e,r,n,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=oa(e),e.z=e.z||di[14],e.v=aa(qs(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=Pu(i.cellXfs,e,i),e.l&&s["!links"].push([Nn(l),e.l]),e.c&&s["!comments"].push([Nn(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=g4(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,a?vt(t,18,Cte(e,l)):vt(t,7,Tte(e,l))):(l.t="str",a?vt(t,17,zte(e,l)):vt(t,6,Ute(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?vt(t,13,Mte(e,l)):vt(t,2,Fte(e,l)):a?vt(t,16,Lte(e,l)):vt(t,5,Pte(e,l)),!0;case"b":return l.t="b",a?vt(t,15,_te(e,l)):vt(t,4,vte(e,l)),!0;case"e":return l.t="e",a?vt(t,14,Ate(e,l)):vt(t,3,Ste(e,l)),!0}return a?vt(t,12,xte(e,l)):vt(t,1,mte(e,l)),!0}function hre(t,e,r,n){var i=Gn(e["!ref"]||"A1"),s,a="",o=[];vt(t,145);var l=Array.isArray(e),c=i.e.r;e["!rows"]&&(c=Math.max(i.e.r,e["!rows"].length-1));for(var h=i.s.r;h<=c;++h){a=us(h),lte(t,e,i,h);var d=!1;if(h<=i.e.r)for(var p=i.s.c;p<=i.e.c;++p){h===i.s.r&&(o[p]=Ps(p)),s=o[p]+a;var f=l?(e[h]||[])[p]:e[s];if(!f){d=!1;continue}d=ure(t,f,h,p,n,e,d)}}vt(t,146)}function dre(t,e){!e||!e["!merges"]||(vt(t,177,Yte(e["!merges"].length)),e["!merges"].forEach(function(r){vt(t,176,Gte(r))}),vt(t,178))}function fre(t,e){!e||!e["!cols"]||(vt(t,390),e["!cols"].forEach(function(r,n){r&&vt(t,60,tre(n,r))}),vt(t,391))}function pre(t,e){!e||!e["!ref"]||(vt(t,648),vt(t,649,are(Gn(e["!ref"]))),vt(t,650))}function mre(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var i=bn(r,-1,n[1].Target.replace(/#.*$/,""),ln.HLINK);vt(t,494,Qte(n,i))}}),delete e["!links"]}function gre(t,e,r,n){if(e["!comments"].length>0){var i=bn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",ln.VML);vt(t,551,u4("rId"+i)),e["!legacy"]=i}}function xre(t,e,r,n){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Ri(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,o=Fa(s);o.s.r==o.e.r&&(o.e.r=Fa(e["!ref"]).e.r,s=Ri(o));for(var l=0;l<a.length;++l){var c=a[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),vt(t,161,Rf(Gn(s))),vt(t,162)}}function yre(t,e,r){vt(t,133),vt(t,137,sre(e,r)),vt(t,138),vt(t,134)}function vre(t,e){e["!protect"]&&vt(t,535,ore(e["!protect"]))}function wre(t,e,r,n){var i=sa(),s=r.SheetNames[t],a=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=Gn(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],vt(i,129),(r.vbaraw||a["!outline"])&&vt(i,147,fte(o,a["!outline"])),vt(i,148,ute(l)),yre(i,a,r.Workbook),fre(i,a),hre(i,a,t,e),vre(i,a),xre(i,a,r,t),dre(i,a),mre(i,a,n),a["!margins"]&&vt(i,476,nre(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&pre(i,a),gre(i,a,t,n),vt(i,130),i.end()}function _re(t,e){t.l+=10;var r=Rs(t);return{name:r}}var bre=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function Sre(t){return!t.Workbook||!t.Workbook.WBProps?"false":eQ(t.Workbook.WBProps.date1904)?"true":"false"}var Ere="][*?/\\".split("");function cj(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Ere.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Are(t,e,r){t.forEach(function(n,i){cj(n);for(var s=0;s<i;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var a=e&&e[i]&&e[i].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function Nre(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];Are(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)Gee(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}function uj(t){var e=[ji];e[e.length]=Lt("workbook",null,{xmlns:If[0],"xmlns:r":Gi.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(bre.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Lt("workbookPr",null,n);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var a={name:En(t.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=Lt("sheet",null,a)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Lt("definedName",En(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Tre(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=F5(t),r.name=Rs(t),r}function kre(t,e){return e||(e=nt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),u4(t.strRelID,e),Xi(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Cre(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var i=e>8?Rs(t):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Ire(t,e){e||(e=nt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),bL(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Pre(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),s=SQ(t),a=zee(t,0,r),o=c4(t);t.l=n;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function Rre(t,e){vt(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,i={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};vt(t,156,kre(i))}vt(t,144)}function Lre(t,e){e||(e=nt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Xi("SheetJS",e),Xi(Ex.version,e),Xi(Ex.version,e),Xi("7262",e),e.length>e.l?e.slice(0,e.l):e}function jre(t,e){e||(e=nt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function Fre(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,i=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&i==-1?i=n:r[n].Hidden==1&&s==-1&&(s=n);s>i||(vt(t,135),vt(t,158,jre(i)),vt(t,136))}}function Dre(t,e){var r=sa();return vt(r,131),vt(r,128,Lre()),vt(r,153,Ire(t.Workbook&&t.Workbook.WBProps||null)),Fre(r,t),Rre(r,t),vt(r,132),r.end()}function Mre(t,e,r){return(e.slice(-4)===".bin"?Dre:uj)(t)}function Ore(t,e,r,n,i){return(e.slice(-4)===".bin"?wre:oj)(t,r,n,i)}function Bre(t,e,r){return(e.slice(-4)===".bin"?nZ:WL)(t,r)}function Ure(t,e,r){return(e.slice(-4)===".bin"?IJ:zL)(t,r)}function Vre(t,e,r){return(e.slice(-4)===".bin"?vZ:QL)(t)}function zre(t){return(t.slice(-4)===".bin"?hZ:YL)()}function Hre(t,e){var r=[];return t.Props&&r.push(BQ(t.Props,e)),t.Custprops&&r.push(UQ(t.Props,t.Custprops)),r.join("")}function $re(){return""}function qre(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,i){var s=[];s.push(Lt("NumberFormat",null,{"ss:Format":En(di[n.numFmtId])}));var a={"ss:ID":"s"+(21+i)};r.push(Lt("Style",s.join(""),a))}),Lt("Styles",r.join(""))}function hj(t){return Lt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+p4(t.Ref,{r:0,c:0})})}function Wre(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var i=e[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(hj(i)))}return Lt("Names",r.join(""))}function Kre(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(hj(o)))}return s.join("")}function Gre(t,e,r,n){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(Lt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(Lt("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(Lt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(Lt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(ls("ProtectContents","True")),t["!protect"].objects&&i.push(ls("ProtectObjects","True")),t["!protect"].scenarios&&i.push(ls("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(ls("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(ls("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){t["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":Lt("WorksheetOptions",i.join(""),{xmlns:Ea.x})}function Yre(t){return t.map(function(e){var r=ZX(e.t||""),n=Lt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Lt("Comment",n,{"ss:Author":e.a})}).join("")}function Xre(t,e,r,n,i,s,a){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+En(p4(t.f,a))),t.F&&t.F.slice(0,e.length)==e){var l=Yi(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=En(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=En(t.l.Tooltip))),r["!merges"])for(var c=r["!merges"],h=0;h!=c.length;++h)c[h].s.c!=a.c||c[h].s.r!=a.r||(c[h].e.c>c[h].s.c&&(o["ss:MergeAcross"]=c[h].e.c-c[h].s.c),c[h].e.r>c[h].s.r&&(o["ss:MergeDown"]=c[h].e.r-c[h].s.r));var d="",p="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":d="Number",p=String(t.v);break;case"b":d="Boolean",p=t.v?"1":"0";break;case"e":d="Error",p=_m[t.v];break;case"d":d="DateTime",p=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||di[14]);break;case"s":d="String",p=JX(t.v||"");break}var f=Pu(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+f),o["ss:Index"]=a.c+1;var v=t.v!=null?p:"",x=t.t=="z"?"":'<Data ss:Type="'+d+'">'+v+"</Data>";return(t.c||[]).length>0&&(x+=Yre(t.c)),Lt("Cell",x,o)}function Qre(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=qL(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Jre(t,e,r,n){if(!t["!ref"])return"";var i=Gn(t["!ref"]),s=t["!merges"]||[],a=0,o=[];t["!cols"]&&t["!cols"].forEach(function(_,w){d4(_);var S=!!_.width,N=$2(w,_),j={"ss:Index":w+1};S&&(j["ss:Width"]=jx(N.width)),_.hidden&&(j["ss:Hidden"]="1"),o.push(Lt("Column",null,j))});for(var l=Array.isArray(t),c=i.s.r;c<=i.e.r;++c){for(var h=[Qre(c,(t["!rows"]||[])[c])],d=i.s.c;d<=i.e.c;++d){var p=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>d)&&!(s[a].s.r>c)&&!(s[a].e.c<d)&&!(s[a].e.r<c)){(s[a].s.c!=d||s[a].s.r!=c)&&(p=!0);break}if(!p){var f={r:c,c:d},v=Nn(f),x=l?(t[c]||[])[d]:t[v];h.push(Xre(x,v,t,e,r,n,f))}}h.push("</Row>"),h.length>2&&o.push(h.join(""))}return o.join("")}function Zre(t,e,r){var n=[],i=r.SheetNames[t],s=r.Sheets[i],a=s?Kre(s,e,t,r):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=s?Jre(s,e,t,r):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(Gre(s,e,t,r)),n.join("")}function ene(t,e){e||(e={}),t.SSF||(t.SSF=oa(di)),t.SSF&&(B2(),O2(t.SSF),e.revssf=U2(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Pu(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Hre(t,e)),r.push($re()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Lt("Worksheet",Zre(n,e,t),{"ss:Name":En(t.SheetNames[n])}));return r[2]=qre(t,e),r[3]=Wre(t),ji+Lt("Workbook",r.join(""),{xmlns:Ea.ss,"xmlns:o":Ea.o,"xmlns:x":Ea.x,"xmlns:ss":Ea.ss,"xmlns:dt":Ea.dt,"xmlns:html":Ea.html})}var Ov={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function tne(t,e){var r=[],n=[],i=[],s=0,a,o=fT(NT,"n"),l=fT(TT,"n");if(t.Props)for(a=fs(t.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(l,a[s])?n:i).push([a[s],t.Props[a[s]]]);if(t.Custprops)for(a=fs(t.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(l,a[s])?n:i).push([a[s],t.Custprops[a[s]]]);var c=[];for(s=0;s<i.length;++s)FL.indexOf(i[s][0])>-1||RL.indexOf(i[s][0])>-1||i[s][1]!=null&&c.push(i[s]);n.length&&kn.utils.cfb_add(e,"/SummaryInformation",RT(n,Ov.SI,l,TT)),(r.length||c.length)&&kn.utils.cfb_add(e,"/DocumentSummaryInformation",RT(r,Ov.DSI,o,NT,c.length?c:null,Ov.UDI))}function rne(t,e){var r=e||{},n=kn.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return kn.utils.cfb_add(n,i,dj(t,r)),r.biff==8&&(t.Props||t.Custprops)&&tne(t,n),r.biff==8&&t.vbaraw&&wZ(n,kn.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var nne={0:{f:ate},1:{f:pte},2:{f:jte},3:{f:bte},4:{f:yte},5:{f:Ite},6:{f:Bte},7:{f:Nte},8:{f:Wte},9:{f:qte},10:{f:Hte},11:{f:$te},12:{f:gte},13:{f:Dte},14:{f:Ete},15:{f:wte},16:{f:Rte},17:{f:Vte},18:{f:kte},19:{f:l4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Pre},40:{},42:{},43:{f:BJ},44:{f:MJ},45:{f:zJ},46:{f:$J},47:{f:HJ},48:{},49:{f:gQ},50:{},51:{f:aZ},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:xJ},62:{f:Ote},63:{f:dZ},64:{f:lre},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:hl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:ire},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:dte},148:{f:cte,p:16},151:{f:Jte},152:{},153:{f:Cre},154:{},155:{},156:{f:Tre},157:{},158:{},159:{T:1,f:TJ},160:{T:-1},161:{T:1,f:jh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Kte},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:iZ},336:{T:-1},337:{f:cZ,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:F5},357:{},358:{},359:{},360:{T:1},361:{},362:{f:hJ},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Zte},427:{f:ere},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:rre},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:hte},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Xte},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:F5},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:xZ},633:{T:1},634:{T:-1},635:{T:1,f:mZ},636:{T:-1},637:{f:wQ},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:_re},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:cre},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function jt(t,e,r,n){var i=e;if(!isNaN(i)){var s=n||(r||[]).length||0,a=t.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&s4(r)&&t.push(r)}}function ine(t,e,r,n){var i=(r||[]).length||0;if(i<=8224)return jt(t,e,r,i);var s=e;if(!isNaN(s)){for(var a=r.parts||[],o=0,l=0,c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;var h=t.next(4);for(h.write_shift(2,s),h.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c;l<i;){for(h=t.next(4),h.write_shift(2,60),c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;h.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c}}}function Sm(t,e,r){return t||(t=nt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function sne(t,e,r,n){var i=nt(9);return Sm(i,t,e),ML(r,n||"b",i),i}function ane(t,e,r){var n=nt(8+2*r.length);return Sm(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function one(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?aa(qs(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?jt(t,2,_J(r,n,i)):jt(t,3,wJ(r,n,i));return;case"b":case"e":jt(t,5,sne(r,n,e.v,e.t));return;case"s":case"str":jt(t,4,ane(r,n,(e.v||"").slice(0,255)));return}jt(t,1,Sm(null,r,n))}function lne(t,e,r,n){var i=Array.isArray(e),s=Gn(e["!ref"]||"A1"),a,o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=Ri(s)}for(var c=s.s.r;c<=s.e.r;++c){o=us(c);for(var h=s.s.c;h<=s.e.c;++h){c===s.s.r&&(l[h]=Ps(h)),a=l[h]+o;var d=i?(e[c]||[])[h]:e[a];d&&one(t,d,c,h)}}}function cne(t,e){for(var r=e||{},n=sa(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(i=s);if(i==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return jt(n,r.biff==4?1033:r.biff==3?521:9,h4(t,16,r)),lne(n,t.Sheets[t.SheetNames[i]],i,r),jt(n,10),n.end()}function une(t,e,r){jt(t,49,nJ({sz:12,name:"Arial"},r))}function hne(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&jt(t,1054,aJ(i,e[i],r))})}function dne(t,e){var r=nt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),jt(t,2151,r),r=nt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),UL(Gn(e["!ref"]||"A1"),r),r.write_shift(4,4),jt(t,2152,r)}function fne(t,e){for(var r=0;r<16;++r)jt(t,224,jT({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){jt(t,224,jT(n,0,e))})}function pne(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];jt(t,440,pJ(n)),n[1].Tooltip&&jt(t,2048,mJ(n))}delete e["!links"]}function mne(t,e){if(e){var r=0;e.forEach(function(n,i){++r<=256&&n&&jt(t,125,yJ($2(i,n),i))})}}function gne(t,e,r,n,i){var s=16+Pu(i.cellXfs,e,i);if(e.v==null&&!e.bf){jt(t,513,bh(r,n,s));return}if(e.bf)jt(t,6,Uee(e,r,n,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?aa(qs(e.v)):e.v;jt(t,515,uJ(r,n,a,s));break;case"b":case"e":jt(t,517,cJ(r,n,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=g4(i.Strings,e.v,i.revStrings);jt(t,253,iJ(r,n,o,s))}else jt(t,516,sJ(r,n,(e.v||"").slice(0,255),s,i));break;default:jt(t,513,bh(r,n,s))}}function xne(t,e,r){var n=sa(),i=r.SheetNames[t],s=r.Sheets[i]||{},a=(r||{}).Workbook||{},o=(a.Sheets||[])[t]||{},l=Array.isArray(s),c=e.biff==8,h,d="",p=[],f=Gn(s["!ref"]||"A1"),v=c?65536:16384;if(f.e.c>255||f.e.r>=v){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,v-1)}jt(n,2057,h4(r,16,e)),jt(n,13,Qa(1)),jt(n,12,Qa(100)),jt(n,15,zs(!0)),jt(n,17,zs(!1)),jt(n,16,_h(.001)),jt(n,95,zs(!0)),jt(n,42,zs(!1)),jt(n,43,zs(!1)),jt(n,130,Qa(1)),jt(n,128,lJ()),jt(n,131,zs(!1)),jt(n,132,zs(!1)),c&&mne(n,s["!cols"]),jt(n,512,oJ(f,e)),c&&(s["!links"]=[]);for(var x=f.s.r;x<=f.e.r;++x){d=us(x);for(var _=f.s.c;_<=f.e.c;++_){x===f.s.r&&(p[_]=Ps(_)),h=p[_]+d;var w=l?(s[x]||[])[_]:s[h];w&&(gne(n,w,x,_,e),c&&w.l&&s["!links"].push([h,w.l]))}}var S=o.CodeName||o.name||i;return c&&jt(n,574,rJ((a.Views||[])[0])),c&&(s["!merges"]||[]).length&&jt(n,229,fJ(s["!merges"])),c&&pne(n,s),jt(n,442,BL(S)),c&&dne(n,s),jt(n,10),n.end()}function yne(t,e,r){var n=sa(),i=(t||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=r.biff==8,l=r.biff==5;if(jt(n,2057,h4(t,5,r)),r.bookType=="xla"&&jt(n,135),jt(n,225,o?Qa(1200):null),jt(n,193,HQ(2)),l&&jt(n,191),l&&jt(n,192),jt(n,226),jt(n,92,JQ("SheetJS",r)),jt(n,66,Qa(o?1200:1252)),o&&jt(n,353,Qa(0)),o&&jt(n,448),jt(n,317,vJ(t.SheetNames.length)),o&&t.vbaraw&&jt(n,211),o&&t.vbaraw){var c=a.CodeName||"ThisWorkbook";jt(n,442,BL(c))}jt(n,156,Qa(17)),jt(n,25,zs(!1)),jt(n,18,zs(!1)),jt(n,19,Qa(0)),o&&jt(n,431,zs(!1)),o&&jt(n,444,Qa(0)),jt(n,61,tJ()),jt(n,64,zs(!1)),jt(n,141,Qa(0)),jt(n,34,zs(Sre(t)=="true")),jt(n,14,zs(!0)),o&&jt(n,439,zs(!1)),jt(n,218,Qa(0)),une(n,t,r),hne(n,t.SSF,r),fne(n,r),o&&jt(n,352,zs(!1));var h=n.end(),d=sa();o&&jt(d,140,gJ()),o&&r.Strings&&ine(d,252,eJ(r.Strings)),jt(d,10);var p=d.end(),f=sa(),v=0,x=0;for(x=0;x<t.SheetNames.length;++x)v+=(o?12:11)+(o?2:1)*t.SheetNames[x].length;var _=h.length+v+p.length;for(x=0;x<t.SheetNames.length;++x){var w=s[x]||{};jt(f,133,ZQ({pos:_,hs:w.Hidden||0,dt:0,name:t.SheetNames[x]},r)),_+=e[x].length}var S=f.end();if(v!=S.length)throw new Error("BS8 "+v+" != "+S.length);var N=[];return h.length&&N.push(h),S.length&&N.push(S),p.length&&N.push(p),os(N)}function vne(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=oa(di)),t&&t.SSF&&(B2(),O2(t.SSF),r.revssf=U2(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,x4(r),r.cellXfs=[],Pu(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)n[n.length]=xne(i,r,t);return n.unshift(yne(t,n,r)),os(n)}function dj(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var i=Fa(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return vne(t,e);case 4:case 3:case 2:return cne(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function wne(t,e,r,n){for(var i=t["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>r||i[c].s.c>a)&&!(i[c].e.r<r||i[c].e.c<a)){if(i[c].s.r<r||i[c].s.c<a){o=-1;break}o=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(o<0)){var h=Nn({r,c:a}),d=n.dense?(t[r]||[])[a]:t[h],p=d&&d.v!=null&&(d.h||QX(d.w||(Jl(d),d.w)||""))||"",f={};o>1&&(f.rowspan=o),l>1&&(f.colspan=l),n.editable?p='<span contenteditable="true">'+p+"</span>":d&&(f["data-t"]=d&&d.t||"z",d.v!=null&&(f["data-v"]=d.v),d.z!=null&&(f["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+d.l.Target+'">'+p+"</a>")),f.id=(n.id||"sjs")+"-"+h,s.push(Lt("td",p,f))}}var v="<tr>";return v+s.join("")+"</tr>"}var _ne='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',bne="</body></html>";function Sne(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function fj(t,e){var r=e||{},n=r.header!=null?r.header:_ne,i=r.footer!=null?r.footer:bne,s=[n],a=Fa(t["!ref"]);r.dense=Array.isArray(t),s.push(Sne(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)s.push(wne(t,a,o,r));return s.push("</table>"+i),s.join("")}function pj(t,e,r){var n=r||{},i=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var a=typeof n.origin=="string"?Yi(n.origin):n.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(t["!ref"]){var h=Fa(t["!ref"]);c.s.r=Math.min(c.s.r,h.s.r),c.s.c=Math.min(c.s.c,h.s.c),c.e.r=Math.max(c.e.r,h.e.r),c.e.c=Math.max(c.e.c,h.e.c),i==-1&&(c.e.r=i=h.e.r+1)}var d=[],p=0,f=t["!rows"]||(t["!rows"]=[]),v=0,x=0,_=0,w=0,S=0,N=0;for(t["!cols"]||(t["!cols"]=[]);v<o.length&&x<l;++v){var j=o[v];if(VT(j)){if(n.display)continue;f[x]={hidden:!0}}var z=j.children;for(_=w=0;_<z.length;++_){var W=z[_];if(!(n.display&&VT(W))){var b=W.hasAttribute("data-v")?W.getAttribute("data-v"):W.hasAttribute("v")?W.getAttribute("v"):tQ(W.innerHTML),T=W.getAttribute("data-z")||W.getAttribute("z");for(p=0;p<d.length;++p){var A=d[p];A.s.c==w+s&&A.s.r<x+i&&x+i<=A.e.r&&(w=A.e.c+1-s,p=-1)}N=+W.getAttribute("colspan")||1,((S=+W.getAttribute("rowspan")||1)>1||N>1)&&d.push({s:{r:x+i,c:w+s},e:{r:x+i+(S||1)-1,c:w+s+(N||1)-1}});var F={t:"s",v:b},k=W.getAttribute("data-t")||W.getAttribute("t")||"";b!=null&&(b.length==0?F.t=k||"z":n.raw||b.trim().length==0||k=="s"||(b==="TRUE"?F={t:"b",v:!0}:b==="FALSE"?F={t:"b",v:!1}:isNaN(Bl(b))?isNaN(Bp(b).getDate())||(F={t:"d",v:qs(b)},n.cellDates||(F={t:"n",v:aa(F.v)}),F.z=n.dateNF||di[14]):F={t:"n",v:Bl(b)})),F.z===void 0&&T!=null&&(F.z=T);var L="",R=W.getElementsByTagName("A");if(R&&R.length)for(var le=0;le<R.length&&!(R[le].hasAttribute("href")&&(L=R[le].getAttribute("href"),L.charAt(0)!="#"));++le);L&&L.charAt(0)!="#"&&(F.l={Target:L}),n.dense?(t[x+i]||(t[x+i]=[]),t[x+i][w+s]=F):t[Nn({c:w+s,r:x+i})]=F,c.e.c<w+s&&(c.e.c=w+s),w+=N}}++x}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,x-1+i),t["!ref"]=Ri(c),x>=l&&(t["!fullref"]=Ri((c.e.r=o.length-v+x-1+i,c))),t}function mj(t,e){var r=e||{},n=r.dense?[]:{};return pj(n,t,e)}function Ene(t,e){return Ih(mj(t,e),e)}function VT(t){var e="",r=Ane(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Ane(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Nne=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Vp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return ji+e}}(),zT=function(){var t=function(s){return En(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,a,o){var l=[];l.push('      <table:table table:name="'+En(a.SheetNames[o])+`" table:style-name="ta1">
`);var c=0,h=0,d=Fa(s["!ref"]||"A1"),p=s["!merges"]||[],f=0,v=Array.isArray(s);if(s["!cols"])for(h=0;h<=d.e.c;++h)l.push("        <table:table-column"+(s["!cols"][h]?' table:style-name="co'+s["!cols"][h].ods+'"':"")+`></table:table-column>
`);var x="",_=s["!rows"]||[];for(c=0;c<d.s.r;++c)x=_[c]?' table:style-name="ro'+_[c].ods+'"':"",l.push("        <table:table-row"+x+`></table:table-row>
`);for(;c<=d.e.r;++c){for(x=_[c]?' table:style-name="ro'+_[c].ods+'"':"",l.push("        <table:table-row"+x+`>
`),h=0;h<d.s.c;++h)l.push(e);for(;h<=d.e.c;++h){var w=!1,S={},N="";for(f=0;f!=p.length;++f)if(!(p[f].s.c>h)&&!(p[f].s.r>c)&&!(p[f].e.c<h)&&!(p[f].e.r<c)){(p[f].s.c!=h||p[f].s.r!=c)&&(w=!0),S["table:number-columns-spanned"]=p[f].e.c-p[f].s.c+1,S["table:number-rows-spanned"]=p[f].e.r-p[f].s.r+1;break}if(w){l.push(r);continue}var j=Nn({r:c,c:h}),z=v?(s[c]||[])[h]:s[j];if(z&&z.f&&(S["table:formula"]=En(Wee(z.f)),z.F&&z.F.slice(0,j.length)==j)){var W=Fa(z.F);S["table:number-matrix-columns-spanned"]=W.e.c-W.s.c+1,S["table:number-matrix-rows-spanned"]=W.e.r-W.s.r+1}if(!z){l.push(e);continue}switch(z.t){case"b":N=z.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=z.v?"true":"false";break;case"n":N=z.w||String(z.v||0),S["office:value-type"]="float",S["office:value"]=z.v||0;break;case"s":case"str":N=z.v==null?"":z.v,S["office:value-type"]="string";break;case"d":N=z.w||qs(z.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=qs(z.v).toISOString(),S["table:style-name"]="ce1";break;default:l.push(e);continue}var b=t(N);if(z.l&&z.l.Target){var T=z.l.Target;T=T.charAt(0)=="#"?"#"+Kee(T.slice(1)):T,T.charAt(0)!="#"&&!T.match(/^\w+:/)&&(T="../"+T),b=Lt("text:a",b,{"xlink:href":T.replace(/&/g,"&amp;")})}l.push("          "+Lt("table:table-cell",Lt("text:p",b,{}),S)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(c){return a.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var h=0;h<c["!cols"].length;++h)if(c["!cols"][h]){var d=c["!cols"][h];if(d.width==null&&d.wpx==null&&d.wch==null)continue;d4(d),d.ods=o;var p=c["!cols"][h].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(c){return a.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var h=0;h<c["!rows"].length;++h)if(c["!rows"][h]){c["!rows"][h].ods=l;var d=c["!rows"][h].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var l=[ji],c=Vp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),h=Vp({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+c+h+`>
`),l.push(IL().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),i(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var d=0;d!=a.SheetNames.length;++d)l.push(n(a.Sheets[a.SheetNames[d]],a,d));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function gj(t,e){if(e.bookType=="fods")return zT(t,e);var r=t4(),n="",i=[],s=[];return n="mimetype",Br(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Br(r,n,zT(t,e)),i.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Br(r,n,Nne(t,e)),i.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Br(r,n,ji+IL()),i.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Br(r,n,OQ(s)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Br(r,n,DQ(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Mx(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Tne(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Ao(Up(t))}function kne(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function bu(t){var e=t.reduce(function(i,s){return i+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(i){r.set(i,n),n+=i.length}),r}function Cne(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=r>=0?0:128}function zp(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function _n(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Wd(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Bi(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],i=zp(t,r),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=zp(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(n))}var c={data:o,type:s};e[i]==null?e[i]=[c]:e[i].push(c)}return e}function rs(t){var e=[];return t.forEach(function(r,n){r.forEach(function(i){i.data&&(e.push(_n(n*8+i.type)),i.type==2&&e.push(_n(i.data.length)),e.push(i.data))})}),bu(e)}function yo(t){for(var e,r=[],n=[0];n[0]<t.length;){var i=zp(t,n),s=Bi(t.slice(n[0],n[0]+i));n[0]+=i;var a={id:Wd(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=Bi(o.data),c=Wd(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=s[3])!=null&&e[0]&&(a.merge=Wd(s[3][0].data)>>>0>0),r.push(a)}return r}function qh(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:_n(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:_n(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:_n(a.data.length)}],n[2].push({data:rs(a.meta),type:2})});var s=rs(n);e.push(_n(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),bu(e)}function Ine(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=zp(e,r),i=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}i.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(s==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,s==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),i=[bu(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var h=bu(i);if(h.length!=n)throw new Error("Unexpected length: ".concat(h.length," != ").concat(n));return h}function vo(t){for(var e=[],r=0;r<t.length;){var n=t[r++],i=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(Ine(n,t.slice(r,r+i))),r+=i}if(r!==t.length)throw new Error("data is not a valid framed stream!");return bu(e)}function Wh(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),i=new Uint8Array(4);e.push(i);var s=_n(n),a=s.length;e.push(s),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),a+=n,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,r+=n}return bu(e)}function Bv(t,e){var r=new Uint8Array(32),n=Mx(r),i=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,Cne(r,i,t.v),s|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(i,e.indexOf(t.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,i)}function Uv(t,e){var r=new Uint8Array(32),n=Mx(r),i=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(i,e.indexOf(t.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,i)}function Ac(t){var e=Bi(t);return zp(e[1][0].data)}function Pne(t,e,r){var n,i,s,a;if(!((n=t[6])!=null&&n[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=t[8])==null?void 0:s[0])==null?void 0:a.data)&&Wd(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=Mx(t[7][0].data),h=0,d=[],p=Mx(t[4][0].data),f=0,v=[],x=0;x<e.length;++x){if(e[x]==null){c.setUint16(x*2,65535,!0),p.setUint16(x*2,65535);continue}c.setUint16(x*2,h,!0),p.setUint16(x*2,f,!0);var _,w;switch(typeof e[x]){case"string":_=Bv({t:"s",v:e[x]},r),w=Uv({t:"s",v:e[x]},r);break;case"number":_=Bv({t:"n",v:e[x]},r),w=Uv({t:"n",v:e[x]},r);break;case"boolean":_=Bv({t:"b",v:e[x]},r),w=Uv({t:"b",v:e[x]},r);break;default:throw new Error("Unsupported value "+e[x])}d.push(_),h+=_.length,v.push(w),f+=w.length,++l}for(t[2][0].data=_n(l);x<t[7][0].data.length/2;++x)c.setUint16(x*2,65535,!0),p.setUint16(x*2,65535,!0);return t[6][0].data=bu(d),t[3][0].data=bu(v),l}function Rne(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Fa(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Ri(n)));var s=Ox(r,{range:n,header:1}),a=["~Sh33tJ5~"];s.forEach(function(B){return B.forEach(function(U){typeof U=="string"&&a.push(U)})});var o={},l=[],c=kn.read(e.numbers,{type:"base64"});c.FileIndex.map(function(B,U){return[B,c.FullPaths[U]]}).forEach(function(B){var U=B[0],H=B[1];if(U.type==2&&U.name.match(/\.iwa/)){var te=U.content,fe=vo(te),Ae=yo(fe);Ae.forEach(function(Te){l.push(Te.id),o[Te.id]={deps:[],location:H,type:Wd(Te.messages[0].meta[1][0].data)}})}}),l.sort(function(B,U){return B-U});var h=l.filter(function(B){return B>1}).map(function(B){return[B,_n(B)]});c.FileIndex.map(function(B,U){return[B,c.FullPaths[U]]}).forEach(function(B){var U=B[0];if(B[1],!!U.name.match(/\.iwa/)){var H=yo(vo(U.content));H.forEach(function(te){te.messages.forEach(function(fe){h.forEach(function(Ae){te.messages.some(function(Te){return Wd(Te.meta[1][0].data)!=11006&&kne(Te.data,Ae[1])})&&o[Ae[0]].deps.push(te.id)})})})}});for(var d=kn.find(c,o[1].location),p=yo(vo(d.content)),f,v=0;v<p.length;++v){var x=p[v];x.id==1&&(f=x)}var _=Ac(Bi(f.messages[0].data)[1][0].data);for(d=kn.find(c,o[_].location),p=yo(vo(d.content)),v=0;v<p.length;++v)x=p[v],x.id==_&&(f=x);for(_=Ac(Bi(f.messages[0].data)[2][0].data),d=kn.find(c,o[_].location),p=yo(vo(d.content)),v=0;v<p.length;++v)x=p[v],x.id==_&&(f=x);for(_=Ac(Bi(f.messages[0].data)[2][0].data),d=kn.find(c,o[_].location),p=yo(vo(d.content)),v=0;v<p.length;++v)x=p[v],x.id==_&&(f=x);var w=Bi(f.messages[0].data);{w[6][0].data=_n(n.e.r+1),w[7][0].data=_n(n.e.c+1);var S=Ac(w[46][0].data),N=kn.find(c,o[S].location),j=yo(vo(N.content));{for(var z=0;z<j.length&&j[z].id!=S;++z);if(j[z].id!=S)throw"Bad ColumnRowUIDMapArchive";var W=Bi(j[z].messages[0].data);W[1]=[],W[2]=[],W[3]=[];for(var b=0;b<=n.e.c;++b){var T=[];T[1]=T[2]=[{type:0,data:_n(b+420690)}],W[1].push({type:2,data:rs(T)}),W[2].push({type:0,data:_n(b)}),W[3].push({type:0,data:_n(b)})}W[4]=[],W[5]=[],W[6]=[];for(var A=0;A<=n.e.r;++A)T=[],T[1]=T[2]=[{type:0,data:_n(A+726270)}],W[4].push({type:2,data:rs(T)}),W[5].push({type:0,data:_n(A)}),W[6].push({type:0,data:_n(A)});j[z].messages[0].data=rs(W)}N.content=Wh(qh(j)),N.size=N.content.length,delete w[46];var F=Bi(w[4][0].data);{F[7][0].data=_n(n.e.r+1);var k=Bi(F[1][0].data),L=Ac(k[2][0].data);N=kn.find(c,o[L].location),j=yo(vo(N.content));{if(j[0].id!=L)throw"Bad HeaderStorageBucket";var R=Bi(j[0].messages[0].data);for(A=0;A<s.length;++A){var le=Bi(R[2][0].data);le[1][0].data=_n(A),le[4][0].data=_n(s[A].length),R[2][A]={type:R[2][0].type,data:rs(le)}}j[0].messages[0].data=rs(R)}N.content=Wh(qh(j)),N.size=N.content.length;var ve=Ac(F[2][0].data);N=kn.find(c,o[ve].location),j=yo(vo(N.content));{if(j[0].id!=ve)throw"Bad HeaderStorageBucket";for(R=Bi(j[0].messages[0].data),b=0;b<=n.e.c;++b)le=Bi(R[2][0].data),le[1][0].data=_n(b),le[4][0].data=_n(n.e.r+1),R[2][b]={type:R[2][0].type,data:rs(le)};j[0].messages[0].data=rs(R)}N.content=Wh(qh(j)),N.size=N.content.length;var ge=Ac(F[4][0].data);(function(){for(var B=kn.find(c,o[ge].location),U=yo(vo(B.content)),H,te=0;te<U.length;++te){var fe=U[te];fe.id==ge&&(H=fe)}var Ae=Bi(H.messages[0].data);{Ae[3]=[];var Te=[];a.forEach(function(Qe,dt){Te[1]=[{type:0,data:_n(dt)}],Te[2]=[{type:0,data:_n(1)}],Te[3]=[{type:2,data:Tne(Qe)}],Ae[3].push({type:2,data:rs(Te)})})}H.messages[0].data=rs(Ae);var Pe=qh(U),et=Wh(Pe);B.content=et,B.size=B.content.length})();var ye=Bi(F[3][0].data);{var ce=ye[1][0];delete ye[2];var be=Bi(ce.data);{var Me=Ac(be[2][0].data);(function(){for(var B=kn.find(c,o[Me].location),U=yo(vo(B.content)),H,te=0;te<U.length;++te){var fe=U[te];fe.id==Me&&(H=fe)}var Ae=Bi(H.messages[0].data);{delete Ae[6],delete ye[7];var Te=new Uint8Array(Ae[5][0].data);Ae[5]=[];for(var Pe=0,et=0;et<=n.e.r;++et){var Qe=Bi(Te);Pe+=Pne(Qe,s[et],a),Qe[1][0].data=_n(et),Ae[5].push({data:rs(Qe),type:2})}Ae[1]=[{type:0,data:_n(n.e.c+1)}],Ae[2]=[{type:0,data:_n(n.e.r+1)}],Ae[3]=[{type:0,data:_n(Pe)}],Ae[4]=[{type:0,data:_n(n.e.r+1)}]}H.messages[0].data=rs(Ae);var dt=qh(U),wt=Wh(dt);B.content=wt,B.size=B.content.length})()}ce.data=rs(be)}F[3][0].data=rs(ye)}w[4][0].data=rs(F)}f.messages[0].data=rs(w);var Le=qh(p),I=Wh(Le);return d.content=I,d.size=d.content.length,c}function Lne(t){return function(r){for(var n=0;n!=t.length;++n){var i=t[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function x4(t){Lne([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function jne(t,e){return e.bookType=="ods"?gj(t,e):e.bookType=="numbers"?Rne(t,e):e.bookType=="xlsb"?Fne(t,e):Dne(t,e)}function Fne(t,e){Ed=1024,t&&!t.SSF&&(t.SSF=oa(di)),t&&t.SSF&&(B2(),O2(t.SSF),e.revssf=U2(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Z0?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=JL.indexOf(e.bookType)>-1,i=TL();x4(e=e||{});var s=t4(),a="",o=0;if(e.cellXfs=[],Pu(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",Br(s,a,PL(t.Props,e)),i.coreprops.push(a),bn(e.rels,2,a,ln.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Br(s,a,LL(t.Props)),i.extprops.push(a),bn(e.rels,3,a,ln.EXT_PROPS),t.Custprops!==t.Props&&fs(t.Custprops||{}).length>0&&(a="docProps/custom.xml",Br(s,a,jL(t.Custprops)),i.custprops.push(a),bn(e.rels,4,a,ln.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},d=t.Sheets[t.SheetNames[o-1]],p=(d||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,Br(s,a,Ore(o-1,a,e,t,h)),i.sheets.push(a),bn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,ln.WS[0])}if(d){var f=d["!comments"],v=!1,x="";f&&f.length>0&&(x="xl/comments"+o+"."+r,Br(s,x,Vre(f,x)),i.comments.push(x),bn(h,-1,"../comments"+o+"."+r,ln.CMNT),v=!0),d["!legacy"]&&v&&Br(s,"xl/drawings/vmlDrawing"+o+".vml",XL(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}h["!id"].rId1&&Br(s,CL(a),$d(h))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,Br(s,a,Ure(e.Strings,a,e)),i.strs.push(a),bn(e.wbrels,-1,"sharedStrings."+r,ln.SST)),a="xl/workbook."+r,Br(s,a,Mre(t,a)),i.workbooks.push(a),bn(e.rels,1,a,ln.WB),a="xl/theme/theme1.xml",Br(s,a,GL(t.Themes,e)),i.themes.push(a),bn(e.wbrels,-1,"theme/theme1.xml",ln.THEME),a="xl/styles."+r,Br(s,a,Bre(t,a,e)),i.styles.push(a),bn(e.wbrels,-1,"styles."+r,ln.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",Br(s,a,t.vbaraw),i.vba.push(a),bn(e.wbrels,-1,"vbaProject.bin",ln.VBA)),a="xl/metadata."+r,Br(s,a,zre(a)),i.metadata.push(a),bn(e.wbrels,-1,"metadata."+r,ln.XLMETA),Br(s,"[Content_Types].xml",kL(i,e)),Br(s,"_rels/.rels",$d(e.rels)),Br(s,"xl/_rels/workbook."+r+".rels",$d(e.wbrels)),delete e.revssf,delete e.ssf,s}function Dne(t,e){Ed=1024,t&&!t.SSF&&(t.SSF=oa(di)),t&&t.SSF&&(B2(),O2(t.SSF),e.revssf=U2(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Z0?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=JL.indexOf(e.bookType)>-1,i=TL();x4(e=e||{});var s=t4(),a="",o=0;if(e.cellXfs=[],Pu(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",Br(s,a,PL(t.Props,e)),i.coreprops.push(a),bn(e.rels,2,a,ln.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Br(s,a,LL(t.Props)),i.extprops.push(a),bn(e.rels,3,a,ln.EXT_PROPS),t.Custprops!==t.Props&&fs(t.Custprops||{}).length>0&&(a="docProps/custom.xml",Br(s,a,jL(t.Custprops)),i.custprops.push(a),bn(e.rels,4,a,ln.CUST_PROPS));var h=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],f=(p||{})["!type"]||"sheet";switch(f){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,Br(s,a,oj(o-1,e,t,d)),i.sheets.push(a),bn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,ln.WS[0])}if(p){var v=p["!comments"],x=!1,_="";if(v&&v.length>0){var w=!1;v.forEach(function(S){S[1].forEach(function(N){N.T==!0&&(w=!0)})}),w&&(_="xl/threadedComments/threadedComment"+o+"."+r,Br(s,_,fZ(v,h,e)),i.threadedcomments.push(_),bn(d,-1,"../threadedComments/threadedComment"+o+"."+r,ln.TCMNT)),_="xl/comments"+o+"."+r,Br(s,_,QL(v)),i.comments.push(_),bn(d,-1,"../comments"+o+"."+r,ln.CMNT),x=!0}p["!legacy"]&&x&&Br(s,"xl/drawings/vmlDrawing"+o+".vml",XL(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}d["!id"].rId1&&Br(s,CL(a),$d(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,Br(s,a,zL(e.Strings,e)),i.strs.push(a),bn(e.wbrels,-1,"sharedStrings."+r,ln.SST)),a="xl/workbook."+r,Br(s,a,uj(t)),i.workbooks.push(a),bn(e.rels,1,a,ln.WB),a="xl/theme/theme1.xml",Br(s,a,GL(t.Themes,e)),i.themes.push(a),bn(e.wbrels,-1,"theme/theme1.xml",ln.THEME),a="xl/styles."+r,Br(s,a,WL(t,e)),i.styles.push(a),bn(e.wbrels,-1,"styles."+r,ln.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",Br(s,a,t.vbaraw),i.vba.push(a),bn(e.wbrels,-1,"vbaProject.bin",ln.VBA)),a="xl/metadata."+r,Br(s,a,YL()),i.metadata.push(a),bn(e.wbrels,-1,"metadata."+r,ln.XLMETA),h.length>1&&(a="xl/persons/person.xml",Br(s,a,pZ(h)),i.people.push(a),bn(e.wbrels,-1,"persons/person.xml",ln.PEOPLE)),Br(s,"[Content_Types].xml",kL(i,e)),Br(s,"_rels/.rels",$d(e.rels)),Br(s,"xl/_rels/workbook."+r+".rels",$d(e.wbrels)),delete e.revssf,delete e.ssf,s}function Mne(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Ql(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function xj(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return vm(e.file,kn.write(t,{type:hn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return kn.write(t,e)}function One(t,e){var r=oa(e||{}),n=jne(t,r);return Bne(n,r)}function Bne(t,e){var r={},n=hn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?kn.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(M2(i))}return e.password&&typeof encrypt_agile<"u"?xj(encrypt_agile(i,e.password),e):e.type==="file"?vm(e.file,i):e.type=="string"?Y0(i):i}function Une(t,e){var r=e||{},n=rne(t,r);return xj(n,r)}function Wo(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return Op(Up(n));case"binary":return Up(n);case"string":return t;case"file":return vm(e.file,n,"utf8");case"buffer":return hn?rc(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Wo(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Vne(t,e){switch(e.type){case"base64":return Op(t);case"binary":return t;case"string":return t;case"file":return vm(e.file,t,"binary");case"buffer":return hn?rc(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function jg(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?Op(r):e.type=="string"?Y0(r):r;case"file":return vm(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function yj(t,e){mX(),Nre(t);var r=oa(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=yj(t,r);return r.type="array",M2(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=t.SheetNames.indexOf(r.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Wo(ene(t,r),r);case"slk":case"sylk":return Wo(SJ.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"htm":case"html":return Wo(fj(t.Sheets[t.SheetNames[i]],r),r);case"txt":return Vne(vj(t.Sheets[t.SheetNames[i]],r),r);case"csv":return Wo(y4(t.Sheets[t.SheetNames[i]],r),r,"\uFEFF");case"dif":return Wo(EJ.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"dbf":return jg(bJ.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"prn":return Wo(AJ.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"rtf":return Wo(RJ.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"eth":return Wo(VL.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"fods":return Wo(gj(t,r),r);case"wk1":return jg(FT.sheet_to_wk1(t.Sheets[t.SheetNames[i]],r),r);case"wk3":return jg(FT.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),jg(dj(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Une(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return One(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function zne(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function Hne(t,e,r){var n={};return n.type="file",n.file=e,zne(n),yj(t,n)}function $ne(t,e,r,n,i,s,a,o){var l=us(r),c=o.defval,h=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,p=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!a||t[r])for(var f=e.s.c;f<=e.e.c;++f){var v=a?t[r][f]:t[n[f]+l];if(v===void 0||v.t===void 0){if(c===void 0)continue;s[f]!=null&&(p[s[f]]=c);continue}var x=v.v;switch(v.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(s[f]!=null){if(x==null)if(v.t=="e"&&x===null)p[s[f]]=null;else if(c!==void 0)p[s[f]]=c;else if(h&&x===null)p[s[f]]=null;else continue;else p[s[f]]=h&&(v.t!=="n"||v.t==="n"&&o.rawNumbers!==!1)?x:Jl(v,x,o);x!=null&&(d=!1)}}return{row:p,isempty:d}}function Ox(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},h=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof h){case"string":l=Gn(h);break;case"number":l=Gn(t["!ref"]),l.s.r=h;break;default:l=h}n>0&&(i=0);var d=us(l.s.r),p=[],f=[],v=0,x=0,_=Array.isArray(t),w=l.s.r,S=0,N={};_&&!t[w]&&(t[w]=[]);var j=c.skipHidden&&t["!cols"]||[],z=c.skipHidden&&t["!rows"]||[];for(S=l.s.c;S<=l.e.c;++S)if(!(j[S]||{}).hidden)switch(p[S]=Ps(S),r=_?t[w][S]:t[p[S]+d],n){case 1:s[S]=S-l.s.c;break;case 2:s[S]=p[S];break;case 3:s[S]=c.header[S-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=Jl(r,null,c),x=N[a]||0,!x)N[a]=1;else{do o=a+"_"+x++;while(N[o]);N[a]=x,N[o]=1}s[S]=o}for(w=l.s.r+i;w<=l.e.r;++w)if(!(z[w]||{}).hidden){var W=$ne(t,l,w,p,n,s,_,c);(W.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(f[v++]=W.row)}return f.length=v,f}var HT=/"/g;function qne(t,e,r,n,i,s,a,o){for(var l=!0,c=[],h="",d=us(r),p=e.s.c;p<=e.e.c;++p)if(n[p]){var f=o.dense?(t[r]||[])[p]:t[n[p]+d];if(f==null)h="";else if(f.v!=null){l=!1,h=""+(o.rawNumbers&&f.t=="n"?f.v:Jl(f,null,o));for(var v=0,x=0;v!==h.length;++v)if((x=h.charCodeAt(v))===i||x===s||x===34||o.forceQuotes){h='"'+h.replace(HT,'""')+'"';break}h=="ID"&&(h='"ID"')}else f.f!=null&&!f.F?(l=!1,h="="+f.f,h.indexOf(",")>=0&&(h='"'+h.replace(HT,'""')+'"')):h="";c.push(h)}return o.blankrows===!1&&l?null:c.join(a)}function y4(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var i=Gn(t["!ref"]),s=n.FS!==void 0?n.FS:",",a=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((s=="|"?"\\|":s)+"+$"),h="",d=[];n.dense=Array.isArray(t);for(var p=n.skipHidden&&t["!cols"]||[],f=n.skipHidden&&t["!rows"]||[],v=i.s.c;v<=i.e.c;++v)(p[v]||{}).hidden||(d[v]=Ps(v));for(var x=0,_=i.s.r;_<=i.e.r;++_)(f[_]||{}).hidden||(h=qne(t,i,_,d,a,l,s,n),h!=null&&(n.strip&&(h=h.replace(c,"")),(h||n.blankrows!==!1)&&r.push((x++?o:"")+h)));return delete n.dense,r.join("")}function vj(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=y4(t,e);return r}function Wne(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var i=Gn(t["!ref"]),s="",a=[],o,l=[],c=Array.isArray(t);for(o=i.s.c;o<=i.e.c;++o)a[o]=Ps(o);for(var h=i.s.r;h<=i.e.r;++h)for(s=us(h),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,r=c?(t[h]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function wj(t,e,r){var n=r||{},i=+!n.skipHeader,s=t||{},a=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Yi(n.origin):n.origin;a=l.r,o=l.c}var c,h={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var d=Gn(s["!ref"]);h.e.c=Math.max(h.e.c,d.e.c),h.e.r=Math.max(h.e.r,d.e.r),a==-1&&(a=d.e.r+1,h.e.r=a+e.length-1+i)}else a==-1&&(a=0,h.e.r=e.length-1+i);var p=n.header||[],f=0;e.forEach(function(x,_){fs(x).forEach(function(w){(f=p.indexOf(w))==-1&&(p[f=p.length]=w);var S=x[w],N="z",j="",z=Nn({c:o+f,r:a+_+i});c=Hp(s,z),S&&typeof S=="object"&&!(S instanceof Date)?s[z]=S:(typeof S=="number"?N="n":typeof S=="boolean"?N="b":typeof S=="string"?N="s":S instanceof Date?(N="d",n.cellDates||(N="n",S=aa(S)),j=n.dateNF||di[14]):S===null&&n.nullError&&(N="e",S=0),c?(c.t=N,c.v=S,delete c.w,delete c.R,j&&(c.z=j)):s[z]=c={t:N,v:S},j&&(c.z=j))})}),h.e.c=Math.max(h.e.c,o+p.length-1);var v=us(a);if(i)for(f=0;f<p.length;++f)s[Ps(f+o)+v]={t:"s",v:p[f]};return s["!ref"]=Ri(h),s}function Kne(t,e){return wj(null,t,e)}function Hp(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Yi(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Hp(t,Nn(e)):Hp(t,Nn({r:e,c:r||0}))}function Gne(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Yne(){return{SheetNames:[],Sheets:{}}}function Xne(t,e,r,n){var i=1;if(!r)for(;i<=65535&&t.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||r;for(++i;i<=65535&&t.SheetNames.indexOf(r=a+i)!=-1;++i);}if(cj(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Qne(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Gne(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Jne(t,e){return t.z=e,t}function _j(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Zne(t,e,r){return _j(t,"#"+e,r)}function eie(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function tie(t,e,r,n){for(var i=typeof e!="string"?e:Gn(e),s=typeof e=="string"?e:Ri(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=Hp(t,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=r,n&&(l.D=!0))}return t}var va={encode_col:Ps,encode_row:us,encode_cell:Nn,encode_range:Ri,decode_col:o4,decode_row:a4,split_cell:mQ,decode_cell:Yi,decode_range:Fa,format_cell:Jl,sheet_add_aoa:_L,sheet_add_json:wj,sheet_add_dom:pj,aoa_to_sheet:Pf,json_to_sheet:Kne,table_to_sheet:mj,table_to_book:Ene,sheet_to_csv:y4,sheet_to_txt:vj,sheet_to_json:Ox,sheet_to_html:fj,sheet_to_formulae:Wne,sheet_to_row_object_array:Ox,sheet_get_cell:Hp,book_new:Yne,book_append_sheet:Xne,book_set_sheet_visibility:Qne,cell_set_number_format:Jne,cell_set_hyperlink:_j,cell_set_internal_link:Zne,cell_add_comment:eie,sheet_set_array_formula:tie,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},bj={exports:{}};(function(t,e){(function(r,n){n()})(Yf,function(){function r(c,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function n(c,h,d){var p=new XMLHttpRequest;p.open("GET",c),p.responseType="blob",p.onload=function(){l(p.response,h,d)},p.onerror=function(){console.error("could not download file")},p.send()}function i(c){var h=new XMLHttpRequest;h.open("HEAD",c,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(h)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Yf=="object"&&Yf.global===Yf?Yf:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(c,h,d){var p=a.URL||a.webkitURL,f=document.createElement("a");h=h||c.name||"download",f.download=h,f.rel="noopener",typeof c=="string"?(f.href=c,f.origin===location.origin?s(f):i(f.href)?n(c,h,d):s(f,f.target="_blank")):(f.href=p.createObjectURL(c),setTimeout(function(){p.revokeObjectURL(f.href)},4e4),setTimeout(function(){s(f)},0))}:"msSaveOrOpenBlob"in navigator?function(c,h,d){if(h=h||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(r(c,d),h);else if(i(c))n(c,h,d);else{var p=document.createElement("a");p.href=c,p.target="_blank",setTimeout(function(){s(p)})}}:function(c,h,d,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof c=="string")return n(c,h,d);var f=c.type==="application/octet-stream",v=/constructor/i.test(a.HTMLElement)||a.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||f&&v||o)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var N=_.result;N=x?N:N.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=N:location=N,p=null},_.readAsDataURL(c)}else{var w=a.URL||a.webkitURL,S=w.createObjectURL(c);p?p.location=S:location.href=S,p=null,setTimeout(function(){w.revokeObjectURL(S)},4e4)}});a.saveAs=l.saveAs=l,t.exports=l})})(bj);var rie=bj.exports;const nie=t=>{const{project:e,hierarchies:r,zones:n,assignments:i,doors:s,standard:a,generatedAt:o}=t,l=new ur({orientation:"portrait",unit:"mm",format:"a4"});l.setFontSize(20),l.text("Master Key System",105,20,{align:"center"}),l.setFontSize(12),l.text("Keying Schedule & Documentation",105,30,{align:"center"}),l.setFontSize(10),l.text(`Generated: ${new Date(o).toLocaleString()}`,105,40,{align:"center"}),l.text(`Standard: ${a.name} ${a.version}`,105,47,{align:"center"}),l.setFontSize(14),l.text("Project Information",14,60),l.setFontSize(10);const c=[["Standard",a.name],["Version",a.version],["Region",a.region],["Pin Configuration",`${a.pinConfig.pins} pins, ${a.pinConfig.depths} depths, MACS ${a.pinConfig.macs}`],["Max Differs Available",a.maxDiffers.toLocaleString()],["Differs Used",(e.differsUsed||0).toLocaleString()],["Keying Approach",e.keyingApproach||"zone_based"]];h0(l,{startY:65,head:[["Property","Value"]],body:c,theme:"grid",headStyles:{fillColor:[79,70,229]}}),l.addPage(),l.setFontSize(14),l.text("Hierarchy Structure",14,20);const h=r.sort((v,x)=>v.order-x.order).map((v,x)=>[x+1,v.keySymbol,v.levelName,v.levelType,v.description||"-"]);if(h0(l,{startY:25,head:[["#","Symbol","Level Name","Type","Description"]],body:h,theme:"striped",headStyles:{fillColor:[79,70,229]}}),n.length>0){l.addPage(),l.setFontSize(14),l.text("Zones Defined",14,20);const v=n.map((x,_)=>[_+1,x.zoneName,x.doorCount||0,x.color]);h0(l,{startY:25,head:[["#","Zone Name","Door Count","Color"]],body:v,theme:"striped",headStyles:{fillColor:[79,70,229]}})}l.addPage(),l.setFontSize(14),l.text("Door Assignments",14,20);const d=i.map((v,x)=>{const _=s.find(S=>S.id===v.doorId),w=r.find(S=>S.hierarchyId===v.hierarchyId);return[x+1,(_==null?void 0:_.mark)||"Unknown",(_==null?void 0:_.use)||"-",(_==null?void 0:_.zone)||"-",(_==null?void 0:_.level)||"-",(w==null?void 0:w.keySymbol)||"-",(w==null?void 0:w.levelName)||"-"]});h0(l,{startY:25,head:[["#","Door Mark","Use","Zone","Floor","Key Symbol","Key Level"]],body:d,theme:"striped",headStyles:{fillColor:[79,70,229]},styles:{fontSize:8}}),l.addPage(),l.setFontSize(14),l.text("Statistics Summary",14,20);const p=[["Total Doors",s.length],["Assigned Doors",i.length],["Unassigned Doors",s.length-i.length],["Hierarchy Levels",r.length],["Zones Defined",n.length],["Differs Used",e.differsUsed||0],["Differs Remaining",(e.maxDiffersAvailable||0)-(e.differsUsed||0)]];h0(l,{startY:25,head:[["Metric","Value"]],body:p,theme:"grid",headStyles:{fillColor:[79,70,229]}});const f=`master_key_schedule_${new Date().getTime()}.pdf`;return l.save(f),f},iie=t=>{const{project:e,hierarchies:r,zones:n,assignments:i,doors:s,standard:a,generatedAt:o}=t,l=va.book_new(),c=[["Master Key System - Project Information"],[""],["Generated",new Date(o).toLocaleString()],["Standard",a.name],["Version",a.version],["Region",a.region],["Pin Configuration",`${a.pinConfig.pins} pins, ${a.pinConfig.depths} depths, MACS ${a.pinConfig.macs}`],["Max Differs Available",a.maxDiffers],["Differs Used",e.differsUsed||0],["Differs Remaining",(e.maxDiffersAvailable||0)-(e.differsUsed||0)],["Keying Approach",e.keyingApproach||"zone_based"]],h=va.aoa_to_sheet(c);va.book_append_sheet(l,h,"Project Info");const d=[["#","Key Symbol","Level Name","Level Type","Order","Description"],...r.sort((z,W)=>z.order-W.order).map((z,W)=>[W+1,z.keySymbol,z.levelName,z.levelType,z.order,z.description||"-"])],p=va.aoa_to_sheet(d);if(va.book_append_sheet(l,p,"Hierarchy"),n.length>0){const z=[["#","Zone Name","Door Count","Color"],...n.map((b,T)=>[T+1,b.zoneName,b.doorCount||0,b.color])],W=va.aoa_to_sheet(z);va.book_append_sheet(l,W,"Zones")}const f=[["#","Door Mark","Use","Zone","Floor","Key Symbol","Key Level","Hardware","Fire Rating","ADA"],...i.map((z,W)=>{const b=s.find(A=>A.id===z.doorId),T=r.find(A=>A.hierarchyId===z.hierarchyId);return[W+1,(b==null?void 0:b.mark)||"Unknown",(b==null?void 0:b.use)||"-",(b==null?void 0:b.zone)||"-",(b==null?void 0:b.level)||"-",(T==null?void 0:T.keySymbol)||"-",(T==null?void 0:T.levelName)||"-",(b==null?void 0:b.hardware)||"-",(b==null?void 0:b.fireRating)||"-",b!=null&&b.ada?"Yes":"No"]})],v=va.aoa_to_sheet(f);va.book_append_sheet(l,v,"Keying Schedule");const x={};i.forEach(z=>{const W=r.find(b=>b.hierarchyId===z.hierarchyId);W&&(x[W.keySymbol]||(x[W.keySymbol]={symbol:W.keySymbol,level:W.levelName,count:0}),x[W.keySymbol].count++)});const _=[["Key Symbol","Key Level","Quantity Needed"],...Object.values(x).map(z=>[z.symbol,z.level,z.count])],w=va.aoa_to_sheet(_);va.book_append_sheet(l,w,"Cutting List");const S=[["Master Key System - Statistics"],[""],["Metric","Value"],["Total Doors",s.length],["Assigned Doors",i.length],["Unassigned Doors",s.length-i.length],["Hierarchy Levels",r.length],["Zones Defined",n.length],["Differs Used",e.differsUsed||0],["Differs Remaining",(e.maxDiffersAvailable||0)-(e.differsUsed||0)],["Utilization %",`${((e.differsUsed||0)/(e.maxDiffersAvailable||1)*100).toFixed(2)}%`]],N=va.aoa_to_sheet(S);va.book_append_sheet(l,N,"Statistics");const j=`master_key_schedule_${new Date().getTime()}.xlsx`;return Hne(l,j),j},sie=t=>{const{hierarchies:e,assignments:r,doors:n}=t,s=[["Door Mark","Use","Zone","Floor","Hardware","Fire Rating","ADA","Key Symbol","Key Level"],...r.map(l=>{const c=n.find(d=>d.id===l.doorId),h=e.find(d=>d.hierarchyId===l.hierarchyId);return[(c==null?void 0:c.mark)||"Unknown",(c==null?void 0:c.use)||"-",(c==null?void 0:c.zone)||"-",(c==null?void 0:c.level)||"-",(c==null?void 0:c.hardware)||"-",(c==null?void 0:c.fireRating)||"-",c!=null&&c.ada?"Yes":"No",(h==null?void 0:h.keySymbol)||"-",(h==null?void 0:h.levelName)||"-"]})].map(l=>l.join(",")).join(`
`),a=new Blob([s],{type:"text/csv;charset=utf-8;"}),o=`master_key_schedule_${new Date().getTime()}.csv`;return rie.saveAs(a,o),o},aie=(t,e)=>{try{let r;switch(t){case"pdf":r=nie(e);break;case"excel":r=iie(e);break;case"csv":r=sie(e);break;default:throw new Error(`Unsupported export format: ${t}`)}return{success:!0,filename:r}}catch(r){return console.error("Export failed:",r),{success:!1,error:r.message}}},Fg=({onNext:t,onBack:e,projectDoors:r=[],onExportComplete:n,showNotice:i})=>{const{mkProject:s,hierarchies:a,zones:o,assignments:l,generateExport:c}=fl(),[h,d]=Q.useState("pdf"),[p,f]=Q.useState(!1),[v,x]=Q.useState(!1),_=[{id:"pdf",name:"PDF Document",description:"Professional keying schedule with visual hierarchy tree",icon:g5,color:"red",features:["Complete keying schedule","Visual hierarchy tree","Door assignments table","Standards compliance report"]},{id:"excel",name:"Excel Workbook",description:"Spreadsheet with multiple sheets for analysis",icon:uf,color:"green",features:["Keying schedule sheet","Cutting list sheet","Statistics sheet","Sortable and filterable"]},{id:"csv",name:"CSV Files",description:"Simple text files for custom processing",icon:hW,color:"blue",features:["Keying schedule CSV","Door assignments CSV","Hierarchy levels CSV","Compatible with all systems"]}],w=_.find(N=>N.id===h),S=async()=>{f(!0),x(!1);try{const N=await c(h,{includeHierarchy:!0,includeZones:!0,includeCuttingList:!0},r);console.log("Export data generated:",N);const j=aie(h,N);if(j.success)x(!0),n&&n(),setTimeout(async()=>{i&&await i("Export Successful",`${w.name} generated successfully!

File: ${j.filename}

Your keying schedule has been downloaded and is ready to share with locksmiths and facility managers.`)},500);else throw new Error(j.error||"Export failed")}catch(N){console.error("Export error:",N),i&&await i("Export Failed",`Export failed: ${N.message}

Please ensure all required packages are installed:
npm install jspdf jspdf-autotable xlsx file-saver`)}finally{f(!1)}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-emerald-100 rounded-full mb-4",children:u.jsx(IA,{className:"w-8 h-8 text-emerald-600"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Export & Download"}),u.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Generate professional keying schedules and cutting lists in your preferred format."})]}),u.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-2 border-emerald-300 rounded-xl p-6",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center",children:u.jsx(xh,{className:"w-8 h-8 text-emerald-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-emerald-900 mb-1",children:"Master Key System Complete!"}),u.jsx("p",{className:"text-sm text-emerald-700",children:"You've successfully designed a professional master key system. Download your keying schedule below."})]})]})}),u.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Project Summary"}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Doors"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.length})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Hierarchy Levels"}),u.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:a.length})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Zones Defined"}),u.jsx("div",{className:"text-2xl font-bold text-purple-600",children:o.length})]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Select Export Format"}),u.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:_.map(N=>{const j=N.icon,z=h===N.id;return u.jsxs("button",{onClick:()=>d(N.id),className:`p-6 border-2 rounded-xl text-left transition-all ${z?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300 bg-white"}`,children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${z?"bg-indigo-100":"bg-gray-100"}`,children:u.jsx(j,{size:24,className:z?"text-indigo-600":"text-gray-600"})}),z&&u.jsx(Ca,{className:"text-indigo-600",size:20})]}),u.jsx("div",{className:"font-bold text-gray-900 mb-1",children:N.name}),u.jsx("div",{className:"text-sm text-gray-600 mb-3",children:N.description}),u.jsx("ul",{className:"text-xs text-gray-500 space-y-1",children:N.features.map((W,b)=>u.jsxs("li",{children:[" ",W]},b))})]},N.id)})})]}),w&&u.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"flex-shrink-0",children:No.createElement(w.icon,{size:24,className:"text-indigo-600"})}),u.jsxs("div",{children:[u.jsxs("div",{className:"font-semibold text-indigo-900 mb-1",children:["Ready to export as ",w.name]}),u.jsxs("div",{className:"text-sm text-indigo-700",children:["Your export will include: ",w.features.join(", ")]})]})]})}),u.jsx("div",{className:"flex justify-center pt-4",children:u.jsx("button",{onClick:S,disabled:p,className:"px-8 py-4 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-3 shadow-lg text-lg font-semibold",children:p?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-6 h-6 border-3 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):u.jsxs(u.Fragment,{children:[u.jsx(IA,{size:24}),"Generate & Download"]})})}),v&&u.jsx("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ca,{className:"flex-shrink-0 text-emerald-600 mt-0.5",size:24}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-emerald-900 mb-2",children:"Export Generated Successfully!"}),u.jsxs("div",{className:"text-sm text-emerald-700 mb-3",children:["Your ",w.name.toLowerCase()," has been downloaded and is ready to share."]}),u.jsx("div",{className:"text-xs text-emerald-600",children:"Check your Downloads folder for the exported file."})]})]})}),u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:u.jsxs("p",{className:"text-sm text-blue-800",children:[u.jsx("strong",{children:"What's Next:"})," Share your keying schedule with locksmiths and facility managers. You can always return to edit your master key system design."]})})]})},oie=({projectDoors:t=[],projectName:e="Untitled Project",projectStandard:r="ANSI_BHMA",showNotice:n,showConfirm:i,onBackToSetup:s})=>{const[a,o]=Q.useState(0),[l,c]=Q.useState(!1),{mkProject:h,mkApproach:d,loading:p,updateStandard:f,autoGenerateZones:v}=fl();No.useEffect(()=>{h&&r&&h.standard!==r&&f(r)},[r]),No.useEffect(()=>{(async()=>{if(d==="zone_based"&&a===3&&t.length>0)try{await v(t,"zone_based"),console.log(" Auto-generated zones for zone_based approach")}catch(b){console.error("Failed to auto-generate zones:",b)}})()},[a,d,t]);const _=(()=>{const W=[{id:0,title:"Introduction",shortLabel:"INTRO",component:PW}];return d==="zone_based"?[...W,{id:1,title:"Hierarchy Planning",shortLabel:"PLAN",component:sv},{id:2,title:"Hierarchy Setup",shortLabel:"SETUP",component:av},{id:4,title:"Door Assignment",shortLabel:"ASSIGN",component:ov},{id:5,title:"Validation",shortLabel:"VALIDATE",component:xg},{id:6,title:"Export",shortLabel:"EXPORT",component:Fg}]:d==="custom_hierarchy"?[...W,{id:1,title:"Hierarchy Planning",shortLabel:"PLAN",component:sv},{id:2,title:"Hierarchy Setup",shortLabel:"SETUP",component:av},{id:3,title:"Zone Definition",shortLabel:"ZONES",component:DA},{id:4,title:"Door Assignment",shortLabel:"ASSIGN",component:ov},{id:5,title:"Validation",shortLabel:"VALIDATE",component:xg},{id:6,title:"Export",shortLabel:"EXPORT",component:Fg}]:d==="imported"?[...W,{id:5,title:"Validation",shortLabel:"VALIDATE",component:xg},{id:6,title:"Export",shortLabel:"EXPORT",component:Fg}]:[...W,{id:1,title:"Hierarchy Planning",shortLabel:"PLAN",component:sv},{id:2,title:"Hierarchy Setup",shortLabel:"SETUP",component:av},{id:3,title:"Zone Definition",shortLabel:"ZONES",component:DA},{id:4,title:"Door Assignment",shortLabel:"ASSIGN",component:ov},{id:5,title:"Validation",shortLabel:"VALIDATE",component:xg},{id:6,title:"Export",shortLabel:"EXPORT",component:Fg}]})(),w=_[a],S=w.component,N=()=>{a<_.length-1&&o(a+1)},j=()=>{a>0?o(a-1):a===0&&s&&s()},z=W=>{o(W)};return p?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):h?u.jsxs("div",{className:"animate-slideUp",children:[u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Master Key System Design"}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Step ",a+1," of ",_.length,": ",w.title]})]}),u.jsxs("div",{className:"text-sm text-gray-500",children:["Project: ",u.jsx("span",{className:"font-semibold text-gray-900",children:e})]})]}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsx("div",{className:"grid gap-2 mb-4",style:{gridTemplateColumns:`repeat(${_.length}, 1fr)`},children:_.map((W,b)=>{const T=a===b&&!l,A=a>b||a===_.length-1&&l;return u.jsx("div",{className:"flex flex-col items-center",children:u.jsx("button",{onClick:()=>z(b),className:`text-xs font-bold uppercase tracking-wide transition-colors mb-2 ${T?"text-purple-700":A?"text-emerald-700":"text-gray-400"}`,children:W.shortLabel})},W.id)})}),u.jsx("div",{className:"relative h-2 bg-gray-300 rounded-full overflow-hidden mb-3",children:u.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-purple-600 to-indigo-600 transition-all duration-700 ease-out",style:{width:`${l?100:a*100/(_.length-1)}%`},children:u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-25",style:{animation:"shimmer 2s infinite",transform:"translateX(-100%)"}})})}),u.jsx("div",{className:"relative -mt-7 mb-4",children:u.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${_.length}, 1fr)`},children:_.map((W,b)=>{const T=a===b&&!l,A=a>b||a===_.length-1&&l;return u.jsx("div",{className:"flex justify-center",children:u.jsx("button",{onClick:()=>z(b),className:"focus:outline-none",children:u.jsx("div",{className:`w-8 h-8 rounded-full border-3 flex items-center justify-center transition-all duration-300 ${T?"bg-purple-600 border-white shadow-lg scale-110":A?"bg-emerald-500 border-white shadow-md":"bg-white border-gray-300 hover:border-purple-400 hover:scale-105"}`,children:A&&u.jsx(Vu,{size:16,strokeWidth:3,className:"text-white"})})})},W.id)})})}),u.jsx("div",{className:"text-center",children:u.jsxs("span",{className:"inline-block px-4 py-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white text-xs font-bold rounded-full shadow-md",children:[l?100:Math.round(a*100/(_.length-1)),"% Complete"]})})]})}),u.jsx("style",{children:`
          @keyframes progress-animation {
            0% {
              background-position: 0 0;
            }
            100% {
              background-position: 40px 0;
            }
          }

          @keyframes shimmer {
            0% {
              transform: translateX(-100%);
            }
            100% {
              transform: translateX(200%);
            }
          }

          @keyframes bounce-slow {
            0%, 100% {
              transform: translateY(0);
            }
            50% {
              transform: translateY(-4px);
            }
          }

          @keyframes pulse-slow {
            0%, 100% {
              opacity: 1;
            }
            50% {
              opacity: 0.8;
            }
          }

          .animate-bounce-slow {
            animation: bounce-slow 2s infinite;
          }

          .animate-pulse-slow {
            animation: pulse-slow 2s infinite;
          }
        `})]}),u.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:u.jsx(S,{onNext:N,onBack:j,projectDoors:t,projectName:e,showNotice:n,showConfirm:i,onExportComplete:()=>c(!0)})}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("button",{onClick:j,disabled:a===0&&!s,className:`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ${a===0&&!s?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Gq,{size:20}),a===0?"Back to Setup":"Back"]}),u.jsxs("div",{className:"text-sm text-gray-500",children:["Step ",a+1," / ",_.length]}),u.jsxs("button",{onClick:N,disabled:a===_.length-1,className:`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ${a===_.length-1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 shadow-md"}`,children:[a===_.length-1?"Finish":"Continue",u.jsx(m5,{size:20})]})]})]}):u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[u.jsx("div",{className:"text-gray-400 mb-4",children:u.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Master Key System Not Enabled"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please enable the Master Key System in Step 0 (Project Setup) to access this wizard."}),u.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Refresh Page"})]})},Vv={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BETA_ACCESS_CODE:"INSTAspecbeta@2025",VITE_FB_API_KEY:"AIzaSyCrUZenvUEPbAsZ2zXh27SuZAoBArvos5E",VITE_FB_APP_ID:"1:847536725528:web:0d10c3c1d405a292482d6d",VITE_FB_AUTH_DOMAIN:"instaspec-dev.firebaseapp.com",VITE_FB_MESSAGING_SENDER_ID:"847536725528",VITE_FB_PROJECT_ID:"instaspec-dev",VITE_FB_STORAGE_BUCKET:"instaspec-dev.firebasestorage.app"};var Dg={};const Mg=t=>typeof t!="string"?!1:t.toLowerCase()==="on"||t.toLowerCase()==="true",lie=()=>{try{if(typeof import.meta<"u"&&(Vv!=null&&Vv.VITE_STANDARDS_TRACE))return Mg(void 0)}catch{}if(typeof process<"u"&&(Dg!=null&&Dg.STANDARDS_TRACE))return Mg(Dg.STANDARDS_TRACE);if(typeof window<"u"&&window.STANDARDS_TRACE)return Mg(window.STANDARDS_TRACE);if(typeof localStorage<"u"){const t=localStorage.getItem("STANDARDS_TRACE");if(t)return Mg(t)}return!1},Sj=lie(),cie=t=>{Sj&&typeof console<"u"&&console.debug&&console.debug("[STANDARDS_TRACE]",t)},v4=(t,e,r={})=>{cie({subject:t||"unknown",stage:e,detail:r,at:new Date().toISOString()})},w4=(t,e,r={})=>{v4(t||"set-unknown",e,r)},uie=(t,e=w4)=>{if(!t)return[];const r=[],n=t.doors||[];return(t.sets||[]).forEach(i=>{const s=n.filter(c=>(i.doors||[]).includes(c.id)),a=s.some(c=>c.fire>0),o=s.some(c=>(c.use||"").toLowerCase().includes("stair")||(c.use||"").toLowerCase().includes("exit")),l=s.some(c=>c.material==="Glass");if(a){if(!(i.items||[]).some(d=>d.category==="Closers")){const d=`Fire Rated set ${i.id} is missing a Door Closer.`;r.push({set:i.id,type:"critical",msg:d}),e(i.id,"validation",{rule:"fire-door-closer",msg:d})}if(!(i.items||[]).some(d=>d.category==="Seals")){const d=`Fire Rated set ${i.id} requires perimeter/drop seals.`;r.push({set:i.id,type:"critical",msg:d}),e(i.id,"validation",{rule:"fire-door-seal",msg:d})}}if(o&&!(i.items||[]).some(h=>(h.type||"").toLowerCase().includes("panic"))){const h=`Stair/Exit set ${i.id} is missing Panic Hardware.`;r.push({set:i.id,type:"critical",msg:h}),e(i.id,"validation",{rule:"egress-panic",msg:h})}if(l&&!(i.items||[]).some(h=>(h.type||"").toLowerCase().includes("patch")||(h.type||"").toLowerCase().includes("rail"))){const h=`Glass door set ${i.id} might need Patch Fittings or Rails.`;r.push({set:i.id,type:"warning",msg:h}),e(i.id,"validation",{rule:"glass-support",msg:h})}}),r},rd=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,5),Ej=(t=[],e="D-001")=>{const r=new Set(t.map(s=>s.mark));if(!r.has(e))return e;let n=2,i=`${e}-${String(n).padStart(2,"0")}`;for(;r.has(i);)n+=1,i=`${e}-${String(n).padStart(2,"0")}`;return i},Wu={"Commercial Office":{usages:["Office / Passage","Meeting Room","Director Cabin","Corridor / Circulation","Stairwell / Exit","Restroom","Storage / Service","Server / IT","Main Entrance","Fire Door (Cross-Corridor)","Prayer / Quiet Room"]},"Hospital / Healthcare":{usages:["Patient Room","Operating Theatre","Consultation / Exam","Corridor / Circulation","Stairwell / Exit","Restroom","Clean / Dirty Utility","Main Entrance","Radiation Protection","Prayer / Quiet Room"]},"Education / School":{usages:["Classroom","Assembly / Hall","Staff Office","Corridor / Circulation","Stairwell / Exit","Restroom","Storage / Service","Main Entrance","Gymnasium","Music Room"]},"Airport / Transport":{usages:["Terminal Entry","Security / Checkpoint","Boarding Gate","Corridor / Circulation","Stairwell / Exit","Restroom","Staff Only / Service","Baggage / Logistics","Prayer / Quiet Room"]},"Hospitality / Hotel":{usages:["Guest Room Entry","Connecting Door","Ballroom / Assembly","Kitchen / Service","Corridor / Circulation","Stairwell / Exit","Restroom","Back of House","Main Entrance"]},Residential:{usages:["Unit Entrance (Fire Rated)","Bedroom / Internal","Bathroom / Privacy","Kitchen","Balcony / External","Common Corridor","Stairwell / Exit","Service / Utility"]}},$T={"Meeting Room":40,"Director Cabin":40,"Conference Room":45,"Patient Room":35,"Consultation / Exam":40,Classroom:35,"Music Room":50,"Prayer / Quiet Room":45,"Server / IT":40,"Guest Room Entry":42,"Unit Entrance (Fire Rated)":35,Restroom:30},Aj=["Timber","Metal","Glass","Aluminum"],hie=["Single","Double"],die=["LH","RH","LHR","RHR"],Nj=Array.from(new Set(Object.values(Wu).flatMap(t=>t.usages)));Nj.length*Aj.length*hie.length*die.length;const Oc=[{id:"profiles",value:1216,metric:"Doorset Profiles",subtext:"Ready-to-configure templates for fast project setup.",icon:kf},{id:"scenarios",value:Nj.length,metric:"Use Case Scenarios",subtext:"Preset rules based on building function.",icon:Kq},{id:"facilities",value:Object.keys(Wu).length,metric:"Facility Types",subtext:"Office, Healthcare, Education, Airport, Hotel, Residential.",icon:xx},{id:"materials",value:Aj.length,metric:"Door Materials",subtext:"Timber, Metal, Glass, Aluminum.",icon:gx},{id:"exports",value:3,metric:"Export Formats",subtext:"BIM, PDF, XLSX deliverables in one click.",icon:uf},{id:"standards",value:2,metric:"Global Standards",subtext:"EN and ANSI compliance support.",icon:kR},{id:"dashboard",value:1,metric:"Project Dashboard",subtext:"All projects in one clean, central view.",icon:Rp}],fie=[{label:"Live Insights",title:"Compliance Pulse",body:"Provides real-time checks against commonly referenced safety and accessibility criteria. Specify with confidence."},{label:"Adaptive Visuals",title:"Material Intelligence",body:"Switch between door materials from Timber  Glass  Aluminum and see hardware visuals transform in real-time."}],Og=[{title:"Project Setup",body:"Define facility, fire-rating, and jurisdiction rules -- the rule engine tunes itself instantly."},{title:"Door Schedule",body:"Capture dimensions, STC, ADA, and access logic. Additional locations auto-adjust quantity."},{title:"Hardware Sets",body:"Door Hardware Layout Preview shows hinges, closers, maglocks, and panic trim before specification."},{title:"Validation & Review",body:"Compliance Pulse verifies life-safety, then exports BIM, PDF, and Excel packages in one click."}],Kh=["Project Setup","Door Schedule","Hardware Sets","Validation & Review","Master Key Design"],qT=["SETUP","SCHEDULE","PREVIEW","GENERATE","MASTER KEY"],pie=[{title:"Compliance Support",body:"Helps align hardware with common safety standards.",icon:jp},{title:"Hardware Library",body:"Central library of locks, hinges, closers, and access devices.",icon:Wb},{title:"Team Alignment",body:"Keeps door, hardware, and export data in sync.",icon:H0}],Bg="Notice: All auto-generated door hardware content must be reviewed and approved by a qualified subject-matter expert before it is shared or issued. Proceed only if you acknowledge this requirement.",Tj="Code Check: Main entrance fire rating must be verified per local code based on building height and occupancy.",b1=["1BHK","2BHK","3BHK"],Bx={"1BHK":0,"2BHK":4,"3BHK":0},WT={"1BHK":{bedrooms:1,bathrooms:1},"2BHK":{bedrooms:2,bathrooms:2},"3BHK":{bedrooms:3,bathrooms:3}},kj=(t="")=>String(t).toLowerCase().includes("main entrance"),mie=({doors:t=[]})=>t.some(r=>kj(r.use)&&Number(r.fire)===0)?u.jsxs("div",{className:"mb-3 rounded-lg border border-blue-200 bg-blue-50 px-4 py-3 text-sm text-blue-800 flex items-center gap-3",children:[u.jsx(gh,{size:16}),u.jsx("span",{children:Tj})]}):null,gie={Residential:{floors:4,unitsPerFloor:4,unitMix:{...Bx}},"Education / School":{floors:3,classroomsPerFloor:6,toiletsPerFloor:2,hasAdminLabs:!0},"Commercial Office":{floors:6,openLayout:!0,meetingRooms:4,hasServiceAreas:!0},"Airport / Transport":{floors:2,concourses:1,gatesPerConcourse:6,securityZones:2,hasInternationalZone:!0},"Hospital / Healthcare":{floors:5,patientRoomsPerFloor:12,operatingRooms:4,icuRoomsPerFloor:2,hasEmergencyDept:!0},"Hospitality / Hotel":{floors:10,roomsPerFloor:18,suitesPerFloor:2,hasBallroom:!0,hasServiceZones:!0}},$p=()=>JSON.parse(JSON.stringify(gie)),xie=(t,e)=>{const r=$p(),n=(t==null?void 0:t.instantInputs)||{};return{...r[e],...n[e]||{}}},bo={Hanging:["Hinges"],Securing:["Locks","Cylinders","Electrified"],Controlling:["Closers","Stops","Handles"],Protecting:["Seals","Accessories","Protecting"]},zv=30,KT=t=>{if(typeof structuredClone=="function")return structuredClone(t);try{return JSON.parse(JSON.stringify(t))}catch{return t}},yie=[{id:"Hanging",label:"Hanging",description:"Hinges, pivots and fittings",categories:bo.Hanging,accent:"from-amber-500 to-orange-500",hint:"Edge & hinge zone"},{id:"Securing",label:"Securing",description:"Locks, bolts and electrified hardware",categories:bo.Securing,accent:"from-sky-500 to-indigo-500",hint:"Center lockface"},{id:"Controlling",label:"Controlling",description:"Closers, holders and motion control hardware",categories:bo.Controlling,accent:"from-emerald-500 to-emerald-700",hint:"Top frame / closer"},{id:"Protecting",label:"Protecting",description:"Kick plates, seals and protective accessories",categories:bo.Protecting,accent:"from-slate-500 to-slate-700",hint:"Bottom/kick zone"}],vie=(t=[])=>t.reduce((e,r)=>{var s;const n=Ux[r];if(!((s=n==null?void 0:n.types)!=null&&s.length))return e;const i=n.types.map(a=>({...a,category:r,csi:n.csi||"",description:(a.styles||[]).slice(0,2).join(", ")}));return e.concat(i)},[]),wie=t=>["Hinges"].includes(t)?"Hanging the Door":["Locks","Cylinders","Electrified"].includes(t)?"Securing the Door":["Closers","Stops","Handles","Auto Operator"].includes(t)?"Controlling the Door":["Seals","Accessories","Protecting","Kick Plate","Threshold"].includes(t)?"Protecting the Door":"Other Hardware",Ux={Hinges:{csi:"08 71 10",types:[{name:"Butt Hinge",styles:["Ball Bearing","Plain Bearing","Concealed Bearing","Spring Hinge"]},{name:"Concealed Hinge",styles:["3D Adjustable","Spring Concealed"]},{name:"Pivot Set",styles:["Offset Pivot","Center Hung","Intermediate Pivot"]},{name:"Continuous Hinge",styles:["Geared Aluminum","Pin & Barrel Stainless"]},{name:"Patch Fitting",styles:["Top Patch","Bottom Patch","Overpanel Patch"]}]},Locks:{csi:"08 71 50",types:[{name:"Mortise Lock",styles:["Sashlock","Deadlock","Latch","Bathroom Lock","Nightlatch"],ansiStyles:["Passage","Privacy","Classroom","Storeroom","Entrance","Office","Apartment","Dormitory","Institutional"],enStyles:["Sashlock","Deadlock","Latch","Bathroom Lock","Nightlatch"]},{name:"Cylindrical Lock",styles:["Leverset","Knobset","Interconnected"]},{name:"Hotel Lock",styles:["RFID Mortise","Mobile Key"]},{name:"Panic Bar",styles:["Rim Type","Surface Vertical Rod","Concealed Vertical Rod","Mortise Type"]},{name:"Electric Strike",styles:["Fail Safe","Fail Secure"]},{name:"Magnetic Lock",styles:["Surface Mount","Shear Lock","Recessed"]},{name:"Patch Lock",styles:["Corner Patch Lock","Center Patch Lock"]}]},Closers:{csi:"08 71 60",types:[{name:"Overhead Closer",styles:["Rack & Pinion","Cam Action","Slide Arm"]},{name:"Concealed Closer",styles:["Overhead Concealed","Chain Concealed"]},{name:"Floor Spring",styles:["Double Action","Single Action"]},{name:"Auto Operator",styles:["Electro-Mechanical","Electro-Hydraulic"]}]},Handles:{csi:"08 71 70",types:[{name:"Lever Handle",styles:["Return to Door","Straight","Flat Bar","Anti-Ligature"]},{name:"Pull Handle",styles:["D-Pull","T-Bar","Offset Pull","Flush Pull"]},{name:"Push Plate",styles:["Square Corner","Radius Corner"]},{name:"Panic Push Pull Handle",styles:["L-Shaped","Tube Pull"]}]},Stops:{csi:"08 71 80",types:[{name:"Door Stop",styles:["Floor Mounted Dome","Wall Mounted Projection","Skirting Mounted"]},{name:"Overhead Stop",styles:["Surface Mounted","Concealed"]}]},Seals:{csi:"08 71 90",types:[{name:"Drop Seal",styles:["Mortised","Surface Mounted"]},{name:"Perimeter Seal",styles:["Batwing","Bulb","Brush"]},{name:"Acoustic Perimeter Seal",styles:["STC-40 Compression","STC-45 Magnetic"]},{name:"Automatic Door Bottom",styles:["Acoustic Drop","Medium Duty"]},{name:"Vision/Louver Gasket",styles:["High Density","Intumescent Acoustic"]},{name:"Threshold",styles:["Low Profile (ADA)","Saddle","Panic Type"]}]},Cylinders:{csi:"08 71 50",types:[{name:"Cylinder",styles:["Euro Profile","Oval Profile","Rim Cylinder","Mortise Cylinder"]}]},Accessories:{csi:"08 71 00",types:[{name:"Kick Plate",styles:["Satin Stainless","Polished Stainless","Brass"]},{name:"Flush Bolt",styles:["Lever Action","Slide Action"]},{name:"Door Viewer",styles:["Wide Angle","Electronic"]}]},Protecting:{csi:"08 79 00",types:[{name:"Signage",styles:["Disc","Rectangular"]}]},Electrified:{csi:"08 74 00",types:[{name:"Magnetic Lock",styles:["Fail-Safe","Fail-Secure"],requiresRelease:!0},{name:"Electric Strike",styles:["Fail-Safe","Fail-Secure"],requiresTrim:!0},{name:"Electromechanical Mortise",styles:["Fail-Safe","Fail-Secure"],requiresTrim:!0},{name:"Door Contact",styles:["Surface","Recessed"]},{name:"Push Button",styles:["Request-to-Exit","Emergency"]},{name:"Power Supply",styles:["12/24V Auto","Dedicated"]},{name:"Card Reader",styles:["Surface Mount","Flush Mount"]}]}},_ie=yie.map(t=>({...t,items:vie(t.categories)})),Ug={Timber:["Mortise Lock","Cylindrical Lock","Hotel Lock","Panic Bar","Electric Strike","Magnetic Lock"],Metal:["Mortise Lock","Panic Bar","Electric Strike","Magnetic Lock"],Aluminum:["Mortise Lock","Electric Strike","Magnetic Lock"],Glass:["Patch Lock","Panic Bar","Magnetic Lock"],default:["Mortise Lock","Cylindrical Lock","Hotel Lock","Panic Bar","Electric Strike","Magnetic Lock"]},bie=(t=[])=>{if(!t.length)return Ug.default;let e=null;return t.forEach(r=>{const n=Ug[r]||Ug.default;e===null?e=new Set(n):e=new Set([...e].filter(i=>n.includes(i)))}),!e||e.size===0?Ug.default:Array.from(e)},Vg={Timber:["Magnetic Lock","Electric Strike","Card Reader"],Metal:["Magnetic Lock","Electric Strike","Electromechanical Mortise","Card Reader"],Aluminum:["Magnetic Lock","Electric Strike","Card Reader"],Glass:["Magnetic Lock","Card Reader"],default:["Magnetic Lock","Electric Strike","Card Reader"]},Sie=(t=[])=>{if(!t.length)return Vg.default;let e=null;return t.forEach(r=>{const n=Vg[r]||Vg.default;e===null?e=new Set(n):e=new Set([...e].filter(i=>n.includes(i)))}),!e||e.size===0?Vg.default:Array.from(e)},Eie=["stair","exit","corridor","assembly","classroom","retail","auditorium","public","egress"],Aie=["stair","exit","assembly","auditorium","arena","stadium","retail","public"],Nie=["main entrance","security","server","it","data","lab","lobby","reception","turnstile","access","checkpoint","guest room","guestroom","hotel"],Tie=[{id:"Mechanical",label:"Mechanical Package",desc:"Mortise/cylindrical locks, manual key control, free-egress lever trim."},{id:"Electromechanical",label:"Electromechanical Package",desc:"Electric strikes or maglocks with power, REX, and monitoring accessories."}],q2=(t={})=>{const e=(t.use||"").toLowerCase(),r=(t.notes||"").toLowerCase(),n=Nie.some(s=>e.includes(s)),i=["card","access","controlled","turnstile"].some(s=>r.includes(s));return n||i?"Electromechanical":"Mechanical"},Cc=t=>{const e=(t.additionalLocations||[]).map(n=>({zone:(n==null?void 0:n.zone)||t.zone||"",level:(n==null?void 0:n.level)||t.level||"",roomName:(n==null?void 0:n.roomName)||t.roomName||""})),r=1+e.length;return{...t,use:t.use||t.roomName||"",hardwareIntent:t.hardwareIntent||q2(t),additionalLocations:e,qty:r,thicknessAuto:t.thicknessAuto!==!1,weightAuto:t.weightAuto!==!1,ada:t.ada===!0}},kie=(t={})=>{const e={};let r=0;return b1.forEach(n=>{const i=Math.max(0,parseInt(t==null?void 0:t[n],10)||0);e[n]=i,r+=i}),r>0?e:{...Bx}},Cie=(t,e)=>{const r=kie(t.unitMix),n=Object.values(r).reduce((s,a)=>s+a,0),i=Math.max(1,t.unitsPerFloor||n||1);return[{id:"default",label:"Typical Floor",floors:e,unitsPerFloor:Math.max(n,i),unitMix:r}]},Iie={Residential:(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Cie(t,e),n=[],i=r[0],s=i.unitMix||{},a=i.label.trim(),o=a&&a.toLowerCase()!=="typical floor"?`${a} - `:"";if(Object.entries(s).filter(([,h])=>h>0).forEach(([h,d])=>{const p=WT[h]||WT["2BHK"],f=d*i.floors;if(f<=0)return;const v=`Auto-generated residential ${a||h}`;n.push({roomName:`${o}${h} Entry`,use:"Unit Entrance (Fire Rated)",qty:f,width:950,height:2150,material:"Timber",fire:60,notes:v}),n.push({roomName:`${o}${h} Bedroom`,use:"Bedroom / Internal",qty:f*p.bedrooms,width:900,height:2100,notes:v}),n.push({roomName:`${o}${h} Bathroom`,use:"Bathroom / Privacy",qty:f*p.bathrooms,width:800,height:2100,material:"Timber",notes:`Privacy lockset recommended for ${h}`})}),n.length===0)return[];const l=Math.max(1,e*2),c=Math.max(1,e);return n.push({roomName:"Corridor Core",use:"Corridor / Circulation",qty:l,width:1e3,height:2150,fire:0,ada:!0,notes:"Auto-generated corridor door"}),n.push({roomName:"Restroom Core",use:"Restroom",qty:l,width:900,height:2100,ada:!0,notes:"Auto-generated restroom core"}),n.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:l,width:1e3,height:2150,material:"Metal",fire:60,notes:"Stair door (code guidance)"}),n.push({roomName:"Service / Utility",use:"Service / Utility",qty:c,width:900,height:2100,material:"Metal",fire:30,notes:"Service doors on each floor stack"}),n},"Education / School":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(0,parseInt(t.classroomsPerFloor,10)||0),n=Math.max(0,parseInt(t.toiletsPerFloor,10)||0),i=!!t.hasAdminLabs,s=[];return r>0&&s.push({roomName:"Classroom",use:"Classroom",qty:e*r,width:950,height:2150,material:"Timber"}),n>0&&s.push({roomName:"Restroom",use:"Restroom",qty:e*n,width:900,height:2100,material:"Timber",notes:"Privacy indicator set"}),i&&s.push({roomName:"Admin / Lab",use:"Admin / Lab",qty:e*2,width:950,height:2150,material:"Metal",fire:30}),s.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:Math.max(1,e)*2,width:1e3,height:2150,material:"Metal",fire:60}),s},"Commercial Office":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(0,parseInt(t.meetingRooms,10)||0),n=!!t.openLayout,i=!!t.hasServiceAreas,s=[];return s.push({roomName:"Main Lobby",use:"Main Entrance",qty:2,width:1100,height:2400,material:"Glass",notes:"Paired glass entry"}),s.push({roomName:"Open Office",use:"Office / Passage",qty:e*(n?2:4),width:950,height:2150}),r>0&&s.push({roomName:"Meeting Room",use:"Meeting Room",qty:e*r,width:1e3,height:2150,stc:40,notes:"Acoustic seals recommended"}),s.push({roomName:"Restroom",use:"Restroom",qty:e*2,width:900,height:2100}),i&&s.push({roomName:"Service / BOH",use:"Service / Utility",qty:e,width:950,height:2150,material:"Metal",fire:30}),s},"Hospital / Healthcare":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(0,parseInt(t.patientRoomsPerFloor,10)||0),n=Math.max(0,parseInt(t.icuRoomsPerFloor,10)||0),i=Math.max(0,parseInt(t.operatingRooms,10)||0),s=!!t.hasEmergencyDept,a=[];return r>0&&a.push({roomName:"Patient Room",use:"Patient Room",qty:e*r,width:950,height:2150,material:"Timber",notes:"Auto-generated for patient rooms"}),n>0&&a.push({roomName:"ICU / Isolation",use:"Patient Room",qty:e*n,width:1e3,height:2150,material:"Metal",notes:"Isolation-ready leaf with seals",stc:40}),i>0&&a.push({roomName:"Operating Theatre",use:"Operating Theatre",qty:Math.max(1,i),width:1200,height:2400,material:"Metal",fire:60,hardwareIntent:"Electromechanical",notes:"Pairs with automatic operator"}),a.push({roomName:"Consult / Exam",use:"Consultation / Exam",qty:e*2,width:1e3,height:2150}),a.push({roomName:"Clean Utility",use:"Clean / Dirty Utility",qty:e,width:950,height:2150,material:"Metal",fire:30}),a.push({roomName:"Restroom",use:"Restroom",qty:e*2,width:900,height:2100}),a.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:e*2,width:1e3,height:2150,material:"Metal",fire:90}),s&&a.push({roomName:"Emergency Entry",use:"Main Entrance",qty:2,width:1200,height:2400,material:"Glass",hardwareIntent:"Electromechanical",notes:"Dedicated emergency access"}),a},"Airport / Transport":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(1,parseInt(t.concourses,10)||1),n=Math.max(1,parseInt(t.gatesPerConcourse,10)||1),i=Math.max(1,parseInt(t.securityZones,10)||1),s=!!t.hasInternationalZone,a=r*n,o=[];return o.push({roomName:"Terminal Entry",use:"Terminal Entry",qty:Math.max(2,r*2),width:1200,height:2600,material:"Glass",notes:"Airside / landside entry pairs"}),o.push({roomName:"Security Checkpoint",use:"Security / Checkpoint",qty:i*r,width:1100,height:2400,material:"Metal",hardwareIntent:"Electromechanical",notes:"Controlled access openings"}),o.push({roomName:"Boarding Gate",use:"Boarding Gate",qty:a,width:1100,height:2400,material:"Glass"}),o.push({roomName:"Restroom",use:"Restroom",qty:e*4,width:900,height:2100}),o.push({roomName:"Staff / Service",use:"Staff Only / Service",qty:r*2,width:1e3,height:2150,material:"Metal",fire:30}),o.push({roomName:"Baggage / Logistics",use:"Baggage / Logistics",qty:r,width:1100,height:2400,material:"Metal",fire:60}),o.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:e*2,width:1e3,height:2150,material:"Metal",fire:90}),s&&o.push({roomName:"International Zone",use:"Corridor / Circulation",qty:r,width:1100,height:2400,hardwareIntent:"Electromechanical",notes:"Immigration / customs separation"}),o},"Hospitality / Hotel":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(0,parseInt(t.roomsPerFloor,10)||0),n=Math.max(0,parseInt(t.suitesPerFloor,10)||0),i=!!t.hasBallroom,s=!!t.hasServiceZones,a=[];return r>0&&a.push({roomName:"Guest Room Entry",use:"Guest Room Entry",qty:e*r,width:950,height:2150,material:"Timber",fire:30,ada:!0,hardwareIntent:"Electromechanical",stc:42,notes:"Smart-lock ready leaf"}),n>0&&a.push({roomName:"Suite Connector",use:"Connecting Door",qty:e*n,width:900,height:2150,material:"Timber",notes:"Privacy bolt + closer"}),a.push({roomName:"Corridor",use:"Corridor / Circulation",qty:e*2,width:1e3,height:2150,fire:60,ada:!0}),a.push({roomName:"Restroom Core",use:"Restroom",qty:e*2,width:900,height:2100,ada:!0}),a.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:e*2,width:1e3,height:2150,material:"Metal",fire:60}),i&&a.push({roomName:"Ballroom",use:"Ballroom / Assembly",qty:4,width:1200,height:2600,config:"Double",notes:"Paired entry with panic hardware"}),s&&a.push({roomName:"Back of House",use:"Back of House",qty:e,width:1e3,height:2150,material:"Metal",fire:30}),a}},Pie=(t,e=(t==null?void 0:t.doors)||[])=>{if(!t)return[];const r=Iie[t.type];if(!r)return[];const n=$p(),s=(t.instantInputs||n)[t.type]||n[t.type]||{},a=r(s,t).filter(c=>c&&c.qty>0);let o=[...e];const l=[];return a.forEach((c,h)=>{const d=c.markBase||`D-${String(o.length+h+1).padStart(3,"0")}`,p=Ej(o,d),f=Math.max(1,c.qty||1),v=Array.from({length:f-1},(w,S)=>({zone:c.zone||"Tower A",level:c.level||String((h+S)%10+1).padStart(2,"0"),roomName:`${c.roomName||c.use||"Door"} #${S+2}`})),x={id:rd(),mark:p,zone:c.zone||"Tower A",level:c.level||String(h%10+1).padStart(2,"0"),roomName:c.roomName||c.use||`Generated Door ${h+1}`,width:c.width||900,height:c.height||2100,thickness:c.thickness||45,weight:c.weight||45,fire:c.fire||0,use:c.use||c.roomName||"",material:c.material||"Timber",config:c.config||"Single",handing:c.handing||"RH",stc:c.stc||35,ada:c.ada||!1,notes:c.notes||"",hardwareIntent:c.hardwareIntent||q2(c),additionalLocations:v},_=Cc(x);l.push(_),o=[...o,_]}),l},Rie=t=>{const e=(t.use||"").toLowerCase(),r=t.material||"Timber",n=Eie.some(l=>e.includes(l)),i=Aie.some(l=>e.includes(l)),s=parseInt(t.fire,10)>0,a=t.hardwareIntent||q2(t),o={material:r,isEscapeRoute:n,requiresPanic:i,isFireRated:s,requiresFailSafe:n||s,hardwareIntent:a};return v4(t.id||t.mark||"door-unknown","classifyDoor",{use:t.use,fire:t.fire,result:o}),o},GT=(t=[])=>{if(!t.length)return{materials:["Timber"],isEscapeRoute:!1,requiresPanic:!1,isFireRated:!1,requiresFailSafe:!1,requiresADA:!1};const e=t.map(Rie),r=Array.from(new Set(e.map(n=>n.hardwareIntent||"Mechanical")));return{materials:Array.from(new Set(e.map(n=>n.material))),isEscapeRoute:e.some(n=>n.isEscapeRoute),requiresPanic:e.some(n=>n.requiresPanic),isFireRated:e.some(n=>n.isFireRated),requiresFailSafe:e.some(n=>n.requiresFailSafe),requiresADA:t.some(n=>n.ada),packageIntent:r.includes("Electromechanical")?"Electromechanical":"Mechanical"}},Lie=(t,e)=>{const r=t.name||"Preview Door",n=e.materials[0]||"Timber",i=e.isFireRated;return{id:`preview-${t.id}`,mark:t.id,zone:"Preview",level:"00",roomName:r,qty:1,width:900,height:2100,weight:50,fire:i?60:0,use:r,material:n,config:"Single",thickness:45,thicknessAuto:!0,visionPanel:!1,handing:"RH",stc:35,ada:e.requiresADA,hardwareIntent:e.packageIntent,additionalLocations:[]}},jie=(t,e)=>{const r=[],n=t.items.filter(d=>d.category==="Locks"),i=t.items.filter(d=>d.category==="Electrified"),s=t.items.filter(d=>d.category==="Handles"),a=n.filter(d=>(d.type||"").toLowerCase().includes("panic")),o=[...n,...i].filter(d=>(d.type||"").toLowerCase().includes("magnetic")),l=[...n,...i].filter(d=>(d.type||"").toLowerCase().includes("electric strike")),h=n.some(d=>(d.type||"").toLowerCase().includes("hotel lock"))||o.length>0||i.some(d=>!Vx.includes(d.type));if(e.requiresPanic&&a.length===0&&r.push("Panic hardware is required for this escape route door (EN 1125 / NFPA 101)."),a.length>0&&s.length>0&&r.push("Remove lever/pull trim on the egress side when panic hardware is used to maintain single-motion exit."),a.length>0&&n.some(d=>!d.type.toLowerCase().includes("panic"))&&r.push("Panic hardware should be the sole locking mechanism on the egress side."),o.length>0){const d=Vx.filter(x=>!i.some(_=>(_.type||"").toLowerCase()===x.toLowerCase())),f=i.some(x=>x.autoTag==="card-reader-kit"||(x.type||"").toLowerCase()==="card reader")?d.filter(x=>x.toLowerCase()!=="push button"):d;f.length>0&&r.push(`Magnetic locks require a release package (REX sensor, emergency button, fire alarm interface). Missing: ${f.join(", ")}.`);const v=o.some(x=>(x.style||"").toLowerCase().includes("fail-secure"));e.requiresFailSafe&&v&&r.push("Escape route doors must use fail-safe magnetic locks.")}return l.length>0&&!n.some(d=>{const p=(d.type||"").toLowerCase();return p.includes("mortise")||p.includes("cylindrical")||p.includes("panic")})&&r.push("Electric strikes must pair with a mortise/cylindrical latch or panic device that provides the latch bolt."),e.packageIntent==="Electromechanical"&&!h&&r.push("Door was scheduled as an electrified package but no electrified locking has been added."),e.packageIntent==="Mechanical"&&h&&r.push("Door was scheduled as a mechanical package; confirm electrified hardware is intentional."),e.requiresADA&&(a.length>0||s.some(p=>(p.type||"").toLowerCase().includes("lever"))||r.push("ADA-labeled doors require lever hardware or panic devices that allow single-hand operation.")),e.materials.includes("Glass")&&(s.some(p=>(p.type||"").toLowerCase().includes("lever"))&&(n.some(f=>(f.type||"").toLowerCase()==="patch lock"&&(f.style||"").toLowerCase().includes("center"))||r.push("Glass doors with lever handles must pair with a center patch lock that supports lever trim.")),e.requiresPanic&&(s.some(f=>(f.type||"").toLowerCase().includes("panic push pull"))||r.push("Glass escape doors require an L-shaped panic push/pull handle instead of a traditional panic bar."))),r},M5={ANSI:["630 (Satin Stainless)","629 (Polished Stainless)","626 (Satin Chrome)","605 (Polished Brass)","613 (Oil Rubbed Bronze)","622 (Matte Black)"],EN:["SSS (Satin Stainless)","PSS (Polished Stainless)","SCP (Satin Chrome Plate)","PB (Polished Brass)","RAL 9005 (Black)","RAL 9016 (White)"]},Fie={Cylinders:{ANSI:["SNP (Satin Nickel Plate)","Natural Brass","PB (Polished Brass)","622 (Matte Black)"],EN:["SNP (Satin Nickel Plate)","Natural Brass","PB (Polished Brass)","RAL 9005 (Black)"]}},Die={Hinges:"H",Locks:"L",Closers:"D",Handles:"H",Stops:"S",Seals:"GS",Cylinders:"C",Accessories:"A",Protecting:"P",Electrified:"E"},_4=(t,e="ANSI")=>{const r=Fie[t];return r&&(r[e]||r.default)||null},b4=(t="ANSI")=>{const e=M5[t]||M5.ANSI;return(e==null?void 0:e[0])||"630 (Satin Stainless)"},YT=(t,e="ANSI")=>{const r=_4(t,e);return r!=null&&r.length?r[0]:b4(e)},Mie=(t,e)=>{var i;const r=Ux[t],n=r==null?void 0:r.types.find(s=>s.name===e);return((i=n==null?void 0:n.styles)==null?void 0:i[0])||""},Kd=(t=[],e)=>{const r=Die[e]||"X";let n=1;const i=new Set(t.map(a=>a.ref));let s=`${r}${String(n).padStart(2,"0")}`;for(;i.has(s);)n+=1,s=`${r}${String(n).padStart(2,"0")}`;return s},Cj=[{type:"Door Contact",style:"Surface",spec:"Status monitor contact",qty:"1",autoTag:"maglock-door-contact"},{type:"Push Button",style:"Request-to-Exit",spec:"Illuminated REX button",qty:"1",autoTag:"maglock-push-button"},{type:"Power Supply",style:"12/24V Auto",spec:"Fail-safe rated supply",qty:"1",autoTag:"maglock-power-supply"}],nd={type:"Card Reader",style:"Surface Mount",spec:"Access control card reader",qty:"1"},Vx=Cj.map(t=>t.type),Ij=40,Oie=t=>t==="Double"?"double leaf":"single leaf",Hv=813,XT=38,Bie=(t=[],e="ANSI",r={})=>{const n=b4(e),i=t.some(v=>(v.type||"").toLowerCase().includes("magnetic lock")),s=t.some(v=>(v.type||"").toLowerCase().includes("electric strike")),a=!i&&!s;let o=t.filter(v=>(v.type||"").toLowerCase()!=="maglock release package");a&&(o=o.filter(v=>v.autoTag!=="maglock-kit"&&v.autoTag!=="card-reader-kit"));const l=new Set(r.removedAutoTags||[]),c=o.find(v=>v.autoTag==="card-reader-kit"),h=!!c;c&&(c.type,nd.type);const p=(i||s)&&!l.has("card-reader-kit")&&!h,f=h||p;return i&&Cj.forEach(v=>{var w;const x=v.autoTag||"maglock-kit";if(l.has("maglock-kit")||l.has(x)||(w=v.type)!=null&&w.toLowerCase().includes("push button")&&f)return;o.some(S=>S.category==="Electrified"&&S.type===v.type)||o.push({category:"Electrified",ref:Kd(o,"Electrified"),type:v.type,style:v.style||Mie("Electrified",v.type),spec:v.spec,qty:v.qty,finish:n,autoTag:x})}),p&&o.push({category:"Electrified",ref:Kd(o,"Electrified"),type:nd.type,style:nd.style,spec:nd.spec,qty:nd.qty,finish:n,autoTag:"card-reader-kit"}),o},Pj=[...Vx,nd.type],Uie=(t=[])=>{let e=!1;return t.filter(r=>r.category!=="Hinges"?!0:e?!1:(e=!0,!0))},Vie=(t=[],e={})=>{const{needsAcoustic:r=!1,isDouble:n=!1,hasVision:i=!1,hasLouver:s=!1}=e;let a=[...t];if(!r)return a.filter(c=>c.autoTag!=="acoustic-package");const o=b4(e.standard||"ANSI"),l=(c,h)=>{a.some(p=>p.autoTag==="acoustic-package"&&p.spec===c)||a.push(h)};return l("AP-40",{category:"Seals",ref:Kd(a,"Seals"),type:"Acoustic Perimeter Seal",style:"STC-40 Compression",spec:"AP-40 perimeter seal set",qty:n?"2 Sets":"1 Set",finish:o,autoTag:"acoustic-package",acousticContribution:"STC-rated"}),l("ADB-45",{category:"Seals",ref:Kd(a,"Seals"),type:"Automatic Door Bottom",style:"Acoustic Drop",spec:"ADB-45 mortised automatic bottom",qty:n?"2":"1",finish:o,autoTag:"acoustic-package",acousticContribution:"STC-rated"}),(i||s)&&l("GKT-40",{category:"Seals",ref:Kd(a,"Seals"),type:"Vision/Louver Gasket",style:"High Density",spec:"GKT-40 acoustic glazing/louver kit",qty:"1 Set",finish:o,autoTag:"acoustic-package",acousticContribution:"STC-rated"}),a},id=(t=[],e=[])=>{const r=t.some(o=>parseInt(o.stc,10)>=Ij),n=t.some(o=>o.config==="Double"),i=t.some(o=>o.visionPanel),s=e.some(o=>(o.type||"").toLowerCase().includes("louver")),a={needsAcoustic:r,isDouble:n,hasVision:i,hasLouver:s};return w4("context","computeSetContext",{doors:t.map(o=>o.id||o.mark||"door-unknown"),...a}),a},zie=(t=[],e="ANSI")=>t.map(r=>{const n=_4(r.category,e);return n!=null&&n.length&&!n.includes(r.finish)?{...r,finish:n[0]}:r}),sd=(t=[],e="ANSI",r={})=>{const n=Bie(t,e),i=Uie(n),s=Vie(i,{...r,standard:e}),a=zie(s,e);return w4(r.setId||"set-unknown","sanitizeHardwareItems",{standard:e,autoTags:a.filter(o=>o.autoTag).map(o=>o.autoTag),total:a.length}),a},S4=()=>{const[t,e]=Q.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return Q.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia("(prefers-reduced-motion: reduce)"),n=()=>e(r.matches);return r.addEventListener?r.addEventListener("change",n):r.addListener(n),()=>{r.removeEventListener?r.removeEventListener("change",n):r.removeListener(n)}},[]),t},Hie="rounded-3xl border border-white/10 bg-gradient-to-b from-slate-900/80 to-slate-900/30 text-white shadow-lg shadow-black/30 backdrop-blur-sm",QT=({value:t=0,duration:e=1200,className:r=""})=>{const n=S4(),[i,s]=Q.useState(n?t:0);return Q.useEffect(()=>{if(n){s(t);return}let a,o;const l=c=>{a||(a=c);const h=Math.min((c-a)/e,1),d=1-Math.pow(1-h,3);s(Math.round(d*t)),h<1&&(o=requestAnimationFrame(l))};return o=requestAnimationFrame(l),()=>o&&cancelAnimationFrame(o)},[t,e,n]),u.jsx("span",{className:r,children:i.toLocaleString()})},S0=({children:t,className:e="",delay:r=0,ariaLabel:n,paddingClass:i="p-5"})=>{const s=S4(),[a,o]=Q.useState(s);Q.useEffect(()=>{if(s){o(!0);return}o(!1);const c=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(c)},[s,r]);const l=s?"":a?"opacity-100 translate-y-0":"opacity-0 translate-y-3";return u.jsx("div",{"aria-label":n,className:`${Hie} ${i} ${l} transition-all duration-500 ease-out motion-safe:hover:-translate-y-1 motion-safe:hover:shadow-[0_25px_60px_rgba(7,89,133,0.35)] ${e}`,children:t})},$ie=({steps:t=[]})=>{const e=S4(),[r,n]=Q.useState(e);return Q.useEffect(()=>{if(e){n(!0);return}const i=window.setTimeout(()=>n(!0),120);return()=>window.clearTimeout(i)},[e]),u.jsxs("div",{className:"relative mt-2",children:[u.jsx("div",{className:"absolute left-5 sm:left-6 top-2 bottom-2 w-px bg-white/15 origin-top rounded-full",style:{transform:r?"scaleY(1)":"scaleY(0)",transition:e?"none":"transform 900ms ease 150ms"},"aria-hidden":"true"}),u.jsx("div",{className:"space-y-6",children:t.map((i,s)=>{const a=i.stepNumber??s+1,o=!!i.isActive;return u.jsxs("div",{className:"relative pl-12 sm:pl-16 group",children:[u.jsx("div",{className:`absolute left-5 sm:left-6 top-6 bottom-6 w-px rounded-full pointer-events-none transition-opacity duration-300 ${o?"opacity-90":"opacity-0 group-hover:opacity-80"}`,style:{backgroundColor:"rgba(56,189,248,0.65)"},"aria-hidden":"true"}),u.jsx("div",{className:"absolute left-0 sm:left-1 top-1/2 -translate-y-1/2",children:u.jsx("div",{className:`flex items-center justify-center w-9 h-9 sm:w-10 sm:h-10 rounded-full border-2 text-sm sm:text-base font-semibold transition-all duration-300 shadow-lg ${o?"bg-sky-400 text-slate-950 border-sky-200 shadow-sky-500/40":"bg-slate-950 text-white border-white/25 group-hover:bg-sky-300 group-hover:text-slate-950 group-hover:border-sky-200"}`,children:a})}),u.jsx(S0,{delay:s*120,ariaLabel:`${a} ${i.title}`,className:`pl-4 sm:pl-6 overflow-visible transition-transform duration-300 group-hover:scale-[1.02] ${o?"ring-1 ring-sky-400/50 shadow-sky-500/40":""}`,children:u.jsxs("div",{className:"space-y-1","aria-current":o?"step":void 0,children:[u.jsx("div",{className:"text-white font-semibold text-lg",children:i.title}),u.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:i.body})]})})]},i.title)})})]})},qie=(t=[])=>t.some(r=>r.category==="Electrified"&&!Vx.includes(r.type)||r.category==="Locks"&&(r.type||"").toLowerCase().includes("magnetic"))?"Electromechanical":"Mechanical",Wie=t=>{if(!t)return t;const e=(t.doors||[]).map(Cc),r=(t.sets||[]).map(s=>{const a=e.filter(h=>(s.doors||[]).includes(h.id)),o=s.items||[],l={...id(a,o),removedAutoTags:s.removedAutoTags||[],setId:s.id},c=sd(o,t.standard,l);return{...s,intent:s.intent||qie(c),items:c,removedAutoTags:s.removedAutoTags||[]}}),n=$p(),i={...n,...t.instantInputs||{}};return Object.keys(n).forEach(s=>{i[s]={...n[s],...i[s]||{}}}),{...t,doors:e,sets:r,instantInputs:i,instantSchedulingEnabled:!!t.instantSchedulingEnabled,mkSystemEnabled:t.mkSystemEnabled!==void 0?!!t.mkSystemEnabled:!1}},JT=({category:t})=>t==="Hinges"?u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("rect",{x:"8",y:"2",width:"8",height:"20",rx:"1"}),u.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}):t==="Locks"?u.jsx(CR,{size:16}):t==="Closers"?u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("rect",{x:"2",y:"4",width:"10",height:"6"}),u.jsx("path",{d:"M12 7h8v10"})]}):t==="Handles"?u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M4 10h10a2 2 0 0 1 2 2v6"}),u.jsx("circle",{cx:"4",cy:"12",r:"2"})]}):t==="Stops"?u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M12 22a8 8 0 0 0 0-16 8 8 0 0 0 0 16z"}),u.jsx("circle",{cx:"12",cy:"14",r:"3"})]}):t==="Seals"?u.jsx(PR,{size:16}):t==="Protecting"||t==="Accessories"?u.jsx(L2,{size:16}):u.jsx(gx,{size:16}),Kie=({options:t,value:e,onChange:r,placeholder:n})=>{const[i,s]=Q.useState(!1),[a,o]=Q.useState(""),l=Q.useRef(null);Q.useEffect(()=>{const h=d=>{l.current&&!l.current.contains(d.target)&&s(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const c=t.filter(h=>h.toLowerCase().includes(a.toLowerCase()));return u.jsxs("div",{className:"relative w-full",ref:l,children:[u.jsxs("div",{className:"w-full p-2.5 border border-gray-300 rounded-md bg-white flex items-center justify-between cursor-pointer hover:border-indigo-500 transition-colors",onClick:()=>s(!i),children:[u.jsx("span",{className:e?"text-gray-900":"text-gray-400",children:e||n}),u.jsx(z0,{size:16,className:`text-gray-500 transition-transform ${i?"rotate-180":""}`})]}),i&&u.jsxs("div",{className:"absolute top-full left-0 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-60 flex flex-col z-50",children:[u.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white rounded-t-md",children:u.jsxs("div",{className:"relative",children:[u.jsx(IR,{size:14,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400"}),u.jsx("input",{type:"text",className:"w-full pl-8 p-1.5 text-sm border border-gray-200 rounded bg-gray-50 focus:outline-none focus:border-indigo-500",placeholder:"Search...",value:a,onChange:h=>o(h.target.value),autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto flex-1",children:c.length>0?c.map(h=>u.jsx("div",{className:`px-4 py-2 text-sm cursor-pointer hover:bg-indigo-50 ${e===h?"bg-indigo-50 text-indigo-600 font-medium":"text-gray-700"}`,onClick:()=>{r(h),s(!1),o("")},children:h},h)):u.jsxs("div",{className:"px-4 py-2 text-sm text-indigo-600 cursor-pointer hover:bg-indigo-50 font-medium border-t border-gray-100",onClick:()=>{r(a),s(!1),o("")},children:['Use "',a,'"']})})]})]})},ZT=({x:t,side:e})=>{const r="#000";return e==="left"?u.jsx("path",{d:`M ${t+10} 40 H ${t} V 60 H ${t+10}`,fill:"none",stroke:r,strokeWidth:"2"}):u.jsx("path",{d:`M ${t-10} 40 H ${t} V 60 H ${t-10}`,fill:"none",stroke:r,strokeWidth:"2"})},Gie=()=>u.jsx("text",{x:"50",y:"20",textAnchor:"middle",fontSize:"10",fill:"#333",fontWeight:"bold",children:"INSIDE"}),Yie=({mode:t})=>{const e="white",r="black";let n=null,i=null;return t==="LH"?(n=u.jsx("rect",{x:"12",y:"38",width:"60",height:"6",transform:"rotate(-15 12 41)",fill:e,stroke:r,strokeWidth:"2"}),i=u.jsx("circle",{cx:"70",cy:"30",r:"3",fill:"red"})):t==="RH"?(n=u.jsx("rect",{x:"28",y:"38",width:"60",height:"6",transform:"rotate(15 88 41)",fill:e,stroke:r,strokeWidth:"2"}),i=u.jsx("circle",{cx:"30",cy:"30",r:"3",fill:"red"})):t==="LHR"?(n=u.jsx("rect",{x:"12",y:"56",width:"60",height:"6",transform:"rotate(15 12 59)",fill:e,stroke:r,strokeWidth:"2"}),i=u.jsx("circle",{cx:"70",cy:"78",r:"3",fill:"red"})):t==="RHR"&&(n=u.jsx("rect",{x:"28",y:"56",width:"60",height:"6",transform:"rotate(-15 88 59)",fill:e,stroke:r,strokeWidth:"2"}),i=u.jsx("circle",{cx:"30",cy:"78",r:"3",fill:"red"})),u.jsxs("g",{children:[u.jsx(Gie,{}),u.jsx(ZT,{x:10,side:"left"}),u.jsx(ZT,{x:90,side:"right"}),n,i]})},Xie=({mode:t})=>{const e="white",r="black";let n=null,i=null,s=null;const a=u.jsx("rect",{x:"10",y:"45",width:"80",height:"10",fill:"#e2e8f0"});return t==="ISO 5 (Left)"?(s=u.jsx("circle",{cx:"15",cy:"50",r:"4",fill:"black"}),n=u.jsx("rect",{x:"15",y:"50",width:"8",height:"40",fill:e,stroke:r,rx:"1"}),i=u.jsx("path",{d:"M 55 50 A 40 40 0 0 1 15 90",fill:"none",stroke:"blue",strokeWidth:"1",strokeDasharray:"2,2"})):t==="ISO 6 (Right)"&&(s=u.jsx("circle",{cx:"85",cy:"50",r:"4",fill:"black"}),n=u.jsx("rect",{x:"77",y:"50",width:"8",height:"40",fill:e,stroke:r,rx:"1"}),i=u.jsx("path",{d:"M 45 50 A 40 40 0 0 0 85 90",fill:"none",stroke:"blue",strokeWidth:"1",strokeDasharray:"2,2"})),u.jsxs("g",{children:[a,n,i,s,u.jsx("text",{x:"50",y:"20",textAnchor:"middle",fontSize:"10",fill:"#666",children:"PULL SIDE VIEW"})]})},Qie=({value:t,onChange:e,standard:r})=>{const s=r==="EN"?[{id:"LH",label:"ISO 5 (Left)",desc:"Hinges on Left (Pull Side)"},{id:"RH",label:"ISO 6 (Right)",desc:"Hinges on Right (Pull Side)"}]:[{id:"LH",label:"Left Hand (LH)",desc:"Hinges left, opens in"},{id:"RH",label:"Right Hand (RH)",desc:"Hinges right, opens in"},{id:"LHR",label:"Left Hand Reverse (LHR)",desc:"Hinges left, opens out"},{id:"RHR",label:"Right Hand Reverse (RHR)",desc:"Hinges right, opens out"}];return u.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.map(a=>u.jsxs("div",{onClick:()=>e(a.id==="LH"||a.id==="ISO 5 (Left)"?"LH":a.id==="RH"||a.id==="ISO 6 (Right)"?"RH":a.id),className:`border rounded p-2 flex items-center gap-2 cursor-pointer transition-colors ${t===(a.id.includes("Left")?"LH":a.id.includes("Right")?"RH":a.id)?"border-indigo-600 bg-indigo-50 ring-1 ring-indigo-600":"hover:bg-gray-50 border-gray-200"}`,children:[u.jsx("svg",{width:"60",height:"60",viewBox:"0 0 100 100",className:"text-gray-600 shrink-0 bg-white border border-gray-100 rounded",children:r==="EN"?u.jsx(Xie,{mode:a.label}):u.jsx(Yie,{mode:a.id})}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:`text-xs font-bold ${t===a.id?"text-indigo-700":"text-gray-700"}`,children:a.label}),u.jsx("span",{className:"text-[10px] text-gray-500",children:a.desc})]})]},a.id))})},Jie=({door:t,hardwareSet:e})=>{const r=t.config==="Double",n=parseInt(t.fire,10)>0,i=r&&n,s=(t.use||t.roomName||"").toLowerCase().includes("guest room"),a=t.material||"Timber",o=s?"Timber":a,l=o==="Glass",c=o==="Aluminum",h=o==="Metal",d=o==="Timber",p=t.visionPanel;let f="#d6a15c",v="#a9744f",x="#7c4f2f",_="#5b391f",w="#f0c999";l?(f="rgba(224,242,254,0.9)",v="#7dd3fc",x="#94a3b8",_="#475569",w="#bae6fd"):c?(f="#e5e7eb",v="#94a3b8",x="#6b7280",_="#475569",w="#f8fafc"):h&&(f="#d1d5db",v="#9ca3af",x="#4b5563",_="#1f2937",w="#e5e7eb");const S=12,N=r?280:170,j=240,z=12,W=3,b=r?i?0:6:0,T=N+S*2,A=j+60,F=S,k=S,L=F+z,R=k+z,le=N-z*2,ve=j-z,ge=R+W,ye=ve-W*2,ce=le-W*2,be=(le-W*2-b)/2,Me=k+j+6,Le="#94a3b8",I="#64748b",B="#cfd6e3",U="#d9dee7",H="#f8fafc",te=(e==null?void 0:e.items)||[],fe=(Ze=te,It)=>Ze.some(cn=>`${cn.type||""} ${cn.style||""} ${cn.category||""}`.toLowerCase().includes(It)),Ae=Ze=>te.filter(It=>It.category===Ze),Te=Ae("Handles"),Pe=Ae("Locks"),et=Ae("Electrified"),Qe=Ae("Accessories"),dt=Ae("Closers"),wt=Ae("Stops"),ae=Ae("Seals"),ne=Ae("Protecting").filter(Ze=>(Ze.type||"").toLowerCase()==="signage"),we=Ae("Hinges"),me=we.map(Ze=>`${Ze.name||""} ${Ze.type||""} ${Ze.style||""}`).join(" ").toLowerCase(),Ke=(()=>{var vr;const Ze=me;if(Ze.includes("continuous"))return 0;const It=Ze.includes("patch")||Ze.includes("pivot")||l?2:3,cn=parseInt((vr=we[0])==null?void 0:vr.qty,10);if(!cn||cn<=0)return It;const kr=cn/(r?2:1);return Math.max(It,Math.round(kr))})(),Je=fe([...Te,...Pe],"panic"),ct=fe([...Pe,...et],"magnetic lock");ct||et.some(Ze=>!Pj.includes(Ze.type));const Et=fe(et,"push button"),Bt=fe(et,"card reader"),Ee=fe(Te,"pull"),it=fe(Te,"lever"),mt=fe(Te,"push"),bt=fe(Qe,"kick plate"),Rt=dt.some(Ze=>!`${Ze.type||""} ${Ze.style||""}`.toLowerCase().includes("floor spring")),Ot=dt.some(Ze=>`${Ze.type||""} ${Ze.style||""}`.toLowerCase().includes("floor spring")),Vt=dt.some(Ze=>`${Ze.name||""} ${Ze.type||""} ${Ze.style||""}`.toLowerCase().includes("auto")),Vr=fe(Qe,"louver"),mr=fe(Qe,"viewer"),qe=fe(Qe.concat(Pe),"flush bolt"),Ft=wt[0],wr=Ft?`${Ft.type||""} ${Ft.style||""}`.toLowerCase():"",Gt=Ft?wr.includes("floor")?"floor":wr.includes("wall")?"wall":"general":null,Rr=!!Ft,rr=fe(ae,"drop")||fe(ae,"automatic bottom"),Zt=fe(ae,"threshold"),zr=t.handing||"RH",$t=({x:Ze,width:It,leafHanding:cn,isInactive:kr})=>{const vr=cn==="LH",dn=6,nr=5,zn=vr?Ze+It-14:Ze+14,on=ge+ye*.55,xe=vr?Ze:Ze+It,Re=vr?Ze+It:Ze,Ve=vr?xe-10:xe+10,tt=vr,Z=(Dr=>{if(Dr<2)return[ge+ye/2];const Sr=30,Tn=ye-Sr-30;return Array.from({length:Dr},(un,Hr)=>ge+Sr+Tn*Hr/(Dr-1))})(Ke||3),G=W+6,Y=vr?Ze-W:Ze+It-2,ee=Math.min(It*.4,60),re=Math.min(ye*.45,90),ke=Ze+It/2-ee/2,pe=ge+ye*.2,Ne=26,je=34,Oe=10,st=Vt?1.2:1,pt=je*st,gt=Oe*st,ft=vr?Ze+6:Ze+It-pt-6,At=ge+4,er=12,_r=22,pr=tt?Math.min(F+N+4,T-er-2):Math.max(2,F-er-4),en=ge+ye*.45-_r/2,mn=18,gn=32,Dn=tt?Math.min(F+N+6,T-mn-4):Math.max(4,F-mn-6),In=ge+ye*.28;let ir="butt";me.includes("continuous")?ir="continuous":me.includes("concealed")?ir="concealed":me.includes("pivot")?ir="pivot":me.includes("patch")?ir="patch":me.includes("butt")&&(ir="butt"),!we.length&&l&&(ir="patch"),l&&ir!=="patch"&&(ir="patch"),!l&&ir==="patch"&&(ir="butt");const Ir=()=>{if(ir==="continuous"){const Sr=vr?Ze-1:Ze+It-3;return u.jsxs("g",{children:[u.jsx("rect",{x:Sr,y:ge+6,width:"4",height:ye-12,rx:"2",fill:"#cbd4de",stroke:"#7b8596",strokeWidth:"0.8"}),[ge+20,ge+ye/2,ge+ye-20].map((Xt,Tn)=>u.jsx("circle",{cx:Sr+2,cy:Xt,r:"1.5",fill:"#7b8596"},`continuous-screw-${Tn}`))]})}if(ir==="pivot"){const Sr=vr?Ze-4:Ze+It-4,Xt=vr?Ze-.5:Ze+It-1.5;return u.jsxs("g",{children:[u.jsx("rect",{x:Sr,y:ge-4,width:"8",height:"8",rx:"1",fill:"#cfd4de",stroke:"#6b7280",strokeWidth:"0.8"}),u.jsx("circle",{cx:Sr+4,cy:ge,r:"1.5",fill:"#7b8596"}),u.jsx("rect",{x:Sr,y:ge+ye-4,width:"8",height:"8",rx:"1",fill:"#cfd4de",stroke:"#6b7280",strokeWidth:"0.8"}),u.jsx("circle",{cx:Sr+4,cy:ge+ye,r:"1.5",fill:"#7b8596"}),u.jsx("rect",{x:Xt,y:ge+8,width:"2",height:ye-16,fill:"#94a3b8"})]})}return(ir==="patch"?[Z[0],Z[Z.length-1]]:Z).map((Sr,Xt)=>{if(ir==="concealed"){const un=vr?Ze:Ze+It-6;return u.jsx("rect",{x:un,y:Sr-1,width:"6",height:"12",rx:"1",fill:"#dfe3ec",stroke:"#7b8596",strokeWidth:"0.6"},`concealed-${Xt}`)}if(ir==="patch"){const un=vr?Ze-3:Ze+It-7;return u.jsx("rect",{x:un,y:Sr-4,width:"10",height:"16",rx:"2",fill:"#94a3b8",stroke:"#475569",strokeWidth:"0.8"},`patch-${Xt}`)}const Tn=Y+(G-6)/2;return u.jsxs("g",{children:[u.jsx("rect",{x:Tn,y:Sr-1.5,width:6,height:"13",rx:"2",fill:"#cfd4de",stroke:"#8b93a5",strokeWidth:"0.8"}),[2.5,6.5,10.5].map(un=>u.jsx("line",{x1:Tn,x2:Tn+6,y1:Sr-1.5+un,y2:Sr-1.5+un,stroke:"#9aa5b6",strokeWidth:"0.6"},`knuckle-line-${Xt}-${un}`))]},`hinge-${Xt}`)})};return u.jsxs("g",{children:[c?u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:Ze,y:ge,width:It,height:ye,rx:"3",fill:"#cbd5e1",stroke:"#6b7280",strokeWidth:"2"}),u.jsx("rect",{x:Ze+It*.1,y:ge+ye*.1,width:It*.8,height:ye*.8,rx:"2",fill:"rgba(224,242,254,0.9)",stroke:"#93c5fd",strokeWidth:"1.5"})]}):u.jsx("rect",{x:Ze,y:ge,width:It,height:ye,rx:l?4:2,fill:f,stroke:v,strokeWidth:"1.5"}),d&&!c&&[.2,.5,.8].map((Dr,Sr)=>u.jsx("line",{x1:Ze+It*Dr,x2:Ze+It*Dr,y1:ge+6,y2:ge+ye-6,stroke:"rgba(255,255,255,0.3)",strokeWidth:"1"},`grain-${Sr}`)),!d&&!l&&!c&&u.jsx("rect",{x:Ze+4,y:ge+6,width:It-8,height:ye-12,fill:"none",stroke:"rgba(255,255,255,0.25)",strokeWidth:"1"}),l&&u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:Ze,y:ge,width:It,height:14,fill:"#cbd5e1",opacity:"0.6"}),u.jsx("rect",{x:Ze,y:ge+ye-14,width:It,height:14,fill:"#cbd5e1",opacity:"0.6"})]}),u.jsx("rect",{x:vr?Ze:Ze+It-dn,y:ge,width:dn,height:ye,fill:"rgba(0,0,0,0.08)"}),u.jsx("rect",{x:vr?Ze+It-nr:Ze,y:ge,width:nr,height:ye,fill:w,opacity:"0.35"}),i&&r&&u.jsx("rect",{x:vr?Ze+It-4:Ze,y:ge+2,width:"4",height:ye-4,fill:"rgba(0,0,0,0.12)",opacity:"0.7"}),p&&!l&&!c&&u.jsx("rect",{x:ke,y:pe,width:ee,height:re,fill:"#e0f2fe",stroke:"#64748b",strokeWidth:"1",rx:"2"}),Vr&&!p&&u.jsxs("g",{opacity:"0.65",children:[u.jsx("rect",{x:Ze+10,y:ge+ye-Ne-12,width:It-20,height:Ne,fill:"none",stroke:"#6b7280"}),[5,11,17,23].map(Dr=>u.jsx("line",{x1:Ze+12,x2:Ze+It-12,y1:ge+ye-Ne-12+Dr,y2:ge+ye-Ne-12+Dr,stroke:"#6b7280"},`louver-${Dr}`))]}),kr&&r&&u.jsx("rect",{x:vr?Ze+It-3:Ze,y:ge,width:"3",height:ye,fill:I,opacity:"0.4"}),r&&qe&&kr&&u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:Re-2,y:ge+10,width:"4",height:"16",rx:"1",fill:Le}),u.jsx("rect",{x:Re-2,y:ge+ye-26,width:"4",height:"16",rx:"1",fill:Le})]}),!kr&&ne.length>0&&ne.map((Dr,Sr)=>{const Xt=(Dr.style||"").toLowerCase(),Tn=ge+54+Sr*18,un=Ze+It/2;return Xt.includes("disc")?u.jsx("circle",{cx:un,cy:Tn,r:"10.5",fill:"#4b5563",stroke:"#1f2937",strokeWidth:"1",opacity:"0.85"},`sign-disc-${Sr}`):u.jsx("rect",{x:un-15,y:Tn-9,width:"30",height:"18",rx:"2",fill:"#4b5563",stroke:"#1f2937",strokeWidth:"1",opacity:"0.85"},`sign-rect-${Sr}`)}),mr&&!l&&!kr&&u.jsx("circle",{cx:Ze+It/2,cy:ge+36,r:"3",fill:"#dbeafe",stroke:I,strokeWidth:"0.8"}),Ir(),Rt&&!kr&&u.jsx("rect",{x:ft,y:At,width:pt,height:gt,rx:"2",fill:B,stroke:Le,strokeWidth:"1"}),ct&&!kr&&u.jsx("rect",{x:vr?Ze+It-28:Ze+4,y:ge+6,width:"24",height:"8",rx:"2",fill:"#94a3b8",stroke:"#475569",strokeWidth:"0.8"}),Et&&!kr&&u.jsxs("g",{children:[u.jsx("rect",{x:pr,y:en,width:er,height:_r,rx:"3",fill:"#e5e7eb",stroke:"#4b5563",strokeWidth:"0.8"}),u.jsx("circle",{cx:pr+er/2,cy:en+_r/2,r:"4",fill:"#cbd5e1",stroke:"#334155",strokeWidth:"0.8"})]}),Bt&&!kr&&u.jsxs("g",{children:[u.jsx("rect",{x:Dn,y:In,width:mn,height:gn,rx:"3",fill:"#0f172a",stroke:"#1f2937",strokeWidth:"1"}),u.jsx("rect",{x:Dn+3,y:In+6,width:mn-6,height:14,rx:"2",fill:"#94a3b8",opacity:"0.9"}),u.jsx("circle",{cx:Dn+mn/2,cy:In+gn-12,r:"3",fill:"#0ea5e9",stroke:"#1e3a8a",strokeWidth:"0.8"}),u.jsx("circle",{cx:Dn+mn/2,cy:In+gn-6,r:"1.3",fill:"#22c55e"})]}),Ot&&!kr&&u.jsx("rect",{x:vr?Ze+6:Ze+It-40,y:ge+ye-10,width:"34",height:"7",rx:"2.5",fill:U,stroke:Le,strokeWidth:"1"}),Je?u.jsx("rect",{x:Ze+12,y:on-6,width:It-24,height:"12",rx:"3",fill:"#cbd5e1",stroke:I,strokeWidth:"1"}):Ee?u.jsx("rect",{x:zn-2,y:on-20,width:"4",height:"40",rx:"2",fill:I}):mt?u.jsx("rect",{x:zn-10,y:on-23,width:"20",height:"46",rx:"3",fill:"#e5e7eb",stroke:I,strokeWidth:"1"}):u.jsxs("g",{children:[u.jsx("circle",{cx:zn,cy:on,r:"6",fill:"#e2e8f0",stroke:I,strokeWidth:"1"}),it?u.jsx("rect",{x:vr?zn-16:zn+4,y:on-2,width:"14",height:"4",rx:"2",fill:I}):u.jsx("circle",{cx:vr?zn-8:zn+8,cy:on,r:"2.5",fill:I})]}),bt&&u.jsx("rect",{x:Ze+10,y:ge+ye-30,width:It-20,height:"24",fill:"#9ca3af",opacity:"0.7",stroke:I,strokeWidth:"1"}),rr&&u.jsx("rect",{x:Ze+6,y:ge+ye-5,width:It-12,height:"3",rx:"1.5",fill:"#94a3b8"}),Rr&&!kr&&(Gt==="floor"?u.jsxs("g",{children:[u.jsx("rect",{x:Ve-4,y:Me-5,width:"8",height:"2",fill:"#6b7280"}),u.jsx("circle",{cx:Ve,cy:Me-7,r:"3",fill:"#e2e8f0",stroke:"#6b7280",strokeWidth:"0.8"})]}):u.jsx("rect",{x:Ve-2,y:on-6,width:"4",height:"12",rx:"2",fill:"#cbd5e1",stroke:Le,strokeWidth:"0.6"}))]})};return u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsxs("svg",{width:r?320:240,height:"320",viewBox:`0 0 ${T} ${A}`,className:"bg-white rounded-lg border border-gray-100 shadow-sm p-2",children:[u.jsx("rect",{x:F,y:k,width:z,height:j,fill:x,stroke:_,strokeWidth:"1"}),u.jsx("rect",{x:F+N-z,y:k,width:z,height:j,fill:x,stroke:_,strokeWidth:"1"}),u.jsx("rect",{x:F,y:k,width:N,height:z,fill:x,stroke:_,strokeWidth:"1"}),u.jsx("rect",{x:L,y:R,width:le,height:ve,fill:H,stroke:_,strokeWidth:"0.5"}),r&&u.jsx("rect",{x:L+W+be,y:ge,width:b,height:ye,fill:H}),r?u.jsxs(u.Fragment,{children:[u.jsx($t,{x:L+W,width:be,leafHanding:"LH",isInactive:!0}),u.jsx($t,{x:L+W+be+b,width:be,leafHanding:"RH"})]}):u.jsx($t,{x:L+W,width:ce,leafHanding:zr.includes("L")?"LH":"RH"}),Zt&&u.jsx("rect",{x:L+W/2,y:Me-5,width:le-W,height:"3",rx:"1.5",fill:"#b0bec5"}),u.jsx("line",{x1:F,y1:Me,x2:F+N,y2:Me,stroke:"#111827",strokeWidth:"2.5",strokeLinecap:"round"})]}),u.jsxs("div",{className:"mt-2 text-xs text-gray-500 font-medium text-center",children:[t.config," ",t.material," ",u.jsx("br",{}),u.jsx("span",{className:"text-indigo-600 font-bold",children:zr})," ",p?"+ Lite Kit":"",r&&u.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:i?"Rebated meeting stile (fire-rated pair)":"Flush meeting stile"})]})]})},Zie=({onStart:t,hasProjects:e,isAdmin:r,onOpenAdmin:n,isAdminOpen:i,onCloseAdmin:s,showNotice:a})=>{const{user:o,logout:l}=ku(),[c,h]=Q.useState(!1),d=()=>{o?t():h(!0)};return u.jsxs("div",{className:"relative w-full min-h-screen bg-slate-950 text-white overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"absolute inset-0 pointer-events-none","aria-hidden":"true",children:[u.jsx("div",{className:"absolute -top-32 -left-20 w-80 h-80 bg-indigo-600/30 blur-3xl"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-[450px] h-[450px] bg-sky-500/20 blur-[180px]"})]}),u.jsxs("nav",{className:"relative z-20 px-6 md:px-10 lg:px-12 py-5 flex items-center justify-between",children:[u.jsxs("button",{onClick:()=>setView("landing"),className:"flex items-center gap-3 focus:outline-none w-full sm:w-auto text-left",children:[u.jsx("div",{className:"bg-white/10 rounded-2xl p-2.5 backdrop-blur flex items-center justify-center",children:u.jsx(Ju,{className:"text-sky-300 w-7 h-7"})}),u.jsxs("div",{className:"flex flex-col leading-tight",children:[u.jsx("span",{className:"text-xl md:text-2xl font-black tracking-tight",children:"InstaSpec"}),u.jsx("span",{className:"text-[11px] md:text-sm font-semibold text-white/70 whitespace-nowrap",children:"Design Faster. Build Smarter."})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[o&&r&&u.jsx("button",{onClick:n,className:"px-4 py-2 rounded-full border border-indigo-300 text-sm font-semibold text-indigo-50 hover:bg-indigo-500/20 transition",children:"Beta Admin"}),u.jsx("button",{onClick:()=>a==null?void 0:a("Coming Soon","Product tour coming soon."),className:"hidden sm:inline-flex px-4 py-2 rounded-full border border-white/10 text-sm font-semibold text-white/80 hover:bg-white/5 transition",children:"Product Tour"}),u.jsx("button",{onClick:d,className:"px-4 md:px-6 py-2 rounded-full bg-indigo-500 hover:bg-indigo-400 text-sm md:text-base font-semibold shadow-lg shadow-indigo-500/40 transition",children:o?e?"Open Dashboard":"Start Configuring":"Beta Login"})]})]}),u.jsx("main",{className:"relative z-10 flex-1 w-full flex flex-col",children:u.jsx("div",{className:"w-full max-w-6xl mx-auto px-6 md:px-12 py-10 md:py-16",children:u.jsxs("div",{className:"grid gap-12 lg:gap-14 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,420px)] items-start",children:[u.jsxs("section",{className:"order-1 lg:col-start-1 lg:row-start-1 space-y-8",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/5 text-[10px] sm:text-xs uppercase tracking-[0.35em] text-white/70 whitespace-nowrap",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),u.jsx("span",{className:"tracking-[0.25em]",children:"FOR ARCHITECTS"}),u.jsx("span",{className:"text-white/40",children:"/"}),u.jsx("span",{className:"tracking-[0.25em]",children:"CONSULTANTS"}),u.jsx("span",{className:"text-white/40",children:"/"}),u.jsx("span",{className:"tracking-[0.25em]",children:"SPECIFIERS"})]}),u.jsxs("div",{children:[u.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-black leading-tight text-white",children:["Specify door hardware with confidence in ",u.jsx("span",{className:"text-sky-300",children:"minutes"}),", not days."]}),u.jsx("p",{className:"mt-4 text-lg md:text-xl text-white/70 max-w-2xl",children:"InstaSpec unifies code compliance, hardware libraries, and visual coordination into a single premium workspace. Build ANSI/EN ready schedules, visualize door sets, and export polished specs instantly."})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs("button",{onClick:d,className:"px-8 py-4 bg-sky-400 text-slate-950 font-bold rounded-xl shadow-xl shadow-sky-500/30 flex items-center justify-center gap-2 text-lg hover:bg-sky-300 transition",children:["Start Configuring ",u.jsx(nh,{className:"w-5 h-5"})]}),u.jsx("button",{onClick:()=>a==null?void 0:a("Coming Soon","Demo replay coming soon."),className:"px-8 py-4 border border-white/20 rounded-xl font-semibold text-lg text-white/80 hover:bg-white/10 transition flex items-center justify-center gap-2",children:"View Demo"})]})]}),u.jsxs("aside",{className:"order-2 lg:col-start-2 lg:row-span-2 space-y-10 lg:space-y-12 flex flex-col h-full",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"text-xs uppercase tracking-[0.4em] text-white/50",children:"Specification Intelligence"}),u.jsx("div",{className:"space-y-4",children:fie.map((p,f)=>u.jsxs(S0,{delay:f*90,ariaLabel:`${p.label} - ${p.title}`,className:"min-h-[160px]",children:[u.jsx("div",{className:"text-xs uppercase tracking-[0.3em] text-white/60",children:p.label}),u.jsx("div",{className:"text-white font-semibold text-2xl mt-2",children:p.title}),u.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:p.body})]},p.title))})]}),u.jsxs("div",{className:"space-y-4 flex-1 flex flex-col",children:[u.jsx("div",{className:"text-xs uppercase tracking-[0.4em] text-white/50",children:"Workflow Snapshot"}),u.jsx($ie,{steps:Og})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"text-xs uppercase tracking-[0.4em] text-white/50",children:"Why InstaSpec?"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:pie.map((p,f)=>{const v=p.icon||L2,x=f===2?"sm:col-span-2 sm:max-w-xs sm:mx-auto lg:col-span-1 lg:max-w-none lg:mx-0":"";return u.jsxs(S0,{delay:(f+Og.length)*90,ariaLabel:p.title,paddingClass:"px-4 py-4",className:`min-h-[140px] flex flex-col items-start justify-start gap-3 transition-transform duration-300 overflow-visible ${x}`,children:[u.jsx("div",{className:"flex items-center gap-3",children:u.jsx("div",{className:"p-2 rounded-2xl bg-white/10 text-sky-200 flex-shrink-0",children:u.jsx(v,{className:"w-5 h-5","aria-hidden":"true"})})}),u.jsxs("div",{className:"space-y-1 w-full",children:[u.jsx("div",{className:"text-lg md:text-base font-semibold leading-tight text-white whitespace-normal break-normal hyphens-none",children:p.title}),u.jsx("p",{className:"text-sm md:text-xs text-white/80 leading-snug whitespace-normal break-words",children:p.body})]})]},p.title)})})]})]}),u.jsxs("section",{className:"order-3 lg:col-start-1 lg:row-start-2 space-y-6",children:[u.jsx("div",{children:u.jsx("div",{className:"text-xs uppercase tracking-[0.4em] text-white/50",children:"Highlights"})}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:Oc.slice(0,6).map((p,f)=>{const v=p.icon||kf;return u.jsxs(S0,{delay:(f+Og.length)*70,className:"flex flex-col gap-4 min-h-[190px]",ariaLabel:`${p.value} ${p.metric}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 rounded-2xl bg-white/10 text-sky-200",children:u.jsx(v,{className:"w-5 h-5","aria-hidden":"true"})}),u.jsxs("div",{className:"flex flex-wrap items-baseline gap-2",children:[u.jsx(QT,{value:Number(p.value),className:"text-3xl font-black leading-none text-white"}),u.jsx("span",{className:"text-sm font-semibold uppercase tracking-wide text-white/70",children:p.metric})]})]}),u.jsx("p",{className:"text-sm text-white/70 leading-relaxed break-normal",children:p.subtext}),u.jsx("div",{className:"mt-auto h-1.5 w-full rounded-full bg-white/10 overflow-hidden",children:u.jsx("div",{className:"h-full w-full bg-gradient-to-r from-sky-400 to-indigo-500"})})]},p.id)})}),(()=>{const p=Oc[6],f=p.icon||Rp;return u.jsxs(S0,{delay:(Oc.length+Og.length)*70,ariaLabel:"1 Project Dashboard -- All projects in one clean, central view",className:"w-full flex flex-col gap-4 min-h-[170px]",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 rounded-2xl bg-white/10 text-sky-200",children:u.jsx(f,{className:"w-5 h-5","aria-hidden":"true"})}),u.jsxs("div",{className:"flex flex-wrap items-baseline gap-2",children:[u.jsx(QT,{value:Number(p.value),className:"text-3xl font-black leading-none text-white"}),u.jsx("span",{className:"text-sm font-semibold uppercase tracking-wide text-white/70",children:p.metric})]})]}),u.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:p.subtext}),u.jsx("div",{className:"mt-auto h-1.5 w-full rounded-full bg-white/10 overflow-hidden",children:u.jsx("div",{className:"h-full w-full bg-gradient-to-r from-sky-400 to-indigo-500"})})]})})()]})]})})}),u.jsxs("footer",{className:"relative z-10 w-full border-t border-white/5 bg-slate-950/80 px-6 md:px-10 lg:px-12 py-6 text-center text-sm text-white/60",children:["Engineered with care by"," ",u.jsx("a",{href:"https://techarix.com",target:"_blank",rel:"noreferrer",className:"text-white font-semibold underline underline-offset-2 decoration-white/40 hover:text-sky-300",children:"Techarix"})]}),u.jsx(Hb,{isOpen:c,onClose:()=>h(!1),onSuccess:t}),r&&u.jsx(RR,{isOpen:i,onClose:s})]})},ese=({facilityType:t,onNavigate:e})=>{const{mkSystemEnabled:r}=fl();return u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-slideUp",children:[u.jsx(IW,{facilityType:t}),r&&u.jsx("div",{className:"mt-6 flex justify-center",children:u.jsxs("button",{onClick:e,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl hover:from-indigo-700 hover:to-purple-700 font-bold flex items-center justify-center gap-3 shadow-xl text-lg transition-all hover:scale-105",children:[u.jsx(Ml,{size:24})," Design the MKS",u.jsx(nh,{size:24})]})})]})},tse=()=>{var Xs,ms,ac,Va,Ji,oc,xr,ho,ml,za;const{user:t,logout:e}=ku(),[r,n]=Q.useState(!1),[i,s]=Q.useState(!1),[a,o]=Q.useState(!1),[l,c]=Q.useState(!1),h=t?Qz(t.email):!1,[d,p]=Q.useState(!1),[f,v]=Q.useState(""),[x,_]=Q.useState(!1),w=Q.useRef(null),[S,N]=Q.useState("landing"),[j,z]=Q.useState(0),[W,b]=Q.useState([]),T=Q.useRef(!1),[A,F]=Q.useState(()=>({past:[],present:KT([]),future:[]})),[k,L]=Q.useState(()=>typeof window>"u"?!0:window.matchMedia("(min-width: 1024px)").matches),[R,le]=Q.useState(null),[ve,ge]=Q.useState(!1),[ye,ce]=Q.useState("Architect"),[be,Me]=Q.useState([]),[Le,I]=Q.useState(!1),[B,U]=Q.useState(""),[H,te]=Q.useState({}),fe=Q.useRef({}),[Ae,Te]=Q.useState(""),Pe=10,[et,Qe]=Q.useState({count:0,limit:Pe}),[dt,wt]=Q.useState(null),ae=Q.useRef(null),[Ie,ne]=Q.useState(!1),[we,me]=Q.useState(null),[Ke,Je]=Q.useState(!1),ct=Q.useRef(!1),Et=A.past.length>0,Bt=A.future.length>0,Ee=Q.useCallback(()=>{F(q=>{if(!q.past.length)return q;const _e=q.past[q.past.length-1];T.current=!0,b(_e);const Ue=q.past.slice(0,-1),$e=[q.present,...q.future].slice(0,zv);return{past:Ue,present:_e,future:$e}})},[b]),it=Q.useCallback(()=>{F(q=>{if(!q.future.length)return q;const _e=q.future[0];T.current=!0,b(_e);const Ue=[...q.past,q.present].slice(-zv),$e=q.future.slice(1);return{past:Ue,present:_e,future:$e}})},[b]),mt=Q.useCallback((q={})=>new Promise(_e=>{ae.current=_e,wt({title:"Please Confirm",message:"",confirmLabel:q.showCancel===!1?"OK":"Continue",cancelLabel:"Cancel",showCancel:q.showCancel!==!1,tone:"default",...q})}),[]),bt=Q.useCallback(q=>{ae.current&&(ae.current(q),ae.current=null),wt(null)},[]),Rt=Q.useCallback(()=>{mt({title:"Project saved locally.",message:"Thanks for helping us test InstaSpec!",showCancel:!1,confirmLabel:"Close"})},[mt]),Ot=Q.useCallback((q,_e,Ue="Close")=>mt({title:q,message:_e,showCancel:!1,confirmLabel:Ue}),[mt]),Vt=Q.useCallback((q,_e,Ue="Continue",$e="Cancel")=>mt({title:q,message:_e,showCancel:!0,confirmLabel:Ue,cancelLabel:$e}),[mt]),Vr=Q.useCallback(q=>{te(_e=>({..._e,[q]:!0})),fe.current[q]&&clearTimeout(fe.current[q]),fe.current[q]=setTimeout(()=>{te(_e=>{const Ue={..._e};return delete Ue[q],Ue}),delete fe.current[q]},4e3)},[]),mr=dt?u.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:u.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-white p-6 shadow-2xl",children:[dt.title&&u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:dt.title}),dt.message&&u.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-line",children:dt.message}),u.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[dt.showCancel&&u.jsx("button",{type:"button",onClick:()=>bt(!1),className:"rounded-lg border border-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:dt.cancelLabel||"Cancel"}),u.jsx("button",{type:"button",onClick:()=>bt(!0),className:`rounded-lg px-4 py-2 text-sm font-semibold text-white ${dt.tone==="danger"?"bg-red-600 hover:bg-red-700":"bg-indigo-600 hover:bg-indigo-700"}`,children:dt.confirmLabel||"OK"})]})]})}):null,[qe,Ft]=Q.useState({id:"",mark:"",zone:"Tower A",level:"01",roomName:"",qty:1,width:900,height:2100,weight:45,fire:0,use:"",material:"Timber",config:"Single",thickness:45,visionPanel:!1,handing:"RH",stc:35,ada:!1,notes:"",hardwareIntent:"Mechanical",additionalLocations:[]}),[wr,Gt]=Q.useState({}),[Rr,rr]=Q.useState(""),[Zt,zr]=Q.useState(null),[$t,Ze]=Q.useState({isOpen:!1,setId:null}),[It,cn]=Q.useState(null),[kr,vr]=Q.useState({isOpen:!1,templateId:"",markPrefix:"",locationsText:""}),[dn,nr]=Q.useState(!1),[zn,on]=Q.useState("Saved"),[xe,Re]=Q.useState({isOpen:!1,doors:[]}),[Ve,tt]=Q.useState(null),O=q2(qe),Z=parseInt(qe.width,10)||0,G=Math.max(0,Z-XT),Y=qe.ada&&(Z<Hv||G<Hv),ee=Y?`Door width ${Z||0}mm provides ${G}mm clear opening; ADA requires ${Hv}mm (32").`:"",re=!!(t&&(t.plan==="beta_tester"||t.plan==="beta_admin")),ke=!t||t.plan==="beta_admin"?null:et.count;Q.useEffect(()=>{if(!x)return;const q=_e=>{w.current&&!w.current.contains(_e.target)&&_(!1)};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[x]),Q.useEffect(()=>{if(typeof window>"u")return;const q=window.matchMedia("(min-width: 1024px)"),_e=Ue=>L(Ue.matches);return q.addEventListener?q.addEventListener("change",_e):q.addListener(_e),()=>{q.removeEventListener?q.removeEventListener("change",_e):q.removeListener(_e)}},[]),Q.useEffect(()=>{if(typeof window>"u")return;const q=_e=>{if(!k||!_e.ctrlKey||_e.metaKey)return;const Ue=_e.key.toLowerCase();Ue==="z"&&!_e.shiftKey&&Et?(_e.preventDefault(),Ee()):(Ue==="y"||Ue==="z"&&_e.shiftKey)&&Bt&&(_e.preventDefault(),it())};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[k,Ee,it,Et,Bt]),Q.useEffect(()=>{if(T.current){T.current=!1;return}const q=KT(W);F(_e=>({past:[..._e.past,_e.present].slice(-zv),present:q,future:[]}))},[W]),Q.useEffect(()=>{if(!(t!=null&&t.email)){b([]),le(null);return}(async()=>{try{const _e=await LA(t.email);b(_e.map(Wie))}catch(_e){console.error("Failed to load projects from Firestore",_e)}})()},[t==null?void 0:t.email]),Q.useEffect(()=>{let q=!0;return(async()=>{if(!t||t.plan==="beta_admin"){q&&Qe({count:0,limit:Pe});return}try{const Ue=await GP(t.email);q&&Qe(Ue)}catch(Ue){console.error("Failed to load download usage",Ue)}})(),()=>{q=!1}},[t==null?void 0:t.email]),Q.useEffect(()=>{!t&&S!=="landing"&&N("landing")},[t,S]),Q.useEffect(()=>{if(!(t!=null&&t.email))return;on("Saving..."),(async()=>{try{for(const _e of W)await l0(t.email,_e);on("Saved")}catch(_e){console.error("Failed to save projects",_e),on("Error saving")}})()},[W,t==null?void 0:t.email]),Q.useEffect(()=>{if(typeof window>"u")return;window.history.replaceState({view:S},""),ct.current=!1;const q=_e=>{var $e;const Ue=(($e=_e.state)==null?void 0:$e.view)||"landing";ct.current=!0,N(Ue)};return window.addEventListener("popstate",q),()=>window.removeEventListener("popstate",q)},[]),Q.useEffect(()=>{if(ct.current){ct.current=!1;return}typeof window>"u"||window.history.pushState({view:S},"")},[S]),Q.useEffect(()=>{ve&&(Hr(),un(),qe.material==="Glass"&&qe.visionPanel&&Ft(q=>({...q,visionPanel:!1})))},[qe.fire,qe.use,qe.width,qe.height,qe.thickness,qe.location,qe.material]),Q.useEffect(()=>{if(!t||!t.expiresAt){v("");return}const q=()=>{const Ue=t.expiresAt-Date.now();if(Ue<=0){v("Expired");return}const $e=Math.round(Ue/6e4),ut=Math.floor($e/60),rt=$e%60;ut>0?v(`Expires in ${ut}h ${rt}m`):v(`Expires in ${rt}m`)};q();const _e=setInterval(q,6e4);return()=>clearInterval(_e)},[t]),Q.useEffect(()=>{h&&Te("")},[h]);const pe=()=>W.find(q=>q.id===R),Ne=Q.useCallback(q=>{var ut,rt;const _e=pe();if(!_e)return!1;const Ue=Array.isArray(_e.doors)&&_e.doors.length>0,$e=Array.isArray(_e.sets)&&_e.sets.length>0;switch(q){case 0:return!!((ut=_e.name)!=null&&ut.trim())&&!!_e.type&&!!_e.standard&&!!((rt=_e.details)!=null&&rt.jurisdiction);case 1:return Ue;case 2:return Ue&&$e;case 3:return Ue&&$e&&Ke;default:return!1}},[W,R,Ke]),je=Q.useCallback(q=>{if(q==null||q<=0)return!0;for(let _e=0;_e<q;_e+=1)if(!Ne(_e))return!1;return!0},[Ne]),Oe=Q.useCallback(q=>{if(!(typeof q!="number"||q===j)){if(q>j&&!je(q)){me(q);const _e=Kh[q-1]||"previous step",Ue=Kh[q]||"next step";Ot(q===1?"Finish Setup to Continue":"Finish previous step",`Complete ${_e} before moving to ${Ue}.`);return}me(null),z(q)}},[j,je,Ot]),st=Q.useCallback(()=>{Je(!0),Oe(3)},[Oe]);Q.useEffect(()=>{we!==null&&je(we)&&me(null)},[we,je]),Q.useEffect(()=>{Je(!1)},[R]),Q.useEffect(()=>{j<3&&Ke&&Je(!1)},[j,Ke]);const pt=(q,_e)=>{const Ue={timestamp:new Date().toISOString(),user:ye,action:_e};b($e=>$e.map(ut=>ut.id===q?{...ut,auditLog:[Ue,...ut.auditLog||[]]}:ut))},gt=()=>{const q=rd(),_e={id:q,name:"",type:"Commercial Office",standard:"ANSI",details:{client:"",architect:"",jurisdiction:"IBC 2021",address:""},doors:[],sets:[],auditLog:[],instantInputs:$p(),instantSchedulingEnabled:!1,mkSystemEnabled:!1};b([...W,_e]),ft(q)},ft=q=>{le(q),me(null),z(0),N("wizard")},At=async(q,_e)=>{if(_e.stopPropagation(),!!await mt({title:"Delete project?",message:"Are you sure you want to delete this project?",confirmLabel:"Delete",tone:"danger"}))try{await jA(q),b(W.filter($e=>$e.id!==q)),R===q&&(le(null),N("dashboard"))}catch($e){console.error("Failed to delete project",$e),await Ot("Something went wrong","Unable to delete project. Please try again.")}},er=async()=>{if(await mt({title:"Reset workspace?",message:"This will clear all data for this user. Are you sure?",confirmLabel:"Reset",tone:"danger"})){if(!(t!=null&&t.email)){b([]),N("landing");return}try{const _e=await LA(t.email);await Promise.all(_e.map(Ue=>jA(Ue.id)))}catch(_e){console.error("Failed to reset projects",_e)}b([]),le(null),me(null),z(0),N("landing")}},_r=(q,_e)=>{b(Ue=>Ue.map($e=>{if($e.id!==R)return $e;const rt={...$p(),...$e.instantInputs||{}},or=$e.type;return{...$e,instantInputs:{...rt,[or]:{...rt[or],[q]:_e}}}}))},pr=q=>{b(_e=>_e.map(Ue=>Ue.id===R?{...Ue,instantSchedulingEnabled:!!q}:Ue))},en=async()=>{const q=pe();if(!q)return;if(!q.instantSchedulingEnabled){await Ot("Enable Instant Scheduling","Turn on Instant Door Scheduling in Step 1 to generate starter doors.");return}const _e=Pie(q);if(!_e.length){await Ot("Need more info","Add more Instant Door Scheduling info in Step 1 to auto-generate doors.");return}q.doors.length>0&&!await mt({title:"Append doors?",message:"Append generated doors to your existing schedule?",confirmLabel:"Append"})||Re({isOpen:!0,doors:_e})},mn=()=>{if(!xe.doors.length){Re({isOpen:!1,doors:[]});return}if(!pe())return;const _e=W.map(Ue=>Ue.id===R?{...Ue,doors:[...Ue.doors,...xe.doors]}:Ue);b(_e),pt(R,`Auto-generated ${xe.doors.length} doors`),Re({isOpen:!1,doors:[]})},gn=async(q,_e,Ue,$e)=>{const ut=W.map(rt=>rt.id===R?{...rt,name:q,type:_e,standard:Ue,details:$e}:rt);if(b(ut),pt(R,`Updated project details: ${q}`),t!=null&&t.email){const rt=ut.find(or=>or.id===R);rt&&await l0(t.email,rt)}},Dn=()=>{I(!0)},In=async()=>{if(Object.keys(wr).length>0)return;const q=W.map(_e=>{if(_e.id===R){const Ue=[..._e.doors],$e=qe.id||rd(),ut=(qe.additionalLocations||[]).filter(zt=>zt.zone||zt.level||zt.roomName),rt=Cc({...qe,id:$e,additionalLocations:ut}),or=Ue.findIndex(zt=>zt.id===qe.id);return or>=0?Ue[or]=rt:Ue.push(rt),{..._e,doors:Ue}}return _e});if(b(q),pt(R,`Saved door: ${qe.mark}`),ge(!1),t!=null&&t.email){const _e=q.find(Ue=>Ue.id===R);_e&&await l0(t.email,_e)}},ir=async q=>{const _e=W.map(Ue=>Ue.id===R?{...Ue,doors:Ue.doors.filter($e=>$e.id!==q)}:Ue);if(b(_e),pt(R,`Deleted door ID: ${q}`),t!=null&&t.email){const Ue=_e.find($e=>$e.id===R);Ue&&await l0(t.email,Ue)}},Ir=async q=>{const Ue=pe().doors.find(zt=>zt.id===q),$e=prompt("How many copies do you want to create?","1"),ut=parseInt($e)||1,rt=[];for(let zt=0;zt<ut;zt++)rt.push(Cc({...Ue,id:rd(),mark:`${Ue.mark}-CP${zt+1}`}));const or=W.map(zt=>zt.id===R?{...zt,doors:[...zt.doors,...rt]}:zt);if(b(or),pt(R,`Bulk duplicated door ${Ue.mark} (${ut} times)`),t!=null&&t.email){const zt=or.find(Pt=>Pt.id===R);zt&&await l0(t.email,zt)}},Dr=(q,_e)=>{b(Ue=>Ue.map($e=>{if($e.id!==R)return $e;const ut=$e.doors.map(rt=>{if(rt.id!==q)return rt;const or=[...rt.additionalLocations||[]],zt=_e(or,rt)||[];return Cc({...rt,additionalLocations:zt})});return{...$e,doors:ut}}))},Sr=q=>{var Ue;const _e=(Ue=pe())==null?void 0:Ue.doors.find($e=>$e.id===q);_e&&Dr(q,$e=>[...$e,{zone:_e.zone,level:_e.level,roomName:`${_e.roomName} #${$e.length+2}`}])},Xt=(q,_e,Ue,$e)=>{Dr(q,ut=>{const rt=[...ut];return rt[_e]={...rt[_e],[Ue]:$e},rt})},Tn=(q,_e)=>{Dr(q,Ue=>{const $e=[...Ue];return $e.splice(_e,1),$e})},un=()=>{let q=45;if(qe.material==="Glass")q=12;else{const Pt=parseInt(qe.fire);Pt===0||Pt===20||Pt===30?q=45:Pt===45||Pt===60?q=54:Pt>=90&&(q=64)}let _e=45;const Ue=qe.height/1e3,$e=qe.width/1e3,ut=q/1e3,rt=Ue*$e*ut,or=Ue*$e;if(qe.material==="Timber"){const Pt=parseInt(qe.fire)>0?800:600;_e=Math.round(rt*Pt)}else if(qe.material==="Glass")_e=Math.round(rt*2500);else if(qe.material==="Metal"){const Pt=parseInt(qe.fire)>0?45:35;_e=Math.round(or*Pt)}else _e=Math.round(or*30);_e=Math.ceil(_e/5)*5;let zt=30;for(const[Pt,yr]of Object.entries($T))if(qe.use.includes(Pt)||qe.roomName&&qe.roomName.includes(Pt)){zt=yr;break}Ft(Pt=>({...Pt,thickness:Pt.thicknessAuto===!1?Pt.thickness:q,thicknessAuto:Pt.thicknessAuto===void 0?!0:Pt.thicknessAuto,weight:Pt.weightAuto===!1?Pt.weight:_e,weightAuto:Pt.weightAuto===void 0?!0:Pt.weightAuto,stc:zt}))},Hr=()=>{let q=null;const _e=qe.use.toLowerCase(),Ue=qe.fire>0;(_e.includes("stair")||_e.includes("exit"))&&!Ue?q={type:"warning",msg:"Code Alert: Stairwell/Exit doors typically require a Fire Rating (e.g., 60min/90min per NFPA 80 / EN 1634)."}:(_e.includes("unit")||_e.includes("guest"))&&!Ue?q={type:"warning",msg:"Code Alert: Unit Entry doors usually require a fire rating (e.g., FD30/20min)."}:qe.width<850&&(_e.includes("patient")||_e.includes("accessible")||_e.includes("entrance"))?q={type:"info",msg:"Accessibility Note: Clear opening width might be too narrow for wheelchair access (Recommend >900mm)."}:_e.includes("corridor")&&!Ue&&(q={type:"info",msg:"Cross-corridor doors often require smoke/fire control."}),q&&Sj&&v4(qe.id||qe.mark||"door-form","checkCompliance",{use:qe.use,fire:qe.fire,note:q}),zr(q)},Oa=(q,_e)=>{const Ue={...wr};let $e="";const ut=parseInt(_e)||0;if(q==="width"||q==="all"){const rt=q==="all"?qe.width:ut;rt>0&&(rt<600||rt>1300)?Ue.width="Width must be 600-1300mm":delete Ue.width,rt>1100&&($e="Info: Wide (>1100mm). HD Closers suggested.")}if(q==="height"||q==="all"){const rt=q==="all"?qe.height:ut;rt>0&&(rt<1900||rt>3e3)?Ue.height="Height must be 1900-3000mm":delete Ue.height}(q==="weight"||q==="all")&&(q==="all"?qe.weight:ut)>150&&($e="Info: Heavy (>150kg). Pivot Sets suggested."),Gt(Ue),rr($e)},ri=(q=null)=>{var $e;const _e=pe(),Ue=(($e=Wu[_e.type])==null?void 0:$e.usages)||Wu["Commercial Office"].usages;Ft(Cc(q?{...q}:{id:"",mark:`D-${(_e.doors.length+1).toString().padStart(3,"0")}`,zone:"Tower A",level:"01",roomName:"",qty:1,width:900,height:2100,weight:45,fire:0,use:Ue[0],material:"Timber",config:"Single",thickness:45,thicknessAuto:!0,visionPanel:!1,handing:"RH",stc:35,ada:!1,notes:"",weightAuto:!0,additionalLocations:[]})),Gt({}),rr(""),zr(null),Ze({isOpen:!1,setId:null}),ge(!0)},Pn=(q,_e)=>{const Ue=new Blob([q],{type:"text/csv;charset=utf-8;"}),$e=document.createElement("a");if($e.download!==void 0){const ut=URL.createObjectURL(Ue);$e.setAttribute("href",ut),$e.setAttribute("download",_e),$e.style.visibility="hidden",document.body.appendChild($e),$e.click(),document.body.removeChild($e)}},Gs=async()=>{if(U("Generating..."),!await mt({title:"Review Notice",message:Bg,confirmLabel:"I Understand"})){U("");return}try{const _e=await m1(()=>import("https://cdn.sheetjs.com/xlsx-0.20.1/package/xlsx.mjs"),[]),Ue=pe(),$e=_e.utils.book_new(),ut=(Pt,yr)=>{var hr,Tt,Ur;const qt=[[`PROJECT: ${Ue.name}`],[`CLIENT: ${((hr=Ue.details)==null?void 0:hr.client)||""}`,`ARCHITECT: ${((Tt=Ue.details)==null?void 0:Tt.architect)||""}`],[`FACILITY: ${Ue.type}`,`JURISDICTION: ${((Ur=Ue.details)==null?void 0:Ur.jurisdiction)||""}`],[`STANDARD: ${Ue.standard}`,`DATE: ${new Date().toLocaleDateString()}`],[]],yt=_e.utils.json_to_sheet(Pt,{origin:"A6"});_e.utils.sheet_add_aoa(yt,qt,{origin:"A1"}),_e.utils.book_append_sheet($e,yt,yr)},rt=Ue.doors.map(Pt=>{var yr;return{Mark:Pt.mark,Zone:Pt.zone,Level:Pt.level,Room:Pt.roomName,Qty:Pt.qty,Width:Pt.width,Height:Pt.height,Thk:Pt.thickness,Fire:Pt.fire>0?`${Pt.fire} min`:"NFR",Acoustic:Pt.stc?`${Pt.stc} dB`:"N/A",Material:Pt.material,Config:Pt.config,Handing:Pt.handing,"HW Set":((yr=Ue.sets.find(qt=>qt.doors.includes(Pt.id)))==null?void 0:yr.id)||"None"}});ut(rt,"Door Schedule");const or=[];Ue.sets.forEach(Pt=>{const qt=Ue.doors.filter(yt=>Pt.doors.includes(yt.id)).some(yt=>yt.config==="Double")?"Double":"Single";(Pt.items||[]).forEach(yt=>{or.push({Set:Pt.id,"Set Name":Pt.name,"Door Config":qt,Ref:yt.ref,Category:yt.category,Type:yt.type,Style:yt.style,Finish:yt.finish,Spec:yt.spec,Qty:yt.qty,"Acoustic Contribution":yt.acousticContribution||""})})}),ut(or,"Hardware Specs");const zt={};Ue.sets.forEach(Pt=>{const yr=Ue.doors.filter(qt=>Pt.doors.includes(qt.id)).reduce((qt,yt)=>qt+yt.qty,0);(Pt.items||[]).forEach(qt=>{const yt=`${qt.category}_${qt.type}_${qt.spec}_${qt.finish}`;zt[yt]||(zt[yt]={Category:qt.category,Type:qt.type,Style:qt.style,Spec:qt.spec,Finish:qt.finish,"Total Qty":0});let hr=parseFloat(qt.qty);isNaN(hr)&&(hr=1),zt[yt]["Total Qty"]+=hr*yr})}),ut(Object.values(zt),"Bill of Materials"),_e.writeFile($e,`${Ue.name.replace(/\s+/g,"_")}_Schedule_v2.xlsx`),U(""),on("Exported!")}catch(_e){console.error("Export failed:",_e),await Ot("Export failed","Failed to generate Excel file. Please check your internet connection (loading external engine)."),U(""),on("Error")}},Oo=async()=>{if(!await mt({title:"Review Notice",message:Bg,confirmLabel:"I Understand"}))return;const _e=pe(),Ue=_e.doors.map(rt=>{var or;return{Mark:rt.mark,IfcDoorStyle:rt.config,Width:rt.width,Height:rt.height,FireRating:rt.fire,AcousticRating:rt.stc||"N/A",HardwareSet:((or=_e.sets.find(zt=>zt.doors.includes(rt.id)))==null?void 0:or.id)||"None"}}),$e=Object.keys(Ue[0]),ut=[$e.join(","),...Ue.map(rt=>$e.map(or=>`"${(rt[or]||"").toString().replace(/"/g,'""')}"`).join(","))].join(`
`);Pn(ut,`${_e.name.replace(/\s+/g,"_")}_BIM_SharedParams.csv`)},Ru=async()=>{await mt({title:"Review Notice",message:Bg,confirmLabel:"I Understand"})&&window.print()},co=async q=>{if(!t){await Ot("Sign in required","Please log in to download documents.");return}if(t.plan==="beta_admin"){await Promise.resolve(q());return}try{const _e=await dH(t.email,Pe);if(!_e.allowed){const Ue="Youve reached the 10-download limit for this beta. Please contact your InstaSpec admin to increase your download allowance.";Te(Ue),await Ot("Download limit",Ue),Qe({count:_e.count,limit:_e.limit});return}Qe(_e),Te(""),await Promise.resolve(q())}catch(_e){console.error("Failed to increment download usage",_e),await Ot("Download check failed","Unable to verify download limit. Please try again shortly.")}},Ys=async()=>{const q=pe();if(!q)return;if(!q.doors.length){await Ot("Door schedule missing","Finish the Door scheduling before proceeding to the next step.");return}const _e={};q.doors.forEach(ut=>{const rt=`${ut.use}|${ut.fire}|${ut.config}|${ut.material}|${ut.stc}|${ut.hardwareIntent||"Mechanical"}`;_e[rt]||(_e[rt]=[]),_e[rt].push(ut)});const Ue=Object.entries(_e).map(([ut,rt],or)=>{const zt=GT(rt),[Pt,yr,qt,yt,hr,Tt]=ut.split("|"),Ur=parseInt(yr),Lr=rt.reduce((kt,Qt)=>kt.weight>Qt.weight?kt:Qt),qr=Tt==="Electromechanical"?"Electromechanical":"Mechanical",Rn=rt.some(kt=>kt.ada),Fs=`HW-${String(or+1).padStart(2,"0")}`,Mr=qt==="Double",ca=Mr?"2":"1",ii=(Pt||"").toLowerCase(),gs=ii.includes("guest room");let si=[];const dr=(kt,Qt,Or,fn,xn,g)=>{const P=YT(kt,q.standard);si.push({category:kt,ref:Qt,type:Or,style:fn,spec:xn,qty:g,finish:P})};let ai=3;Lr.height>2300&&(ai=4),Lr.weight>120&&(ai=4),Lr.height>2300&&Lr.weight>120&&(ai=5);const E=ai*(Mr?2:1),V=kt=>Mr?`${kt} (Active Leaf)`:kt,ue=kt=>Mr?`${kt} (Inactive Leaf)`:kt;if(yt==="Glass"){dr("Hinges","P01","Patch Fitting","Top Patch","Top/Bottom patch kit",Mr?"2":"1"),dr("Locks","L01","Patch Lock","Corner Patch Lock",V("Euro Cylinder Type"),"1");const Qt=zt.requiresPanic?"Panic Push Pull Handle":"Pull Handle",Or=zt.requiresPanic?"L-Shaped":"D-Pull",fn=zt.requiresPanic?V("L-shaped panic pull for tempered glass"):V("600mm ctc");dr("Handles","H01",Qt,Or,fn,"1 Pr"),dr("Closers","D01","Floor Spring","Double Action",V("EN 1-4"),"1"),Mr&&dr("Closers","D02","Floor Spring","Double Action",ue("EN 1-4"),"1")}else{const kt=q.standard==="ANSI"?"4.5x4.5":"102x76x3";dr("Hinges","H01","Butt Hinge","Ball Bearing",`${kt}, SS`,E.toString()),ii.includes("stair")?dr("Locks","L01","Panic Bar","Rim Type",V("Fire Rated Exit Device"),"1"):gs?(dr("Locks","L01","Hotel Lock","RFID Mortise",V("Mobile key / RFID ready hotel lock"),"1"),dr("Cylinders","C01","Cylinder","Mortise Cylinder",V("Emergency override cylinder"),ca),dr("Handles","H02","Lever Handle","Return to Door","Interior privacy lever trim","1 Pr"),dr("Accessories","A02","Door Viewer","Wide Angle","180 guest room viewer","1"),dr("Accessories","A03","Kick Plate","Satin Stainless",V("Corridor protection plate"),ca)):(dr("Locks","L01","Mortise Lock","Sashlock",V("Cylinder Function"),"1"),dr("Cylinders","C01","Cylinder","Euro Profile",V("Key/Turn"),"1"),dr("Handles","H02","Lever Handle","Return to Door",V("19mm dia"),"1 Pr")),dr("Closers","D01","Overhead Closer","Rack & Pinion",V("EN 2-5, Backcheck"),"1"),Mr&&dr("Closers","D02","Overhead Closer","Rack & Pinion",ue("EN 2-5, Backcheck"),"1"),dr("Stops","S01","Door Stop","Floor Mounted Dome","Rubber Buffer","1"),Ur>0&&(dr("Seals","GS01","Perimeter Seal","Intumescent","Head & jambs, 3 sides","1 Set"),dr("Seals","GS02","Drop Seal","Automatic","Under door smoke seal","1")),Mr&&dr("Accessories","A01","Leaf Assignment","Active/Inactive","Inactive leaf held closed without locking hardware","1")}Ur>0&&yt==="Glass"&&(dr("Seals","GS01","Perimeter Seal","Intumescent","Glass intumescent gasketing","1 Set"),dr("Seals","GS02","Drop Seal","Automatic","Smoke seal at threshold","1")),qr==="Electromechanical"&&(gs?dr("Electrified","E02","Door Contact","Surface",V("Online monitoring contact"),ca):dr("Electrified","E01","Electric Strike",Ur>0?"Fail-Safe":"Fail-Secure",V("Access control interface"),"1"));const Se=[];Ur>0?Se.push(`Fire door to ${Ur}min with ${Oie(qt)} configuration`):Se.push(`${qt} door, non-fire rated`),qr==="Electromechanical"?Se.push("Electrified access control with fail-safe release"):Se.push("Mechanical locking with free egress"),si.some(kt=>(kt.type||"").toLowerCase().includes("panic"))&&Se.push("Single-motion exit via panic hardware"),si.some(kt=>kt.category==="Seals")&&Se.push("Perimeter and bottom seals included"),Rn&&Se.push("Meets ADA 813mm clear opening with accessible hardware");const Ye=Se.join(". ")+".",Ut=id(rt,si),Wt=sd(si,q.standard,{...Ut,removedAutoTags:[],setId:Fs});return{id:Fs,name:`${Pt} Door (${yt}) - ${Ur>0?Ur+"min":"NFR"}`,doors:rt.map(kt=>kt.id),intent:qr,items:Wt,operation:Ye,removedAutoTags:[]}}),$e=W.map(ut=>ut.id===R?{...ut,sets:Ue}:ut);b($e),Oe(2),await mt({title:"Review Notice",message:Bg,confirmLabel:"I Understand",showCancel:!1})},ni=(q,_e,Ue,$e)=>{const ut=W.map(rt=>{if(rt.id===R){const or=rt.sets.map(zt=>{if(zt.id===q){const Pt=[...zt.items];Pt[_e]={...Pt[_e],[Ue]:$e};const yr=rt.doors.filter(hr=>zt.doors.includes(hr.id)),qt=id(yr,Pt),yt=zt.removedAutoTags?[...zt.removedAutoTags]:[];return{...zt,items:sd(Pt,rt.standard,{...qt,removedAutoTags:yt,setId:q}),removedAutoTags:yt}}return zt});return{...rt,sets:or}}return rt});b(ut)},Ba=q=>{const _e={...q,id:`LIB-${rd()}`,name:`${q.name} (Template)`};Me([...be,_e]),Ot("Library updated","Hardware Set saved to Global Library!","Great!")},ps=q=>{const _e=pe(),Ue=`HW-${String(_e.sets.length+1).padStart(2,"0")}`,$e={...q,id:Ue,doors:[]},ut={...id([],$e.items||[]),removedAutoTags:$e.removedAutoTags||[],setId:Ue},rt={...$e,items:sd($e.items||[],_e.standard,ut),removedAutoTags:$e.removedAutoTags||[]},or=W.map(zt=>zt.id===R?{...zt,sets:[...zt.sets,rt]}:zt);b(or),pt(R,`Loaded set ${q.name} from Library`)},Ua=q=>{Ze({isOpen:!0,setId:q})},nc=(q,_e)=>{const Ue=pe();if(!Ue)return;const $e=Ux[q],ut=$e==null?void 0:$e.types.find(yr=>yr.name===_e),rt=ut?ut.styles[0]:"",or=Ue.sets.find(yr=>yr.id===$t.setId);if(!or)return;if(q==="Hinges"&&or.items.some(yr=>yr.category==="Hinges")){Ot("One at a time","Only one hanging product can be specified per hardware set.");return}if(q==="Locks"&&or.items.some(yr=>yr.category==="Locks")){Ot("One at a time","Only one locking product can be specified per hardware set.");return}const zt=Kd(or.items,q),Pt=W.map(yr=>{if(yr.id===R){const qt=yr.sets.map(yt=>{if(yt.id===$t.setId){const hr={category:q,ref:zt,type:_e,style:rt,spec:"",qty:"1",finish:YT(q,Ue.standard)},Tt=yr.doors.filter(qr=>yt.doors.includes(qr.id)),Ur=id(Tt,[...yt.items,hr]),Lr=yt.removedAutoTags||[];return{...yt,items:sd([...yt.items,hr],yr.standard,{...Ur,removedAutoTags:Lr,setId:yt.id}),removedAutoTags:Lr}}return yt});return{...yr,sets:qt}}return yr});b(Pt),Ze({isOpen:!1,setId:null})},ic=()=>{const q=pe(),_e=q==null?void 0:q.doors.find(qt=>qt.id===kr.templateId);if(!q||!_e){Ot("Template needed","Select a template door.");return}const Ue=kr.locationsText.split(`
`).map(qt=>qt.trim()).filter(Boolean);if(!Ue.length){Ot("Locations missing","Provide at least one location.");return}const $e=Ue.map(qt=>{const yt=qt.split("|").map(hr=>hr.trim());return{zone:yt[0]||_e.zone||"",level:yt[1]||_e.level||"",roomName:yt[2]||_e.roomName||""}}),[ut,...rt]=$e,or=kr.markPrefix||_e.mark||`D-${String(q.doors.length+1).padStart(3,"0")}`,zt=Ej(q.doors,or),Pt=Cc({..._e,id:rd(),mark:zt,zone:ut.zone,level:ut.level,roomName:ut.roomName,additionalLocations:rt,qty:$e.length}),yr=W.map(qt=>qt.id===R?{...qt,doors:[...qt.doors,Pt]}:qt);b(yr),pt(R,`Bulk created door ${zt} (${$e.length} locations)`),vr({isOpen:!1,templateId:"",markPrefix:"",locationsText:""})},sc=(q,_e)=>{const Ue=W.map($e=>{if($e.id===R){const ut=$e.sets.map(rt=>{if(rt.id===q){const or=[...rt.items];or.splice(_e,1);const zt=$e.doors.filter(yt=>rt.doors.includes(yt.id)),Pt=id(zt,or),yr=rt.removedAutoTags?[...rt.removedAutoTags]:[],qt=rt.items[_e];return qt!=null&&qt.autoTag&&!yr.includes(qt.autoTag)&&yr.push(qt.autoTag),{...rt,items:sd(or,$e.standard,{...Pt,removedAutoTags:yr,setId:q}),removedAutoTags:yr}}return rt});return{...$e,sets:ut}}return $e});b(Ue)},uo=()=>{const q=pe();return uie(q)};return S==="landing"?u.jsxs(u.Fragment,{children:[u.jsx(Zie,{onStart:()=>N("dashboard"),hasProjects:W.length>0,isAdmin:h,onOpenAdmin:()=>s(!0),isAdminOpen:i,onCloseAdmin:()=>s(!1),showNotice:Ot}),mr]}):Le?u.jsxs("div",{className:"bg-white min-h-screen text-black p-8 font-serif",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8 border-b-2 border-black pb-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold uppercase tracking-wider",children:((Xs=pe().name)==null?void 0:Xs.trim())||"New Project"}),u.jsx("p",{className:"text-sm",children:"Architectural Door Hardware Schedule"})]}),u.jsxs("div",{className:"text-right text-sm",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Client:"})," ",((ms=pe().details)==null?void 0:ms.client)||"N/A"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Architect:"})," ",((ac=pe().details)==null?void 0:ac.architect)||"N/A"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Date:"})," ",new Date().toLocaleDateString()]})]})]}),pe().sets.map(q=>{const _e=pe().doors.find(Ue=>q.doors.includes(Ue.id));return u.jsxs("div",{className:"mb-10 break-inside-avoid",children:[u.jsxs("div",{className:"flex justify-between items-end border-b border-black mb-2 pb-1",children:[u.jsxs("h2",{className:"text-xl font-bold",children:[q.id,": ",q.name]}),u.jsx("span",{className:"text-sm font-mono",children:_e?`${_e.fire>0?`FD${_e.fire}`:"NFR"} | ${_e.material} | ${_e.config}`:""})]}),u.jsx("div",{className:"mb-4 text-sm italic text-gray-700",children:q.operation}),u.jsxs("table",{className:"w-full text-sm border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-gray-100 border-b border-gray-400",children:[u.jsx("th",{className:"text-left p-2",children:"Category"}),u.jsx("th",{className:"text-left p-2",children:"Item"}),u.jsx("th",{className:"text-left p-2",children:"Description"}),u.jsx("th",{className:"text-left p-2",children:"Finish"}),u.jsx("th",{className:"text-left p-2",children:"Acoustic"}),u.jsx("th",{className:"text-center p-2",children:"Qty"})]})}),u.jsxs("tbody",{children:[Object.keys(bo).map(Ue=>{const $e=q.items.filter(ut=>bo[Ue].includes(ut.category));return $e.length===0?null:u.jsxs(No.Fragment,{children:[u.jsx("tr",{className:"bg-gray-50",children:u.jsx("td",{colSpan:"6",className:"p-1 pl-2 font-bold text-xs uppercase text-gray-500 border-b",children:Ue})}),$e.map((ut,rt)=>u.jsxs("tr",{className:"border-b border-gray-200",children:[u.jsx("td",{className:"p-2 text-xs text-gray-400",children:ut.category}),u.jsx("td",{className:"p-2 font-bold",children:ut.type}),u.jsxs("td",{className:"p-2",children:[ut.style," - ",ut.spec]}),u.jsx("td",{className:"p-2",children:ut.finish}),u.jsx("td",{className:"p-2",children:ut.acousticContribution||""}),u.jsx("td",{className:"text-center p-2",children:ut.qty})]},rt))]},Ue)}),q.items.filter(Ue=>!Object.values(bo).flat().includes(Ue.category)).map((Ue,$e)=>u.jsxs("tr",{className:"border-b border-gray-200",children:[u.jsx("td",{className:"p-2 text-xs text-gray-400",children:Ue.category}),u.jsx("td",{className:"p-2 font-bold",children:Ue.type}),u.jsxs("td",{className:"p-2",children:[Ue.style," - ",Ue.spec]}),u.jsx("td",{className:"p-2",children:Ue.finish}),u.jsx("td",{className:"p-2",children:Ue.acousticContribution||""}),u.jsx("td",{className:"text-center p-2",children:Ue.qty})]},`other-${$e}`))]})]}),u.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[u.jsx("strong",{children:"Locations:"})," ",pe().doors.filter(Ue=>q.doors.includes(Ue.id)).map(Ue=>`${Ue.mark} (${Ue.roomName})`).join(", ")]})]},q.id)}),u.jsxs("div",{className:"fixed top-4 right-4 print:hidden",children:[u.jsxs("button",{onClick:()=>co(Ru),className:"px-4 py-2 bg-black text-white rounded shadow-lg flex items-center gap-2",children:[u.jsx(aW,{size:16})," Print PDF"]}),u.jsx("button",{onClick:()=>I(!1),className:"ml-2 px-4 py-2 bg-gray-200 text-black rounded shadow-lg",children:"Close"})]})]}):u.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 text-gray-900 font-sans",children:[u.jsx("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center px-4 md:px-8 sticky top-0 z-40",children:u.jsxs("div",{className:"w-full flex items-center gap-3",children:[u.jsxs("button",{onClick:()=>N("landing"),className:"flex items-center gap-2 font-bold text-lg md:text-xl text-gray-900 focus:outline-none",children:[u.jsx(Ju,{className:"text-indigo-600"}),u.jsx("span",{children:"InstaSpec"}),u.jsx("span",{className:"text-xs text-gray-400 font-normal ml-1",children:"v2.1 Beta"})]}),t&&u.jsx("div",{className:"flex-1 hidden md:flex items-center justify-center",children:u.jsxs("div",{className:"inline-flex items-center gap-3 rounded-full border border-gray-200 bg-white px-4 py-1.5 shadow-sm",children:[u.jsx(kA,{size:18,className:"text-indigo-500"}),u.jsxs("select",{value:ye,onChange:q=>ce(q.target.value),className:"bg-transparent border-none text-sm font-semibold focus:ring-0 cursor-pointer",children:[u.jsx("option",{value:"Architect",children:"Architect View"}),u.jsx("option",{value:"Contractor",disabled:!0,children:"Contractor View (Coming Soon)"})]})]})}),t&&u.jsxs("div",{className:"hidden md:flex items-center gap-3 ml-4",children:[re&&u.jsx("button",{onClick:()=>o(!0),className:"text-xs md:text-sm px-3 py-1.5 rounded-full border border-amber-200 text-amber-700 hover:bg-amber-50",children:"Share Feedback"}),h&&u.jsx("button",{onClick:()=>s(!0),className:`text-xs md:text-sm px-3 py-1.5 rounded-full border border-indigo-200\r
                             text-indigo-600 hover:bg-indigo-50`,children:"Beta Admin"}),S==="dashboard"&&W.length>0&&u.jsxs("button",{onClick:er,className:"text-gray-400 hover:text-red-500 text-sm flex items-center gap-1",title:"Clear All Data",children:[u.jsx(x5,{size:16}),u.jsx("span",{className:"hidden md:inline",children:"Reset"})]}),u.jsxs("button",{onClick:()=>N("dashboard"),className:"text-gray-500 hover:text-gray-900 flex items-center gap-2 text-sm md:text-base",children:[u.jsx(Rp,{size:18}),u.jsx("span",{className:"hidden md:inline",children:"Dashboard"})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:()=>p(q=>!q),className:`px-3 py-1.5 rounded-full bg-indigo-600 text-white text-xs md:text-sm\r
                             flex items-center gap-2 shadow-sm hover:bg-indigo-700 transition`,children:[u.jsx("span",{className:"max-w-[140px] truncate",children:t.email}),f&&u.jsx("span",{className:`text-[10px] md:text-[11px] px-2 py-0.5 rounded-full\r
                                 bg-indigo-500/80 border border-white/20 whitespace-nowrap`,children:f}),u.jsx(z0,{size:12,className:"opacity-80"})]}),d&&u.jsx("div",{className:`absolute right-0 mt-2 w-40 bg-white rounded-xl shadow-lg\r
                               ring-1 ring-black/5 py-1 text-sm animate-[fadeInUp_0.18s_ease-out] origin-top-right`,children:u.jsx("button",{onClick:()=>{e(),p(!1)},className:`w-full text-left px-3 py-2 text-gray-700\r
                                 hover:bg-indigo-50 hover:text-indigo-700`,children:"Logout"})})]})]}),t&&u.jsxs("div",{className:"ml-auto md:hidden relative",ref:w,children:[u.jsxs("button",{type:"button",onClick:()=>_(q=>!q),className:"flex items-center gap-2 rounded-lg border border-gray-200 px-3 py-1.5 text-sm font-medium text-gray-700",children:[u.jsx(kA,{size:16,className:"text-gray-500"}),u.jsx("span",{children:ye==="Architect"?"Architect View":"Contractor View"}),u.jsx(z0,{size:14,className:`transition-transform ${x?"rotate-180":""}`})]}),x&&u.jsxs("div",{className:"absolute right-0 mt-3 w-64 rounded-2xl bg-white shadow-2xl ring-1 ring-black/5 py-3 z-50",children:[u.jsxs("div",{className:"px-4 pb-2",children:[u.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:t.email}),f&&u.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:f})]}),u.jsx("div",{className:"border-t border-gray-100 my-2"}),u.jsx("div",{className:"px-4 text-[11px] font-semibold text-gray-500 uppercase tracking-wide mb-1",children:"View Mode"}),u.jsxs("button",{type:"button",onClick:()=>{ce("Architect"),_(!1)},className:"w-full px-4 py-2 text-sm flex items-center justify-between text-gray-800 hover:bg-indigo-50",children:[u.jsx("span",{children:"Architect View"}),ye==="Architect"&&u.jsx(Vu,{size:14,className:"text-indigo-600"})]}),u.jsxs("button",{type:"button",disabled:!0,className:"w-full px-4 py-2 text-sm flex items-center justify-between text-gray-400 cursor-not-allowed",children:[u.jsx("span",{children:"Contractor View"}),u.jsx("span",{className:"text-[10px] uppercase",children:"Soon"})]}),u.jsx("div",{className:"border-t border-gray-100 my-2"}),u.jsx("div",{className:"px-4 text-[11px] font-semibold text-gray-500 uppercase tracking-wide mb-1",children:"Actions"}),u.jsxs("button",{type:"button",onClick:()=>{N("dashboard"),_(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-indigo-50 flex items-center gap-2",children:[u.jsx(Rp,{size:16,className:"text-gray-400"}),"Dashboard"]}),re&&u.jsxs("button",{type:"button",onClick:()=>{o(!0),_(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-indigo-50 flex items-center gap-2",children:[u.jsx(rW,{size:16,className:"text-amber-500"}),"Share Feedback"]}),h&&u.jsxs("button",{type:"button",onClick:()=>{s(!0),_(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-indigo-50 flex items-center gap-2",children:[u.jsx(jp,{size:16,className:"text-indigo-500"}),"Beta Admin"]}),S==="dashboard"&&W.length>0&&u.jsxs("button",{type:"button",onClick:()=>{er(),_(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-red-50 flex items-center gap-2",children:[u.jsx(x5,{size:16,className:"text-red-400"}),"Reset Workspace"]}),u.jsx("div",{className:"border-t border-gray-100 my-2"}),u.jsxs("button",{type:"button",onClick:()=>{e(),_(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-indigo-50 flex items-center gap-2",children:[u.jsx(sW,{size:16,className:"text-gray-400"}),"Logout"]})]})]})]})}),S==="wizard"&&pe()&&u.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 md:px-8 py-3 flex flex-col md:flex-row items-start md:items-center justify-between sticky top-16 z-30 shadow-sm gap-3",children:[u.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4",children:[u.jsx("span",{className:"font-bold text-base md:text-lg",children:((Va=pe().name)==null?void 0:Va.trim())||"New Project"}),u.jsx("span",{className:"px-2 py-0.5 border rounded text-xs md:text-sm text-gray-500 bg-white whitespace-nowrap",children:pe().standard}),u.jsx("span",{className:"px-2 py-0.5 border rounded text-xs md:text-sm text-gray-500 bg-white whitespace-nowrap",children:pe().type})]}),u.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-end items-center",children:[u.jsxs("button",{onClick:()=>nr(!dn),className:"px-3 py-1.5 bg-white border border-gray-200 rounded hover:bg-gray-50 flex items-center gap-2 text-xs md:text-sm",children:[u.jsx(RA,{size:16})," History"]}),u.jsxs("button",{onClick:()=>{gn(pe().name,pe().type,pe().standard,pe().details),Rt()},className:"px-3 py-1.5 bg-white border border-gray-200 rounded hover:bg-gray-50 flex items-center gap-2 text-xs md:text-sm",children:[u.jsx(oW,{size:16})," Save"]}),u.jsxs("button",{onClick:()=>N("dashboard"),className:"px-3 py-1.5 bg-white border border-gray-200 rounded hover:bg-gray-50 flex items-center gap-2 text-xs md:text-sm",children:[u.jsx(kl,{size:16})," Close"]}),u.jsx("span",{className:"text-[11px] md:text-xs text-gray-500 border border-transparent rounded-full px-2 py-0.5 bg-gray-100 whitespace-nowrap",children:B||zn})]})]}),dn&&pe()&&u.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[u.jsx("div",{onClick:()=>nr(!1),className:"absolute inset-0 bg-black/20 backdrop-blur-sm"}),u.jsxs("div",{className:"relative w-80 bg-white shadow-2xl h-full overflow-y-auto p-6 animate-slideLeft",children:[u.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[u.jsx(RA,{size:20})," Audit Trail"]}),u.jsxs("div",{className:"space-y-4",children:[(Ji=pe().auditLog)==null?void 0:Ji.map((q,_e)=>u.jsxs("div",{className:"text-sm border-l-2 border-indigo-200 pl-3",children:[u.jsx("div",{className:"font-bold text-gray-800",children:q.action}),u.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex justify-between",children:[u.jsx("span",{children:q.user}),u.jsx("span",{children:new Date(q.timestamp).toLocaleTimeString()})]})]},_e)),(!pe().auditLog||pe().auditLog.length===0)&&u.jsx("p",{className:"text-gray-400 text-sm",children:"No history yet."})]})]})]}),u.jsxs("main",{className:"flex-1 p-4 md:p-8 max-w-7xl mx-auto w-full",children:[S==="dashboard"&&u.jsxs("div",{className:"animate-slideUp",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Projects"}),u.jsx("p",{className:"text-gray-500",children:"Manage your door specifications."})]}),u.jsxs("button",{onClick:gt,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2 font-medium shadow-sm w-full md:w-auto justify-center",children:[u.jsx(Zy,{size:18})," New Project"]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:W.map(q=>u.jsxs("div",{onClick:()=>ft(q.id),className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md hover:border-indigo-500 transition-all cursor-pointer group relative",children:[u.jsx("div",{className:"w-12 h-12 bg-indigo-50 text-indigo-600 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:u.jsx(Jq,{size:24})}),u.jsx("h3",{className:"font-bold text-lg mb-2",children:q.name}),u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded text-xs font-medium",children:q.type}),u.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded text-xs font-medium",children:q.standard})]}),u.jsxs("p",{className:"text-sm text-gray-400",children:[q.doors.length," Doors Defined"]}),u.jsx("button",{onClick:_e=>At(q.id,_e),className:"absolute top-4 right-4 text-gray-300 hover:text-red-500 p-2",children:u.jsx(Dd,{size:18})})]},q.id))})]}),S==="wizard"&&pe()&&u.jsxs("div",{children:[u.jsx("div",{className:"mb-6 md:mb-10",children:u.jsxs("div",{className:"bg-white/90 border border-gray-200 rounded-2xl px-3 py-4 shadow-sm",children:[u.jsx("div",{className:"hidden md:flex items-center gap-3",children:(()=>{var _e;return((_e=pe())!=null&&_e.mkSystemEnabled?Kh:Kh.slice(0,4)).map((Ue,$e,ut)=>{const rt=j===$e,or=Ne($e),zt=we===$e&&$e>j;return u.jsxs(No.Fragment,{children:[u.jsxs("button",{type:"button",onClick:()=>Oe($e),className:"flex flex-col items-center gap-2 min-w-[130px] text-center focus:outline-none",children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold border-2 transition-all ${rt?"bg-indigo-600 border-indigo-600 text-white shadow":or?"bg-emerald-500 border-emerald-500 text-white":zt?"bg-orange-50 border-orange-400 text-orange-500":"bg-white border-gray-300 text-gray-400"}`,children:or?u.jsx(Vu,{size:16}):$e+1}),u.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${rt?"text-indigo-600":"text-gray-400"}`,children:Ue})]}),$e<ut.length-1&&u.jsx("div",{className:`flex-1 h-0.5 rounded-full ${we===$e+1?"bg-orange-400":Ne($e)?"bg-emerald-400":"bg-gray-200"}`})]},`desktop-step-${Ue}`)})})()}),u.jsx("div",{className:"md:hidden",children:u.jsx("div",{className:"flex items-center justify-between gap-2",children:(()=>{var Ue,$e;const q=(Ue=pe())!=null&&Ue.mkSystemEnabled?qT:qT.slice(0,4),_e=($e=pe())!=null&&$e.mkSystemEnabled?Kh:Kh.slice(0,4);return q.map((ut,rt,or)=>{const zt=_e[rt],Pt=j===rt,yr=Ne(rt),qt=we===rt&&rt>j;return u.jsxs(No.Fragment,{children:[u.jsxs("button",{type:"button",onClick:()=>Oe(rt),className:"flex flex-col items-center gap-0.5 text-center focus:outline-none bg-transparent",children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border-2 transition-all ${Pt?"bg-indigo-600 border-indigo-600 text-white shadow":yr?"bg-emerald-500 border-emerald-500 text-white":qt?"bg-orange-50 border-orange-400 text-orange-500":"bg-white border-gray-300 text-gray-400"}`,children:yr?u.jsx(Vu,{size:14}):rt+1}),u.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider leading-tight ${Pt?"text-indigo-600":"text-gray-500"}`,children:ut}),u.jsx("span",{className:"sr-only",children:zt})]}),rt<or.length-1&&u.jsx("div",{className:"flex-1",children:u.jsx("div",{className:`h-0.5 rounded-full ${we===rt+1?"bg-orange-400":Ne(rt)?"bg-emerald-400":"bg-gray-200"}`})})]},`mobile-step-${ut}`)})})()})})]})}),j===0&&R&&u.jsx(iv,{projectId:R,projectDoors:pe().doors||[],children:(()=>{var Pt,yr,qt;const q=pe();console.log("Step 0 rendering, mkSystemEnabled:",q.mkSystemEnabled);const _e=q.type,Ue=xie(q,_e),$e=!!q.instantSchedulingEnabled,ut=(yt,hr,Tt=0)=>u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:yt}),u.jsx("input",{type:"number",min:Tt,value:Ue[hr]??"",onChange:Ur=>_r(hr,Math.max(Tt,parseInt(Ur.target.value,10)||0)),className:"w-full p-2 border rounded"})]}),rt=(yt,hr)=>u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:yt}),u.jsxs("select",{value:Ue[hr]?"yes":"no",onChange:Tt=>_r(hr,Tt.target.value==="yes"),className:"w-full p-2 border rounded bg-white",children:[u.jsx("option",{value:"yes",children:"Yes"}),u.jsx("option",{value:"no",children:"No"})]})]}),or=(yt,hr)=>{const Tt=Math.max(0,parseInt(hr,10)||0),Ur={...Ue.unitMix||Bx};Ur[yt]=Tt,_r("unitMix",Ur);const Lr=b1.reduce((qr,Rn)=>qr+(Ur[Rn]||0),0);_r("unitsPerFloor",Lr)},zt=()=>{if(_e==="Residential"){const yt=Ue.unitMix||Bx,hr=Math.max(1,b1.reduce((Tt,Ur)=>Tt+(yt[Ur]||0),0));return u.jsxs(u.Fragment,{children:[ut("Number of Floors","floors",1),u.jsxs("div",{className:"col-span-full space-y-2",children:[u.jsx("p",{className:"text-[11px] text-gray-500",children:"How many of each unit type sit on a typical floor? This helps group the hardware intent by usage automatically."}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:b1.map(Tt=>u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:[Tt," units / floor"]}),u.jsx("input",{type:"number",min:0,value:yt[Tt]??0,onChange:Ur=>or(Tt,Ur.target.value),className:"w-full p-2 border rounded"})]},Tt))}),u.jsxs("div",{className:"text-[11px] text-gray-500",children:["Total units per floor: ",hr]})]})]})}return _e==="Education / School"?u.jsxs(u.Fragment,{children:[ut("Number of Floors","floors",1),ut("Classrooms per Floor","classroomsPerFloor",0),ut("Toilets per Floor","toiletsPerFloor",0),rt("Admin / Lab Rooms","hasAdminLabs")]}):_e==="Commercial Office"?u.jsxs(u.Fragment,{children:[ut("Number of Floors","floors",1),rt("Open Office Layout","openLayout"),ut("Meeting Rooms per Floor","meetingRooms",0),rt("Service / Back-of-House Areas","hasServiceAreas")]}):_e==="Hospital / Healthcare"?u.jsxs(u.Fragment,{children:[ut("Number of Floors","floors",1),ut("Patient Rooms per Floor","patientRoomsPerFloor",1),ut("Operating Rooms","operatingRooms",0),ut("ICU / Isolation Rooms per Floor","icuRoomsPerFloor",0),rt("Emergency Department","hasEmergencyDept")]}):_e==="Airport / Transport"?u.jsxs(u.Fragment,{children:[ut("Number of Floors","floors",1),ut("Concourses / Wings","concourses",1),ut("Gates per Concourse","gatesPerConcourse",1),ut("Security Checkpoints","securityZones",1),rt("International / Customs Zone","hasInternationalZone")]}):_e==="Hospitality / Hotel"?u.jsxs(u.Fragment,{children:[ut("Number of Floors","floors",1),ut("Guest Rooms per Floor","roomsPerFloor",1),ut("Suites per Floor","suitesPerFloor",0),rt("Ballroom / Event Spaces","hasBallroom"),rt("Service / Back-of-House Areas","hasServiceZones")]}):u.jsxs(u.Fragment,{children:[ut("Number of Floors","floors",1),ut("Typical Rooms per Floor","roomsPerFloor",0)]})};return u.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-sm border border-gray-200 p-6 md:p-8 animate-slideUp",children:[u.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[u.jsx(uW,{size:24})," Project Context"]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("label",{className:"text-xs font-bold uppercase text-gray-600",children:["Project Name ",u.jsx("span",{className:"text-xs text-red-500",children:"*"})]}),u.jsx("input",{type:"text",placeholder:"New Project",value:q.name,onChange:yt=>{const hr=W.map(Tt=>Tt.id===R?{...Tt,name:yt.target.value}:Tt);b(hr)},className:"p-2.5 border rounded-md placeholder-gray-400"})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("label",{className:"text-xs font-bold uppercase text-gray-600",children:["Facility Type ",u.jsx("span",{className:"text-xs text-red-500",children:"*"})]}),u.jsx("select",{value:q.type,onChange:yt=>{const hr=W.map(Tt=>Tt.id===R?{...Tt,type:yt.target.value}:Tt);b(hr)},className:"p-2.5 border rounded-md bg-white",children:Object.keys(Wu).map(yt=>u.jsx("option",{value:yt,children:yt},yt))})]})]}),u.jsxs("div",{className:"border-t pt-4",children:[u.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-3",children:"Architectural Details"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:["Client / Owner ",u.jsx("span",{className:"text-[9px] text-gray-500",children:"(optional)"})]}),u.jsx("input",{type:"text",placeholder:"e.g. Acme Corp",value:((Pt=q.details)==null?void 0:Pt.client)||"",onChange:yt=>{const hr=W.map(Tt=>Tt.id===R?{...Tt,details:{...Tt.details,client:yt.target.value}}:Tt);b(hr)},className:"w-full p-2 border rounded"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:["Architect ",u.jsx("span",{className:"text-[9px] text-gray-500",children:"(optional)"})]}),u.jsx("input",{type:"text",placeholder:"e.g. Design Studio",value:((yr=q.details)==null?void 0:yr.architect)||"",onChange:yt=>{const hr=W.map(Tt=>Tt.id===R?{...Tt,details:{...Tt.details,architect:yt.target.value}}:Tt);b(hr)},className:"w-full p-2 border rounded"})]}),ye!=="Owner"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:["Hardware Standard ",u.jsx("span",{className:"text-xs text-red-500",children:"*"})]}),u.jsxs("select",{value:q.standard,onChange:yt=>{var Lr;const hr=yt.target.value;let Tt=(Lr=q.details)==null?void 0:Lr.jurisdiction;hr.includes("ANSI")?Tt="NFPA 101 (Life Safety Code)":hr.includes("EN")&&(Tt="IBC 2021 (International Building Code)");const Ur=W.map(qr=>qr.id===R?{...qr,standard:hr,details:{...qr.details,jurisdiction:Tt}}:qr);b(Ur)},className:"w-full p-2 border rounded bg-white",children:[u.jsx("option",{value:"ANSI",children:"ANSI / BHMA (US)"}),u.jsx("option",{value:"EN",children:"EN / ISO (EU)"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:["Code Jurisdiction ",u.jsx("span",{className:"text-xs text-red-500",children:"*"})]}),u.jsxs("select",{value:((qt=q.details)==null?void 0:qt.jurisdiction)||"IBC 2021",onChange:yt=>{const hr=W.map(Tt=>Tt.id===R?{...Tt,details:{...Tt.details,jurisdiction:yt.target.value}}:Tt);b(hr)},className:"w-full p-2 border rounded bg-white",children:[u.jsx("option",{children:"IBC 2021 (International Building Code)"}),u.jsx("option",{children:"NFPA 101 (Life Safety Code)"}),u.jsx("option",{children:"Local / Municipal Code"})]})]})]})]})]}),u.jsxs("div",{className:"border-t pt-6",children:[u.jsxs("div",{className:"flex flex-col gap-1 mb-4",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"Instant Door Scheduling (Optional)"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Would you like us to prep a starter schedule automatically?"})]}),u.jsxs("div",{className:"flex items-center gap-3 self-start",children:[u.jsx("span",{className:"text-[11px] font-semibold text-gray-500 uppercase tracking-wide whitespace-nowrap",children:$e?"Instant scheduling ON":"Instant scheduling OFF"}),u.jsx("button",{type:"button",role:"switch","aria-checked":$e,onClick:()=>pr(!$e),className:`relative inline-flex h-5 w-10 shrink-0 items-center rounded-full transition-colors ${$e?"bg-indigo-600":"bg-gray-300"}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition ${$e?"translate-x-[22px]":"translate-x-1"}`})})]})]}),u.jsx("p",{className:"text-xs text-gray-500",children:"Toggle ON if you'd like to answer a few quick questions and auto-populate a starting door schedule."})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:`col-span-full text-xs font-bold uppercase tracking-wide rounded px-3 py-2 border ${$e?"text-indigo-700 bg-indigo-50 border-indigo-100":"text-gray-500 bg-gray-50 border-gray-200"}`,children:["Facility: ",_e]}),$e?zt():u.jsx("div",{className:"col-span-full text-sm text-gray-500 border border-dashed border-gray-300 rounded-lg px-3 py-4 bg-gray-50",children:"Instant Door Scheduling is currently turned off. Flip the toggle above if you want Instaspec to generate a starter list based on your building inputs."})]})]}),u.jsx("div",{className:"flex justify-end mt-6",children:u.jsxs("button",{onClick:()=>Oe(1),className:"w-full md:w-auto px-6 py-2.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-medium flex items-center justify-center gap-2",children:["Save & Continue ",u.jsx(nh,{size:18})]})})]})]})})()}),j===1&&u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6 animate-slideUp",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Door Schedule"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 w-full sm:w-auto",children:[u.jsxs("button",{onClick:()=>ri(),className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-medium flex items-center justify-center gap-2 whitespace-nowrap",children:[u.jsx(Zy,{size:18}),u.jsx("span",{children:"Add Door"})]}),u.jsx("button",{onClick:()=>{const q=pe();if(!(q!=null&&q.doors.length)){Ot("Add a door first","Add at least one door to use bulk assignment.");return}const _e=q.doors[0].id;vr({isOpen:!0,templateId:_e,markPrefix:q.doors[0].mark,locationsText:""})},className:"flex-1 px-4 py-2 border border-indigo-200 text-indigo-700 rounded-md hover:bg-indigo-50 font-medium",children:"Bulk Assign"}),((oc=pe())==null?void 0:oc.instantSchedulingEnabled)&&u.jsxs("button",{onClick:en,className:"flex-1 px-4 py-2 border border-amber-200 text-amber-700 rounded-md hover:bg-amber-50 font-medium flex items-center justify-center gap-2 whitespace-nowrap",title:"Not sure where to begin? Generate a starter door list based on your building.",children:[u.jsx(xW,{size:18})," Instant Door Schedule"]})]})]}),pe().doors.length===0?u.jsxs("div",{className:"text-center py-20 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[u.jsx("p",{className:"text-gray-500",children:"No doors defined yet."}),u.jsx("button",{onClick:()=>ri(),className:"mt-4 text-indigo-600 font-bold hover:underline",children:"Click to add your first door"})]}):u.jsxs("div",{className:"overflow-x-auto border border-gray-200 rounded-lg hardware-scroll",children:[u.jsx(mie,{doors:pe().doors}),u.jsxs("table",{className:"w-full table-clean min-w-[1000px]",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{className:"text-left p-3 border-b",children:"Mark"}),u.jsx("th",{className:"text-left p-3 border-b",children:"Location (Zone - Lvl - Room)"}),u.jsx("th",{className:"text-left p-3 border-b",children:"Qty"}),u.jsx("th",{className:"text-left p-3 border-b",children:"WxH (mm)"}),u.jsx("th",{className:"text-left p-3 border-b",children:"Fire"}),u.jsx("th",{className:"text-left p-3 border-b",children:"Acoustic"}),u.jsx("th",{className:"text-left p-3 border-b",children:"Type"}),u.jsx("th",{className:"text-left p-3 border-b",children:"Actions"})]})}),u.jsx("tbody",{children:pe().doors.map(q=>{var _e,Ue;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"p-3 border-b font-bold text-indigo-600",children:q.mark}),u.jsxs("td",{className:"p-3 border-b align-top",children:[u.jsx("span",{className:"font-semibold text-gray-700",children:q.roomName}),u.jsxs("div",{className:"text-xs text-gray-400",children:[q.zone,"  Lvl ",q.level]}),u.jsxs("div",{className:"text-[11px] text-indigo-600 font-semibold mt-1 relative",children:[u.jsx("button",{onClick:()=>tt(Ve===q.id?null:q.id),className:"hover:underline",children:Ve===q.id?"Hide locations":(_e=q.additionalLocations)!=null&&_e.length?`+${q.additionalLocations.length} more locations`:"Add additional locations"}),Ve===q.id&&u.jsxs("div",{className:"mt-2 border border-indigo-200 bg-white rounded-lg shadow-xl p-3 text-xs text-gray-600 space-y-2",children:[(Ue=q.additionalLocations)!=null&&Ue.length?q.additionalLocations.map(($e,ut)=>u.jsxs("div",{className:"grid grid-cols-[1fr_80px_1fr_auto] gap-2 items-center",children:[u.jsx("input",{type:"text",value:$e.zone,onChange:rt=>Xt(q.id,ut,"zone",rt.target.value),className:"p-1 border rounded",placeholder:"Zone"}),u.jsx("input",{type:"text",value:$e.level,onChange:rt=>Xt(q.id,ut,"level",rt.target.value),className:"p-1 border rounded",placeholder:"Lvl"}),u.jsx("input",{type:"text",value:$e.roomName,onChange:rt=>Xt(q.id,ut,"roomName",rt.target.value),className:"p-1 border rounded",placeholder:"Room"}),u.jsx("button",{onClick:()=>Tn(q.id,ut),className:"text-red-500 hover:text-red-700 text-[11px]",children:"Remove"})]},ut)):u.jsx("p",{className:"text-[11px] text-gray-500",children:"No additional locations yet."}),u.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100",children:[u.jsx("button",{onClick:()=>Sr(q.id),className:"text-indigo-600 hover:underline text-[11px]",children:"+ Add Location"}),u.jsx("button",{onClick:()=>tt(null),className:"text-gray-500 hover:text-gray-700 text-[11px]",children:"Close"})]})]})]})]}),u.jsx("td",{className:"p-3 border-b",children:q.qty}),u.jsxs("td",{className:"p-3 border-b",children:[q.width," x ",q.height]}),u.jsx("td",{className:"p-3 border-b",children:u.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${q.fire>0?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600"}`,children:[q.fire," min"]})}),u.jsx("td",{className:"p-3 border-b text-sm text-gray-500",children:q.stc?u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsxs("span",{children:[q.stc," dB"]}),parseInt(q.stc,10)>=Ij&&u.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 text-[10px] font-semibold",children:"STC Package"})]}):"-"}),u.jsx("td",{className:"p-3 border-b text-sm",children:u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsxs("span",{children:[q.material," / ",q.config]}),q.ada&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-teal-50 text-teal-700 text-[10px] font-semibold w-fit",children:[u.jsx(NA,{size:12})," ADA"]})]})}),u.jsx("td",{className:"p-3 border-b",children:u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>Ir(q.id),className:"p-2 hover:bg-gray-100 rounded text-gray-500",title:"Bulk Duplicate",children:u.jsx(TR,{size:16})}),u.jsx("button",{onClick:()=>ri(q),className:"p-2 hover:bg-gray-100 rounded text-gray-500",title:"Edit",children:u.jsx(nW,{size:16})}),u.jsx("button",{onClick:()=>ir(q.id),className:"p-2 hover:bg-red-50 rounded text-red-500",title:"Delete",children:u.jsx(Dd,{size:16})})]})})]},q.id)})})]})]}),u.jsxs("div",{className:"flex justify-between mt-6",children:[u.jsxs("button",{type:"button",onClick:()=>Oe(0),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50",children:[u.jsx(TA,{size:16}),"Back"]}),u.jsxs("button",{onClick:Ys,className:"w-full md:w-auto px-6 py-2.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-medium flex items-center justify-center gap-2",children:["Generate Hardware Sets ",u.jsx(nh,{size:18})]})]})]}),j===2&&u.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-auto lg:h-[700px] animate-slideUp",children:[u.jsxs("div",{className:"w-full lg:w-72 bg-white border border-gray-200 rounded-xl overflow-hidden flex flex-col shrink-0 h-48 lg:h-auto",children:[u.jsx("div",{className:"bg-gray-50 p-4 border-b border-gray-200 font-bold text-gray-500 uppercase text-xs tracking-wider",children:"Hardware Sets"}),be.length>0&&ye!=="Owner"&&u.jsxs("div",{className:"p-2 bg-indigo-50 border-b border-indigo-100",children:[u.jsx("div",{className:"text-xs font-bold text-indigo-700 mb-1 px-2",children:"Library Templates"}),be.map(q=>u.jsxs("button",{onClick:()=>ps(q),className:"w-full text-left text-xs px-2 py-1 text-gray-600 hover:text-indigo-600 hover:bg-indigo-100 rounded",children:["+ ",q.name]},q.id))]}),u.jsx("div",{className:"overflow-y-auto flex-1",children:pe().sets.map(q=>u.jsxs("div",{className:"p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer group",children:[u.jsx("div",{className:"font-bold text-gray-900",children:q.id}),u.jsx("div",{className:"text-sm text-gray-500 truncate",children:q.name})]},q.id))})]}),u.jsxs("div",{className:"flex-1 bg-white border border-gray-200 rounded-xl flex flex-col overflow-hidden min-h-[500px]",children:[u.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:pe().sets.map(q=>{const _e=pe().doors.find(yt=>q.doors.includes(yt.id)),Ue=pe().doors.filter(yt=>q.doors.includes(yt.id)),$e=Ue.length>0&&Ue.every(yt=>yt.material==="Glass");Array.from(new Set(Ue.map(yt=>yt.material)));const ut=GT(Ue),rt=_e||Lie(q,ut),zt=q.items.filter(yt=>yt.category==="Handles").some(yt=>(yt.type||"").toLowerCase().includes("lever")),Pt=$e&&zt,yr=$e&&ut.requiresPanic,qt=jie(q,ut);return u.jsxs("div",{className:"mb-12",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-2",children:[u.jsxs("h2",{className:"text-xl font-bold",children:[q.id,": ",q.name]}),u.jsxs("div",{className:"flex gap-2",children:[ye!=="Owner"&&u.jsxs("button",{onClick:()=>Ba(q),className:"text-xs flex items-center gap-1 text-indigo-600 bg-indigo-50 px-2 py-1 rounded hover:bg-indigo-100",title:"Save to Library",children:[u.jsx(eW,{size:12})," Save Template"]}),u.jsxs("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm font-bold",children:[pe().doors.filter(yt=>q.doors.includes(yt.id)).length," Doors"]})]})]}),u.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[u.jsx("div",{className:"shrink-0",children:u.jsx(Jie,{door:rt,hardwareSet:q})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-4 overflow-x-auto hardware-scroll",children:u.jsxs("div",{className:"min-w-[900px]",children:[u.jsxs("div",{className:"grid grid-cols-[40px_80px_80px_160px_160px_120px_1.2fr_140px_80px_50px] bg-gray-50 border-b border-gray-200 px-4 py-3 text-xs font-bold text-gray-500 uppercase gap-3",children:[u.jsx("div",{}),u.jsx("div",{children:"Ref"}),u.jsx("div",{children:"CSI"}),u.jsx("div",{children:"Product Type"}),u.jsx("div",{children:"Style"}),u.jsx("div",{children:"Finish"}),u.jsx("div",{children:"Specification"}),u.jsx("div",{children:"Acoustic"}),u.jsx("div",{children:"Qty"}),u.jsx("div",{})]}),Object.keys(bo).map(yt=>{const hr=q.items.filter(Tt=>bo[yt].includes(Tt.category));return hr.length===0?null:u.jsxs(No.Fragment,{children:[u.jsx("div",{className:"bg-gray-100 p-1 pl-2 font-bold text-xs text-gray-500 uppercase border-b border-gray-200 col-span-full",style:{gridColumn:"1 / -1"},children:wie(hr[0].category)}),hr.map((Tt,Ur)=>{var Se,Be;const Lr=q.items.indexOf(Tt),qr=Tt.category||"Hinges",Rn=Ux[qr],Fs=M5[pe().standard];let Mr=(Rn==null?void 0:Rn.types)||[];const ca=Tt.autoTag==="card-reader-kit",ii=`${q.id}-${Lr}`;let si=!!H[ii]?"Lock type reset: previous lock not compatible with selected material.":null;qr==="Hinges"&&($e?Mr=Mr.filter(Ce=>Ce.name==="Patch Fitting"):Mr=Mr.filter(Ce=>Ce.name!=="Patch Fitting"));let dr=Tt.type;if(qr==="Hinges"&&ye!=="Owner"){if($e&&dr!=="Patch Fitting"){const Ce="Patch Fitting";Mr.some(Ye=>Ye.name===Ce)&&(setTimeout(()=>ni(q.id,Lr,"type",Ce),0),dr=Ce)}else if(!$e&&dr==="Patch Fitting"){const Ce=(Se=Mr[0])==null?void 0:Se.name;Ce&&Ce!==dr&&(setTimeout(()=>ni(q.id,Lr,"type",Ce),0),dr=Ce)}}if(qr==="Locks"){let Ce=bie(ut.materials);if(ut.requiresPanic?Ce=$e?["Patch Lock"]:["Panic Bar"]:ut.isEscapeRoute&&(Ce=Ce.filter(Ye=>!Ye.toLowerCase().includes("deadbolt"))),Ce.length||(Ce=Mr.map(Ye=>Ye.name)),Mr=Mr.filter(Ye=>Ce.includes(Ye.name)),!Mr.some(Ye=>Ye.name===dr)&&Mr.length>0){const Ye=Mr[0].name;setTimeout(()=>{ni(q.id,Lr,"type",Ye),Vr(ii),cn({title:"Lock type reset",message:"The previously selected lock wasn't compatible with this door material, so the type was updated."})},0),dr=Ye,si="Lock type reset: previous lock not compatible with selected material/use."}if(Pt){const Ye="Patch Lock",Ut="Center Patch Lock";dr!==Ye&&Mr.some(Wt=>Wt.name===Ye)&&(setTimeout(()=>ni(q.id,Lr,"type",Ye),0),dr=Ye),(Tt.style||"")!==Ut&&setTimeout(()=>ni(q.id,Lr,"style",Ut),0),si||(si="Glass lever handles require a center patch lock with lever prep.")}}if(qr==="Electrified"){let Ce=Sie(ut.materials);const Ye=new Set([...Ce,...Pj]);if(Mr=Mr.filter(kt=>Ye.has(kt.name)),!Mr.some(kt=>kt.name===dr)&&Mr.length>0){const kt=Mr[0].name;setTimeout(()=>{ni(q.id,Lr,"type",kt),Vr(ii)},0),dr=kt,si="Electrified option reset for compliance."}const Ut=new Set(q.items.filter(kt=>kt.category==="Electrified"&&kt!==Tt).map(kt=>kt.type)),Wt=new Set(["Magnetic Lock","Electric Strike"]);if(Mr=Mr.filter(kt=>!(Wt.has(kt.name)&&Ut.has(kt.name)&&kt.name!==dr)),ca){const kt=["Card Reader","Push Button"];Mr=Mr.filter(Qt=>kt.includes(Qt.name))}}if(qr==="Handles"&&yr){const Ce="Panic Push Pull Handle";dr!==Ce&&Mr.some(Ye=>Ye.name===Ce)&&(setTimeout(()=>ni(q.id,Lr,"type",Ce),0),dr=Ce),si||(si="Glass escape routes require L-shaped panic push/pull hardware.")}const ai=Rn==null?void 0:Rn.types.find(Ce=>Ce.name===dr),E=pe().standard||"ANSI";let V=(ai||{styles:[]}).styles||[],ue=V;if(qr==="Locks"&&dr==="Mortise Lock"&&ai)if(E==="ANSI"&&ai.ansiStyles){V=ai.ansiStyles,ue=ai.ansiStyles;const Ce=((Be=q.name)==null?void 0:Be.toLowerCase())||"";let Ye=null;Ce.includes("classroom")||Ce.includes("lecture")?Ye="Classroom":Ce.includes("storeroom")||Ce.includes("storage")||Ce.includes("warehouse")?Ye="Storeroom":Ce.includes("office")?Ye="Office":Ce.includes("entrance")||Ce.includes("lobby")||Ce.includes("main")?Ye="Entrance":Ce.includes("restroom")||Ce.includes("bathroom")||Ce.includes("toilet")?Ye="Privacy":Ce.includes("corridor")||Ce.includes("passage")||Ce.includes("hallway")?Ye="Passage":Ce.includes("apartment")||Ce.includes("unit")?Ye="Apartment":Ce.includes("dormitory")||Ce.includes("dorm")||Ce.includes("hostel")?Ye="Dormitory":(Ce.includes("hospital")||Ce.includes("clinic")||Ce.includes("medical"))&&(Ye="Institutional"),Ye&&Tt.style!==Ye&&setTimeout(()=>ni(q.id,Lr,"style",Ye),0)}else E==="EN"&&ai.enStyles&&(V=ai.enStyles,ue=ai.enStyles);if(qr==="Electrified"&&ut.requiresFailSafe){const Ce=V.filter(Ye=>Ye.toLowerCase().includes("fail-safe")||Ye.toLowerCase().includes("rex"));Ce.length>0&&(ue=Ce)}if(qr==="Cylinders"&&dr==="Cylinder")if(E==="ANSI"){ue=V.filter(Ye=>Ye==="Rim Cylinder"||Ye==="Mortise Cylinder");const Ce=q.items.find(Ye=>Ye.category==="Locks");Ce&&Ce.type==="Mortise Lock"&&Tt.style!=="Mortise Cylinder"&&setTimeout(()=>ni(q.id,Lr,"style","Mortise Cylinder"),0)}else E==="EN"&&(ue=V.filter(Ce=>Ce==="Euro Profile"||Ce==="Oval Profile"));return u.jsxs("div",{className:"grid grid-cols-[40px_80px_80px_160px_160px_120px_1.2fr_140px_80px_50px] border-b border-gray-100 px-4 py-2 items-center gap-3 hover:bg-gray-50 relative",children:[u.jsx("div",{className:"flex justify-center text-gray-400",children:u.jsx(JT,{category:qr})}),ye==="Owner"?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-sm font-medium text-gray-900",children:Tt.ref}),u.jsx("div",{className:"text-xs text-gray-400",children:(Rn==null?void 0:Rn.csi)||""}),u.jsx("div",{className:"text-sm text-gray-600",children:dr}),u.jsx("div",{className:"text-sm text-gray-600",children:Tt.style}),u.jsx("div",{className:"text-sm text-gray-600",children:Tt.finish}),u.jsx("div",{className:"text-sm text-gray-500",children:Tt.spec}),u.jsx("div",{className:"text-xs text-gray-600",children:Tt.acousticContribution||""}),u.jsx("div",{className:"text-sm text-gray-900",children:Tt.qty}),u.jsx("div",{})]}):u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"text",value:Tt.ref,onChange:Ce=>ni(q.id,Lr,"ref",Ce.target.value),className:"w-full p-1 border rounded text-xs"}),u.jsx("div",{className:"text-xs text-gray-400",children:(Rn==null?void 0:Rn.csi)||""}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("select",{value:dr,onChange:Ce=>ni(q.id,Lr,"type",Ce.target.value),className:"w-full p-1 border rounded text-xs bg-white",children:Mr.map(Ce=>u.jsx("option",{value:Ce.name,children:Ce.name},Ce.name))}),(qr==="Locks"||qr==="Electrified")&&si&&u.jsx("span",{className:"text-[10px] text-orange-600",children:si})]}),u.jsx("select",{value:Tt.style,onChange:Ce=>ni(q.id,Lr,"style",Ce.target.value),className:"w-full p-1 border rounded text-xs bg-white",children:ue.map(Ce=>u.jsx("option",{value:Ce,children:Ce},Ce))}),u.jsx("select",{value:Tt.finish,onChange:Ce=>ni(q.id,Lr,"finish",Ce.target.value),className:"w-full p-1 border rounded text-xs bg-white",children:(_4(qr,pe().standard)||Fs).map(Ce=>u.jsx("option",{value:Ce,children:Ce},Ce))}),u.jsx("input",{type:"text",value:Tt.spec,onChange:Ce=>ni(q.id,Lr,"spec",Ce.target.value),className:"w-full p-1 border rounded text-xs"}),u.jsx("div",{className:"flex justify-start",children:Tt.acousticContribution?u.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-[10px] font-semibold",children:Tt.acousticContribution}):u.jsx("span",{className:"text-gray-300 text-[10px]",children:"-"})}),u.jsx("input",{type:"text",value:Tt.qty,onChange:Ce=>ni(q.id,Lr,"qty",Ce.target.value),className:"w-full p-1 border rounded text-xs"}),u.jsx("button",{onClick:()=>sc(q.id,Lr),className:"text-red-400 hover:text-red-600 flex justify-center p-2",children:u.jsx(Dd,{size:14})})]})]},Ur)})]},yt)}),q.items.filter(yt=>!Object.keys(bo).some(hr=>bo[hr].includes(yt.category))).map((yt,hr)=>u.jsxs("div",{className:"grid grid-cols-[30px_60px_60px_140px_140px_100px_1fr_120px_60px_40px] border-b border-gray-100 p-2 items-center hover:bg-gray-50 relative",children:[u.jsx("div",{className:"flex justify-center text-gray-400",children:u.jsx(JT,{category:yt.category})}),u.jsx("input",{type:"text",value:yt.ref,className:"w-full p-1 border rounded text-xs",disabled:!0}),u.jsx("div",{className:"text-xs text-gray-400"}),u.jsx("div",{className:"text-sm text-gray-600",children:yt.type}),u.jsx("div",{className:"text-sm text-gray-600",children:yt.style}),u.jsx("div",{className:"text-sm text-gray-600",children:yt.finish}),u.jsx("div",{className:"text-sm text-gray-500",children:yt.spec}),u.jsx("div",{className:"text-xs text-gray-600",children:yt.acousticContribution||""}),u.jsx("div",{className:"text-sm text-gray-900",children:yt.qty})]},"other-"+hr))]})}),ye!=="Owner"&&u.jsxs("button",{onClick:()=>Ua(q.id),className:"text-sm font-medium text-indigo-600 hover:underline flex items-center gap-1 mb-4 px-2 py-1",children:[u.jsx(Zy,{size:14})," Add Item"]}),qt.length>0&&u.jsx("div",{className:"mt-2 text-sm text-orange-700 bg-orange-50 border border-orange-200 rounded p-2",children:qt.map((yt,hr)=>u.jsxs("div",{children:[" ",yt]},hr))}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Operational Description"}),u.jsx("textarea",{value:q.operation,readOnly:ye==="Owner",onChange:yt=>{const hr=W.map(Tt=>Tt.id===R?{...Tt,sets:Tt.sets.map(Ur=>Ur.id===q.id?{...Ur,operation:yt.target.value}:Ur)}:Tt);b(hr)},rows:2,className:"w-full p-2 border border-gray-300 rounded text-sm bg-gray-50"})]})]})]})]},q.id)})}),u.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-between",children:[u.jsxs("button",{onClick:()=>Oe(1),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded hover:bg-gray-100 flex items-center gap-2",children:[u.jsx(TA,{size:16})," Back"]}),u.jsxs("button",{onClick:st,className:"px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-2 font-medium",children:["Finish & Review ",u.jsx(nh,{size:16})]})]})]})]}),j===3&&u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 md:p-8 animate-slideUp",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[u.jsx("h2",{className:"text-2xl font-bold",children:"Specification Review"}),u.jsxs("div",{className:"w-full md:w-auto flex flex-col gap-3",children:[u.jsxs("div",{className:"hidden md:flex gap-3",children:[ye!=="Owner"&&u.jsxs("button",{onClick:()=>co(Oo),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 font-bold flex items-center justify-center gap-2 shadow-sm text-sm",children:[u.jsx(gx,{size:18})," Export BIM Data"]}),u.jsxs("button",{onClick:Dn,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-bold flex items-center justify-center gap-2 shadow-sm text-sm",children:[u.jsx(g5,{size:18})," Print Spec Sheet"]}),u.jsxs("button",{onClick:()=>co(Gs),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-bold flex items-center justify-center gap-2 shadow-sm",children:[u.jsx(uf,{size:18})," Export Schedule"]}),t&&u.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 border border-red-200 text-red-600 rounded-lg hover:bg-red-50 font-semibold flex items-center justify-center gap-2 shadow-sm text-sm",children:[u.jsx(eo,{size:18})," Report an Error"]})]}),u.jsxs("div",{className:"md:hidden",children:[u.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[u.jsxs("button",{type:"button",onClick:()=>ne(q=>!q),className:"w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-gray-700 bg-white",children:[u.jsx("span",{children:"Download Files"}),u.jsx(z0,{size:18,className:`transition-transform ${Ie?"rotate-180":""}`})]}),Ie&&u.jsxs("div",{className:"border-t border-gray-200 bg-gray-50 px-4 py-3 space-y-2",children:[ye!=="Owner"&&u.jsxs("button",{onClick:()=>{co(Oo),ne(!1)},className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg text-sm font-semibold flex items-center justify-center gap-2",children:[u.jsx(gx,{size:16})," Export BIM Data"]}),u.jsxs("button",{onClick:()=>{Dn(),ne(!1)},className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-semibold flex items-center justify-center gap-2",children:[u.jsx(g5,{size:16})," Print Spec Sheet"]}),u.jsxs("button",{onClick:()=>{co(Gs),ne(!1)},className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-semibold flex items-center justify-center gap-2",children:[u.jsx(uf,{size:16})," Export Schedule"]})]})]}),t&&u.jsxs("button",{onClick:()=>c(!0),className:"w-full mt-3 px-4 py-2 border border-red-200 text-red-600 rounded-lg hover:bg-red-50 font-semibold flex items-center justify-center gap-2 shadow-sm text-sm",children:[u.jsx(eo,{size:18})," Report an Error"]})]}),!h&&t&&u.jsxs("div",{className:"text-xs text-gray-500",children:["Downloads used: ",ke??0," / ",Pe]}),Ae&&u.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2",children:Ae})]})]}),uo().length>0?u.jsxs("div",{className:"mb-8 p-4 bg-red-50 border border-red-200 rounded-xl",children:[u.jsxs("h3",{className:"font-bold text-red-700 flex items-center gap-2 mb-2",children:[u.jsx(bd,{size:20})," Code Compliance Warnings"]}),u.jsx("div",{className:"space-y-2",children:uo().map((q,_e)=>u.jsxs("div",{className:"flex gap-2 text-sm text-red-800 items-start",children:[u.jsxs("span",{className:"font-bold shrink-0",children:["[",q.set,"]"]}),u.jsx("span",{children:q.msg})]},_e))})]}):u.jsxs("div",{className:"mb-8 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center gap-3 text-green-800",children:[u.jsx(Vu,{size:24}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold",children:"Code Compliance Verified"}),u.jsx("div",{className:"text-sm",children:"All fire and egress logic checks passed."})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[u.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Total Doors"}),u.jsx("div",{className:"text-3xl font-bold text-gray-900",children:pe().doors.length})]}),u.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Hardware Sets"}),u.jsx("div",{className:"text-3xl font-bold text-indigo-600",children:pe().sets.length})]}),u.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Jurisdiction"}),u.jsx("div",{className:"text-lg font-bold text-gray-800",children:((xr=pe().details)==null?void 0:xr.jurisdiction)||"Standard"})]})]}),u.jsx(iv,{projectId:R,projectDoors:pe().doors||[],children:u.jsx(ese,{facilityType:pe().type,onNavigate:()=>z(5)})})]})]}),j===5&&R&&u.jsx(iv,{projectId:R,projectDoors:pe().doors||[],children:u.jsx(oie,{projectDoors:pe().doors||[],projectName:pe().name||"Untitled Project",projectStandard:pe().mkStandard||"ANSI_BHMA",showNotice:Ot,showConfirm:Vt,onBackToSetup:()=>z(3)})})]}),S==="wizard"&&u.jsx("footer",{className:"bg-slate-900/95 text-white px-4 md:px-8 py-8 shadow-inner",children:u.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col gap-4",children:[u.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[u.jsx("div",{className:"hidden md:flex gap-3 justify-center items-stretch",children:Oc.map(q=>u.jsxs("div",{className:"flex-1 min-w-[160px] bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-center",children:[u.jsx("div",{className:"text-lg font-extrabold tracking-tight",children:Number(q.value).toLocaleString()}),u.jsx("div",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:q.metric})]},`wizard-stat-desktop-${q.id}`))}),u.jsxs("div",{className:"md:hidden",children:[u.jsx("div",{className:"grid grid-cols-2 gap-3",children:Oc.slice(0,6).map(q=>u.jsxs("div",{className:"flex flex-col items-center justify-center bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-center min-h-[90px]",children:[u.jsx("div",{className:"text-xl font-extrabold tracking-tight",children:Number(q.value).toLocaleString()}),u.jsx("div",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:q.metric})]},`wizard-stat-mobile-${q.id}`))}),Oc[6]&&u.jsxs("div",{className:"mt-3 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-center",children:[u.jsx("div",{className:"text-xl font-extrabold tracking-tight",children:Number(Oc[6].value).toLocaleString()}),u.jsx("div",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:Oc[6].metric})]})]})]}),u.jsxs("div",{className:"text-center text-xs text-white/60",children:["Engineered with care by"," ",u.jsx("a",{href:"https://techarix.com",target:"_blank",rel:"noreferrer",className:"text-white font-semibold underline underline-offset-2 decoration-white/40 hover:text-sky-300",children:"Techarix"})]})]})}),S==="dashboard"&&u.jsx("footer",{className:"bg-slate-900 text-white border-t border-gray-200 px-4 md:px-8 py-10",children:u.jsxs("div",{className:"max-w-7xl mx-auto w-full space-y-6",children:[u.jsx("h3",{className:"font-bold text-white/70 uppercase text-sm mb-4 tracking-[0.3em]",children:"Coming Soon Features"}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[u.jsxs("div",{className:"flex-1 p-6 border border-white/10 rounded-2xl flex flex-col items-center justify-center text-white/80 bg-white/5 shadow-inner",children:[u.jsx(fW,{size:24,className:"mb-2 text-sky-300"}),u.jsx("span",{className:"font-bold",children:"Upload Floor Plan"}),u.jsx("span",{className:"text-xs text-white/60",children:"AI Extraction"})]}),u.jsxs("div",{className:"flex-1 p-6 border border-white/10 rounded-2xl flex flex-col items-center justify-center text-white/80 bg-white/5 shadow-inner",children:[u.jsx(mW,{size:24,className:"mb-2 text-indigo-300"}),u.jsx("span",{className:"font-bold",children:"Instant Schedule"}),u.jsx("span",{className:"text-xs text-white/60",children:"One-click Generation"})]})]}),u.jsxs("div",{className:"text-center text-xs text-white/60",children:["Engineered with care by"," ",u.jsx("a",{href:"https://techarix.com",target:"_blank",rel:"noreferrer",className:"text-white font-semibold underline underline-offset-2 decoration-white/40 hover:text-sky-300",children:"Techarix"})]})]})}),ve&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 sm:p-6",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-100 flex justify-between items-center shrink-0",children:[u.jsx("h3",{className:"text-xl font-bold",children:"Edit Door"}),u.jsx("button",{onClick:()=>ge(!1),className:"text-gray-400 hover:text-gray-600 p-2",children:u.jsx(kl,{size:24})})]}),u.jsxs("div",{className:"p-4 md:p-6 space-y-6 overflow-y-auto flex-1",children:[u.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-3",children:"Architectural Location"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Zone / Building"}),u.jsx("input",{type:"text",value:qe.zone,onChange:q=>Ft({...qe,zone:q.target.value}),className:"p-2 border rounded",placeholder:"e.g. Tower A"})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Level / Floor"}),u.jsx("input",{type:"text",value:qe.level,onChange:q=>Ft({...qe,level:q.target.value}),className:"p-2 border rounded",placeholder:"e.g. 01"})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Room Name"}),u.jsx(Kie,{options:((ho=Wu[pe().type])==null?void 0:ho.usages)||[],value:qe.roomName,onChange:q=>Ft({...qe,roomName:q,use:q||qe.use}),placeholder:"Select or type..."})]})]})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500 mb-1 block",children:"Additional Locations"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Manage locations directly from the door schedule by expanding the +N more locations dropdown."})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Door Mark / ID"}),u.jsx("input",{type:"text",value:qe.mark,onChange:q=>Ft({...qe,mark:q.target.value}),className:"p-2.5 border rounded"})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Qty"}),u.jsx("input",{type:"number",value:1+(((ml=qe.additionalLocations)==null?void 0:ml.length)||0),readOnly:!0,className:"p-2.5 border rounded bg-gray-100 text-gray-500"}),u.jsx("span",{className:"text-[10px] text-gray-500",children:"Calculated from location list"})]})]}),u.jsxs("div",{className:"border-t pt-4",children:[u.jsx("div",{className:"text-xs font-bold uppercase text-gray-400 mb-4",children:"Dimensions & Performance"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Width (mm)"}),u.jsx("input",{type:"number",value:qe.width,onChange:q=>{Ft({...qe,width:q.target.value}),Oa("width",q.target.value)},className:`w-full p-2.5 border rounded ${wr.width?"border-red-300 bg-red-50":""}`}),wr.width&&u.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[u.jsx(eo,{size:12})," ",wr.width]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Height (mm)"}),u.jsx("input",{type:"number",value:qe.height,onChange:q=>{Ft({...qe,height:q.target.value}),Oa("height",q.target.value)},className:`w-full p-2.5 border rounded ${wr.height?"border-red-300 bg-red-50":""}`}),wr.height&&u.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[u.jsx(eo,{size:12})," ",wr.height]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Thickness (mm)"}),u.jsx("input",{type:"number",value:qe.thickness,onChange:q=>Ft({...qe,thickness:parseInt(q.target.value)||0,thicknessAuto:!1}),className:"w-full p-2.5 border rounded"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Weight (kg) - Auto"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"number",value:qe.weight,onChange:q=>{Ft({...qe,weight:parseInt(q.target.value)||0,weightAuto:!1})},className:"w-full p-2.5 border rounded"}),u.jsx(lW,{size:14,className:"absolute right-3 top-3.5 text-gray-400"})]}),u.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:"Estimated weight; verify with manufacturer"})]})]}),Y&&u.jsxs("div",{className:"mt-2 text-sm text-amber-800 bg-amber-50 border border-amber-200 rounded p-3 flex items-start gap-2",children:[u.jsx(bd,{size:16,className:"mt-0.5"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold",children:"ADA Clearance Warning"}),u.jsx("div",{children:ee}),u.jsxs("div",{className:"text-[11px] text-amber-700 mt-1",children:["Clear opening assumes ",XT,"mm deduction for hinges/handles."]})]})]}),Rr&&u.jsxs("div",{className:"mt-2 text-orange-600 text-sm bg-orange-50 p-2 rounded border border-orange-100 flex items-center gap-2",children:[u.jsx(bd,{size:14})," ",Rr]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 border-t pt-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Acoustic Rating (STC/dB)"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(PR,{size:16,className:"text-gray-400"}),u.jsx("input",{type:"number",value:qe.stc,onChange:q=>Ft({...qe,stc:q.target.value}),className:"w-full p-2.5 border rounded",placeholder:"35"})]}),u.jsxs("div",{className:"text-[10px] text-indigo-600 mt-1",children:["Recommended for ",qe.roomName||"Selected Room",": ",$T[qe.roomName]||30," dB"]})]}),u.jsx("div",{className:"flex items-center pt-6",children:u.jsxs("div",{onClick:()=>Ft({...qe,ada:!qe.ada}),className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("div",{className:`w-5 h-5 border rounded flex items-center justify-center ${qe.ada?"bg-blue-600 border-blue-600 text-white":""}`,children:qe.ada&&u.jsx(Vu,{size:14})}),u.jsxs("span",{className:"text-sm font-bold text-blue-700 flex items-center gap-1",children:[u.jsx(NA,{size:16})," ADA Compliant"]})]})})]}),u.jsxs("div",{className:"mt-4 border-t pt-4",children:[u.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500 mb-2 block",children:["Door Handing (",pe().standard," / Standard)"]}),u.jsx(Qie,{value:qe.handing,standard:pe().standard,onChange:q=>Ft({...qe,handing:q})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500 mb-2 block",children:"Material"}),u.jsxs("select",{value:qe.material,onChange:q=>Ft({...qe,material:q.target.value}),className:"w-full p-2.5 border rounded bg-white",children:[u.jsx("option",{value:"Timber",children:"Timber / Wood"}),u.jsx("option",{value:"Metal",children:"Hollow Metal"}),u.jsx("option",{value:"Glass",children:"Glass"}),u.jsx("option",{value:"Aluminum",children:"Aluminum"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500 mb-2 block",children:"Configuration"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{onClick:()=>Ft({...qe,config:"Single"}),className:`flex-1 border rounded p-2 flex flex-col items-center gap-1 cursor-pointer ${qe.config==="Single"?"border-indigo-600 bg-indigo-50 text-indigo-600 ring-1 ring-indigo-600":"hover:bg-gray-50"}`,children:[u.jsx(Ju,{size:20})," ",u.jsx("span",{className:"text-sm",children:"Single"})]}),u.jsxs("div",{onClick:()=>Ft({...qe,config:"Double"}),className:`flex-1 border rounded p-2 flex flex-col items-center gap-1 cursor-pointer ${qe.config==="Double"?"border-indigo-600 bg-indigo-50 text-indigo-600 ring-1 ring-indigo-600":"hover:bg-gray-50"}`,children:[u.jsx(gh,{size:20})," ",u.jsx("span",{className:"text-sm",children:"Double"})]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("div",{onClick:()=>qe.material!=="Glass"&&Ft({...qe,visionPanel:!qe.visionPanel}),className:`w-5 h-5 border rounded cursor-pointer flex items-center justify-center ${qe.visionPanel?"bg-indigo-600 border-indigo-600 text-white":"bg-white"} ${qe.material==="Glass"?"opacity-50 cursor-not-allowed bg-gray-100":""}`,children:qe.visionPanel&&u.jsx(Vu,{size:14})}),u.jsx("label",{className:`text-sm font-medium cursor-pointer ${qe.material==="Glass"?"text-gray-400":"text-gray-700"}`,onClick:()=>qe.material!=="Glass"&&Ft({...qe,visionPanel:!qe.visionPanel}),children:qe.material==="Glass"?"Vision Panel N/A for Glass Doors":"Include Vision Panel / Glazing"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Fire Rating"}),u.jsx("select",{value:qe.fire,onChange:q=>Ft({...qe,fire:parseInt(q.target.value)}),className:"w-full p-2.5 border rounded bg-white",children:pe().standard==="ANSI"?u.jsxs(u.Fragment,{children:[u.jsx("option",{value:"0",children:"Non-Rated"}),u.jsx("option",{value:"20",children:"20 min"}),u.jsx("option",{value:"45",children:"45 min"}),u.jsx("option",{value:"60",children:"60 min"}),u.jsx("option",{value:"90",children:"90 min"}),u.jsx("option",{value:"180",children:"3 Hour"})]}):u.jsxs(u.Fragment,{children:[u.jsx("option",{value:"0",children:"None"}),u.jsx("option",{value:"30",children:"30 min"}),u.jsx("option",{value:"60",children:"60 min"}),u.jsx("option",{value:"90",children:"90 min"}),u.jsx("option",{value:"120",children:"120 min"})]})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Usage Type"}),u.jsx("select",{value:qe.use,onChange:q=>Ft({...qe,use:q.target.value}),className:"w-full p-2.5 border rounded bg-white",children:(za=Wu[pe().type])==null?void 0:za.usages.map(q=>u.jsx("option",{value:q,children:q},q))})]})]}),kj(qe.use)&&Number(qe.fire)===0&&u.jsxs("div",{className:"mt-3 rounded border border-blue-200 bg-blue-50 px-3 py-2 text-xs text-blue-800 flex items-center gap-2",children:[u.jsx(gh,{size:14}),Tj]}),qe.config==="Double"&&u.jsx("div",{className:"text-[11px] text-gray-500",children:qe.fire>0?"Fire-rated pairs default to rebated meeting stiles per EN 1634 / ANSI UL10C.":"Non-rated pairs use a flush meeting stile between leaves."}),Zt&&u.jsxs("div",{className:`mt-4 p-3 rounded-lg border flex gap-3 items-start ${Zt.type==="warning"?"bg-orange-50 border-orange-200 text-orange-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:[Zt.type==="warning"?u.jsx(Qq,{size:18,className:"shrink-0 mt-0.5"}):u.jsx(gW,{size:18,className:"shrink-0 mt-0.5"}),u.jsxs("div",{className:"text-sm leading-relaxed",children:[u.jsx("strong",{children:"Code Check:"})," ",Zt.msg]})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white mt-4",children:[u.jsxs("div",{className:"flex items-start justify-between gap-2 flex-wrap",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Hardware Control Strategy"}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Based on ",u.jsx("span",{className:"font-semibold",children:qe.use||qe.roomName||"this use"})," we recommend a"," ",u.jsx("span",{className:"font-semibold text-indigo-600",children:O})," package."]})]}),u.jsx("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 rounded-full px-2 py-0.5",children:"ANSI / EN Guidance"})]}),u.jsx("div",{className:"grid sm:grid-cols-2 gap-3 mt-3",children:Tie.map(q=>{const _e=qe.hardwareIntent===q.id,Ue=O===q.id;return u.jsxs("button",{type:"button",onClick:()=>Ft({...qe,hardwareIntent:q.id}),className:`text-left border rounded-lg p-3 transition-all ${_e?"border-indigo-600 bg-indigo-50 shadow-sm":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,children:[u.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold mb-1",children:[u.jsx("span",{className:_e?"text-indigo-700":"text-gray-800",children:q.label}),Ue&&u.jsx("span",{className:"text-[10px] text-green-600 bg-green-50 px-2 py-0.5 rounded-full font-bold",children:"Recommended"})]}),u.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:q.desc})]},q.id)})}),u.jsx("p",{className:"text-[11px] text-gray-500 mt-3",children:"Electromechanical openings pair ANSI/BHMA A156-grade locks with electric strikes or maglocks, REX sensors, and fail-safe release per EN 1125 / NFPA 101."}),qe.hardwareIntent!==O&&u.jsxs("div",{className:"mt-2 text-[11px] text-orange-600",children:["You selected a ",qe.hardwareIntent," package even though the usage leans ",O,". Confirm this is intentional for the project scope."]})]}),u.jsxs("div",{className:"mt-4",children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Spec Notes / Remarks"}),u.jsx("textarea",{value:qe.notes,onChange:q=>Ft({...qe,notes:q.target.value}),className:"w-full p-2 border rounded h-20 text-sm",placeholder:"Enter specific installation notes or requirements..."})]})]}),u.jsx("div",{className:"p-4 md:p-6 border-t border-gray-100 flex justify-end shrink-0 bg-gray-50 rounded-b-xl",children:u.jsx("button",{onClick:In,className:"w-full md:w-auto px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 font-bold",children:"Save Door"})})]})}),$t.isOpen&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 sm:p-6",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-5xl flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50 rounded-t-xl shrink-0",children:[u.jsx("h3",{className:"text-lg font-bold",children:"Add Hardware Item"}),u.jsx("button",{type:"button",onClick:()=>Ze({isOpen:!1,setId:null}),className:"text-gray-400 hover:text-gray-600",children:u.jsx(kl,{size:20})})]}),u.jsxs("div",{className:"p-4 md:p-6 overflow-hidden flex-1 flex flex-col",children:[u.jsxs("div",{className:"bg-orange-50 border border-orange-100 rounded-lg p-3 mb-6 flex gap-3 items-start",children:[u.jsx(bd,{className:"text-orange-600 shrink-0 mt-0.5",size:18}),u.jsxs("p",{className:"text-xs text-orange-800 leading-relaxed",children:[u.jsx("strong",{children:"Code Compliance Warning:"})," Adding manual items may affect the fire rating."]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto",children:[u.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-500 mb-4",children:"Choose a category below"}),u.jsx("div",{className:"grid gap-4 xl:grid-cols-4 lg:grid-cols-2",children:_ie.map(q=>u.jsxs("div",{className:"flex flex-col h-full rounded-3xl border border-gray-100 bg-white shadow-sm overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[u.jsx("div",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:q.label}),u.jsx("p",{className:"text-sm font-semibold text-gray-900",children:q.description})]}),u.jsx("div",{className:"flex-1 px-3 py-3 space-y-3 overflow-y-auto",children:q.items.length===0?u.jsx("p",{className:"text-xs text-gray-500",children:"No entries yet."}):q.items.map(_e=>u.jsxs("button",{type:"button",onClick:()=>nc(_e.category,_e.name),className:"w-full text-left rounded-2xl border border-gray-100 px-3 py-2 transition hover:border-indigo-200 hover:bg-indigo-50",children:[u.jsx("div",{className:"text-sm font-semibold text-gray-900",children:_e.name}),u.jsx("div",{className:"text-[11px] text-gray-500",children:_e.description||"Layman-friendly details"}),u.jsx("div",{className:"text-[10px] text-gray-400 font-mono mt-1",children:_e.csi})]},`${_e.category}-${_e.name}`))})]},q.id))})]})]})]})}),It&&u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40 px-4",children:u.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-white p-6 shadow-2xl text-gray-900 relative",children:[u.jsx("button",{type:"button",onClick:()=>cn(null),className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:u.jsx(kl,{size:16})}),u.jsx("h4",{className:"text-lg font-bold mb-2",children:It.title||"Notice"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:It.message}),u.jsx("div",{className:"text-right",children:u.jsx("button",{type:"button",onClick:()=>cn(null),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg hover:bg-indigo-700",children:"Close"})})]})}),kr.isOpen&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 sm:p-6",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl flex flex-col",children:[u.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50 rounded-t-xl",children:[u.jsx("h3",{className:"text-lg font-bold",children:"Bulk Assign Door Specification"}),u.jsx("button",{onClick:()=>vr({isOpen:!1,templateId:"",markPrefix:"",locationsText:""}),className:"text-gray-400 hover:text-gray-600",children:u.jsx(kl,{size:20})})]}),u.jsxs("div",{className:"p-4 md:p-6 space-y-4 overflow-y-auto",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Select a template door and provide locations (zone | level | room) to replicate its specification."}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Template Door"}),u.jsx("select",{value:kr.templateId,onChange:q=>{const _e=pe().doors.find(Ue=>Ue.id===q.target.value);vr(Ue=>({...Ue,templateId:q.target.value,markPrefix:(_e==null?void 0:_e.mark)||Ue.markPrefix}))},className:"w-full p-2 border rounded bg-white",children:pe().doors.map(q=>u.jsxs("option",{value:q.id,children:[q.mark," - ",q.roomName]},q.id))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Mark Prefix"}),u.jsx("input",{type:"text",value:kr.markPrefix,onChange:q=>vr(_e=>({..._e,markPrefix:q.target.value})),className:"w-full p-2 border rounded",placeholder:"e.g. D-100"}),u.jsx("p",{className:"text-[11px] text-gray-400 mt-1",children:"Unique marks will be generated from this prefix."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Locations"}),u.jsx("textarea",{value:kr.locationsText,onChange:q=>vr(_e=>({..._e,locationsText:q.target.value})),className:"w-full p-2 border rounded h-32",placeholder:`Tower A | Lvl 02 | Meeting Room
Tower B | Lvl 05 | Boardroom`}),u.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:'Provide one location per line using "Zone | Level | Room" format. Leave a part blank to reuse the template value.'})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>vr({isOpen:!1,templateId:"",markPrefix:"",locationsText:""}),className:"px-4 py-2 text-sm border rounded",children:"Cancel"}),u.jsx("button",{onClick:()=>ic(),className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Create Doors"})]})]})]})}),xe.isOpen&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 sm:p-6",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl flex flex-col",children:[u.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50 rounded-t-xl",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold",children:"Instant Door Schedule Preview"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Review and confirm the generated door list before inserting."})]}),u.jsx("button",{onClick:()=>Re({isOpen:!1,doors:[]}),className:"text-gray-400 hover:text-gray-600",children:u.jsx(kl,{size:20})})]}),u.jsxs("div",{className:"p-4 md:p-6 overflow-y-auto max-h-[60vh]",children:[xe.doors.length===0?u.jsx("div",{className:"text-sm text-gray-500",children:"No doors generated."}):u.jsxs("table",{className:"w-full text-sm border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[u.jsx("th",{className:"text-left p-2",children:"Mark"}),u.jsx("th",{className:"text-left p-2",children:"Usage"}),u.jsx("th",{className:"text-left p-2",children:"Qty"}),u.jsx("th",{className:"text-left p-2",children:"Material"}),u.jsx("th",{className:"text-left p-2",children:"Fire Rating"})]})}),u.jsx("tbody",{children:xe.doors.map(q=>u.jsxs("tr",{className:"border-b border-gray-100",children:[u.jsx("td",{className:"p-2 font-semibold text-indigo-600",children:q.mark}),u.jsxs("td",{className:"p-2",children:[u.jsx("div",{className:"font-medium text-gray-800",children:q.use}),u.jsx("div",{className:"text-xs text-gray-500",children:q.roomName})]}),u.jsx("td",{className:"p-2",children:q.qty}),u.jsx("td",{className:"p-2",children:q.material}),u.jsx("td",{className:"p-2",children:q.fire>0?`${q.fire} min`:"NFR"})]},q.id))})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Need to undo? Simply delete the generated doors from the schedule later."})]}),u.jsxs("div",{className:"p-4 md:p-6 border-t border-gray-100 flex justify-end gap-2 bg-gray-50 rounded-b-xl",children:[u.jsx("button",{onClick:()=>Re({isOpen:!1,doors:[]}),className:"px-4 py-2 text-sm border rounded",children:"Cancel"}),u.jsx("button",{onClick:mn,className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-2",children:"Confirm & Insert"})]})]})}),h&&u.jsx(RR,{isOpen:i,onClose:()=>s(!1)}),u.jsx(vW,{isOpen:a,onClose:()=>o(!1)}),u.jsx(bW,{isOpen:l,onClose:()=>c(!1)}),mr]})},rse=()=>{const{user:t}=ku(),[e,r]=No.useState(!1),n=[{id:"doors",title:"Door Hardware",description:"Complete door hardware specification with ANSI/BHMA and EN compliance",icon:gh,path:"/doors",features:["Door Scheduling","Hardware Sets","Fire Rating Compliance"],color:"from-blue-500 to-indigo-600",available:!0},{id:"masterkey",title:"Master Key Systems",description:"Hierarchical keying design with zone-based or custom approaches",icon:Ml,path:"/",features:["ANSI/BHMA A156.28","EN 1303 Support","Auto-Assignment"],color:"from-emerald-500 to-teal-600",available:!0},{id:"access",title:"Access Control",description:"Electronic access control system design and specification",icon:jp,path:"#",features:["Card Readers","Biometrics","Integration Points"],color:"from-purple-500 to-violet-600",available:!1},{id:"exports",title:"Project Exports",description:"Generate professional deliverables in multiple formats",icon:uf,path:"#",features:["PDF Schedules","Excel Workbooks","BIM Integration"],color:"from-orange-500 to-amber-600",available:!1}],i=[{label:"Standards Supported",value:"2+",icon:kR},{label:"Hardware Categories",value:"10",icon:kf},{label:"Facility Types",value:"6",icon:xx}];return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[e&&u.jsx(Hb,{onClose:()=>r(!1)}),u.jsx("header",{className:"border-b border-slate-700/50 bg-slate-900/80 backdrop-blur-sm sticky top-0 z-40",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex items-center justify-between h-16",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",children:u.jsx(xx,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold text-white",children:"InstaSpec"}),u.jsx("p",{className:"text-xs text-slate-400",children:"Industry Hub"})]})]}),u.jsxs("nav",{className:"flex items-center gap-4",children:[u.jsxs(Jo,{to:"/",className:"flex items-center gap-2 px-3 py-2 text-sm text-slate-300 hover:text-white transition-colors",children:[u.jsx($b,{className:"w-4 h-4"}),"Home"]}),t?u.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-800 text-sm text-slate-300",children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),t.email]}):u.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium transition-colors",children:"Beta Login"})]})]})})}),u.jsx("section",{className:"py-16 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[u.jsxs("h2",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:["Architectural Hardware",u.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400",children:"Specification Platform"})]}),u.jsx("p",{className:"text-lg text-slate-400 max-w-2xl mx-auto mb-8",children:"Streamline your door hardware specification workflow with intelligent automation, compliance checking, and professional exports."}),u.jsx("div",{className:"flex flex-wrap justify-center gap-8",children:i.map(s=>u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[u.jsx(s.icon,{className:"w-5 h-5 text-indigo-400"}),u.jsx("span",{className:"text-3xl font-bold text-white",children:s.value})]}),u.jsx("span",{className:"text-sm text-slate-500",children:s.label})]},s.label))})]})}),u.jsx("section",{className:"py-12 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-8",children:"Platform Modules"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(s=>u.jsxs("div",{className:`relative rounded-2xl border ${s.available?"border-slate-700 bg-slate-800/50 hover:border-slate-600":"border-slate-800 bg-slate-900/50 opacity-60"} p-6 transition-all duration-200`,children:[!s.available&&u.jsx("span",{className:"absolute top-4 right-4 px-2 py-1 rounded-full bg-slate-700 text-xs text-slate-400",children:"Coming Soon"}),u.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${s.color} flex items-center justify-center mb-4`,children:u.jsx(s.icon,{className:"w-6 h-6 text-white"})}),u.jsx("h4",{className:"text-xl font-semibold text-white mb-2",children:s.title}),u.jsx("p",{className:"text-slate-400 text-sm mb-4",children:s.description}),u.jsx("ul",{className:"space-y-2 mb-6",children:s.features.map(a=>u.jsxs("li",{className:"flex items-center gap-2 text-sm text-slate-500",children:[u.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),a]},a))}),s.available&&u.jsxs(Jo,{to:s.path,className:"inline-flex items-center gap-2 text-indigo-400 hover:text-indigo-300 text-sm font-medium transition-colors",children:["Open Module",u.jsx(nh,{className:"w-4 h-4"})]})]},s.id))})]})}),u.jsx("footer",{className:"border-t border-slate-800 py-8 px-4 sm:px-6 lg:px-8 mt-12",children:u.jsx("div",{className:"max-w-7xl mx-auto text-center",children:u.jsx("p",{className:"text-slate-500 text-sm",children:"InstaSpec by Techarix  Door Hardware Specification Platform"})})})]})},nse=()=>{const{user:t}=ku(),e=Iu(),[r,n]=No.useState(!1),i=[{path:"/doors",label:"Overview",icon:Rp,exact:!0},{path:"/doors/schedule",label:"Door Schedule",icon:gh},{path:"/doors/hardware",label:"Hardware Sets",icon:Wb},{path:"/doors/masterkey",label:"Master Key",icon:Ml}],s=(a,o=!1)=>o?e.pathname===a:e.pathname.startsWith(a);return u.jsxs("div",{className:"min-h-screen bg-slate-50",children:[r&&u.jsx(Hb,{onClose:()=>n(!1)}),u.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex items-center justify-between h-14",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx(Jo,{to:"/",className:"text-slate-500 hover:text-slate-700 transition-colors",children:u.jsx($b,{className:"w-4 h-4"})}),u.jsx(m5,{className:"w-4 h-4 text-slate-400"}),u.jsx(Jo,{to:"/hub",className:"text-slate-500 hover:text-slate-700 transition-colors",children:"Hub"}),u.jsx(m5,{className:"w-4 h-4 text-slate-400"}),u.jsx("span",{className:"text-slate-900 font-medium",children:"Door Hardware"})]}),u.jsx("div",{className:"flex items-center gap-4",children:t?u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-slate-100 text-sm text-slate-600",children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),t.email]}):u.jsx("button",{onClick:()=>n(!0),className:"px-4 py-1.5 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium transition-colors",children:"Beta Login"})})]})})}),u.jsxs("div",{className:"flex",children:[u.jsx("aside",{className:"w-64 min-h-[calc(100vh-56px)] bg-white border-r border-slate-200 sticky top-14 self-start",children:u.jsxs("div",{className:"p-4",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:u.jsx(gh,{className:"w-5 h-5 text-white"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-slate-900",children:"Door Hardware"}),u.jsx("p",{className:"text-xs text-slate-500",children:"Specification Module"})]})]}),u.jsx("nav",{className:"space-y-1",children:i.map(a=>{const o=s(a.path,a.exact);return u.jsxs(Jo,{to:a.path,className:`flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${o?"bg-indigo-50 text-indigo-700":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}`,children:[u.jsx(a.icon,{className:`w-5 h-5 ${o?"text-indigo-600":"text-slate-400"}`}),a.label]},a.path)})}),u.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:u.jsxs(Jo,{to:"/",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors",children:[u.jsx(xx,{className:"w-5 h-5 text-slate-400"}),"Full Application"]})})]})}),u.jsx("main",{className:"flex-1 p-6",children:u.jsx(bR,{})})]})]})},zg=()=>{const{user:t}=ku(),e=[{id:"schedule",title:"Door Schedule",description:"Add and manage doors with specifications",icon:gh,path:"/",color:"bg-blue-500",status:"available"},{id:"hardware",title:"Hardware Sets",description:"Configure hardware packages for door types",icon:Wb,path:"/",color:"bg-emerald-500",status:"available"},{id:"masterkey",title:"Master Key Design",description:"Create hierarchical keying systems",icon:Ml,path:"/",color:"bg-purple-500",status:"available"},{id:"export",title:"Export & Reports",description:"Generate PDF, Excel, and CSV deliverables",icon:uf,path:"/",color:"bg-orange-500",status:"available"}],r=[{action:"Project created",project:"Office Tower A",time:"2 hours ago",status:"success"},{action:"Hardware sets configured",project:"Medical Center",time:"1 day ago",status:"success"},{action:"Master key exported",project:"Hotel Complex",time:"3 days ago",status:"success"}];return u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Door Hardware Module"}),u.jsx("p",{className:"text-slate-600",children:"Manage door schedules, hardware specifications, and master key systems."})]}),!t&&u.jsxs("div",{className:"mb-6 p-4 rounded-xl bg-amber-50 border border-amber-200 flex items-start gap-3",children:[u.jsx(eo,{className:"w-5 h-5 text-amber-500 mt-0.5"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Beta Access Required"}),u.jsx("p",{className:"text-sm text-amber-700",children:"Please log in with your beta credentials to access all features."})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:e.map(n=>u.jsx(Jo,{to:n.path,className:"group p-5 rounded-xl bg-white border border-slate-200 hover:border-slate-300 hover:shadow-md transition-all duration-200",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`w-12 h-12 rounded-xl ${n.color} flex items-center justify-center flex-shrink-0`,children:u.jsx(n.icon,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-slate-900 mb-1 group-hover:text-indigo-600 transition-colors",children:n.title}),u.jsx("p",{className:"text-sm text-slate-500",children:n.description})]}),u.jsx(nh,{className:"w-5 h-5 text-slate-300 group-hover:text-indigo-500 group-hover:translate-x-1 transition-all"})]})},n.id))}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl border border-slate-200 p-5",children:[u.jsx("h2",{className:"font-semibold text-slate-900 mb-4",children:"Recent Activity"}),t?u.jsx("div",{className:"space-y-3",children:r.map((n,i)=>u.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-slate-100 last:border-0",children:[u.jsx(Ca,{className:"w-5 h-5 text-emerald-500"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium text-slate-700",children:n.action}),u.jsx("p",{className:"text-xs text-slate-500",children:n.project})]}),u.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-400",children:[u.jsx(Xq,{className:"w-3 h-3"}),n.time]})]},i))}):u.jsx("p",{className:"text-sm text-slate-500 py-4 text-center",children:"Log in to see your recent activity"})]}),u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[u.jsx("h2",{className:"font-semibold text-slate-900 mb-4",children:"Module Statistics"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100",children:[u.jsx("span",{className:"text-sm text-slate-600",children:"Standards Supported"}),u.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"2"})]}),u.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100",children:[u.jsx("span",{className:"text-sm text-slate-600",children:"Hardware Categories"}),u.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"10"})]}),u.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100",children:[u.jsx("span",{className:"text-sm text-slate-600",children:"Facility Types"}),u.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"6"})]}),u.jsxs("div",{className:"flex items-center justify-between py-2",children:[u.jsx("span",{className:"text-sm text-slate-600",children:"Export Formats"}),u.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"3"})]})]})]})]}),u.jsx("div",{className:"mt-8 p-5 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-600 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Need the Full Experience?"}),u.jsx("p",{className:"text-indigo-100 text-sm",children:"Access the complete application with all features including project management, door scheduling, hardware configuration, and master key design."})]}),u.jsx(Jo,{to:"/",className:"flex-shrink-0 px-5 py-2.5 rounded-lg bg-white text-indigo-600 font-medium text-sm hover:bg-indigo-50 transition-colors",children:"Open Full App"})]})})]})},ise=()=>u.jsx(bR,{}),sse=Iq([{path:"/",element:u.jsx(ise,{}),children:[{index:!0,element:u.jsx(tse,{})},{path:"hub",element:u.jsx(rse,{})},{path:"doors",element:u.jsx(nse,{}),children:[{index:!0,element:u.jsx(zg,{})},{path:"schedule",element:u.jsx(zg,{})},{path:"hardware",element:u.jsx(zg,{})},{path:"masterkey",element:u.jsx(zg,{})}]}]}]),ase=()=>u.jsx(zq,{router:sse});$v.createRoot(document.getElementById("root")).render(u.jsx(No.StrictMode,{children:u.jsx(gH,{children:u.jsx(ase,{})})}));export{Sn as _,Yf as c,yF as g};

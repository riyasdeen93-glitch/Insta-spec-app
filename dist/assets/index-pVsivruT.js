var SI=Object.defineProperty;var AI=(t,e,r)=>e in t?SI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var hn=(t,e,r)=>AI(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var EA={exports:{}},rg={},NA={exports:{}},Rr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C0=Symbol.for("react.element"),NI=Symbol.for("react.portal"),TI=Symbol.for("react.fragment"),kI=Symbol.for("react.strict_mode"),CI=Symbol.for("react.profiler"),II=Symbol.for("react.provider"),LI=Symbol.for("react.context"),PI=Symbol.for("react.forward_ref"),jI=Symbol.for("react.suspense"),RI=Symbol.for("react.memo"),FI=Symbol.for("react.lazy"),A_=Symbol.iterator;function DI(t){return t===null||typeof t!="object"?null:(t=A_&&t[A_]||t["@@iterator"],typeof t=="function"?t:null)}var TA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kA=Object.assign,CA={};function uf(t,e,r){this.props=t,this.context=e,this.refs=CA,this.updater=r||TA}uf.prototype.isReactComponent={};uf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};uf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function IA(){}IA.prototype=uf.prototype;function bv(t,e,r){this.props=t,this.context=e,this.refs=CA,this.updater=r||TA}var Sv=bv.prototype=new IA;Sv.constructor=bv;kA(Sv,uf.prototype);Sv.isPureReactComponent=!0;var E_=Array.isArray,LA=Object.prototype.hasOwnProperty,Av={current:null},PA={key:!0,ref:!0,__self:!0,__source:!0};function jA(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)LA.call(e,n)&&!PA.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:C0,type:t,key:s,ref:a,props:i,_owner:Av.current}}function MI(t,e){return{$$typeof:C0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ev(t){return typeof t=="object"&&t!==null&&t.$$typeof===C0}function OI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var N_=/\/+/g;function p2(t,e){return typeof t=="object"&&t!==null&&t.key!=null?OI(""+t.key):e.toString(36)}function dm(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case C0:case NI:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+p2(a,0):n,E_(i)?(r="",t!=null&&(r=t.replace(N_,"$&/")+"/"),dm(i,e,r,"",function(u){return u})):i!=null&&(Ev(i)&&(i=MI(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(N_,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",E_(t))for(var o=0;o<t.length;o++){s=t[o];var l=n+p2(s,o);a+=dm(s,e,r,l,i)}else if(l=DI(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=n+p2(s,o++),a+=dm(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function wp(t,e,r){if(t==null)return t;var n=[],i=0;return dm(t,n,"","",function(s){return e.call(r,s,i++)}),n}function BI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bs={current:null},pm={transition:null},UI={ReactCurrentDispatcher:Bs,ReactCurrentBatchConfig:pm,ReactCurrentOwner:Av};function RA(){throw Error("act(...) is not supported in production builds of React.")}Rr.Children={map:wp,forEach:function(t,e,r){wp(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return wp(t,function(){e++}),e},toArray:function(t){return wp(t,function(e){return e})||[]},only:function(t){if(!Ev(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Rr.Component=uf;Rr.Fragment=TI;Rr.Profiler=CI;Rr.PureComponent=bv;Rr.StrictMode=kI;Rr.Suspense=jI;Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UI;Rr.act=RA;Rr.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=kA({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Av.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)LA.call(e,l)&&!PA.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:C0,type:t.type,key:i,ref:s,props:n,_owner:a}};Rr.createContext=function(t){return t={$$typeof:LI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:II,_context:t},t.Consumer=t};Rr.createElement=jA;Rr.createFactory=function(t){var e=jA.bind(null,t);return e.type=t,e};Rr.createRef=function(){return{current:null}};Rr.forwardRef=function(t){return{$$typeof:PI,render:t}};Rr.isValidElement=Ev;Rr.lazy=function(t){return{$$typeof:FI,_payload:{_status:-1,_result:t},_init:BI}};Rr.memo=function(t,e){return{$$typeof:RI,type:t,compare:e===void 0?null:e}};Rr.startTransition=function(t){var e=pm.transition;pm.transition={};try{t()}finally{pm.transition=e}};Rr.unstable_act=RA;Rr.useCallback=function(t,e){return Bs.current.useCallback(t,e)};Rr.useContext=function(t){return Bs.current.useContext(t)};Rr.useDebugValue=function(){};Rr.useDeferredValue=function(t){return Bs.current.useDeferredValue(t)};Rr.useEffect=function(t,e){return Bs.current.useEffect(t,e)};Rr.useId=function(){return Bs.current.useId()};Rr.useImperativeHandle=function(t,e,r){return Bs.current.useImperativeHandle(t,e,r)};Rr.useInsertionEffect=function(t,e){return Bs.current.useInsertionEffect(t,e)};Rr.useLayoutEffect=function(t,e){return Bs.current.useLayoutEffect(t,e)};Rr.useMemo=function(t,e){return Bs.current.useMemo(t,e)};Rr.useReducer=function(t,e,r){return Bs.current.useReducer(t,e,r)};Rr.useRef=function(t){return Bs.current.useRef(t)};Rr.useState=function(t){return Bs.current.useState(t)};Rr.useSyncExternalStore=function(t,e,r){return Bs.current.useSyncExternalStore(t,e,r)};Rr.useTransition=function(){return Bs.current.useTransition()};Rr.version="18.3.1";NA.exports=Rr;var we=NA.exports;const su=EI(we);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VI=we,zI=Symbol.for("react.element"),HI=Symbol.for("react.fragment"),qI=Object.prototype.hasOwnProperty,$I=VI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WI={key:!0,ref:!0,__self:!0,__source:!0};function FA(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)qI.call(e,n)&&!WI.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:zI,type:t,key:s,ref:a,props:i,_owner:$I.current}}rg.Fragment=HI;rg.jsx=FA;rg.jsxs=FA;EA.exports=rg;var c=EA.exports,Mx={},DA={exports:{}},ka={},MA={exports:{}},OA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(he,_e){var Ue=he.length;he.push(_e);e:for(;0<Ue;){var Ie=Ue-1>>>1,L=he[Ie];if(0<i(L,_e))he[Ie]=_e,he[Ue]=L,Ue=Ie;else break e}}function r(he){return he.length===0?null:he[0]}function n(he){if(he.length===0)return null;var _e=he[0],Ue=he.pop();if(Ue!==_e){he[0]=Ue;e:for(var Ie=0,L=he.length,O=L>>>1;Ie<O;){var B=2*(Ie+1)-1,z=he[B],J=B+1,fe=he[J];if(0>i(z,Ue))J<L&&0>i(fe,z)?(he[Ie]=fe,he[J]=Ue,Ie=J):(he[Ie]=z,he[B]=Ue,Ie=B);else if(J<L&&0>i(fe,Ue))he[Ie]=fe,he[J]=Ue,Ie=J;else break e}}return _e}function i(he,_e){var Ue=he.sortIndex-_e.sortIndex;return Ue!==0?Ue:he.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],h=1,d=null,p=3,f=!1,v=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(he){for(var _e=r(u);_e!==null;){if(_e.callback===null)n(u);else if(_e.startTime<=he)n(u),_e.sortIndex=_e.expirationTime,e(l,_e);else break;_e=r(u)}}function R(he){if(y=!1,k(he),!v)if(r(l)!==null)v=!0,ve(q);else{var _e=r(u);_e!==null&&ye(R,_e.startTime-he)}}function q(he,_e){v=!1,y&&(y=!1,w(C),C=-1),f=!0;var Ue=p;try{for(k(_e),d=r(l);d!==null&&(!(d.expirationTime>_e)||he&&!N());){var Ie=d.callback;if(typeof Ie=="function"){d.callback=null,p=d.priorityLevel;var L=Ie(d.expirationTime<=_e);_e=t.unstable_now(),typeof L=="function"?d.callback=L:d===r(l)&&n(l),k(_e)}else n(l);d=r(l)}if(d!==null)var O=!0;else{var B=r(u);B!==null&&ye(R,B.startTime-_e),O=!1}return O}finally{d=null,p=Ue,f=!1}}var K=!1,E=null,C=-1,A=5,D=-1;function N(){return!(t.unstable_now()-D<A)}function j(){if(E!==null){var he=t.unstable_now();D=he;var _e=!0;try{_e=E(!0,he)}finally{_e?P():(K=!1,E=null)}}else K=!1}var P;if(typeof S=="function")P=function(){S(j)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ge=se.port2;se.port1.onmessage=j,P=function(){ge.postMessage(null)}}else P=function(){b(j,0)};function ve(he){E=he,K||(K=!0,P())}function ye(he,_e){C=b(function(){he(t.unstable_now())},_e)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(he){he.callback=null},t.unstable_continueExecution=function(){v||f||(v=!0,ve(q))},t.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<he?Math.floor(1e3/he):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(he){switch(p){case 1:case 2:case 3:var _e=3;break;default:_e=p}var Ue=p;p=_e;try{return he()}finally{p=Ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(he,_e){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var Ue=p;p=he;try{return _e()}finally{p=Ue}},t.unstable_scheduleCallback=function(he,_e,Ue){var Ie=t.unstable_now();switch(typeof Ue=="object"&&Ue!==null?(Ue=Ue.delay,Ue=typeof Ue=="number"&&0<Ue?Ie+Ue:Ie):Ue=Ie,he){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Ue+L,he={id:h++,callback:_e,priorityLevel:he,startTime:Ue,expirationTime:L,sortIndex:-1},Ue>Ie?(he.sortIndex=Ue,e(u,he),r(l)===null&&he===r(u)&&(y?(w(C),C=-1):y=!0,ye(R,Ue-Ie))):(he.sortIndex=L,e(l,he),v||f||(v=!0,ve(q))),he},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(he){var _e=p;return function(){var Ue=p;p=_e;try{return he.apply(this,arguments)}finally{p=Ue}}}})(OA);MA.exports=OA;var KI=MA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GI=we,Ea=KI;function vt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BA=new Set,zd={};function Iu(t,e){Gh(t,e),Gh(t+"Capture",e)}function Gh(t,e){for(zd[t]=e,t=0;t<e.length;t++)BA.add(e[t])}var yl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ox=Object.prototype.hasOwnProperty,YI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T_={},k_={};function XI(t){return Ox.call(k_,t)?!0:Ox.call(T_,t)?!1:YI.test(t)?k_[t]=!0:(T_[t]=!0,!1)}function QI(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ZI(t,e,r,n){if(e===null||typeof e>"u"||QI(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Us(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var as={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){as[t]=new Us(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];as[e]=new Us(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){as[t]=new Us(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){as[t]=new Us(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){as[t]=new Us(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){as[t]=new Us(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){as[t]=new Us(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){as[t]=new Us(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){as[t]=new Us(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nv=/[\-:]([a-z])/g;function Tv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nv,Tv);as[e]=new Us(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nv,Tv);as[e]=new Us(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nv,Tv);as[e]=new Us(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){as[t]=new Us(t,1,!1,t.toLowerCase(),null,!1,!1)});as.xlinkHref=new Us("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){as[t]=new Us(t,1,!1,t.toLowerCase(),null,!0,!0)});function kv(t,e,r,n){var i=as.hasOwnProperty(e)?as[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ZI(e,r,i,n)&&(r=null),n||i===null?XI(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var kl=GI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_p=Symbol.for("react.element"),hh=Symbol.for("react.portal"),fh=Symbol.for("react.fragment"),Cv=Symbol.for("react.strict_mode"),Bx=Symbol.for("react.profiler"),UA=Symbol.for("react.provider"),VA=Symbol.for("react.context"),Iv=Symbol.for("react.forward_ref"),Ux=Symbol.for("react.suspense"),Vx=Symbol.for("react.suspense_list"),Lv=Symbol.for("react.memo"),Jl=Symbol.for("react.lazy"),zA=Symbol.for("react.offscreen"),C_=Symbol.iterator;function qf(t){return t===null||typeof t!="object"?null:(t=C_&&t[C_]||t["@@iterator"],typeof t=="function"?t:null)}var Gn=Object.assign,m2;function id(t){if(m2===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);m2=e&&e[1]||""}return`
`+m2+t}var g2=!1;function x2(t,e){if(!t||g2)return"";g2=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{g2=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?id(t):""}function JI(t){switch(t.tag){case 5:return id(t.type);case 16:return id("Lazy");case 13:return id("Suspense");case 19:return id("SuspenseList");case 0:case 2:case 15:return t=x2(t.type,!1),t;case 11:return t=x2(t.type.render,!1),t;case 1:return t=x2(t.type,!0),t;default:return""}}function zx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fh:return"Fragment";case hh:return"Portal";case Bx:return"Profiler";case Cv:return"StrictMode";case Ux:return"Suspense";case Vx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case VA:return(t.displayName||"Context")+".Consumer";case UA:return(t._context.displayName||"Context")+".Provider";case Iv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lv:return e=t.displayName||null,e!==null?e:zx(t.type)||"Memo";case Jl:e=t._payload,t=t._init;try{return zx(t(e))}catch{}}return null}function eL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zx(e);case 8:return e===Cv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function HA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tL(t){var e=HA(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bp(t){t._valueTracker||(t._valueTracker=tL(t))}function qA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=HA(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Um(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hx(t,e){var r=e.checked;return Gn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function I_(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Nc(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $A(t,e){e=e.checked,e!=null&&kv(t,"checked",e,!1)}function qx(t,e){$A(t,e);var r=Nc(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$x(t,e.type,r):e.hasOwnProperty("defaultValue")&&$x(t,e.type,Nc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function L_(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function $x(t,e,r){(e!=="number"||Um(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var sd=Array.isArray;function kh(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Nc(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(vt(91));return Gn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function P_(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(vt(92));if(sd(r)){if(1<r.length)throw Error(vt(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Nc(r)}}function WA(t,e){var r=Nc(e.value),n=Nc(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function j_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function KA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?KA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sp,GA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sp=Sp||document.createElement("div"),Sp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Hd(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var dd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rL=["Webkit","ms","Moz","O"];Object.keys(dd).forEach(function(t){rL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dd[e]=dd[t]})});function YA(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||dd.hasOwnProperty(t)&&dd[t]?(""+e).trim():e+"px"}function XA(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=YA(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var nL=Gn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gx(t,e){if(e){if(nL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(vt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(vt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(vt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(vt(62))}}function Yx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xx=null;function Pv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qx=null,Ch=null,Ih=null;function R_(t){if(t=P0(t)){if(typeof Qx!="function")throw Error(vt(280));var e=t.stateNode;e&&(e=og(e),Qx(t.stateNode,t.type,e))}}function QA(t){Ch?Ih?Ih.push(t):Ih=[t]:Ch=t}function ZA(){if(Ch){var t=Ch,e=Ih;if(Ih=Ch=null,R_(t),e)for(t=0;t<e.length;t++)R_(e[t])}}function JA(t,e){return t(e)}function eE(){}var y2=!1;function tE(t,e,r){if(y2)return t(e,r);y2=!0;try{return JA(t,e,r)}finally{y2=!1,(Ch!==null||Ih!==null)&&(eE(),ZA())}}function qd(t,e){var r=t.stateNode;if(r===null)return null;var n=og(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(vt(231,e,typeof r));return r}var Zx=!1;if(yl)try{var $f={};Object.defineProperty($f,"passive",{get:function(){Zx=!0}}),window.addEventListener("test",$f,$f),window.removeEventListener("test",$f,$f)}catch{Zx=!1}function iL(t,e,r,n,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var pd=!1,Vm=null,zm=!1,Jx=null,sL={onError:function(t){pd=!0,Vm=t}};function aL(t,e,r,n,i,s,a,o,l){pd=!1,Vm=null,iL.apply(sL,arguments)}function oL(t,e,r,n,i,s,a,o,l){if(aL.apply(this,arguments),pd){if(pd){var u=Vm;pd=!1,Vm=null}else throw Error(vt(198));zm||(zm=!0,Jx=u)}}function Lu(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function rE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function F_(t){if(Lu(t)!==t)throw Error(vt(188))}function lL(t){var e=t.alternate;if(!e){if(e=Lu(t),e===null)throw Error(vt(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return F_(i),t;if(s===n)return F_(i),e;s=s.sibling}throw Error(vt(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(vt(189))}}if(r.alternate!==n)throw Error(vt(190))}if(r.tag!==3)throw Error(vt(188));return r.stateNode.current===r?t:e}function nE(t){return t=lL(t),t!==null?iE(t):null}function iE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iE(t);if(e!==null)return e;t=t.sibling}return null}var sE=Ea.unstable_scheduleCallback,D_=Ea.unstable_cancelCallback,cL=Ea.unstable_shouldYield,uL=Ea.unstable_requestPaint,xi=Ea.unstable_now,hL=Ea.unstable_getCurrentPriorityLevel,jv=Ea.unstable_ImmediatePriority,aE=Ea.unstable_UserBlockingPriority,Hm=Ea.unstable_NormalPriority,fL=Ea.unstable_LowPriority,oE=Ea.unstable_IdlePriority,ng=null,Uo=null;function dL(t){if(Uo&&typeof Uo.onCommitFiberRoot=="function")try{Uo.onCommitFiberRoot(ng,t,void 0,(t.current.flags&128)===128)}catch{}}var go=Math.clz32?Math.clz32:gL,pL=Math.log,mL=Math.LN2;function gL(t){return t>>>=0,t===0?32:31-(pL(t)/mL|0)|0}var Ap=64,Ep=4194304;function ad(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qm(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=ad(o):(s&=a,s!==0&&(n=ad(s)))}else a=r&~i,a!==0?n=ad(a):s!==0&&(n=ad(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-go(e),i=1<<r,n|=t[r],e&=~i;return n}function xL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yL(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-go(s),o=1<<a,l=i[a];l===-1?(!(o&r)||o&n)&&(i[a]=xL(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function ey(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lE(){var t=Ap;return Ap<<=1,!(Ap&4194240)&&(Ap=64),t}function v2(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function I0(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-go(e),t[e]=r}function vL(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-go(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Rv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-go(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var gn=0;function cE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uE,Fv,hE,fE,dE,ty=!1,Np=[],dc=null,pc=null,mc=null,$d=new Map,Wd=new Map,nc=[],wL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function M_(t,e){switch(t){case"focusin":case"focusout":dc=null;break;case"dragenter":case"dragleave":pc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":$d.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wd.delete(e.pointerId)}}function Wf(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=P0(e),e!==null&&Fv(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function _L(t,e,r,n,i){switch(e){case"focusin":return dc=Wf(dc,t,e,r,n,i),!0;case"dragenter":return pc=Wf(pc,t,e,r,n,i),!0;case"mouseover":return mc=Wf(mc,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return $d.set(s,Wf($d.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Wd.set(s,Wf(Wd.get(s)||null,t,e,r,n,i)),!0}return!1}function pE(t){var e=au(t.target);if(e!==null){var r=Lu(e);if(r!==null){if(e=r.tag,e===13){if(e=rE(r),e!==null){t.blockedOn=e,dE(t.priority,function(){hE(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=ry(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Xx=n,r.target.dispatchEvent(n),Xx=null}else return e=P0(r),e!==null&&Fv(e),t.blockedOn=r,!1;e.shift()}return!0}function O_(t,e,r){mm(t)&&r.delete(e)}function bL(){ty=!1,dc!==null&&mm(dc)&&(dc=null),pc!==null&&mm(pc)&&(pc=null),mc!==null&&mm(mc)&&(mc=null),$d.forEach(O_),Wd.forEach(O_)}function Kf(t,e){t.blockedOn===e&&(t.blockedOn=null,ty||(ty=!0,Ea.unstable_scheduleCallback(Ea.unstable_NormalPriority,bL)))}function Kd(t){function e(i){return Kf(i,t)}if(0<Np.length){Kf(Np[0],t);for(var r=1;r<Np.length;r++){var n=Np[r];n.blockedOn===t&&(n.blockedOn=null)}}for(dc!==null&&Kf(dc,t),pc!==null&&Kf(pc,t),mc!==null&&Kf(mc,t),$d.forEach(e),Wd.forEach(e),r=0;r<nc.length;r++)n=nc[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<nc.length&&(r=nc[0],r.blockedOn===null);)pE(r),r.blockedOn===null&&nc.shift()}var Lh=kl.ReactCurrentBatchConfig,$m=!0;function SL(t,e,r,n){var i=gn,s=Lh.transition;Lh.transition=null;try{gn=1,Dv(t,e,r,n)}finally{gn=i,Lh.transition=s}}function AL(t,e,r,n){var i=gn,s=Lh.transition;Lh.transition=null;try{gn=4,Dv(t,e,r,n)}finally{gn=i,Lh.transition=s}}function Dv(t,e,r,n){if($m){var i=ry(t,e,r,n);if(i===null)C2(t,e,n,Wm,r),M_(t,n);else if(_L(i,t,e,r,n))n.stopPropagation();else if(M_(t,n),e&4&&-1<wL.indexOf(t)){for(;i!==null;){var s=P0(i);if(s!==null&&uE(s),s=ry(t,e,r,n),s===null&&C2(t,e,n,Wm,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else C2(t,e,n,null,r)}}var Wm=null;function ry(t,e,r,n){if(Wm=null,t=Pv(n),t=au(t),t!==null)if(e=Lu(t),e===null)t=null;else if(r=e.tag,r===13){if(t=rE(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wm=t,null}function mE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hL()){case jv:return 1;case aE:return 4;case Hm:case fL:return 16;case oE:return 536870912;default:return 16}default:return 16}}var ac=null,Mv=null,gm=null;function gE(){if(gm)return gm;var t,e=Mv,r=e.length,n,i="value"in ac?ac.value:ac.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return gm=i.slice(t,1<n?1-n:void 0)}function xm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tp(){return!0}function B_(){return!1}function Ca(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Tp:B_,this.isPropagationStopped=B_,this}return Gn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Tp)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Tp)},persist:function(){},isPersistent:Tp}),e}var hf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ov=Ca(hf),L0=Gn({},hf,{view:0,detail:0}),EL=Ca(L0),w2,_2,Gf,ig=Gn({},L0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gf&&(Gf&&t.type==="mousemove"?(w2=t.screenX-Gf.screenX,_2=t.screenY-Gf.screenY):_2=w2=0,Gf=t),w2)},movementY:function(t){return"movementY"in t?t.movementY:_2}}),U_=Ca(ig),NL=Gn({},ig,{dataTransfer:0}),TL=Ca(NL),kL=Gn({},L0,{relatedTarget:0}),b2=Ca(kL),CL=Gn({},hf,{animationName:0,elapsedTime:0,pseudoElement:0}),IL=Ca(CL),LL=Gn({},hf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),PL=Ca(LL),jL=Gn({},hf,{data:0}),V_=Ca(jL),RL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ML(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DL[t])?!!e[t]:!1}function Bv(){return ML}var OL=Gn({},L0,{key:function(t){if(t.key){var e=RL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bv,charCode:function(t){return t.type==="keypress"?xm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),BL=Ca(OL),UL=Gn({},ig,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z_=Ca(UL),VL=Gn({},L0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bv}),zL=Ca(VL),HL=Gn({},hf,{propertyName:0,elapsedTime:0,pseudoElement:0}),qL=Ca(HL),$L=Gn({},ig,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WL=Ca($L),KL=[9,13,27,32],Uv=yl&&"CompositionEvent"in window,md=null;yl&&"documentMode"in document&&(md=document.documentMode);var GL=yl&&"TextEvent"in window&&!md,xE=yl&&(!Uv||md&&8<md&&11>=md),H_=" ",q_=!1;function yE(t,e){switch(t){case"keyup":return KL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dh=!1;function YL(t,e){switch(t){case"compositionend":return vE(e);case"keypress":return e.which!==32?null:(q_=!0,H_);case"textInput":return t=e.data,t===H_&&q_?null:t;default:return null}}function XL(t,e){if(dh)return t==="compositionend"||!Uv&&yE(t,e)?(t=gE(),gm=Mv=ac=null,dh=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xE&&e.locale!=="ko"?null:e.data;default:return null}}var QL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!QL[t.type]:e==="textarea"}function wE(t,e,r,n){QA(n),e=Km(e,"onChange"),0<e.length&&(r=new Ov("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var gd=null,Gd=null;function ZL(t){LE(t,0)}function sg(t){var e=gh(t);if(qA(e))return t}function JL(t,e){if(t==="change")return e}var _E=!1;if(yl){var S2;if(yl){var A2="oninput"in document;if(!A2){var W_=document.createElement("div");W_.setAttribute("oninput","return;"),A2=typeof W_.oninput=="function"}S2=A2}else S2=!1;_E=S2&&(!document.documentMode||9<document.documentMode)}function K_(){gd&&(gd.detachEvent("onpropertychange",bE),Gd=gd=null)}function bE(t){if(t.propertyName==="value"&&sg(Gd)){var e=[];wE(e,Gd,t,Pv(t)),tE(ZL,e)}}function eP(t,e,r){t==="focusin"?(K_(),gd=e,Gd=r,gd.attachEvent("onpropertychange",bE)):t==="focusout"&&K_()}function tP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sg(Gd)}function rP(t,e){if(t==="click")return sg(e)}function nP(t,e){if(t==="input"||t==="change")return sg(e)}function iP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vo=typeof Object.is=="function"?Object.is:iP;function Yd(t,e){if(vo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Ox.call(e,i)||!vo(t[i],e[i]))return!1}return!0}function G_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Y_(t,e){var r=G_(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=G_(r)}}function SE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?SE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function AE(){for(var t=window,e=Um();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Um(t.document)}return e}function Vv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sP(t){var e=AE(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&SE(r.ownerDocument.documentElement,r)){if(n!==null&&Vv(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=Y_(r,s);var a=Y_(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var aP=yl&&"documentMode"in document&&11>=document.documentMode,ph=null,ny=null,xd=null,iy=!1;function X_(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;iy||ph==null||ph!==Um(n)||(n=ph,"selectionStart"in n&&Vv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),xd&&Yd(xd,n)||(xd=n,n=Km(ny,"onSelect"),0<n.length&&(e=new Ov("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ph)))}function kp(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var mh={animationend:kp("Animation","AnimationEnd"),animationiteration:kp("Animation","AnimationIteration"),animationstart:kp("Animation","AnimationStart"),transitionend:kp("Transition","TransitionEnd")},E2={},EE={};yl&&(EE=document.createElement("div").style,"AnimationEvent"in window||(delete mh.animationend.animation,delete mh.animationiteration.animation,delete mh.animationstart.animation),"TransitionEvent"in window||delete mh.transitionend.transition);function ag(t){if(E2[t])return E2[t];if(!mh[t])return t;var e=mh[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in EE)return E2[t]=e[r];return t}var NE=ag("animationend"),TE=ag("animationiteration"),kE=ag("animationstart"),CE=ag("transitionend"),IE=new Map,Q_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bc(t,e){IE.set(t,e),Iu(e,[t])}for(var N2=0;N2<Q_.length;N2++){var T2=Q_[N2],oP=T2.toLowerCase(),lP=T2[0].toUpperCase()+T2.slice(1);Bc(oP,"on"+lP)}Bc(NE,"onAnimationEnd");Bc(TE,"onAnimationIteration");Bc(kE,"onAnimationStart");Bc("dblclick","onDoubleClick");Bc("focusin","onFocus");Bc("focusout","onBlur");Bc(CE,"onTransitionEnd");Gh("onMouseEnter",["mouseout","mouseover"]);Gh("onMouseLeave",["mouseout","mouseover"]);Gh("onPointerEnter",["pointerout","pointerover"]);Gh("onPointerLeave",["pointerout","pointerover"]);Iu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Iu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Iu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Iu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cP=new Set("cancel close invalid load scroll toggle".split(" ").concat(od));function Z_(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,oL(n,e,void 0,t),t.currentTarget=null}function LE(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Z_(i,o,u),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Z_(i,o,u),s=l}}}if(zm)throw t=Jx,zm=!1,Jx=null,t}function Fn(t,e){var r=e[cy];r===void 0&&(r=e[cy]=new Set);var n=t+"__bubble";r.has(n)||(PE(e,t,2,!1),r.add(n))}function k2(t,e,r){var n=0;e&&(n|=4),PE(r,t,n,e)}var Cp="_reactListening"+Math.random().toString(36).slice(2);function Xd(t){if(!t[Cp]){t[Cp]=!0,BA.forEach(function(r){r!=="selectionchange"&&(cP.has(r)||k2(r,!1,t),k2(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cp]||(e[Cp]=!0,k2("selectionchange",!1,e))}}function PE(t,e,r,n){switch(mE(e)){case 1:var i=SL;break;case 4:i=AL;break;default:i=Dv}r=i.bind(null,e,r,t),i=void 0,!Zx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function C2(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=au(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}tE(function(){var u=s,h=Pv(r),d=[];e:{var p=IE.get(t);if(p!==void 0){var f=Ov,v=t;switch(t){case"keypress":if(xm(r)===0)break e;case"keydown":case"keyup":f=BL;break;case"focusin":v="focus",f=b2;break;case"focusout":v="blur",f=b2;break;case"beforeblur":case"afterblur":f=b2;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=U_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=TL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=zL;break;case NE:case TE:case kE:f=IL;break;case CE:f=qL;break;case"scroll":f=EL;break;case"wheel":f=WL;break;case"copy":case"cut":case"paste":f=PL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=z_}var y=(e&4)!==0,b=!y&&t==="scroll",w=y?p!==null?p+"Capture":null:p;y=[];for(var S=u,k;S!==null;){k=S;var R=k.stateNode;if(k.tag===5&&R!==null&&(k=R,w!==null&&(R=qd(S,w),R!=null&&y.push(Qd(S,R,k)))),b)break;S=S.return}0<y.length&&(p=new f(p,v,null,r,h),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&r!==Xx&&(v=r.relatedTarget||r.fromElement)&&(au(v)||v[vl]))break e;if((f||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,f?(v=r.relatedTarget||r.toElement,f=u,v=v?au(v):null,v!==null&&(b=Lu(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(f=null,v=u),f!==v)){if(y=U_,R="onMouseLeave",w="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(y=z_,R="onPointerLeave",w="onPointerEnter",S="pointer"),b=f==null?p:gh(f),k=v==null?p:gh(v),p=new y(R,S+"leave",f,r,h),p.target=b,p.relatedTarget=k,R=null,au(h)===u&&(y=new y(w,S+"enter",v,r,h),y.target=k,y.relatedTarget=b,R=y),b=R,f&&v)t:{for(y=f,w=v,S=0,k=y;k;k=$u(k))S++;for(k=0,R=w;R;R=$u(R))k++;for(;0<S-k;)y=$u(y),S--;for(;0<k-S;)w=$u(w),k--;for(;S--;){if(y===w||w!==null&&y===w.alternate)break t;y=$u(y),w=$u(w)}y=null}else y=null;f!==null&&J_(d,p,f,y,!1),v!==null&&b!==null&&J_(d,b,v,y,!0)}}e:{if(p=u?gh(u):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var q=JL;else if($_(p))if(_E)q=nP;else{q=tP;var K=eP}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(q=rP);if(q&&(q=q(t,u))){wE(d,q,r,h);break e}K&&K(t,p,u),t==="focusout"&&(K=p._wrapperState)&&K.controlled&&p.type==="number"&&$x(p,"number",p.value)}switch(K=u?gh(u):window,t){case"focusin":($_(K)||K.contentEditable==="true")&&(ph=K,ny=u,xd=null);break;case"focusout":xd=ny=ph=null;break;case"mousedown":iy=!0;break;case"contextmenu":case"mouseup":case"dragend":iy=!1,X_(d,r,h);break;case"selectionchange":if(aP)break;case"keydown":case"keyup":X_(d,r,h)}var E;if(Uv)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else dh?yE(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(xE&&r.locale!=="ko"&&(dh||C!=="onCompositionStart"?C==="onCompositionEnd"&&dh&&(E=gE()):(ac=h,Mv="value"in ac?ac.value:ac.textContent,dh=!0)),K=Km(u,C),0<K.length&&(C=new V_(C,t,null,r,h),d.push({event:C,listeners:K}),E?C.data=E:(E=vE(r),E!==null&&(C.data=E)))),(E=GL?YL(t,r):XL(t,r))&&(u=Km(u,"onBeforeInput"),0<u.length&&(h=new V_("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:u}),h.data=E))}LE(d,e)})}function Qd(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Km(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=qd(t,r),s!=null&&n.unshift(Qd(t,s,i)),s=qd(t,e),s!=null&&n.push(Qd(t,s,i))),t=t.return}return n}function $u(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function J_(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,i?(l=qd(r,s),l!=null&&a.unshift(Qd(r,l,o))):i||(l=qd(r,s),l!=null&&a.push(Qd(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var uP=/\r\n?/g,hP=/\u0000|\uFFFD/g;function eb(t){return(typeof t=="string"?t:""+t).replace(uP,`
`).replace(hP,"")}function Ip(t,e,r){if(e=eb(e),eb(t)!==e&&r)throw Error(vt(425))}function Gm(){}var sy=null,ay=null;function oy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ly=typeof setTimeout=="function"?setTimeout:void 0,fP=typeof clearTimeout=="function"?clearTimeout:void 0,tb=typeof Promise=="function"?Promise:void 0,dP=typeof queueMicrotask=="function"?queueMicrotask:typeof tb<"u"?function(t){return tb.resolve(null).then(t).catch(pP)}:ly;function pP(t){setTimeout(function(){throw t})}function I2(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Kd(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Kd(e)}function gc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ff=Math.random().toString(36).slice(2),Mo="__reactFiber$"+ff,Zd="__reactProps$"+ff,vl="__reactContainer$"+ff,cy="__reactEvents$"+ff,mP="__reactListeners$"+ff,gP="__reactHandles$"+ff;function au(t){var e=t[Mo];if(e)return e;for(var r=t.parentNode;r;){if(e=r[vl]||r[Mo]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=rb(t);t!==null;){if(r=t[Mo])return r;t=rb(t)}return e}t=r,r=t.parentNode}return null}function P0(t){return t=t[Mo]||t[vl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(vt(33))}function og(t){return t[Zd]||null}var uy=[],xh=-1;function Uc(t){return{current:t}}function On(t){0>xh||(t.current=uy[xh],uy[xh]=null,xh--)}function Pn(t,e){xh++,uy[xh]=t.current,t.current=e}var Tc={},Ts=Uc(Tc),Ys=Uc(!1),xu=Tc;function Yh(t,e){var r=t.type.contextTypes;if(!r)return Tc;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Xs(t){return t=t.childContextTypes,t!=null}function Ym(){On(Ys),On(Ts)}function nb(t,e,r){if(Ts.current!==Tc)throw Error(vt(168));Pn(Ts,e),Pn(Ys,r)}function jE(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(vt(108,eL(t)||"Unknown",i));return Gn({},r,n)}function Xm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tc,xu=Ts.current,Pn(Ts,t),Pn(Ys,Ys.current),!0}function ib(t,e,r){var n=t.stateNode;if(!n)throw Error(vt(169));r?(t=jE(t,e,xu),n.__reactInternalMemoizedMergedChildContext=t,On(Ys),On(Ts),Pn(Ts,t)):On(Ys),Pn(Ys,r)}var ol=null,lg=!1,L2=!1;function RE(t){ol===null?ol=[t]:ol.push(t)}function xP(t){lg=!0,RE(t)}function Vc(){if(!L2&&ol!==null){L2=!0;var t=0,e=gn;try{var r=ol;for(gn=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ol=null,lg=!1}catch(i){throw ol!==null&&(ol=ol.slice(t+1)),sE(jv,Vc),i}finally{gn=e,L2=!1}}return null}var yh=[],vh=0,Qm=null,Zm=0,Ha=[],qa=0,yu=null,ul=1,hl="";function Qc(t,e){yh[vh++]=Zm,yh[vh++]=Qm,Qm=t,Zm=e}function FE(t,e,r){Ha[qa++]=ul,Ha[qa++]=hl,Ha[qa++]=yu,yu=t;var n=ul;t=hl;var i=32-go(n)-1;n&=~(1<<i),r+=1;var s=32-go(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,ul=1<<32-go(e)+i|r<<i|n,hl=s+t}else ul=1<<s|r<<i|n,hl=t}function zv(t){t.return!==null&&(Qc(t,1),FE(t,1,0))}function Hv(t){for(;t===Qm;)Qm=yh[--vh],yh[vh]=null,Zm=yh[--vh],yh[vh]=null;for(;t===yu;)yu=Ha[--qa],Ha[qa]=null,hl=Ha[--qa],Ha[qa]=null,ul=Ha[--qa],Ha[qa]=null}var ba=null,va=null,Vn=!1,ho=null;function DE(t,e){var r=$a(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function sb(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ba=t,va=gc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ba=t,va=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=yu!==null?{id:ul,overflow:hl}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=$a(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ba=t,va=null,!0):!1;default:return!1}}function hy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fy(t){if(Vn){var e=va;if(e){var r=e;if(!sb(t,e)){if(hy(t))throw Error(vt(418));e=gc(r.nextSibling);var n=ba;e&&sb(t,e)?DE(n,r):(t.flags=t.flags&-4097|2,Vn=!1,ba=t)}}else{if(hy(t))throw Error(vt(418));t.flags=t.flags&-4097|2,Vn=!1,ba=t}}}function ab(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ba=t}function Lp(t){if(t!==ba)return!1;if(!Vn)return ab(t),Vn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!oy(t.type,t.memoizedProps)),e&&(e=va)){if(hy(t))throw ME(),Error(vt(418));for(;e;)DE(t,e),e=gc(e.nextSibling)}if(ab(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(vt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){va=gc(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}va=null}}else va=ba?gc(t.stateNode.nextSibling):null;return!0}function ME(){for(var t=va;t;)t=gc(t.nextSibling)}function Xh(){va=ba=null,Vn=!1}function qv(t){ho===null?ho=[t]:ho.push(t)}var yP=kl.ReactCurrentBatchConfig;function Yf(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(vt(309));var n=r.stateNode}if(!n)throw Error(vt(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(vt(284));if(!r._owner)throw Error(vt(290,t))}return t}function Pp(t,e){throw t=Object.prototype.toString.call(e),Error(vt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ob(t){var e=t._init;return e(t._payload)}function OE(t){function e(w,S){if(t){var k=w.deletions;k===null?(w.deletions=[S],w.flags|=16):k.push(S)}}function r(w,S){if(!t)return null;for(;S!==null;)e(w,S),S=S.sibling;return null}function n(w,S){for(w=new Map;S!==null;)S.key!==null?w.set(S.key,S):w.set(S.index,S),S=S.sibling;return w}function i(w,S){return w=wc(w,S),w.index=0,w.sibling=null,w}function s(w,S,k){return w.index=k,t?(k=w.alternate,k!==null?(k=k.index,k<S?(w.flags|=2,S):k):(w.flags|=2,S)):(w.flags|=1048576,S)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,S,k,R){return S===null||S.tag!==6?(S=O2(k,w.mode,R),S.return=w,S):(S=i(S,k),S.return=w,S)}function l(w,S,k,R){var q=k.type;return q===fh?h(w,S,k.props.children,R,k.key):S!==null&&(S.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Jl&&ob(q)===S.type)?(R=i(S,k.props),R.ref=Yf(w,S,k),R.return=w,R):(R=Am(k.type,k.key,k.props,null,w.mode,R),R.ref=Yf(w,S,k),R.return=w,R)}function u(w,S,k,R){return S===null||S.tag!==4||S.stateNode.containerInfo!==k.containerInfo||S.stateNode.implementation!==k.implementation?(S=B2(k,w.mode,R),S.return=w,S):(S=i(S,k.children||[]),S.return=w,S)}function h(w,S,k,R,q){return S===null||S.tag!==7?(S=fu(k,w.mode,R,q),S.return=w,S):(S=i(S,k),S.return=w,S)}function d(w,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return S=O2(""+S,w.mode,k),S.return=w,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case _p:return k=Am(S.type,S.key,S.props,null,w.mode,k),k.ref=Yf(w,null,S),k.return=w,k;case hh:return S=B2(S,w.mode,k),S.return=w,S;case Jl:var R=S._init;return d(w,R(S._payload),k)}if(sd(S)||qf(S))return S=fu(S,w.mode,k,null),S.return=w,S;Pp(w,S)}return null}function p(w,S,k,R){var q=S!==null?S.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return q!==null?null:o(w,S,""+k,R);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _p:return k.key===q?l(w,S,k,R):null;case hh:return k.key===q?u(w,S,k,R):null;case Jl:return q=k._init,p(w,S,q(k._payload),R)}if(sd(k)||qf(k))return q!==null?null:h(w,S,k,R,null);Pp(w,k)}return null}function f(w,S,k,R,q){if(typeof R=="string"&&R!==""||typeof R=="number")return w=w.get(k)||null,o(S,w,""+R,q);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case _p:return w=w.get(R.key===null?k:R.key)||null,l(S,w,R,q);case hh:return w=w.get(R.key===null?k:R.key)||null,u(S,w,R,q);case Jl:var K=R._init;return f(w,S,k,K(R._payload),q)}if(sd(R)||qf(R))return w=w.get(k)||null,h(S,w,R,q,null);Pp(S,R)}return null}function v(w,S,k,R){for(var q=null,K=null,E=S,C=S=0,A=null;E!==null&&C<k.length;C++){E.index>C?(A=E,E=null):A=E.sibling;var D=p(w,E,k[C],R);if(D===null){E===null&&(E=A);break}t&&E&&D.alternate===null&&e(w,E),S=s(D,S,C),K===null?q=D:K.sibling=D,K=D,E=A}if(C===k.length)return r(w,E),Vn&&Qc(w,C),q;if(E===null){for(;C<k.length;C++)E=d(w,k[C],R),E!==null&&(S=s(E,S,C),K===null?q=E:K.sibling=E,K=E);return Vn&&Qc(w,C),q}for(E=n(w,E);C<k.length;C++)A=f(E,w,C,k[C],R),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?C:A.key),S=s(A,S,C),K===null?q=A:K.sibling=A,K=A);return t&&E.forEach(function(N){return e(w,N)}),Vn&&Qc(w,C),q}function y(w,S,k,R){var q=qf(k);if(typeof q!="function")throw Error(vt(150));if(k=q.call(k),k==null)throw Error(vt(151));for(var K=q=null,E=S,C=S=0,A=null,D=k.next();E!==null&&!D.done;C++,D=k.next()){E.index>C?(A=E,E=null):A=E.sibling;var N=p(w,E,D.value,R);if(N===null){E===null&&(E=A);break}t&&E&&N.alternate===null&&e(w,E),S=s(N,S,C),K===null?q=N:K.sibling=N,K=N,E=A}if(D.done)return r(w,E),Vn&&Qc(w,C),q;if(E===null){for(;!D.done;C++,D=k.next())D=d(w,D.value,R),D!==null&&(S=s(D,S,C),K===null?q=D:K.sibling=D,K=D);return Vn&&Qc(w,C),q}for(E=n(w,E);!D.done;C++,D=k.next())D=f(E,w,C,D.value,R),D!==null&&(t&&D.alternate!==null&&E.delete(D.key===null?C:D.key),S=s(D,S,C),K===null?q=D:K.sibling=D,K=D);return t&&E.forEach(function(j){return e(w,j)}),Vn&&Qc(w,C),q}function b(w,S,k,R){if(typeof k=="object"&&k!==null&&k.type===fh&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case _p:e:{for(var q=k.key,K=S;K!==null;){if(K.key===q){if(q=k.type,q===fh){if(K.tag===7){r(w,K.sibling),S=i(K,k.props.children),S.return=w,w=S;break e}}else if(K.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Jl&&ob(q)===K.type){r(w,K.sibling),S=i(K,k.props),S.ref=Yf(w,K,k),S.return=w,w=S;break e}r(w,K);break}else e(w,K);K=K.sibling}k.type===fh?(S=fu(k.props.children,w.mode,R,k.key),S.return=w,w=S):(R=Am(k.type,k.key,k.props,null,w.mode,R),R.ref=Yf(w,S,k),R.return=w,w=R)}return a(w);case hh:e:{for(K=k.key;S!==null;){if(S.key===K)if(S.tag===4&&S.stateNode.containerInfo===k.containerInfo&&S.stateNode.implementation===k.implementation){r(w,S.sibling),S=i(S,k.children||[]),S.return=w,w=S;break e}else{r(w,S);break}else e(w,S);S=S.sibling}S=B2(k,w.mode,R),S.return=w,w=S}return a(w);case Jl:return K=k._init,b(w,S,K(k._payload),R)}if(sd(k))return v(w,S,k,R);if(qf(k))return y(w,S,k,R);Pp(w,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,S!==null&&S.tag===6?(r(w,S.sibling),S=i(S,k),S.return=w,w=S):(r(w,S),S=O2(k,w.mode,R),S.return=w,w=S),a(w)):r(w,S)}return b}var Qh=OE(!0),BE=OE(!1),Jm=Uc(null),e1=null,wh=null,$v=null;function Wv(){$v=wh=e1=null}function Kv(t){var e=Jm.current;On(Jm),t._currentValue=e}function dy(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Ph(t,e){e1=t,$v=wh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gs=!0),t.firstContext=null)}function Ga(t){var e=t._currentValue;if($v!==t)if(t={context:t,memoizedValue:e,next:null},wh===null){if(e1===null)throw Error(vt(308));wh=t,e1.dependencies={lanes:0,firstContext:t}}else wh=wh.next=t;return e}var ou=null;function Gv(t){ou===null?ou=[t]:ou.push(t)}function UE(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Gv(e)):(r.next=i.next,i.next=r),e.interleaved=r,wl(t,n)}function wl(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ec=!1;function Yv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function VE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xc(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Xr&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,wl(t,r)}return i=n.interleaved,i===null?(e.next=e,Gv(n)):(e.next=i.next,i.next=e),n.interleaved=e,wl(t,r)}function ym(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Rv(t,r)}}function lb(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function t1(t,e,r,n){var i=t.updateQueue;ec=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,h=u=l=null,o=s;do{var p=o.lane,f=o.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,y=o;switch(p=e,f=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){d=v.call(f,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(f,d,p):v,p==null)break e;d=Gn({},d,p);break e;case 2:ec=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else f={eventTime:f,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=f,l=d):h=h.next=f,a|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);wu|=a,t.lanes=a,t.memoizedState=d}}function cb(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(vt(191,i));i.call(n)}}}var j0={},Vo=Uc(j0),Jd=Uc(j0),e0=Uc(j0);function lu(t){if(t===j0)throw Error(vt(174));return t}function Xv(t,e){switch(Pn(e0,e),Pn(Jd,t),Pn(Vo,j0),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kx(e,t)}On(Vo),Pn(Vo,e)}function Zh(){On(Vo),On(Jd),On(e0)}function zE(t){lu(e0.current);var e=lu(Vo.current),r=Kx(e,t.type);e!==r&&(Pn(Jd,t),Pn(Vo,r))}function Qv(t){Jd.current===t&&(On(Vo),On(Jd))}var $n=Uc(0);function r1(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var P2=[];function Zv(){for(var t=0;t<P2.length;t++)P2[t]._workInProgressVersionPrimary=null;P2.length=0}var vm=kl.ReactCurrentDispatcher,j2=kl.ReactCurrentBatchConfig,vu=0,Kn=null,Fi=null,Ui=null,n1=!1,yd=!1,t0=0,vP=0;function ms(){throw Error(vt(321))}function Jv(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!vo(t[r],e[r]))return!1;return!0}function e5(t,e,r,n,i,s){if(vu=s,Kn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vm.current=t===null||t.memoizedState===null?SP:AP,t=r(n,i),yd){s=0;do{if(yd=!1,t0=0,25<=s)throw Error(vt(301));s+=1,Ui=Fi=null,e.updateQueue=null,vm.current=EP,t=r(n,i)}while(yd)}if(vm.current=i1,e=Fi!==null&&Fi.next!==null,vu=0,Ui=Fi=Kn=null,n1=!1,e)throw Error(vt(300));return t}function t5(){var t=t0!==0;return t0=0,t}function Ro(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ui===null?Kn.memoizedState=Ui=t:Ui=Ui.next=t,Ui}function Ya(){if(Fi===null){var t=Kn.alternate;t=t!==null?t.memoizedState:null}else t=Fi.next;var e=Ui===null?Kn.memoizedState:Ui.next;if(e!==null)Ui=e,Fi=t;else{if(t===null)throw Error(vt(310));Fi=t,t={memoizedState:Fi.memoizedState,baseState:Fi.baseState,baseQueue:Fi.baseQueue,queue:Fi.queue,next:null},Ui===null?Kn.memoizedState=Ui=t:Ui=Ui.next=t}return Ui}function r0(t,e){return typeof e=="function"?e(t):e}function R2(t){var e=Ya(),r=e.queue;if(r===null)throw Error(vt(311));r.lastRenderedReducer=t;var n=Fi,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,u=s;do{var h=u.lane;if((vu&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,a=n):l=l.next=d,Kn.lanes|=h,wu|=h}u=u.next}while(u!==null&&u!==s);l===null?a=n:l.next=o,vo(n,e.memoizedState)||(Gs=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Kn.lanes|=s,wu|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function F2(t){var e=Ya(),r=e.queue;if(r===null)throw Error(vt(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);vo(s,e.memoizedState)||(Gs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function HE(){}function qE(t,e){var r=Kn,n=Ya(),i=e(),s=!vo(n.memoizedState,i);if(s&&(n.memoizedState=i,Gs=!0),n=n.queue,r5(KE.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Ui!==null&&Ui.memoizedState.tag&1){if(r.flags|=2048,n0(9,WE.bind(null,r,n,i,e),void 0,null),Wi===null)throw Error(vt(349));vu&30||$E(r,e,i)}return i}function $E(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Kn.updateQueue,e===null?(e={lastEffect:null,stores:null},Kn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function WE(t,e,r,n){e.value=r,e.getSnapshot=n,GE(e)&&YE(t)}function KE(t,e,r){return r(function(){GE(e)&&YE(t)})}function GE(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!vo(t,r)}catch{return!0}}function YE(t){var e=wl(t,1);e!==null&&xo(e,t,1,-1)}function ub(t){var e=Ro();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r0,lastRenderedState:t},e.queue=t,t=t.dispatch=bP.bind(null,Kn,t),[e.memoizedState,t]}function n0(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Kn.updateQueue,e===null?(e={lastEffect:null,stores:null},Kn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function XE(){return Ya().memoizedState}function wm(t,e,r,n){var i=Ro();Kn.flags|=t,i.memoizedState=n0(1|e,r,void 0,n===void 0?null:n)}function cg(t,e,r,n){var i=Ya();n=n===void 0?null:n;var s=void 0;if(Fi!==null){var a=Fi.memoizedState;if(s=a.destroy,n!==null&&Jv(n,a.deps)){i.memoizedState=n0(e,r,s,n);return}}Kn.flags|=t,i.memoizedState=n0(1|e,r,s,n)}function hb(t,e){return wm(8390656,8,t,e)}function r5(t,e){return cg(2048,8,t,e)}function QE(t,e){return cg(4,2,t,e)}function ZE(t,e){return cg(4,4,t,e)}function JE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function eN(t,e,r){return r=r!=null?r.concat([t]):null,cg(4,4,JE.bind(null,e,t),r)}function n5(){}function tN(t,e){var r=Ya();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Jv(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function rN(t,e){var r=Ya();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Jv(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function nN(t,e,r){return vu&21?(vo(r,e)||(r=lE(),Kn.lanes|=r,wu|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gs=!0),t.memoizedState=r)}function wP(t,e){var r=gn;gn=r!==0&&4>r?r:4,t(!0);var n=j2.transition;j2.transition={};try{t(!1),e()}finally{gn=r,j2.transition=n}}function iN(){return Ya().memoizedState}function _P(t,e,r){var n=vc(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},sN(t))aN(e,r);else if(r=UE(t,e,r,n),r!==null){var i=Ms();xo(r,t,n,i),oN(r,e,n)}}function bP(t,e,r){var n=vc(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(sN(t))aN(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,vo(o,a)){var l=e.interleaved;l===null?(i.next=i,Gv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=UE(t,e,i,n),r!==null&&(i=Ms(),xo(r,t,n,i),oN(r,e,n))}}function sN(t){var e=t.alternate;return t===Kn||e!==null&&e===Kn}function aN(t,e){yd=n1=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function oN(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Rv(t,r)}}var i1={readContext:Ga,useCallback:ms,useContext:ms,useEffect:ms,useImperativeHandle:ms,useInsertionEffect:ms,useLayoutEffect:ms,useMemo:ms,useReducer:ms,useRef:ms,useState:ms,useDebugValue:ms,useDeferredValue:ms,useTransition:ms,useMutableSource:ms,useSyncExternalStore:ms,useId:ms,unstable_isNewReconciler:!1},SP={readContext:Ga,useCallback:function(t,e){return Ro().memoizedState=[t,e===void 0?null:e],t},useContext:Ga,useEffect:hb,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,wm(4194308,4,JE.bind(null,e,t),r)},useLayoutEffect:function(t,e){return wm(4194308,4,t,e)},useInsertionEffect:function(t,e){return wm(4,2,t,e)},useMemo:function(t,e){var r=Ro();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ro();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=_P.bind(null,Kn,t),[n.memoizedState,t]},useRef:function(t){var e=Ro();return t={current:t},e.memoizedState=t},useState:ub,useDebugValue:n5,useDeferredValue:function(t){return Ro().memoizedState=t},useTransition:function(){var t=ub(!1),e=t[0];return t=wP.bind(null,t[1]),Ro().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Kn,i=Ro();if(Vn){if(r===void 0)throw Error(vt(407));r=r()}else{if(r=e(),Wi===null)throw Error(vt(349));vu&30||$E(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,hb(KE.bind(null,n,s,t),[t]),n.flags|=2048,n0(9,WE.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Ro(),e=Wi.identifierPrefix;if(Vn){var r=hl,n=ul;r=(n&~(1<<32-go(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=t0++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=vP++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AP={readContext:Ga,useCallback:tN,useContext:Ga,useEffect:r5,useImperativeHandle:eN,useInsertionEffect:QE,useLayoutEffect:ZE,useMemo:rN,useReducer:R2,useRef:XE,useState:function(){return R2(r0)},useDebugValue:n5,useDeferredValue:function(t){var e=Ya();return nN(e,Fi.memoizedState,t)},useTransition:function(){var t=R2(r0)[0],e=Ya().memoizedState;return[t,e]},useMutableSource:HE,useSyncExternalStore:qE,useId:iN,unstable_isNewReconciler:!1},EP={readContext:Ga,useCallback:tN,useContext:Ga,useEffect:r5,useImperativeHandle:eN,useInsertionEffect:QE,useLayoutEffect:ZE,useMemo:rN,useReducer:F2,useRef:XE,useState:function(){return F2(r0)},useDebugValue:n5,useDeferredValue:function(t){var e=Ya();return Fi===null?e.memoizedState=t:nN(e,Fi.memoizedState,t)},useTransition:function(){var t=F2(r0)[0],e=Ya().memoizedState;return[t,e]},useMutableSource:HE,useSyncExternalStore:qE,useId:iN,unstable_isNewReconciler:!1};function lo(t,e){if(t&&t.defaultProps){e=Gn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function py(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Gn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ug={isMounted:function(t){return(t=t._reactInternals)?Lu(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Ms(),i=vc(t),s=pl(n,i);s.payload=e,r!=null&&(s.callback=r),e=xc(t,s,i),e!==null&&(xo(e,t,i,n),ym(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Ms(),i=vc(t),s=pl(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=xc(t,s,i),e!==null&&(xo(e,t,i,n),ym(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ms(),n=vc(t),i=pl(r,n);i.tag=2,e!=null&&(i.callback=e),e=xc(t,i,n),e!==null&&(xo(e,t,n,r),ym(e,t,n))}};function fb(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!Yd(r,n)||!Yd(i,s):!0}function lN(t,e,r){var n=!1,i=Tc,s=e.contextType;return typeof s=="object"&&s!==null?s=Ga(s):(i=Xs(e)?xu:Ts.current,n=e.contextTypes,s=(n=n!=null)?Yh(t,i):Tc),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ug,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function db(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ug.enqueueReplaceState(e,e.state,null)}function my(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Yv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ga(s):(s=Xs(e)?xu:Ts.current,i.context=Yh(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(py(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ug.enqueueReplaceState(i,i.state,null),t1(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Jh(t,e){try{var r="",n=e;do r+=JI(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function D2(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function gy(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var NP=typeof WeakMap=="function"?WeakMap:Map;function cN(t,e,r){r=pl(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){a1||(a1=!0,Ny=n),gy(t,e)},r}function uN(t,e,r){r=pl(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){gy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){gy(t,e),typeof n!="function"&&(yc===null?yc=new Set([this]):yc.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function pb(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new NP;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=UP.bind(null,t,e,r),e.then(t,t))}function mb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gb(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=pl(-1,1),e.tag=2,xc(r,e,1))),r.lanes|=1),t)}var TP=kl.ReactCurrentOwner,Gs=!1;function js(t,e,r,n){e.child=t===null?BE(e,null,r,n):Qh(e,t.child,r,n)}function xb(t,e,r,n,i){r=r.render;var s=e.ref;return Ph(e,i),n=e5(t,e,r,n,s,i),r=t5(),t!==null&&!Gs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_l(t,e,i)):(Vn&&r&&zv(e),e.flags|=1,js(t,e,n,i),e.child)}function yb(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!h5(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,hN(t,e,s,n,i)):(t=Am(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Yd,r(a,n)&&t.ref===e.ref)return _l(t,e,i)}return e.flags|=1,t=wc(s,n),t.ref=e.ref,t.return=e,e.child=t}function hN(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Yd(s,n)&&t.ref===e.ref)if(Gs=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Gs=!0);else return e.lanes=t.lanes,_l(t,e,i)}return xy(t,e,r,n,i)}function fN(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pn(bh,pa),pa|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pn(bh,pa),pa|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Pn(bh,pa),pa|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Pn(bh,pa),pa|=n;return js(t,e,i,r),e.child}function dN(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function xy(t,e,r,n,i){var s=Xs(r)?xu:Ts.current;return s=Yh(e,s),Ph(e,i),r=e5(t,e,r,n,s,i),n=t5(),t!==null&&!Gs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_l(t,e,i)):(Vn&&n&&zv(e),e.flags|=1,js(t,e,r,i),e.child)}function vb(t,e,r,n,i){if(Xs(r)){var s=!0;Xm(e)}else s=!1;if(Ph(e,i),e.stateNode===null)_m(t,e),lN(e,r,n),my(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ga(u):(u=Xs(r)?xu:Ts.current,u=Yh(e,u));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&db(e,a,n,u),ec=!1;var p=e.memoizedState;a.state=p,t1(e,n,a,i),l=e.memoizedState,o!==n||p!==l||Ys.current||ec?(typeof h=="function"&&(py(e,r,h,n),l=e.memoizedState),(o=ec||fb(e,r,o,n,p,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,VE(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:lo(e.type,o),a.props=u,d=e.pendingProps,p=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ga(l):(l=Xs(r)?xu:Ts.current,l=Yh(e,l));var f=r.getDerivedStateFromProps;(h=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||p!==l)&&db(e,a,n,l),ec=!1,p=e.memoizedState,a.state=p,t1(e,n,a,i);var v=e.memoizedState;o!==d||p!==v||Ys.current||ec?(typeof f=="function"&&(py(e,r,f,n),v=e.memoizedState),(u=ec||fb(e,r,u,n,p,v,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return yy(t,e,r,n,s,i)}function yy(t,e,r,n,i,s){dN(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&ib(e,r,!1),_l(t,e,s);n=e.stateNode,TP.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Qh(e,t.child,null,s),e.child=Qh(e,null,o,s)):js(t,e,o,s),e.memoizedState=n.state,i&&ib(e,r,!0),e.child}function pN(t){var e=t.stateNode;e.pendingContext?nb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nb(t,e.context,!1),Xv(t,e.containerInfo)}function wb(t,e,r,n,i){return Xh(),qv(i),e.flags|=256,js(t,e,r,n),e.child}var vy={dehydrated:null,treeContext:null,retryLane:0};function wy(t){return{baseLanes:t,cachePool:null,transitions:null}}function mN(t,e,r){var n=e.pendingProps,i=$n.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Pn($n,i&1),t===null)return fy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=dg(a,n,0,null),t=fu(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=wy(r),e.memoizedState=vy,t):i5(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return kP(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=wc(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=wc(o,s):(s=fu(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?wy(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=vy,n}return s=t.child,t=s.sibling,n=wc(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function i5(t,e){return e=dg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jp(t,e,r,n){return n!==null&&qv(n),Qh(e,t.child,null,r),t=i5(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kP(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=D2(Error(vt(422))),jp(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=dg({mode:"visible",children:n.children},i,0,null),s=fu(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Qh(e,t.child,null,a),e.child.memoizedState=wy(a),e.memoizedState=vy,s);if(!(e.mode&1))return jp(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(vt(419)),n=D2(s,n,void 0),jp(t,e,a,n)}if(o=(a&t.childLanes)!==0,Gs||o){if(n=Wi,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wl(t,i),xo(n,t,i,-1))}return u5(),n=D2(Error(vt(421))),jp(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=VP.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,va=gc(i.nextSibling),ba=e,Vn=!0,ho=null,t!==null&&(Ha[qa++]=ul,Ha[qa++]=hl,Ha[qa++]=yu,ul=t.id,hl=t.overflow,yu=e),e=i5(e,n.children),e.flags|=4096,e)}function _b(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),dy(t.return,e,r)}function M2(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function gN(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(js(t,e,n.children,r),n=$n.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_b(t,r,e);else if(t.tag===19)_b(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Pn($n,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&r1(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),M2(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&r1(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}M2(e,!0,r,null,s);break;case"together":M2(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _m(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _l(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),wu|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(vt(153));if(e.child!==null){for(t=e.child,r=wc(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=wc(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function CP(t,e,r){switch(e.tag){case 3:pN(e),Xh();break;case 5:zE(e);break;case 1:Xs(e.type)&&Xm(e);break;case 4:Xv(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Pn(Jm,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Pn($n,$n.current&1),e.flags|=128,null):r&e.child.childLanes?mN(t,e,r):(Pn($n,$n.current&1),t=_l(t,e,r),t!==null?t.sibling:null);Pn($n,$n.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return gN(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pn($n,$n.current),n)break;return null;case 22:case 23:return e.lanes=0,fN(t,e,r)}return _l(t,e,r)}var xN,_y,yN,vN;xN=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_y=function(){};yN=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,lu(Vo.current);var s=null;switch(r){case"input":i=Hx(t,i),n=Hx(t,n),s=[];break;case"select":i=Gn({},i,{value:void 0}),n=Gn({},n,{value:void 0}),s=[];break;case"textarea":i=Wx(t,i),n=Wx(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Gm)}Gx(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zd.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zd.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Fn("scroll",t),s||o===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};vN=function(t,e,r,n){r!==n&&(e.flags|=4)};function Xf(t,e){if(!Vn)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function gs(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function IP(t,e,r){var n=e.pendingProps;switch(Hv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gs(e),null;case 1:return Xs(e.type)&&Ym(),gs(e),null;case 3:return n=e.stateNode,Zh(),On(Ys),On(Ts),Zv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Lp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ho!==null&&(Cy(ho),ho=null))),_y(t,e),gs(e),null;case 5:Qv(e);var i=lu(e0.current);if(r=e.type,t!==null&&e.stateNode!=null)yN(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(vt(166));return gs(e),null}if(t=lu(Vo.current),Lp(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Mo]=e,n[Zd]=s,t=(e.mode&1)!==0,r){case"dialog":Fn("cancel",n),Fn("close",n);break;case"iframe":case"object":case"embed":Fn("load",n);break;case"video":case"audio":for(i=0;i<od.length;i++)Fn(od[i],n);break;case"source":Fn("error",n);break;case"img":case"image":case"link":Fn("error",n),Fn("load",n);break;case"details":Fn("toggle",n);break;case"input":I_(n,s),Fn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Fn("invalid",n);break;case"textarea":P_(n,s),Fn("invalid",n)}Gx(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&Ip(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Ip(n.textContent,o,t),i=["children",""+o]):zd.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Fn("scroll",n)}switch(r){case"input":bp(n),L_(n,s,!0);break;case"textarea":bp(n),j_(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Gm)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=KA(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Mo]=e,t[Zd]=n,xN(t,e,!1,!1),e.stateNode=t;e:{switch(a=Yx(r,n),r){case"dialog":Fn("cancel",t),Fn("close",t),i=n;break;case"iframe":case"object":case"embed":Fn("load",t),i=n;break;case"video":case"audio":for(i=0;i<od.length;i++)Fn(od[i],t);i=n;break;case"source":Fn("error",t),i=n;break;case"img":case"image":case"link":Fn("error",t),Fn("load",t),i=n;break;case"details":Fn("toggle",t),i=n;break;case"input":I_(t,n),i=Hx(t,n),Fn("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Gn({},n,{value:void 0}),Fn("invalid",t);break;case"textarea":P_(t,n),i=Wx(t,n),Fn("invalid",t);break;default:i=n}Gx(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?XA(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&GA(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Hd(t,l):typeof l=="number"&&Hd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Fn("scroll",t):l!=null&&kv(t,s,l,a))}switch(r){case"input":bp(t),L_(t,n,!1);break;case"textarea":bp(t),j_(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Nc(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?kh(t,!!n.multiple,s,!1):n.defaultValue!=null&&kh(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Gm)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gs(e),null;case 6:if(t&&e.stateNode!=null)vN(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(vt(166));if(r=lu(e0.current),lu(Vo.current),Lp(e)){if(n=e.stateNode,r=e.memoizedProps,n[Mo]=e,(s=n.nodeValue!==r)&&(t=ba,t!==null))switch(t.tag){case 3:Ip(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ip(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Mo]=e,e.stateNode=n}return gs(e),null;case 13:if(On($n),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vn&&va!==null&&e.mode&1&&!(e.flags&128))ME(),Xh(),e.flags|=98560,s=!1;else if(s=Lp(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(vt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(vt(317));s[Mo]=e}else Xh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gs(e),s=!1}else ho!==null&&(Cy(ho),ho=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||$n.current&1?Di===0&&(Di=3):u5())),e.updateQueue!==null&&(e.flags|=4),gs(e),null);case 4:return Zh(),_y(t,e),t===null&&Xd(e.stateNode.containerInfo),gs(e),null;case 10:return Kv(e.type._context),gs(e),null;case 17:return Xs(e.type)&&Ym(),gs(e),null;case 19:if(On($n),s=e.memoizedState,s===null)return gs(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Xf(s,!1);else{if(Di!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=r1(t),a!==null){for(e.flags|=128,Xf(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Pn($n,$n.current&1|2),e.child}t=t.sibling}s.tail!==null&&xi()>ef&&(e.flags|=128,n=!0,Xf(s,!1),e.lanes=4194304)}else{if(!n)if(t=r1(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Xf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Vn)return gs(e),null}else 2*xi()-s.renderingStartTime>ef&&r!==1073741824&&(e.flags|=128,n=!0,Xf(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=xi(),e.sibling=null,r=$n.current,Pn($n,n?r&1|2:r&1),e):(gs(e),null);case 22:case 23:return c5(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?pa&1073741824&&(gs(e),e.subtreeFlags&6&&(e.flags|=8192)):gs(e),null;case 24:return null;case 25:return null}throw Error(vt(156,e.tag))}function LP(t,e){switch(Hv(e),e.tag){case 1:return Xs(e.type)&&Ym(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zh(),On(Ys),On(Ts),Zv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qv(e),null;case 13:if(On($n),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(vt(340));Xh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return On($n),null;case 4:return Zh(),null;case 10:return Kv(e.type._context),null;case 22:case 23:return c5(),null;case 24:return null;default:return null}}var Rp=!1,Ss=!1,PP=typeof WeakSet=="function"?WeakSet:Set,zt=null;function _h(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){si(t,e,n)}else r.current=null}function by(t,e,r){try{r()}catch(n){si(t,e,n)}}var bb=!1;function jP(t,e){if(sy=$m,t=AE(),Vv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,u=0,h=0,d=t,p=null;t:for(;;){for(var f;d!==r||i!==0&&d.nodeType!==3||(o=a+i),d!==s||n!==0&&d.nodeType!==3||(l=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)p=d,d=f;for(;;){if(d===t)break t;if(p===r&&++u===i&&(o=a),p===s&&++h===n&&(l=a),(f=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=f}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ay={focusedElem:t,selectionRange:r},$m=!1,zt=e;zt!==null;)if(e=zt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,zt=t;else for(;zt!==null;){e=zt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,b=v.memoizedState,w=e.stateNode,S=w.getSnapshotBeforeUpdate(e.elementType===e.type?y:lo(e.type,y),b);w.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(vt(163))}}catch(R){si(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,zt=t;break}zt=e.return}return v=bb,bb=!1,v}function vd(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&by(e,r,s)}i=i.next}while(i!==n)}}function hg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Sy(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function wN(t){var e=t.alternate;e!==null&&(t.alternate=null,wN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mo],delete e[Zd],delete e[cy],delete e[mP],delete e[gP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _N(t){return t.tag===5||t.tag===3||t.tag===4}function Sb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_N(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ay(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Gm));else if(n!==4&&(t=t.child,t!==null))for(Ay(t,e,r),t=t.sibling;t!==null;)Ay(t,e,r),t=t.sibling}function Ey(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Ey(t,e,r),t=t.sibling;t!==null;)Ey(t,e,r),t=t.sibling}var Zi=null,co=!1;function Yl(t,e,r){for(r=r.child;r!==null;)bN(t,e,r),r=r.sibling}function bN(t,e,r){if(Uo&&typeof Uo.onCommitFiberUnmount=="function")try{Uo.onCommitFiberUnmount(ng,r)}catch{}switch(r.tag){case 5:Ss||_h(r,e);case 6:var n=Zi,i=co;Zi=null,Yl(t,e,r),Zi=n,co=i,Zi!==null&&(co?(t=Zi,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Zi.removeChild(r.stateNode));break;case 18:Zi!==null&&(co?(t=Zi,r=r.stateNode,t.nodeType===8?I2(t.parentNode,r):t.nodeType===1&&I2(t,r),Kd(t)):I2(Zi,r.stateNode));break;case 4:n=Zi,i=co,Zi=r.stateNode.containerInfo,co=!0,Yl(t,e,r),Zi=n,co=i;break;case 0:case 11:case 14:case 15:if(!Ss&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&by(r,e,a),i=i.next}while(i!==n)}Yl(t,e,r);break;case 1:if(!Ss&&(_h(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){si(r,e,o)}Yl(t,e,r);break;case 21:Yl(t,e,r);break;case 22:r.mode&1?(Ss=(n=Ss)||r.memoizedState!==null,Yl(t,e,r),Ss=n):Yl(t,e,r);break;default:Yl(t,e,r)}}function Ab(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new PP),e.forEach(function(n){var i=zP.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function io(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Zi=o.stateNode,co=!1;break e;case 3:Zi=o.stateNode.containerInfo,co=!0;break e;case 4:Zi=o.stateNode.containerInfo,co=!0;break e}o=o.return}if(Zi===null)throw Error(vt(160));bN(s,a,i),Zi=null,co=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){si(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SN(e,t),e=e.sibling}function SN(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(io(e,t),Co(t),n&4){try{vd(3,t,t.return),hg(3,t)}catch(y){si(t,t.return,y)}try{vd(5,t,t.return)}catch(y){si(t,t.return,y)}}break;case 1:io(e,t),Co(t),n&512&&r!==null&&_h(r,r.return);break;case 5:if(io(e,t),Co(t),n&512&&r!==null&&_h(r,r.return),t.flags&32){var i=t.stateNode;try{Hd(i,"")}catch(y){si(t,t.return,y)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&$A(i,s),Yx(o,a);var u=Yx(o,s);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];h==="style"?XA(i,d):h==="dangerouslySetInnerHTML"?GA(i,d):h==="children"?Hd(i,d):kv(i,h,d,u)}switch(o){case"input":qx(i,s);break;case"textarea":WA(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?kh(i,!!s.multiple,f,!1):p!==!!s.multiple&&(s.defaultValue!=null?kh(i,!!s.multiple,s.defaultValue,!0):kh(i,!!s.multiple,s.multiple?[]:"",!1))}i[Zd]=s}catch(y){si(t,t.return,y)}}break;case 6:if(io(e,t),Co(t),n&4){if(t.stateNode===null)throw Error(vt(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){si(t,t.return,y)}}break;case 3:if(io(e,t),Co(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Kd(e.containerInfo)}catch(y){si(t,t.return,y)}break;case 4:io(e,t),Co(t);break;case 13:io(e,t),Co(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(o5=xi())),n&4&&Ab(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Ss=(u=Ss)||h,io(e,t),Ss=u):io(e,t),Co(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(zt=t,h=t.child;h!==null;){for(d=zt=h;zt!==null;){switch(p=zt,f=p.child,p.tag){case 0:case 11:case 14:case 15:vd(4,p,p.return);break;case 1:_h(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){si(n,r,y)}}break;case 5:_h(p,p.return);break;case 22:if(p.memoizedState!==null){Nb(d);continue}}f!==null?(f.return=p,zt=f):Nb(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=YA("display",a))}catch(y){si(t,t.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){si(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:io(e,t),Co(t),n&4&&Ab(t);break;case 21:break;default:io(e,t),Co(t)}}function Co(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(_N(r)){var n=r;break e}r=r.return}throw Error(vt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Hd(i,""),n.flags&=-33);var s=Sb(t);Ey(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Sb(t);Ay(t,o,a);break;default:throw Error(vt(161))}}catch(l){si(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function RP(t,e,r){zt=t,AN(t)}function AN(t,e,r){for(var n=(t.mode&1)!==0;zt!==null;){var i=zt,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||Rp;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Ss;o=Rp;var u=Ss;if(Rp=a,(Ss=l)&&!u)for(zt=i;zt!==null;)a=zt,l=a.child,a.tag===22&&a.memoizedState!==null?Tb(i):l!==null?(l.return=a,zt=l):Tb(i);for(;s!==null;)zt=s,AN(s),s=s.sibling;zt=i,Rp=o,Ss=u}Eb(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,zt=s):Eb(t)}}function Eb(t){for(;zt!==null;){var e=zt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ss||hg(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ss)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:lo(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&cb(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}cb(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Kd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(vt(163))}Ss||e.flags&512&&Sy(e)}catch(p){si(e,e.return,p)}}if(e===t){zt=null;break}if(r=e.sibling,r!==null){r.return=e.return,zt=r;break}zt=e.return}}function Nb(t){for(;zt!==null;){var e=zt;if(e===t){zt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,zt=r;break}zt=e.return}}function Tb(t){for(;zt!==null;){var e=zt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{hg(4,e)}catch(l){si(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){si(e,i,l)}}var s=e.return;try{Sy(e)}catch(l){si(e,s,l)}break;case 5:var a=e.return;try{Sy(e)}catch(l){si(e,a,l)}}}catch(l){si(e,e.return,l)}if(e===t){zt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,zt=o;break}zt=e.return}}var FP=Math.ceil,s1=kl.ReactCurrentDispatcher,s5=kl.ReactCurrentOwner,Ka=kl.ReactCurrentBatchConfig,Xr=0,Wi=null,Ai=null,is=0,pa=0,bh=Uc(0),Di=0,i0=null,wu=0,fg=0,a5=0,wd=null,Ks=null,o5=0,ef=1/0,al=null,a1=!1,Ny=null,yc=null,Fp=!1,oc=null,o1=0,_d=0,Ty=null,bm=-1,Sm=0;function Ms(){return Xr&6?xi():bm!==-1?bm:bm=xi()}function vc(t){return t.mode&1?Xr&2&&is!==0?is&-is:yP.transition!==null?(Sm===0&&(Sm=lE()),Sm):(t=gn,t!==0||(t=window.event,t=t===void 0?16:mE(t.type)),t):1}function xo(t,e,r,n){if(50<_d)throw _d=0,Ty=null,Error(vt(185));I0(t,r,n),(!(Xr&2)||t!==Wi)&&(t===Wi&&(!(Xr&2)&&(fg|=r),Di===4&&ic(t,is)),Qs(t,n),r===1&&Xr===0&&!(e.mode&1)&&(ef=xi()+500,lg&&Vc()))}function Qs(t,e){var r=t.callbackNode;yL(t,e);var n=qm(t,t===Wi?is:0);if(n===0)r!==null&&D_(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&D_(r),e===1)t.tag===0?xP(kb.bind(null,t)):RE(kb.bind(null,t)),dP(function(){!(Xr&6)&&Vc()}),r=null;else{switch(cE(n)){case 1:r=jv;break;case 4:r=aE;break;case 16:r=Hm;break;case 536870912:r=oE;break;default:r=Hm}r=PN(r,EN.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function EN(t,e){if(bm=-1,Sm=0,Xr&6)throw Error(vt(327));var r=t.callbackNode;if(jh()&&t.callbackNode!==r)return null;var n=qm(t,t===Wi?is:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=l1(t,n);else{e=n;var i=Xr;Xr|=2;var s=TN();(Wi!==t||is!==e)&&(al=null,ef=xi()+500,hu(t,e));do try{OP();break}catch(o){NN(t,o)}while(!0);Wv(),s1.current=s,Xr=i,Ai!==null?e=0:(Wi=null,is=0,e=Di)}if(e!==0){if(e===2&&(i=ey(t),i!==0&&(n=i,e=ky(t,i))),e===1)throw r=i0,hu(t,0),ic(t,n),Qs(t,xi()),r;if(e===6)ic(t,n);else{if(i=t.current.alternate,!(n&30)&&!DP(i)&&(e=l1(t,n),e===2&&(s=ey(t),s!==0&&(n=s,e=ky(t,s))),e===1))throw r=i0,hu(t,0),ic(t,n),Qs(t,xi()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(vt(345));case 2:Zc(t,Ks,al);break;case 3:if(ic(t,n),(n&130023424)===n&&(e=o5+500-xi(),10<e)){if(qm(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Ms(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ly(Zc.bind(null,t,Ks,al),e);break}Zc(t,Ks,al);break;case 4:if(ic(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-go(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=xi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*FP(n/1960))-n,10<n){t.timeoutHandle=ly(Zc.bind(null,t,Ks,al),n);break}Zc(t,Ks,al);break;case 5:Zc(t,Ks,al);break;default:throw Error(vt(329))}}}return Qs(t,xi()),t.callbackNode===r?EN.bind(null,t):null}function ky(t,e){var r=wd;return t.current.memoizedState.isDehydrated&&(hu(t,e).flags|=256),t=l1(t,e),t!==2&&(e=Ks,Ks=r,e!==null&&Cy(e)),t}function Cy(t){Ks===null?Ks=t:Ks.push.apply(Ks,t)}function DP(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!vo(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ic(t,e){for(e&=~a5,e&=~fg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-go(e),n=1<<r;t[r]=-1,e&=~n}}function kb(t){if(Xr&6)throw Error(vt(327));jh();var e=qm(t,0);if(!(e&1))return Qs(t,xi()),null;var r=l1(t,e);if(t.tag!==0&&r===2){var n=ey(t);n!==0&&(e=n,r=ky(t,n))}if(r===1)throw r=i0,hu(t,0),ic(t,e),Qs(t,xi()),r;if(r===6)throw Error(vt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zc(t,Ks,al),Qs(t,xi()),null}function l5(t,e){var r=Xr;Xr|=1;try{return t(e)}finally{Xr=r,Xr===0&&(ef=xi()+500,lg&&Vc())}}function _u(t){oc!==null&&oc.tag===0&&!(Xr&6)&&jh();var e=Xr;Xr|=1;var r=Ka.transition,n=gn;try{if(Ka.transition=null,gn=1,t)return t()}finally{gn=n,Ka.transition=r,Xr=e,!(Xr&6)&&Vc()}}function c5(){pa=bh.current,On(bh)}function hu(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,fP(r)),Ai!==null)for(r=Ai.return;r!==null;){var n=r;switch(Hv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ym();break;case 3:Zh(),On(Ys),On(Ts),Zv();break;case 5:Qv(n);break;case 4:Zh();break;case 13:On($n);break;case 19:On($n);break;case 10:Kv(n.type._context);break;case 22:case 23:c5()}r=r.return}if(Wi=t,Ai=t=wc(t.current,null),is=pa=e,Di=0,i0=null,a5=fg=wu=0,Ks=wd=null,ou!==null){for(e=0;e<ou.length;e++)if(r=ou[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}ou=null}return t}function NN(t,e){do{var r=Ai;try{if(Wv(),vm.current=i1,n1){for(var n=Kn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}n1=!1}if(vu=0,Ui=Fi=Kn=null,yd=!1,t0=0,s5.current=null,r===null||r.return===null){Di=1,i0=e,Ai=null;break}e:{var s=t,a=r.return,o=r,l=e;if(e=is,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=mb(a);if(f!==null){f.flags&=-257,gb(f,a,o,s,e),f.mode&1&&pb(s,u,e),e=f,l=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){pb(s,u,e),u5();break e}l=Error(vt(426))}}else if(Vn&&o.mode&1){var b=mb(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),gb(b,a,o,s,e),qv(Jh(l,o));break e}}s=l=Jh(l,o),Di!==4&&(Di=2),wd===null?wd=[s]:wd.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=cN(s,l,e);lb(s,w);break e;case 1:o=l;var S=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(yc===null||!yc.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=uN(s,o,e);lb(s,R);break e}}s=s.return}while(s!==null)}CN(r)}catch(q){e=q,Ai===r&&r!==null&&(Ai=r=r.return);continue}break}while(!0)}function TN(){var t=s1.current;return s1.current=i1,t===null?i1:t}function u5(){(Di===0||Di===3||Di===2)&&(Di=4),Wi===null||!(wu&268435455)&&!(fg&268435455)||ic(Wi,is)}function l1(t,e){var r=Xr;Xr|=2;var n=TN();(Wi!==t||is!==e)&&(al=null,hu(t,e));do try{MP();break}catch(i){NN(t,i)}while(!0);if(Wv(),Xr=r,s1.current=n,Ai!==null)throw Error(vt(261));return Wi=null,is=0,Di}function MP(){for(;Ai!==null;)kN(Ai)}function OP(){for(;Ai!==null&&!cL();)kN(Ai)}function kN(t){var e=LN(t.alternate,t,pa);t.memoizedProps=t.pendingProps,e===null?CN(t):Ai=e,s5.current=null}function CN(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=LP(r,e),r!==null){r.flags&=32767,Ai=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Di=6,Ai=null;return}}else if(r=IP(r,e,pa),r!==null){Ai=r;return}if(e=e.sibling,e!==null){Ai=e;return}Ai=e=t}while(e!==null);Di===0&&(Di=5)}function Zc(t,e,r){var n=gn,i=Ka.transition;try{Ka.transition=null,gn=1,BP(t,e,r,n)}finally{Ka.transition=i,gn=n}return null}function BP(t,e,r,n){do jh();while(oc!==null);if(Xr&6)throw Error(vt(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(vt(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(vL(t,s),t===Wi&&(Ai=Wi=null,is=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Fp||(Fp=!0,PN(Hm,function(){return jh(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Ka.transition,Ka.transition=null;var a=gn;gn=1;var o=Xr;Xr|=4,s5.current=null,jP(t,r),SN(r,t),sP(ay),$m=!!sy,ay=sy=null,t.current=r,RP(r),uL(),Xr=o,gn=a,Ka.transition=s}else t.current=r;if(Fp&&(Fp=!1,oc=t,o1=i),s=t.pendingLanes,s===0&&(yc=null),dL(r.stateNode),Qs(t,xi()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(a1)throw a1=!1,t=Ny,Ny=null,t;return o1&1&&t.tag!==0&&jh(),s=t.pendingLanes,s&1?t===Ty?_d++:(_d=0,Ty=t):_d=0,Vc(),null}function jh(){if(oc!==null){var t=cE(o1),e=Ka.transition,r=gn;try{if(Ka.transition=null,gn=16>t?16:t,oc===null)var n=!1;else{if(t=oc,oc=null,o1=0,Xr&6)throw Error(vt(331));var i=Xr;for(Xr|=4,zt=t.current;zt!==null;){var s=zt,a=s.child;if(zt.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(zt=u;zt!==null;){var h=zt;switch(h.tag){case 0:case 11:case 15:vd(8,h,s)}var d=h.child;if(d!==null)d.return=h,zt=d;else for(;zt!==null;){h=zt;var p=h.sibling,f=h.return;if(wN(h),h===u){zt=null;break}if(p!==null){p.return=f,zt=p;break}zt=f}}}var v=s.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}zt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,zt=a;else e:for(;zt!==null;){if(s=zt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:vd(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,zt=w;break e}zt=s.return}}var S=t.current;for(zt=S;zt!==null;){a=zt;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,zt=k;else e:for(a=S;zt!==null;){if(o=zt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:hg(9,o)}}catch(q){si(o,o.return,q)}if(o===a){zt=null;break e}var R=o.sibling;if(R!==null){R.return=o.return,zt=R;break e}zt=o.return}}if(Xr=i,Vc(),Uo&&typeof Uo.onPostCommitFiberRoot=="function")try{Uo.onPostCommitFiberRoot(ng,t)}catch{}n=!0}return n}finally{gn=r,Ka.transition=e}}return!1}function Cb(t,e,r){e=Jh(r,e),e=cN(t,e,1),t=xc(t,e,1),e=Ms(),t!==null&&(I0(t,1,e),Qs(t,e))}function si(t,e,r){if(t.tag===3)Cb(t,t,r);else for(;e!==null;){if(e.tag===3){Cb(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(yc===null||!yc.has(n))){t=Jh(r,t),t=uN(e,t,1),e=xc(e,t,1),t=Ms(),e!==null&&(I0(e,1,t),Qs(e,t));break}}e=e.return}}function UP(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Ms(),t.pingedLanes|=t.suspendedLanes&r,Wi===t&&(is&r)===r&&(Di===4||Di===3&&(is&130023424)===is&&500>xi()-o5?hu(t,0):a5|=r),Qs(t,e)}function IN(t,e){e===0&&(t.mode&1?(e=Ep,Ep<<=1,!(Ep&130023424)&&(Ep=4194304)):e=1);var r=Ms();t=wl(t,e),t!==null&&(I0(t,e,r),Qs(t,r))}function VP(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),IN(t,r)}function zP(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(vt(314))}n!==null&&n.delete(e),IN(t,r)}var LN;LN=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ys.current)Gs=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Gs=!1,CP(t,e,r);Gs=!!(t.flags&131072)}else Gs=!1,Vn&&e.flags&1048576&&FE(e,Zm,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;_m(t,e),t=e.pendingProps;var i=Yh(e,Ts.current);Ph(e,r),i=e5(null,e,n,t,i,r);var s=t5();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xs(n)?(s=!0,Xm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Yv(e),i.updater=ug,e.stateNode=i,i._reactInternals=e,my(e,n,t,r),e=yy(null,e,n,!0,s,r)):(e.tag=0,Vn&&s&&zv(e),js(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(_m(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=qP(n),t=lo(n,t),i){case 0:e=xy(null,e,n,t,r);break e;case 1:e=vb(null,e,n,t,r);break e;case 11:e=xb(null,e,n,t,r);break e;case 14:e=yb(null,e,n,lo(n.type,t),r);break e}throw Error(vt(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:lo(n,i),xy(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:lo(n,i),vb(t,e,n,i,r);case 3:e:{if(pN(e),t===null)throw Error(vt(387));n=e.pendingProps,s=e.memoizedState,i=s.element,VE(t,e),t1(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Jh(Error(vt(423)),e),e=wb(t,e,n,r,i);break e}else if(n!==i){i=Jh(Error(vt(424)),e),e=wb(t,e,n,r,i);break e}else for(va=gc(e.stateNode.containerInfo.firstChild),ba=e,Vn=!0,ho=null,r=BE(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xh(),n===i){e=_l(t,e,r);break e}js(t,e,n,r)}e=e.child}return e;case 5:return zE(e),t===null&&fy(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,oy(n,i)?a=null:s!==null&&oy(n,s)&&(e.flags|=32),dN(t,e),js(t,e,a,r),e.child;case 6:return t===null&&fy(e),null;case 13:return mN(t,e,r);case 4:return Xv(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Qh(e,null,n,r):js(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:lo(n,i),xb(t,e,n,i,r);case 7:return js(t,e,e.pendingProps,r),e.child;case 8:return js(t,e,e.pendingProps.children,r),e.child;case 12:return js(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Pn(Jm,n._currentValue),n._currentValue=a,s!==null)if(vo(s.value,a)){if(s.children===i.children&&!Ys.current){e=_l(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=pl(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),dy(s.return,r,e),o.lanes|=r;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(vt(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),dy(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}js(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Ph(e,r),i=Ga(i),n=n(i),e.flags|=1,js(t,e,n,r),e.child;case 14:return n=e.type,i=lo(n,e.pendingProps),i=lo(n.type,i),yb(t,e,n,i,r);case 15:return hN(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:lo(n,i),_m(t,e),e.tag=1,Xs(n)?(t=!0,Xm(e)):t=!1,Ph(e,r),lN(e,n,i),my(e,n,i,r),yy(null,e,n,!0,t,r);case 19:return gN(t,e,r);case 22:return fN(t,e,r)}throw Error(vt(156,e.tag))};function PN(t,e){return sE(t,e)}function HP(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $a(t,e,r,n){return new HP(t,e,r,n)}function h5(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qP(t){if(typeof t=="function")return h5(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Iv)return 11;if(t===Lv)return 14}return 2}function wc(t,e){var r=t.alternate;return r===null?(r=$a(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Am(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")h5(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case fh:return fu(r.children,i,s,e);case Cv:a=8,i|=8;break;case Bx:return t=$a(12,r,e,i|2),t.elementType=Bx,t.lanes=s,t;case Ux:return t=$a(13,r,e,i),t.elementType=Ux,t.lanes=s,t;case Vx:return t=$a(19,r,e,i),t.elementType=Vx,t.lanes=s,t;case zA:return dg(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case UA:a=10;break e;case VA:a=9;break e;case Iv:a=11;break e;case Lv:a=14;break e;case Jl:a=16,n=null;break e}throw Error(vt(130,t==null?t:typeof t,""))}return e=$a(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function fu(t,e,r,n){return t=$a(7,t,n,e),t.lanes=r,t}function dg(t,e,r,n){return t=$a(22,t,n,e),t.elementType=zA,t.lanes=r,t.stateNode={isHidden:!1},t}function O2(t,e,r){return t=$a(6,t,null,e),t.lanes=r,t}function B2(t,e,r){return e=$a(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $P(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=v2(0),this.expirationTimes=v2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=v2(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function f5(t,e,r,n,i,s,a,o,l){return t=new $P(t,e,r,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$a(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yv(s),t}function WP(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hh,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function jN(t){if(!t)return Tc;t=t._reactInternals;e:{if(Lu(t)!==t||t.tag!==1)throw Error(vt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(vt(171))}if(t.tag===1){var r=t.type;if(Xs(r))return jE(t,r,e)}return e}function RN(t,e,r,n,i,s,a,o,l){return t=f5(r,n,!0,t,i,s,a,o,l),t.context=jN(null),r=t.current,n=Ms(),i=vc(r),s=pl(n,i),s.callback=e??null,xc(r,s,i),t.current.lanes=i,I0(t,i,n),Qs(t,n),t}function pg(t,e,r,n){var i=e.current,s=Ms(),a=vc(i);return r=jN(r),e.context===null?e.context=r:e.pendingContext=r,e=pl(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=xc(i,e,a),t!==null&&(xo(t,i,a,s),ym(t,i,a)),a}function c1(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ib(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function d5(t,e){Ib(t,e),(t=t.alternate)&&Ib(t,e)}function KP(){return null}var FN=typeof reportError=="function"?reportError:function(t){console.error(t)};function p5(t){this._internalRoot=t}mg.prototype.render=p5.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(vt(409));pg(t,e,null,null)};mg.prototype.unmount=p5.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_u(function(){pg(null,t,null,null)}),e[vl]=null}};function mg(t){this._internalRoot=t}mg.prototype.unstable_scheduleHydration=function(t){if(t){var e=fE();t={blockedOn:null,target:t,priority:e};for(var r=0;r<nc.length&&e!==0&&e<nc[r].priority;r++);nc.splice(r,0,t),r===0&&pE(t)}};function m5(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lb(){}function GP(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=c1(a);s.call(u)}}var a=RN(e,n,t,0,null,!1,!1,"",Lb);return t._reactRootContainer=a,t[vl]=a.current,Xd(t.nodeType===8?t.parentNode:t),_u(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=c1(l);o.call(u)}}var l=f5(t,0,!1,null,null,!1,!1,"",Lb);return t._reactRootContainer=l,t[vl]=l.current,Xd(t.nodeType===8?t.parentNode:t),_u(function(){pg(e,l,r,n)}),l}function xg(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=c1(a);o.call(l)}}pg(e,a,t,i)}else a=GP(r,e,t,i,n);return c1(a)}uE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ad(e.pendingLanes);r!==0&&(Rv(e,r|1),Qs(e,xi()),!(Xr&6)&&(ef=xi()+500,Vc()))}break;case 13:_u(function(){var n=wl(t,1);if(n!==null){var i=Ms();xo(n,t,1,i)}}),d5(t,1)}};Fv=function(t){if(t.tag===13){var e=wl(t,134217728);if(e!==null){var r=Ms();xo(e,t,134217728,r)}d5(t,134217728)}};hE=function(t){if(t.tag===13){var e=vc(t),r=wl(t,e);if(r!==null){var n=Ms();xo(r,t,e,n)}d5(t,e)}};fE=function(){return gn};dE=function(t,e){var r=gn;try{return gn=t,e()}finally{gn=r}};Qx=function(t,e,r){switch(e){case"input":if(qx(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=og(n);if(!i)throw Error(vt(90));qA(n),qx(n,i)}}}break;case"textarea":WA(t,r);break;case"select":e=r.value,e!=null&&kh(t,!!r.multiple,e,!1)}};JA=l5;eE=_u;var YP={usingClientEntryPoint:!1,Events:[P0,gh,og,QA,ZA,l5]},Qf={findFiberByHostInstance:au,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XP={bundleType:Qf.bundleType,version:Qf.version,rendererPackageName:Qf.rendererPackageName,rendererConfig:Qf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nE(t),t===null?null:t.stateNode},findFiberByHostInstance:Qf.findFiberByHostInstance||KP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dp.isDisabled&&Dp.supportsFiber)try{ng=Dp.inject(XP),Uo=Dp}catch{}}ka.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YP;ka.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m5(e))throw Error(vt(200));return WP(t,e,null,r)};ka.createRoot=function(t,e){if(!m5(t))throw Error(vt(299));var r=!1,n="",i=FN;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=f5(t,1,!1,null,null,r,!1,n,i),t[vl]=e.current,Xd(t.nodeType===8?t.parentNode:t),new p5(e)};ka.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(vt(188)):(t=Object.keys(t).join(","),Error(vt(268,t)));return t=nE(e),t=t===null?null:t.stateNode,t};ka.flushSync=function(t){return _u(t)};ka.hydrate=function(t,e,r){if(!gg(e))throw Error(vt(200));return xg(null,t,e,!0,r)};ka.hydrateRoot=function(t,e,r){if(!m5(t))throw Error(vt(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=FN;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=RN(e,null,t,1,r??null,i,!1,s,a),t[vl]=e.current,Xd(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new mg(e)};ka.render=function(t,e,r){if(!gg(e))throw Error(vt(200));return xg(null,t,e,!1,r)};ka.unmountComponentAtNode=function(t){if(!gg(t))throw Error(vt(40));return t._reactRootContainer?(_u(function(){xg(null,null,t,!1,function(){t._reactRootContainer=null,t[vl]=null})}),!0):!1};ka.unstable_batchedUpdates=l5;ka.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!gg(r))throw Error(vt(200));if(t==null||t._reactInternals===void 0)throw Error(vt(38));return xg(t,e,r,!1,n)};ka.version="18.3.1-next-f1338f8080-20240426";function DN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DN)}catch(t){console.error(t)}}DN(),DA.exports=ka;var QP=DA.exports,Pb=QP;Mx.createRoot=Pb.createRoot,Mx.hydrateRoot=Pb.hydrateRoot;const ZP="modulepreload",JP=function(t){return"/"+t},jb={},Em=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=JP(l),l in jb)return;jb[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":ZP,u||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((p,f)=>{d.addEventListener("load",p),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},ej=()=>{};var Rb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},tj=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],a=t[r++],o=t[r++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},ON={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|o>>4;let p=(o&15)<<2|u>>6,f=u&63;l||(f=64,a||(p=64)),n.push(r[h],r[d],r[p],r[f])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0;++i;const u=i<t.length?r[t.charAt(i)]:64;++i;const d=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||o==null||u==null||d==null)throw new rj;const p=s<<2|o>>4;if(n.push(p),u!==64){const f=o<<4&240|u>>2;if(n.push(f),d!==64){const v=u<<6&192|d;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nj=function(t){const e=MN(t);return ON.encodeByteArray(e,!0)},u1=function(t){return nj(t).replace(/\./g,"")},ij=function(t){try{return ON.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=()=>sj().__FIREBASE_DEFAULTS__,oj=()=>{if(typeof process>"u"||typeof Rb>"u")return;const t=Rb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ij(t[1]);return e&&JSON.parse(e)},g5=()=>{try{return ej()||aj()||oj()||lj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cj=t=>{var e,r;return(r=(e=g5())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},uj=t=>{const e=cj(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},BN=()=>{var t;return(t=g5())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fj(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[u1(JSON.stringify(r)),u1(JSON.stringify(a)),""].join(".")}const bd={};function pj(){const t={prod:[],emulator:[]};for(const e of Object.keys(bd))bd[e]?t.emulator.push(e):t.prod.push(e);return t}function mj(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let Fb=!1;function gj(t,e){if(typeof window>"u"||typeof document>"u"||!x5(window.location.host)||bd[t]===e||bd[t]||Fb)return;bd[t]=e;function r(p){return`__firebase__banner__${p}`}const n="__firebase__banner",s=pj().prod.length>0;function a(){const p=document.getElementById(n);p&&p.remove()}function o(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,f){p.setAttribute("width","24"),p.setAttribute("id",f),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Fb=!0,a()},p}function h(p,f){p.setAttribute("id",f),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=mj(n),f=r("text"),v=document.getElementById(f)||document.createElement("span"),y=r("learnmore"),b=document.getElementById(y)||document.createElement("a"),w=r("preprendIcon"),S=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const k=p.element;o(k),h(b,y);const R=u();l(S,w),k.append(S,v,b,R),document.body.appendChild(k)}s?(v.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yj(){var e;const t=(e=g5())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vj(){return!yj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wj(){try{return typeof indexedDB=="object"}catch{return!1}}function _j(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="FirebaseError";class df extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=bj,Object.setPrototypeOf(this,df.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,UN.prototype.create)}}class UN{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Sj(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new df(i,o,n)}}function Sj(t,e){return t.replace(Aj,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Aj=/\{\$([^}]+)}/g;function h1(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const s=t[i],a=e[i];if(Db(s)&&Db(a)){if(!h1(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function Db(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(t){return t&&t._delegate?t._delegate:t}class s0{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new hj;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Tj(e))try{this.getOrInitializeService({instanceIdentifier:Jc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=Jc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jc){return this.instances.has(e)}getOptions(e=Jc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Nj(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Jc){return this.component?this.component.multipleInstances?e:Jc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nj(t){return t===Jc?void 0:t}function Tj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Ej(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Wr||(Wr={}));const Cj={debug:Wr.DEBUG,verbose:Wr.VERBOSE,info:Wr.INFO,warn:Wr.WARN,error:Wr.ERROR,silent:Wr.SILENT},Ij=Wr.INFO,Lj={[Wr.DEBUG]:"log",[Wr.VERBOSE]:"log",[Wr.INFO]:"info",[Wr.WARN]:"warn",[Wr.ERROR]:"error"},Pj=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=Lj[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class VN{constructor(e){this.name=e,this._logLevel=Ij,this._logHandler=Pj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Wr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Cj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Wr.DEBUG,...e),this._logHandler(this,Wr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Wr.VERBOSE,...e),this._logHandler(this,Wr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Wr.INFO,...e),this._logHandler(this,Wr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Wr.WARN,...e),this._logHandler(this,Wr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Wr.ERROR,...e),this._logHandler(this,Wr.ERROR,...e)}}const jj=(t,e)=>e.some(r=>t instanceof r);let Mb,Ob;function Rj(){return Mb||(Mb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fj(){return Ob||(Ob=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zN=new WeakMap,Iy=new WeakMap,HN=new WeakMap,U2=new WeakMap,y5=new WeakMap;function Dj(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{r(_c(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&zN.set(r,t)}).catch(()=>{}),y5.set(e,t),e}function Mj(t){if(Iy.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Iy.set(t,e)}let Ly={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Iy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||HN.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return _c(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Oj(t){Ly=t(Ly)}function Bj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(V2(this),e,...r);return HN.set(n,e.sort?e.sort():[e]),_c(n)}:Fj().includes(t)?function(...e){return t.apply(V2(this),e),_c(zN.get(this))}:function(...e){return _c(t.apply(V2(this),e))}}function Uj(t){return typeof t=="function"?Bj(t):(t instanceof IDBTransaction&&Mj(t),jj(t,Rj())?new Proxy(t,Ly):t)}function _c(t){if(t instanceof IDBRequest)return Dj(t);if(U2.has(t))return U2.get(t);const e=Uj(t);return e!==t&&(U2.set(t,e),y5.set(e,t)),e}const V2=t=>y5.get(t);function Vj(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=_c(a);return n&&a.addEventListener("upgradeneeded",l=>{n(_c(a.result),l.oldVersion,l.newVersion,_c(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const zj=["get","getKey","getAll","getAllKeys","count"],Hj=["put","add","delete","clear"],z2=new Map;function Bb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(z2.get(e))return z2.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=Hj.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||zj.includes(r)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),i&&l.done]))[0]};return z2.set(e,s),s}Oj(t=>({...t,get:(e,r,n)=>Bb(e,r)||t.get(e,r,n),has:(e,r)=>!!Bb(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if($j(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function $j(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Py="@firebase/app",Ub="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=new VN("@firebase/app"),Wj="@firebase/app-compat",Kj="@firebase/analytics-compat",Gj="@firebase/analytics",Yj="@firebase/app-check-compat",Xj="@firebase/app-check",Qj="@firebase/auth",Zj="@firebase/auth-compat",Jj="@firebase/database",e7="@firebase/data-connect",t7="@firebase/database-compat",r7="@firebase/functions",n7="@firebase/functions-compat",i7="@firebase/installations",s7="@firebase/installations-compat",a7="@firebase/messaging",o7="@firebase/messaging-compat",l7="@firebase/performance",c7="@firebase/performance-compat",u7="@firebase/remote-config",h7="@firebase/remote-config-compat",f7="@firebase/storage",d7="@firebase/storage-compat",p7="@firebase/firestore",m7="@firebase/ai",g7="@firebase/firestore-compat",x7="firebase",y7="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="[DEFAULT]",v7={[Py]:"fire-core",[Wj]:"fire-core-compat",[Gj]:"fire-analytics",[Kj]:"fire-analytics-compat",[Xj]:"fire-app-check",[Yj]:"fire-app-check-compat",[Qj]:"fire-auth",[Zj]:"fire-auth-compat",[Jj]:"fire-rtdb",[e7]:"fire-data-connect",[t7]:"fire-rtdb-compat",[r7]:"fire-fn",[n7]:"fire-fn-compat",[i7]:"fire-iid",[s7]:"fire-iid-compat",[a7]:"fire-fcm",[o7]:"fire-fcm-compat",[l7]:"fire-perf",[c7]:"fire-perf-compat",[u7]:"fire-rc",[h7]:"fire-rc-compat",[f7]:"fire-gcs",[d7]:"fire-gcs-compat",[p7]:"fire-fst",[g7]:"fire-fst-compat",[m7]:"fire-vertex","fire-js":"fire-js",[x7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=new Map,w7=new Map,Ry=new Map;function Vb(t,e){try{t.container.addComponent(e)}catch(r){bl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function d1(t){const e=t.name;if(Ry.has(e))return bl.debug(`There were multiple attempts to register component ${e}.`),!1;Ry.set(e,t);for(const r of f1.values())Vb(r,t);for(const r of w7.values())Vb(r,t);return!0}function _7(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function b7(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bc=new UN("app","Firebase",S7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new s0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7=y7;function qN(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:jy,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw bc.create("bad-app-name",{appName:String(i)});if(r||(r=BN()),!r)throw bc.create("no-options");const s=f1.get(i);if(s){if(h1(r,s.options)&&h1(n,s.config))return s;throw bc.create("duplicate-app",{appName:i})}const a=new kj(i);for(const l of Ry.values())a.addComponent(l);const o=new A7(r,n,a);return f1.set(i,o),o}function N7(t=jy){const e=f1.get(t);if(!e&&t===jy&&BN())return qN();if(!e)throw bc.create("no-app",{appName:t});return e}function Rh(t,e,r){let n=v7[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${n}" with version "${e}":`];i&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bl.warn(a.join(" "));return}d1(new s0(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7="firebase-heartbeat-database",k7=1,a0="firebase-heartbeat-store";let H2=null;function $N(){return H2||(H2=Vj(T7,k7,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(a0)}catch(r){console.warn(r)}}}}).catch(t=>{throw bc.create("idb-open",{originalErrorMessage:t.message})})),H2}async function C7(t){try{const r=(await $N()).transaction(a0),n=await r.objectStore(a0).get(WN(t));return await r.done,n}catch(e){if(e instanceof df)bl.warn(e.message);else{const r=bc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bl.warn(r.message)}}}async function zb(t,e){try{const n=(await $N()).transaction(a0,"readwrite");await n.objectStore(a0).put(e,WN(t)),await n.done}catch(r){if(r instanceof df)bl.warn(r.message);else{const n=bc.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});bl.warn(n.message)}}}function WN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=1024,L7=30;class P7{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new R7(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Hb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>L7){const a=F7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){bl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Hb(),{heartbeatsToSend:n,unsentEntries:i}=j7(this._heartbeatsCache.heartbeats),s=u1(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return bl.warn(r),""}}}function Hb(){return new Date().toISOString().substring(0,10)}function j7(t,e=I7){const r=[];let n=t.slice();for(const i of t){const s=r.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),qb(r)>e){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),qb(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class R7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wj()?_j().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await C7(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return zb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return zb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function qb(t){return u1(JSON.stringify({version:2,heartbeats:t})).length}function F7(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(t){d1(new s0("platform-logger",e=>new qj(e),"PRIVATE")),d1(new s0("heartbeat",e=>new P7(e),"PRIVATE")),Rh(Py,Ub,t),Rh(Py,Ub,"esm2020"),Rh("fire-js","")}D7("");var M7="firebase",O7="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rh(M7,O7,"app");var $b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sc,KN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,C){function A(){}A.prototype=C.prototype,E.F=C.prototype,E.prototype=new A,E.prototype.constructor=E,E.D=function(D,N,j){for(var P=Array(arguments.length-2),se=2;se<arguments.length;se++)P[se-2]=arguments[se];return C.prototype[N].apply(D,P)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,C,A){A||(A=0);const D=Array(16);if(typeof C=="string")for(var N=0;N<16;++N)D[N]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(N=0;N<16;++N)D[N]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=E.g[0],A=E.g[1],N=E.g[2];let j=E.g[3],P;P=C+(j^A&(N^j))+D[0]+3614090360&4294967295,C=A+(P<<7&4294967295|P>>>25),P=j+(N^C&(A^N))+D[1]+3905402710&4294967295,j=C+(P<<12&4294967295|P>>>20),P=N+(A^j&(C^A))+D[2]+606105819&4294967295,N=j+(P<<17&4294967295|P>>>15),P=A+(C^N&(j^C))+D[3]+3250441966&4294967295,A=N+(P<<22&4294967295|P>>>10),P=C+(j^A&(N^j))+D[4]+4118548399&4294967295,C=A+(P<<7&4294967295|P>>>25),P=j+(N^C&(A^N))+D[5]+1200080426&4294967295,j=C+(P<<12&4294967295|P>>>20),P=N+(A^j&(C^A))+D[6]+2821735955&4294967295,N=j+(P<<17&4294967295|P>>>15),P=A+(C^N&(j^C))+D[7]+4249261313&4294967295,A=N+(P<<22&4294967295|P>>>10),P=C+(j^A&(N^j))+D[8]+1770035416&4294967295,C=A+(P<<7&4294967295|P>>>25),P=j+(N^C&(A^N))+D[9]+2336552879&4294967295,j=C+(P<<12&4294967295|P>>>20),P=N+(A^j&(C^A))+D[10]+4294925233&4294967295,N=j+(P<<17&4294967295|P>>>15),P=A+(C^N&(j^C))+D[11]+2304563134&4294967295,A=N+(P<<22&4294967295|P>>>10),P=C+(j^A&(N^j))+D[12]+1804603682&4294967295,C=A+(P<<7&4294967295|P>>>25),P=j+(N^C&(A^N))+D[13]+4254626195&4294967295,j=C+(P<<12&4294967295|P>>>20),P=N+(A^j&(C^A))+D[14]+2792965006&4294967295,N=j+(P<<17&4294967295|P>>>15),P=A+(C^N&(j^C))+D[15]+1236535329&4294967295,A=N+(P<<22&4294967295|P>>>10),P=C+(N^j&(A^N))+D[1]+4129170786&4294967295,C=A+(P<<5&4294967295|P>>>27),P=j+(A^N&(C^A))+D[6]+3225465664&4294967295,j=C+(P<<9&4294967295|P>>>23),P=N+(C^A&(j^C))+D[11]+643717713&4294967295,N=j+(P<<14&4294967295|P>>>18),P=A+(j^C&(N^j))+D[0]+3921069994&4294967295,A=N+(P<<20&4294967295|P>>>12),P=C+(N^j&(A^N))+D[5]+3593408605&4294967295,C=A+(P<<5&4294967295|P>>>27),P=j+(A^N&(C^A))+D[10]+38016083&4294967295,j=C+(P<<9&4294967295|P>>>23),P=N+(C^A&(j^C))+D[15]+3634488961&4294967295,N=j+(P<<14&4294967295|P>>>18),P=A+(j^C&(N^j))+D[4]+3889429448&4294967295,A=N+(P<<20&4294967295|P>>>12),P=C+(N^j&(A^N))+D[9]+568446438&4294967295,C=A+(P<<5&4294967295|P>>>27),P=j+(A^N&(C^A))+D[14]+3275163606&4294967295,j=C+(P<<9&4294967295|P>>>23),P=N+(C^A&(j^C))+D[3]+4107603335&4294967295,N=j+(P<<14&4294967295|P>>>18),P=A+(j^C&(N^j))+D[8]+1163531501&4294967295,A=N+(P<<20&4294967295|P>>>12),P=C+(N^j&(A^N))+D[13]+2850285829&4294967295,C=A+(P<<5&4294967295|P>>>27),P=j+(A^N&(C^A))+D[2]+4243563512&4294967295,j=C+(P<<9&4294967295|P>>>23),P=N+(C^A&(j^C))+D[7]+1735328473&4294967295,N=j+(P<<14&4294967295|P>>>18),P=A+(j^C&(N^j))+D[12]+2368359562&4294967295,A=N+(P<<20&4294967295|P>>>12),P=C+(A^N^j)+D[5]+4294588738&4294967295,C=A+(P<<4&4294967295|P>>>28),P=j+(C^A^N)+D[8]+2272392833&4294967295,j=C+(P<<11&4294967295|P>>>21),P=N+(j^C^A)+D[11]+1839030562&4294967295,N=j+(P<<16&4294967295|P>>>16),P=A+(N^j^C)+D[14]+4259657740&4294967295,A=N+(P<<23&4294967295|P>>>9),P=C+(A^N^j)+D[1]+2763975236&4294967295,C=A+(P<<4&4294967295|P>>>28),P=j+(C^A^N)+D[4]+1272893353&4294967295,j=C+(P<<11&4294967295|P>>>21),P=N+(j^C^A)+D[7]+4139469664&4294967295,N=j+(P<<16&4294967295|P>>>16),P=A+(N^j^C)+D[10]+3200236656&4294967295,A=N+(P<<23&4294967295|P>>>9),P=C+(A^N^j)+D[13]+681279174&4294967295,C=A+(P<<4&4294967295|P>>>28),P=j+(C^A^N)+D[0]+3936430074&4294967295,j=C+(P<<11&4294967295|P>>>21),P=N+(j^C^A)+D[3]+3572445317&4294967295,N=j+(P<<16&4294967295|P>>>16),P=A+(N^j^C)+D[6]+76029189&4294967295,A=N+(P<<23&4294967295|P>>>9),P=C+(A^N^j)+D[9]+3654602809&4294967295,C=A+(P<<4&4294967295|P>>>28),P=j+(C^A^N)+D[12]+3873151461&4294967295,j=C+(P<<11&4294967295|P>>>21),P=N+(j^C^A)+D[15]+530742520&4294967295,N=j+(P<<16&4294967295|P>>>16),P=A+(N^j^C)+D[2]+3299628645&4294967295,A=N+(P<<23&4294967295|P>>>9),P=C+(N^(A|~j))+D[0]+4096336452&4294967295,C=A+(P<<6&4294967295|P>>>26),P=j+(A^(C|~N))+D[7]+1126891415&4294967295,j=C+(P<<10&4294967295|P>>>22),P=N+(C^(j|~A))+D[14]+2878612391&4294967295,N=j+(P<<15&4294967295|P>>>17),P=A+(j^(N|~C))+D[5]+4237533241&4294967295,A=N+(P<<21&4294967295|P>>>11),P=C+(N^(A|~j))+D[12]+1700485571&4294967295,C=A+(P<<6&4294967295|P>>>26),P=j+(A^(C|~N))+D[3]+2399980690&4294967295,j=C+(P<<10&4294967295|P>>>22),P=N+(C^(j|~A))+D[10]+4293915773&4294967295,N=j+(P<<15&4294967295|P>>>17),P=A+(j^(N|~C))+D[1]+2240044497&4294967295,A=N+(P<<21&4294967295|P>>>11),P=C+(N^(A|~j))+D[8]+1873313359&4294967295,C=A+(P<<6&4294967295|P>>>26),P=j+(A^(C|~N))+D[15]+4264355552&4294967295,j=C+(P<<10&4294967295|P>>>22),P=N+(C^(j|~A))+D[6]+2734768916&4294967295,N=j+(P<<15&4294967295|P>>>17),P=A+(j^(N|~C))+D[13]+1309151649&4294967295,A=N+(P<<21&4294967295|P>>>11),P=C+(N^(A|~j))+D[4]+4149444226&4294967295,C=A+(P<<6&4294967295|P>>>26),P=j+(A^(C|~N))+D[11]+3174756917&4294967295,j=C+(P<<10&4294967295|P>>>22),P=N+(C^(j|~A))+D[2]+718787259&4294967295,N=j+(P<<15&4294967295|P>>>17),P=A+(j^(N|~C))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+C&4294967295,E.g[1]=E.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,E.g[2]=E.g[2]+N&4294967295,E.g[3]=E.g[3]+j&4294967295}n.prototype.v=function(E,C){C===void 0&&(C=E.length);const A=C-this.blockSize,D=this.C;let N=this.h,j=0;for(;j<C;){if(N==0)for(;j<=A;)i(this,E,j),j+=this.blockSize;if(typeof E=="string"){for(;j<C;)if(D[N++]=E.charCodeAt(j++),N==this.blockSize){i(this,D),N=0;break}}else for(;j<C;)if(D[N++]=E[j++],N==this.blockSize){i(this,D),N=0;break}}this.h=N,this.o+=C},n.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var C=1;C<E.length-8;++C)E[C]=0;C=this.o*8;for(var A=E.length-8;A<E.length;++A)E[A]=C&255,C/=256;for(this.v(E),E=Array(16),C=0,A=0;A<4;++A)for(let D=0;D<32;D+=8)E[C++]=this.g[A]>>>D&255;return E};function s(E,C){var A=o;return Object.prototype.hasOwnProperty.call(A,E)?A[E]:A[E]=C(E)}function a(E,C){this.h=C;const A=[];let D=!0;for(let N=E.length-1;N>=0;N--){const j=E[N]|0;D&&j==C||(A[N]=j,D=!1)}this.g=A}var o={};function l(E){return-128<=E&&E<128?s(E,function(C){return new a([C|0],C<0?-1:0)}):new a([E|0],E<0?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return d;if(E<0)return b(u(-E));const C=[];let A=1;for(let D=0;E>=A;D++)C[D]=E/A|0,A*=4294967296;return new a(C,0)}function h(E,C){if(E.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(E.charAt(0)=="-")return b(h(E.substring(1),C));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=u(Math.pow(C,8));let D=d;for(let j=0;j<E.length;j+=8){var N=Math.min(8,E.length-j);const P=parseInt(E.substring(j,j+N),C);N<8?(N=u(Math.pow(C,N)),D=D.j(N).add(u(P))):(D=D.j(A),D=D.add(u(P)))}return D}var d=l(0),p=l(1),f=l(16777216);t=a.prototype,t.m=function(){if(y(this))return-b(this).m();let E=0,C=1;for(let A=0;A<this.g.length;A++){const D=this.i(A);E+=(D>=0?D:4294967296+D)*C,C*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(v(this))return"0";if(y(this))return"-"+b(this).toString(E);const C=u(Math.pow(E,6));var A=this;let D="";for(;;){const N=R(A,C).g;A=w(A,N.j(C));let j=((A.g.length>0?A.g[0]:A.h)>>>0).toString(E);if(A=N,v(A))return j+D;for(;j.length<6;)j="0"+j;D=j+D}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function v(E){if(E.h!=0)return!1;for(let C=0;C<E.g.length;C++)if(E.g[C]!=0)return!1;return!0}function y(E){return E.h==-1}t.l=function(E){return E=w(this,E),y(E)?-1:v(E)?0:1};function b(E){const C=E.g.length,A=[];for(let D=0;D<C;D++)A[D]=~E.g[D];return new a(A,~E.h).add(p)}t.abs=function(){return y(this)?b(this):this},t.add=function(E){const C=Math.max(this.g.length,E.g.length),A=[];let D=0;for(let N=0;N<=C;N++){let j=D+(this.i(N)&65535)+(E.i(N)&65535),P=(j>>>16)+(this.i(N)>>>16)+(E.i(N)>>>16);D=P>>>16,j&=65535,P&=65535,A[N]=P<<16|j}return new a(A,A[A.length-1]&-2147483648?-1:0)};function w(E,C){return E.add(b(C))}t.j=function(E){if(v(this)||v(E))return d;if(y(this))return y(E)?b(this).j(b(E)):b(b(this).j(E));if(y(E))return b(this.j(b(E)));if(this.l(f)<0&&E.l(f)<0)return u(this.m()*E.m());const C=this.g.length+E.g.length,A=[];for(var D=0;D<2*C;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(let N=0;N<E.g.length;N++){const j=this.i(D)>>>16,P=this.i(D)&65535,se=E.i(N)>>>16,ge=E.i(N)&65535;A[2*D+2*N]+=P*ge,S(A,2*D+2*N),A[2*D+2*N+1]+=j*ge,S(A,2*D+2*N+1),A[2*D+2*N+1]+=P*se,S(A,2*D+2*N+1),A[2*D+2*N+2]+=j*se,S(A,2*D+2*N+2)}for(E=0;E<C;E++)A[E]=A[2*E+1]<<16|A[2*E];for(E=C;E<2*C;E++)A[E]=0;return new a(A,0)};function S(E,C){for(;(E[C]&65535)!=E[C];)E[C+1]+=E[C]>>>16,E[C]&=65535,C++}function k(E,C){this.g=E,this.h=C}function R(E,C){if(v(C))throw Error("division by zero");if(v(E))return new k(d,d);if(y(E))return C=R(b(E),C),new k(b(C.g),b(C.h));if(y(C))return C=R(E,b(C)),new k(b(C.g),C.h);if(E.g.length>30){if(y(E)||y(C))throw Error("slowDivide_ only works with positive integers.");for(var A=p,D=C;D.l(E)<=0;)A=q(A),D=q(D);var N=K(A,1),j=K(D,1);for(D=K(D,2),A=K(A,2);!v(D);){var P=j.add(D);P.l(E)<=0&&(N=N.add(A),j=P),D=K(D,1),A=K(A,1)}return C=w(E,N.j(C)),new k(N,C)}for(N=d;E.l(C)>=0;){for(A=Math.max(1,Math.floor(E.m()/C.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),j=u(A),P=j.j(C);y(P)||P.l(E)>0;)A-=D,j=u(A),P=j.j(C);v(j)&&(j=p),N=N.add(j),E=w(E,P)}return new k(N,E)}t.B=function(E){return R(this,E).h},t.and=function(E){const C=Math.max(this.g.length,E.g.length),A=[];for(let D=0;D<C;D++)A[D]=this.i(D)&E.i(D);return new a(A,this.h&E.h)},t.or=function(E){const C=Math.max(this.g.length,E.g.length),A=[];for(let D=0;D<C;D++)A[D]=this.i(D)|E.i(D);return new a(A,this.h|E.h)},t.xor=function(E){const C=Math.max(this.g.length,E.g.length),A=[];for(let D=0;D<C;D++)A[D]=this.i(D)^E.i(D);return new a(A,this.h^E.h)};function q(E){const C=E.g.length+1,A=[];for(let D=0;D<C;D++)A[D]=E.i(D)<<1|E.i(D-1)>>>31;return new a(A,E.h)}function K(E,C){const A=C>>5;C%=32;const D=E.g.length-A,N=[];for(let j=0;j<D;j++)N[j]=C>0?E.i(j+A)>>>C|E.i(j+A+1)<<32-C:E.i(j+A);return new a(N,E.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,KN=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,Sc=a}).apply(typeof $b<"u"?$b:typeof self<"u"?self:typeof window<"u"?window:{});var Mp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GN,ld,YN,Nm,Fy,XN,QN,ZN;(function(){var t,e=Object.defineProperty;function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mp=="object"&&Mp];for(var I=0;I<g.length;++I){var M=g[I];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var n=r(this);function i(g,I){if(I)e:{var M=n;g=g.split(".");for(var Z=0;Z<g.length-1;Z++){var Fe=g[Z];if(!(Fe in M))break e;M=M[Fe]}g=g[g.length-1],Z=M[g],I=I(Z),I!=Z&&I!=null&&e(M,g,{configurable:!0,writable:!0,value:I})}}i("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(g){return g||function(I){var M=[],Z;for(Z in I)Object.prototype.hasOwnProperty.call(I,Z)&&M.push([Z,I[Z]]);return M}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(g){var I=typeof g;return I=="object"&&g!=null||I=="function"}function l(g,I,M){return g.call.apply(g.bind,arguments)}function u(g,I,M){return u=l,u.apply(null,arguments)}function h(g,I){var M=Array.prototype.slice.call(arguments,1);return function(){var Z=M.slice();return Z.push.apply(Z,arguments),g.apply(this,Z)}}function d(g,I){function M(){}M.prototype=I.prototype,g.Z=I.prototype,g.prototype=new M,g.prototype.constructor=g,g.Ob=function(Z,Fe,We){for(var bt=Array(arguments.length-2),mr=2;mr<arguments.length;mr++)bt[mr-2]=arguments[mr];return I.prototype[Fe].apply(Z,bt)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function f(g){const I=g.length;if(I>0){const M=Array(I);for(let Z=0;Z<I;Z++)M[Z]=g[Z];return M}return[]}function v(g,I){for(let Z=1;Z<arguments.length;Z++){const Fe=arguments[Z];var M=typeof Fe;if(M=M!="object"?M:Fe?Array.isArray(Fe)?"array":M:"null",M=="array"||M=="object"&&typeof Fe.length=="number"){M=g.length||0;const We=Fe.length||0;g.length=M+We;for(let bt=0;bt<We;bt++)g[M+bt]=Fe[bt]}else g.push(Fe)}}class y{constructor(I,M){this.i=I,this.j=M,this.h=0,this.g=null}get(){let I;return this.h>0?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function b(g){a.setTimeout(()=>{throw g},0)}function w(){var g=E;let I=null;return g.g&&(I=g.g,g.g=g.g.next,g.g||(g.h=null),I.next=null),I}class S{constructor(){this.h=this.g=null}add(I,M){const Z=k.get();Z.set(I,M),this.h?this.h.next=Z:this.g=Z,this.h=Z}}var k=new y(()=>new R,g=>g.reset());class R{constructor(){this.next=this.g=this.h=null}set(I,M){this.h=I,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let q,K=!1,E=new S,C=()=>{const g=Promise.resolve(void 0);q=()=>{g.then(A)}};function A(){for(var g;g=w();){try{g.h.call(g.g)}catch(M){b(M)}var I=k;I.j(g),I.h<100&&(I.h++,g.next=I.g,I.g=g)}K=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(g,I){this.type=g,this.g=this.target=I,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var g=!1,I=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const M=()=>{};a.addEventListener("test",M,I),a.removeEventListener("test",M,I)}catch{}return g}();function P(g){return/^[\s\xa0]*$/.test(g)}function se(g,I){N.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,I)}d(se,N),se.prototype.init=function(g,I){const M=this.type=g.type,Z=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=I,I=g.relatedTarget,I||(M=="mouseover"?I=g.fromElement:M=="mouseout"&&(I=g.toElement)),this.relatedTarget=I,Z?(this.clientX=Z.clientX!==void 0?Z.clientX:Z.pageX,this.clientY=Z.clientY!==void 0?Z.clientY:Z.pageY,this.screenX=Z.screenX||0,this.screenY=Z.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),ve=0;function ye(g,I,M,Z,Fe){this.listener=g,this.proxy=null,this.src=I,this.type=M,this.capture=!!Z,this.ha=Fe,this.key=++ve,this.da=this.fa=!1}function he(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function _e(g,I,M){for(const Z in g)I.call(M,g[Z],Z,g)}function Ue(g,I){for(const M in g)I.call(void 0,g[M],M,g)}function Ie(g){const I={};for(const M in g)I[M]=g[M];return I}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(g,I){let M,Z;for(let Fe=1;Fe<arguments.length;Fe++){Z=arguments[Fe];for(M in Z)g[M]=Z[M];for(let We=0;We<L.length;We++)M=L[We],Object.prototype.hasOwnProperty.call(Z,M)&&(g[M]=Z[M])}}function B(g){this.src=g,this.g={},this.h=0}B.prototype.add=function(g,I,M,Z,Fe){const We=g.toString();g=this.g[We],g||(g=this.g[We]=[],this.h++);const bt=J(g,I,Z,Fe);return bt>-1?(I=g[bt],M||(I.fa=!1)):(I=new ye(I,this.src,We,!!Z,Fe),I.fa=M,g.push(I)),I};function z(g,I){const M=I.type;if(M in g.g){var Z=g.g[M],Fe=Array.prototype.indexOf.call(Z,I,void 0),We;(We=Fe>=0)&&Array.prototype.splice.call(Z,Fe,1),We&&(he(I),g.g[M].length==0&&(delete g.g[M],g.h--))}}function J(g,I,M,Z){for(let Fe=0;Fe<g.length;++Fe){const We=g[Fe];if(!We.da&&We.listener==I&&We.capture==!!M&&We.ha==Z)return Fe}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),Se={};function Ae(g,I,M,Z,Fe){if(Array.isArray(I)){for(let We=0;We<I.length;We++)Ae(g,I[We],M,Z,Fe);return null}return M=me(M),g&&g[ge]?g.J(I,M,o(Z)?!!Z.capture:!1,Fe):Ne(g,I,M,!1,Z,Fe)}function Ne(g,I,M,Z,Fe,We){if(!I)throw Error("Invalid event type");const bt=o(Fe)?!!Fe.capture:!!Fe;let mr=ke(g);if(mr||(g[fe]=mr=new B(g)),M=mr.add(I,M,Z,bt,We),M.proxy)return M;if(Z=Xe(),M.proxy=Z,Z.src=g,Z.listener=M,g.addEventListener)j||(Fe=bt),Fe===void 0&&(Fe=!1),g.addEventListener(I.toString(),Z,Fe);else if(g.attachEvent)g.attachEvent(mt(I.toString()),Z);else if(g.addListener&&g.removeListener)g.addListener(Z);else throw Error("addEventListener and attachEvent are unavailable.");return M}function Xe(){function g(M){return I.call(g.src,g.listener,M)}const I=te;return g}function et(g,I,M,Z,Fe){if(Array.isArray(I))for(var We=0;We<I.length;We++)et(g,I[We],M,Z,Fe);else Z=o(Z)?!!Z.capture:!!Z,M=me(M),g&&g[ge]?(g=g.i,We=String(I).toString(),We in g.g&&(I=g.g[We],M=J(I,M,Z,Fe),M>-1&&(he(I[M]),Array.prototype.splice.call(I,M,1),I.length==0&&(delete g.g[We],g.h--)))):g&&(g=ke(g))&&(I=g.g[I.toString()],g=-1,I&&(g=J(I,M,Z,Fe)),(M=g>-1?I[g]:null)&&ot(M))}function ot(g){if(typeof g!="number"&&g&&!g.da){var I=g.src;if(I&&I[ge])z(I.i,g);else{var M=g.type,Z=g.proxy;I.removeEventListener?I.removeEventListener(M,Z,g.capture):I.detachEvent?I.detachEvent(mt(M),Z):I.addListener&&I.removeListener&&I.removeListener(Z),(M=ke(I))?(z(M,g),M.h==0&&(M.src=null,I[fe]=null)):he(g)}}}function mt(g){return g in Se?Se[g]:Se[g]="on"+g}function te(g,I){if(g.da)g=!0;else{I=new se(I,this);const M=g.listener,Z=g.ha||g.src;g.fa&&ot(g),g=M.call(Z,I)}return g}function ke(g){return g=g[fe],g instanceof B?g:null}var X="__closure_events_fn_"+(Math.random()*1e9>>>0);function me(g){return typeof g=="function"?g:(g[X]||(g[X]=function(I){return g.handleEvent(I)}),g[X])}function de(){D.call(this),this.i=new B(this),this.M=this,this.G=null}d(de,D),de.prototype[ge]=!0,de.prototype.removeEventListener=function(g,I,M,Z){et(this,g,I,M,Z)};function qe(g,I){var M,Z=g.G;if(Z)for(M=[];Z;Z=Z.G)M.push(Z);if(g=g.M,Z=I.type||I,typeof I=="string")I=new N(I,g);else if(I instanceof N)I.target=I.target||g;else{var Fe=I;I=new N(Z,g),O(I,Fe)}Fe=!0;let We,bt;if(M)for(bt=M.length-1;bt>=0;bt--)We=I.g=M[bt],Fe=Ge(We,Z,!0,I)&&Fe;if(We=I.g=g,Fe=Ge(We,Z,!0,I)&&Fe,Fe=Ge(We,Z,!1,I)&&Fe,M)for(bt=0;bt<M.length;bt++)We=I.g=M[bt],Fe=Ge(We,Z,!1,I)&&Fe}de.prototype.N=function(){if(de.Z.N.call(this),this.i){var g=this.i;for(const I in g.g){const M=g.g[I];for(let Z=0;Z<M.length;Z++)he(M[Z]);delete g.g[I],g.h--}}this.G=null},de.prototype.J=function(g,I,M,Z){return this.i.add(String(g),I,!1,M,Z)},de.prototype.K=function(g,I,M,Z){return this.i.add(String(g),I,!0,M,Z)};function Ge(g,I,M,Z){if(I=g.i.g[String(I)],!I)return!0;I=I.concat();let Fe=!0;for(let We=0;We<I.length;++We){const bt=I[We];if(bt&&!bt.da&&bt.capture==M){const mr=bt.listener,kn=bt.ha||bt.src;bt.fa&&z(g.i,bt),Fe=mr.call(kn,Z)!==!1&&Fe}}return Fe&&!Z.defaultPrevented}function st(g,I){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=u(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(I)>2147483647?-1:a.setTimeout(g,I||0)}function yt(g){g.g=st(()=>{g.g=null,g.i&&(g.i=!1,yt(g))},g.l);const I=g.h;g.h=null,g.m.apply(null,I)}class Ht extends D{constructor(I,M){super(),this.m=I,this.l=M,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:yt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function be(g){D.call(this),this.h=g,this.g={}}d(be,D);var tt=[];function ct(g){_e(g.g,function(I,M){this.g.hasOwnProperty(M)&&ot(I)},g),g.g={}}be.prototype.N=function(){be.Z.N.call(this),ct(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var St=a.JSON.stringify,jt=a.JSON.parse,Rt=class{stringify(g){return a.JSON.stringify(g,void 0)}parse(g){return a.JSON.parse(g,void 0)}};function Dt(){}function Hr(){}var hr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ke(){N.call(this,"d")}d(Ke,N);function Pt(){N.call(this,"c")}d(Pt,N);var pr={},Gt=null;function Ir(){return Gt=Gt||new de}pr.Ia="serverreachability";function Qt(g){N.call(this,pr.Ia,g)}d(Qt,N);function Jt(g){const I=Ir();qe(I,new Qt(I))}pr.STAT_EVENT="statevent";function Ur(g,I){N.call(this,pr.STAT_EVENT,g),this.stat=I}d(Ur,N);function Wt(g){const I=Ir();qe(I,new Ur(I,g))}pr.Ja="timingevent";function Ye(g,I){N.call(this,pr.Ja,g),this.size=I}d(Ye,N);function Tt(g,I){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){g()},I)}function sn(){this.g=!0}sn.prototype.ua=function(){this.g=!1};function br(g,I,M,Z,Fe,We){g.info(function(){if(g.g)if(We){var bt="",mr=We.split("&");for(let Mr=0;Mr<mr.length;Mr++){var kn=mr[Mr].split("=");if(kn.length>1){const Cn=kn[0];kn=kn[1];const Oi=Cn.split("_");bt=Oi.length>=2&&Oi[1]=="type"?bt+(Cn+"="+kn+"&"):bt+(Cn+"=redacted&")}}}else bt=null;else bt=We;return"XMLHTTP REQ ("+Z+") [attempt "+Fe+"]: "+I+`
`+M+`
`+bt})}function xr(g,I,M,Z,Fe,We,bt){g.info(function(){return"XMLHTTP RESP ("+Z+") [ attempt "+Fe+"]: "+I+`
`+M+`
`+We+" "+bt})}function jn(g,I,M,Z){g.info(function(){return"XMLHTTP TEXT ("+I+"): "+zn(g,M)+(Z?" "+Z:"")})}function Zt(g,I){g.info(function(){return"TIMEOUT: "+I})}sn.prototype.info=function(){};function zn(g,I){if(!g.g)return I;if(!I)return null;try{const We=JSON.parse(I);if(We){for(g=0;g<We.length;g++)if(Array.isArray(We[g])){var M=We[g];if(!(M.length<2)){var Z=M[1];if(Array.isArray(Z)&&!(Z.length<1)){var Fe=Z[0];if(Fe!="noop"&&Fe!="stop"&&Fe!="close")for(let bt=1;bt<Z.length;bt++)Z[bt]=""}}}}return St(We)}catch{return I}}var en={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},an={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nn;function Fr(){}d(Fr,Dt),Fr.prototype.g=function(){return new XMLHttpRequest},Nn=new Fr;function Qr(g){return encodeURIComponent(String(g))}function W(g){var I=1;g=g.split(":");const M=[];for(;I>0&&g.length;)M.push(g.shift()),I--;return g.length&&M.push(g.join(":")),M}function ie(g,I,M,Z){this.j=g,this.i=I,this.l=M,this.S=Z||1,this.V=new be(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ee}function ee(){this.i=null,this.g="",this.h=!1}var ne={},oe={};function le(g,I,M){g.M=1,g.A=Ia(Lr(I)),g.u=M,g.R=!0,De(g,null)}function De(g,I){g.F=Date.now(),Oe(g),g.B=Lr(g.A);var M=g.B,Z=g.S;Array.isArray(Z)||(Z=[String(Z)]),jl(M.i,"t",Z),g.C=0,M=g.j.L,g.h=new ee,g.g=Ft(g.j,M?I:null,!g.u),g.P>0&&(g.O=new Ht(u(g.Y,g,g.g),g.P)),I=g.V,M=g.g,Z=g.ba;var Fe="readystatechange";Array.isArray(Fe)||(Fe&&(tt[0]=Fe.toString()),Fe=tt);for(let We=0;We<Fe.length;We++){const bt=Ae(M,Fe[We],Z||I.handleEvent,!1,I.h||I);if(!bt)break;I.g[bt.key]=bt}I=g.J?Ie(g.J):{},g.u?(g.v||(g.v="POST"),I["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,I)):(g.v="GET",g.g.ea(g.B,g.v,null,I)),Jt(),br(g.i,g.v,g.B,g.l,g.S,g.u)}ie.prototype.ba=function(g){g=g.target;const I=this.O;I&&Ot(g)==3?I.j():this.Y(g)},ie.prototype.Y=function(g){try{if(g==this.g)e:{const mr=Ot(this.g),kn=this.g.ya(),Mr=this.g.ca();if(!(mr<3)&&(mr!=3||this.g&&(this.h.h||this.g.la()||ut(this.g)))){this.K||mr!=4||kn==7||(kn==8||Mr<=0?Jt(3):Jt(2)),gt(this);var I=this.g.ca();this.X=I;var M=Te(this);if(this.o=I==200,xr(this.i,this.v,this.B,this.l,this.S,mr,I),this.o){if(this.U&&!this.L){t:{if(this.g){var Z,Fe=this.g;if((Z=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Z)){var We=Z;break t}}We=null}if(g=We)jn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Et(this,g);else{this.o=!1,this.m=3,Wt(12),pt(this),kt(this);break e}}if(this.R){g=!0;let Cn;for(;!this.K&&this.C<M.length;)if(Cn=Me(this,M),Cn==oe){mr==4&&(this.m=4,Wt(14),g=!1),jn(this.i,this.l,null,"[Incomplete Response]");break}else if(Cn==ne){this.m=4,Wt(15),jn(this.i,this.l,M,"[Invalid Chunk]"),g=!1;break}else jn(this.i,this.l,Cn,null),Et(this,Cn);if(Re(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mr!=4||M.length!=0||this.h.h||(this.m=1,Wt(16),g=!1),this.o=this.o&&g,!g)jn(this.i,this.l,M,"[Invalid Chunked Response]"),pt(this),kt(this);else if(M.length>0&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.aa&&!bt.P&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),ti(bt),bt.P=!0,Wt(11))}}else jn(this.i,this.l,M,null),Et(this,M);mr==4&&pt(this),this.o&&!this.K&&(mr==4?ae(this.j,this):(this.o=!1,Oe(this)))}else sr(this.g),I==400&&M.indexOf("Unknown SID")>0?(this.m=3,Wt(12)):(this.m=0,Wt(13)),pt(this),kt(this)}}}catch{}finally{}};function Te(g){if(!Re(g))return g.g.la();const I=ut(g.g);if(I==="")return"";let M="";const Z=I.length,Fe=Ot(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return pt(g),kt(g),"";g.h.i=new a.TextDecoder}for(let We=0;We<Z;We++)g.h.h=!0,M+=g.h.i.decode(I[We],{stream:!(Fe&&We==Z-1)});return I.length=0,g.h.g+=M,g.C=0,g.h.g}function Re(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Me(g,I){var M=g.C,Z=I.indexOf(`
`,M);return Z==-1?oe:(M=Number(I.substring(M,Z)),isNaN(M)?ne:(Z+=1,Z+M>I.length?oe:(I=I.slice(Z,Z+M),g.C=Z+M,I)))}ie.prototype.cancel=function(){this.K=!0,pt(this)};function Oe(g){g.T=Date.now()+g.H,ht(g,g.H)}function ht(g,I){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Tt(u(g.aa,g),I)}function gt(g){g.D&&(a.clearTimeout(g.D),g.D=null)}ie.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Zt(this.i,this.B),this.M!=2&&(Jt(),Wt(17)),pt(this),this.m=2,kt(this)):ht(this,this.T-g)};function kt(g){g.j.I==0||g.K||ae(g.j,g)}function pt(g){gt(g);var I=g.O;I&&typeof I.dispose=="function"&&I.dispose(),g.O=null,ct(g.V),g.g&&(I=g.g,g.g=null,I.abort(),I.dispose())}function Et(g,I){try{var M=g.j;if(M.I!=0&&(M.g==g||Hn(M.h,g))){if(!g.L&&Hn(M.h,g)&&M.I==3){try{var Z=M.Ba.g.parse(I)}catch{Z=null}if(Array.isArray(Z)&&Z.length==3){var Fe=Z;if(Fe[0]==0){e:if(!M.v){if(M.g)if(M.g.F+3e3<g.F)U(M),jr(M);else break e;ar(M),Wt(18)}}else M.xa=Fe[1],0<M.xa-M.K&&Fe[2]<37500&&M.F&&M.A==0&&!M.C&&(M.C=Tt(u(M.Va,M),6e3));tn(M.h)<=1&&M.ta&&(M.ta=void 0)}else Pe(M,11)}else if((g.L||M.g==g)&&U(M),!P(I))for(Fe=M.Ba.g.parse(I),I=0;I<Fe.length;I++){let Mr=Fe[I];const Cn=Mr[0];if(!(Cn<=M.K))if(M.K=Cn,Mr=Mr[1],M.I==2)if(Mr[0]=="c"){M.M=Mr[1],M.ba=Mr[2];const Oi=Mr[3];Oi!=null&&(M.ka=Oi,M.j.info("VER="+M.ka));const fs=Mr[4];fs!=null&&(M.za=fs,M.j.info("SVER="+M.za));const In=Mr[5];In!=null&&typeof In=="number"&&In>0&&(Z=1.5*In,M.O=Z,M.j.info("backChannelRequestTimeoutMs_="+Z)),Z=M;const ds=g.g;if(ds){const Fa=ds.g?ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fa){var We=Z.h;We.g||Fa.indexOf("spdy")==-1&&Fa.indexOf("quic")==-1&&Fa.indexOf("h2")==-1||(We.j=We.l,We.g=new Set,We.h&&(li(We,We.h),We.h=null))}if(Z.G){const Qo=ds.g?ds.g.getResponseHeader("X-HTTP-Session-Id"):null;Qo&&(Z.wa=Qo,Dr(Z.J,Z.G,Qo))}}M.I=3,M.l&&M.l.ra(),M.aa&&(M.T=Date.now()-g.F,M.j.info("Handshake RTT: "+M.T+"ms")),Z=M;var bt=g;if(Z.na=$e(Z,Z.L?Z.ba:null,Z.W),bt.L){ci(Z.h,bt);var mr=bt,kn=Z.O;kn&&(mr.H=kn),mr.D&&(gt(mr),Oe(mr)),Z.g=bt}else ei(Z);M.i.length>0&&ks(M)}else Mr[0]!="stop"&&Mr[0]!="close"||Pe(M,7);else M.I==3&&(Mr[0]=="stop"||Mr[0]=="close"?Mr[0]=="stop"?Pe(M,7):Sr(M):Mr[0]!="noop"&&M.l&&M.l.qa(Mr),M.A=0)}}Jt(4)}catch{}}var tr=class{constructor(g,I){this.g=g,this.map=I}};function Nr(g){this.l=g||10,a.PerformanceNavigationTiming?(g=a.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yr(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function tn(g){return g.h?1:g.g?g.g.size:0}function Hn(g,I){return g.h?g.h==I:g.g?g.g.has(I):!1}function li(g,I){g.g?g.g.add(I):g.h=I}function ci(g,I){g.h&&g.h==I?g.h=null:g.g&&g.g.has(I)&&g.g.delete(I)}Nr.prototype.cancel=function(){if(this.i=Xn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Xn(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let I=g.i;for(const M of g.g.values())I=I.concat(M.G);return I}return f(g.i)}var on=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tn(g,I){if(g){g=g.split("&");for(let M=0;M<g.length;M++){const Z=g[M].indexOf("=");let Fe,We=null;Z>=0?(Fe=g[M].substring(0,Z),We=g[M].substring(Z+1)):Fe=g[M],I(Fe,We?decodeURIComponent(We.replace(/\+/g," ")):"")}}}function Gr(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let I;g instanceof Gr?(this.l=g.l,_r(this,g.j),this.o=g.o,this.g=g.g,qn(this,g.u),this.h=g.h,yn(this,Ja(g.i)),this.m=g.m):g&&(I=String(g).match(on))?(this.l=!1,_r(this,I[1]||"",!0),this.o=Qn(I[2]||""),this.g=Qn(I[3]||"",!0),qn(this,I[4]),this.h=Qn(I[5]||"",!0),yn(this,I[6]||"",!0),this.m=Qn(I[7]||"")):(this.l=!1,this.i=new La(null,this.l))}Gr.prototype.toString=function(){const g=[];var I=this.j;I&&g.push(_n(I,Eo,!0),":");var M=this.g;return(M||I=="file")&&(g.push("//"),(I=this.o)&&g.push(_n(I,Eo,!0),"@"),g.push(Qr(M).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.u,M!=null&&g.push(":",String(M))),(M=this.h)&&(this.g&&M.charAt(0)!="/"&&g.push("/"),g.push(_n(M,M.charAt(0)=="/"?Za:$c,!0))),(M=this.i.toString())&&g.push("?",M),(M=this.m)&&g.push("#",_n(M,Zn)),g.join("")},Gr.prototype.resolve=function(g){const I=Lr(this);let M=!!g.j;M?_r(I,g.j):M=!!g.o,M?I.o=g.o:M=!!g.g,M?I.g=g.g:M=g.u!=null;var Z=g.h;if(M)qn(I,g.u);else if(M=!!g.h){if(Z.charAt(0)!="/")if(this.g&&!this.h)Z="/"+Z;else{var Fe=I.h.lastIndexOf("/");Fe!=-1&&(Z=I.h.slice(0,Fe+1)+Z)}if(Fe=Z,Fe==".."||Fe==".")Z="";else if(Fe.indexOf("./")!=-1||Fe.indexOf("/.")!=-1){Z=Fe.lastIndexOf("/",0)==0,Fe=Fe.split("/");const We=[];for(let bt=0;bt<Fe.length;){const mr=Fe[bt++];mr=="."?Z&&bt==Fe.length&&We.push(""):mr==".."?((We.length>1||We.length==1&&We[0]!="")&&We.pop(),Z&&bt==Fe.length&&We.push("")):(We.push(mr),Z=!0)}Z=We.join("/")}else Z=Fe}return M?I.h=Z:M=g.i.toString()!=="",M?yn(I,Ja(g.i)):M=!!g.m,M&&(I.m=g.m),I};function Lr(g){return new Gr(g)}function _r(g,I,M){g.j=M?Qn(I,!0):I,g.j&&(g.j=g.j.replace(/:$/,""))}function qn(g,I){if(I){if(I=Number(I),isNaN(I)||I<0)throw Error("Bad port number "+I);g.u=I}else g.u=null}function yn(g,I,M){I instanceof La?(g.i=I,us(g.i,g.l)):(M||(I=_n(I,zs)),g.i=new La(I,g.l))}function Dr(g,I,M){g.i.set(I,M)}function Ia(g){return Dr(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Qn(g,I){return g?I?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function _n(g,I,M){return typeof g=="string"?(g=encodeURI(g).replace(I,Vs),M&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Vs(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Eo=/[#\/\?@]/g,$c=/[#\?:]/g,Za=/[#\?]/g,zs=/[#\?@]/g,Zn=/#/g;function La(g,I){this.h=this.g=null,this.i=g||null,this.j=!!I}function cs(g){g.g||(g.g=new Map,g.h=0,g.i&&Tn(g.i,function(I,M){g.add(decodeURIComponent(I.replace(/\+/g," ")),M)}))}t=La.prototype,t.add=function(g,I){cs(this),this.i=null,g=Hs(this,g);let M=this.g.get(g);return M||this.g.set(g,M=[]),M.push(I),this.h+=1,this};function Pa(g,I){cs(g),I=Hs(g,I),g.g.has(I)&&(g.i=null,g.h-=g.g.get(I).length,g.g.delete(I))}function Ll(g,I){return cs(g),I=Hs(g,I),g.g.has(I)}t.forEach=function(g,I){cs(this),this.g.forEach(function(M,Z){M.forEach(function(Fe){g.call(I,Fe,Z,this)},this)},this)};function Pl(g,I){cs(g);let M=[];if(typeof I=="string")Ll(g,I)&&(M=M.concat(g.g.get(Hs(g,I))));else for(g=Array.from(g.g.values()),I=0;I<g.length;I++)M=M.concat(g[I]);return M}t.set=function(g,I){return cs(this),this.i=null,g=Hs(this,g),Ll(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[I]),this.h+=1,this},t.get=function(g,I){return g?(g=Pl(this,g),g.length>0?String(g[0]):I):I};function jl(g,I,M){Pa(g,I),M.length>0&&(g.i=null,g.g.set(Hs(g,I),f(M)),g.h+=M.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],I=Array.from(this.g.keys());for(let Z=0;Z<I.length;Z++){var M=I[Z];const Fe=Qr(M);M=Pl(this,M);for(let We=0;We<M.length;We++){let bt=Fe;M[We]!==""&&(bt+="="+Qr(M[We])),g.push(bt)}}return this.i=g.join("&")};function Ja(g){const I=new La;return I.i=g.i,g.g&&(I.g=new Map(g.g),I.h=g.h),I}function Hs(g,I){return I=String(I),g.j&&(I=I.toLowerCase()),I}function us(g,I){I&&!g.j&&(cs(g),g.i=null,g.g.forEach(function(M,Z){const Fe=Z.toLowerCase();Z!=Fe&&(Pa(this,Z),jl(this,Fe,M))},g)),g.j=I}function Rl(g,I){const M=new sn;if(a.Image){const Z=new Image;Z.onload=h(Ki,M,"TestLoadImage: loaded",!0,I,Z),Z.onerror=h(Ki,M,"TestLoadImage: error",!1,I,Z),Z.onabort=h(Ki,M,"TestLoadImage: abort",!1,I,Z),Z.ontimeout=h(Ki,M,"TestLoadImage: timeout",!1,I,Z),a.setTimeout(function(){Z.ontimeout&&Z.ontimeout()},1e4),Z.src=g}else I(!1)}function ja(g,I){const M=new sn,Z=new AbortController,Fe=setTimeout(()=>{Z.abort(),Ki(M,"TestPingServer: timeout",!1,I)},1e4);fetch(g,{signal:Z.signal}).then(We=>{clearTimeout(Fe),We.ok?Ki(M,"TestPingServer: ok",!0,I):Ki(M,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(Fe),Ki(M,"TestPingServer: error",!1,I)})}function Ki(g,I,M,Z,Fe){try{Fe&&(Fe.onload=null,Fe.onerror=null,Fe.onabort=null,Fe.ontimeout=null),Z(M)}catch{}}function Fl(){this.g=new Rt}function cr(g){this.i=g.Sb||null,this.h=g.ab||!1}d(cr,Dt),cr.prototype.g=function(){return new eo(this.i,this.h)};function eo(g,I){de.call(this),this.H=g,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(eo,de),t=eo.prototype,t.open=function(g,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=I,this.readyState=1,V(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const I={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(I.body=g),(this.H||a).fetch(new Request(this.D,I)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ra(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,V(this)),this.g&&(this.readyState=3,V(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var I=g.value?g.value:new Uint8Array(0);(I=this.B.decode(I,{stream:!g.done}))&&(this.response=this.responseText+=I)}g.done?Ra(this):V(this),this.readyState==3&&Xo(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,Ra(this))},t.Na=function(g){this.g&&(this.response=g,Ra(this))},t.ga=function(){this.g&&Ra(this)};function Ra(g){g.readyState=4,g.l=null,g.j=null,g.B=null,V(g)}t.setRequestHeader=function(g,I){this.A.append(g,I)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],I=this.h.entries();for(var M=I.next();!M.done;)M=M.value,g.push(M[0]+": "+M[1]),M=I.next();return g.join(`\r
`)};function V(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function pe(g){let I="";return _e(g,function(M,Z){I+=Z,I+=":",I+=M,I+=`\r
`}),I}function je(g,I,M){e:{for(Z in M){var Z=!1;break e}Z=!0}Z||(M=pe(M),typeof g=="string"?M!=null&&Qr(M):Dr(g,I,M))}function Ve(g){de.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Ve,de);var it=/^https?$/i,Qe=["POST","PUT"];t=Ve.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,I,M,Z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);I=I?I.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nn.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(I,String(g),!0),this.B=!1}catch(We){er(this,We);return}if(g=M||"",M=new Map(this.headers),Z)if(Object.getPrototypeOf(Z)===Object.prototype)for(var Fe in Z)M.set(Fe,Z[Fe]);else if(typeof Z.keys=="function"&&typeof Z.get=="function")for(const We of Z.keys())M.set(We,Z.get(We));else throw Error("Unknown input type for opt_headers: "+String(Z));Z=Array.from(M.keys()).find(We=>We.toLowerCase()=="content-type"),Fe=a.FormData&&g instanceof a.FormData,!(Array.prototype.indexOf.call(Qe,I,void 0)>=0)||Z||Fe||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[We,bt]of M)this.g.setRequestHeader(We,bt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(We){er(this,We)}};function er(g,I){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=I,g.o=5,Mt(g),ur(g)}function Mt(g){g.A||(g.A=!0,qe(g,"complete"),qe(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,qe(this,"complete"),qe(this,"abort"),ur(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ur(this,!0)),Ve.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?At(this):this.Xa())},t.Xa=function(){At(this)};function At(g){if(g.h&&typeof s<"u"){if(g.v&&Ot(g)==4)setTimeout(g.Ca.bind(g),0);else if(qe(g,"readystatechange"),Ot(g)==4){g.h=!1;try{const We=g.ca();e:switch(We){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var M;if(!(M=I)){var Z;if(Z=We===0){let bt=String(g.D).match(on)[1]||null;!bt&&a.self&&a.self.location&&(bt=a.self.location.protocol.slice(0,-1)),Z=!it.test(bt?bt.toLowerCase():"")}M=Z}if(M)qe(g,"complete"),qe(g,"success");else{g.o=6;try{var Fe=Ot(g)>2?g.g.statusText:""}catch{Fe=""}g.l=Fe+" ["+g.ca()+"]",Mt(g)}}finally{ur(g)}}}}function ur(g,I){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const M=g.g;g.g=null,I||qe(g,"ready");try{M.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ot(g){return g.g?g.g.readyState:0}t.ca=function(){try{return Ot(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var I=this.g.responseText;return g&&I.indexOf(g)==0&&(I=I.substring(g.length)),jt(I)}};function ut(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function sr(g){const I={};g=(g.g&&Ot(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let Z=0;Z<g.length;Z++){if(P(g[Z]))continue;var M=W(g[Z]);const Fe=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const We=I[Fe]||[];I[Fe]=We,We.push(M)}Ue(I,function(Z){return Z.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wt(g,I,M){return M&&M.internalChannelParams&&M.internalChannelParams[g]||I}function Pr(g){this.za=0,this.i=[],this.j=new sn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wt("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wt("baseRetryDelayMs",5e3,g),this.Za=wt("retryDelaySeedMs",1e4,g),this.Ta=wt("forwardChannelMaxRetries",2,g),this.va=wt("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Nr(g&&g.concurrentRequestLimit),this.Ba=new Fl,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Pr.prototype,t.ka=8,t.I=1,t.connect=function(g,I,M,Z){Wt(0),this.W=g,this.H=I||{},M&&Z!==void 0&&(this.H.OSID=M,this.H.OAID=Z),this.F=this.X,this.J=$e(this,null,this.W),ks(this)};function Sr(g){if(bn(g),g.I==3){var I=g.V++,M=Lr(g.J);if(Dr(M,"SID",g.M),Dr(M,"RID",I),Dr(M,"TYPE","terminate"),Jn(g,M),I=new ie(g,g.j,I),I.M=2,I.A=Ia(Lr(M)),M=!1,a.navigator&&a.navigator.sendBeacon)try{M=a.navigator.sendBeacon(I.A.toString(),"")}catch{}!M&&a.Image&&(new Image().src=I.A,M=!0),M||(I.g=Ft(I.j,null),I.g.ea(I.A)),I.F=Date.now(),Oe(I)}Ee(g)}function jr(g){g.g&&(ti(g),g.g.cancel(),g.g=null)}function bn(g){jr(g),g.v&&(a.clearTimeout(g.v),g.v=null),U(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&a.clearTimeout(g.m),g.m=null)}function ks(g){if(!yr(g.h)&&!g.m){g.m=!0;var I=g.Ea;q||C(),K||(q(),K=!0),E.add(I,g),g.D=0}}function Tr(g,I){return tn(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=I.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Tt(u(g.Ea,g,I),xe(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const Fe=new ie(this,this.j,g);let We=this.o;if(this.U&&(We?(We=Ie(We),O(We,this.U)):We=this.U),this.u!==null||this.R||(Fe.J=We,We=null),this.S)e:{for(var I=0,M=0;M<this.i.length;M++){t:{var Z=this.i[M];if("__data__"in Z.map&&(Z=Z.map.__data__,typeof Z=="string")){Z=Z.length;break t}Z=void 0}if(Z===void 0)break;if(I+=Z,I>4096){I=M;break e}if(I===4096||M===this.i.length-1){I=M+1;break e}}I=1e3}else I=1e3;I=hs(this,Fe,I),M=Lr(this.J),Dr(M,"RID",g),Dr(M,"CVER",22),this.G&&Dr(M,"X-HTTP-Session-Id",this.G),Jn(this,M),We&&(this.R?I="headers="+Qr(pe(We))+"&"+I:this.u&&je(M,this.u,We)),li(this.h,Fe),this.Ra&&Dr(M,"TYPE","init"),this.S?(Dr(M,"$req",I),Dr(M,"SID","null"),Fe.U=!0,le(Fe,M,null)):le(Fe,M,I),this.I=2}}else this.I==3&&(g?ra(this,g):this.i.length==0||yr(this.h)||ra(this))};function ra(g,I){var M;I?M=I.l:M=g.V++;const Z=Lr(g.J);Dr(Z,"SID",g.M),Dr(Z,"RID",M),Dr(Z,"AID",g.K),Jn(g,Z),g.u&&g.o&&je(Z,g.u,g.o),M=new ie(g,g.j,M,g.D+1),g.u===null&&(M.J=g.o),I&&(g.i=I.G.concat(g.i)),I=hs(g,M,1e3),M.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),li(g.h,M),le(M,Z,I)}function Jn(g,I){g.H&&_e(g.H,function(M,Z){Dr(I,Z,M)}),g.l&&_e({},function(M,Z){Dr(I,Z,M)})}function hs(g,I,M){M=Math.min(g.i.length,M);const Z=g.l?u(g.l.Ka,g.l,g):null;e:{var Fe=g.i;let mr=-1;for(;;){const kn=["count="+M];mr==-1?M>0?(mr=Fe[0].g,kn.push("ofs="+mr)):mr=0:kn.push("ofs="+mr);let Mr=!0;for(let Cn=0;Cn<M;Cn++){var We=Fe[Cn].g;const Oi=Fe[Cn].map;if(We-=mr,We<0)mr=Math.max(0,Fe[Cn].g-100),Mr=!1;else try{We="req"+We+"_"||"";try{var bt=Oi instanceof Map?Oi:Object.entries(Oi);for(const[fs,In]of bt){let ds=In;o(In)&&(ds=St(In)),kn.push(We+fs+"="+encodeURIComponent(ds))}}catch(fs){throw kn.push(We+"type="+encodeURIComponent("_badmap")),fs}}catch{Z&&Z(Oi)}}if(Mr){bt=kn.join("&");break e}}bt=void 0}return g=g.i.splice(0,M),I.G=g,bt}function ei(g){if(!g.g&&!g.v){g.Y=1;var I=g.Da;q||C(),K||(q(),K=!0),E.add(I,g),g.A=0}}function ar(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Tt(u(g.Da,g),xe(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Tt(u(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Wt(10),jr(this),_(this))};function ti(g){g.B!=null&&(a.clearTimeout(g.B),g.B=null)}function _(g){g.g=new ie(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var I=Lr(g.na);Dr(I,"RID","rpc"),Dr(I,"SID",g.M),Dr(I,"AID",g.K),Dr(I,"CI",g.F?"0":"1"),!g.F&&g.ia&&Dr(I,"TO",g.ia),Dr(I,"TYPE","xmlhttp"),Jn(g,I),g.u&&g.o&&je(I,g.u,g.o),g.O&&(g.g.H=g.O);var M=g.g;g=g.ba,M.M=1,M.A=Ia(Lr(I)),M.u=null,M.R=!0,De(M,g)}t.Va=function(){this.C!=null&&(this.C=null,jr(this),ar(this),Wt(19))};function U(g){g.C!=null&&(a.clearTimeout(g.C),g.C=null)}function ae(g,I){var M=null;if(g.g==I){U(g),ti(g),g.g=null;var Z=2}else if(Hn(g.h,I))M=I.G,ci(g.h,I),Z=1;else return;if(g.I!=0){if(I.o)if(Z==1){M=I.u?I.u.length:0,I=Date.now()-I.F;var Fe=g.D;Z=Ir(),qe(Z,new Ye(Z,M)),ks(g)}else ei(g);else if(Fe=I.m,Fe==3||Fe==0&&I.X>0||!(Z==1&&Tr(g,I)||Z==2&&ar(g)))switch(M&&M.length>0&&(I=g.h,I.i=I.i.concat(M)),Fe){case 1:Pe(g,5);break;case 4:Pe(g,10);break;case 3:Pe(g,6);break;default:Pe(g,2)}}}function xe(g,I){let M=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(M*=2),M*I}function Pe(g,I){if(g.j.info("Error code "+I),I==2){var M=u(g.bb,g),Z=g.Ua;const Fe=!Z;Z=new Gr(Z||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_r(Z,"https"),Ia(Z),Fe?Rl(Z.toString(),M):ja(Z.toString(),M)}else Wt(2);g.I=0,g.l&&g.l.pa(I),Ee(g),bn(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function Ee(g){if(g.I=0,g.ja=[],g.l){const I=Xn(g.h);(I.length!=0||g.i.length!=0)&&(v(g.ja,I),v(g.ja,g.i),g.h.i.length=0,f(g.i),g.i.length=0),g.l.oa()}}function $e(g,I,M){var Z=M instanceof Gr?Lr(M):new Gr(M);if(Z.g!="")I&&(Z.g=I+"."+Z.g),qn(Z,Z.u);else{var Fe=a.location;Z=Fe.protocol,I=I?I+"."+Fe.hostname:Fe.hostname,Fe=+Fe.port;const We=new Gr(null);Z&&_r(We,Z),I&&(We.g=I),Fe&&qn(We,Fe),M&&(We.h=M),Z=We}return M=g.G,I=g.wa,M&&I&&Dr(Z,M,I),Dr(Z,"VER",g.ka),Jn(g,Z),Z}function Ft(g,I,M){if(I&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return I=g.Aa&&!g.ma?new Ve(new cr({ab:M})):new Ve(g.ma),I.Fa(g.L),I}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bt(){}t=Bt.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function _t(){}_t.prototype.g=function(g,I){return new qt(g,I)};function qt(g,I){de.call(this),this.g=new Pr(I),this.l=g,this.h=I&&I.messageUrlParams||null,g=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(g?g["X-WebChannel-Content-Type"]=I.messageContentType:g={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.sa&&(g?g["X-WebChannel-Client-Profile"]=I.sa:g={"X-WebChannel-Client-Profile":I.sa}),this.g.U=g,(g=I&&I.Qb)&&!P(g)&&(this.g.u=g),this.A=I&&I.supportsCrossDomainXhr||!1,this.v=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!P(I)&&(this.g.G=I,g=this.h,g!==null&&I in g&&(g=this.h,I in g&&delete g[I])),this.j=new ln(this)}d(qt,de),qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Sr(this.g)},qt.prototype.o=function(g){var I=this.g;if(typeof g=="string"){var M={};M.__data__=g,g=M}else this.v&&(M={},M.__data__=St(g),g=M);I.i.push(new tr(I.Ya++,g)),I.I==3&&ks(I)},qt.prototype.N=function(){this.g.l=null,delete this.j,Sr(this.g),delete this.g,qt.Z.N.call(this)};function kr(g){Ke.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var I=g.__sm__;if(I){e:{for(const M in I){g=M;break e}g=void 0}(this.i=g)&&(g=this.i,I=I!==null&&g in I?I[g]:void 0),this.data=I}else this.data=g}d(kr,Ke);function rn(){Pt.call(this),this.status=1}d(rn,Pt);function ln(g){this.g=g}d(ln,Bt),ln.prototype.ra=function(){qe(this.g,"a")},ln.prototype.qa=function(g){qe(this.g,new kr(g))},ln.prototype.pa=function(g){qe(this.g,new rn)},ln.prototype.oa=function(){qe(this.g,"b")},_t.prototype.createWebChannel=_t.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,ZN=function(){return new _t},QN=function(){return Ir()},XN=pr,Fy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},en.NO_ERROR=0,en.TIMEOUT=8,en.HTTP_ERROR=6,Nm=en,an.COMPLETE="complete",YN=an,Hr.EventType=hr,hr.OPEN="a",hr.CLOSE="b",hr.ERROR="c",hr.MESSAGE="d",de.prototype.listen=de.prototype.J,ld=Hr,Ve.prototype.listenOnce=Ve.prototype.K,Ve.prototype.getLastError=Ve.prototype.Ha,Ve.prototype.getLastErrorCode=Ve.prototype.ya,Ve.prototype.getStatus=Ve.prototype.ca,Ve.prototype.getResponseJson=Ve.prototype.La,Ve.prototype.getResponseText=Ve.prototype.la,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Fa,GN=Ve}).apply(typeof Mp<"u"?Mp:typeof self<"u"?self:typeof window<"u"?window:{});const Wb="@firebase/firestore",Kb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bs.UNAUTHENTICATED=new bs(null),bs.GOOGLE_CREDENTIALS=new bs("google-credentials-uid"),bs.FIRST_PARTY=new bs("first-party-uid"),bs.MOCK_USER=new bs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pf="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new VN("@firebase/firestore");function eh(){return bu.logLevel}function Ut(t,...e){if(bu.logLevel<=Wr.DEBUG){const r=e.map(v5);bu.debug(`Firestore (${pf}): ${t}`,...r)}}function Sl(t,...e){if(bu.logLevel<=Wr.ERROR){const r=e.map(v5);bu.error(`Firestore (${pf}): ${t}`,...r)}}function tf(t,...e){if(bu.logLevel<=Wr.WARN){const r=e.map(v5);bu.warn(`Firestore (${pf}): ${t}`,...r)}}function v5(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,JN(t,n,r)}function JN(t,e,r){let n=`FIRESTORE (${pf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Sl(n),new Error(n)}function Kr(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||JN(e,i,n)}function gr(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class It extends df{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class B7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(bs.UNAUTHENTICATED))}shutdown(){}}class U7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class V7{constructor(e){this.t=e,this.currentUser=bs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Kr(this.o===void 0,42304);let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new zo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new zo,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{Ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zo)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Kr(typeof n.accessToken=="string",31837,{l:n}),new e6(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Kr(e===null||typeof e=="string",2055,{h:e}),new bs(e)}}class z7{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=bs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H7{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new z7(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(bs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Gb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q7{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,b7(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Kr(this.o===void 0,3512);const n=s=>{s.error!=null&&Ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Ut("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{Ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Gb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Kr(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new Gb(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=$7(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=e.charAt(i[s]%62))}return n}}function Or(t,e){return t<e?-1:t>e?1:0}function Dy(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t.charAt(n),s=e.charAt(n);if(i!==s)return q2(i)===q2(s)?Or(i,s):q2(i)?1:-1}return Or(t.length,e.length)}const W7=55296,K7=57343;function q2(t){const e=t.charCodeAt(0);return e>=W7&&e<=K7}function rf(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="__name__";class Fo{constructor(e,r,n){r===void 0?r=0:r>e.length&&lr(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&lr(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Fo.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Fo?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const s=Fo.compareSegments(e.get(i),r.get(i));if(s!==0)return s}return Or(e.length,r.length)}static compareSegments(e,r){const n=Fo.isNumericId(e),i=Fo.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?Fo.extractNumericId(e).compare(Fo.extractNumericId(r)):Dy(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sc.fromString(e.substring(4,e.length-2))}}class wn extends Fo{construct(e,r,n){return new wn(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new It(nt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new wn(r)}static emptyPath(){return new wn([])}}const G7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ts extends Fo{construct(e,r,n){return new ts(e,r,n)}static isValidIdentifier(e){return G7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ts.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yb}static keyField(){return new ts([Yb])}static fromServerFormat(e){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new It(nt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new It(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new It(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new It(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ts(r)}static emptyPath(){return new ts([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.path=e}static fromPath(e){return new or(wn.fromString(e))}static fromName(e){return new or(wn.fromString(e).popFirst(5))}static empty(){return new or(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return wn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new or(new wn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6(t,e,r){if(!r)throw new It(nt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Y7(t,e,r,n){if(e===!0&&n===!0)throw new It(nt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Xb(t){if(!or.isDocumentKey(t))throw new It(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qb(t){if(or.isDocumentKey(t))throw new It(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function r6(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function yg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":lr(12329,{type:typeof t})}function As(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new It(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=yg(t);throw new It(nt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function X7(t,e){if(e<=0)throw new It(nt.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,e){const r={typeString:t};return e&&(r.value=e),r}function R0(t,e){if(!r6(t))throw new It(nt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const i=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const a=t[n];if(i&&typeof a!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new It(nt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=-62135596800,Jb=1e6;class Dn{static now(){return Dn.fromMillis(Date.now())}static fromDate(e){return Dn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*Jb);return new Dn(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new It(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new It(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Zb)throw new It(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jb}_compareTo(e){return this.seconds===e.seconds?Or(this.nanoseconds,e.nanoseconds):Or(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(R0(e,Dn._jsonSchema))return new Dn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Zb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dn._jsonSchemaVersion="firestore/timestamp/1.0",Dn._jsonSchema={type:Ti("string",Dn._jsonSchemaVersion),seconds:Ti("number"),nanoseconds:Ti("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{static fromTimestamp(e){return new fr(e)}static min(){return new fr(new Dn(0,0))}static max(){return new fr(new Dn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=-1;function Q7(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=fr.fromTimestamp(n===1e9?new Dn(r+1,0):new Dn(r,n));return new kc(i,or.empty(),e)}function Z7(t){return new kc(t.readTime,t.key,o0)}class kc{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new kc(fr.min(),or.empty(),o0)}static max(){return new kc(fr.max(),or.empty(),o0)}}function J7(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=or.comparator(t.documentKey,e.documentKey),r!==0?r:Or(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mf(t){if(t.code!==nt.FAILED_PRECONDITION||t.message!==eR)throw t;Ut("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&lr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new lt((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof lt?r:lt.resolve(r)}catch(r){return lt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):lt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):lt.reject(r)}static resolve(e){return new lt((r,n)=>{r(e)})}static reject(e){return new lt((r,n)=>{n(e)})}static waitFor(e){return new lt((r,n)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&r()},l=>n(l))}),a=!0,s===i&&r()})}static or(e){let r=lt.resolve(!1);for(const n of e)r=r.next(i=>i?lt.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,s)=>{n.push(r.call(this,i,s))}),this.waitFor(n)}static mapArray(e,r){return new lt((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;r(e[u]).next(h=>{a[u]=h,++o,o===s&&n(a)},h=>i(h))}})}static doWhile(e,r){return new lt((n,i)=>{const s=()=>{e()===!0?r().next(()=>{s()},i):n()};s()})}}function rR(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function gf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vg.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=-1;function F0(t){return t==null}function p1(t){return t===0&&1/t==-1/0}function nR(t){return typeof t=="number"&&Number.isInteger(t)&&!p1(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6="";function iR(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=e4(e)),e=sR(t.get(r),e);return e4(e)}function sR(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const s=t.charAt(i);switch(s){case"\0":r+="";break;case n6:r+="";break;default:r+=s}}return r}function e4(t){return t+n6+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function zc(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function i6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,r){this.comparator=e,this.root=r||es.EMPTY}insert(e,r){return new Yn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,es.BLACK,null,null))}remove(e){return new Yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,es.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Op(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Op(this.root,e,this.comparator,!1)}getReverseIterator(){return new Op(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Op(this.root,e,this.comparator,!0)}}class Op{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class es{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n??es.RED,this.left=i??es.EMPTY,this.right=s??es.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,s){return new es(e??this.key,r??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return es.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return es.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,es.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,es.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lr(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw lr(27949);return e+(this.isRed()?0:1)}}es.EMPTY=null,es.RED=!0,es.BLACK=!1;es.EMPTY=new class{constructor(){this.size=0}get key(){throw lr(57766)}get value(){throw lr(16141)}get color(){throw lr(16727)}get left(){throw lr(29726)}get right(){throw lr(36894)}copy(e,r,n,i,s){return this}insert(e,r,n){return new es(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.comparator=e,this.data=new Yn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new r4(this.data.getIterator())}getIteratorFrom(e){return new r4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Mi)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Mi(this.comparator);return r.data=e,r}}class r4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.fields=e,e.sort(ts.comparator)}static empty(){return new wa([])}unionWith(e){let r=new Mi(ts.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new wa(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return rf(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new s6("Invalid base64 string: "+s):s}}(e);return new os(r)}static fromUint8Array(e){const r=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new os(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Or(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}os.EMPTY_BYTE_STRING=new os("");const aR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cc(t){if(Kr(!!t,39018),typeof t=="string"){let e=0;const r=aR.exec(t);if(Kr(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:gi(t.seconds),nanos:gi(t.nanos)}}function gi(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ic(t){return typeof t=="string"?os.fromBase64String(t):os.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6="server_timestamp",o6="__type__",l6="__previous_value__",c6="__local_write_time__";function b5(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[o6])==null?void 0:n.stringValue)===a6}function wg(t){const e=t.mapValue.fields[l6];return b5(e)?wg(e):e}function l0(t){const e=Cc(t.mapValue.fields[c6].timestampValue);return new Dn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,r,n,i,s,a,o,l,u,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const My="(default)";class c0{constructor(e,r){this.projectId=e,this.database=r||My}static empty(){return new c0("","")}get isDefaultDatabase(){return this.database===My}isEqual(e){return e instanceof c0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6="__type__",lR="__max__",Bp={mapValue:{}},h6="__vector__",m1="value";function Lc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?b5(t)?4:uR(t)?9007199254740991:cR(t)?10:11:lr(28295,{value:t})}function Wo(t,e){if(t===e)return!0;const r=Lc(t);if(r!==Lc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return l0(t).isEqual(l0(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Cc(i.timestampValue),o=Cc(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ic(i.bytesValue).isEqual(Ic(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return gi(i.geoPointValue.latitude)===gi(s.geoPointValue.latitude)&&gi(i.geoPointValue.longitude)===gi(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return gi(i.integerValue)===gi(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=gi(i.doubleValue),o=gi(s.doubleValue);return a===o?p1(a)===p1(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return rf(t.arrayValue.values||[],e.arrayValue.values||[],Wo);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(t4(a)!==t4(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Wo(a[l],o[l])))return!1;return!0}(t,e);default:return lr(52216,{left:t})}}function u0(t,e){return(t.values||[]).find(r=>Wo(r,e))!==void 0}function nf(t,e){if(t===e)return 0;const r=Lc(t),n=Lc(e);if(r!==n)return Or(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Or(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=gi(s.integerValue||s.doubleValue),l=gi(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return n4(t.timestampValue,e.timestampValue);case 4:return n4(l0(t),l0(e));case 5:return Dy(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Ic(s),l=Ic(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const h=Or(o[u],l[u]);if(h!==0)return h}return Or(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=Or(gi(s.latitude),gi(a.latitude));return o!==0?o:Or(gi(s.longitude),gi(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return i4(t.arrayValue,e.arrayValue);case 10:return function(s,a){var p,f,v,y;const o=s.fields||{},l=a.fields||{},u=(p=o[m1])==null?void 0:p.arrayValue,h=(f=l[m1])==null?void 0:f.arrayValue,d=Or(((v=u==null?void 0:u.values)==null?void 0:v.length)||0,((y=h==null?void 0:h.values)==null?void 0:y.length)||0);return d!==0?d:i4(u,h)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Bp.mapValue&&a===Bp.mapValue)return 0;if(s===Bp.mapValue)return 1;if(a===Bp.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=Dy(l[d],h[d]);if(p!==0)return p;const f=nf(o[l[d]],u[h[d]]);if(f!==0)return f}return Or(l.length,h.length)}(t.mapValue,e.mapValue);default:throw lr(23264,{he:r})}}function n4(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Or(t,e);const r=Cc(t),n=Cc(e),i=Or(r.seconds,n.seconds);return i!==0?i:Or(r.nanos,n.nanos)}function i4(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const s=nf(r[i],n[i]);if(s)return s}return Or(r.length,n.length)}function sf(t){return Oy(t)}function Oy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Cc(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Ic(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return or.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const s of r.values||[])i?i=!1:n+=",",n+=Oy(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${Oy(r.fields[a])}`;return i+"}"}(t.mapValue):lr(61005,{value:t})}function Tm(t){switch(Lc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wg(t);return e?16+Tm(e):16;case 5:return 2*t.stringValue.length;case 6:return Ic(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,s)=>i+Tm(s),0)}(t.arrayValue);case 10:case 11:return function(n){let i=0;return zc(n.fields,(s,a)=>{i+=s.length+Tm(a)}),i}(t.mapValue);default:throw lr(13486,{value:t})}}function s4(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function By(t){return!!t&&"integerValue"in t}function S5(t){return!!t&&"arrayValue"in t}function a4(t){return!!t&&"nullValue"in t}function o4(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function km(t){return!!t&&"mapValue"in t}function cR(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[u6])==null?void 0:n.stringValue)===h6}function Sd(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return zc(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Sd(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Sd(t.arrayValue.values[r]);return e}return{...t}}function uR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.value=e}static empty(){return new Ds({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!km(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sd(r)}setAll(e){let r=ts.emptyPath(),n={},i=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=o.popLast()}a?n[o.lastSegment()]=Sd(a):i.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(e){const r=this.field(e.popLast());km(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Wo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];km(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){zc(r,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new Ds(Sd(this.value))}}function f6(t){const e=[];return zc(t.fields,(r,n)=>{const i=new ts([r]);if(km(n)){const s=f6(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new wa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,r,n,i,s,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new zi(e,0,fr.min(),fr.min(),fr.min(),Ds.empty(),0)}static newFoundDocument(e,r,n,i){return new zi(e,1,r,fr.min(),n,i,0)}static newNoDocument(e,r){return new zi(e,2,r,fr.min(),fr.min(),Ds.empty(),0)}static newUnknownDocument(e,r){return new zi(e,3,r,fr.min(),fr.min(),Ds.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(fr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ds.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ds.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,r){this.position=e,this.inclusive=r}}function l4(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?n=or.comparator(or.fromName(a.referenceValue),r.key):n=nf(a,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function c4(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Wo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,r="asc"){this.field=e,this.dir=r}}function hR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d6=class{};class Ei extends d6{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new dR(e,r,n):r==="array-contains"?new gR(e,n):r==="in"?new xR(e,n):r==="not-in"?new yR(e,n):r==="array-contains-any"?new vR(e,n):new Ei(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new pR(e,n):new mR(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(nf(r,this.value)):r!==null&&Lc(this.value)===Lc(r)&&this.matchesComparison(nf(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wo extends d6{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new wo(e,r)}matches(e){return p6(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function p6(t){return t.op==="and"}function m6(t){return fR(t)&&p6(t)}function fR(t){for(const e of t.filters)if(e instanceof wo)return!1;return!0}function Uy(t){if(t instanceof Ei)return t.field.canonicalString()+t.op.toString()+sf(t.value);if(m6(t))return t.filters.map(e=>Uy(e)).join(",");{const e=t.filters.map(r=>Uy(r)).join(",");return`${t.op}(${e})`}}function g6(t,e){return t instanceof Ei?function(n,i){return i instanceof Ei&&n.op===i.op&&n.field.isEqual(i.field)&&Wo(n.value,i.value)}(t,e):t instanceof wo?function(n,i){return i instanceof wo&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,a,o)=>s&&g6(a,i.filters[o]),!0):!1}(t,e):void lr(19439)}function x6(t){return t instanceof Ei?function(r){return`${r.field.canonicalString()} ${r.op} ${sf(r.value)}`}(t):t instanceof wo?function(r){return r.op.toString()+" {"+r.getFilters().map(x6).join(" ,")+"}"}(t):"Filter"}class dR extends Ei{constructor(e,r,n){super(e,r,n),this.key=or.fromName(n.referenceValue)}matches(e){const r=or.comparator(e.key,this.key);return this.matchesComparison(r)}}class pR extends Ei{constructor(e,r){super(e,"in",r),this.keys=y6("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class mR extends Ei{constructor(e,r){super(e,"not-in",r),this.keys=y6("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function y6(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>or.fromName(n.referenceValue))}class gR extends Ei{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return S5(r)&&u0(r.arrayValue,this.value)}}class xR extends Ei{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&u0(this.value.arrayValue,r)}}class yR extends Ei{constructor(e,r){super(e,"not-in",r)}matches(e){if(u0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!u0(this.value.arrayValue,r)}}class vR extends Ei{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!S5(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>u0(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,r=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function u4(t,e=null,r=[],n=[],i=null,s=null,a=null){return new wR(t,e,r,n,i,s,a)}function A5(t){const e=gr(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Uy(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),F0(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>sf(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>sf(n)).join(",")),e.Te=r}return e.Te}function E5(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!hR(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!g6(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!c4(t.startAt,e.startAt)&&c4(t.endAt,e.endAt)}function Vy(t){return or.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,r=null,n=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _R(t,e,r,n,i,s,a,o){return new xf(t,e,r,n,i,s,a,o)}function _g(t){return new xf(t)}function h4(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function v6(t){return t.collectionGroup!==null}function Ad(t){const e=gr(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Mi(ts.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new h0(s,n))}),r.has(ts.keyField().canonicalString())||e.Ie.push(new h0(ts.keyField(),n))}return e.Ie}function Ho(t){const e=gr(t);return e.Ee||(e.Ee=bR(e,Ad(t))),e.Ee}function bR(t,e){if(t.limitType==="F")return u4(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new h0(i.field,s)});const r=t.endAt?new g1(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new g1(t.startAt.position,t.startAt.inclusive):null;return u4(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function zy(t,e){const r=t.filters.concat([e]);return new xf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function x1(t,e,r){return new xf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function bg(t,e){return E5(Ho(t),Ho(e))&&t.limitType===e.limitType}function w6(t){return`${A5(Ho(t))}|lt:${t.limitType}`}function th(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>x6(i)).join(", ")}]`),F0(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>sf(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>sf(i)).join(",")),`Target(${n})`}(Ho(t))}; limitType=${t.limitType})`}function Sg(t,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):or.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,i){for(const s of Ad(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(a,o,l){const u=l4(a,o,l);return a.inclusive?u<=0:u<0}(n.startAt,Ad(n),i)||n.endAt&&!function(a,o,l){const u=l4(a,o,l);return a.inclusive?u>=0:u>0}(n.endAt,Ad(n),i))}(t,e)}function SR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _6(t){return(e,r)=>{let n=!1;for(const i of Ad(t)){const s=AR(i,e,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function AR(t,e,r){const n=t.field.isKeyField()?or.comparator(e.key,r.key):function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?nf(l,u):lr(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return lr(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zc(this.inner,(r,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return i6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new Yn(or.comparator);function Al(){return ER}const b6=new Yn(or.comparator);function cd(...t){let e=b6;for(const r of t)e=e.insert(r.key,r);return e}function S6(t){let e=b6;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function cu(){return Ed()}function A6(){return Ed()}function Ed(){return new Pu(t=>t.toString(),(t,e)=>t.isEqual(e))}const NR=new Yn(or.comparator),TR=new Mi(or.comparator);function Br(...t){let e=TR;for(const r of t)e=e.add(r);return e}const kR=new Mi(Or);function CR(){return kR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:p1(e)?"-0":e}}function E6(t){return{integerValue:""+t}}function N6(t,e){return nR(e)?E6(e):N5(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(){this._=void 0}}function IR(t,e,r){return t instanceof f0?function(i,s){const a={fields:{[o6]:{stringValue:a6},[c6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&b5(s)&&(s=wg(s)),s&&(a.fields[l6]=s),{mapValue:a}}(r,e):t instanceof d0?k6(t,e):t instanceof p0?C6(t,e):function(i,s){const a=T6(i,s),o=f4(a)+f4(i.Ae);return By(a)&&By(i.Ae)?E6(o):N5(i.serializer,o)}(t,e)}function LR(t,e,r){return t instanceof d0?k6(t,e):t instanceof p0?C6(t,e):r}function T6(t,e){return t instanceof m0?function(n){return By(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class f0 extends Ag{}class d0 extends Ag{constructor(e){super(),this.elements=e}}function k6(t,e){const r=I6(e);for(const n of t.elements)r.some(i=>Wo(i,n))||r.push(n);return{arrayValue:{values:r}}}class p0 extends Ag{constructor(e){super(),this.elements=e}}function C6(t,e){let r=I6(e);for(const n of t.elements)r=r.filter(i=>!Wo(i,n));return{arrayValue:{values:r}}}class m0 extends Ag{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function f4(t){return gi(t.integerValue||t.doubleValue)}function I6(t){return S5(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,r){this.field=e,this.transform=r}}function PR(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof d0&&i instanceof d0||n instanceof p0&&i instanceof p0?rf(n.elements,i.elements,Wo):n instanceof m0&&i instanceof m0?Wo(n.Ae,i.Ae):n instanceof f0&&i instanceof f0}(t.transform,e.transform)}class jR{constructor(e,r){this.version=e,this.transformResults=r}}class Ni{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Ni}static exists(e){return new Ni(void 0,e)}static updateTime(e){return new Ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Eg{}function P6(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new M0(t.key,Ni.none()):new D0(t.key,t.data,Ni.none());{const r=t.data,n=Ds.empty();let i=new Mi(ts.comparator);for(let s of e.fields)if(!i.has(s)){let a=r.field(s);a===null&&s.length>1&&(s=s.popLast(),a=r.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new Hc(t.key,n,new wa(i.toArray()),Ni.none())}}function RR(t,e,r){t instanceof D0?function(i,s,a){const o=i.value.clone(),l=p4(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof Hc?function(i,s,a){if(!Cm(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=p4(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(j6(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Nd(t,e,r,n){return t instanceof D0?function(s,a,o,l){if(!Cm(s.precondition,a))return o;const u=s.value.clone(),h=m4(s.fieldTransforms,l,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Hc?function(s,a,o,l){if(!Cm(s.precondition,a))return o;const u=m4(s.fieldTransforms,l,a),h=a.data;return h.setAll(j6(s)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(s,a,o){return Cm(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function FR(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),s=T6(n.transform,i||null);s!=null&&(r===null&&(r=Ds.empty()),r.set(n.field,s))}return r||null}function d4(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&rf(n,i,(s,a)=>PR(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class D0 extends Eg{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hc extends Eg{constructor(e,r,n,i,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function j6(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function p4(t,e,r){const n=new Map;Kr(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,LR(a,o,r[i]))}return n}function m4(t,e,r){const n=new Map;for(const i of t){const s=i.transform,a=r.data.field(i.field);n.set(i.field,IR(s,a,e))}return n}class M0 extends Eg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class R6 extends Eg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&RR(s,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Nd(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Nd(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=A6();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=r.has(i.key)?null:o;const l=P6(a,o);l!==null&&n.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(fr.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Br())}isEqual(e){return this.batchId===e.batchId&&rf(this.mutations,e.mutations,(r,n)=>d4(r,n))&&rf(this.baseMutations,e.baseMutations,(r,n)=>d4(r,n))}}class T5{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Kr(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=function(){return NR}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new T5(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Si,$r;function F6(t){switch(t){case nt.OK:return lr(64938);case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0;default:return lr(15467,{code:t})}}function D6(t){if(t===void 0)return Sl("GRPC error has no .code"),nt.UNKNOWN;switch(t){case Si.OK:return nt.OK;case Si.CANCELLED:return nt.CANCELLED;case Si.UNKNOWN:return nt.UNKNOWN;case Si.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case Si.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case Si.INTERNAL:return nt.INTERNAL;case Si.UNAVAILABLE:return nt.UNAVAILABLE;case Si.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case Si.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case Si.NOT_FOUND:return nt.NOT_FOUND;case Si.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case Si.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case Si.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case Si.ABORTED:return nt.ABORTED;case Si.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case Si.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case Si.DATA_LOSS:return nt.DATA_LOSS;default:return lr(39323,{code:t})}}($r=Si||(Si={}))[$r.OK=0]="OK",$r[$r.CANCELLED=1]="CANCELLED",$r[$r.UNKNOWN=2]="UNKNOWN",$r[$r.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$r[$r.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$r[$r.NOT_FOUND=5]="NOT_FOUND",$r[$r.ALREADY_EXISTS=6]="ALREADY_EXISTS",$r[$r.PERMISSION_DENIED=7]="PERMISSION_DENIED",$r[$r.UNAUTHENTICATED=16]="UNAUTHENTICATED",$r[$r.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$r[$r.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$r[$r.ABORTED=10]="ABORTED",$r[$r.OUT_OF_RANGE=11]="OUT_OF_RANGE",$r[$r.UNIMPLEMENTED=12]="UNIMPLEMENTED",$r[$r.INTERNAL=13]="INTERNAL",$r[$r.UNAVAILABLE=14]="UNAVAILABLE",$r[$r.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=new Sc([4294967295,4294967295],0);function g4(t){const e=BR().encode(t),r=new KN;return r.update(e),new Uint8Array(r.digest())}function x4(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Sc([r,n],0),new Sc([i,s],0)]}class k5{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ud(`Invalid padding: ${r}`);if(n<0)throw new ud(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ud(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ud(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Sc.fromNumber(this.ge)}ye(e,r,n){let i=e.add(r.multiply(Sc.fromNumber(n)));return i.compare(UR)===1&&(i=new Sc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=g4(e),[n,i]=x4(r);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);if(!this.we(a))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new k5(s,i,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const r=g4(e),[n,i]=x4(r);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);this.Se(a)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ud extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,r,n,i,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,O0.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Ng(fr.min(),i,new Yn(Or),Al(),Br())}}class O0{constructor(e,r,n,i,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new O0(n,r,Br(),Br(),Br())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,r,n,i){this.be=e,this.removedTargetIds=r,this.key=n,this.De=i}}class M6{constructor(e,r){this.targetId=e,this.Ce=r}}class O6{constructor(e,r,n=os.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class y4{constructor(){this.ve=0,this.Fe=v4(),this.Me=os.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Br(),r=Br(),n=Br();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:lr(38017,{changeType:s})}}),new O0(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=v4()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Kr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Al(),this.Je=Up(),this.He=Up(),this.Ye=new Yn(Or)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:lr(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,i)=>{this.rt(i)&&r(i)})}st(e){const r=e.targetId,n=e.Ce.count,i=this.ot(r);if(i){const s=i.target;if(Vy(s))if(n===0){const a=new or(s.path);this.et(r,a,zi.newNoDocument(a,fr.min()))}else Kr(n===1,20013,{expectedCount:n});else{const a=this._t(r);if(a!==n){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=r;let a,o;try{a=Ic(n).toUint8Array()}catch(l){if(l instanceof s6)return tf("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new k5(a,i,s)}catch(l){return tf(l instanceof ud?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let i=0;return n.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(r,s,null),i++)}),i}Tt(e){const r=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&Vy(o.target)){const l=new or(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,zi.newNoDocument(l,e))}s.Be&&(r.set(a,s.ke()),s.qe())}});let n=Br();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new Ng(e,r,this.Ye,this.je,n);return this.je=Al(),this.Je=Up(),this.He=Up(),this.Ye=new Yn(Or),i}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new y4,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Mi(Or),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Mi(Or),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Ut("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new y4),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Up(){return new Yn(or.comparator)}function v4(){return new Yn(or.comparator)}const zR={asc:"ASCENDING",desc:"DESCENDING"},HR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qR={and:"AND",or:"OR"};class $R{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Hy(t,e){return t.useProto3Json||F0(e)?e:{value:e}}function y1(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B6(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WR(t,e){return y1(t,e.toTimestamp())}function Sa(t){return Kr(!!t,49232),fr.fromTimestamp(function(r){const n=Cc(r);return new Dn(n.seconds,n.nanos)}(t))}function C5(t,e){return qy(t,e).canonicalString()}function qy(t,e){const r=function(i){return new wn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function U6(t){const e=wn.fromString(t);return Kr(W6(e),10190,{key:e.toString()}),e}function v1(t,e){return C5(t.databaseId,e.path)}function Td(t,e){const r=U6(e);if(r.get(1)!==t.databaseId.projectId)throw new It(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new It(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new or(z6(r))}function V6(t,e){return C5(t.databaseId,e)}function KR(t){const e=U6(t);return e.length===4?wn.emptyPath():z6(e)}function $y(t){return new wn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function z6(t){return Kr(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function w4(t,e,r){return{name:v1(t,e),fields:r.value.mapValue.fields}}function GR(t,e){return"found"in e?function(n,i){Kr(!!i.found,43571),i.found.name,i.found.updateTime;const s=Td(n,i.found.name),a=Sa(i.found.updateTime),o=i.found.createTime?Sa(i.found.createTime):fr.min(),l=new Ds({mapValue:{fields:i.found.fields}});return zi.newFoundDocument(s,a,o,l)}(t,e):"missing"in e?function(n,i){Kr(!!i.missing,3894),Kr(!!i.readTime,22933);const s=Td(n,i.missing),a=Sa(i.readTime);return zi.newNoDocument(s,a)}(t,e):lr(7234,{result:e})}function YR(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:lr(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Kr(h===void 0||typeof h=="string",58123),os.fromBase64String(h||"")):(Kr(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),os.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const h=u.code===void 0?nt.UNKNOWN:D6(u.code);return new It(h,u.message||"")}(a);r=new O6(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Td(t,n.document.name),s=Sa(n.document.updateTime),a=n.document.createTime?Sa(n.document.createTime):fr.min(),o=new Ds({mapValue:{fields:n.document.fields}}),l=zi.newFoundDocument(i,s,a,o),u=n.targetIds||[],h=n.removedTargetIds||[];r=new Im(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Td(t,n.document),s=n.readTime?Sa(n.readTime):fr.min(),a=zi.newNoDocument(i,s),o=n.removedTargetIds||[];r=new Im([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Td(t,n.document),s=n.removedTargetIds||[];r=new Im([],s,i,null)}else{if(!("filter"in e))return lr(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new OR(i,s),o=n.targetId;r=new M6(o,a)}}return r}function H6(t,e){let r;if(e instanceof D0)r={update:w4(t,e.key,e.value)};else if(e instanceof M0)r={delete:v1(t,e.key)};else if(e instanceof Hc)r={update:w4(t,e.key,e.data),updateMask:iF(e.fieldMask)};else{if(!(e instanceof R6))return lr(16599,{Vt:e.type});r={verify:v1(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,a){const o=a.transform;if(o instanceof f0)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof d0)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof p0)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof m0)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw lr(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:WR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:lr(27497)}(t,e.precondition)),r}function XR(t,e){return t&&t.length>0?(Kr(e!==void 0,14353),t.map(r=>function(i,s){let a=i.updateTime?Sa(i.updateTime):Sa(s);return a.isEqual(fr.min())&&(a=Sa(s)),new jR(a,i.transformResults||[])}(r,e))):[]}function QR(t,e){return{documents:[V6(t,e.path)]}}function ZR(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=V6(t,i);const s=function(u){if(u.length!==0)return $6(wo.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:rh(p.field),direction:tF(p.dir)}}(h))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=Hy(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:r,parent:i}}function JR(t){let e=KR(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Kr(n===1,65062);const h=r.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];r.where&&(s=function(d){const p=q6(d);return p instanceof wo&&m6(p)?p.getFilters():[p]}(r.where));let a=[];r.orderBy&&(a=function(d){return d.map(p=>function(v){return new h0(nh(v.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(r.orderBy));let o=null;r.limit&&(o=function(d){let p;return p=typeof d=="object"?d.value:d,F0(p)?null:p}(r.limit));let l=null;r.startAt&&(l=function(d){const p=!!d.before,f=d.values||[];return new g1(f,p)}(r.startAt));let u=null;return r.endAt&&(u=function(d){const p=!d.before,f=d.values||[];return new g1(f,p)}(r.endAt)),_R(e,i,a,s,o,"F",l,u)}function eF(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lr(28987,{purpose:i})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function q6(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=nh(r.unaryFilter.field);return Ei.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=nh(r.unaryFilter.field);return Ei.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=nh(r.unaryFilter.field);return Ei.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=nh(r.unaryFilter.field);return Ei.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lr(61313);default:return lr(60726)}}(t):t.fieldFilter!==void 0?function(r){return Ei.create(nh(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lr(58110);default:return lr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return wo.create(r.compositeFilter.filters.map(n=>q6(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return lr(1026)}}(r.compositeFilter.op))}(t):lr(30097,{filter:t})}function tF(t){return zR[t]}function rF(t){return HR[t]}function nF(t){return qR[t]}function rh(t){return{fieldPath:t.canonicalString()}}function nh(t){return ts.fromServerFormat(t.fieldPath)}function $6(t){return t instanceof Ei?function(r){if(r.op==="=="){if(o4(r.value))return{unaryFilter:{field:rh(r.field),op:"IS_NAN"}};if(a4(r.value))return{unaryFilter:{field:rh(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(o4(r.value))return{unaryFilter:{field:rh(r.field),op:"IS_NOT_NAN"}};if(a4(r.value))return{unaryFilter:{field:rh(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rh(r.field),op:rF(r.op),value:r.value}}}(t):t instanceof wo?function(r){const n=r.getFilters().map(i=>$6(i));return n.length===1?n[0]:{compositeFilter:{op:nF(r.op),filters:n}}}(t):lr(54877,{filter:t})}function iF(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function W6(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,r,n,i,s=fr.min(),a=fr.min(),o=os.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new lc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new lc(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e){this.yt=e}}function aF(t){const e=JR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?x1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(){this.Cn=new lF}addToCollectionParentIndex(e,r){return this.Cn.add(r),lt.resolve()}getCollectionParents(e,r){return lt.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return lt.resolve()}deleteFieldIndex(e,r){return lt.resolve()}deleteAllFieldIndexes(e){return lt.resolve()}createTargetIndexes(e,r){return lt.resolve()}getDocumentsMatchingTarget(e,r){return lt.resolve(null)}getIndexType(e,r){return lt.resolve(0)}getFieldIndexes(e,r){return lt.resolve([])}getNextCollectionGroupToUpdate(e){return lt.resolve(null)}getMinOffset(e,r){return lt.resolve(kc.min())}getMinOffsetFromCollectionGroup(e,r){return lt.resolve(kc.min())}updateCollectionGroup(e,r,n){return lt.resolve()}updateIndexEntries(e,r){return lt.resolve()}}class lF{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Mi(wn.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Mi(wn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},K6=41943040;class Ws{static withCacheSize(e){return new Ws(e,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ws.DEFAULT_COLLECTION_PERCENTILE=10,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ws.DEFAULT=new Ws(K6,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ws.DISABLED=new Ws(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new af(0)}static cr(){return new af(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4="LruGarbageCollector",cF=1048576;function S4([t,e],[r,n]){const i=Or(t,r);return i===0?Or(e,n):i}class uF{constructor(e){this.Ir=e,this.buffer=new Mi(S4),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();S4(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class hF{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ut(b4,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){gf(r)?Ut(b4,"Ignoring IndexedDB error during garbage collection: ",r):await mf(r)}await this.Vr(3e5)})}}class fF{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return lt.resolve(vg.ce);const n=new uF(r);return this.mr.forEachTarget(e,i=>n.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>n.Ar(i))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ut("LruGarbageCollector","Garbage collection skipped; disabled"),lt.resolve(_4)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_4):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,i,s,a,o,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(n=d,o=Date.now(),this.removeTargets(e,n,r))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(d=>(u=Date.now(),eh()<=Wr.DEBUG&&Ut("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),lt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function dF(t,e){return new fF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(){this.changes=new Pu(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,zi.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?lt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&Nd(n.mutation,i,wa.empty(),Dn.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Br()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Br()){const i=cu();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(s=>{let a=cd();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=cu();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Br()))}populateOverlays(e,r,n){const i=[];return n.forEach(s=>{r.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,i){let s=Al();const a=Ed(),o=function(){return Ed()}();return r.forEach((l,u)=>{const h=n.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Hc)?s=s.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),Nd(h.mutation,u,h.mutation.getFieldMask(),Dn.now())):a.set(u.key,wa.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>a.set(u,h)),r.forEach((u,h)=>o.set(u,new mF(h,a.get(u)??null))),o))}recalculateAndSaveOverlays(e,r){const n=Ed();let i=new Yn((a,o)=>a-o),s=Br();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(l=>{const u=r.get(l);if(u===null)return;let h=n.get(l)||wa.empty();h=o.applyToLocalView(u,h),n.set(l,h);const d=(i.get(o.batchId)||Br()).add(l);i=i.insert(o.batchId,d)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,h=l.value,d=A6();h.forEach(p=>{if(!s.has(p)){const f=P6(r.get(p),n.get(p));f!==null&&d.set(p,f),s=s.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,d))}return lt.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(a){return or.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):v6(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-s.size):lt.resolve(cu());let o=o0,l=s;return a.next(u=>lt.forEach(u,(h,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(h)?lt.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Br())).next(h=>({batchId:o,changes:S6(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new or(r)).next(n=>{let i=cd();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const s=r.collectionGroup;let a=cd();return this.indexManager.getCollectionParents(e,s).next(o=>lt.forEach(o,l=>{const u=function(d,p){return new xf(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next(h=>{h.forEach((d,p)=>{a=a.insert(d,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,i))).next(a=>{s.forEach((l,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,zi.newInvalidDocument(h)))});let o=cd();return a.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Nd(h.mutation,u,wa.empty(),Dn.now()),Sg(r,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return lt.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Sa(i.createTime)}}(r)),lt.resolve()}getNamedQuery(e,r){return lt.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(i){return{name:i.name,query:aF(i.bundledQuery),readTime:Sa(i.readTime)}}(r)),lt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(){this.overlays=new Yn(or.comparator),this.qr=new Map}getOverlay(e,r){return lt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=cu();return lt.forEach(r,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,s)=>{this.St(e,r,s)}),lt.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),lt.resolve()}getOverlaysForCollection(e,r,n){const i=cu(),s=r.length+1,a=new or(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>n&&i.set(l.getKey(),l)}return lt.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let s=new Yn((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let h=s.get(u.largestBatchId);h===null&&(h=cu(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const o=cu(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>o.set(u,h)),!(o.size()>=i)););return lt.resolve(o)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new MR(r,n));let s=this.qr.get(r);s===void 0&&(s=Br(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(){this.sessionToken=os.EMPTY_BYTE_STRING}getSessionToken(e){return lt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,lt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(){this.Qr=new Mi(Bi.$r),this.Ur=new Mi(Bi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Bi(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Bi(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new or(new wn([])),n=new Bi(r,e),i=new Bi(r,e+1),s=[];return this.Ur.forEachInRange([n,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new or(new wn([])),n=new Bi(r,e),i=new Bi(r,e+1);let s=Br();return this.Ur.forEachInRange([n,i],a=>{s=s.add(a.key)}),s}containsKey(e){const r=new Bi(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Bi{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return or.comparator(e.key,r.key)||Or(e.Yr,r.Yr)}static Kr(e,r){return Or(e.Yr,r.Yr)||or.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Mi(Bi.$r)}checkEmpty(e){return lt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new DR(s,r,n,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new Bi(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return lt.resolve(a)}lookupMutationBatch(e,r){return lt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ei(n),s=i<0?0:i;return lt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return lt.resolve(this.mutationQueue.length===0?_5:this.tr-1)}getAllMutationBatches(e){return lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Bi(r,0),i=new Bi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,i],a=>{const o=this.Xr(a.Yr);s.push(o)}),lt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Mi(Or);return r.forEach(i=>{const s=new Bi(i,0),a=new Bi(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{n=n.add(o.Yr)})}),lt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let s=n;or.isDocumentKey(s)||(s=s.child(""));const a=new Bi(new or(s),0);let o=new Mi(Or);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)},a),lt.resolve(this.ti(o))}ti(e){const r=[];return e.forEach(n=>{const i=this.Xr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){Kr(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return lt.forEach(r.mutations,i=>{const s=new Bi(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Bi(r,0),i=this.Zr.firstAfterOrEqual(n);return lt.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,lt.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e){this.ri=e,this.docs=function(){return new Yn(or.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),s=i?i.size:0,a=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return lt.resolve(n?n.document.mutableCopy():zi.newInvalidDocument(r))}getEntries(e,r){let n=Al();return r.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():zi.newInvalidDocument(i))}),lt.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let s=Al();const a=r.path,o=new or(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||J7(Z7(h),n)<=0||(i.has(h.key)||Sg(r,h))&&(s=s.insert(h.key,h.mutableCopy()))}return lt.resolve(s)}getAllFromCollectionGroup(e,r,n,i){lr(9500)}ii(e,r){return lt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new bF(this)}getSize(e){return lt.resolve(this.size)}}class bF extends pF{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),lt.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(e){this.persistence=e,this.si=new Pu(r=>A5(r),E5),this.lastRemoteSnapshotVersion=fr.min(),this.highestTargetId=0,this.oi=0,this._i=new I5,this.targetCount=0,this.ai=af.ur()}forEachTarget(e,r){return this.si.forEach((n,i)=>r(i)),lt.resolve()}getLastRemoteSnapshotVersion(e){return lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return lt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),lt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),lt.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new af(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,lt.resolve()}updateTargetData(e,r){return this.Pr(r),lt.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,lt.resolve()}removeTargets(e,r,n){let i=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),lt.waitFor(s).next(()=>i)}getTargetCount(e){return lt.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return lt.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),lt.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),lt.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),lt.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return lt.resolve(n)}containsKey(e,r){return lt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,r){this.ui={},this.overlays={},this.ci=new vg(0),this.li=!1,this.li=!0,this.hi=new vF,this.referenceDelegate=e(this),this.Pi=new SF(this),this.indexManager=new oF,this.remoteDocumentCache=function(i){return new _F(i)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new sF(r),this.Ii=new xF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new yF,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new wF(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Ut("MemoryPersistence","Starting transaction:",e);const i=new AF(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,r){return lt.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class AF extends tR{constructor(e){super(),this.currentSequenceNumber=e}}class L5{constructor(e){this.persistence=e,this.Ri=new I5,this.Vi=null}static mi(e){return new L5(e)}get fi(){if(this.Vi)return this.Vi;throw lr(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),lt.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),lt.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),lt.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(i=>this.fi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.fi,n=>{const i=or.fromPath(n);return this.gi(e,i).next(s=>{s||r.removeEntry(i,fr.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return lt.or([()=>lt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class w1{constructor(e,r){this.persistence=e,this.pi=new Pu(n=>iR(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=dF(this,r)}static mi(e,r){return new w1(e,r)}Ei(){}di(e){return lt.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(i=>n+i))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return lt.forEach(this.pi,(n,i)=>this.br(e,n,i).next(s=>s?lt.resolve():r(i)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,r).next(o=>{o||(n++,s.removeEntry(a,fr.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),lt.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),lt.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),lt.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),lt.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Tm(e.data.value)),r}br(e,r,n){return lt.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return lt.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=i}static As(e,r){let n=Br(),i=Br();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new P5(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return vj()?8:rR(xj())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,i){const s={result:null};return this.ys(e,r).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,r,i,n).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new EF;return this.Ss(e,r,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,r,a,o.size)})}).next(()=>s.result)}bs(e,r,n,i){return n.documentReadCount<this.fs?(eh()<=Wr.DEBUG&&Ut("QueryEngine","SDK will not create cache indexes for query:",th(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),lt.resolve()):(eh()<=Wr.DEBUG&&Ut("QueryEngine","Query:",th(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(eh()<=Wr.DEBUG&&Ut("QueryEngine","The SDK decides to create cache indexes for query:",th(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ho(r))):lt.resolve())}ys(e,r){if(h4(r))return lt.resolve(null);let n=Ho(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=x1(r,null,"F"),n=Ho(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const a=Br(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const u=this.Ds(r,o);return this.Cs(r,u,a,l.readTime)?this.ys(e,x1(r,null,"F")):this.vs(e,u,r,l)}))})))}ws(e,r,n,i){return h4(r)||i.isEqual(fr.min())?lt.resolve(null):this.ps.getDocuments(e,n).next(s=>{const a=this.Ds(r,s);return this.Cs(r,a,n,i)?lt.resolve(null):(eh()<=Wr.DEBUG&&Ut("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),th(r)),this.vs(e,a,r,Q7(i,o0)).next(o=>o))})}Ds(e,r){let n=new Mi(_6(e));return r.forEach((i,s)=>{Sg(e,s)&&(n=n.add(s))}),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,r,n){return eh()<=Wr.DEBUG&&Ut("QueryEngine","Using full collection scan to execute query:",th(r)),this.ps.getDocumentsMatchingQuery(e,r,kc.min(),n)}vs(e,r,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(s=>(r.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="LocalStore",TF=3e8;class kF{constructor(e,r,n,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new Yn(Or),this.xs=new Pu(s=>A5(s),E5),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gF(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function CF(t,e,r,n){return new kF(t,e,r,n)}async function Y6(t,e){const r=gr(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const a=[],o=[];let l=Br();for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return r.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:a,addedBatchIds:o}))})})}function IF(t,e){const r=gr(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,h){const d=u.batch,p=d.keys();let f=lt.resolve();return p.forEach(v=>{f=f.next(()=>h.getEntry(l,v)).next(y=>{const b=u.docVersions.get(v);Kr(b!==null,48541),y.version.compareTo(b)<0&&(d.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),h.addEntry(y)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Br();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function X6(t){const e=gr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function LF(t,e){const r=gr(t),n=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const o=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;o.push(r.Pi.removeMatchingKeys(s,h.removedDocuments,d).next(()=>r.Pi.addMatchingKeys(s,h.addedDocuments,d)));let f=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(os.EMPTY_BYTE_STRING,fr.min()).withLastLimboFreeSnapshotVersion(fr.min()):h.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(h.resumeToken,n)),i=i.insert(d,f),function(y,b,w){return y.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=TF?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,f,h)&&o.push(r.Pi.updateTargetData(s,f))});let l=Al(),u=Br();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,h))}),o.push(PF(s,a,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!n.isEqual(fr.min())){const h=r.Pi.getLastRemoteSnapshotVersion(s).next(d=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(h)}return lt.waitFor(o).next(()=>a.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(r.Ms=i,s))}function PF(t,e,r){let n=Br(),i=Br();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let a=Al();return r.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(fr.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Ut(j5,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:a,qs:i}})}function jF(t,e){const r=gr(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=_5),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function RF(t,e){const r=gr(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Pi.getTargetData(n,e).next(s=>s?(i=s,lt.resolve(i)):r.Pi.allocateTargetId(n).next(a=>(i=new lc(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function Wy(t,e,r){const n=gr(t),i=n.Ms.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!gf(a))throw a;Ut(j5,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function A4(t,e,r){const n=gr(t);let i=fr.min(),s=Br();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,u,h){const d=gr(l),p=d.xs.get(h);return p!==void 0?lt.resolve(d.Ms.get(p)):d.Pi.getTargetData(u,h)}(n,a,Ho(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(a,e,r?i:fr.min(),r?s:Br())).next(o=>(FF(n,SR(e),o),{documents:o,Qs:s})))}function FF(t,e,r){let n=t.Os.get(e)||fr.min();r.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.Os.set(e,n)}class E4{constructor(){this.activeTargetIds=CR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DF{constructor(){this.Mo=new E4,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new E4,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4="ConnectivityMonitor";class T4{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ut(N4,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ut(N4,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vp=null;function Ky(){return Vp===null?Vp=function(){return 268435456+Math.round(2147483648*Math.random())}():Vp++,"0x"+Vp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="RestConnection",OF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BF{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===My?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,r,n,i,s){const a=Ky(),o=this.zo(e,r.toUriEncodedString());Ut($2,`Sending RPC '${e}' ${a}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(o),h=x5(u);return this.Jo(e,o,l,n,h).then(d=>(Ut($2,`Received RPC '${e}' ${a}: `,d),d),d=>{throw tf($2,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",n),d})}Ho(e,r,n,i,s,a){return this.Go(e,r,n,i,s)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pf}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}zo(e,r){const n=OF[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="WebChannelConnection";class VF extends BF{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,s){const a=Ky();return new Promise((o,l)=>{const u=new GN;u.setWithCredentials(!0),u.listenOnce(YN.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Nm.NO_ERROR:const d=u.getResponseJson();Ut(xs,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case Nm.TIMEOUT:Ut(xs,`RPC '${e}' ${a} timed out`),l(new It(nt.DEADLINE_EXCEEDED,"Request time out"));break;case Nm.HTTP_ERROR:const p=u.getStatus();if(Ut(xs,`RPC '${e}' ${a} failed with status:`,p,"response text:",u.getResponseText()),p>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);const v=f==null?void 0:f.error;if(v&&v.status&&v.message){const y=function(w){const S=w.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(S)>=0?S:nt.UNKNOWN}(v.status);l(new It(y,v.message))}else l(new It(nt.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new It(nt.UNAVAILABLE,"Connection failed."));break;default:lr(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ut(xs,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(i);Ut(xs,`RPC '${e}' ${a} sending request:`,i),u.send(r,"POST",h,n,15)})}T_(e,r,n){const i=Ky(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ZN(),o=QN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const h=s.join("");Ut(xs,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=a.createWebChannel(h,l);this.I_(d);let p=!1,f=!1;const v=new UF({Yo:b=>{f?Ut(xs,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(p||(Ut(xs,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),Ut(xs,`RPC '${e}' stream ${i} sending:`,b),d.send(b))},Zo:()=>d.close()}),y=(b,w,S)=>{b.listen(w,k=>{try{S(k)}catch(R){setTimeout(()=>{throw R},0)}})};return y(d,ld.EventType.OPEN,()=>{f||(Ut(xs,`RPC '${e}' stream ${i} transport opened.`),v.o_())}),y(d,ld.EventType.CLOSE,()=>{f||(f=!0,Ut(xs,`RPC '${e}' stream ${i} transport closed`),v.a_(),this.E_(d))}),y(d,ld.EventType.ERROR,b=>{f||(f=!0,tf(xs,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),v.a_(new It(nt.UNAVAILABLE,"The operation could not be completed")))}),y(d,ld.EventType.MESSAGE,b=>{var w;if(!f){const S=b.data[0];Kr(!!S,16349);const k=S,R=(k==null?void 0:k.error)||((w=k[0])==null?void 0:w.error);if(R){Ut(xs,`RPC '${e}' stream ${i} received error:`,R);const q=R.status;let K=function(A){const D=Si[A];if(D!==void 0)return D6(D)}(q),E=R.message;K===void 0&&(K=nt.INTERNAL,E="Unknown error status: "+q+" with message "+R.message),f=!0,v.a_(new It(K,E)),d.close()}else Ut(xs,`RPC '${e}' stream ${i} received:`,S),v.u_(S)}}),y(o,XN.STAT_EVENT,b=>{b.stat===Fy.PROXY?Ut(xs,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===Fy.NOPROXY&&Ut(xs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function W2(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(t){return new $R(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,r,n=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-n);i>0&&Ut("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4="PersistentStream";class Q6{constructor(e,r,n,i,s,a,o,l){this.Mi=e,this.S_=n,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new R5(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===nt.RESOURCE_EXHAUSTED?(Sl(r.toString()),Sl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.D_===r&&this.G_(n,i)},n=>{e(()=>{const i=new It(nt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{n(()=>this.z_(i))}),this.stream.onMessage(i=>{n(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ut(k4,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Ut(k4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zF extends Q6{constructor(e,r,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=YR(this.serializer,e),n=function(s){if(!("targetChange"in s))return fr.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?fr.min():a.readTime?Sa(a.readTime):fr.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=$y(this.serializer),r.addTarget=function(s,a){let o;const l=a.target;if(o=Vy(l)?{documents:QR(s,l)}:{query:ZR(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=B6(s,a.resumeToken);const u=Hy(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(fr.min())>0){o.readTime=y1(s,a.snapshotVersion.toTimestamp());const u=Hy(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=eF(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=$y(this.serializer),r.removeTarget=e,this.q_(r)}}class HF extends Q6{constructor(e,r,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Kr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Kr(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Kr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=XR(e.writeResults,e.commitTime),n=Sa(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=$y(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>H6(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{}class $F extends qF{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new It(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,qy(r,n),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new It(nt.UNKNOWN,s.toString())})}Ho(e,r,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,qy(r,n),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new It(nt.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class WF{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Sl(r),this.aa=!1):Ut("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su="RemoteStore";class KF{constructor(e,r,n,i,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{n.enqueueAndForget(async()=>{ju(this)&&(Ut(Su,"Restarting streams for network reachability change."),await async function(l){const u=gr(l);u.Ea.add(4),await B0(u),u.Ra.set("Unknown"),u.Ea.delete(4),await kg(u)}(this))})}),this.Ra=new WF(n,i)}}async function kg(t){if(ju(t))for(const e of t.da)await e(!0)}async function B0(t){for(const e of t.da)await e(!1)}function Z6(t,e){const r=gr(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),O5(r)?M5(r):yf(r).O_()&&D5(r,e))}function F5(t,e){const r=gr(t),n=yf(r);r.Ia.delete(e),n.O_()&&J6(r,e),r.Ia.size===0&&(n.O_()?n.L_():ju(r)&&r.Ra.set("Unknown"))}function D5(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}yf(t).Y_(e)}function J6(t,e){t.Va.Ue(e),yf(t).Z_(e)}function M5(t){t.Va=new VR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),yf(t).start(),t.Ra.ua()}function O5(t){return ju(t)&&!yf(t).x_()&&t.Ia.size>0}function ju(t){return gr(t).Ea.size===0}function eT(t){t.Va=void 0}async function GF(t){t.Ra.set("Online")}async function YF(t){t.Ia.forEach((e,r)=>{D5(t,e)})}async function XF(t,e){eT(t),O5(t)?(t.Ra.ha(e),M5(t)):t.Ra.set("Unknown")}async function QF(t,e,r){if(t.Ra.set("Online"),e instanceof O6&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))}(t,e)}catch(n){Ut(Su,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await _1(t,n)}else if(e instanceof Im?t.Va.Ze(e):e instanceof M6?t.Va.st(e):t.Va.tt(e),!r.isEqual(fr.min()))try{const n=await X6(t.localStore);r.compareTo(n)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(u);h&&s.Ia.set(u,h.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,u)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(os.EMPTY_BYTE_STRING,h.snapshotVersion)),J6(s,l);const d=new lc(h.target,l,u,h.sequenceNumber);D5(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Ut(Su,"Failed to raise snapshot:",n),await _1(t,n)}}async function _1(t,e,r){if(!gf(e))throw e;t.Ea.add(1),await B0(t),t.Ra.set("Offline"),r||(r=()=>X6(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ut(Su,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await kg(t)})}function tT(t,e){return e().catch(r=>_1(t,r,e))}async function Cg(t){const e=gr(t),r=Pc(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_5;for(;ZF(e);)try{const i=await jF(e.localStore,n);if(i===null){e.Ta.length===0&&r.L_();break}n=i.batchId,JF(e,i)}catch(i){await _1(e,i)}rT(e)&&nT(e)}function ZF(t){return ju(t)&&t.Ta.length<10}function JF(t,e){t.Ta.push(e);const r=Pc(t);r.O_()&&r.X_&&r.ea(e.mutations)}function rT(t){return ju(t)&&!Pc(t).x_()&&t.Ta.length>0}function nT(t){Pc(t).start()}async function eD(t){Pc(t).ra()}async function tD(t){const e=Pc(t);for(const r of t.Ta)e.ea(r.mutations)}async function rD(t,e,r){const n=t.Ta.shift(),i=T5.from(n,e,r);await tT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Cg(t)}async function nD(t,e){e&&Pc(t).X_&&await async function(n,i){if(function(a){return F6(a)&&a!==nt.ABORTED}(i.code)){const s=n.Ta.shift();Pc(n).B_(),await tT(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Cg(n)}}(t,e),rT(t)&&nT(t)}async function C4(t,e){const r=gr(t);r.asyncQueue.verifyOperationInProgress(),Ut(Su,"RemoteStore received new credentials");const n=ju(r);r.Ea.add(3),await B0(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await kg(r)}async function iD(t,e){const r=gr(t);e?(r.Ea.delete(2),await kg(r)):e||(r.Ea.add(2),await B0(r),r.Ra.set("Unknown"))}function yf(t){return t.ma||(t.ma=function(r,n,i){const s=gr(r);return s.sa(),new zF(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:GF.bind(null,t),t_:YF.bind(null,t),r_:XF.bind(null,t),H_:QF.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),O5(t)?M5(t):t.Ra.set("Unknown")):(await t.ma.stop(),eT(t))})),t.ma}function Pc(t){return t.fa||(t.fa=function(r,n,i){const s=gr(r);return s.sa(),new HF(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:eD.bind(null,t),r_:nD.bind(null,t),ta:tD.bind(null,t),na:rD.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Cg(t)):(await t.fa.stop(),t.Ta.length>0&&(Ut(Su,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,r,n,i,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new zo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,s){const a=Date.now()+n,o=new B5(e,r,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new It(nt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function U5(t,e){if(Sl("AsyncQueue",`${e}: ${t}`),gf(t))return new It(nt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{static emptySet(e){return new Fh(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||or.comparator(r.key,n.key):(r,n)=>or.comparator(r.key,n.key),this.keyedMap=cd(),this.sortedSet=new Yn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Fh)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Fh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(){this.ga=new Yn(or.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):lr(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class of{constructor(e,r,n,i,s,a,o,l,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,i,s){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new of(e,r,Fh.emptySet(r),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class aD{constructor(){this.queries=L4(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=gr(r),s=i.queries;i.queries=L4(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new It(nt.ABORTED,"Firestore shutting down"))}}function L4(){return new Pu(t=>w6(t),bg)}async function V5(t,e){const r=gr(t);let n=3;const i=e.query;let s=r.queries.get(i);s?!s.ba()&&e.Da()&&(n=2):(s=new sD,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(i,!0);break;case 1:s.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(a){const o=U5(a,`Initialization of query '${th(e.query)}' failed`);return void e.onError(o)}r.queries.set(i,s),s.Sa.push(e),e.va(r.onlineState),s.wa&&e.Fa(s.wa)&&H5(r)}async function z5(t,e){const r=gr(t),n=e.query;let i=3;const s=r.queries.get(n);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function oD(t,e){const r=gr(t);let n=!1;for(const i of e){const s=i.query,a=r.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(n=!0);a.wa=i}}n&&H5(r)}function lD(t,e,r){const n=gr(t),i=n.queries.get(e);if(i)for(const s of i.Sa)s.onError(r);n.queries.delete(e)}function H5(t){t.Ca.forEach(e=>{e.next()})}var Gy,P4;(P4=Gy||(Gy={})).Ma="default",P4.Cache="cache";class q5{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new of(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=of.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e){this.key=e}}class sT{constructor(e){this.key=e}}class cD{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Br(),this.mutatedKeys=Br(),this.eu=_6(e),this.tu=new Fh(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new I4,i=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),f=Sg(this.query,d)?d:null,v=!!p&&this.mutatedKeys.has(p.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let b=!1;p&&f?p.data.isEqual(f.data)?v!==y&&(n.track({type:3,doc:f}),b=!0):this.su(p,f)||(n.track({type:2,doc:f}),b=!0,(l&&this.eu(f,l)>0||u&&this.eu(f,u)<0)&&(o=!0)):!p&&f?(n.track({type:0,doc:f}),b=!0):p&&!f&&(n.track({type:1,doc:p}),b=!0,(l||u)&&(o=!0)),b&&(f?(a=a.add(f),s=y?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{tu:a,iu:n,Cs:o,mutatedKeys:s}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,d)=>function(f,v){const y=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lr(20277,{Rt:b})}};return y(f)-y(v)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(n),i=i??!1;const o=r&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,a.length!==0||u?{snapshot:new of(this.query,e.tu,s,a,e.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new I4,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Br(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new sT(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new iT(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=Br();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return of.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $5="SyncEngine";class uD{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class hD{constructor(e){this.key=e,this.hu=!1}}class fD{constructor(e,r,n,i,s,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Pu(o=>w6(o),bg),this.Iu=new Map,this.Eu=new Set,this.du=new Yn(or.comparator),this.Au=new Map,this.Ru=new I5,this.Vu={},this.mu=new Map,this.fu=af.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dD(t,e,r=!0){const n=hT(t);let i;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await aT(n,e,r,!0),i}async function pD(t,e){const r=hT(t);await aT(r,e,!0,!1)}async function aT(t,e,r,n){const i=await RF(t.localStore,Ho(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await mD(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&r&&Z6(t.remoteStore,i),o}async function mD(t,e,r,n,i){t.pu=(d,p,f)=>async function(y,b,w,S){let k=b.view.ru(w);k.Cs&&(k=await A4(y.localStore,b.query,!1).then(({documents:E})=>b.view.ru(E,k)));const R=S&&S.targetChanges.get(b.targetId),q=S&&S.targetMismatches.get(b.targetId)!=null,K=b.view.applyChanges(k,y.isPrimaryClient,R,q);return R4(y,b.targetId,K.au),K.snapshot}(t,d,p,f);const s=await A4(t.localStore,e,!0),a=new cD(e,s.Qs),o=a.ru(s.documents),l=O0.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),u=a.applyChanges(o,t.isPrimaryClient,l);R4(t,r,u.au);const h=new uD(e,r,a);return t.Tu.set(e,h),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),u.snapshot}async function gD(t,e,r){const n=gr(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);if(s.length>1)return n.Iu.set(i.targetId,s.filter(a=>!bg(a,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Wy(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&F5(n.remoteStore,i.targetId),Yy(n,i.targetId)}).catch(mf)):(Yy(n,i.targetId),await Wy(n.localStore,i.targetId,!0))}async function xD(t,e){const r=gr(t),n=r.Tu.get(e),i=r.Iu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),F5(r.remoteStore,n.targetId))}async function yD(t,e,r){const n=ED(t);try{const i=await function(a,o){const l=gr(a),u=Dn.now(),h=o.reduce((f,v)=>f.add(v.key),Br());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let v=Al(),y=Br();return l.Ns.getEntries(f,h).next(b=>{v=b,v.forEach((w,S)=>{S.isValidDocument()||(y=y.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,v)).next(b=>{d=b;const w=[];for(const S of o){const k=FR(S,d.get(S.key).overlayedDocument);k!=null&&w.push(new Hc(S.key,k,f6(k.value.mapValue),Ni.exists(!0)))}return l.mutationQueue.addMutationBatch(f,u,w,o)}).next(b=>{p=b;const w=b.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(f,b.batchId,w)})}).then(()=>({batchId:p.batchId,changes:S6(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let u=a.Vu[a.currentUser.toKey()];u||(u=new Yn(Or)),u=u.insert(o,l),a.Vu[a.currentUser.toKey()]=u}(n,i.batchId,r),await U0(n,i.changes),await Cg(n.remoteStore)}catch(i){const s=U5(i,"Failed to persist write");r.reject(s)}}async function oT(t,e){const r=gr(t);try{const n=await LF(r.localStore,e);e.targetChanges.forEach((i,s)=>{const a=r.Au.get(s);a&&(Kr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Kr(a.hu,14607):i.removedDocuments.size>0&&(Kr(a.hu,42227),a.hu=!1))}),await U0(r,n,e)}catch(n){await mf(n)}}function j4(t,e,r){const n=gr(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=gr(a);l.onlineState=o;let u=!1;l.queries.forEach((h,d)=>{for(const p of d.Sa)p.va(o)&&(u=!0)}),u&&H5(l)}(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function vD(t,e,r){const n=gr(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Au.get(e),s=i&&i.key;if(s){let a=new Yn(or.comparator);a=a.insert(s,zi.newNoDocument(s,fr.min()));const o=Br().add(s),l=new Ng(fr.min(),new Map,new Yn(Or),a,o);await oT(n,l),n.du=n.du.remove(s),n.Au.delete(e),W5(n)}else await Wy(n.localStore,e,!1).then(()=>Yy(n,e,r)).catch(mf)}async function wD(t,e){const r=gr(t),n=e.batch.batchId;try{const i=await IF(r.localStore,e);cT(r,n,null),lT(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await U0(r,i)}catch(i){await mf(i)}}async function _D(t,e,r){const n=gr(t);try{const i=await function(a,o){const l=gr(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,o).next(d=>(Kr(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(n.localStore,e);cT(n,e,r),lT(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await U0(n,i)}catch(i){await mf(i)}}function lT(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function cT(t,e,r){const n=gr(t);let i=n.Vu[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(r?s.reject(r):s.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function Yy(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||uT(t,n)})}function uT(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(F5(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),W5(t))}function R4(t,e,r){for(const n of r)n instanceof iT?(t.Ru.addReference(n.key,e),bD(t,n)):n instanceof sT?(Ut($5,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||uT(t,n.key)):lr(19791,{wu:n})}function bD(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Ut($5,"New document in limbo: "+r),t.Eu.add(n),W5(t))}function W5(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new or(wn.fromString(e)),n=t.fu.next();t.Au.set(n,new hD(r)),t.du=t.du.insert(r,n),Z6(t.remoteStore,new lc(Ho(_g(r.path)),n,"TargetPurposeLimboResolution",vg.ce))}}async function U0(t,e,r){const n=gr(t),i=[],s=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{a.push(n.pu(l,e,r).then(u=>{var h;if((u||r)&&n.isPrimaryClient){const d=u?!u.fromCache:(h=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:h.current;n.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=P5.As(l.targetId,u);s.push(d)}}))}),await Promise.all(a),n.Pu.H_(i),await async function(l,u){const h=gr(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>lt.forEach(u,p=>lt.forEach(p.Es,f=>h.persistence.referenceDelegate.addReference(d,p.targetId,f)).next(()=>lt.forEach(p.ds,f=>h.persistence.referenceDelegate.removeReference(d,p.targetId,f)))))}catch(d){if(!gf(d))throw d;Ut(j5,"Failed to update sequence numbers: "+d)}for(const d of u){const p=d.targetId;if(!d.fromCache){const f=h.Ms.get(p),v=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(v);h.Ms=h.Ms.insert(p,y)}}}(n.localStore,s))}async function SD(t,e){const r=gr(t);if(!r.currentUser.isEqual(e)){Ut($5,"User change. New user:",e.toKey());const n=await Y6(r.localStore,e);r.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new It(nt.CANCELLED,a))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await U0(r,n.Ls)}}function AD(t,e){const r=gr(t),n=r.Au.get(e);if(n&&n.hu)return Br().add(n.key);{let i=Br();const s=r.Iu.get(e);if(!s)return i;for(const a of s){const o=r.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function hT(t){const e=gr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vD.bind(null,e),e.Pu.H_=oD.bind(null,e.eventManager),e.Pu.yu=lD.bind(null,e.eventManager),e}function ED(t){const e=gr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_D.bind(null,e),e}class b1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return CF(this.persistence,new NF,e.initialUser,this.serializer)}Cu(e){return new G6(L5.mi,this.serializer)}Du(e){return new DF}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}b1.provider={build:()=>new b1};class ND extends b1{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Kr(this.persistence.referenceDelegate instanceof w1,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new hF(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Ws.withCacheSize(this.cacheSizeBytes):Ws.DEFAULT;return new G6(n=>w1.mi(n,r),this.serializer)}}class Xy{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>j4(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=SD.bind(null,this.syncEngine),await iD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aD}()}createDatastore(e){const r=Tg(e.databaseInfo.databaseId),n=function(s){return new VF(s)}(e.databaseInfo);return function(s,a,o,l){return new $F(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,s,a,o){return new KF(n,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>j4(this.syncEngine,r,0),function(){return T4.v()?new T4:new MF}())}createSyncEngine(e,r){return function(i,s,a,o,l,u,h){const d=new fD(i,s,a,o,l,u);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const s=gr(i);Ut(Su,"RemoteStore shutting down."),s.Ea.add(5),await B0(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}Xy.provider={build:()=>new Xy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Sl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new It(nt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(i,s){const a=gr(i),o={documents:s.map(d=>v1(a.serializer,d))},l=await a.Ho("BatchGetDocuments",a.serializer.databaseId,wn.emptyPath(),o,s.length),u=new Map;l.forEach(d=>{const p=GR(a.serializer,d);u.set(p.key.toString(),p)});const h=[];return s.forEach(d=>{const p=u.get(d.toString());Kr(!!p,55234,{key:d}),h.push(p)}),h}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new M0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const i=or.fromPath(n);this.mutations.push(new R6(i,this.precondition(i)))}),await async function(n,i){const s=gr(n),a={writes:i.map(o=>H6(s.serializer,o))};await s.Go("Commit",s.serializer.databaseId,wn.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw lr(50498,{Gu:e.constructor.name});r=fr.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new It(nt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(fr.min())?Ni.exists(!1):Ni.updateTime(r):Ni.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(fr.min()))throw new It(nt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ni.updateTime(r)}return Ni.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,r,n,i,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=i,this.deferred=s,this.zu=n.maxAttempts,this.M_=new R5(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new TD(this.datastore),r=this.Hu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(i=>{this.Yu(i)}))}).catch(n=>{this.Yu(n)})})}Hu(e){try{const r=this.updateFunction(e);return!F0(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!F6(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc="FirestoreClient";class CD{constructor(e,r,n,i,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=bs.UNAUTHENTICATED,this.clientId=w5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async a=>{Ut(jc,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Ut(jc,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=U5(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function K2(t,e){t.asyncQueue.verifyOperationInProgress(),Ut(jc,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await Y6(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function F4(t,e){t.asyncQueue.verifyOperationInProgress();const r=await ID(t);Ut(jc,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>C4(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>C4(e.remoteStore,i)),t._onlineComponents=e}async function ID(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ut(jc,"Using user provided OfflineComponentProvider");try{await K2(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===nt.FAILED_PRECONDITION||i.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;tf("Error using user provided cache. Falling back to memory cache: "+r),await K2(t,new b1)}}else Ut(jc,"Using default OfflineComponentProvider"),await K2(t,new ND(void 0));return t._offlineComponents}async function G5(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ut(jc,"Using user provided OnlineComponentProvider"),await F4(t,t._uninitializedComponentsProvider._online)):(Ut(jc,"Using default OnlineComponentProvider"),await F4(t,new Xy))),t._onlineComponents}function LD(t){return G5(t).then(e=>e.syncEngine)}function PD(t){return G5(t).then(e=>e.datastore)}async function S1(t){const e=await G5(t),r=e.eventManager;return r.onListen=dD.bind(null,e.syncEngine),r.onUnlisten=gD.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=pD.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=xD.bind(null,e.syncEngine),r}function jD(t,e,r={}){const n=new zo;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const h=new K5({next:p=>{h.Nu(),a.enqueueAndForget(()=>z5(s,d));const f=p.docs.has(o);!f&&p.fromCache?u.reject(new It(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&p.fromCache&&l&&l.source==="server"?u.reject(new It(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new q5(_g(o.path),h,{includeMetadataChanges:!0,qa:!0});return V5(s,d)}(await S1(t),t.asyncQueue,e,r,n)),n.promise}function RD(t,e,r={}){const n=new zo;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const h=new K5({next:p=>{h.Nu(),a.enqueueAndForget(()=>z5(s,d)),p.fromCache&&l.source==="server"?u.reject(new It(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new q5(o,h,{includeMetadataChanges:!0,qa:!0});return V5(s,d)}(await S1(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="firestore.googleapis.com",M4=!0;class O4{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new It(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dT,this.ssl=M4}else this.host=e.host,this.ssl=e.ssl??M4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=K6;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cF)throw new It(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Y7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fT(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new It(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new It(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new It(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ig{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new O4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new It(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new It(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new O4(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new B7;switch(n.type){case"firstParty":return new H7(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new It(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=D4.get(r);n&&(Ut("ComponentProvider","Removing Datastore"),D4.delete(r),n.terminate())}(this),Promise.resolve()}}function FD(t,e,r,n={}){var u;t=As(t,Ig);const i=x5(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${r}`;i&&(fj(`https://${o}`),gj("Firestore",!0)),s.host!==dT&&s.host!==o&&tf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:n};if(!h1(l,a)&&(t._setSettings(l),n.mockUserToken)){let h,d;if(typeof n.mockUserToken=="string")h=n.mockUserToken,d=bs.MOCK_USER;else{h=dj(n.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new It(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new bs(p)}t._authCredentials=new U7(new e6(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Cl(this.firestore,e,this._query)}}class Wn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ac(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}toJSON(){return{type:Wn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(R0(r,Wn._jsonSchema))return new Wn(e,n||null,new or(wn.fromString(r.referencePath)))}}Wn._jsonSchemaVersion="firestore/documentReference/1.0",Wn._jsonSchema={type:Ti("string",Wn._jsonSchemaVersion),referencePath:Ti("string")};class Ac extends Cl{constructor(e,r,n){super(e,r,_g(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new or(e))}withConverter(e){return new Ac(this.firestore,e,this._path)}}function mi(t,e,...r){if(t=Na(t),t6("collection","path",e),t instanceof Ig){const n=wn.fromString(e,...r);return Qb(n),new Ac(t,null,n)}{if(!(t instanceof Wn||t instanceof Ac))throw new It(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(wn.fromString(e,...r));return Qb(n),new Ac(t.firestore,null,n)}}function zr(t,e,...r){if(t=Na(t),arguments.length===1&&(e=w5.newId()),t6("doc","path",e),t instanceof Ig){const n=wn.fromString(e,...r);return Xb(n),new Wn(t,null,new or(n))}{if(!(t instanceof Wn||t instanceof Ac))throw new It(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(wn.fromString(e,...r));return Xb(n),new Wn(t.firestore,t instanceof Ac?t.converter:null,new or(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4="AsyncQueue";class U4{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new R5(this,"async_queue_retry"),this._c=()=>{const n=W2();n&&Ut(B4,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=W2();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=W2();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new zo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!gf(e))throw e;Ut(B4,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,Sl("INTERNAL UNHANDLED ERROR: ",V4(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=B5.createAndSchedule(this,e,r,n,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&lr(47125,{Pc:V4(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function V4(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class _o extends Ig{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new U4,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new U4(e),this._firestoreClient=void 0,await e}}}function DD(t,e){const r=typeof t=="object"?t:N7(),n=typeof t=="string"?t:e,i=_7(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=uj("firestore");s&&FD(i,...s)}return i}function vf(t){if(t._terminated)throw new It(nt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||MD(t),t._firestoreClient}function MD(t){var n,i,s;const e=t._freezeSettings(),r=function(o,l,u,h){return new oR(o,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,fT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new CD(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ya(os.fromBase64String(e))}catch(r){throw new It(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ya(os.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ya._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(R0(e,ya._jsonSchema))return ya.fromBase64String(e.bytes)}}ya._jsonSchemaVersion="firestore/bytes/1.0",ya._jsonSchema={type:Ti("string",ya._jsonSchemaVersion),bytes:Ti("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new It(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ts(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new It(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new It(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Or(this._lat,e._lat)||Or(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qo._jsonSchemaVersion}}static fromJSON(e){if(R0(e,qo._jsonSchema))return new qo(e.latitude,e.longitude)}}qo._jsonSchemaVersion="firestore/geoPoint/1.0",qo._jsonSchema={type:Ti("string",qo._jsonSchemaVersion),latitude:Ti("number"),longitude:Ti("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:$o._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(R0(e,$o._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new $o(e.vectorValues);throw new It(nt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$o._jsonSchemaVersion="firestore/vectorValue/1.0",$o._jsonSchema={type:Ti("string",$o._jsonSchemaVersion),vectorValues:Ti("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=/^__.*__$/;class BD{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Hc(e,this.data,this.fieldMask,r,this.fieldTransforms):new D0(e,this.data,r,this.fieldTransforms)}}class pT{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Hc(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function mT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lr(40011,{Ac:t})}}class Y5{constructor(e,r,n,i,s,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Y5({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return A1(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mT(this.Ac)&&OD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class UD{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Tg(e)}Cc(e,r,n,i=!1){return new Y5({Ac:e,methodName:r,Dc:n,path:ts.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _f(t){const e=t._freezeSettings(),r=Tg(t._databaseId);return new UD(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Lg(t,e,r,n,i,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,r,i);ew("Data must be an object, but it was:",a,n);const o=gT(n,a);let l,u;if(s.merge)l=new wa(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=Qy(e,d,r);if(!a.contains(p))throw new It(nt.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);yT(h,p)||h.push(p)}l=new wa(h),u=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=a.fieldTransforms;return new BD(new Ds(o),l,u)}class Pg extends V0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pg}}class X5 extends V0{_toFieldTransform(e){return new L6(e.path,new f0)}isEqual(e){return e instanceof X5}}class Q5 extends V0{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new m0(e.serializer,N6(e.serializer,this.Fc));return new L6(e.path,r)}isEqual(e){return e instanceof Q5&&this.Fc===e.Fc}}function Z5(t,e,r,n){const i=t.Cc(1,e,r);ew("Data must be an object, but it was:",i,n);const s=[],a=Ds.empty();zc(n,(l,u)=>{const h=tw(e,l,r);u=Na(u);const d=i.yc(h);if(u instanceof Pg)s.push(h);else{const p=z0(u,d);p!=null&&(s.push(h),a.set(h,p))}});const o=new wa(s);return new pT(a,o,i.fieldTransforms)}function J5(t,e,r,n,i,s){const a=t.Cc(1,e,r),o=[Qy(e,n,r)],l=[i];if(s.length%2!=0)throw new It(nt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)o.push(Qy(e,s[p])),l.push(s[p+1]);const u=[],h=Ds.empty();for(let p=o.length-1;p>=0;--p)if(!yT(u,o[p])){const f=o[p];let v=l[p];v=Na(v);const y=a.yc(f);if(v instanceof Pg)u.push(f);else{const b=z0(v,y);b!=null&&(u.push(f),h.set(f,b))}}const d=new wa(u);return new pT(h,d,a.fieldTransforms)}function VD(t,e,r,n=!1){return z0(r,t.Cc(n?4:3,e))}function z0(t,e){if(xT(t=Na(t)))return ew("Unsupported field value:",e,t),gT(t,e);if(t instanceof V0)return function(n,i){if(!mT(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,i){const s=[];let a=0;for(const o of n){let l=z0(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(n,i){if((n=Na(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return N6(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Dn.fromDate(n);return{timestampValue:y1(i.serializer,s)}}if(n instanceof Dn){const s=new Dn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:y1(i.serializer,s)}}if(n instanceof qo)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ya)return{bytesValue:B6(i.serializer,n._byteString)};if(n instanceof Wn){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:C5(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof $o)return function(a,o){return{mapValue:{fields:{[u6]:{stringValue:h6},[m1]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return N5(o.serializer,u)})}}}}}}(n,i);throw i.Sc(`Unsupported field value: ${yg(n)}`)}(t,e)}function gT(t,e){const r={};return i6(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zc(t,(n,i)=>{const s=z0(i,e.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function xT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Dn||t instanceof qo||t instanceof ya||t instanceof Wn||t instanceof V0||t instanceof $o)}function ew(t,e,r){if(!xT(r)||!r6(r)){const n=yg(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function Qy(t,e,r){if((e=Na(e))instanceof wf)return e._internalPath;if(typeof e=="string")return tw(t,e);throw A1("Field path arguments must be of type string or ",t,!1,void 0,r)}const zD=new RegExp("[~\\*/\\[\\]]");function tw(t,e,r){if(e.search(zD)>=0)throw A1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new wf(...e.split("."))._internalPath}catch{throw A1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function A1(t,e,r,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new It(nt.INVALID_ARGUMENT,o+t+l)}function yT(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,r,n,i,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(jg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class HD extends E1{data(){return super.data()}}function jg(t,e){return typeof e=="string"?tw(t,e):e instanceof wf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new It(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rw{}class nw extends rw{}function Sh(t,e,...r){let n=[];e instanceof rw&&n.push(e),n=n.concat(r),function(s){const a=s.filter(l=>l instanceof iw).length,o=s.filter(l=>l instanceof Rg).length;if(a>1||a>0&&o>0)throw new It(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class Rg extends nw{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Rg(e,r,n)}_apply(e){const r=this._parse(e);return wT(e._query,r),new Cl(e.firestore,e.converter,zy(e._query,r))}_parse(e){const r=_f(e.firestore);return function(s,a,o,l,u,h,d){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new It(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){q4(d,h);const v=[];for(const y of d)v.push(H4(l,s,y));p={arrayValue:{values:v}}}else p=H4(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||q4(d,h),p=VD(o,a,d,h==="in"||h==="not-in");return Ei.create(u,h,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function qD(t,e,r){const n=e,i=jg("where",t);return Rg._create(i,n,r)}class iw extends rw{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new iw(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:wo.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)wT(a,l),a=zy(a,l)}(e._query,r),new Cl(e.firestore,e.converter,zy(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sw extends nw{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new sw(e,r)}_apply(e){const r=function(i,s,a){if(i.startAt!==null)throw new It(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new It(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new h0(s,a)}(e._query,this._field,this._direction);return new Cl(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new xf(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function $D(t,e="asc"){const r=e,n=jg("orderBy",t);return sw._create(n,r)}class aw extends nw{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new aw(e,r,n)}_apply(e){return new Cl(e.firestore,e.converter,x1(e._query,this._limit,this._limitType))}}function WD(t){return X7("limit",t),aw._create("limit",t,"F")}function H4(t,e,r){if(typeof(r=Na(r))=="string"){if(r==="")throw new It(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!v6(e)&&r.indexOf("/")!==-1)throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(wn.fromString(r));if(!or.isDocumentKey(n))throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return s4(t,new or(n))}if(r instanceof Wn)return s4(t,r._key);throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yg(r)}.`)}function q4(t,e){if(!Array.isArray(t)||t.length===0)throw new It(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wT(t,e){const r=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new It(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new It(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class _T{convertValue(e,r="none"){switch(Lc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Ic(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw lr(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return zc(e,(i,s)=>{n[i]=this.convertValue(s,r)}),n}convertVectorValue(e){var n,i,s;const r=(s=(i=(n=e.fields)==null?void 0:n[m1].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>gi(a.doubleValue));return new $o(r)}convertGeoPoint(e){return new qo(gi(e.latitude),gi(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=wg(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(l0(e));default:return null}}convertTimestamp(e){const r=Cc(e);return new Dn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=wn.fromString(e);Kr(W6(n),9688,{name:e});const i=new c0(n.get(1),n.get(3)),s=new or(n.popFirst(5));return i.isEqual(r)||Sl(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class KD extends _T{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,r)}}class Ah{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ec extends E1{constructor(e,r,n,i,s,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Lm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(jg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new It(nt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Ec._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Ec._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ec._jsonSchema={type:Ti("string",Ec._jsonSchemaVersion),bundleSource:Ti("string","DocumentSnapshot"),bundleName:Ti("string"),bundle:Ti("string")};class Lm extends Ec{data(e={}){return super.data(e)}}class du{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Ah(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Lm(this._firestore,this._userDataWriter,n.key,n,new Ah(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new It(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new Lm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Ah(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new Lm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Ah(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:GD(o.type),doc:l,oldIndex:u,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new It(nt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=du._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=w5.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lr(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t){t=As(t,Wn);const e=As(t.firestore,_o);return jD(vf(e),t._key).then(r=>bT(e,t,r))}du._jsonSchemaVersion="firestore/querySnapshot/1.0",du._jsonSchema={type:Ti("string",du._jsonSchemaVersion),bundleSource:Ti("string","QuerySnapshot"),bundleName:Ti("string"),bundle:Ti("string")};class Dg extends _T{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,r)}}function g0(t){t=As(t,Cl);const e=As(t.firestore,_o),r=vf(e),n=new Dg(e);return vT(t._query),RD(r,t._query).then(i=>new du(e,n,t,i))}function q0(t,e,r){t=As(t,Wn);const n=As(t.firestore,_o),i=Fg(t.converter,e,r);return $0(n,[Lg(_f(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Ni.none())])}function Ua(t,e,r,...n){t=As(t,Wn);const i=As(t.firestore,_o),s=_f(i);let a;return a=typeof(e=Na(e))=="string"||e instanceof wf?J5(s,"updateDoc",t._key,e,r,n):Z5(s,"updateDoc",t._key,e),$0(i,[a.toMutation(t._key,Ni.exists(!0))])}function tc(t){return $0(As(t.firestore,_o),[new M0(t._key,Ni.none())])}function Do(t,e){const r=As(t.firestore,_o),n=zr(t),i=Fg(t.converter,e);return $0(r,[Lg(_f(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Ni.exists(!1))]).then(()=>n)}function Wu(t,...e){var l,u,h;t=Na(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||z4(e[n])||(r=e[n++]);const i={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(z4(e[n])){const d=e[n];e[n]=(l=d.next)==null?void 0:l.bind(d),e[n+1]=(u=d.error)==null?void 0:u.bind(d),e[n+2]=(h=d.complete)==null?void 0:h.bind(d)}let s,a,o;if(t instanceof Wn)a=As(t.firestore,_o),o=_g(t._key.path),s={next:d=>{e[n]&&e[n](bT(a,t,d))},error:e[n+1],complete:e[n+2]};else{const d=As(t,Cl);a=As(d.firestore,_o),o=d._query;const p=new Dg(a);s={next:f=>{e[n]&&e[n](new du(a,p,d,f))},error:e[n+1],complete:e[n+2]},vT(t._query)}return function(p,f,v,y){const b=new K5(y),w=new q5(f,b,v);return p.asyncQueue.enqueueAndForget(async()=>V5(await S1(p),w)),()=>{b.Nu(),p.asyncQueue.enqueueAndForget(async()=>z5(await S1(p),w))}}(vf(a),o,i,s)}function $0(t,e){return function(n,i){const s=new zo;return n.asyncQueue.enqueueAndForget(async()=>yD(await LD(n),i,s)),s.promise}(vf(t),e)}function bT(t,e,r){const n=r.docs.get(e._key),i=new Dg(t);return new Ec(t,i,e._key,n,new Ah(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=_f(e)}set(e,r,n){this._verifyNotCommitted();const i=cc(e,this._firestore),s=Fg(i.converter,r,n),a=Lg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(a.toMutation(i._key,Ni.none())),this}update(e,r,n,...i){this._verifyNotCommitted();const s=cc(e,this._firestore);let a;return a=typeof(r=Na(r))=="string"||r instanceof wf?J5(this._dataReader,"WriteBatch.update",s._key,r,n,i):Z5(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(a.toMutation(s._key,Ni.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=cc(e,this._firestore);return this._mutations=this._mutations.concat(new M0(r._key,Ni.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new It(nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cc(t,e){if((t=Na(t)).firestore!==e)throw new It(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=_f(e)}get(e){const r=cc(e,this._firestore),n=new KD(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return lr(24041);const s=i[0];if(s.isFoundDocument())return new E1(this._firestore,n,s.key,s,r.converter);if(s.isNoDocument())return new E1(this._firestore,n,r._key,null,r.converter);throw lr(18433,{doc:s})})}set(e,r,n){const i=cc(e,this._firestore),s=Fg(i.converter,r,n),a=Lg(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,n);return this._transaction.set(i._key,a),this}update(e,r,n,...i){const s=cc(e,this._firestore);let a;return a=typeof(r=Na(r))=="string"||r instanceof wf?J5(this._dataReader,"Transaction.update",s._key,r,n,i):Z5(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(e){const r=cc(e,this._firestore);return this._transaction.delete(r._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD extends QD{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=cc(e,this._firestore),n=new Dg(this._firestore);return super.get(e).then(i=>new Ec(this._firestore,n,r._key,i._document,new Ah(!1,!1),r.converter))}}function ST(t,e,r){t=As(t,_o);const n={...YD,...r};return function(s){if(s.maxAttempts<1)throw new It(nt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,a,o){const l=new zo;return s.asyncQueue.enqueueAndForget(async()=>{const u=await PD(s);new kD(s.asyncQueue,u,o,a,l).ju()}),l.promise}(vf(t),i=>e(new ZD(t,i)),n)}function pi(){return new X5("serverTimestamp")}function AT(t){return new Q5("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(t){return vf(t=As(t,_o)),new XD(t,e=>$0(t,e))}(function(e,r=!0){(function(i){pf=i})(E7),d1(new s0("firestore",(n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new _o(new V7(n.getProvider("auth-internal")),new q7(a,n.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new It(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new c0(u.options.projectId,h)}(a,i),a);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Rh(Wb,Kb,e),Rh(Wb,Kb,"esm2020")})();const JD={apiKey:"AIzaSyCrUZenvUEPbAsZ2zXh27SuZAoBArvos5E",authDomain:"instaspec-dev.firebaseapp.com",projectId:"instaspec-dev",storageBucket:"instaspec-dev.firebasestorage.app",messagingSenderId:"847536725528",appId:"1:847536725528:web:0d10c3c1d405a292482d6d"},e9=qN(JD),t9="(default)",nr=DD(e9,t9),bf={loginLog:"instaspec:betaLoginLog",feedback:"instaspec:betaFeedback",accessRequests:"instaspec:betaAccessRequests"},ET=typeof window<"u",ow="betaUsage",kd=10,NT="betaLoginLogs",Mg=(t,e)=>{if(!ET)return e;try{const r=window.localStorage.getItem(t);return r?JSON.parse(r):e}catch(r){return console.warn(`Failed to parse localStorage key ${t}`,r),e}},Og=(t,e)=>{if(ET)try{window.localStorage.setItem(t,JSON.stringify(e))}catch(r){console.warn(`Failed to persist localStorage key ${t}`,r)}},Zy=["admin@techarix.com"],TT=["tester1@techarix.com"],N1="INSTASPECMASTER@2025",_i=(t="")=>t.trim().toLowerCase(),$4=()=>Math.random().toString(36).substring(2,6).toUpperCase(),W4=()=>`BETA-${$4()}-${$4()}`,Aa=new Map,pu=t=>t&&(TT.includes(t.email)?{...t,expiresAt:null}:t),kT="instaspec:betaUsers";let Oo=Mg(kT,[]).map(t=>({...t,email:_i(t.email)}));const CT=()=>Og(kT,Oo),K4=t=>Oo.find(e=>e.email===t)||null,r9=t=>(Oo=[...Oo.filter(r=>r.email!==t.email),t],CT(),t),n9=t=>{Oo=Oo.filter(e=>e.email!==t),CT()};async function lw(t){const e=_i(t);if(!e)return null;try{const r=zr(nr,"betaUsers",e),n=await H0(r);if(!n.exists()){const s=K4(e);if(!s)return null;const a=pu(s);return Aa.set(e,a),a}const i=pu({...n.data(),email:e});return Aa.set(e,i),i}catch(r){console.warn("Falling back to local beta user store",r);const n=K4(e);if(!n)return null;const i=pu(n);return Aa.set(e,i),i}}async function i9(){try{return(await g0(mi(nr,"betaUsers"))).docs.map(r=>{const n=r.data(),i=n.email||r.id,s=_i(i),a=pu({...n,email:s});return Aa.set(s,a),a})}catch(t){return console.warn("Failed to load beta users from Firestore, using local store.",t),Oo=(Oo||[]).map(e=>pu(e)),Oo.forEach(e=>Aa.set(e.email,e)),Oo}}async function Pm({email:t,code:e,plan:r="beta_tester",isAdmin:n=!1,hours:i=1,expiresAt:s}){const a=_i(t);if(!a)throw new Error("Missing email");const o=zr(nr,"betaUsers",a),l=Date.now(),u=await H0(o),h=u.exists()?u.data():null,d=(h==null?void 0:h.createdAt)||l,f=TT.includes(a)?null:typeof s=="number"?s:l+i*60*60*1e3,v={email:a,code:e,plan:r,isAdmin:n,expiresAt:f,updatedAt:l,createdAt:d};try{await q0(o,v,{merge:!0});const y=pu(v);return Aa.set(a,y),y}catch(y){console.warn("Failed to save beta user to Firestore. Using local store.",y);const b=pu(v);return r9(b),Aa.set(a,b),b}}async function s9(t){const e=_i(t);if(e)try{await tc(zr(nr,"betaUsers",e)),Aa.delete(e)}catch(r){console.warn("Failed to delete beta user from Firestore. Removing locally.",r),n9(e),Aa.delete(e)}}async function a9(t,e){if(!t||!e)return{status:"missing",user:null};const r=_i(t);if(e===N1&&Zy.includes(r)){const i={email:r,code:N1,plan:"beta_admin",isAdmin:!0,expiresAt:null,createdAt:Date.now(),updatedAt:Date.now()};return Aa.set(r,i),{status:"success",user:i}}const n=await lw(r);return n?n.code!==e?{status:"invalid_code",user:null}:n.expiresAt&&Date.now()>n.expiresAt?{status:"expired",user:null}:{status:"success",user:n}:{status:"not_found",user:null}}function o9(t){const e=_i(t);if(!e)return!1;if(Aa.has(e)){const r=Aa.get(e)||{};return typeof r.isAdmin=="boolean"?r.isAdmin:Zy.includes(e)||String(r.plan||"").toLowerCase()==="beta_admin"}return Zy.includes(e)}const G4=50,IT=20,fl=Mg(bf.loginLog,[]),l9=()=>Og(bf.loginLog,fl),LT=()=>zr(nr,"betaMetadata","loginStats"),c9=()=>fl.reduce((t,e)=>{const r=_i(e==null?void 0:e.email);return r&&(t[r]=(t[r]||0)+1),t},{}),u9=async t=>{try{await Do(mi(nr,NT),t),await q0(LT(),{totalLogins:AT(1)},{merge:!0})}catch(e){console.warn("Failed to persist login log to Firestore",e)}},h9=()=>{const t=fl.slice(-IT).reverse().map(e=>({...e}));return{totalLogins:fl.length,recentLogins:t}},f9=async(t={})=>{const e=LT();let r=0;try{const n=await H0(e);n.exists()&&(r=n.data().totalLogins||0)}catch(n){console.warn("Failed to read login stats summary",n)}try{const n=Sh(mi(nr,NT),$D("timestamp","desc"),WD(t.limit||IT)),s=(await g0(n)).docs.map(a=>a.data());return{totalLogins:r,recentLogins:s}}catch(n){console.warn("Failed to load login logs from Firestore",n);const i=h9();return{totalLogins:r,recentLogins:i.recentLogins}}};async function d9(t,e){if(!t)return;const r={email:_i(t),isAdmin:!!e,timestamp:Date.now()};fl.push(r),fl.length>G4&&fl.splice(0,fl.length-G4),l9(),u9(r);try{await q0(zr(nr,"betaUsers",r.email),{loginCount:AT(1)},{merge:!0})}catch(n){console.warn("Failed to increment loginCount",n)}}const Y4=t=>{const e=_i(t);return e?fl.some(r=>r.email===e):!1},p9=()=>{const t=Mg(bf.feedback,[]);return Array.isArray(t)?t.map(e=>({id:(e==null?void 0:e.id)||`fdbk_${Date.now()}`,email:_i((e==null?void 0:e.email)||""),createdAt:typeof(e==null?void 0:e.createdAt)=="number"?e.createdAt:Date.now(),context:(e==null?void 0:e.context)||"Other",message:(e==null?void 0:e.message)||"",imageDataUrl:(e==null?void 0:e.imageDataUrl)||null})):[]};let T1=p9();const m9=()=>Og(bf.feedback,T1),g9=()=>[...T1].sort((t,e)=>(e.createdAt||0)-(t.createdAt||0)),x9=({email:t,context:e,message:r,imageDataUrl:n})=>{const i={id:`fdbk_${Date.now()}`,email:_i(t),createdAt:Date.now(),context:e||"Other",message:r||"",imageDataUrl:n||null};return T1=[i,...T1],m9(),i},y9=()=>{const t=Mg(bf.accessRequests,[]);return Array.isArray(t)?t.map(e=>({id:(e==null?void 0:e.id)||`request_${Date.now()}`,email:_i((e==null?void 0:e.email)||""),name:(e==null?void 0:e.name)||"",organization:(e==null?void 0:e.organization)||"",reason:(e==null?void 0:e.reason)||"",createdAt:typeof(e==null?void 0:e.createdAt)=="number"?e.createdAt:Date.now()})):[]};let lf=y9();const PT=()=>Og(bf.accessRequests,lf),v9=()=>[...lf].sort((t,e)=>(e.createdAt||0)-(t.createdAt||0)),w9=({email:t,name:e,organization:r,reason:n})=>{const i={id:`request_${Date.now()}`,email:_i(t),name:(e==null?void 0:e.trim())||"",organization:(r==null?void 0:r.trim())||"",reason:(n==null?void 0:n.trim())||"",createdAt:Date.now()};return lf=[i,...lf],PT(),i},_9=t=>{t&&(lf=lf.filter(e=>e.id!==t),PT())};async function jT(t){const e=_i(t);if(!e)return{count:0,limit:kd};const r=zr(nr,ow,e),n=await H0(r);if(!n.exists())return{count:0,limit:kd};const i=n.data()||{};return{count:i.count||0,limit:i.limit||kd}}async function b9(t,e=kd){const r=_i(t);if(!r)return{allowed:!1,count:0,limit:e};const n=zr(nr,ow,r);return ST(nr,async i=>{const s=await i.get(n),a=s.exists()&&s.data().count||0;if(a>=e)return{allowed:!1,count:a,limit:e};const o=a+1;return i.set(n,{email:r,count:o,limit:e,updatedAt:Date.now()},{merge:!0}),{allowed:!0,count:o,limit:e}})}async function S9(t,e=24){const r=_i(t),n=Number(e);if(!r)throw new Error("Missing email");if(!Number.isFinite(n)||n<=0)throw new Error("Hours to extend must be a positive number.");const s=Aa.get(r)||await lw(r);if(!s)throw new Error("Beta user not found.");const a=Date.now(),l=(typeof s.expiresAt=="number"?Math.max(s.expiresAt,a):a)+n*60*60*1e3;return Pm({email:r,code:s.code,plan:s.plan||"beta_tester",isAdmin:!!s.isAdmin,expiresAt:l})}async function A9(t,e=5){const r=_i(t),n=Number(e);if(!r)throw new Error("Missing email");if(!Number.isFinite(n)||n<=0)throw new Error("Increment must be a positive number.");const i=zr(nr,ow,r);return ST(nr,async s=>{const a=await s.get(i),o=a.exists()?a.data():{},u=(o.limit||kd)+n,h=o.count||0;return s.set(i,{email:r,count:h,limit:u,updatedAt:Date.now()},{merge:!0}),{count:h,limit:u}})}const zp="instaspec:user",RT=we.createContext({user:null,login:()=>{},logout:()=>{}}),E9=({children:t})=>{const[e,r]=we.useState(()=>{if(typeof window>"u")return null;try{const u=window.localStorage.getItem(zp);if(!u)return null;const h=JSON.parse(u);return h.expiresAt&&h.expiresAt<=Date.now()?(window.localStorage.removeItem(zp),null):h}catch{return null}}),n=we.useRef(null),i=we.useCallback(u=>{if(!(u!=null&&u.email))return null;const h=u.email.trim().toLowerCase();if(!h)return null;const d=u.plan||(u.isAdmin?"beta_admin":"beta_tester");return{email:h,plan:d,isAdmin:typeof u.isAdmin=="boolean"?u.isAdmin:d==="beta_admin",expiresAt:typeof u.expiresAt=="number"?u.expiresAt:null}},[]),s=we.useCallback((u,h={})=>(r(null),null),[]),a=we.useCallback(async u=>{const h=(u||"").trim().toLowerCase();if(!h)return null;try{const d=await lw(h),p=!1;if(!d||d.expiresAt&&d.expiresAt<=Date.now())return s("expired-or-missing-latest",{latest:d});const f=i({...d,email:h});return f?(r(v=>v&&v.email===f.email&&v.plan===f.plan&&v.isAdmin===f.isAdmin&&v.expiresAt===f.expiresAt?v:f),f):s("mapped-user-invalid",{latest:d})}catch(d){return console.warn("Failed to verify beta session",d),null}},[s,i,e]);we.useEffect(()=>{typeof window>"u"||(e?window.localStorage.setItem(zp,JSON.stringify(e)):window.localStorage.removeItem(zp))},[e]),we.useEffect(()=>{if(n.current&&(clearTimeout(n.current),n.current=null),!e||!e.expiresAt)return;const u=e.expiresAt-Date.now();return u<=0?s("expired-timer",{msLeft:u}):(n.current=setTimeout(()=>{s("timer-signout")},u),()=>{n.current&&(clearTimeout(n.current),n.current=null)})},[e,s]),we.useEffect(()=>{e!=null&&e.email&&a(e.email)},[e==null?void 0:e.email,a]);const o=we.useCallback(u=>{const h=i(u);h&&(r(h),d9(h.email,h.isAdmin))},[i]),l=we.useCallback(()=>{s("manual-logout")},[s]);return c.jsx(RT.Provider,{value:{user:e,login:o,logout:l},children:t})},W0=()=>{const t=we.useContext(RT);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},X4=t=>{switch(t){case"missing":return"Enter your email and beta code to sign in.";case"invalid_code":case"not_found":return"We couldn't find a match for that email and beta code. Please check both and try again.";case"expired":return"Your beta code has expired. Please contact the admin for an extension or extended access.";default:return"We couldn't verify your beta access. Please try again."}},N9=({isOpen:t,onClose:e,onSuccess:r})=>{const{user:n,login:i}=W0(),[s,a]=we.useState(""),[o,l]=we.useState(""),[u,h]=we.useState(""),[d,p]=we.useState(!1),[f,v]=we.useState(!1),[y,b]=we.useState("form"),[w,S]=we.useState(""),[k,R]=we.useState("first"),q=we.useRef(!1),[K,E]=we.useState(!1),[C,A]=we.useState({email:"",name:"",organization:"",reason:""}),[D,N]=we.useState(""),[j,P]=we.useState(""),[se,ge]=we.useState(!1),ve=Ie=>{if(!Ie){S("");return}const L=Ie-Date.now();if(L<=0){S("Session has expired.");return}const O=Math.floor(L/(60*1e3)),B=Math.floor(O/60),z=O%60;B<=0?S(`Expires in ${z} min`):S(`Expires in ${B}h ${z.toString().padStart(2,"0")}m`)};if(we.useEffect(()=>{if(!t){a(""),l(""),h(""),p(!1),v(!1),b("form"),S(""),E(!1),A({email:"",name:"",organization:"",reason:""}),N(""),q.current=!1,R("first");return}n&&n.expiresAt&&(b("success"),ve(n.expiresAt),n.email&&!q.current&&(q.current=!0,R(Y4(n.email)?"returning":"first")))},[t,n]),!t)return null;const ye=async Ie=>{Ie.preventDefault(),h("");const L=s.trim().toLowerCase(),O=o.trim();if(!L||!O){h(X4("missing"));return}v(!0);try{const{status:B,user:z}=await a9(L,O);if(B!=="success"){h(X4(B));return}q.current=!0,R(Y4(L)?"returning":"first"),i({email:z.email,plan:z.plan||(z.isAdmin?"beta_admin":"beta_tester"),isAdmin:!!z.isAdmin,expiresAt:z.expiresAt}),b("success")}catch(B){console.error("Beta login failed:",B),h("We couldn't verify your beta access right now. Please try again.")}finally{v(!1)}},he=()=>{A(Ie=>({...Ie,email:s.trim()||Ie.email})),N(""),ge(!1),E(!0),P("")},_e=Ie=>{Ie.preventDefault();const L=C.email.trim().toLowerCase();if(!/\S+@\S+\.\S+/.test(L)){N("Enter a valid email so we can process your request.");return}ge(!0);try{w9({email:L,name:C.name,organization:C.organization,reason:C.reason}),N(""),E(!1),P(`Thank you for showing your interest!
Our team will contact you with a beta access code.
Alternatively, you can contact Mr. Riyasudeen via LinkedIn and share this email address for a beta access code.`)}catch(O){console.error("Failed to record access request",O),N("Could not submit your request right now. Please try again.")}finally{ge(!1)}},Ue=()=>{typeof r=="function"&&r(),e()};return c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:[c.jsx("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl transform transition-all duration-200 ease-out scale-95 opacity-0 animate-[fadeInUp_0.2s_ease-out_forwards]",children:y==="success"&&n?c.jsxs(c.Fragment,{children:[k==="returning"?c.jsxs(c.Fragment,{children:[c.jsxs("h2",{className:"mb-2 text-xl font-semibold text-gray-900",children:["Hey"," ",c.jsx("span",{className:"font-medium text-gray-900",children:n.email}),", welcome back!"]}),c.jsx("p",{className:"mb-2 text-sm text-gray-700",children:"We're excited to have you in the Beta again."}),c.jsx("p",{className:"mb-4 text-sm text-gray-700",children:"Pick up where you left off, your projects are waiting."})]}):c.jsxs(c.Fragment,{children:[c.jsxs("h2",{className:"mb-2 text-xl font-semibold text-gray-900",children:["You made it,"," ",c.jsx("span",{className:"font-medium text-gray-900",children:n.email}),"!"]}),c.jsx("p",{className:"mb-2 text-sm text-gray-700",children:"InstaSpec Beta access: Unlocked."}),c.jsx("p",{className:"mb-2 text-sm text-gray-700",children:"Start creating projects, exploring features, and shaping how teams build specs."}),c.jsx("p",{className:"mb-4 text-sm text-gray-700",children:"Your voice matters, hit that feedback button anytime!"})]}),w&&c.jsx("p",{className:"mb-4 text-xs text-gray-500",children:w}),c.jsx("div",{className:"mt-4 flex justify-end",children:c.jsx("button",{type:"button",onClick:Ue,className:"rounded-lg bg-blue-600 px-4 py-1.5 text-sm font-medium text-white hover:bg-blue-700",children:"Continue to InstaSpec"})})]}):c.jsxs(c.Fragment,{children:[c.jsx("h2",{className:"mb-1 text-xl font-semibold",children:"Sign in to the InstaSpec Beta"}),c.jsx("p",{className:"mb-4 text-sm text-gray-600",children:"You're early and that's awesome. Enter your email and your beta code to step inside and start exploring what's next."}),c.jsxs("form",{onSubmit:ye,className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Email"}),c.jsx("input",{type:"email",className:"w-full rounded-lg border px-3 py-2 text-sm text-gray-900 placeholder-gray-500 border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:s,onChange:Ie=>a(Ie.target.value),placeholder:"you@company.com",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Beta access code"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:d?"text":"password",className:"w-full rounded-lg border px-3 py-2 text-sm text-gray-900 placeholder-gray-500 border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 pr-20",value:o,onChange:Ie=>l(Ie.target.value),placeholder:"Enter the code you received",required:!0}),c.jsx("button",{type:"button",onClick:()=>p(Ie=>!Ie),className:"absolute inset-y-0 right-2 my-auto rounded-md px-2 text-xs font-medium text-gray-600 hover:bg-gray-100",children:d?"Hide":"Show"})]}),c.jsx("button",{type:"button",onClick:he,className:"mt-1 text-xs text-blue-600 hover:underline",children:"Need a new code? Request another."})]}),u&&c.jsx("p",{className:"text-xs text-red-600",children:u}),j&&c.jsx("div",{className:"mt-2 rounded-lg border border-green-100 bg-green-50 p-3 text-xs text-green-700 whitespace-pre-line",children:j}),c.jsxs("div",{className:"mt-2 flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:e,className:"rounded-lg px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:f,className:`rounded-lg bg-blue-600 px-4 py-1.5 text-sm font-medium text-white hover:bg-blue-700 ${f?"opacity-60 cursor-not-allowed":""}`,children:f?"Checking...":"Beta Login"})]})]})]})}),K&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 px-4",children:c.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Request Early Access"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Share a few details and we'll queue your beta invite."})]}),c.jsx("button",{onClick:()=>E(!1),className:"text-xs uppercase tracking-wide text-gray-500 hover:text-gray-900",children:"Close"})]}),c.jsxs("form",{onSubmit:_e,className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Email"}),c.jsx("input",{type:"email",value:C.email,onChange:Ie=>A(L=>({...L,email:Ie.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400",placeholder:"tester@example.com",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Your name"}),c.jsx("input",{type:"text",value:C.name,onChange:Ie=>A(L=>({...L,name:Ie.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400",placeholder:"Full name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Organization / Role"}),c.jsx("input",{type:"text",value:C.organization,onChange:Ie=>A(L=>({...L,organization:Ie.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400",placeholder:"Design Studio, Architect, etc."})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"What will you explore?"}),c.jsx("textarea",{value:C.reason,onChange:Ie=>A(L=>({...L,reason:Ie.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 h-24",placeholder:"Tell us why you need InstaSpec access."})]}),D&&c.jsx("p",{className:"text-xs text-red-600",children:D}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[c.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 text-sm rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:se,className:`px-4 py-2 text-sm rounded-lg bg-indigo-600 text-white hover:bg-indigo-500 ${se?"opacity-60 cursor-not-allowed":""}`,children:se?"Submitting...":"Join Beta Waitlist"})]})]})]})})]})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var T9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Vt=(t,e)=>{const r=we.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,...u},h)=>we.createElement("svg",{ref:h,...T9,width:i,height:i,stroke:n,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${k9(t)}`,o].join(" "),...u},[...e.map(([d,p])=>we.createElement(d,p)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=Vt("Accessibility",[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=Vt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=Vt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=Vt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=Vt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=Vt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=Vt("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=Vt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=Vt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Vt("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=Vt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=Vt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=Vt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=Vt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=Vt("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=Vt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=Vt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=Vt("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=Vt("DoorClosed",[["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14",key:"36qu9e"}],["path",{d:"M2 20h20",key:"owomy5"}],["path",{d:"M14 12v.01",key:"xfcn54"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=Vt("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=Vt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=Vt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=Vt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=Vt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=Vt("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=Vt("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=Vt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=Vt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=Vt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=Vt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=Vt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=Vt("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=Vt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=Vt("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=Vt("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=Vt("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=Vt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=Vt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=Vt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=Vt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=Vt("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=Vt("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=Vt("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=Vt("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=Vt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=Vt("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=Vt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=Vt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=Vt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=Vt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=Vt("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=Vt("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=Vt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=Vt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=Vt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=Vt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=Vt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=Vt("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=Vt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=Vt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=Vt("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=Vt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=Vt("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=Vt("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=Vt("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=Vt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=Vt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=Vt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),iM=t=>{if(!t)return"Just now";const e=Date.now()-t,r=Math.floor(e/(1e3*60));if(r<1)return"Just now";if(r<60)return`${r}m ago`;const n=Math.floor(r/60);return n<24?`${n}h ago`:`${Math.floor(n/24)}d ago`},Q2=10,Zf={hours:"24",downloads:"5"},UT=({isOpen:t,onClose:e})=>{const[r,n]=we.useState([]),[i,s]=we.useState({totalLogins:0,recentLogins:[]}),[a,o]=we.useState([]),[l,u]=we.useState([]),[h,d]=we.useState(null),[p,f]=we.useState(""),[v,y]=we.useState(!1),[b,w]=we.useState(null),[S,k]=we.useState("access"),[R,q]=we.useState("expiring"),[K,E]=we.useState(!1),[C,A]=we.useState({}),[D,N]=we.useState({}),[j,P]=we.useState({}),[se,ge]=we.useState({}),ve=we.useRef(null);we.useEffect(()=>{r.length&&N(be=>{const tt={...be};return r.forEach(ct=>{tt[ct.email]||(tt[ct.email]={...Zf})}),tt})},[r]);const ye=we.useMemo(()=>{const be=r.length,tt=r.filter(ct=>ct.isAdmin).length;return{totalUsers:be,totalAdmins:tt,totalLogins:i.totalLogins}},[r,i.totalLogins]),he=we.useMemo(()=>r.filter(be=>!!be.expiresAt&&(!be.expiresAt||be.expiresAt>Date.now())),[r]),_e=we.useMemo(()=>r.filter(be=>!!be.expiresAt&&be.expiresAt<=Date.now()),[r]),Ue=we.useMemo(()=>r.filter(be=>!be.expiresAt),[r]),Ie=R==="noExpiry"?Ue:R==="expired"?_e:he,L=we.useCallback(()=>{ge(c9())},[]);we.useEffect(()=>{if(t)return w(null),f(""),y(!1),k("access"),q("expiring"),N({}),P({}),Ne(),et(),Xe(),L(),()=>{ve.current&&clearTimeout(ve.current)}},[t,L]);const O=(be,tt="success")=>{const ct=Date.now();ve.current&&clearTimeout(ve.current),w({message:be,tone:tt,key:ct}),ve.current=setTimeout(()=>{w(St=>(St==null?void 0:St.key)===ct?null:St)},3500)},B=be=>C[be]||{count:0,limit:Q2},z=(be,tt)=>{var ct;return((ct=D[be])==null?void 0:ct[tt])??Zf[tt]},J=(be,tt,ct)=>{N(St=>({...St,[be]:{...Zf,...St[be],[tt]:ct}}))},fe=(be,tt)=>{P(ct=>({...ct,[be]:tt}))},Se=async be=>{try{const tt=await Promise.all(be.map(async ct=>{try{const St=await jT(ct.email);return[ct.email,St]}catch(St){return console.error("Failed to load usage for",ct.email,St),[ct.email,{count:0,limit:Q2}]}}));A(Object.fromEntries(tt))}catch(tt){console.error("Failed to load usage map",tt)}},Ae=async()=>{try{const be=await f9();s(be)}catch(be){console.error("Failed to refresh login stats",be)}},Ne=async()=>{E(!0);try{const be=await i9();be.sort((tt,ct)=>tt.email.localeCompare(ct.email)),n(be),await Se(be),await Ae()}catch(be){console.error("Failed to load beta users",be),O("Failed to load beta users.","error")}finally{E(!1)}},Xe=()=>{o(g9())},et=()=>{u(v9())},ot=be=>/\S+@\S+\.\S+/.test(be||""),mt=be=>{n(tt=>[...tt.filter(St=>St.email!==be.email),be].sort((St,jt)=>St.email.localeCompare(jt.email)))},te=async be=>{be.preventDefault();const tt=p.trim().toLowerCase();if(!ot(tt)){O("Enter a valid email before adding.","error");return}if(r.some(St=>St.email===tt)){O("This email already exists in Firestore.","error");return}try{const St=W4(),jt=await Pm({email:tt,code:St,plan:v?"beta_admin":"beta_tester",isAdmin:v});mt(jt),A(Rt=>({...Rt,[jt.email]:{count:0,limit:Q2}})),f(""),y(!1),O(`Added ${tt}${v?" as admin":""}.`)}catch(St){console.error("Failed to add beta user",St),O("Unable to add user. Check console for details.","error")}},ke=async be=>{try{const tt=await Pm({email:be.email,code:be.code,plan:be.isAdmin?"beta_tester":"beta_admin",isAdmin:!be.isAdmin,expiresAt:be.expiresAt});mt(tt),O(`${tt.email} is now ${tt.isAdmin?"an admin":"a beta tester"}.`)}catch(tt){console.error("Failed to toggle admin",tt),O("Unable to update admin state.","error")}},X=async be=>{var tt;try{const ct=W4(),St=await Pm({email:be.email,code:ct,plan:be.plan,isAdmin:be.isAdmin,expiresAt:be.expiresAt});mt(St);try{await((tt=navigator.clipboard)==null?void 0:tt.writeText(ct)),O("New code generated & copied.")}catch{O("New code generated. Copy it manually.","error")}}catch(ct){console.error("Failed to regenerate code",ct),O("Unable to regenerate code.","error")}},me=async be=>{if(window.confirm(`Remove ${be.email} from the beta list?`))try{await s9(be.email),n(tt=>tt.filter(ct=>ct.email!==be.email)),A(tt=>{const ct={...tt};return delete ct[be.email],ct}),O(`${be.email} removed.`)}catch(tt){console.error("Failed to delete user",tt),O("Unable to delete user.","error")}},de=async be=>{const tt=`expiry:${be.email}`;if(j[tt])return;const ct=Number(z(be.email,"hours"));if(!Number.isFinite(ct)||ct<=0){O("Enter a positive number of hours.","error");return}fe(tt,!0);try{const St=await S9(be.email,ct);mt(St),O(`Extended expiry for ${be.email} by ${ct}h.`)}catch(St){console.error("Failed to extend expiry",St),O("Unable to extend expiry.","error")}finally{fe(tt,!1)}},qe=async be=>{if(be.isAdmin)return;const tt=`downloads:${be.email}`;if(j[tt])return;const ct=Number(z(be.email,"downloads"));if(!Number.isFinite(ct)||ct<=0){O("Enter a positive download amount.","error");return}fe(tt,!0);try{const St=await A9(be.email,ct);A(jt=>({...jt,[be.email]:St})),O(`Added ${ct} downloads to ${be.email}.`)}catch(St){console.error("Failed to extend download limit",St),O("Unable to extend download limit.","error")}finally{fe(tt,!1)}},Ge=be=>{_9(be),et(),O("Request archived.")};if(!t)return null;const st=[{id:"access",label:"Access & Users"},{id:"feedback",label:"Feedback"}],yt=[{id:"expiring",label:"Expiring",description:"Active beta users whose expiry is in the future",count:he.length},{id:"expired",label:"Expired",description:"Users whose access dates have passed",count:_e.length},{id:"noExpiry",label:"No expiry",description:"Unlimited access users",count:Ue.length}],Ht=yt.find(be=>be.id===R)||yt[0];return c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:[c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl mx-4 p-6 relative max-h-[95vh] overflow-y-auto",children:[c.jsx("button",{onClick:e,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:c.jsx(ll,{size:18})}),c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(L1,{className:"text-indigo-600",size:22}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Beta Access Admin Console"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Manage Firestore-stored beta users, admin privileges, personalized codes, and login activity."})]})]}),b&&c.jsxs("div",{className:`mb-4 flex items-center gap-2 rounded-lg border px-3 py-2 text-sm ${b.tone==="error"?"border-red-200 bg-red-50 text-red-700":"border-green-200 bg-green-50 text-green-700"}`,children:[b.tone==="error"?c.jsx(fo,{size:16}):c.jsx(Wa,{size:16}),c.jsx("span",{children:b.message})]}),c.jsx("div",{className:"flex gap-2 border-b border-gray-200 mb-4",children:st.map(be=>c.jsx("button",{onClick:()=>k(be.id),className:`px-3 py-2 text-sm font-semibold rounded-t-lg ${S===be.id?"text-indigo-600 border-b-2 border-indigo-600 bg-white":"text-gray-500"}`,children:be.label},be.id))}),S==="access"&&c.jsxs(c.Fragment,{children:[c.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-5",children:[c.jsxs("div",{className:"rounded-xl border border-gray-200 p-4 bg-gray-50",children:[c.jsx("p",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Beta Users"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:ye.totalUsers})]}),c.jsxs("div",{className:"rounded-xl border border-gray-200 p-4 bg-gray-50",children:[c.jsx("p",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Admins"}),c.jsx("p",{className:"text-2xl font-bold text-indigo-600 mt-1",children:ye.totalAdmins})]}),c.jsxs("div",{className:"rounded-xl border border-gray-200 p-4 bg-gray-50",children:[c.jsx("p",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Recorded Logins"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:ye.totalLogins})]})]}),c.jsxs("section",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 bg-gray-50 flex flex-col gap-2",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Admin master code"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Read-only constant for admin emails."})]}),c.jsxs("button",{type:"button",onClick:async()=>{var be;try{await((be=navigator.clipboard)==null?void 0:be.writeText(N1)),O("Master code copied.")}catch{O("Unable to copy master code.","error")}},className:"px-3 py-1.5 text-xs border rounded-lg text-gray-700 hover:bg-gray-100 flex items-center gap-1",children:[c.jsx(DT,{size:12})," Copy"]})]}),c.jsx("div",{className:"rounded-lg border border-gray-200 bg-white px-3 py-2 font-mono text-xs tracking-[0.2em] text-gray-900",children:N1})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 bg-gray-50 flex flex-col gap-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Default tester code"}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Legacy fallback from ",c.jsx("code",{children:"VITE_BETA_ACCESS_CODE"}),". Share only if needed."]})]}),c.jsx("div",{className:"rounded-lg border border-gray-200 bg-white px-3 py-2 font-mono text-xs tracking-[0.2em] text-gray-900",children:"INSTAspecbeta@2025"})]})]}),c.jsxs("section",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Access Requests"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Submitted from the beta login modal."})]}),c.jsxs("button",{onClick:et,className:"px-3 py-1.5 text-xs rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-100 flex items-center gap-1",children:[c.jsx(Ld,{size:12})," Refresh"]})]}),c.jsx("div",{className:"border border-gray-200 rounded-xl divide-y divide-gray-100 bg-white",children:l.length===0?c.jsxs("div",{className:"p-4 text-xs text-gray-500 flex items-center gap-2",children:[c.jsx(fo,{size:16})," No pending access requests."]}):l.map(be=>c.jsxs("div",{className:"p-4 flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-900 break-all",children:be.email}),c.jsxs("p",{className:"text-xs text-gray-500",children:[(be.name||"Unnamed").trim()||"Unnamed"," "," ",be.organization||"No organization provided"]}),be.reason&&c.jsx("p",{className:"text-xs text-gray-700 mt-1 whitespace-pre-line",children:be.reason}),c.jsx("p",{className:"text-[11px] text-gray-400 mt-1",children:new Date(be.createdAt).toLocaleString()})]}),c.jsxs("button",{onClick:()=>Ge(be.id),className:"self-start md:self-auto px-3 py-1.5 text-xs font-semibold rounded-lg border border-green-200 text-green-700 hover:bg-green-50 flex items-center gap-1",children:[c.jsx(Wa,{size:12})," Mark reviewed"]})]},be.id))})]}),c.jsxs("section",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Manage Beta Users"}),c.jsx("span",{className:"text-xs text-gray-500",children:"Users load directly from Firestore."})]}),c.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:yt.map(be=>c.jsxs("button",{type:"button",onClick:()=>q(be.id),className:`px-3 py-1 text-xs font-semibold rounded-full border ${R===be.id?"bg-indigo-600 text-white border-indigo-600":"text-gray-600 border-gray-200 hover:border-gray-300"}`,children:[be.label," ",c.jsx("span",{className:"font-mono text-[11px]",children:be.count})]},be.id))}),c.jsx("p",{className:"text-[11px] text-gray-500 mb-4",children:Ht.description}),c.jsxs("form",{onSubmit:te,className:"flex flex-col md:flex-row gap-3 items-start md:items-end mb-4 bg-gray-50 border border-gray-200 rounded-xl p-3",children:[c.jsxs("div",{className:"w-full",children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Email"}),c.jsx("input",{type:"email",value:p,onChange:be=>f(be.target.value),className:"w-full mt-1 rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-500 bg-white",placeholder:"beta-user@example.com",required:!0})]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs font-semibold text-gray-600",children:[c.jsx("input",{type:"checkbox",checked:v,onChange:be=>y(be.target.checked),className:"rounded border-gray-300"}),"Make admin too"]}),c.jsxs("button",{type:"submit",className:"inline-flex items-center gap-1 rounded-lg bg-indigo-600 text-white text-sm px-4 py-2 hover:bg-indigo-500",disabled:K,children:[c.jsx(cw,{size:14})," Add beta user"]})]}),c.jsx("div",{className:"border border-gray-200 rounded-xl divide-y divide-gray-100",children:K?c.jsxs("div",{className:"p-4 text-sm text-gray-500 flex items-center gap-2",children:[c.jsx(Ld,{size:16,className:"animate-spin"})," Loading users"]}):r.length===0?c.jsxs("div",{className:"p-4 text-sm text-gray-500 flex items-center gap-2",children:[c.jsx(fo,{size:16})," No beta users yet."]}):Ie.length===0?c.jsxs("div",{className:"p-4 text-sm text-gray-500 flex items-center gap-2",children:[c.jsx(fo,{size:16})," No ",Ht.label.toLowerCase()," users found."]}):Ie.map(be=>{const tt=B(be.email),ct=!be.isAdmin&&tt.count>=tt.limit,St=!be.isAdmin&&!ct&&tt.count>=Math.max(0,tt.limit-2),jt=be.isAdmin?"text-gray-500":ct?"text-red-600 font-semibold":St?"text-orange-600":"text-gray-500",Rt=`expiry:${be.email}`,Dt=`downloads:${be.email}`,Hr=typeof be.loginCount=="number"?be.loginCount:se[be.email]||0;return c.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center justify-between gap-3",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center",children:c.jsx(U9,{size:16})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-900 break-all",children:be.email}),be.isAdmin&&c.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-indigo-600 font-semibold",children:[c.jsx(e3,{size:12})," Admin"]}),c.jsxs("div",{className:"text-xs text-gray-600 font-mono mt-1",children:["Code: ",c.jsx("span",{className:"text-gray-900",children:be.code||""})]}),c.jsxs("div",{className:"text-xs text-gray-500",children:["Expires: ",be.expiresAt?new Date(be.expiresAt).toLocaleString():"No expiry"]}),c.jsxs("div",{className:`text-xs mt-1 ${jt}`,children:["Downloads:"," ",be.isAdmin?"Unlimited":`${tt.count} / ${tt.limit}`]}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Logins: ",Hr]}),c.jsxs("div",{className:"mt-3 space-y-2",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("span",{className:"text-[11px] font-semibold text-gray-600 uppercase",children:"Extend expiry"}),c.jsx("input",{type:"number",min:"1",value:z(be.email,"hours"),onChange:hr=>J(be.email,"hours",hr.target.value),placeholder:Zf.hours,className:"w-20 rounded border border-gray-300 px-2 py-1 text-xs text-gray-900 font-semibold"}),c.jsx("button",{type:"button",onClick:()=>de(be),disabled:j[Rt],className:"px-3 py-1 text-xs font-semibold rounded-lg border border-blue-200 text-blue-600 hover:bg-blue-50 disabled:opacity-60",children:j[Rt]?"Extending...":"+ Hours"})]}),!be.isAdmin&&c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("span",{className:"text-[11px] font-semibold text-gray-600 uppercase",children:"Extend downloads"}),c.jsx("input",{type:"number",min:"1",value:z(be.email,"downloads"),onChange:hr=>J(be.email,"downloads",hr.target.value),placeholder:Zf.downloads,className:"w-20 rounded border border-gray-300 px-2 py-1 text-xs text-gray-900 font-semibold"}),c.jsx("button",{type:"button",onClick:()=>qe(be),disabled:j[Dt],className:"px-3 py-1 text-xs font-semibold rounded-lg border border-green-200 text-green-700 hover:bg-green-50 disabled:opacity-60",children:j[Dt]?"Updating...":"+ Downloads"}),ct&&c.jsx("span",{className:"text-[11px] font-semibold text-red-600",children:"Limit reached"})]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsxs("button",{onClick:()=>X(be),className:"px-3 py-1.5 text-xs font-semibold rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-100 flex items-center gap-1",children:[c.jsx(tv,{size:12})," Regenerate code"]}),c.jsxs("button",{onClick:()=>ke(be),className:`px-3 py-1.5 text-xs font-semibold rounded-lg border flex items-center gap-1 ${be.isAdmin?"text-gray-600 border-gray-200 hover:bg-gray-100":"text-indigo-600 border-indigo-200 hover:bg-indigo-50"}`,children:[c.jsx(e3,{size:12})," ",be.isAdmin?"Remove admin":"Promote to admin"]}),c.jsxs("button",{onClick:()=>me(be),className:"px-3 py-1.5 text-xs font-semibold rounded-lg border border-red-200 text-red-600 hover:bg-red-50 flex items-center gap-1",children:[c.jsx(Dh,{size:12})," Remove"]})]})]},be.email)})})]}),c.jsxs("section",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Recent Logins"}),c.jsxs("span",{className:"text-xs text-gray-500",children:["Last ",i.recentLogins.length," sessions"]})]}),c.jsx("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-gray-50 text-left text-xs uppercase text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2",children:"Email"}),c.jsx("th",{className:"px-3 py-2",children:"Role"}),c.jsx("th",{className:"px-3 py-2",children:"Time"})]})}),c.jsx("tbody",{children:i.recentLogins.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"3",className:"px-3 py-4 text-center text-xs text-gray-500",children:"No logins tracked yet."})}):i.recentLogins.map((be,tt)=>c.jsxs("tr",{className:"border-t border-gray-100",children:[c.jsx("td",{className:"px-3 py-2 font-medium text-gray-800 break-all",children:be.email}),c.jsx("td",{className:"px-3 py-2",children:c.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-semibold ${be.isAdmin?"text-indigo-600":"text-gray-600"}`,children:[c.jsx(L1,{size:12}),be.isAdmin?"Admin":"Beta"]})}),c.jsx("td",{className:"px-3 py-2 text-xs text-gray-500",children:iM(be.timestamp)})]},`${be.email}-${be.timestamp}-${tt}`))})]})})]})]}),S==="feedback"&&c.jsxs("section",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Beta Feedback"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Submissions from the feedback modal."})]}),c.jsxs("button",{onClick:Xe,className:"px-3 py-1.5 text-xs rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-100 flex items-center gap-1",children:[c.jsx(Ld,{size:12})," Refresh"]})]}),c.jsx("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:a.length===0?c.jsxs("div",{className:"p-4 text-sm text-gray-500 flex items-center gap-2",children:[c.jsx(fo,{size:16})," No feedback submitted yet."]}):c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-gray-50 text-left text-xs uppercase text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2",children:"Date"}),c.jsx("th",{className:"px-3 py-2",children:"Email"}),c.jsx("th",{className:"px-3 py-2",children:"Context"}),c.jsx("th",{className:"px-3 py-2",children:"Message"}),c.jsx("th",{className:"px-3 py-2",children:"Image"}),c.jsx("th",{className:"px-3 py-2",children:"Details"})]})}),c.jsx("tbody",{children:a.map(be=>c.jsxs("tr",{className:"border-t border-gray-100",children:[c.jsx("td",{className:"px-3 py-2 text-xs text-gray-500",children:new Date(be.createdAt).toLocaleString()}),c.jsx("td",{className:"px-3 py-2 break-all",children:be.email}),c.jsx("td",{className:"px-3 py-2",children:be.context}),c.jsx("td",{className:"px-3 py-2",children:c.jsx("div",{className:"text-xs text-gray-700 max-w-[220px] truncate",children:be.message||""})}),c.jsx("td",{className:"px-3 py-2 text-xs text-gray-500",children:be.imageDataUrl?"Attached":""}),c.jsx("td",{className:"px-3 py-2",children:c.jsx("button",{onClick:()=>d(be),className:"text-xs text-indigo-600 underline",children:"View"})})]},be.id))})]})})]}),c.jsx("p",{className:"mt-4 text-[11px] text-gray-500",children:"Beta user data lives in Firestore. Use the Firebase console to perform full resets or to audit history."})]}),h&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-2xl max-h-[90vh] overflow-auto space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Feedback Details"}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Submitted ",new Date(h.createdAt).toLocaleString()]})]}),c.jsx("button",{onClick:()=>d(null),className:"text-xs uppercase tracking-wide text-gray-500 hover:text-gray-800",children:"Close"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Email"}),c.jsx("div",{className:"text-gray-900",children:h.email})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs uppercase text-gray-500 font-semibold",children:"Context"}),c.jsx("div",{className:"text-gray-900",children:h.context})]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs uppercase text-gray-500 font-semibold mb-1",children:"Message"}),c.jsx("div",{className:"text-sm text-gray-800 whitespace-pre-wrap bg-gray-50 border border-gray-200 rounded-lg p-3",children:h.message||""})]}),h.imageDataUrl&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs uppercase text-gray-500 font-semibold mb-1",children:"Screenshot"}),c.jsx("img",{src:h.imageDataUrl,alt:"Feedback attachment",className:"rounded-lg max-h-[60vh] object-contain border border-gray-200"})]})]})})]})},Z2=["Landing","Step 1  Project Setup","Step 2  Door Schedule","Step 3  Hardware Sets","Step 4  Validation & Exports","Other"],sM=({isOpen:t,onClose:e})=>{const{user:r}=W0(),[n,i]=we.useState(Z2[0]),[s,a]=we.useState(""),[o,l]=we.useState(null),[u,h]=we.useState(!1),[d,p]=we.useState(""),[f,v]=we.useState("");if(we.useEffect(()=>{t||(i(Z2[0]),a(""),l(null),h(!1),p(""),v(""))},[t]),!t||!r)return null;const y=w=>{var R;const S=(R=w.target.files)==null?void 0:R[0];if(!S){l(null);return}const k=new FileReader;k.onloadend=()=>{l(k.result)},k.readAsDataURL(S)},b=w=>{if(w.preventDefault(),!s.trim()){p("Please enter your feedback.");return}h(!0),x9({email:r.email,context:n,message:s.trim(),imageDataUrl:o}),h(!1),v("Thank you! Your feedback just made InstaSpec smarter. Were on it!")};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6",children:c.jsxs("div",{className:"w-full max-w-lg rounded-xl sm:rounded-2xl bg-white p-4 sm:p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Share Feedback"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-sm uppercase tracking-wide",children:"Close"})]}),f?c.jsxs("div",{className:"space-y-4 py-8 text-center",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-green-100 text-green-600 mx-auto",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:f}),c.jsx("p",{className:"text-sm text-gray-500",children:"Got another idea? Keep them coming anytime."}),c.jsx("button",{onClick:e,className:"mt-4 px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700",children:"Close"})]}):c.jsxs("form",{className:"space-y-4",onSubmit:b,children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email"}),c.jsx("input",{type:"email",value:r.email,readOnly:!0,className:"w-full rounded-lg border border-gray-200 bg-gray-100 px-3 py-2 text-sm text-gray-700"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Context"}),c.jsx("select",{className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm",value:n,onChange:w=>i(w.target.value),children:Z2.map(w=>c.jsx("option",{value:w,children:w},w))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Feedback"}),c.jsx("textarea",{className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm h-28",placeholder:"Tell us what's working, what isn't, or what you'd love to see.",value:s,onChange:w=>{a(w.target.value),p("")},required:!0}),d&&c.jsx("p",{className:"text-xs text-red-600 mt-1",children:d})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Screenshot (optional)"}),c.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"text-sm"}),o&&c.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Image attached."," ",c.jsx("button",{type:"button",onClick:()=>l(null),className:"text-indigo-600 underline",children:"Remove"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:u,className:`px-4 py-2 text-sm rounded-lg bg-indigo-600 text-white hover:bg-indigo-500 ${u?"opacity-60 cursor-not-allowed":""}`,children:u?"Sending...":"Submit Feedback"})]})]})]})})},aM="feedback";async function oM({email:t,context:e,message:r,imageDataUrl:n=null}){const i=_i(t);if(!i)throw new Error("Feedback must include an email.");if(!r||!r.trim())throw new Error("Feedback must include a message.");const s={email:i,context:e||"Other",message:r.trim(),imageDataUrl:n||null,createdAt:Date.now(),createdAtServer:pi()};return{id:(await Do(mi(nr,aM),s)).id,...s}}const J2=["Step 1 - Project Setup","Step 2 - Door Schedule","Step 3 - Hardware Sets","Step 4 - Validation & Exports","Dashboard / Landing","Other"],lM=({isOpen:t,onClose:e})=>{const{user:r}=W0(),[n,i]=we.useState(J2[0]),[s,a]=we.useState(""),[o,l]=we.useState(null),[u,h]=we.useState(!1),[d,p]=we.useState(""),[f,v]=we.useState("");if(we.useEffect(()=>{t||(i(J2[0]),a(""),l(null),h(!1),p(""),v(""))},[t]),!t||!r)return null;const y=w=>{var R;const S=(R=w.target.files)==null?void 0:R[0];if(!S){l(null);return}const k=new FileReader;k.onload=()=>{l(k.result)},k.onerror=()=>{p("Unable to read the selected file. Please try a different image.")},k.readAsDataURL(S)},b=async w=>{if(w.preventDefault(),p(""),v(""),!s.trim()){p("Please share a quick description of the issue or suggestion.");return}h(!0);try{await oM({email:r.email,context:n,message:s.trim(),imageDataUrl:o}),v(`Thanks for the feedback!
You're feedback helps InstaSpec to serve better.`)}catch(S){console.error("Feedback submission failed",S),p("Could not send feedback right now. Please try again in a moment.")}finally{h(!1)}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6",children:c.jsxs("div",{className:"w-full max-w-lg rounded-xl sm:rounded-2xl bg-white p-4 sm:p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Report an Error"}),c.jsx("button",{onClick:e,className:"text-sm uppercase tracking-wide text-gray-500 hover:text-gray-800",children:"Close"})]}),f?c.jsxs("div",{className:"space-y-4 py-10 text-center",children:[c.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-green-100 text-green-600",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("p",{className:"text-lg font-semibold text-gray-900 whitespace-pre-line",children:f}),c.jsx("p",{className:"text-sm text-gray-500",children:"Need to flag another issue? You can share more feedback anytime."}),c.jsx("button",{onClick:e,className:"mt-2 px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-500",children:"Close"})]}):c.jsxs("form",{onSubmit:b,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Email"}),c.jsx("input",{type:"email",value:r.email,readOnly:!0,className:"mt-1 w-full rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-700"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Where did this occur?"}),c.jsx("select",{value:n,onChange:w=>i(w.target.value),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm",children:J2.map(w=>c.jsx("option",{value:w,children:w},w))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Feedback"}),c.jsx("textarea",{value:s,onChange:w=>a(w.target.value),placeholder:"Tell us what happened or what you would improve.",className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm h-28",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Screenshot (optional)"}),c.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"text-sm"}),o&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Image attached. You can replace it by choosing another file."})]}),d&&c.jsx("p",{className:"text-xs text-red-600",children:d}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:u,className:`px-4 py-2 text-sm rounded-lg bg-indigo-600 text-white hover:bg-indigo-500 ${u?"opacity-60 cursor-not-allowed":""}`,children:u?"Sending...":"Submit"})]})]})]})})};async function s3(t){const e=_i(t);if(!e)return[];const r=Sh(mi(nr,"projects"),qD("ownerEmail","==",e));return(await g0(r)).docs.map(i=>({id:i.id,...i.data()}))}async function Jf(t,e){const r=_i(t);if(!r)throw new Error("Missing owner email");const n=Date.now(),i={...e,ownerEmail:r,updatedAt:n};if(e.id){const a=zr(nr,"projects",e.id);return await q0(a,{...i,createdAt:e.createdAt||n},{merge:!0}),{...e,updatedAt:n}}const s=await Do(mi(nr,"projects"),{...i,createdAt:n});return{...e,id:s.id,createdAt:n,updatedAt:n}}async function a3(t){if(!t)return;const e=zr(nr,"projects",t);await tc(e)}const Rc={ANSI_BHMA:{id:"ANSI_BHMA",name:"ANSI/BHMA A156.28",version:"2023",region:"North America",pinConfig:{pins:6,depths:7,macs:4},maxDiffers:117649,hierarchyLevels:[{id:"GGM",name:"Great Grand Master",symbol:"A",order:0},{id:"GMK",name:"Grand Master",symbol:"AA",order:1},{id:"MK",name:"Master Key",symbol:"AAA",order:2},{id:"SMK",name:"Sub-Master",symbol:"AAAA",order:3},{id:"CK",name:"Change Key",symbol:"AAAAA",order:4}],securityGrades:["Grade 1","Grade 2","Grade 3"],recommendations:{"Commercial Office":{depth:3,levels:["GMK","MK","CK"]},"Hospital / Healthcare":{depth:4,levels:["GMK","MK","SMK","CK"]},"Education / School":{depth:3,levels:["GMK","MK","CK"]},"Airport / Transport":{depth:4,levels:["GMK","MK","SMK","CK"]},"Hospitality / Hotel":{depth:4,levels:["GMK","MK","SMK","CK"]},Residential:{depth:2,levels:["MK","CK"]}}},EN:{id:"EN",name:"EN 1303",version:"2015",region:"Europe",pinConfig:{pins:5,depths:6,macs:3},maxDiffers:7776,hierarchyLevels:[{id:"GM",name:"General Master",symbol:"GM",order:0},{id:"MK",name:"Master Key",symbol:"M",order:1},{id:"SK",name:"Sub-Key",symbol:"S",order:2},{id:"UK",name:"User Key",symbol:"U",order:3}],securityGrades:["Class 1","Class 2","Class 3","Class 4","Class 5","Class 6"],recommendations:{"Commercial Office":{depth:2,levels:["MK","UK"]},"Hospital / Healthcare":{depth:3,levels:["GM","MK","UK"]},"Education / School":{depth:2,levels:["MK","UK"]},"Airport / Transport":{depth:3,levels:["GM","MK","UK"]},"Hospitality / Hotel":{depth:3,levels:["GM","MK","UK"]},Residential:{depth:2,levels:["MK","UK"]}}}},o3=t=>Rc[t]||Rc.ANSI_BHMA,cM=(t,e)=>{const r=Rc[t]||Rc.ANSI_BHMA,n=r.recommendations[e];return n?n.levels.map(i=>r.hierarchyLevels.find(s=>s.id===i)):r.recommendations["Commercial Office"].levels.map(i=>r.hierarchyLevels.find(s=>s.id===i))},uM=(t,e)=>{const r=[],n=[];return e===0?t!=="GMK"&&r.push({type:"invalid_gmk_symbol",message:'EN 1303 requires General Master Key to use symbol "GMK"',expected:"GMK",actual:t}):e===1?/^MK-\d+$/.test(t)||r.push({type:"invalid_mk_format",message:'EN 1303 Master Key must follow format "MK-X" (e.g., MK-1, MK-2)',expected:"MK-[number]",actual:t}):e===2?/^SK-\d+$/.test(t)||r.push({type:"invalid_sk_format",message:'EN 1303 Sub-Key must follow format "SK-X" (e.g., SK-1, SK-2)',expected:"SK-[number]",actual:t}):/^CK-\d{3,}$/.test(t)||r.push({type:"invalid_ck_format",message:'EN 1303 Change Key must follow format "CK-XXX" (e.g., CK-101, CK-201)',expected:"CK-[3+ digits]",actual:t}),{errors:r,warnings:n,isValid:r.length===0}},hM=(t,e)=>{const r=[],n=[],i=["I","O","Q","X"];for(const s of i)t.includes(s)&&r.push({type:"restricted_letter",message:`ANSI/BHMA prohibits using letters ${i.join(", ")} in key symbols`,letter:s,symbol:t});if(e===0)(t.length!==1||!/^[A-Z]$/.test(t))&&r.push({type:"invalid_top_level_format",message:"ANSI/BHMA top-level master must be single letter (e.g., A)",expected:"Single letter A-Z",actual:t});else if(e===1){if((t.length!==2||!/^[A-Z]{2}$/.test(t))&&r.push({type:"invalid_level1_format",message:"ANSI/BHMA Level 1 master must be two letters (e.g., AA, AB)",expected:"Two letters",actual:t}),t.length===2){const s=t[0],a=t[1],o=s.charCodeAt(0),l=a.charCodeAt(0);Math.abs(l-o)>10&&n.push({type:"unusual_pairing",message:`Unusual letter pairing "${t}". Standard practice uses consecutive letters (AA, AB, AC)`,symbol:t})}}else e===2?(t.length!==3||!/^[A-Z]{3}$/.test(t))&&r.push({type:"invalid_level2_format",message:"ANSI/BHMA Level 2 keys must be three letters (e.g., AAA, AAB)",expected:"Three letters",actual:t}):/^[A-Z]{2,3}\d+$/.test(t)||r.push({type:"invalid_change_key_format",message:"ANSI/BHMA Change Key must be letters followed by numbers (e.g., AA1, AAA1)",expected:"[Letters][Numbers]",actual:t});return{errors:r,warnings:n,isValid:r.length===0}},fM=(t,e)=>{const r=[],n=[];if(e==="EN"){const i=t.filter(o=>o.keySymbol.startsWith("MK-")).sort((o,l)=>{const u=parseInt(o.keySymbol.split("-")[1]),h=parseInt(l.keySymbol.split("-")[1]);return u-h});for(let o=0;o<i.length;o++){const l=o+1;parseInt(i[o].keySymbol.split("-")[1])!==l&&n.push({type:"sequence_gap",message:`EN 1303 recommends sequential numbering. Expected MK-${l}, found ${i[o].keySymbol}`,expected:`MK-${l}`,actual:i[o].keySymbol})}const s=t.filter(o=>o.keySymbol.startsWith("CK-")),a={};s.forEach(o=>{const l=o.keySymbol.substring(3,4);a[l]||(a[l]=[]),a[l].push(o)}),Object.entries(a).forEach(([o,l])=>{const u=l.sort((d,p)=>{const f=parseInt(d.keySymbol.split("-")[1]),v=parseInt(p.keySymbol.split("-")[1]);return f-v}),h=parseInt(o)*100+1;for(let d=0;d<u.length;d++){const p=h+d;parseInt(u[d].keySymbol.split("-")[1])!==p&&n.push({type:"change_key_gap",message:`Change key numbering gap detected. Expected CK-${String(p).padStart(3,"0")}, found ${u[d].keySymbol}`,master:`MK-${o}`})}})}else if(e==="ANSI_BHMA"){const s=t.filter(a=>a.hierarchyLevel===1&&/^[A-Z]{2}$/.test(a.keySymbol)).sort((a,o)=>a.keySymbol.localeCompare(o.keySymbol));for(let a=1;a<s.length;a++){const o=s[a-1].keySymbol[1],l=s[a].keySymbol[1],u=String.fromCharCode(o.charCodeAt(0)+1);l!==u&&n.push({type:"letter_sequence_gap",message:`ANSI/BHMA recommends consecutive letters. After ${s[a-1].keySymbol}, expected ${s[a-1].keySymbol[0]}${u}, found ${s[a].keySymbol}`,expected:`${s[a-1].keySymbol[0]}${u}`,actual:s[a].keySymbol})}}return{errors:r,warnings:n,isValid:r.length===0}},dM=(t,e,r)=>{const n=[],i=[];e==="EN"?(t>4&&i.push({type:"excessive_depth",message:"EN 1303 typically uses 2-4 hierarchy levels. More than 4 levels may complicate system management",current:t,recommended:"2-4 levels"}),t<2&&n.push({type:"insufficient_depth",message:"EN 1303 requires at least 2 hierarchy levels (Master and User keys)",current:t,minimum:2})):e==="ANSI_BHMA"&&(t>5&&n.push({type:"exceeds_maximum_depth",message:"ANSI/BHMA practical limit is 5 hierarchy levels",current:t,maximum:5}),t<2&&n.push({type:"insufficient_depth",message:"ANSI/BHMA requires at least 2 hierarchy levels",current:t,minimum:2}));const a={"Commercial Office":{min:2,max:3,optimal:3},"Hospital / Healthcare":{min:3,max:4,optimal:4},"Education / School":{min:2,max:3,optimal:3},"Airport / Transport":{min:3,max:4,optimal:4},"Hospitality / Hotel":{min:3,max:4,optimal:4},Residential:{min:2,max:2,optimal:2}}[r];return a&&(t<a.min&&i.push({type:"below_facility_minimum",message:`${r} facilities typically require at least ${a.min} levels`,facility:r,current:t,recommended:a.optimal}),t>a.max&&i.push({type:"above_facility_maximum",message:`${r} facilities rarely need more than ${a.max} levels`,facility:r,current:t,recommended:a.optimal})),{errors:n,warnings:i,isValid:n.length===0}},pM=(t,e)=>{const r=[],n=[];return e!=="ANSI_BHMA"?{errors:r,warnings:n,isValid:!0}:(t.forEach(i=>{if(i.parentHierarchyId){const s=t.find(a=>a.hierarchyId===i.parentHierarchyId);s&&(i.keySymbol.startsWith(s.keySymbol)||r.push({type:"invalid_parent_child_pairing",message:"ANSI/BHMA requires child keys to start with parent symbol",parent:s.keySymbol,child:i.keySymbol,expected:`${s.keySymbol}[letter/number]`}))}}),{errors:r,warnings:n,isValid:r.length===0})},mM=(t,e,r,n)=>{const i=[],s=[],a=[...t.map(u=>({keySymbol:u.keySymbol,hierarchyLevel:u.order,levelType:u.levelType})),...e.map(u=>({keySymbol:u.keySymbol,hierarchyLevel:3,levelType:"CK"}))];a.forEach(u=>{let h;r==="EN"?h=uM(u.keySymbol,u.hierarchyLevel):h=hM(u.keySymbol,u.hierarchyLevel),i.push(...h.errors),s.push(...h.warnings)});const o=fM(a,r);i.push(...o.errors),s.push(...o.warnings);const l=dM(t.length,r,n);if(i.push(...l.errors),s.push(...l.warnings),r==="ANSI_BHMA"){const u=pM(t,r);i.push(...u.errors),s.push(...u.warnings)}return{errors:i,warnings:s,isValid:i.length===0}},VT=we.createContext(null),Go=()=>{const t=we.useContext(VT);if(!t)throw new Error("useMasterKey must be used within MasterKeyProvider");return t},ex=({children:t,projectId:e,projectDoors:r=[]})=>{const[n,i]=we.useState(null),[s,a]=we.useState([]),[o,l]=we.useState([]),[u,h]=we.useState([]),[d,p]=we.useState([]),[f,v]=we.useState([]),[y,b]=we.useState([]),[w,S]=we.useState(!1),[k,R]=we.useState(null),[q,K]=we.useState(!1),[E,C]=we.useState("zone_based"),[A,D]=we.useState("ANSI_BHMA"),N=we.useCallback(ke=>ke?Wu(zr(nr,"mk_projects",ke),me=>{if(me.exists()){const de={id:me.id,...me.data()};i(de),console.log(" MK Project updated:",{differsUsed:de.differsUsed,totalPhysicalKeys:de.totalPhysicalKeys,totalCylinders:de.totalCylinders})}else console.log(" MK Project document does not exist:",ke),i(null)},me=>{console.error("Error listening to MK project:",me),R(me.message)}):void 0,[]);we.useEffect(()=>{if(!e)return;S(!0);let ke=null;const X=Wu(zr(nr,"projects",e),me=>{if(me.exists()){const de=me.data();K(!!de.mkSystemEnabled),C(de.mkApproach||"zone_based"),D(de.mkStandard||"ANSI_BHMA"),de.mkSystemEnabled&&de.mkProjectId?(ke&&ke(),ke=N(de.mkProjectId)):(ke&&(ke(),ke=null),i(null))}S(!1)},me=>{console.error("Error listening to project:",me),R(me.message),S(!1)});return()=>{X(),ke&&ke()}},[e,N]);const j=we.useCallback(async ke=>{try{if(S(!0),R(null),console.log("toggleMKSystem called with:",ke),ke){const X=zr(mi(nr,"mk_projects")),me=o3(A),de=me.pinConfig,qe=me.maxDiffers;await q0(X,{projectId:e,keyingApproach:E||"zone_based",standard:A,standardVersion:me.version,hierarchyLevels:4,maxDiffersAvailable:qe,differsUsed:0,manufacturer:"Schlage",keyway:"C Keyway",pinConfiguration:de,securityLevel:"standard",constructionKeyingEnabled:!1,constructionMasterKey:null,statistics:{totalDoors:0,keyedDoors:0,unkeyedDoors:0,totalKeys:0,zonesDefined:0},mkSystemStatus:"in_progress",createdAt:pi(),updatedAt:pi(),completedAt:null}),await Ua(zr(nr,"projects",e),{mkSystemEnabled:!0,mkSystemStatus:"not_started",mkApproach:E,mkStandard:A,mkProjectId:X.id}),console.log(`MK project created: ${X.id}`)}else{const me=(await H0(zr(nr,"projects",e))).data();me!=null&&me.mkProjectId?(await Ua(zr(nr,"projects",e),{mkSystemEnabled:!1,mkSystemStatus:null,mkApproach:null,mkProjectId:null}),console.log(`MK project disabled for project ${e}`)):await Ua(zr(nr,"projects",e),{mkSystemEnabled:!1,mkSystemStatus:null,mkApproach:null})}K(ke),console.log("MK system toggled successfully")}catch(X){throw console.error("Error toggling MK system:",X),R(X.message),X}finally{S(!1)}},[e,E,A]),P=we.useCallback(async ke=>{try{R(null),console.log("updateMKApproach called with:",ke),await Ua(zr(nr,"projects",e),{mkApproach:ke}),n!=null&&n.id&&await Ua(zr(nr,"mk_projects",n.id),{keyingApproach:ke,updatedAt:pi()}),C(ke),console.log("MK approach updated successfully")}catch(X){throw console.error("Error updating MK approach:",X),R(X.message),X}},[e,n]),se=we.useCallback(async ke=>{try{if(R(null),console.log("updateStandard called with:",ke),await Ua(zr(nr,"projects",e),{mkStandard:ke}),n!=null&&n.id){const X=o3(ke);await Ua(zr(nr,"mk_projects",n.id),{standard:ke,standardVersion:X.version,pinConfiguration:X.pinConfig,maxDiffersAvailable:X.maxDiffers,updatedAt:pi()})}D(ke),console.log("Standard updated successfully")}catch(X){throw console.error("Error updating standard:",X),R(X.message),X}},[e,n]),ge=we.useCallback(async ke=>{try{if(R(null),!(n!=null&&n.id))throw new Error("No MK project found");console.log("updateMKProject called with:",ke),await Ua(zr(nr,"mk_projects",n.id),{...ke,updatedAt:pi()}),console.log("MK Project updated successfully")}catch(X){throw console.error("Error updating MK project:",X),R(X.message),X}},[n]);we.useEffect(()=>{if(!(n!=null&&n.id))return;const ke=Sh(mi(nr,"mk_projects",n.id,"hierarchies")),X=Wu(ke,me=>{const de=me.docs.map(Ge=>({hierarchyId:Ge.id,...Ge.data()}));a(de);const qe=ve(de);l(qe)});return()=>X()},[n==null?void 0:n.id]),we.useEffect(()=>{if(!(n!=null&&n.id))return;const ke=Sh(mi(nr,"mk_projects",n.id,"zones")),X=Wu(ke,me=>{const de=me.docs.map(qe=>({zoneId:qe.id,...qe.data()}));h(de),console.log(" Zones updated:",de.length,"zones")});return()=>X()},[n==null?void 0:n.id]),we.useEffect(()=>{if(!(n!=null&&n.id))return;const ke=Sh(mi(nr,"mk_projects",n.id,"assignments")),X=Wu(ke,me=>{const de=me.docs.map(qe=>({assignmentId:qe.id,...qe.data()}));p(de),console.log(" Assignments updated:",de.length,"assignments")});return()=>X()},[n==null?void 0:n.id]),we.useEffect(()=>{if(!(n!=null&&n.id)){v([]);return}const ke=Sh(mi(nr,"mk_projects",n.id,"ka_groups")),X=Wu(ke,me=>{const de=me.docs.map(qe=>({id:qe.id,...qe.data()}));v(de),console.log(" KA Groups updated:",de.length,"groups")});return()=>X()},[n==null?void 0:n.id]);const ve=ke=>{const X=new Map,me=[];return ke.forEach(de=>{X.set(de.hierarchyId,{...de,children:[]})}),ke.forEach(de=>{const qe=X.get(de.hierarchyId);if(de.parentHierarchyId){const Ge=X.get(de.parentHierarchyId);Ge&&Ge.children.push(qe)}else me.push(qe)}),me},ye=we.useCallback(async ke=>{if(n!=null&&n.id)try{const X=mi(nr,"mk_projects",n.id,"hierarchies");await Do(X,{...ke,createdAt:pi(),updatedAt:pi()}),console.log("Hierarchy level added successfully")}catch(X){throw console.error("Failed to add hierarchy level:",X),X}},[n]),he=we.useCallback(async(ke,X)=>{if(n!=null&&n.id)try{const me=zr(nr,"mk_projects",n.id,"hierarchies",ke);await Ua(me,{...X,updatedAt:pi()}),console.log("Hierarchy level updated successfully")}catch(me){throw console.error("Failed to update hierarchy level:",me),me}},[n]),_e=we.useCallback(async ke=>{if(n!=null&&n.id)try{const X=s.some(qe=>qe.parentHierarchyId===ke),me=d.some(qe=>qe.hierarchyId===ke);if(X||me)throw new Error("Cannot delete level with children or door assignments");const de=zr(nr,"mk_projects",n.id,"hierarchies",ke);await tc(de),console.log("Hierarchy level deleted successfully")}catch(X){throw console.error("Failed to delete hierarchy level:",X),X}},[n,s,d]),Ue=we.useCallback(async ke=>{if(n!=null&&n.id)try{const X=cM(A,ke),me=await g0(mi(nr,"mk_projects",n.id,"hierarchies")),de=G2(nr);me.docs.forEach(Ge=>{de.delete(Ge.ref)}),await de.commit();let qe=null;for(let Ge=0;Ge<X.length;Ge++){const st=X[Ge],yt=mi(nr,"mk_projects",n.id,"hierarchies");qe=(await Do(yt,{levelName:st.name,levelType:st.id,keySymbol:st.symbol,order:Ge,parentHierarchyId:qe,description:`${st.name} for ${ke}`,createdAt:pi(),updatedAt:pi()})).id}console.log("Hierarchy template applied successfully")}catch(X){throw console.error("Failed to apply hierarchy template:",X),X}},[n,A]),Ie=we.useCallback(async ke=>{if(n!=null&&n.id)try{const X=mi(nr,"mk_projects",n.id,"zones"),me=await Do(X,{...ke,createdAt:pi(),updatedAt:pi()});return console.log("Zone created successfully"),me.id}catch(X){throw console.error("Failed to create zone:",X),X}},[n]),L=we.useCallback(async(ke,X)=>{if(n!=null&&n.id)try{const me={};X==="zone_based"?ke.forEach(Ge=>{me[Ge.zone]||(me[Ge.zone]={name:Ge.zone,doors:[]}),me[Ge.zone].doors.push(Ge.id)}):X==="floor_based"?ke.forEach(Ge=>{const st=`Floor ${Ge.level}`;me[st]||(me[st]={name:st,doors:[]}),me[st].doors.push(Ge.id)}):X==="functional"&&ke.forEach(Ge=>{me[Ge.use]||(me[Ge.use]={name:Ge.use,doors:[]}),me[Ge.use].doors.push(Ge.id)});const de=["#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899"];let qe=0;for(const[Ge,st]of Object.entries(me))await Ie({zoneName:st.name,color:de[qe%de.length],doorCount:st.doors.length}),qe++;console.log("Zones auto-generated successfully")}catch(me){throw console.error("Failed to auto-generate zones:",me),me}},[n,Ie]),O=we.useCallback(async ke=>{if(n!=null&&n.id)try{const X=zr(nr,"mk_projects",n.id,"zones",ke);await tc(X),console.log("Zone deleted successfully")}catch(X){throw console.error("Failed to delete zone:",X),X}},[n]),B=we.useCallback(async()=>{if(n!=null&&n.id)try{const ke=new Set;s.forEach(st=>{ke.add(st.keySymbol)}),d.forEach(st=>{ke.add(st.keySymbol)});const X=ke.size;let me=0,de=0;s.forEach(st=>{me+=st.keyQuantity||2});const qe=new Set;d.forEach(st=>{const yt=r.find(be=>be.id===st.doorId),Ht=(yt==null?void 0:yt.qty)||1;if(st.keyType==="KA"&&st.kaGroupId){if(!qe.has(st.kaGroupId)){const be=f.find(tt=>tt.id===st.kaGroupId);be&&(me+=be.keyQuantity||0,qe.add(st.kaGroupId))}}else st.keyType,me+=st.keyQuantity||2;de+=Ht});const Ge=zr(nr,"mk_projects",n.id);await Ua(Ge,{differsUsed:X,totalPhysicalKeys:me,totalCylinders:de,updatedAt:pi()}),console.log(`Differs updated: ${X} unique keys, ${me} physical keys, ${de} cylinders`)}catch(ke){console.error("Failed to update differs count:",ke)}},[n,s,d,f,r]),z=we.useCallback(async(ke,X,me,de={})=>{if(!(n!=null&&n.id))return;const{keyType:qe="KD",keyQuantity:Ge=2,kaGroupId:st=null,kaGroupName:yt=null}=de;try{const Ht=mi(nr,"mk_projects",n.id,"assignments");await Do(Ht,{doorId:ke,hierarchyId:X,keySymbol:me,keyType:qe,keyQuantity:Ge,kaGroupId:st,kaGroupName:yt,assignedAt:pi()}),await B(),console.log("Door assigned to key successfully:",qe,me)}catch(Ht){throw console.error("Failed to assign door:",Ht),Ht}},[n,B]),J=we.useCallback(async(ke,X,me)=>{if(n!=null&&n.id)try{const de=G2(nr),qe=mi(nr,"mk_projects",n.id,"assignments");ke.forEach(Ge=>{const st=zr(qe);de.set(st,{doorId:Ge,hierarchyId:X,keySymbol:me,assignedAt:pi()})}),await de.commit(),console.log("Bulk door assignment completed successfully")}catch(de){throw console.error("Failed to bulk assign doors:",de),de}},[n]),fe=we.useCallback(async ke=>{if(n!=null&&n.id)try{const X=mi(nr,"mk_projects",n.id,"assignments"),de=(await g0(X)).docs.find(qe=>qe.data().doorId===ke);de&&(await tc(zr(nr,"mk_projects",n.id,"assignments",de.id)),await B(),console.log("Door unassigned successfully"))}catch(X){throw console.error("Failed to unassign door:",X),X}},[n,B]),Se=we.useCallback((ke,X)=>A==="ANSI_BHMA"?`${ke}${(X+1)*10}`:`CK-${ke.split("-")[1]||"1"}${(X+1)*100}`,[A]),Ae=we.useCallback(async(ke,X,me,de,qe=5)=>{if(n!=null&&n.id){if(X.length<2)throw new Error("KA group must have at least 2 doors");try{const st=f.filter(tt=>tt.masterKeyId===me).length,yt=Se(de,st),Ht=mi(nr,"mk_projects",n.id,"ka_groups"),be=await Do(Ht,{name:ke,changeKeySymbol:yt,masterKeyId:me,masterKeySymbol:de,doorIds:X,keyQuantity:qe,createdAt:pi(),updatedAt:pi()});for(const tt of X){const ct=d.find(St=>St.doorId===tt);ct&&await tc(zr(nr,"mk_projects",n.id,"assignments",ct.assignmentId)),await z(tt,me,yt,{keyType:"KA",keyQuantity:0,kaGroupId:be.id,kaGroupName:ke})}return console.log("KA Group created:",ke,yt),be.id}catch(Ge){throw console.error("Failed to create KA group:",Ge),Ge}}},[n,f,d,Se,z,A]),Ne=we.useCallback(async(ke,X)=>{if(n!=null&&n.id)try{const me=zr(nr,"mk_projects",n.id,"ka_groups",ke);if(await Ua(me,{...X,updatedAt:pi()}),X.name){const de=f.find(qe=>qe.id===ke);if(de){const qe=G2(nr);de.doorIds.forEach(Ge=>{const st=d.find(yt=>yt.doorId===Ge);if(st){const yt=zr(nr,"mk_projects",n.id,"assignments",st.assignmentId);qe.update(yt,{kaGroupName:X.name})}}),await qe.commit()}}console.log("KA Group updated")}catch(me){throw console.error("Failed to update KA group:",me),me}},[n,f,d]),Xe=we.useCallback(async ke=>{if(n!=null&&n.id)try{const X=f.find(me=>me.id===ke);if(!X)return;await tc(zr(nr,"mk_projects",n.id,"ka_groups",ke));for(const me of X.doorIds){const de=d.find(qe=>qe.doorId===me);de&&await tc(zr(nr,"mk_projects",n.id,"assignments",de.assignmentId))}console.log("KA Group deleted")}catch(X){throw console.error("Failed to delete KA group:",X),X}},[n,f,d]),et=we.useCallback(async(ke,X)=>{if(n!=null&&n.id){if(X<1)throw new Error("Key quantity must be at least 1");try{const me=d.find(qe=>qe.doorId===ke);if(!me)throw new Error("Door not assigned");const de=zr(nr,"mk_projects",n.id,"assignments",me.assignmentId);await Ua(de,{keyQuantity:X}),console.log("Key quantity updated:",ke,X)}catch(me){throw console.error("Failed to update key quantity:",me),me}}},[n,d]),ot=we.useCallback(async(ke,X)=>{if(n!=null&&n.id)try{const me=[],de=[],qe=ke.filter(be=>!d.some(tt=>tt.doorId===be.id));qe.length>0&&me.push({type:"unassigned_doors",severity:"error",message:`${qe.length} doors not assigned to any key`,count:qe.length}),n.differsUsed>n.maxDiffersAvailable&&me.push({type:"exceeds_differs",severity:"error",message:"Design exceeds available differs",details:`${n.differsUsed} > ${n.maxDiffersAvailable}`}),s.length===0&&me.push({type:"no_hierarchy",severity:"error",message:"No hierarchy levels defined"});const Ge=mM(s,d,A,X),st=Ge.errors.filter(be=>be.type==="exceeds_maximum_depth"||be.type==="insufficient_depth"||be.type==="invalid_parent_child_pairing");me.push(...st.map(be=>({...be,severity:"error"})));const yt=Ge.warnings.filter(be=>be.type==="excessive_depth"||be.type==="below_facility_minimum"||be.type==="above_facility_maximum");de.push(...yt.map(be=>({...be,severity:"warning"})));const Ht=mi(nr,"mk_projects",n.id,"validations");return await Do(Ht,{errors:me,warnings:de,validatedAt:pi(),isValid:me.length===0}),console.log("Validation completed:",{errors:me.length,warnings:de.length}),{errors:me,warnings:de,isValid:me.length===0}}catch(me){throw console.error("Validation failed:",me),me}},[n,d,s,A]),mt=we.useCallback(async(ke,X,me)=>{if(n!=null&&n.id)try{const de={project:n,hierarchies:s,zones:u,assignments:d,doors:me,standard:Rc[A],generatedAt:new Date().toISOString()},qe=mi(nr,"mk_projects",n.id,"exports");return await Do(qe,{format:ke,options:X,generatedAt:pi()}),console.log("Export generated successfully"),de}catch(de){throw console.error("Export generation failed:",de),de}},[n,s,u,d,A]),te={projectId:e,mkSystemEnabled:q,mkApproach:E,standard:A,toggleMKSystem:j,updateMKApproach:P,updateStandard:se,updateMKProject:ge,mkProject:n,hierarchies:s,hierarchyTree:o,zones:u,assignments:d,kaGroups:f,validationIssues:y,loading:w,error:k,addHierarchyLevel:ye,updateHierarchyLevel:he,deleteHierarchyLevel:_e,applyHierarchyTemplate:Ue,createZone:Ie,autoGenerateZones:L,deleteZone:O,assignDoorToKey:z,bulkAssignDoors:J,unassignDoor:fe,createKAGroup:Ae,updateKAGroup:Ne,deleteKAGroup:Xe,updateKeyQuantity:et,generateKASymbol:Se,validateDesign:ot,generateExport:mt,statistics:(n==null?void 0:n.statistics)||{totalDoors:0,keyedDoors:0,unkeyedDoors:0,totalKeys:0,zonesDefined:0},isComplete:(n==null?void 0:n.mkSystemStatus)==="completed",differsRemaining:((n==null?void 0:n.maxDiffersAvailable)||0)-((n==null?void 0:n.differsUsed)||0),differsUsagePercentage:n!=null&&n.maxDiffersAvailable?(n.differsUsed/n.maxDiffersAvailable*100).toFixed(1):0};return c.jsx(VT.Provider,{value:te,children:t})},gM=({facilityType:t})=>{const[e,r]=we.useState(!1),{mkSystemEnabled:n,mkApproach:i,toggleMKSystem:s,updateMKApproach:a,loading:o}=Go(),l={"Commercial Office":"Standard 4-level hierarchy recommended","Hospital / Healthcare":"Departmental isolation with 4-5 levels","Education / School":"Complex 5-level hierarchy with wing separation","Airport / Transport":"Zone-based security with 3-4 levels","Hospitality / Hotel":"Floor-based hierarchy with 4 levels",Residential:"Simple 3-level hierarchy"},u=async()=>{try{await s(!n)}catch(d){console.error("Failed to toggle MK system:",d)}},h=async d=>{try{await a(d)}catch(p){console.error("Failed to update approach:",p)}};return c.jsxs("div",{children:[c.jsxs("div",{className:"mb-6 text-center",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Would you like to design a Master Key System?"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Design a professional master keying system for doors in this project with hierarchy levels, security zones, and key symbols."})]}),c.jsx("div",{className:"flex flex-col gap-1 mb-4",children:c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"Master Key System (Optional)"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Enable to start designing your master keying system."})]}),c.jsxs("div",{className:"flex items-center gap-3 self-start",children:[c.jsx("span",{className:"text-[11px] font-semibold text-gray-500 uppercase tracking-wide whitespace-nowrap",children:n?"Master key ON":"Master key OFF"}),c.jsx("button",{type:"button",role:"switch","aria-checked":n,onClick:u,disabled:o,className:`relative inline-flex h-5 w-10 shrink-0 items-center rounded-full transition-colors ${n?"bg-indigo-600":"bg-gray-300"} ${o?"opacity-50 cursor-not-allowed":""}`,children:c.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition ${n?"translate-x-[22px]":"translate-x-1"}`})})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("div",{className:`col-span-full text-xs font-bold uppercase tracking-wide rounded px-3 py-2 border ${n?"text-indigo-700 bg-indigo-50 border-indigo-100":"text-gray-500 bg-gray-50 border-gray-200"}`,children:n?`FACILITY: ${t.toUpperCase()}`:"MASTER KEY SYSTEM"}),n?c.jsxs("div",{className:"col-span-full space-y-3",children:[t&&c.jsxs("p",{className:"text-xs text-indigo-700 font-medium",children:[" ",l[t]||"Standard 4-level hierarchy recommended"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"Quick Setup Options:"}),c.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[c.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"mkApproach",value:"zone_based",checked:i==="zone_based",onChange:d=>h(d.target.value),className:"mt-0.5 text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{children:"Use building zones (automatic from doors)"})]}),c.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"mkApproach",value:"custom_hierarchy",checked:i==="custom_hierarchy",onChange:d=>h(d.target.value),className:"mt-0.5 text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{children:"Custom hierarchy design (step-by-step wizard)"})]}),c.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"mkApproach",value:"imported",checked:i==="imported",onChange:d=>h(d.target.value),className:"mt-0.5 text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{children:"Import existing keying schedule"})]})]})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-3 mt-3",children:[c.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"What you'll be able to do:"}),c.jsxs("ul",{className:"space-y-1 text-xs text-gray-600",children:[c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-indigo-600 mt-0.5",children:""}),c.jsx("span",{children:"Define access hierarchy and security zones"})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-indigo-600 mt-0.5",children:""}),c.jsx("span",{children:"Generate professional keying schedules"})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-indigo-600 mt-0.5",children:""}),c.jsx("span",{children:"Export key symbols and bitting lists"})]})]})]})]}):c.jsxs("div",{className:"col-span-full text-sm text-gray-500 border border-dashed border-gray-300 rounded-lg px-3 py-4 bg-gray-50",children:["Master Key System is currently turned off. Flip the toggle above if you want to design a professional keying system for your doors with hierarchy levels, security zones, and key symbols.",c.jsxs("button",{onClick:()=>r(!e),className:"text-xs text-indigo-600 hover:text-indigo-700 mt-3 flex items-center gap-1",children:["Learn more about Master Key Systems",c.jsx(Id,{className:`w-3 h-3 transition-transform ${e?"rotate-180":""}`})]}),e&&c.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-600 space-y-2",children:[c.jsx("p",{className:"font-semibold",children:"What is a Master Key System?"}),c.jsx("p",{children:'A master key system allows different keys to open different sets of locks, while "master" keys can open multiple locks in the hierarchy.'}),c.jsx("p",{children:"For example, a floor manager's key opens all rooms on their floor, while a building master key opens all floors."}),c.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[c.jsx("p",{className:"font-semibold mb-2",children:"Common Use Cases:"}),c.jsxs("ul",{className:"space-y-1 text-[11px]",children:[c.jsxs("li",{children:[c.jsx("span",{className:"font-semibold",children:"Commercial Offices:"})," Floor-based access with department suites"]}),c.jsxs("li",{children:[c.jsx("span",{className:"font-semibold",children:"Healthcare:"})," Department isolation with staff hierarchies"]}),c.jsxs("li",{children:[c.jsx("span",{className:"font-semibold",children:"Education:"})," Building and wing-based access control"]}),c.jsxs("li",{children:[c.jsx("span",{className:"font-semibold",children:"Hotels:"})," Guest rooms with floor master keys"]})]})]})]})]})]})]})},xM=({onNext:t,projectName:e="Untitled Project"})=>{var u;const{mkProject:r,mkApproach:n,standard:i,updateMKApproach:s,updateStandard:a}=Go(),o=[{id:"zone_based",title:"Zone-Based Keying",description:"Organize keys by functional zones (Admin, Classrooms, Labs)",icon:FT,recommended:["Education / School","Office Building","Healthcare"],features:["Easy to understand","Simple administration","Best for smaller buildings"]},{id:"floor_based",title:"Floor-Based Keying",description:"Organize keys by building floors (Floor 1, Floor 2, etc.)",icon:i3,recommended:["Office Building","Apartment / Residential","Hotel / Lodging"],features:["Clear hierarchy","Vertical organization","Best for multi-story buildings"]},{id:"functional",title:"Functional Keying",description:"Organize keys by department or function (HR, IT, Maintenance)",icon:x0,recommended:["Office Building","Healthcare","Industrial / Warehouse"],features:["Role-based access","Flexible management","Best for complex organizations"]}],l=async h=>{await s(h)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:c.jsx(x0,{className:"w-8 h-8 text-indigo-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome to Master Key System Design"}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"This wizard will guide you through creating a complete master key system for your project. You'll define key levels, organize doors, and generate professional keying schedules."})]}),c.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-lg p-6 border border-indigo-100",children:[c.jsx("h3",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider mb-3",children:"Project Summary"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-indigo-600 font-semibold uppercase tracking-wider mb-1",children:"Project Name"}),c.jsx("div",{className:"text-sm font-bold text-indigo-900",children:e})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-indigo-600 font-semibold uppercase tracking-wider mb-1",children:"Keying Approach"}),c.jsx("div",{className:"text-sm font-bold text-indigo-900 capitalize",children:((u=r==null?void 0:r.keyingApproach)==null?void 0:u.replace("_"," "))||"Not Set"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-indigo-600 font-semibold uppercase tracking-wider mb-1",children:"System Capacity"}),c.jsx("div",{className:"text-sm font-bold text-indigo-900",children:"Professional"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-indigo-600 font-semibold uppercase tracking-wider mb-1",children:"Status"}),c.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-600 text-white text-xs font-semibold rounded-full",children:(r==null?void 0:r.mkSystemStatus)||"Not Started"})]})]})]}),c.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-2 flex items-center gap-2",children:[c.jsx(i3,{className:"w-6 h-6 text-indigo-600"}),"Select Industry Standard"]}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose the standard that applies to your region and requirements. This determines pin configuration, key hierarchy levels, and compliance rules."}),c.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Object.values(Rc).map(h=>{const d=i===h.id;return c.jsxs("button",{onClick:()=>a(h.id),className:`p-4 border-2 rounded-lg text-left transition-all ${d?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300"}`,children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsx("div",{className:"font-bold text-gray-900",children:h.name}),d&&c.jsx(Wa,{className:"text-indigo-600 flex-shrink-0",size:20})]}),c.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[h.region,"  Version ",h.version]}),c.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[h.pinConfig.pins,"-pin system, ",h.pinConfig.depths," depths, MACS ",h.pinConfig.macs]}),c.jsx("div",{className:"text-xs font-semibold text-indigo-600",children:"Professional grade master key system"})]},h.id)})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Choose Your Keying Approach"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select the organizational strategy that best fits your building and security needs. You can change this later if needed."}),c.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:o.map(h=>{const d=h.icon,p=n===h.id;return c.jsxs("button",{onClick:()=>l(h.id),className:`text-left p-5 rounded-xl border-2 transition-all ${p?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-200 bg-white hover:border-indigo-300 hover:shadow-sm"}`,children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${p?"bg-indigo-600":"bg-gray-100"}`,children:c.jsx(d,{className:p?"text-white":"text-gray-600",size:24})}),p&&c.jsx(Wa,{className:"text-indigo-600",size:24})]}),c.jsx("h4",{className:`text-base font-bold mb-2 ${p?"text-indigo-900":"text-gray-900"}`,children:h.title}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:h.description}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Best For:"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:h.recommended.map(f=>c.jsx("span",{className:"text-[10px] px-2 py-1 bg-gray-100 text-gray-600 rounded-full font-medium",children:f},f))}),c.jsx("div",{className:"space-y-1 mt-3",children:h.features.map((f,v)=>c.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[c.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),f]},v))})]})]},h.id)})})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4",children:"What You'll Do Next"}),c.jsx("div",{className:"space-y-3",children:[{step:2,title:"Hierarchy Setup",desc:"Define your master key levels (GMK, MK, SMK, Change Keys)"},{step:3,title:"Zone Definition",desc:"Create zones to organize your doors by area or function"},{step:4,title:"Door Assignment",desc:"Assign each door to the appropriate keys and zones"},{step:5,title:"Validation",desc:"Review your design and fix any errors or warnings"},{step:6,title:"Export",desc:"Generate professional keying schedules and cutting lists"}].map(h=>c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-indigo-100 text-indigo-600 text-xs font-bold flex items-center justify-center",children:h.step}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-gray-900",children:h.title}),c.jsx("div",{className:"text-xs text-gray-600",children:h.desc})]})]},h.step))})]})]})},yM=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n})=>{const{mkProject:i,standard:s,updateMKProject:a}=Go(),[o,l]=we.useState((i==null?void 0:i.hierarchyLevels)||null),[u,h]=we.useState(!1),d=Rc[s],p=s==="ANSI_BHMA",f=r.length,v=q=>{if(f===0)return{total:0,breakdown:[]};switch(q){case 1:return{total:1,breakdown:[{label:"Single Key",count:1}]};case 2:const K=Math.max(2,Math.ceil(f/10));return{total:K+1,breakdown:[{label:"Master Key",count:1},{label:"Change Keys",count:K}]};case 3:const E=Math.max(3,Math.ceil(f/8)),C=Math.max(2,Math.ceil(E/3));return{total:1+C+E,breakdown:[{label:"Grand Master Key",count:1},{label:"Master Keys",count:C},{label:"Change Keys",count:E}]};case 4:const A=Math.max(4,Math.ceil(f/6)),D=Math.max(3,Math.ceil(A/4)),N=Math.max(2,Math.ceil(D/2));return{total:1+N+D+A,breakdown:[{label:"Great Grand Master",count:1},{label:"Grand Master Keys",count:N},{label:"Master Keys",count:D},{label:"Change Keys",count:A}]};default:return{total:0,breakdown:[]}}},y=q=>{switch(q){case 1:return`
  
     SKD / KD     Single Key Opens All Doors
                  (Keyed Alike or Keyed Different)
  
        
        
    All Doors`;case 2:return`
       
         A    Master Key (Opens All)
       
          
    
              
    
  AA1 AA2 AA3  Change Keys (Zone/Area Specific)
    
              
  Zone1 Zone2 Zone3`;case 3:return`
         
           A    Grand Master Key (Opens All)
         
            
      
                 
        
    AA        AB    Master Keys (Building/Floor)
        
                 
        
                
  
 AA1AA2 AB1AB2  Change Keys (Rooms/Doors)
  `;case 4:return`
           
             A    Great Grand Master (Opens All)
           
              
         
                  
         
       AA      AB    Grand Master Keys (Campus/Building)
         
                  
         
        
   AAA  AAB  ... ...  Master Keys (Floors/Wings)
    
            
    
  ... ...
 AAA1AAA2           Change Keys (Individual Rooms)
 `;default:return""}},b=q=>{switch(q){case 1:return`
  
     SKD / KD     Single Key Opens All Doors
                  (Keyed Alike or Keyed Different)
  
        
        
    All Doors`;case 2:return`
       
         MK    Master Key (Opens All)
       
          
    
              
  
  CK-1CK-2CK-3  User Keys (Zone/Area Specific)
  
              
  Zone1 Zone2 Zone3`;case 3:return`
         
          GMK    General Master Key (Opens All)
         
            
      
                 
      
    MK-1     MK-2   Master Keys (Building/Floor)
      
                 
        
                
 
 CK-1CK-2CK-3CK-4  User Keys (Rooms/Doors)
 `;case 4:return`
           
            GGMK   Great General Master (Opens All)
           
              
         
                  
       
      GMK-1  GMK-2   General Master Keys (Campus/Building)
       
                  
         
       
   MK-1 MK-2  ... ...  Master Keys (Floors/Wings)
   
            
    
  ... ...
 CK-1CK-2             User Keys (Individual Rooms)
 `;default:return""}},w=q=>({1:["Small residential","Storage units","Single-tenant facilities"],2:["Small offices","Retail stores","Apartment buildings","Small schools"],3:["Commercial offices","Hospitals","Universities","Hotels","Large schools"],4:["Multi-building campuses","Airport terminals","Hospital systems","Corporate headquarters"]})[q]||[],S=async q=>{l(q),h(!0);try{await a({hierarchyLevels:q})}catch(K){console.error("Failed to save hierarchy level:",K),n&&await n("Error",`Failed to save selection: ${K.message}`)}finally{h(!1)}},k=async()=>{await n(p?"ANSI/BHMA Key Symbols":"EN 1303 Key Symbols",p?`ANSI/BHMA Nomenclature:

 A = Great Grand Master Key (GGMK)
 AA = Grand Master Key (GMK)
 AAA = Master Key (MK)
 AAAA = Sub-Master Key (SMK)
 AAAAA = Change Key (CK)

Pattern: Each level adds one letter "A"

Example System:
  A  AA  AAA  AAA1

Keys are numbered sequentially:
  AA1, AA2, AA3...
  AAA1, AAA2, AAA3...`:`EN 1303 Nomenclature:

 GGMK = Great General Master Key
 GMK = General Master Key
 MK = Master Key
 SK = Sub-Key
 UK / CK = User Key / Change Key

Pattern: Descriptive abbreviations

Example System:
  GMK  MK-1  CK-101

Keys use zone/building codes:
  MK-1, MK-2, MK-3...
  CK-101, CK-102, CK-103...`)},R=[{level:1,title:"Single Key (SKD/KD)",subtitle:"All doors keyed alike or different",recommended:!1,icon:O9},{level:2,title:"2-Level System",subtitle:p?"Master  Change Keys":"Master  User Keys",recommended:!1,icon:FT},{level:3,title:"3-Level System",subtitle:p?"Grand Master  Master  Change":"General Master  Master  User",recommended:!0,icon:G9},{level:4,title:"4-Level System",subtitle:p?"Great GM  GM  Master  Change":"Great GM  GM  Master  User",recommended:!1,icon:H9}];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:c.jsx(y0,{className:"w-8 h-8 text-indigo-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Hierarchy Planning"}),c.jsxs("p",{className:"text-gray-600 max-w-2xl mx-auto",children:["Choose the hierarchy depth for your master key system based on ",d.name,"."]})]}),c.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-4",children:c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Bg,{className:"w-5 h-5 text-indigo-600"}),c.jsxs("h3",{className:"font-bold text-indigo-900",children:["Current Standard: ",d.name]})]}),c.jsxs("p",{className:"text-sm text-indigo-700 mb-2",children:[p?"North American":"European"," standard  ",d.pinConfig.pins," pins, ",d.pinConfig.depths," depths"]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("button",{onClick:k,className:"text-xs text-indigo-600 hover:text-indigo-800 underline flex items-center gap-1",children:[c.jsx(M9,{size:14}),"View key naming conventions"]})})]}),f>0&&c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:f}),c.jsx("div",{className:"text-xs text-indigo-700",children:"Total Doors"})]})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:"Select Hierarchy Level"}),R.map(q=>{const K=q.icon,E=v(q.level),C=o===q.level,A=w(q.level);return c.jsxs("button",{onClick:()=>S(q.level),disabled:u,className:`w-full text-left transition-all ${C?"bg-indigo-50 border-2 border-indigo-600 shadow-lg scale-[1.02]":"bg-white border-2 border-gray-200 hover:border-indigo-300 hover:shadow-md"} rounded-xl p-6 relative`,children:[q.recommended&&c.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:c.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-600 text-white text-xs font-bold px-4 py-1 rounded-full shadow-lg flex items-center gap-1",children:[c.jsx("span",{children:""})," RECOMMENDED"]})}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[c.jsx("div",{className:`flex-shrink-0 w-14 h-14 rounded-lg flex items-center justify-center ${C?"bg-indigo-100":"bg-gray-100"}`,children:c.jsx(K,{className:`w-7 h-7 ${C?"text-indigo-600":"text-gray-600"}`})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:`text-lg font-bold mb-1 ${C?"text-indigo-900":"text-gray-900"}`,children:q.title}),c.jsx("p",{className:`text-sm ${C?"text-indigo-700":"text-gray-600"}`,children:q.subtitle})]}),C&&c.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),c.jsx("div",{className:`rounded-lg p-4 mb-4 ${C?"bg-white border border-indigo-200":"bg-gray-50 border border-gray-200"}`,children:c.jsx("pre",{className:`text-xs font-mono leading-relaxed overflow-x-auto ${C?"text-indigo-900":"text-gray-700"}`,children:p?y(q.level):b(q.level)})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h5",{className:`text-sm font-bold mb-2 ${C?"text-indigo-900":"text-gray-900"}`,children:"Typical Use Cases:"}),c.jsx("ul",{className:"space-y-1",children:A.map((D,N)=>c.jsxs("li",{className:`text-sm flex items-start gap-2 ${C?"text-indigo-700":"text-gray-600"}`,children:[c.jsx("span",{className:C?"text-indigo-500":"text-gray-400",children:""}),c.jsx("span",{children:D})]},N))})]}),f>0&&c.jsxs("div",{className:`rounded-lg p-4 ${C?"bg-white border border-indigo-200":"bg-gray-50 border border-gray-200"}`,children:[c.jsxs("h5",{className:`text-sm font-bold mb-3 ${C?"text-indigo-900":"text-gray-900"}`,children:["Estimated Key Count for ",f," doors:"]}),c.jsxs("div",{className:"space-y-2",children:[E.breakdown.map((D,N)=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:`text-xs ${C?"text-indigo-700":"text-gray-600"}`,children:D.label}),c.jsx("span",{className:`text-sm font-bold ${C?"text-indigo-900":"text-gray-900"}`,children:D.count})]},N)),c.jsx("div",{className:`pt-2 mt-2 border-t ${C?"border-indigo-200":"border-gray-200"}`,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:`text-sm font-bold ${C?"text-indigo-900":"text-gray-900"}`,children:"Total Keys:"}),c.jsx("span",{className:`text-xl font-bold ${C?"text-indigo-600":"text-gray-900"}`,children:E.total})]})})]})]})]})]})]},q.level)})]}),o&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Next Step:"})," You'll define the specific hierarchy levels and key symbols based on your ",o,"-level system selection."]})})]})},Pd=(t,e,r,n="")=>{if(t==="ANSI_BHMA"){if(e===1)return"A";if(e===2)return"A"+String.fromCharCode(65+r);if(e===3)return n?n+String.fromCharCode(65+r):"AA"+String.fromCharCode(65+r);if(e===4)return n?`${n}${r+1}`:`AAA${r+1}`}else{if(e===1)return"GMK";if(e===2)return`MK-${r+1}`;if(e===3)return`SK-${r+1}`;if(e===4)return`CK-${r*100+1}`}return`KEY-${e}-${r}`},Mh=(t,e,r,n,i=null)=>{const s=t==="ANSI_BHMA";if(e===1)return s?"Grand Master Key":"General Master Key";if(e===2){if(r==="zone_based"&&i)return`${i} Master`;if(r==="floor_based")return`Floor ${n+1} Master`;if(r==="functional"){const a=["Administration","Operations","Facilities","Security","Services","Staff"];return`${a[n%a.length]} Master`}else return`Master Key ${n+1}`}return e===3?i?`${i} Sub-Master`:s?"Sub-Master Key":"Sub-Key":e===4?s?"Change Key":"User Key":`Level ${e} Key`},zT=(t,e)=>{if(!t||t.length===0)return 3;let r=0;if(e==="zone_based")r=new Set(t.map(i=>i.zone).filter(Boolean)).size;else if(e==="floor_based")r=new Set(t.map(i=>i.level).filter(Boolean)).size;else if(e==="functional"){const n=new Set(t.map(i=>i.use).filter(Boolean));r=Math.min(n.size,6)}else r=Math.ceil(t.length/30);return Math.max(2,Math.min(r,10))},HT=(t,e)=>!t||t.length===0?[]:e==="zone_based"?[...new Set(t.map(n=>n.zone).filter(Boolean))].sort():e==="floor_based"?[...new Set(t.map(n=>n.level).filter(Boolean))].sort():e==="functional"?[...new Set(t.map(n=>n.use).filter(Boolean))].slice(0,6).sort():[],vM=(t,e,r)=>!t||t.length===0?0:e==="zone_based"?t.filter(n=>n.zone===r).length:e==="floor_based"?t.filter(n=>n.level===r).length:e==="functional"?t.filter(n=>n.use===r).length:Math.ceil(t.length/4),wM=(t,e,r,n,i)=>{const s={standard:t,hierarchyLevels:e,approach:r,totalDoors:(n==null?void 0:n.length)||0,levels:[],estimatedTotalKeys:0},a=zT(n,r),o=HT(n,r),l={level:1,name:Mh(t,1,r,0),symbol:Pd(t,1,0),description:`Opens all ${s.totalDoors} doors`,count:1,keys:[{symbol:Pd(t,1,0),name:Mh(t,1,r,0)}]};if(s.levels.push(l),s.estimatedTotalKeys+=1,e>=2){const u=[];for(let d=0;d<a;d++){const p=o[d]||null,f=p?vM(n,r,p):0;u.push({symbol:Pd(t,2,d),name:Mh(t,2,r,d,p),doorCount:f})}const h={level:2,name:"Master Keys",description:`${a} master keys for ${r.replace("_"," ")} organization`,count:a,keys:u};s.levels.push(h),s.estimatedTotalKeys+=a}if(e>=3){const u=s.totalDoors||a*30,h={level:3,name:t==="ANSI_BHMA"?"Change Keys":"User Keys",description:"Created automatically when doors are assigned",count:u,keys:[]};s.levels.push(h),s.estimatedTotalKeys+=u}if(e>=4){const u=s.totalDoors||a*30,h={level:4,name:t==="ANSI_BHMA"?"Change Keys":"User Keys",description:"Individual room/door keys",count:u,keys:[]};s.levels.push(h)}return s},_M=(t,e,r,n,i)=>{const s=[],a=zT(n,r),o=HT(n,r);if(s.push({levelName:Mh(t,1,r,0),levelType:e===4?"GGM":"GMK",keySymbol:Pd(t,1,0),order:0,parentHierarchyId:null,description:`${Mh(t,1,r,0)} - Opens all doors in ${i}`,autoGenerated:!0}),e>=2)for(let l=0;l<a;l++){const u=o[l]||`Group ${l+1}`;s.push({levelName:Mh(t,2,r,l,u),levelType:e===4?"GMK":"MK",keySymbol:Pd(t,2,l),order:l+1,parentHierarchyId:null,description:`Master key for ${u}`,autoGenerated:!0})}return s},bM=(t,e)=>{const r=t==="ANSI_BHMA";return e===2?r?"2-Level System: Master  Change Keys":"2-Level System: Master  User Keys":e===3?r?"3-Level System: Grand Master  Master  Change":"3-Level System: General Master  Master  User":e===4?r?"4-Level System: Great GM  Grand Master  Master  Change":"4-Level System: Great GM  General Master  Master  User":"Single Key System (SKD/KD)"},SM=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n,showConfirm:i})=>{var se;const{mkProject:s,hierarchies:a,hierarchyTree:o,standard:l,mkApproach:u,addHierarchyLevel:h,deleteHierarchyLevel:d,applyHierarchyTemplate:p}=Go(),[f,v]=we.useState(!1),[y,b]=we.useState({levelName:"",keySymbol:"",parentHierarchyId:null}),[w,S]=we.useState(!1),[k,R]=we.useState(!1),q=Rc[l],K=(s==null?void 0:s.facilityType)||"Commercial Office",E=(s==null?void 0:s.hierarchyLevels)||3,C=bM(l,E),A=async()=>{const ge=wM(l,E,u,r);let ve=`This will create:

`;if(ge.levels.forEach((he,_e)=>{ve+=`**Level ${he.level}: ${he.name}**
`,he.keys&&he.keys.length>0&&he.keys.length<=10?he.keys.forEach(Ue=>{const Ie=Ue.doorCount?` (${Ue.doorCount} doors)`:"";ve+=`   ${Ue.symbol} - ${Ue.name}${Ie}
`}):he.count&&(ve+=`   ${he.count} key${he.count!==1?"s":""} - ${he.description}
`),ve+=`
`}),ve+=`**Total Estimated Keys:** ${ge.estimatedTotalKeys}

`,ve+="Change keys will be created automatically when you assign doors in Step 4.",!!(i?await i("Auto-Generate Hierarchy",ve,"Generate Hierarchy","Cancel"):confirm(ve))){if(a.length>0){if(!(i?await i("Replace Existing","This will replace your existing hierarchy levels. Continue?","Yes, Replace","Cancel"):confirm("This will replace your existing hierarchy levels. Continue?")))return;for(const _e of a)await d(_e.hierarchyId)}R(!0);try{const he=_M(l,E,u,r,K);let _e=null;for(const Ue of he){const Ie={...Ue,parentHierarchyId:Ue.order===0?null:_e};if(await h(Ie),Ue.order===0){await new Promise(O=>setTimeout(O,300));const L=a;L.length>0&&(_e=L[0].hierarchyId)}}n&&await n("Success",`Hierarchy generated successfully!

${he.length} levels created based on your ${E}-level plan.`)}catch(he){n&&await n("Error",`Failed to generate hierarchy: ${he.message}`)}finally{R(!1)}}},D=async()=>{if(i?await i("Replace Hierarchy","This will replace your current hierarchy. Continue?","Yes, Replace","Cancel"):confirm("This will replace your current hierarchy. Continue?")){S(!0);try{await p(K),n&&await n("Success","Template applied successfully!")}catch(ve){n&&await n("Error",`Failed to apply template: ${ve.message}`)}finally{S(!1)}}},N=async ge=>{ge.preventDefault();try{await h({...y,order:a.length,levelType:"custom"}),v(!1),b({levelName:"",keySymbol:"",parentHierarchyId:null})}catch(ve){n&&await n("Error",`Failed to add level: ${ve.message}`)}},j=async ge=>{if(i?await i("Delete Level","Delete this hierarchy level?","Yes, Delete","Cancel"):confirm("Delete this hierarchy level?"))try{await d(ge)}catch(ye){n&&await n("Error",`Failed to delete: ${ye.message}`)}},P=(ge,ve=0)=>ge.map(ye=>c.jsxs("div",{style:{marginLeft:ve*24},children:[c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-lg mb-2 hover:shadow-sm transition-shadow",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:c.jsx("span",{className:"font-bold text-indigo-600",children:ye.keySymbol})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-gray-900",children:ye.levelName}),c.jsx("div",{className:"text-sm text-gray-500",children:ye.description||ye.levelType})]}),ve<2&&ye.children&&ye.children.length>0&&c.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500",children:[ye.children.length," child",ye.children.length!==1?"ren":""]}),c.jsx("button",{onClick:()=>j(ye.hierarchyId),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete level",children:c.jsx(Dh,{size:16})})]}),ye.children&&ye.children.length>0&&P(ye.children,ve+1)]},ye.hierarchyId));return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:c.jsx(y0,{className:"w-8 h-8 text-indigo-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Hierarchy Setup"}),c.jsxs("p",{className:"text-gray-600 max-w-2xl mx-auto",children:["Define your master key hierarchy levels based on ",q.name,"."]})]}),c.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-2 border-emerald-200 rounded-xl p-6",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center",children:c.jsx(Wa,{className:"w-7 h-7 text-emerald-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("h3",{className:"font-bold text-emerald-900",children:"Your Hierarchy Plan"}),c.jsx("span",{className:"px-2 py-0.5 bg-emerald-600 text-white text-xs font-bold rounded-full",children:"FROM STEP 1.5"})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-3",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-emerald-700 font-semibold mb-1",children:"Standard"}),c.jsx("div",{className:"text-sm font-bold text-emerald-900",children:q.name})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-emerald-700 font-semibold mb-1",children:"Hierarchy System"}),c.jsx("div",{className:"text-sm font-bold text-emerald-900",children:C})]})]}),c.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-emerald-200",children:[c.jsx("div",{className:"text-xs font-semibold text-emerald-800 mb-2",children:"Structure:"}),c.jsxs("div",{className:"grid gap-1 text-sm text-emerald-700",children:[E>=1&&c.jsxs("div",{children:[" Level 1: ",l==="ANSI_BHMA"?"Grand Master":"General Master"," (1 key)"]}),E>=2&&c.jsxs("div",{children:[" Level 2: ","Master Keys"," (estimated: ",Math.ceil(r.length/30)||3,"-",Math.ceil(r.length/20)||6," keys)"]}),E>=3&&c.jsxs("div",{children:[" Level 3: ",l==="ANSI_BHMA"?"Change Keys":"User Keys"," (created per door assignment)"]}),E>=4&&c.jsx("div",{children:" Level 4: Individual Room Keys (created per door assignment)"})]})]})]})]})}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-xl p-5",children:[c.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[c.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:c.jsx(Au,{className:"w-6 h-6 text-indigo-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-indigo-900 mb-1",children:"Auto-Generate from Plan"}),c.jsxs("p",{className:"text-sm text-indigo-700",children:["Automatically create ",E,"-level hierarchy based on your Step 1.5 selection."]})]})]}),c.jsx("button",{onClick:A,disabled:k||!E,className:"w-full px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all font-semibold flex items-center justify-center gap-2 shadow-md",children:k?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Au,{size:18}),"Generate Hierarchy"]})})]}),c.jsxs("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-xl p-5",children:[c.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[c.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:c.jsx(Bg,{className:"w-6 h-6 text-gray-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:"Apply Template"}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Use facility-based template for ",K," (",((se=q.recommendations[K])==null?void 0:se.depth)||3," levels)."]})]})]}),c.jsx("button",{onClick:D,disabled:w,className:"w-full px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-semibold",children:w?"Applying...":"Apply Template"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:"Current Hierarchy"}),a.length===0?c.jsxs("div",{className:"text-center py-12 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl",children:[c.jsx(y0,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"No hierarchy levels defined yet."}),c.jsx("p",{className:"text-sm text-gray-400",children:"Apply a template or add levels manually to get started."})]}):c.jsxs("div",{className:"space-y-2",children:[P(o),c.jsx("div",{className:"mt-4 p-3 bg-emerald-50 border border-emerald-200 rounded-lg",children:c.jsxs("div",{className:"text-sm text-emerald-800",children:[c.jsx("strong",{children:a.length})," hierarchy level",a.length!==1?"s":""," defined"]})})]})]}),!f&&c.jsxs("button",{onClick:()=>v(!0),className:"w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-indigo-400 hover:text-indigo-600 flex items-center justify-center gap-2 transition-colors",children:[c.jsx(cw,{size:20}),"Add Custom Level"]}),f&&c.jsxs("form",{onSubmit:N,className:"bg-gray-50 border border-gray-200 rounded-lg p-4 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:"Add Custom Hierarchy Level"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Level Name"}),c.jsx("input",{type:"text",value:y.levelName,onChange:ge=>b({...y,levelName:ge.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Master Key",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Key Symbol"}),c.jsx("input",{type:"text",value:y.keySymbol,onChange:ge=>b({...y,keySymbol:ge.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., AA",required:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For ANSI: Use A, AA, AAA pattern. For EN: Use GM, M, S pattern."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Parent Level"}),c.jsxs("select",{value:y.parentHierarchyId||"",onChange:ge=>b({...y,parentHierarchyId:ge.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[c.jsx("option",{value:"",children:"None (Top Level)"}),a.map(ge=>c.jsx("option",{value:ge.hierarchyId,children:ge.levelName},ge.hierarchyId))]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Add Level"}),c.jsx("button",{type:"button",onClick:()=>{v(!1),b({levelName:"",keySymbol:"",parentHierarchyId:null})},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})},AM=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n,showConfirm:i})=>{const{mkProject:s,zones:a,mkApproach:o,createZone:l,autoGenerateZones:u,deleteZone:h}=Go(),[d,p]=we.useState(!1),[f,v]=we.useState({zoneName:"",color:"#3B82F6"}),[y,b]=we.useState(!1),w=[{name:"Red",value:"#EF4444"},{name:"Orange",value:"#F59E0B"},{name:"Green",value:"#10B981"},{name:"Blue",value:"#3B82F6"},{name:"Purple",value:"#8B5CF6"},{name:"Pink",value:"#EC4899"},{name:"Indigo",value:"#6366F1"},{name:"Teal",value:"#14B8A6"}],S=async()=>{if(r.length===0){n&&await n("No Doors Found","No doors found in project. Please add doors in Step 1 first.");return}const K=a.length>0?"This will replace existing zones. Continue?":`Auto-generate ${r.length} zone${r.length!==1?"s":""} based on your door data?`,E=a.length>0?"Replace Zones":"Generate Zones";if(i?await i(E,K,a.length>0?"Yes, Replace":"Generate","Cancel"):confirm(K)){if(a.length>0)for(const A of a)await h(A.zoneId);b(!0);try{await u(r,o),n&&await n("Success","Zones generated successfully!")}catch(A){n&&await n("Error",`Failed to generate zones: ${A.message}`)}finally{b(!1)}}},k=async K=>{K.preventDefault();try{await l({...f,doorCount:0}),p(!1),v({zoneName:"",color:"#3B82F6"})}catch(E){n&&await n("Error",`Failed to create zone: ${E.message}`)}},R=async K=>{if(i?await i("Delete Zone","Delete this zone?","Yes, Delete","Cancel"):confirm("Delete this zone?"))try{await h(K)}catch(C){n&&await n("Error",`Failed to delete zone: ${C.message}`)}},q=()=>{switch(o){case"zone_based":return"by Building Zones";case"floor_based":return"by Floor Levels";case"functional":return"by Functional Use";default:return""}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:c.jsx(Y2,{className:"w-8 h-8 text-indigo-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Zone Definition"}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Create zones to organize your doors for master key assignment."})]}),c.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-white rounded-lg flex items-center justify-center shadow-sm",children:c.jsx(Au,{className:"w-6 h-6 text-indigo-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:"Auto-Generate Zones"}),c.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Automatically create zones ",q()," from your project's ",r.length," door",r.length!==1?"s":"","."]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:S,disabled:y||r.length===0,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:y?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Au,{size:16}),"Generate Zones"]})}),r.length===0&&c.jsx("span",{className:"text-sm text-gray-500 self-center",children:"No doors available in project"})]})]})]})}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[c.jsx(K0,{className:"w-5 h-5 text-indigo-600"}),"Defined Zones"]}),a.length>0&&c.jsx("div",{className:"px-3 py-1 bg-emerald-50 border border-emerald-200 rounded-full",children:c.jsxs("span",{className:"text-sm font-semibold text-emerald-800",children:[a.length," zone",a.length!==1?"s":""]})})]}),a.length===0?c.jsxs("div",{className:"text-center py-12 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl",children:[c.jsx(Y2,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"No zones defined yet."}),c.jsx("p",{className:"text-sm text-gray-400",children:"Auto-generate zones or add them manually to get started."})]}):c.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:a.map(K=>c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white border-2 border-gray-200 rounded-lg hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center shadow-sm",style:{backgroundColor:K.color+"20",border:`2px solid ${K.color}`},children:c.jsx(Y2,{size:20,style:{color:K.color}})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-semibold text-gray-900 truncate",children:K.zoneName}),c.jsxs("div",{className:"text-sm text-gray-500",children:[K.doorCount||0," door",K.doorCount!==1?"s":""]})]}),c.jsx("button",{onClick:()=>R(K.zoneId),className:"flex-shrink-0 p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete zone",children:c.jsx(Dh,{size:16})})]},K.zoneId))})]}),!d&&c.jsxs("button",{onClick:()=>p(!0),className:"w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-indigo-400 hover:text-indigo-600 flex items-center justify-center gap-2 transition-colors",children:[c.jsx(cw,{size:20}),"Add Custom Zone"]}),d&&c.jsxs("form",{onSubmit:k,className:"bg-gray-50 border border-gray-200 rounded-lg p-4 space-y-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:"Add Custom Zone"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Zone Name"}),c.jsx("input",{type:"text",value:f.zoneName,onChange:K=>v({...f,zoneName:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., East Wing, Admin Area, Building A",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Zone Color"}),c.jsx("div",{className:"grid grid-cols-8 gap-2",children:w.map(K=>c.jsx("button",{type:"button",onClick:()=>v({...f,color:K.value}),className:`w-10 h-10 rounded-lg border-2 transition-all ${f.color===K.value?"border-gray-900 scale-110 shadow-md":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:K.value},title:K.name},K.value))})]}),c.jsxs("div",{className:"flex gap-2 pt-2",children:[c.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Add Zone"}),c.jsx("button",{type:"button",onClick:()=>{p(!1),v({zoneName:"",color:"#3B82F6"})},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]}),a.length>0&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Next Step:"})," You'll assign doors to specific hierarchy levels within these zones."]})})]})},EM=(t,e)=>{let r=e.find(n=>n.levelName.toLowerCase()===t.toLowerCase()||n.levelName.toLowerCase().includes(t.toLowerCase()));if(!r){const n=t.toLowerCase().split(/\s+/);r=e.find(i=>{const s=i.levelName.toLowerCase().split(/\s+/);return n.some(a=>s.some(o=>o.includes(a)||a.includes(o)))})}return r},rv=(t,e,r,n)=>{if(t==="ANSI_BHMA")return`${e}${r+1}`;{const i=e.match(/(\d+)/),s=i?i[1]:"1",a=String(r+1).padStart(2,"0");return`CK-${s}${a}`}},NM=(t,e)=>t.mark?`Door ${t.mark} Key`:t.use?`${t.use} Key`:e?`${e} Key ${t.id.slice(-4)}`:`Change Key ${t.id.slice(-4)}`,TM=(t,e)=>{const r=[];let n=e.find(s=>s.hierarchyId===t);for(;n&&n.parentHierarchyId;){const s=e.find(a=>a.hierarchyId===n.parentHierarchyId);if(s)r.push(s),n=s;else break}const i=e.find(s=>!s.parentHierarchyId&&s.hierarchyId!==t);return i&&!r.some(s=>s.hierarchyId===i.hierarchyId)&&r.push(i),r},kM=(t,e,r,n)=>{const i={assignments:[],changeKeys:[],masterCounts:{},totalChangeKeys:0,unassignedDoors:[]},s=r.filter(o=>o.order>0&&o.order<=r.length-1),a={};return t.forEach(o=>{const l=o.zone||"Unassigned";a[l]||(a[l]=[]),a[l].push(o)}),Object.entries(a).forEach(([o,l])=>{const u=EM(o,s);if(!u){i.unassignedDoors.push(...l);return}i.masterCounts[u.hierarchyId]||(i.masterCounts[u.hierarchyId]={master:u,count:0,zoneName:o});const h=TM(u.hierarchyId,r);l.forEach((d,p)=>{const f=rv(n,u.keySymbol,i.masterCounts[u.hierarchyId].count,u.hierarchyId),v=NM(d,o),y={doorId:d.id,door:d,changeKeySymbol:f,changeKeyName:v,masterKeyId:u.hierarchyId,masterKeySymbol:u.keySymbol,masterKeyName:u.levelName,parentMasterKeys:h.map(b=>({id:b.hierarchyId,symbol:b.keySymbol,name:b.levelName})),zoneName:o};i.assignments.push(y),i.changeKeys.push({symbol:f,name:v,doorId:d.id,masterKeyId:u.hierarchyId,zoneName:o}),i.masterCounts[u.hierarchyId].count++,i.totalChangeKeys++})}),i},CM=(t,e,r)=>{const n=r==="ANSI_BHMA";let i=`This will create:

`;const s=e.find(l=>!l.parentHierarchyId);s&&(i+=`**${s.levelName} (${s.keySymbol})**
`,i+=` Opens all ${t.totalChangeKeys} door${t.totalChangeKeys!==1?"s":""}

`),i+=`**Master Keys:**
`,Object.values(t.masterCounts).forEach(({master:l,count:u,zoneName:h})=>{i+=` ${l.keySymbol} (${l.levelName}) - ${u} door${u!==1?"s":""}
`;const d=t.changeKeys.filter(p=>p.masterKeyId===l.hierarchyId).slice(0,3);d.length>0&&(i+=`   Change Keys: ${d.map(p=>p.symbol).join(", ")}`,u>3&&(i+=`... (${u-3} more)`),i+=`
`)}),t.unassignedDoors.length>0&&(i+=`
 **${t.unassignedDoors.length} door${t.unassignedDoors.length!==1?"s":""} could not be auto-assigned**
`,i+=`These doors have no matching zone/master. You'll need to assign them manually.
`),i+=`
**Total Change Keys:** ${t.totalChangeKeys}
`;const a=Object.keys(t.masterCounts).length,o=s?1:0;return i+=`**Total Keys in System:** ${o+a+t.totalChangeKeys}
`,i+=`(${o} GMK + ${a} MK + ${t.totalChangeKeys} CK)
`,i},IM=(t,e,r)=>{const n={totalDoors:r.length,assignedDoors:t.length,unassignedDoors:r.length-t.length,progressPercentage:r.length>0?Math.round(t.length/r.length*100):0,masterStats:{}};return e.forEach(i=>{const s=t.filter(a=>a.hierarchyId===i.hierarchyId);n.masterStats[i.hierarchyId]={hierarchy:i,assignedCount:s.length,symbol:i.keySymbol,name:i.levelName}}),n},LM=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n,showConfirm:i})=>{const{hierarchies:s,zones:a,assignments:o,kaGroups:l,standard:u,assignDoorToKey:h,bulkAssignDoors:d,unassignDoor:p,createKAGroup:f,updateKeyQuantity:v}=Go(),[y,b]=we.useState(""),[w,S]=we.useState("all"),[k,R]=we.useState("all"),[q,K]=we.useState([]),[E,C]=we.useState(null),[A,D]=we.useState(!1),[N,j]=we.useState(!1),[P,se]=we.useState(!1),[ge,ve]=we.useState(""),[ye,he]=we.useState(5),[_e,Ue]=we.useState([]);we.useMemo(()=>IM(o,s,r),[o,s,r]);const Ie=we.useMemo(()=>{const X=new Set(r.map(me=>me.level).filter(Boolean));return Array.from(X).sort()},[r]),L=we.useMemo(()=>{const X=new Set(r.map(me=>me.zone).filter(Boolean));return Array.from(X).sort()},[r]),O=X=>o.some(me=>me.doorId===X),B=X=>o.find(me=>me.doorId===X),z=we.useMemo(()=>r.filter(X=>{var Ge,st,yt;const me=!y||((Ge=X.mark)==null?void 0:Ge.toLowerCase().includes(y.toLowerCase()))||((st=X.use)==null?void 0:st.toLowerCase().includes(y.toLowerCase()))||((yt=X.zone)==null?void 0:yt.toLowerCase().includes(y.toLowerCase())),de=w==="all"||X.zone===w,qe=k==="all"||X.level===k;return me&&de&&qe}),[r,y,w,k]),J=r.filter(X=>O(X.id)).length,fe=r.length,Se=fe>0?Math.round(J/fe*100):0,Ae=X=>{K(me=>me.includes(X)?me.filter(de=>de!==X):[...me,X])},Ne=()=>{const X=z.filter(me=>!O(me.id));K(X.map(me=>me.id))},Xe=()=>{K([])},et=async()=>{if(q.length===0||!E){n&&await n("Selection Required","Please select doors and a hierarchy level");return}D(!0);try{let X=o.filter(me=>me.hierarchyId===E.hierarchyId).length;for(const me of q){const de=rv(u,E.keySymbol,X,E.hierarchyId);await h(me,E.hierarchyId,de),X++}n&&await n("Success",`Successfully assigned ${q.length} door${q.length!==1?"s":""}`),Xe()}catch(X){n&&await n("Error",`Failed to assign doors: ${X.message}`)}finally{D(!1)}},ot=async(X,me)=>{D(!0);try{const de=o.filter(Ge=>Ge.hierarchyId===me.hierarchyId).length,qe=rv(u,me.keySymbol,de,me.hierarchyId);await h(X,me.hierarchyId,qe)}catch(de){n&&await n("Error",`Failed to assign door: ${de.message}`)}finally{D(!1)}},mt=async X=>{D(!0);try{await p(X),n&&await n("Success","Door unassigned successfully")}catch(me){n&&await n("Error",`Failed to unassign door: ${me.message}`)}finally{D(!1)}},te=async()=>{if(!ge.trim()){n&&await n("Name Required","Please enter a name for the KA group");return}if(_e.length<2){n&&await n("Selection Required","KA group must have at least 2 doors");return}if(!r.find(de=>de.id===_e[0]))return;const me=s.find(de=>de.order>0);if(!me){n&&await n("No Master Key","Please create master keys in Step 2 first");return}D(!0);try{await f(ge,_e,me.hierarchyId,me.keySymbol,ye),n&&await n("Success",`KA Group "${ge}" created with ${_e.length} doors`),se(!1),ve(""),he(5),Ue([]),Xe()}catch(de){n&&await n("Error",`Failed to create KA group: ${de.message}`)}finally{D(!1)}},ke=async()=>{if(r.length===0){n&&await n("No Doors","No doors found in project to assign.");return}if(s.length===0){n&&await n("No Hierarchy","Please create hierarchy levels in Step 2 first.");return}const X=kM(r,a,s,u);if(X.assignments.length===0){n&&await n("Cannot Auto-Assign","No zones could be matched to master keys. Please ensure your zones match your master key names.");return}const me=CM(X,s,u);if(i?await i("Auto-Assign Doors",me,"Confirm Assignment","Cancel"):confirm(me)){j(!0);try{for(const qe of X.assignments)await h(qe.doorId,qe.masterKeyId,qe.changeKeySymbol);n&&await n("Success",`Auto-assigned ${X.assignments.length} door${X.assignments.length!==1?"s":""} successfully!

${X.totalChangeKeys} change keys created.`)}catch(qe){n&&await n("Error",`Failed to auto-assign doors: ${qe.message}`)}finally{j(!1)}}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:c.jsx(uu,{className:"w-8 h-8 text-indigo-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Door Assignment"}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Assign doors to hierarchy levels to define which keys open which doors."})]}),c.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-sm font-semibold text-indigo-900 mb-1",children:"Assignment Progress"}),c.jsxs("div",{className:"text-2xl font-bold text-indigo-600 mb-2",children:[J," / ",fe," doors"]}),J>0&&c.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),c.jsxs("span",{className:"text-gray-700",children:[c.jsxs("strong",{children:[r.filter(X=>O(X.id)).reduce((X,me)=>X+(me.qty||1),0)," cylinders"]})," assigned"]})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),c.jsxs("span",{className:"text-gray-600",children:[r.reduce((X,me)=>X+(me.qty||1),0)," total cylinders in schedule"]})]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:"text-3xl font-bold text-indigo-600",children:[Se,"%"]}),c.jsx("div",{className:"text-sm text-indigo-700",children:"Complete"})]})]}),c.jsx("div",{className:"w-full bg-indigo-200 rounded-full h-3 overflow-hidden",children:c.jsx("div",{className:"bg-indigo-600 h-full rounded-full transition-all duration-500",style:{width:`${Se}%`}})})]}),s.length>0&&c.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(y0,{className:"w-5 h-5 text-blue-600"}),c.jsx("h3",{className:"font-bold text-blue-900",children:"Master Key Hierarchy"})]}),c.jsx("div",{className:"space-y-3",children:s.map((X,me)=>{const de=o.filter(Ge=>Ge.hierarchyId===X.hierarchyId).length,qe=X.order===0;return c.jsxs("div",{className:"flex items-center gap-3 bg-white bg-opacity-60 rounded-lg p-3",style:{marginLeft:`${X.order*16}px`},children:[c.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${qe?"bg-blue-100":"bg-cyan-100"}`,children:c.jsx("span",{className:`font-bold text-sm ${qe?"text-blue-700":"text-cyan-700"}`,children:X.keySymbol})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:X.levelName}),c.jsx("div",{className:"text-xs text-gray-600",children:qe?`Opens all ${fe} doors`:`${de} door${de!==1?"s":""} assigned`})]}),!qe&&de>0&&c.jsx("div",{className:"flex-shrink-0",children:c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700",children:de})})]},X.hierarchyId)})})]}),r.length>0&&J<fe&&s.length>0&&c.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-xl p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Au,{className:"w-5 h-5 text-indigo-600"}),c.jsx("h3",{className:"font-bold text-indigo-900",children:"Smart Auto-Assignment"})]}),c.jsx("p",{className:"text-sm text-indigo-700 mb-2",children:"Automatically assign all doors to master keys based on zones and hierarchy."}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-indigo-600",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Q9,{className:"w-4 h-4"}),c.jsxs("span",{children:[fe-J," unassigned doors"]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(y0,{className:"w-4 h-4"}),c.jsxs("span",{children:[s.filter(X=>X.order>0).length," master keys"]})]})]})]}),c.jsx("button",{onClick:ke,disabled:N||A,className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg flex items-center gap-2 font-semibold",children:N?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),c.jsx("span",{children:"Assigning..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Au,{className:"w-5 h-5"}),c.jsx("span",{children:"Auto-Assign All Doors"})]})})]})}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[c.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx(OT,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),c.jsx("input",{type:"text",value:y,onChange:X=>b(X.target.value),placeholder:"Search doors...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),c.jsxs("div",{className:"relative",children:[c.jsx(r3,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),c.jsxs("select",{value:w,onChange:X=>S(X.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",children:[c.jsx("option",{value:"all",children:"All Zones"}),L.map(X=>c.jsx("option",{value:X,children:X},X))]})]}),c.jsxs("div",{className:"relative",children:[c.jsx(r3,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),c.jsxs("select",{value:k,onChange:X=>R(X.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",children:[c.jsx("option",{value:"all",children:"All Levels"}),Ie.map(X=>c.jsxs("option",{value:X,children:["Floor ",X]},X))]})]})]}),q.length>0&&c.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center gap-3",children:[c.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:[q.length," door",q.length!==1?"s":""," selected"]}),c.jsxs("select",{value:(E==null?void 0:E.hierarchyId)||"",onChange:X=>{const me=s.find(de=>de.hierarchyId===X.target.value);C(me)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[c.jsx("option",{value:"",children:"Select hierarchy level..."}),s.map(X=>c.jsxs("option",{value:X.hierarchyId,children:[X.keySymbol," - ",X.levelName]},X.hierarchyId))]}),c.jsx("button",{onClick:et,disabled:!E||A,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:A?"Assigning...":"Assign Selected"}),c.jsxs("button",{onClick:()=>{q.length>=2?(Ue(q),se(!0)):n==null||n("Selection Required","Please select at least 2 doors to create a KA group")},disabled:q.length<2,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[c.jsx(Hp,{size:16}),"Create KA Group"]}),c.jsx("button",{onClick:Xe,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear"})]})]}),z.some(X=>!O(X.id))&&c.jsxs("button",{onClick:Ne,className:"text-sm text-indigo-600 hover:text-indigo-700 font-semibold",children:["Select all unassigned (",z.filter(X=>!O(X.id)).length,")"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[c.jsx(K0,{className:"w-5 h-5 text-indigo-600"}),"Doors (",z.length,")"]}),z.length===0?c.jsxs("div",{className:"text-center py-12 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl",children:[c.jsx(uu,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500",children:"No doors match your filters."})]}):c.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:z.map(X=>{const me=O(X.id),de=B(X.id),qe=q.includes(X.id),Ge=de?s.find(st=>st.hierarchyId===de.hierarchyId):null;return c.jsxs("div",{className:`flex items-center gap-3 p-4 border-2 rounded-lg transition-all ${me?"bg-emerald-50 border-emerald-200":qe?"bg-indigo-50 border-indigo-400":"bg-white border-gray-200 hover:border-gray-300"}`,children:[!me&&c.jsx("button",{onClick:()=>Ae(X.id),className:"flex-shrink-0",children:qe?c.jsx(Wa,{className:"text-indigo-600",size:20}):c.jsx(j9,{className:"text-gray-400",size:20})}),c.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center ${me?"bg-emerald-100":"bg-gray-100"}`,children:c.jsx(uu,{size:20,className:me?"text-emerald-600":"text-gray-600"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"font-semibold text-gray-900",children:X.mark}),X.qty>1&&c.jsxs("div",{className:"px-2 py-0.5 bg-orange-100 border border-orange-300 rounded text-xs font-bold text-orange-700",children:["QTY ",X.qty]})]}),c.jsxs("div",{className:"text-sm text-gray-600 truncate",children:[X.use,"  Floor ",X.level,"  ",X.zone]})]}),me&&Ge?c.jsxs("div",{className:"flex items-center gap-2",children:[de.keyType==="KA"?c.jsx("div",{className:"flex-shrink-0 p-1.5 bg-purple-100 rounded-lg",title:"Keyed Alike - Shared key with other doors",children:c.jsx(Hp,{size:16,className:"text-purple-600"})}):c.jsx("div",{className:"flex-shrink-0 p-1.5 bg-blue-100 rounded-lg",title:"Keyed Differ - Unique key",children:c.jsx(x0,{size:16,className:"text-blue-600"})}),c.jsx("div",{className:"flex-shrink-0 px-3 py-1 bg-emerald-100 border border-emerald-300 rounded-full",children:c.jsx("span",{className:"text-sm font-semibold text-emerald-800",children:de.keySymbol||Ge.keySymbol})}),c.jsx("div",{className:"flex-shrink-0 px-2 py-0.5 bg-cyan-50 border border-cyan-200 rounded text-xs text-cyan-700",children:Ge.keySymbol}),de.keyType==="KA"?c.jsx("div",{className:"flex-shrink-0 px-2 py-1 bg-purple-50 border border-purple-200 rounded text-xs text-purple-700 font-medium",children:de.kaGroupName||"KA Group"}):c.jsxs("div",{className:"flex-shrink-0 px-2 py-1 bg-gray-50 border border-gray-200 rounded text-xs text-gray-700",children:[de.keyQuantity||2," keys"]}),c.jsx("button",{onClick:()=>mt(X.id),disabled:A,className:"flex-shrink-0 p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Unassign door",children:c.jsx(ll,{size:16})})]}):c.jsxs("select",{onChange:st=>{if(st.target.value){const yt=s.find(Ht=>Ht.hierarchyId===st.target.value);yt&&(ot(X.id,yt),st.target.value="")}},className:"flex-shrink-0 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",disabled:A,children:[c.jsx("option",{value:"",children:"Assign to..."}),s.map(st=>c.jsxs("option",{value:st.hierarchyId,children:[st.keySymbol," - ",st.levelName]},st.hierarchyId))]})]},X.id)})})]}),J>0&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Progress:"})," ",J," of ",fe," doors assigned.",J===fe?" Ready for validation!":" Keep assigning to complete your design."]})}),P&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-t-2xl",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"p-2 bg-white bg-opacity-20 rounded-lg",children:c.jsx(Hp,{className:"w-6 h-6"})}),c.jsx("h2",{className:"text-2xl font-bold",children:"Create Keyed Alike Group"})]}),c.jsx("p",{className:"text-purple-100 text-sm",children:"Create a group of doors that share the same key - one key opens all doors in this group"})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"KA Group Name *"}),c.jsx("input",{type:"text",value:ge,onChange:X=>ve(X.target.value),placeholder:"e.g., Conference Rooms, Bathrooms, Storage Closets",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",autoFocus:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Give this group a descriptive name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Number of Physical Keys *"}),c.jsx("input",{type:"number",min:"1",max:"100",value:ye,onChange:X=>he(parseInt(X.target.value)||1),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Total number of keys to manufacture for this group (one key opens all ",_e.length," doors)"]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:["Selected Doors (",_e.length,")"]}),c.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 max-h-60 overflow-y-auto",children:c.jsx("div",{className:"space-y-2",children:_e.map(X=>{const me=r.find(de=>de.id===X);return me?c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-lg",children:[c.jsx(uu,{size:18,className:"text-gray-600 flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-medium text-gray-900",children:me.mark}),c.jsx("div",{className:"text-xs text-gray-600 truncate",children:me.use})]}),c.jsx("button",{onClick:()=>Ue(_e.filter(de=>de!==X)),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:c.jsx(ll,{size:16})})]},X):null})})}),_e.length<2&&c.jsx("p",{className:"text-xs text-red-600 mt-2",children:" KA group must have at least 2 doors"})]}),c.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-semibold text-purple-900 mb-2 flex items-center gap-2",children:[c.jsx(J9,{size:18}),"Summary"]}),c.jsxs("ul",{className:"text-sm text-purple-800 space-y-1",children:[c.jsxs("li",{children:[" ",c.jsxs("strong",{children:[_e.length," doors"]})," will share the same key"]}),c.jsxs("li",{children:[" ",c.jsxs("strong",{children:[ye," physical keys"]})," will be manufactured"]}),c.jsxs("li",{children:[" One key opens all ",_e.length," doors in this group"]}),c.jsx("li",{children:" Cost-effective: Fewer unique keys to manage"})]})]})]}),c.jsxs("div",{className:"bg-gray-50 px-6 py-4 rounded-b-2xl flex items-center justify-end gap-3",children:[c.jsx("button",{onClick:()=>{se(!1),ve(""),he(5)},className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Cancel"}),c.jsx("button",{onClick:te,disabled:A||!ge.trim()||_e.length<2,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg font-semibold flex items-center gap-2",children:A?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Creating..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Hp,{size:18}),"Create KA Group"]})})]})]})})]})},PM=({onNext:t,onBack:e,projectDoors:r=[],showNotice:n})=>{const{mkProject:i,hierarchies:s,assignments:a,standard:o,validateDesign:l}=Go(),[u,h]=we.useState(null),[d,p]=we.useState(!1),f=(i==null?void 0:i.facilityType)||"Commercial Office";we.useEffect(()=>{v()},[]);const v=async()=>{p(!0);try{const E=await l(r,f);h(E)}catch(E){console.error("Validation error:",E),n&&await n("Validation Failed",`Validation failed: ${E.message}`)}finally{p(!1)}},y=r.length,b=r.filter(E=>a.some(C=>C.doorId===E.id)).length,w=s.length,S=(i==null?void 0:i.differsUsed)||0,k=(i==null?void 0:i.maxDiffersAvailable)||0,R=k-S,q=(i==null?void 0:i.totalPhysicalKeys)||0,K=(i==null?void 0:i.totalCylinders)||0;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:c.jsx(Wa,{className:"w-8 h-8 text-indigo-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Design Validation"}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Review your master key system design for errors and standards compliance."})]}),u&&c.jsx("div",{className:`border-2 rounded-xl p-6 ${u.isValid?"bg-emerald-50 border-emerald-300":"bg-amber-50 border-amber-300"}`,children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`flex-shrink-0 w-16 h-16 rounded-full flex items-center justify-center ${u.isValid?"bg-emerald-100":"bg-amber-100"}`,children:u.isValid?c.jsx(Wa,{className:"w-8 h-8 text-emerald-600"}):c.jsx(fo,{className:"w-8 h-8 text-amber-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-2xl font-bold mb-1 ${u.isValid?"text-emerald-900":"text-amber-900"}`,children:u.isValid?"Design Ready!":"Action Required"}),c.jsx("div",{className:`text-sm ${u.isValid?"text-emerald-700":"text-amber-700"}`,children:u.isValid?"Your master key system is complete and ready to export.":"Please address the items below before proceeding."})]}),c.jsxs("button",{onClick:v,disabled:d,className:"flex-shrink-0 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2 font-semibold",children:[c.jsx(Ld,{size:16,className:d?"animate-spin":""}),"Re-validate"]})]})}),c.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:c.jsx(K0,{size:20,className:"text-blue-600"})}),c.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Total Doors"})]}),c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:y})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:c.jsx(Wa,{size:20,className:"text-emerald-600"})}),c.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Assigned"})]}),c.jsx("div",{className:"text-3xl font-bold text-emerald-600",children:b}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[y>0?Math.round(b/y*100):0,"% Complete"]})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:c.jsx(x0,{size:20,className:"text-purple-600"})}),c.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Unique Keys"})]}),c.jsx("div",{className:"text-3xl font-bold text-purple-600",children:S}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["of ",k.toLocaleString()," available"]})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:c.jsx(MT,{size:20,className:"text-orange-600"})}),c.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Cylinders"})]}),c.jsx("div",{className:"text-3xl font-bold text-orange-600",children:K}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[q," keys to cut"]})]})]}),c.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"System Capacity"}),c.jsxs("div",{className:"mb-4",children:[S<=100&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-6xl mb-2",children:""}),c.jsx("div",{className:"text-2xl font-bold text-emerald-600 mb-2",children:"Excellent"}),c.jsxs("div",{className:"text-lg text-gray-700 mb-4",children:["Very High Capacity  ",R.toLocaleString()," keys available"]}),c.jsx("div",{className:"max-w-md mx-auto bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:c.jsxs("div",{className:"text-sm text-emerald-800 space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Unique Keys:"}),c.jsxs("strong",{children:[S," of ",k.toLocaleString()]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Physical Keys:"}),c.jsxs("strong",{children:[q," to manufacture"]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Cylinders:"}),c.jsxs("strong",{children:[K," in system"]})]})]})})]}),S>100&&S<=500&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-6xl mb-2",children:""}),c.jsx("div",{className:"text-2xl font-bold text-yellow-600 mb-1",children:"Good"}),c.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:[S," unique keys | Capacity: High"]}),c.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[c.jsxs("div",{children:[c.jsxs("strong",{children:[q," physical keys"]})," to manufacture"]}),c.jsxs("div",{children:[c.jsxs("strong",{children:[K," cylinders"]})," in system"]}),c.jsx("div",{className:"mt-2 text-gray-500",children:"System is performing well with room for expansion"})]})]}),S>500&&S<=1e3&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-6xl mb-2",children:""}),c.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:"Consult Locksmith"}),c.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:[S," unique keys | Capacity: Moderate"]}),c.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[c.jsxs("div",{children:[c.jsxs("strong",{children:[q," physical keys"]})," to manufacture"]}),c.jsxs("div",{children:[c.jsxs("strong",{children:[K," cylinders"]})," in system"]}),c.jsx("div",{className:"mt-2 text-orange-600",children:"Consider reviewing system design with a professional locksmith"})]})]}),S>1e3&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-6xl mb-2",children:""}),c.jsx("div",{className:"text-2xl font-bold text-red-600 mb-1",children:"At Capacity"}),c.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:[S," unique keys | Capacity: Critical"]}),c.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[c.jsxs("div",{children:[c.jsxs("strong",{children:[q," physical keys"]})," to manufacture"]}),c.jsxs("div",{children:[c.jsxs("strong",{children:[K," cylinders"]})," in system"]}),c.jsx("div",{className:"mt-2 text-red-600 font-semibold",children:"System approaching maximum capacity - professional review required"})]})]})]})]})}),u&&u.errors.length>0&&c.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[c.jsx(fo,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-bold text-red-900 text-lg mb-1",children:["Issues to Resolve (",u.errors.length,")"]}),c.jsx("p",{className:"text-sm text-red-700",children:"Please address these issues before exporting your design."})]})]}),c.jsx("div",{className:"space-y-3",children:u.errors.map((E,C)=>c.jsx("div",{className:"bg-white border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-red-600 font-bold text-sm",children:C+1})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-red-900 mb-1",children:E.message}),E.details&&c.jsx("div",{className:"text-sm text-red-700",children:E.details}),E.count&&c.jsxs("div",{className:"text-sm text-red-700 mt-1",children:["Affected items: ",c.jsx("strong",{children:E.count})]}),E.type==="unassigned_doors"&&c.jsx("div",{className:"mt-2",children:c.jsx("button",{onClick:e,className:"text-sm text-red-700 hover:text-red-900 font-semibold underline",children:" Go to Step 4 to assign remaining doors"})})]})]})},C))})]}),u&&u.warnings.length>0&&c.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[c.jsx(Eh,{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-bold text-amber-900 text-lg mb-1",children:["Recommendations (",u.warnings.length,")"]}),c.jsx("p",{className:"text-sm text-amber-700",children:"These are suggestions to improve your design (optional)."})]})]}),c.jsx("div",{className:"space-y-3",children:u.warnings.map((E,C)=>c.jsx("div",{className:"bg-white border border-amber-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Eh,{className:"flex-shrink-0 text-amber-600 mt-0.5",size:20}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-medium text-amber-900",children:E.message}),E.current!==void 0&&c.jsxs("div",{className:"text-sm text-amber-700 mt-1",children:["Current: ",E.current,E.recommended&&`  Recommended: ${E.recommended}`]})]})]})},C))})]}),u&&u.isValid&&c.jsx("div",{className:"bg-emerald-50 border-2 border-emerald-200 rounded-xl p-6",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx(Wa,{className:"flex-shrink-0 text-emerald-600 mt-0.5",size:28}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-emerald-900 text-xl mb-2",children:" All Systems Go!"}),c.jsx("div",{className:"text-emerald-800 mb-4",children:"Your master key system design is complete and meets all requirements. You're ready to export your keying schedule."}),c.jsxs("ul",{className:"text-sm text-emerald-800 space-y-1.5",children:[c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-600 rounded-full"}),"All ",y," doors have been assigned"]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-600 rounded-full"}),w," hierarchy levels configured"]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-600 rounded-full"}),S," unique keys within capacity limits"]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-600 rounded-full"}),K," cylinders ready for installation"]})]}),c.jsx("div",{className:"mt-4 pt-4 border-t border-emerald-300",children:c.jsx("button",{onClick:t,className:"px-6 py-3 bg-emerald-600 text-white rounded-lg font-semibold hover:bg-emerald-700 transition-colors shadow-md",children:"Proceed to Export "})})]})]})})]})};function pn(t){"@babel/helpers - typeof";return pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(t)}var bo=Uint8Array,_a=Uint16Array,uw=Int32Array,hw=new bo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fw=new bo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l3=new bo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qT=function(t,e){for(var r=new _a(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new uw(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return{b:r,r:i}},$T=qT(hw,2),jM=$T.b,nv=$T.r;jM[28]=258,nv[258]=28;var RM=qT(fw,0),c3=RM.r,iv=new _a(32768);for(var Mn=0;Mn<32768;++Mn){var Xl=(Mn&43690)>>1|(Mn&21845)<<1;Xl=(Xl&52428)>>2|(Xl&13107)<<2,Xl=(Xl&61680)>>4|(Xl&3855)<<4,iv[Mn]=((Xl&65280)>>8|(Xl&255)<<8)>>1}var jd=function(t,e,r){for(var n=t.length,i=0,s=new _a(e);i<n;++i)t[i]&&++s[t[i]-1];var a=new _a(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(r){o=new _a(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var u=i<<4|t[i],h=e-t[i],d=a[t[i]-1]++<<h,p=d|(1<<h)-1;d<=p;++d)o[iv[d]>>l]=u}else for(o=new _a(n),i=0;i<n;++i)t[i]&&(o[i]=iv[a[t[i]-1]++]>>15-t[i]);return o},Eu=new bo(288);for(var Mn=0;Mn<144;++Mn)Eu[Mn]=8;for(var Mn=144;Mn<256;++Mn)Eu[Mn]=9;for(var Mn=256;Mn<280;++Mn)Eu[Mn]=7;for(var Mn=280;Mn<288;++Mn)Eu[Mn]=8;var P1=new bo(32);for(var Mn=0;Mn<32;++Mn)P1[Mn]=5;var FM=jd(Eu,9,0),DM=jd(P1,5,0),WT=function(t){return(t+7)/8|0},MM=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new bo(t.subarray(e,r))},il=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},ed=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},tx=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,s=r.slice();if(!i)return{t:GT,l:0};if(i==1){var a=new bo(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(q,K){return q.f-K.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],u=0,h=1,d=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};h!=i-1;)o=r[r[u].f<r[d].f?u++:d++],l=r[u!=h&&r[u].f<r[d].f?u++:d++],r[h++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=s[0].s,n=1;n<i;++n)s[n].s>p&&(p=s[n].s);var f=new _a(p+1),v=sv(r[h-1],f,0);if(v>e){var n=0,y=0,b=v-e,w=1<<b;for(s.sort(function(K,E){return f[E.s]-f[K.s]||K.f-E.f});n<i;++n){var S=s[n].s;if(f[S]>e)y+=w-(1<<v-f[S]),f[S]=e;else break}for(y>>=b;y>0;){var k=s[n].s;f[k]<e?y-=1<<e-f[k]++-1:++n}for(;n>=0&&y;--n){var R=s[n].s;f[R]==e&&(--f[R],++y)}v=e}return{t:new bo(f),l:v}},sv=function(t,e,r){return t.s==-1?Math.max(sv(t.l,e,r+1),sv(t.r,e,r+1)):e[t.s]=r},u3=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new _a(++e),n=0,i=t[0],s=1,a=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[o]}return{c:r.subarray(0,n),n:e}},td=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},KT=function(t,e,r){var n=r.length,i=WT(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<n;++s)t[i+s+4]=r[s];return(i+4+n)*8},h3=function(t,e,r,n,i,s,a,o,l,u,h){il(e,h++,r),++i[256];for(var d=tx(i,15),p=d.t,f=d.l,v=tx(s,15),y=v.t,b=v.l,w=u3(p),S=w.c,k=w.n,R=u3(y),q=R.c,K=R.n,E=new _a(19),C=0;C<S.length;++C)++E[S[C]&31];for(var C=0;C<q.length;++C)++E[q[C]&31];for(var A=tx(E,7),D=A.t,N=A.l,j=19;j>4&&!D[l3[j-1]];--j);var P=u+5<<3,se=td(i,Eu)+td(s,P1)+a,ge=td(i,p)+td(s,y)+a+14+3*j+td(E,D)+2*E[16]+3*E[17]+7*E[18];if(l>=0&&P<=se&&P<=ge)return KT(e,h,t.subarray(l,l+u));var ve,ye,he,_e;if(il(e,h,1+(ge<se)),h+=2,ge<se){ve=jd(p,f,0),ye=p,he=jd(y,b,0),_e=y;var Ue=jd(D,N,0);il(e,h,k-257),il(e,h+5,K-1),il(e,h+10,j-4),h+=14;for(var C=0;C<j;++C)il(e,h+3*C,D[l3[C]]);h+=3*j;for(var Ie=[S,q],L=0;L<2;++L)for(var O=Ie[L],C=0;C<O.length;++C){var B=O[C]&31;il(e,h,Ue[B]),h+=D[B],B>15&&(il(e,h,O[C]>>5&127),h+=O[C]>>12)}}else ve=FM,ye=Eu,he=DM,_e=P1;for(var C=0;C<o;++C){var z=n[C];if(z>255){var B=z>>18&31;ed(e,h,ve[B+257]),h+=ye[B+257],B>7&&(il(e,h,z>>23&31),h+=hw[B]);var J=z&31;ed(e,h,he[J]),h+=_e[J],J>3&&(ed(e,h,z>>5&8191),h+=fw[J])}else ed(e,h,ve[z]),h+=ye[z]}return ed(e,h,ve[256]),h+ye[256]},OM=new uw([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),GT=new bo(0),BM=function(t,e,r,n,i,s){var a=s.z||t.length,o=new bo(n+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(n,o.length-i),u=s.l,h=(s.r||0)&7;if(e){h&&(l[0]=s.r>>3);for(var d=OM[e-1],p=d>>13,f=d&8191,v=(1<<r)-1,y=s.p||new _a(32768),b=s.h||new _a(v+1),w=Math.ceil(r/3),S=2*w,k=function(mt){return(t[mt]^t[mt+1]<<w^t[mt+2]<<S)&v},R=new uw(25e3),q=new _a(288),K=new _a(32),E=0,C=0,A=s.i||0,D=0,N=s.w||0,j=0;A+2<a;++A){var P=k(A),se=A&32767,ge=b[P];if(y[se]=ge,b[P]=se,N<=A){var ve=a-A;if((E>7e3||D>24576)&&(ve>423||!u)){h=h3(t,l,0,R,q,K,C,D,j,A-j,h),D=E=C=0,j=A;for(var ye=0;ye<286;++ye)q[ye]=0;for(var ye=0;ye<30;++ye)K[ye]=0}var he=2,_e=0,Ue=f,Ie=se-ge&32767;if(ve>2&&P==k(A-Ie))for(var L=Math.min(p,ve)-1,O=Math.min(32767,A),B=Math.min(258,ve);Ie<=O&&--Ue&&se!=ge;){if(t[A+he]==t[A+he-Ie]){for(var z=0;z<B&&t[A+z]==t[A+z-Ie];++z);if(z>he){if(he=z,_e=Ie,z>L)break;for(var J=Math.min(Ie,z-2),fe=0,ye=0;ye<J;++ye){var Se=A-Ie+ye&32767,Ae=y[Se],Ne=Se-Ae&32767;Ne>fe&&(fe=Ne,ge=Se)}}}se=ge,ge=y[se],Ie+=se-ge&32767}if(_e){R[D++]=268435456|nv[he]<<18|c3[_e];var Xe=nv[he]&31,et=c3[_e]&31;C+=hw[Xe]+fw[et],++q[257+Xe],++K[et],N=A+he,++E}else R[D++]=t[A],++q[t[A]]}}for(A=Math.max(A,N);A<a;++A)R[D++]=t[A],++q[t[A]];h=h3(t,l,u,R,q,K,C,D,j,A-j,h),u||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=b,s.p=y,s.i=A,s.w=N)}else{for(var A=s.w||0;A<a+u;A+=65535){var ot=A+65535;ot>=a&&(l[h/8|0]=u,ot=a),h=KT(l,h+1,t.subarray(A,ot))}s.i=a}return MM(o,0,n+WT(h)+i)},YT=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,s=r.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=n+=r[a];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},UM=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new bo(s.length+t.length);a.set(s),a.set(t,s.length),t=a,i.w=s.length}return BM(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},XT=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},VM=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=YT();i.p(e.dictionary),XT(t,2,i.d())}};function av(t,e){e||(e={});var r=YT();r.p(t);var n=UM(t,e,e.dictionary?6:2,4);return VM(n,e),XT(n,n.length-4,r.d()),n}var zM=typeof TextDecoder<"u"&&new TextDecoder,HM=0;try{zM.decode(GT,{stream:!0}),HM=1}catch{}function qM(t){if(Array.isArray(t))return t}function $M(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(h){u=!0,i=h}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function f3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function WM(t,e){if(t){if(typeof t=="string")return f3(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f3(t,e):void 0}}function KM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d3(t,e){return qM(t)||$M(t,e)||WM(t,e)||KM()}function p3(t,e="utf8"){return new TextDecoder(e).decode(t)}const GM=new TextEncoder;function YM(t){return GM.encode(t)}const XM=1024*8,QM=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),rx={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class dw{constructor(e=XM,r={}){hn(this,"buffer");hn(this,"byteLength");hn(this,"byteOffset");hn(this,"length");hn(this,"offset");hn(this,"lastWrittenByte");hn(this,"littleEndian");hn(this,"_data");hn(this,"_mark");hn(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=r.offset?r.offset>>>0:0,s=e.byteLength-i;let a=i;(ArrayBuffer.isView(e)||e instanceof dw)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=rx[r].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===QM&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const l=new rx[r](o.buffer);return this.offset+=n,l.reverse(),l}const a=new rx[r](s);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return p3(this.readBytes(e))}decodeText(e=1,r="utf8"){return p3(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(YM(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Sf(t){let e=t.length;for(;--e>=0;)t[e]=0}const ZM=3,JM=258,QT=29,eO=256,tO=eO+1+QT,ZT=30,rO=512,nO=new Array((tO+2)*2);Sf(nO);const iO=new Array(ZT*2);Sf(iO);const sO=new Array(rO);Sf(sO);const aO=new Array(JM-ZM+1);Sf(aO);const oO=new Array(QT);Sf(oO);const lO=new Array(ZT);Sf(lO);const cO=(t,e,r,n)=>{let i=t&65535|0,s=t>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do i=i+e[n++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0};var ov=cO;const uO=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},hO=new Uint32Array(uO()),fO=(t,e,r,n)=>{const i=hO,s=n+r;t^=-1;for(let a=n;a<s;a++)t=t>>>8^i[(t^e[a])&255];return t^-1};var Io=fO,lv={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},JT={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const dO=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var pO=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)dO(r,n)&&(t[n]=r[n])}}return t},mO=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,i=0,s=t.length;n<s;n++){let a=t[n];r.set(a,i),i+=a.length}return r},ek={assign:pO,flattenChunks:mO};let tk=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{tk=!1}const v0=new Uint8Array(256);for(let t=0;t<256;t++)v0[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;v0[254]=v0[254]=1;var gO=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,i,s,a=t.length,o=0;for(i=0;i<a;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),s=0,i=0;s<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const xO=(t,e)=>{if(e<65534&&t.subarray&&tk)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var yO=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,i;const s=new Array(r*2);for(i=0,n=0;n<r;){let a=t[n++];if(a<128){s[i++]=a;continue}let o=v0[a];if(o>4){s[i++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<r;)a=a<<6|t[n++]&63,o--;if(o>1){s[i++]=65533;continue}a<65536?s[i++]=a:(a-=65536,s[i++]=55296|a>>10&1023,s[i++]=56320|a&1023)}return xO(s,i)},vO=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+v0[t[r]]>e?r:e},cv={string2buf:gO,buf2string:yO,utf8border:vO};function wO(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var _O=wO;const qp=16209,bO=16191;var SO=function(e,r){let n,i,s,a,o,l,u,h,d,p,f,v,y,b,w,S,k,R,q,K,E,C,A,D;const N=e.state;n=e.next_in,A=e.input,i=n+(e.avail_in-5),s=e.next_out,D=e.output,a=s-(r-e.avail_out),o=s+(e.avail_out-257),l=N.dmax,u=N.wsize,h=N.whave,d=N.wnext,p=N.window,f=N.hold,v=N.bits,y=N.lencode,b=N.distcode,w=(1<<N.lenbits)-1,S=(1<<N.distbits)-1;e:do{v<15&&(f+=A[n++]<<v,v+=8,f+=A[n++]<<v,v+=8),k=y[f&w];t:for(;;){if(R=k>>>24,f>>>=R,v-=R,R=k>>>16&255,R===0)D[s++]=k&65535;else if(R&16){q=k&65535,R&=15,R&&(v<R&&(f+=A[n++]<<v,v+=8),q+=f&(1<<R)-1,f>>>=R,v-=R),v<15&&(f+=A[n++]<<v,v+=8,f+=A[n++]<<v,v+=8),k=b[f&S];r:for(;;){if(R=k>>>24,f>>>=R,v-=R,R=k>>>16&255,R&16){if(K=k&65535,R&=15,v<R&&(f+=A[n++]<<v,v+=8,v<R&&(f+=A[n++]<<v,v+=8)),K+=f&(1<<R)-1,K>l){e.msg="invalid distance too far back",N.mode=qp;break e}if(f>>>=R,v-=R,R=s-a,K>R){if(R=K-R,R>h&&N.sane){e.msg="invalid distance too far back",N.mode=qp;break e}if(E=0,C=p,d===0){if(E+=u-R,R<q){q-=R;do D[s++]=p[E++];while(--R);E=s-K,C=D}}else if(d<R){if(E+=u+d-R,R-=d,R<q){q-=R;do D[s++]=p[E++];while(--R);if(E=0,d<q){R=d,q-=R;do D[s++]=p[E++];while(--R);E=s-K,C=D}}}else if(E+=d-R,R<q){q-=R;do D[s++]=p[E++];while(--R);E=s-K,C=D}for(;q>2;)D[s++]=C[E++],D[s++]=C[E++],D[s++]=C[E++],q-=3;q&&(D[s++]=C[E++],q>1&&(D[s++]=C[E++]))}else{E=s-K;do D[s++]=D[E++],D[s++]=D[E++],D[s++]=D[E++],q-=3;while(q>2);q&&(D[s++]=D[E++],q>1&&(D[s++]=D[E++]))}}else if(R&64){e.msg="invalid distance code",N.mode=qp;break e}else{k=b[(k&65535)+(f&(1<<R)-1)];continue r}break}}else if(R&64)if(R&32){N.mode=bO;break e}else{e.msg="invalid literal/length code",N.mode=qp;break e}else{k=y[(k&65535)+(f&(1<<R)-1)];continue t}break}}while(n<i&&s<o);q=v>>3,n-=q,v-=q<<3,f&=(1<<v)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<o?257+(o-s):257-(s-o),N.hold=f,N.bits=v};const Ku=15,m3=852,g3=592,x3=0,nx=1,y3=2,AO=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),EO=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),NO=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),TO=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),kO=(t,e,r,n,i,s,a,o)=>{const l=o.bits;let u=0,h=0,d=0,p=0,f=0,v=0,y=0,b=0,w=0,S=0,k,R,q,K,E,C=null,A;const D=new Uint16Array(Ku+1),N=new Uint16Array(Ku+1);let j=null,P,se,ge;for(u=0;u<=Ku;u++)D[u]=0;for(h=0;h<n;h++)D[e[r+h]]++;for(f=l,p=Ku;p>=1&&D[p]===0;p--);if(f>p&&(f=p),p===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,o.bits=1,0;for(d=1;d<p&&D[d]===0;d++);for(f<d&&(f=d),b=1,u=1;u<=Ku;u++)if(b<<=1,b-=D[u],b<0)return-1;if(b>0&&(t===x3||p!==1))return-1;for(N[1]=0,u=1;u<Ku;u++)N[u+1]=N[u]+D[u];for(h=0;h<n;h++)e[r+h]!==0&&(a[N[e[r+h]]++]=h);if(t===x3?(C=j=a,A=20):t===nx?(C=AO,j=EO,A=257):(C=NO,j=TO,A=0),S=0,h=0,u=d,E=s,v=f,y=0,q=-1,w=1<<f,K=w-1,t===nx&&w>m3||t===y3&&w>g3)return 1;for(;;){P=u-y,a[h]+1<A?(se=0,ge=a[h]):a[h]>=A?(se=j[a[h]-A],ge=C[a[h]-A]):(se=96,ge=0),k=1<<u-y,R=1<<v,d=R;do R-=k,i[E+(S>>y)+R]=P<<24|se<<16|ge|0;while(R!==0);for(k=1<<u-1;S&k;)k>>=1;if(k!==0?(S&=k-1,S+=k):S=0,h++,--D[u]===0){if(u===p)break;u=e[r+a[h]]}if(u>f&&(S&K)!==q){for(y===0&&(y=f),E+=d,v=u-y,b=1<<v;v+y<p&&(b-=D[v+y],!(b<=0));)v++,b<<=1;if(w+=1<<v,t===nx&&w>m3||t===y3&&w>g3)return 1;q=S&K,i[q]=f<<24|v<<16|E-s|0}}return S!==0&&(i[E+S]=u-y<<24|64<<16|0),o.bits=f,0};var Rd=kO;const CO=0,rk=1,nk=2,{Z_FINISH:v3,Z_BLOCK:IO,Z_TREES:$p,Z_OK:Nu,Z_STREAM_END:LO,Z_NEED_DICT:PO,Z_STREAM_ERROR:Xa,Z_DATA_ERROR:ik,Z_MEM_ERROR:sk,Z_BUF_ERROR:jO,Z_DEFLATED:w3}=JT,Ug=16180,_3=16181,b3=16182,S3=16183,A3=16184,E3=16185,N3=16186,T3=16187,k3=16188,C3=16189,j1=16190,sl=16191,ix=16192,I3=16193,sx=16194,L3=16195,P3=16196,j3=16197,R3=16198,Wp=16199,Kp=16200,F3=16201,D3=16202,M3=16203,O3=16204,B3=16205,ax=16206,U3=16207,V3=16208,Un=16209,ak=16210,ok=16211,RO=852,FO=592,DO=15,MO=DO,z3=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function OO(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ru=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Ug||e.mode>ok?1:0},lk=t=>{if(Ru(t))return Xa;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Ug,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(RO),e.distcode=e.distdyn=new Int32Array(FO),e.sane=1,e.back=-1,Nu},ck=t=>{if(Ru(t))return Xa;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,lk(t)},uk=(t,e)=>{let r;if(Ru(t))return Xa;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Xa:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,ck(t))},hk=(t,e)=>{if(!t)return Xa;const r=new OO;t.state=r,r.strm=t,r.window=null,r.mode=Ug;const n=uk(t,e);return n!==Nu&&(t.state=null),n},BO=t=>hk(t,MO);let H3=!0,ox,lx;const UO=t=>{if(H3){ox=new Int32Array(512),lx=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Rd(rk,t.lens,0,288,ox,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Rd(nk,t.lens,0,32,lx,0,t.work,{bits:5}),H3=!1}t.lencode=ox,t.lenbits=9,t.distcode=lx,t.distbits=5},fk=(t,e,r,n)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(r-n,r-n+i),s.wnext),n-=i,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},VO=(t,e)=>{let r,n,i,s,a,o,l,u,h,d,p,f,v,y,b=0,w,S,k,R,q,K,E,C;const A=new Uint8Array(4);let D,N;const j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ru(t)||!t.output||!t.input&&t.avail_in!==0)return Xa;r=t.state,r.mode===sl&&(r.mode=ix),a=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,u=r.hold,h=r.bits,d=o,p=l,C=Nu;e:for(;;)switch(r.mode){case Ug:if(r.wrap===0){r.mode=ix;break}for(;h<16;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,A[0]=u&255,A[1]=u>>>8&255,r.check=Io(r.check,A,2,0),u=0,h=0,r.mode=_3;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Un;break}if((u&15)!==w3){t.msg="unknown compression method",r.mode=Un;break}if(u>>>=4,h-=4,E=(u&15)+8,r.wbits===0&&(r.wbits=E),E>15||E>r.wbits){t.msg="invalid window size",r.mode=Un;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?C3:sl,u=0,h=0;break;case _3:for(;h<16;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(r.flags=u,(r.flags&255)!==w3){t.msg="unknown compression method",r.mode=Un;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Un;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(A[0]=u&255,A[1]=u>>>8&255,r.check=Io(r.check,A,2,0)),u=0,h=0,r.mode=b3;case b3:for(;h<32;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(A[0]=u&255,A[1]=u>>>8&255,A[2]=u>>>16&255,A[3]=u>>>24&255,r.check=Io(r.check,A,4,0)),u=0,h=0,r.mode=S3;case S3:for(;h<16;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(A[0]=u&255,A[1]=u>>>8&255,r.check=Io(r.check,A,2,0)),u=0,h=0,r.mode=A3;case A3:if(r.flags&1024){for(;h<16;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(A[0]=u&255,A[1]=u>>>8&255,r.check=Io(r.check,A,2,0)),u=0,h=0}else r.head&&(r.head.extra=null);r.mode=E3;case E3:if(r.flags&1024&&(f=r.length,f>o&&(f=o),f&&(r.head&&(E=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+f),E)),r.flags&512&&r.wrap&4&&(r.check=Io(r.check,n,f,s)),o-=f,s+=f,r.length-=f),r.length))break e;r.length=0,r.mode=N3;case N3:if(r.flags&2048){if(o===0)break e;f=0;do E=n[s+f++],r.head&&E&&r.length<65536&&(r.head.name+=String.fromCharCode(E));while(E&&f<o);if(r.flags&512&&r.wrap&4&&(r.check=Io(r.check,n,f,s)),o-=f,s+=f,E)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=T3;case T3:if(r.flags&4096){if(o===0)break e;f=0;do E=n[s+f++],r.head&&E&&r.length<65536&&(r.head.comment+=String.fromCharCode(E));while(E&&f<o);if(r.flags&512&&r.wrap&4&&(r.check=Io(r.check,n,f,s)),o-=f,s+=f,E)break e}else r.head&&(r.head.comment=null);r.mode=k3;case k3:if(r.flags&512){for(;h<16;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Un;break}u=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=sl;break;case C3:for(;h<32;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}t.adler=r.check=z3(u),u=0,h=0,r.mode=j1;case j1:if(r.havedict===0)return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=h,PO;t.adler=r.check=1,r.mode=sl;case sl:if(e===IO||e===$p)break e;case ix:if(r.last){u>>>=h&7,h-=h&7,r.mode=ax;break}for(;h<3;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}switch(r.last=u&1,u>>>=1,h-=1,u&3){case 0:r.mode=I3;break;case 1:if(UO(r),r.mode=Wp,e===$p){u>>>=2,h-=2;break e}break;case 2:r.mode=P3;break;case 3:t.msg="invalid block type",r.mode=Un}u>>>=2,h-=2;break;case I3:for(u>>>=h&7,h-=h&7;h<32;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Un;break}if(r.length=u&65535,u=0,h=0,r.mode=sx,e===$p)break e;case sx:r.mode=L3;case L3:if(f=r.length,f){if(f>o&&(f=o),f>l&&(f=l),f===0)break e;i.set(n.subarray(s,s+f),a),o-=f,s+=f,l-=f,a+=f,r.length-=f;break}r.mode=sl;break;case P3:for(;h<14;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(r.nlen=(u&31)+257,u>>>=5,h-=5,r.ndist=(u&31)+1,u>>>=5,h-=5,r.ncode=(u&15)+4,u>>>=4,h-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Un;break}r.have=0,r.mode=j3;case j3:for(;r.have<r.ncode;){for(;h<3;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}r.lens[j[r.have++]]=u&7,u>>>=3,h-=3}for(;r.have<19;)r.lens[j[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,D={bits:r.lenbits},C=Rd(CO,r.lens,0,19,r.lencode,0,r.work,D),r.lenbits=D.bits,C){t.msg="invalid code lengths set",r.mode=Un;break}r.have=0,r.mode=R3;case R3:for(;r.have<r.nlen+r.ndist;){for(;b=r.lencode[u&(1<<r.lenbits)-1],w=b>>>24,S=b>>>16&255,k=b&65535,!(w<=h);){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(k<16)u>>>=w,h-=w,r.lens[r.have++]=k;else{if(k===16){for(N=w+2;h<N;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(u>>>=w,h-=w,r.have===0){t.msg="invalid bit length repeat",r.mode=Un;break}E=r.lens[r.have-1],f=3+(u&3),u>>>=2,h-=2}else if(k===17){for(N=w+3;h<N;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}u>>>=w,h-=w,E=0,f=3+(u&7),u>>>=3,h-=3}else{for(N=w+7;h<N;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}u>>>=w,h-=w,E=0,f=11+(u&127),u>>>=7,h-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Un;break}for(;f--;)r.lens[r.have++]=E}}if(r.mode===Un)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Un;break}if(r.lenbits=9,D={bits:r.lenbits},C=Rd(rk,r.lens,0,r.nlen,r.lencode,0,r.work,D),r.lenbits=D.bits,C){t.msg="invalid literal/lengths set",r.mode=Un;break}if(r.distbits=6,r.distcode=r.distdyn,D={bits:r.distbits},C=Rd(nk,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,D),r.distbits=D.bits,C){t.msg="invalid distances set",r.mode=Un;break}if(r.mode=Wp,e===$p)break e;case Wp:r.mode=Kp;case Kp:if(o>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=h,SO(t,p),a=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,u=r.hold,h=r.bits,r.mode===sl&&(r.back=-1);break}for(r.back=0;b=r.lencode[u&(1<<r.lenbits)-1],w=b>>>24,S=b>>>16&255,k=b&65535,!(w<=h);){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(S&&!(S&240)){for(R=w,q=S,K=k;b=r.lencode[K+((u&(1<<R+q)-1)>>R)],w=b>>>24,S=b>>>16&255,k=b&65535,!(R+w<=h);){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}u>>>=R,h-=R,r.back+=R}if(u>>>=w,h-=w,r.back+=w,r.length=k,S===0){r.mode=B3;break}if(S&32){r.back=-1,r.mode=sl;break}if(S&64){t.msg="invalid literal/length code",r.mode=Un;break}r.extra=S&15,r.mode=F3;case F3:if(r.extra){for(N=r.extra;h<N;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=D3;case D3:for(;b=r.distcode[u&(1<<r.distbits)-1],w=b>>>24,S=b>>>16&255,k=b&65535,!(w<=h);){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(!(S&240)){for(R=w,q=S,K=k;b=r.distcode[K+((u&(1<<R+q)-1)>>R)],w=b>>>24,S=b>>>16&255,k=b&65535,!(R+w<=h);){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}u>>>=R,h-=R,r.back+=R}if(u>>>=w,h-=w,r.back+=w,S&64){t.msg="invalid distance code",r.mode=Un;break}r.offset=k,r.extra=S&15,r.mode=M3;case M3:if(r.extra){for(N=r.extra;h<N;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Un;break}r.mode=O3;case O3:if(l===0)break e;if(f=p-l,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Un;break}f>r.wnext?(f-=r.wnext,v=r.wsize-f):v=r.wnext-f,f>r.length&&(f=r.length),y=r.window}else y=i,v=a-r.offset,f=r.length;f>l&&(f=l),l-=f,r.length-=f;do i[a++]=y[v++];while(--f);r.length===0&&(r.mode=Kp);break;case B3:if(l===0)break e;i[a++]=r.length,l--,r.mode=Kp;break;case ax:if(r.wrap){for(;h<32;){if(o===0)break e;o--,u|=n[s++]<<h,h+=8}if(p-=l,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?Io(r.check,i,p,a-p):ov(r.check,i,p,a-p)),p=l,r.wrap&4&&(r.flags?u:z3(u))!==r.check){t.msg="incorrect data check",r.mode=Un;break}u=0,h=0}r.mode=U3;case U3:if(r.wrap&&r.flags){for(;h<32;){if(o===0)break e;o--,u+=n[s++]<<h,h+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Un;break}u=0,h=0}r.mode=V3;case V3:C=LO;break e;case Un:C=ik;break e;case ak:return sk;case ok:default:return Xa}return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=h,(r.wsize||p!==t.avail_out&&r.mode<Un&&(r.mode<ax||e!==v3))&&fk(t,t.output,t.next_out,p-t.avail_out),d-=t.avail_in,p-=t.avail_out,t.total_in+=d,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?Io(r.check,i,p,t.next_out-p):ov(r.check,i,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===sl?128:0)+(r.mode===Wp||r.mode===sx?256:0),(d===0&&p===0||e===v3)&&C===Nu&&(C=jO),C},zO=t=>{if(Ru(t))return Xa;let e=t.state;return e.window&&(e.window=null),t.state=null,Nu},HO=(t,e)=>{if(Ru(t))return Xa;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Nu):Xa},qO=(t,e)=>{const r=e.length;let n,i,s;return Ru(t)||(n=t.state,n.wrap!==0&&n.mode!==j1)?Xa:n.mode===j1&&(i=1,i=ov(i,e,r,0),i!==n.check)?ik:(s=fk(t,e,r,r),s?(n.mode=ak,sk):(n.havedict=1,Nu))};var $O=ck,WO=uk,KO=lk,GO=BO,YO=hk,XO=VO,QO=zO,ZO=HO,JO=qO,eB="pako inflate (from Nodeca project)",cl={inflateReset:$O,inflateReset2:WO,inflateResetKeep:KO,inflateInit:GO,inflateInit2:YO,inflate:XO,inflateEnd:QO,inflateGetHeader:ZO,inflateSetDictionary:JO,inflateInfo:eB};function tB(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var rB=tB;const dk=Object.prototype.toString,{Z_NO_FLUSH:nB,Z_FINISH:iB,Z_OK:w0,Z_STREAM_END:cx,Z_NEED_DICT:ux,Z_STREAM_ERROR:sB,Z_DATA_ERROR:q3,Z_MEM_ERROR:aB}=JT;function G0(t){this.options=ek.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _O,this.strm.avail_out=0;let r=cl.inflateInit2(this.strm,e.windowBits);if(r!==w0)throw new Error(lv[r]);if(this.header=new rB,cl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=cv.string2buf(e.dictionary):dk.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=cl.inflateSetDictionary(this.strm,e.dictionary),r!==w0)))throw new Error(lv[r])}G0.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?iB:nB,dk.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=cl.inflate(r,a),s===ux&&i&&(s=cl.inflateSetDictionary(r,i),s===w0?s=cl.inflate(r,a):s===q3&&(s=ux));r.avail_in>0&&s===cx&&r.state.wrap>0&&t[r.next_in]!==0;)cl.inflateReset(r),s=cl.inflate(r,a);switch(s){case sB:case q3:case ux:case aB:return this.onEnd(s),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||s===cx))if(this.options.to==="string"){let l=cv.utf8border(r.output,r.next_out),u=r.next_out-l,h=cv.buf2string(r.output,l);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(l,l+u),0),this.onData(h)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===w0&&o===0)){if(s===cx)return s=cl.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};G0.prototype.onData=function(t){this.chunks.push(t)};G0.prototype.onEnd=function(t){t===w0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ek.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function oB(t,e){const r=new G0(e);if(r.push(t),r.err)throw r.msg||lv[r.err];return r.result}var lB=G0,cB=oB,uB={Inflate:lB,inflate:cB};const{Inflate:hB,inflate:fB}=uB;var $3=hB,dB=fB;const pk=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;pk[t]=e}const W3=4294967295;function pB(t,e,r){let n=t;for(let i=0;i<r;i++)n=pk[(n^e[i])&255]^n>>>8;return n}function mB(t,e){return(pB(W3,t,e)^W3)>>>0}function K3(t,e,r){const n=t.readUint32(),i=mB(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function mk(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function gk(t,e,r,n){let i=0;for(;i<n;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-n]&255}function xk(t,e,r,n){let i=0;if(r.length===0)for(;i<n;i++)e[i]=t[i];else for(;i<n;i++)e[i]=t[i]+r[i]&255}function yk(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-i]+r[s]>>1)&255}}function vk(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+gB(e[s-i],r[s],r[s-i])&255}}function gB(t,e,r){const n=t+e-r,i=Math.abs(n-t),s=Math.abs(n-e),a=Math.abs(n-r);return i<=s&&i<=a?t:s<=a?e:r}function xB(t,e,r,n,i,s){switch(t){case 0:mk(e,r,i);break;case 1:gk(e,r,i,s);break;case 2:xk(e,r,n,i);break;case 3:yk(e,r,n,i,s);break;case 4:vk(e,r,n,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const yB=new Uint16Array([255]),vB=new Uint8Array(yB.buffer),wB=vB[0]===255;function _B(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*i,l=new Uint8Array(n*r*o);let u=0;for(let h=0;h<7;h++){const d=a[h],p=Math.ceil((r-d.x)/d.xStep),f=Math.ceil((n-d.y)/d.yStep);if(p<=0||f<=0)continue;const v=p*o,y=new Uint8Array(v);for(let b=0;b<f;b++){const w=e[u++],S=e.subarray(u,u+v);u+=v;const k=new Uint8Array(v);xB(w,S,k,y,v,o),y.set(k);for(let R=0;R<p;R++){const q=d.x+R*d.xStep,K=d.y+b*d.yStep;if(!(q>=r||K>=n))for(let E=0;E<o;E++)l[(K*r+q)*o+E]=k[R*o+E]}}}if(s===16){const h=new Uint16Array(l.buffer);if(wB)for(let d=0;d<h.length;d++)h[d]=bB(h[d]);return h}else return l}function bB(t){return(t&255)<<8|t>>8&255}const SB=new Uint16Array([255]),AB=new Uint8Array(SB.buffer),EB=AB[0]===255,NB=new Uint8Array(0);function G3(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,a=Math.ceil(s/8)*i,o=Math.ceil(s/8*i*r),l=new Uint8Array(n*o);let u=NB,h=0,d,p;for(let f=0;f<n;f++){switch(d=e.subarray(h+1,h+1+o),p=l.subarray(f*o,(f+1)*o),e[h]){case 0:mk(d,p,o);break;case 1:gk(d,p,o,a);break;case 2:xk(d,p,u,o);break;case 3:yk(d,p,u,o,a);break;case 4:vk(d,p,u,o,a);break;default:throw new Error(`Unsupported filter: ${e[h]}`)}u=p,h+=o+1}if(s===16){const f=new Uint16Array(l.buffer);if(EB)for(let v=0;v<f.length;v++)f[v]=TB(f[v]);return f}else return l}function TB(t){return(t&255)<<8|t>>8&255}const jm=Uint8Array.of(137,80,78,71,13,10,26,10);function Y3(t){if(!kB(t.readBytes(jm.length)))throw new Error("wrong PNG signature")}function kB(t){if(t.length<jm.length)return!1;for(let e=0;e<jm.length;e++)if(t[e]!==jm[e])return!1;return!0}const CB="tEXt",IB=0,wk=new TextDecoder("latin1");function LB(t){if(jB(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const PB=/^[\u0000-\u00FF]*$/;function jB(t){if(!PB.test(t))throw new Error("invalid latin1 text")}function RB(t,e,r){const n=_k(e);t[n]=FB(e,r-n.length-1)}function _k(t){for(t.mark();t.readByte()!==IB;);const e=t.offset;t.reset();const r=wk.decode(t.readBytes(e-t.offset-1));return t.skip(1),LB(r),r}function FB(t,e){return wk.decode(t.readBytes(e))}const ha={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},hx={UNKNOWN:-1,DEFLATE:0},X3={UNKNOWN:-1,ADAPTIVE:0},fx={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Gp={NONE:0,BACKGROUND:1,PREVIOUS:2},dx={SOURCE:0,OVER:1};class DB extends dw{constructor(r,n={}){super(r);hn(this,"_checkCrc");hn(this,"_inflator");hn(this,"_png");hn(this,"_apng");hn(this,"_end");hn(this,"_hasPalette");hn(this,"_palette");hn(this,"_hasTransparency");hn(this,"_transparency");hn(this,"_compressionMethod");hn(this,"_filterMethod");hn(this,"_interlaceMethod");hn(this,"_colorType");hn(this,"_isAnimated");hn(this,"_numberOfFrames");hn(this,"_numberOfPlays");hn(this,"_frames");hn(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new $3,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=hx.UNKNOWN,this._filterMethod=X3.UNKNOWN,this._interlaceMethod=fx.UNKNOWN,this._colorType=ha.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Y3(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(Y3(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case CB:RB(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?K3(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=i+r;break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?K3(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=MB(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case ha.GREYSCALE:i=1;break;case ha.TRUECOLOUR:i=3;break;case ha.INDEXED_COLOUR:i=1;break;case ha.GREYSCALE_ALPHA:i=2;break;case ha.TRUECOLOUR_ALPHA:i=4;break;case ha.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==hx.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<n;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case ha.GREYSCALE:case ha.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case ha.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ha.UNKNOWN:case ha.GREYSCALE_ALPHA:case ha.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=_k(this),i=this.readUint8();if(i!==hx.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:dB(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:r,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(r);if(i){if(i.data=G3({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(i,s,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,i){switch(r.disposeOp){case Gp.NONE:break;case Gp.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let a=0;a<this._png.width;a++){const o=(s*r.width+a)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[o+l]=0}break;case Gp.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const i=1<<this._png.depth,s=(a,o)=>{const l=((a+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,u=(a*n.width+o)*this._png.channels;return{index:l,frameIndex:u}};switch(n.blendOp){case dx.SOURCE:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:u}=s(a,o);for(let h=0;h<this._png.channels;h++)r.data[l+h]=n.data[u+h]}break;case dx.OVER:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:u}=s(a,o);for(let h=0;h<this._png.channels;h++){const d=n.data[u+this._png.channels-1]/i,p=h%(this._png.channels-1)===0?1:n.data[u+h],f=Math.floor(d*p+(1-d)*r.data[l+h]);r.data[l+h]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==X3.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===fx.NO_INTERLACE)this._png.data=G3({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===fx.ADAM7)this._png.data=_B({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Gp.NONE,blendOp:dx.SOURCE,data:r}),this._inflator=new $3,this._writingDataChunks=!1}}function MB(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var Q3;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(Q3||(Q3={}));function OB(t,e){return new DB(t,e).decode()}var dr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function px(){dr.console&&typeof dr.console.log=="function"&&dr.console.log.apply(dr.console,arguments)}var En={log:px,warn:function(t){dr.console&&(typeof dr.console.warn=="function"?dr.console.warn.apply(dr.console,arguments):px.call(null,arguments))},error:function(t){dr.console&&(typeof dr.console.error=="function"?dr.console.error.apply(dr.console,arguments):px(t))}};function mx(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){tu(n.response,e,r)},n.onerror=function(){En.error("could not download file")},n.send()}function Z3(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Yp(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var tu=dr.saveAs||((typeof window>"u"?"undefined":pn(window))!=="object"||window!==dr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=dr.URL||dr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Z3(i.href)?mx(t,e,r):Yp(i,i.target="_blank"):Yp(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Yp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(Z3(t))mx(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Yp(n)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:pn(s)!=="object"&&(En.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return mx(t,e,r);var i=t.type==="application/octet-stream",s=/constructor/i.test(dr.HTMLElement)||dr.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":pn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var h=o.result;h=a?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=h:location=h,n=null},o.readAsDataURL(t)}else{var l=dr.URL||dr.webkitURL,u=l.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function bk(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,s=r[n].process,a=i.exec(t);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}var Rm=dr.atob.bind(dr),J3=dr.btoa.bind(dr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function gx(t,e){var r=t[0],n=t[1],i=t[2],s=t[3];r=ys(r,n,i,s,e[0],7,-680876936),s=ys(s,r,n,i,e[1],12,-389564586),i=ys(i,s,r,n,e[2],17,606105819),n=ys(n,i,s,r,e[3],22,-1044525330),r=ys(r,n,i,s,e[4],7,-176418897),s=ys(s,r,n,i,e[5],12,1200080426),i=ys(i,s,r,n,e[6],17,-1473231341),n=ys(n,i,s,r,e[7],22,-45705983),r=ys(r,n,i,s,e[8],7,1770035416),s=ys(s,r,n,i,e[9],12,-1958414417),i=ys(i,s,r,n,e[10],17,-42063),n=ys(n,i,s,r,e[11],22,-1990404162),r=ys(r,n,i,s,e[12],7,1804603682),s=ys(s,r,n,i,e[13],12,-40341101),i=ys(i,s,r,n,e[14],17,-1502002290),r=vs(r,n=ys(n,i,s,r,e[15],22,1236535329),i,s,e[1],5,-165796510),s=vs(s,r,n,i,e[6],9,-1069501632),i=vs(i,s,r,n,e[11],14,643717713),n=vs(n,i,s,r,e[0],20,-373897302),r=vs(r,n,i,s,e[5],5,-701558691),s=vs(s,r,n,i,e[10],9,38016083),i=vs(i,s,r,n,e[15],14,-660478335),n=vs(n,i,s,r,e[4],20,-405537848),r=vs(r,n,i,s,e[9],5,568446438),s=vs(s,r,n,i,e[14],9,-1019803690),i=vs(i,s,r,n,e[3],14,-187363961),n=vs(n,i,s,r,e[8],20,1163531501),r=vs(r,n,i,s,e[13],5,-1444681467),s=vs(s,r,n,i,e[2],9,-51403784),i=vs(i,s,r,n,e[7],14,1735328473),r=ws(r,n=vs(n,i,s,r,e[12],20,-1926607734),i,s,e[5],4,-378558),s=ws(s,r,n,i,e[8],11,-2022574463),i=ws(i,s,r,n,e[11],16,1839030562),n=ws(n,i,s,r,e[14],23,-35309556),r=ws(r,n,i,s,e[1],4,-1530992060),s=ws(s,r,n,i,e[4],11,1272893353),i=ws(i,s,r,n,e[7],16,-155497632),n=ws(n,i,s,r,e[10],23,-1094730640),r=ws(r,n,i,s,e[13],4,681279174),s=ws(s,r,n,i,e[0],11,-358537222),i=ws(i,s,r,n,e[3],16,-722521979),n=ws(n,i,s,r,e[6],23,76029189),r=ws(r,n,i,s,e[9],4,-640364487),s=ws(s,r,n,i,e[12],11,-421815835),i=ws(i,s,r,n,e[15],16,530742520),r=_s(r,n=ws(n,i,s,r,e[2],23,-995338651),i,s,e[0],6,-198630844),s=_s(s,r,n,i,e[7],10,1126891415),i=_s(i,s,r,n,e[14],15,-1416354905),n=_s(n,i,s,r,e[5],21,-57434055),r=_s(r,n,i,s,e[12],6,1700485571),s=_s(s,r,n,i,e[3],10,-1894986606),i=_s(i,s,r,n,e[10],15,-1051523),n=_s(n,i,s,r,e[1],21,-2054922799),r=_s(r,n,i,s,e[8],6,1873313359),s=_s(s,r,n,i,e[15],10,-30611744),i=_s(i,s,r,n,e[6],15,-1560198380),n=_s(n,i,s,r,e[13],21,1309151649),r=_s(r,n,i,s,e[4],6,-145523070),s=_s(s,r,n,i,e[11],10,-1120210379),i=_s(i,s,r,n,e[2],15,718787259),n=_s(n,i,s,r,e[9],21,-343485551),t[0]=uc(r,t[0]),t[1]=uc(n,t[1]),t[2]=uc(i,t[2]),t[3]=uc(s,t[3])}function Vg(t,e,r,n,i,s){return e=uc(uc(e,t),uc(n,s)),uc(e<<i|e>>>32-i,r)}function ys(t,e,r,n,i,s,a){return Vg(e&r|~e&n,t,e,i,s,a)}function vs(t,e,r,n,i,s,a){return Vg(e&n|r&~n,t,e,i,s,a)}function ws(t,e,r,n,i,s,a){return Vg(e^r^n,t,e,i,s,a)}function _s(t,e,r,n,i,s,a){return Vg(r^(e|~n),t,e,i,s,a)}function Sk(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)gx(n,BB(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(gx(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,gx(n,i),n}function BB(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var eS="0123456789abcdef".split("");function UB(t){for(var e="",r=0;r<4;r++)e+=eS[t>>8*r+4&15]+eS[t>>8*r&15];return e}function VB(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function uv(t){return Sk(t).map(VB).join("")}var zB=function(t){for(var e=0;e<t.length;e++)t[e]=UB(t[e]);return t.join("")}(Sk("hello"))!="5d41402abc4b2a76b9719d911017c592";function uc(t,e){if(zB){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function hv(t,e){var r,n,i,s;if(t!==r){for(var a=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var h=o[l];u=(u+h+a.charCodeAt(l))%256,o[l]=o[u],o[u]=h}r=t,n=o}else o=n;var d=e.length,p=0,f=0,v="";for(l=0;l<d;l++)f=(f+(h=o[p=(p+1)%256]))%256,o[p]=o[f],o[f]=h,a=o[(o[p]+o[f])%256],v+=String.fromCharCode(e.charCodeAt(l)^a);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var tS={print:4,modify:8,copy:16,"annot-forms":32};function ih(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(tS.perm!==void 0)throw new Error("Invalid permission: "+o);i+=tS[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=uv(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=hv(this.encryptionKey,this.padding)}function sh(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[n]}return e}function rS(t){if(pn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!i],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[r]){var a=e[r][s];try{a[0].apply(t,n)}catch(o){dr.console&&En.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function R1(t){if(!(this instanceof R1))return new R1(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Ak(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function ru(t,e,r,n,i){if(!(this instanceof ru))return new ru(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,Ak.call(this,n,i)}function Nh(t,e,r,n,i){if(!(this instanceof Nh))return new Nh(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Ak.call(this,n,i)}function ir(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,u="S",h=null;pn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,s=t.compress||t.compressPdf||s,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,p={},f={internal:{},__private__:{}};f.__private__.PubSub=rS;var v="1.3",y=f.__private__.getPdfVersion=function(){return v};f.__private__.setPdfVersion=function(_){v=_};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return b};var w=f.__private__.getPageFormat=function(_){return b[_]};i=i||"a4";var S="compat",k="advanced",R=S;function q(){this.saveGraphicsState(),te(new Zt(Rt,0,0,-Rt,0,ar()*Rt).toString()+" cm"),this.setFontSize(this.getFontSize()/Rt),u="n",R=k}function K(){this.restoreGraphicsState(),u="S",R=S}var E=f.__private__.combineFontStyleAndFontWeight=function(_,U){if(_=="bold"&&U=="normal"||_=="bold"&&U==400||_=="normal"&&U=="italic"||_=="bold"&&U=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return U&&(_=U==400||U==="normal"?_==="italic"?"italic":"normal":U!=700&&U!=="bold"||_!=="normal"?(U==700?"bold":U)+""+_:"bold"),_};f.advancedAPI=function(_){var U=R===S;return U&&q.call(this),typeof _!="function"||(_(this),U&&K.call(this)),this},f.compatAPI=function(_){var U=R===k;return U&&K.call(this),typeof _!="function"||(_(this),U&&q.call(this)),this},f.isAdvancedAPI=function(){return R===k};var C,A=function(_){if(R!==k)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},D=f.roundToPrecision=f.__private__.roundToPrecision=function(_,U){var ae=e||U;if(isNaN(_)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(ae).replace(/0+$/,"")};C=f.hpf=f.__private__.hpf=typeof l=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return D(_,l)}:l==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return D(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return D(_,16)};var N=f.f2=f.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return D(_,2)},j=f.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return D(_,3)},P=f.scale=f.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return R===S?_*Rt:R===k?_:void 0},se=function(_){return P(function(U){return R===S?ar()-U:R===k?U:void 0}(_))};f.__private__.setPrecision=f.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var ge,ve="00000000000000000000000000000000",ye=f.__private__.getFileId=function(){return ve},he=f.__private__.setFileId=function(_){return ve=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():ve.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(_n=new ih(h.userPermissions,h.userPassword,h.ownerPassword,ve)),ve};f.setFileId=function(_){return he(_),this},f.getFileId=function(){return ye()};var _e=f.__private__.convertDateToPDFDate=function(_){var U=_.getTimezoneOffset(),ae=U<0?"+":"-",xe=Math.floor(Math.abs(U/60)),Pe=Math.abs(U%60),Ee=[ae,B(xe),"'",B(Pe),"'"].join("");return["D:",_.getFullYear(),B(_.getMonth()+1),B(_.getDate()),B(_.getHours()),B(_.getMinutes()),B(_.getSeconds()),Ee].join("")},Ue=f.__private__.convertPDFDateToDate=function(_){var U=parseInt(_.substr(2,4),10),ae=parseInt(_.substr(6,2),10)-1,xe=parseInt(_.substr(8,2),10),Pe=parseInt(_.substr(10,2),10),Ee=parseInt(_.substr(12,2),10),$e=parseInt(_.substr(14,2),10);return new Date(U,ae,xe,Pe,Ee,$e,0)},Ie=f.__private__.setCreationDate=function(_){var U;if(_===void 0&&(_=new Date),_ instanceof Date)U=_e(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");U=_}return ge=U},L=f.__private__.getCreationDate=function(_){var U=ge;return _==="jsDate"&&(U=Ue(ge)),U};f.setCreationDate=function(_){return Ie(_),this},f.getCreationDate=function(_){return L(_)};var O,B=f.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},z=f.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},J=0,fe=[],Se=[],Ae=0,Ne=[],Xe=[],et=!1,ot=Se;f.__private__.setCustomOutputDestination=function(_){et=!0,ot=_};var mt=function(_){et||(ot=_)};f.__private__.resetCustomOutputDestination=function(){et=!1,ot=Se};var te=f.__private__.out=function(_){return _=_.toString(),Ae+=_.length+1,ot.push(_),ot},ke=f.__private__.write=function(_){return te(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},X=f.__private__.getArrayBuffer=function(_){for(var U=_.length,ae=new ArrayBuffer(U),xe=new Uint8Array(ae);U--;)xe[U]=_.charCodeAt(U);return ae},me=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return me};var de=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(_){return de=R===k?_/Rt:_,this};var qe,Ge=f.__private__.getFontSize=f.getFontSize=function(){return R===S?de:de*Rt},st=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(_){return st=_,this},f.__private__.getR2L=f.getR2L=function(){return st};var yt,Ht=f.__private__.setZoomMode=function(_){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))qe=_;else if(isNaN(_)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');qe=_}else qe=parseInt(_,10)};f.__private__.getZoomMode=function(){return qe};var be,tt=f.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');yt=_};f.__private__.getPageMode=function(){return yt};var ct=f.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');be=_};f.__private__.getLayoutMode=function(){return be},f.__private__.setDisplayMode=f.setDisplayMode=function(_,U,ae){return Ht(_),ct(U),tt(ae),this};var St={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(_){if(Object.keys(St).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return St[_]},f.__private__.getDocumentProperties=function(){return St},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(_){for(var U in St)St.hasOwnProperty(U)&&_[U]&&(St[U]=_[U]);return this},f.__private__.setDocumentProperty=function(_,U){if(Object.keys(St).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return St[_]=U};var jt,Rt,Dt,Hr,hr,Ke={},Pt={},pr=[],Gt={},Ir={},Qt={},Jt={},Ur=null,Wt=0,Ye=[],Tt=new rS(f),sn=t.hotfixes||[],br={},xr={},jn=[],Zt=function _(U,ae,xe,Pe,Ee,$e){if(!(this instanceof _))return new _(U,ae,xe,Pe,Ee,$e);isNaN(U)&&(U=1),isNaN(ae)&&(ae=0),isNaN(xe)&&(xe=0),isNaN(Pe)&&(Pe=1),isNaN(Ee)&&(Ee=0),isNaN($e)&&($e=0),this._matrix=[U,ae,xe,Pe,Ee,$e]};Object.defineProperty(Zt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Zt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Zt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Zt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Zt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Zt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Zt.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Zt.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Zt.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Zt.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Zt.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Zt.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Zt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Zt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Zt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Zt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Zt.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(_)},Zt.prototype.multiply=function(_){var U=_.sx*this.sx+_.shy*this.shx,ae=_.sx*this.shy+_.shy*this.sy,xe=_.shx*this.sx+_.sy*this.shx,Pe=_.shx*this.shy+_.sy*this.sy,Ee=_.tx*this.sx+_.ty*this.shx+this.tx,$e=_.tx*this.shy+_.ty*this.sy+this.ty;return new Zt(U,ae,xe,Pe,Ee,$e)},Zt.prototype.decompose=function(){var _=this.sx,U=this.shy,ae=this.shx,xe=this.sy,Pe=this.tx,Ee=this.ty,$e=Math.sqrt(_*_+U*U),Ft=(_/=$e)*ae+(U/=$e)*xe;ae-=_*Ft,xe-=U*Ft;var Bt=Math.sqrt(ae*ae+xe*xe);return Ft/=Bt,_*(xe/=Bt)<U*(ae/=Bt)&&(_=-_,U=-U,Ft=-Ft,$e=-$e),{scale:new Zt($e,0,0,Bt,0,0),translate:new Zt(1,0,0,1,Pe,Ee),rotate:new Zt(_,U,-U,_,0,0),skew:new Zt(1,0,Ft,1,0,0)}},Zt.prototype.toString=function(_){return this.join(" ")},Zt.prototype.inversed=function(){var _=this.sx,U=this.shy,ae=this.shx,xe=this.sy,Pe=this.tx,Ee=this.ty,$e=1/(_*xe-U*ae),Ft=xe*$e,Bt=-U*$e,_t=-ae*$e,qt=_*$e;return new Zt(Ft,Bt,_t,qt,-Ft*Pe-_t*Ee,-Bt*Pe-qt*Ee)},Zt.prototype.applyToPoint=function(_){var U=_.x*this.sx+_.y*this.shx+this.tx,ae=_.x*this.shy+_.y*this.sy+this.ty;return new wt(U,ae)},Zt.prototype.applyToRectangle=function(_){var U=this.applyToPoint(_),ae=this.applyToPoint(new wt(_.x+_.w,_.y+_.h));return new Pr(U.x,U.y,ae.x-U.x,ae.y-U.y)},Zt.prototype.clone=function(){var _=this.sx,U=this.shy,ae=this.shx,xe=this.sy,Pe=this.tx,Ee=this.ty;return new Zt(_,U,ae,xe,Pe,Ee)},f.Matrix=Zt;var zn=f.matrixMult=function(_,U){return U.multiply(_)},en=new Zt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=en;var an=function(_,U){if(!Ir[_]){var ae=(U instanceof ru?"Sh":"P")+(Object.keys(Gt).length+1).toString(10);U.id=ae,Ir[_]=ae,Gt[ae]=U,Tt.publish("addPattern",U)}};f.ShadingPattern=ru,f.TilingPattern=Nh,f.addShadingPattern=function(_,U){return A("addShadingPattern()"),an(_,U),this},f.beginTilingPattern=function(_){A("beginTilingPattern()"),jr(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},f.endTilingPattern=function(_,U){A("endTilingPattern()"),U.stream=Xe[O].join(`
`),an(_,U),Tt.publish("endTilingPattern",U),jn.pop().restore()};var Nn,Fr=f.__private__.newObject=function(){var _=Qr();return W(_,!0),_},Qr=f.__private__.newObjectDeferred=function(){return J++,fe[J]=function(){return Ae},J},W=function(_,U){return U=typeof U=="boolean"&&U,fe[_]=Ae,U&&te(_+" 0 obj"),_},ie=f.__private__.newAdditionalObject=function(){var _={objId:Qr(),content:""};return Ne.push(_),_},ee=Qr(),ne=Qr(),oe=f.__private__.decodeColorString=function(_){var U=_.split(" ");if(U.length!==2||U[1]!=="g"&&U[1]!=="G")U.length!==5||U[4]!=="k"&&U[4]!=="K"||(U=[(1-U[0])*(1-U[3]),(1-U[1])*(1-U[3]),(1-U[2])*(1-U[3]),"r"]);else{var ae=parseFloat(U[0]);U=[ae,ae,ae,"r"]}for(var xe="#",Pe=0;Pe<3;Pe++)xe+=("0"+Math.floor(255*parseFloat(U[Pe])).toString(16)).slice(-2);return xe},le=f.__private__.encodeColorString=function(_){var U;typeof _=="string"&&(_={ch1:_});var ae=_.ch1,xe=_.ch2,Pe=_.ch3,Ee=_.ch4,$e=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var Ft=new bk(ae);if(Ft.ok)ae=Ft.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var Bt=parseInt(ae.substr(1),16);ae=Bt>>16&255,xe=Bt>>8&255,Pe=255&Bt}if(xe===void 0||Ee===void 0&&ae===xe&&xe===Pe)U=typeof ae=="string"?ae+" "+$e[0]:_.precision===2?N(ae/255)+" "+$e[0]:j(ae/255)+" "+$e[0];else if(Ee===void 0||pn(Ee)==="object"){if(Ee&&!isNaN(Ee.a)&&Ee.a===0)return["1.","1.","1.",$e[1]].join(" ");U=typeof ae=="string"?[ae,xe,Pe,$e[1]].join(" "):_.precision===2?[N(ae/255),N(xe/255),N(Pe/255),$e[1]].join(" "):[j(ae/255),j(xe/255),j(Pe/255),$e[1]].join(" ")}else U=typeof ae=="string"?[ae,xe,Pe,Ee,$e[2]].join(" "):_.precision===2?[N(ae),N(xe),N(Pe),N(Ee),$e[2]].join(" "):[j(ae),j(xe),j(Pe),j(Ee),$e[2]].join(" ");return U},De=f.__private__.getFilters=function(){return a},Te=f.__private__.putStream=function(_){var U=(_=_||{}).data||"",ae=_.filters||De(),xe=_.alreadyAppliedFilters||[],Pe=_.addLength1||!1,Ee=U.length,$e=_.objectId,Ft=function(I){return I};if(h!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Ft=_n.encryptor($e,0));var Bt={};ae===!0&&(ae=["FlateEncode"]);var _t=_.additionalKeyValues||[],qt=(Bt=ir.API.processDataByFilters!==void 0?ir.API.processDataByFilters(U,ae):{data:U,reverseChain:[]}).reverseChain+(Array.isArray(xe)?xe.join(" "):xe.toString());if(Bt.data.length!==0&&(_t.push({key:"Length",value:Bt.data.length}),Pe===!0&&_t.push({key:"Length1",value:Ee})),qt.length!=0)if(qt.split("/").length-1==1)_t.push({key:"Filter",value:qt});else{_t.push({key:"Filter",value:"["+qt+"]"});for(var kr=0;kr<_t.length;kr+=1)if(_t[kr].key==="DecodeParms"){for(var rn=[],ln=0;ln<Bt.reverseChain.split("/").length-1;ln+=1)rn.push("null");rn.push(_t[kr].value),_t[kr].value="["+rn.join(" ")+"]"}}te("<<");for(var g=0;g<_t.length;g++)te("/"+_t[g].key+" "+_t[g].value);te(">>"),Bt.data.length!==0&&(te("stream"),te(Ft(Bt.data)),te("endstream"))},Re=f.__private__.putPage=function(_){var U=_.number,ae=_.data,xe=_.objId,Pe=_.contentsObjId;W(xe,!0),te("<</Type /Page"),te("/Parent "+_.rootDictionaryObjId+" 0 R"),te("/Resources "+_.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(C(_.mediaBox.bottomLeftX))+" "+parseFloat(C(_.mediaBox.bottomLeftY))+" "+C(_.mediaBox.topRightX)+" "+C(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&te("/CropBox ["+C(_.cropBox.bottomLeftX)+" "+C(_.cropBox.bottomLeftY)+" "+C(_.cropBox.topRightX)+" "+C(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&te("/BleedBox ["+C(_.bleedBox.bottomLeftX)+" "+C(_.bleedBox.bottomLeftY)+" "+C(_.bleedBox.topRightX)+" "+C(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&te("/TrimBox ["+C(_.trimBox.bottomLeftX)+" "+C(_.trimBox.bottomLeftY)+" "+C(_.trimBox.topRightX)+" "+C(_.trimBox.topRightY)+"]"),_.artBox!==null&&te("/ArtBox ["+C(_.artBox.bottomLeftX)+" "+C(_.artBox.bottomLeftY)+" "+C(_.artBox.topRightX)+" "+C(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&te("/UserUnit "+_.userUnit),Tt.publish("putPage",{objId:xe,pageContext:Ye[U],pageNumber:U,page:ae}),te("/Contents "+Pe+" 0 R"),te(">>"),te("endobj");var Ee=ae.join(`
`);return R===k&&(Ee+=`
Q`),W(Pe,!0),Te({data:Ee,filters:De(),objectId:Pe}),te("endobj"),xe},Me=f.__private__.putPages=function(){var _,U,ae=[];for(_=1;_<=Wt;_++)Ye[_].objId=Qr(),Ye[_].contentsObjId=Qr();for(_=1;_<=Wt;_++)ae.push(Re({number:_,data:Xe[_],objId:Ye[_].objId,contentsObjId:Ye[_].contentsObjId,mediaBox:Ye[_].mediaBox,cropBox:Ye[_].cropBox,bleedBox:Ye[_].bleedBox,trimBox:Ye[_].trimBox,artBox:Ye[_].artBox,userUnit:Ye[_].userUnit,rootDictionaryObjId:ee,resourceDictionaryObjId:ne}));W(ee,!0),te("<</Type /Pages");var xe="/Kids [";for(U=0;U<Wt;U++)xe+=ae[U]+" 0 R ";te(xe+"]"),te("/Count "+Wt),te(">>"),te("endobj"),Tt.publish("postPutPages")},Oe=function(_){Tt.publish("putFont",{font:_,out:te,newObject:Fr,putStream:Te}),_.isAlreadyPutted!==!0&&(_.objectNumber=Fr(),te("<<"),te("/Type /Font"),te("/BaseFont /"+sh(_.postScriptName)),te("/Subtype /Type1"),typeof _.encoding=="string"&&te("/Encoding /"+_.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},ht=function(_){_.objectNumber=Fr();var U=[];U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Form"}),U.push({key:"BBox",value:"["+[C(_.x),C(_.y),C(_.x+_.width),C(_.y+_.height)].join(" ")+"]"}),U.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var ae=_.pages[1].join(`
`);Te({data:ae,additionalKeyValues:U,objectId:_.objectNumber}),te("endobj")},gt=function(_,U){U||(U=21);var ae=Fr(),xe=function($e,Ft){var Bt,_t=[],qt=1/(Ft-1);for(Bt=0;Bt<1;Bt+=qt)_t.push(Bt);if(_t.push(1),$e[0].offset!=0){var kr={offset:0,color:$e[0].color};$e.unshift(kr)}if($e[$e.length-1].offset!=1){var rn={offset:1,color:$e[$e.length-1].color};$e.push(rn)}for(var ln="",g=0,I=0;I<_t.length;I++){for(Bt=_t[I];Bt>$e[g+1].offset;)g++;var M=$e[g].offset,Z=(Bt-M)/($e[g+1].offset-M),Fe=$e[g].color,We=$e[g+1].color;ln+=z(Math.round((1-Z)*Fe[0]+Z*We[0]).toString(16))+z(Math.round((1-Z)*Fe[1]+Z*We[1]).toString(16))+z(Math.round((1-Z)*Fe[2]+Z*We[2]).toString(16))}return ln.trim()}(_.colors,U),Pe=[];Pe.push({key:"FunctionType",value:"0"}),Pe.push({key:"Domain",value:"[0.0 1.0]"}),Pe.push({key:"Size",value:"["+U+"]"}),Pe.push({key:"BitsPerSample",value:"8"}),Pe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Te({data:xe,additionalKeyValues:Pe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),te("endobj"),_.objectNumber=Fr(),te("<< /ShadingType "+_.type),te("/ColorSpace /DeviceRGB");var Ee="/Coords ["+C(parseFloat(_.coords[0]))+" "+C(parseFloat(_.coords[1]))+" ";_.type===2?Ee+=C(parseFloat(_.coords[2]))+" "+C(parseFloat(_.coords[3])):Ee+=C(parseFloat(_.coords[2]))+" "+C(parseFloat(_.coords[3]))+" "+C(parseFloat(_.coords[4]))+" "+C(parseFloat(_.coords[5])),te(Ee+="]"),_.matrix&&te("/Matrix ["+_.matrix.toString()+"]"),te("/Function "+ae+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},kt=function(_,U){var ae=Qr(),xe=Fr();U.push({resourcesOid:ae,objectOid:xe}),_.objectNumber=xe;var Pe=[];Pe.push({key:"Type",value:"/Pattern"}),Pe.push({key:"PatternType",value:"1"}),Pe.push({key:"PaintType",value:"1"}),Pe.push({key:"TilingType",value:"1"}),Pe.push({key:"BBox",value:"["+_.boundingBox.map(C).join(" ")+"]"}),Pe.push({key:"XStep",value:C(_.xStep)}),Pe.push({key:"YStep",value:C(_.yStep)}),Pe.push({key:"Resources",value:ae+" 0 R"}),_.matrix&&Pe.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),Te({data:_.stream,additionalKeyValues:Pe,objectId:_.objectNumber}),te("endobj")},pt=function(_){for(var U in _.objectNumber=Fr(),te("<<"),_)switch(U){case"opacity":te("/ca "+N(_[U]));break;case"stroke-opacity":te("/CA "+N(_[U]))}te(">>"),te("endobj")},Et=function(_){W(_.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var U in te("/Font <<"),Ke)Ke.hasOwnProperty(U)&&(d===!1||d===!0&&p.hasOwnProperty(U))&&te("/"+U+" "+Ke[U].objectNumber+" 0 R");te(">>")}(),function(){if(Object.keys(Gt).length>0){for(var U in te("/Shading <<"),Gt)Gt.hasOwnProperty(U)&&Gt[U]instanceof ru&&Gt[U].objectNumber>=0&&te("/"+U+" "+Gt[U].objectNumber+" 0 R");Tt.publish("putShadingPatternDict"),te(">>")}}(),function(U){if(Object.keys(Gt).length>0){for(var ae in te("/Pattern <<"),Gt)Gt.hasOwnProperty(ae)&&Gt[ae]instanceof f.TilingPattern&&Gt[ae].objectNumber>=0&&Gt[ae].objectNumber<U&&te("/"+ae+" "+Gt[ae].objectNumber+" 0 R");Tt.publish("putTilingPatternDict"),te(">>")}}(_.objectOid),function(){if(Object.keys(Qt).length>0){var U;for(U in te("/ExtGState <<"),Qt)Qt.hasOwnProperty(U)&&Qt[U].objectNumber>=0&&te("/"+U+" "+Qt[U].objectNumber+" 0 R");Tt.publish("putGStateDict"),te(">>")}}(),function(){for(var U in te("/XObject <<"),br)br.hasOwnProperty(U)&&br[U].objectNumber>=0&&te("/"+U+" "+br[U].objectNumber+" 0 R");Tt.publish("putXobjectDict"),te(">>")}(),te(">>"),te("endobj")},tr=function(_){Pt[_.fontName]=Pt[_.fontName]||{},Pt[_.fontName][_.fontStyle]=_.id},Nr=function(_,U,ae,xe,Pe){var Ee={id:"F"+(Object.keys(Ke).length+1).toString(10),postScriptName:_,fontName:U,fontStyle:ae,encoding:xe,isStandardFont:Pe||!1,metadata:{}};return Tt.publish("addFont",{font:Ee,instance:this}),Ke[Ee.id]=Ee,tr(Ee),Ee.id},yr=f.__private__.pdfEscape=f.pdfEscape=function(_,U){return function(ae,xe){var Pe,Ee,$e,Ft,Bt,_t,qt,kr,rn;if($e=(xe=xe||{}).sourceEncoding||"Unicode",Bt=xe.outputEncoding,(xe.autoencode||Bt)&&Ke[jt].metadata&&Ke[jt].metadata[$e]&&Ke[jt].metadata[$e].encoding&&(Ft=Ke[jt].metadata[$e].encoding,!Bt&&Ke[jt].encoding&&(Bt=Ke[jt].encoding),!Bt&&Ft.codePages&&(Bt=Ft.codePages[0]),typeof Bt=="string"&&(Bt=Ft[Bt]),Bt)){for(qt=!1,_t=[],Pe=0,Ee=ae.length;Pe<Ee;Pe++)(kr=Bt[ae.charCodeAt(Pe)])?_t.push(String.fromCharCode(kr)):_t.push(ae[Pe]),_t[Pe].charCodeAt(0)>>8&&(qt=!0);ae=_t.join("")}for(Pe=ae.length;qt===void 0&&Pe!==0;)ae.charCodeAt(Pe-1)>>8&&(qt=!0),Pe--;if(!qt)return ae;for(_t=xe.noBOM?[]:[254,255],Pe=0,Ee=ae.length;Pe<Ee;Pe++){if((rn=(kr=ae.charCodeAt(Pe))>>8)>>8)throw new Error("Character at position "+Pe+" of string '"+ae+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");_t.push(rn),_t.push(kr-(rn<<8))}return String.fromCharCode.apply(void 0,_t)}(_,U).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},tn=f.__private__.beginPage=function(_){Xe[++Wt]=[],Ye[Wt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},ci(Wt),mt(Xe[O])},Hn=function(_,U){var ae,xe,Pe;switch(r=U||r,typeof _=="string"&&(ae=w(_.toLowerCase()),Array.isArray(ae)&&(xe=ae[0],Pe=ae[1])),Array.isArray(_)&&(xe=_[0]*Rt,Pe=_[1]*Rt),isNaN(xe)&&(xe=i[0],Pe=i[1]),(xe>14400||Pe>14400)&&(En.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),xe=Math.min(14400,xe),Pe=Math.min(14400,Pe)),i=[xe,Pe],r.substr(0,1)){case"l":Pe>xe&&(i=[Pe,xe]);break;case"p":xe>Pe&&(i=[Pe,xe])}tn(i),cr(Ki),te(it),Ot!==0&&te(Ot+" J"),ut!==0&&te(ut+" j"),Tt.publish("addPage",{pageNumber:Wt})},li=function(_){_>0&&_<=Wt&&(Xe.splice(_,1),Ye.splice(_,1),Wt--,O>Wt&&(O=Wt),this.setPage(O))},ci=function(_){_>0&&_<=Wt&&(O=_)},Xn=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Xe.length-1},on=function(_,U,ae){var xe,Pe=void 0;return ae=ae||{},_=_!==void 0?_:Ke[jt].fontName,U=U!==void 0?U:Ke[jt].fontStyle,xe=_.toLowerCase(),Pt[xe]!==void 0&&Pt[xe][U]!==void 0?Pe=Pt[xe][U]:Pt[_]!==void 0&&Pt[_][U]!==void 0?Pe=Pt[_][U]:ae.disableWarning===!1&&En.warn("Unable to look up font label for font '"+_+"', '"+U+"'. Refer to getFontList() for available fonts."),Pe||ae.noFallback||(Pe=Pt.times[U])==null&&(Pe=Pt.times.normal),Pe},Tn=f.__private__.putInfo=function(){var _=Fr(),U=function(xe){return xe};for(var ae in h!==null&&(U=_n.encryptor(_,0)),te("<<"),te("/Producer ("+yr(U("jsPDF "+ir.version))+")"),St)St.hasOwnProperty(ae)&&St[ae]&&te("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+yr(U(St[ae]))+")");te("/CreationDate ("+yr(U(ge))+")"),te(">>"),te("endobj")},Gr=f.__private__.putCatalog=function(_){var U=(_=_||{}).rootDictionaryObjId||ee;switch(Fr(),te("<<"),te("/Type /Catalog"),te("/Pages "+U+" 0 R"),qe||(qe="fullwidth"),qe){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+qe;ae.substr(ae.length-1)==="%"&&(qe=parseInt(qe)/100),typeof qe=="number"&&te("/OpenAction [3 0 R /XYZ null null "+N(qe)+"]")}switch(be||(be="continuous"),be){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}yt&&te("/PageMode /"+yt),Tt.publish("putCatalog"),te(">>"),te("endobj")},Lr=f.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(J+1)),te("/Root "+J+" 0 R"),te("/Info "+(J-1)+" 0 R"),h!==null&&te("/Encrypt "+_n.oid+" 0 R"),te("/ID [ <"+ve+"> <"+ve+"> ]"),te(">>")},_r=f.__private__.putHeader=function(){te("%PDF-"+v),te("%")},qn=f.__private__.putXRef=function(){var _="0000000000";te("xref"),te("0 "+(J+1)),te("0000000000 65535 f ");for(var U=1;U<=J;U++)typeof fe[U]=="function"?te((_+fe[U]()).slice(-10)+" 00000 n "):fe[U]!==void 0?te((_+fe[U]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},yn=f.__private__.buildDocument=function(){var _;J=0,Ae=0,Se=[],fe=[],Ne=[],ee=Qr(),ne=Qr(),mt(Se),Tt.publish("buildDocument"),_r(),Me(),function(){Tt.publish("putAdditionalObjects");for(var ae=0;ae<Ne.length;ae++){var xe=Ne[ae];W(xe.objId,!0),te(xe.content),te("endobj")}Tt.publish("postPutAdditionalObjects")}(),_=[],function(){for(var ae in Ke)Ke.hasOwnProperty(ae)&&(d===!1||d===!0&&p.hasOwnProperty(ae))&&Oe(Ke[ae])}(),function(){var ae;for(ae in Qt)Qt.hasOwnProperty(ae)&&pt(Qt[ae])}(),function(){for(var ae in br)br.hasOwnProperty(ae)&&ht(br[ae])}(),function(ae){var xe;for(xe in Gt)Gt.hasOwnProperty(xe)&&(Gt[xe]instanceof ru?gt(Gt[xe]):Gt[xe]instanceof Nh&&kt(Gt[xe],ae))}(_),Tt.publish("putResources"),_.forEach(Et),Et({resourcesOid:ne,objectOid:Number.MAX_SAFE_INTEGER}),Tt.publish("postPutResources"),h!==null&&(_n.oid=Fr(),te("<<"),te("/Filter /Standard"),te("/V "+_n.v),te("/R "+_n.r),te("/U <"+_n.toHexString(_n.U)+">"),te("/O <"+_n.toHexString(_n.O)+">"),te("/P "+_n.P),te(">>"),te("endobj")),Tn(),Gr();var U=Ae;return qn(),Lr(),te("startxref"),te(""+U),te("%%EOF"),mt(Xe[O]),Se.join(`
`)},Dr=f.__private__.getBlob=function(_){return new Blob([X(_)],{type:"application/pdf"})},Ia=f.output=f.__private__.output=(Nn=function(_,U){switch(typeof(U=U||{})=="string"?U={filename:U}:U.filename=U.filename||"generated.pdf",_){case void 0:return yn();case"save":f.save(U.filename);break;case"arraybuffer":return X(yn());case"blob":return Dr(yn());case"bloburi":case"bloburl":if(dr.URL!==void 0&&typeof dr.URL.createObjectURL=="function")return dr.URL&&dr.URL.createObjectURL(Dr(yn()))||void 0;En.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",xe=yn();try{ae=J3(xe)}catch{ae=J3(unescape(encodeURIComponent(xe)))}return"data:application/pdf;filename="+U.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(dr)==="[object Window]"){var Pe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ee=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';U.pdfObjectUrl&&(Pe=U.pdfObjectUrl,Ee="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Pe+'"'+Ee+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(U)+");<\/script></body></html>",Ft=dr.open();return Ft!==null&&Ft.document.write($e),Ft}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(dr)==="[object Window]"){var Bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(U.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+U.filename+'" width="500px" height="400px" /></body></html>',_t=dr.open();if(_t!==null){_t.document.write(Bt);var qt=this;_t.document.documentElement.querySelector("#pdfViewer").onload=function(){_t.document.title=U.filename,_t.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(qt.output("bloburl"))}}return _t}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(dr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var kr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",U)+'"></iframe></body></html>',rn=dr.open();if(rn!==null&&(rn.document.write(kr),rn.document.title=U.filename),rn||typeof safari>"u")return rn;break;case"datauri":case"dataurl":return dr.document.location.href=this.output("datauristring",U);default:return null}},Nn.foo=function(){try{return Nn.apply(this,arguments)}catch(ae){var _=ae.stack||"";~_.indexOf(" at ")&&(_=_.split(" at ")[1]);var U="Error in function "+_.split(`
`)[0].split("<")[0]+": "+ae.message;if(!dr.console)throw new Error(U);dr.console.error(U,ae),dr.alert&&alert(U)}},Nn.foo.bar=Nn,Nn.foo),Qn=function(_){return Array.isArray(sn)===!0&&sn.indexOf(_)>-1};switch(n){case"pt":Rt=1;break;case"mm":Rt=72/25.4;break;case"cm":Rt=72/2.54;break;case"in":Rt=72;break;case"px":Rt=Qn("px_scaling")==1?.75:96/72;break;case"pc":case"em":Rt=12;break;case"ex":Rt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Rt=n}var _n=null;Ie(),he();var Vs=f.__private__.getPageInfo=f.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ye[_].objId,pageNumber:_,pageContext:Ye[_]}},Eo=f.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var U in Ye)if(Ye[U].objId===_)break;return Vs(U)},$c=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Ye[O].objId,pageNumber:O,pageContext:Ye[O]}};f.addPage=function(){return Hn.apply(this,arguments),this},f.setPage=function(){return ci.apply(this,arguments),mt.call(this,Xe[O]),this},f.insertPage=function(_){return this.addPage(),this.movePage(O,_),this},f.movePage=function(_,U){var ae,xe;if(_>U){ae=Xe[_],xe=Ye[_];for(var Pe=_;Pe>U;Pe--)Xe[Pe]=Xe[Pe-1],Ye[Pe]=Ye[Pe-1];Xe[U]=ae,Ye[U]=xe,this.setPage(U)}else if(_<U){ae=Xe[_],xe=Ye[_];for(var Ee=_;Ee<U;Ee++)Xe[Ee]=Xe[Ee+1],Ye[Ee]=Ye[Ee+1];Xe[U]=ae,Ye[U]=xe,this.setPage(U)}return this},f.deletePage=function(){return li.apply(this,arguments),this},f.__private__.text=f.text=function(_,U,ae,xe,Pe){var Ee,$e,Ft,Bt,_t,qt,kr,rn,ln,g=(xe=xe||{}).scope||this;if(typeof _=="number"&&typeof U=="number"&&(typeof ae=="string"||Array.isArray(ae))){var I=ae;ae=U,U=_,_=I}if(arguments[3]instanceof Zt==0?(Ft=arguments[4],Bt=arguments[5],pn(kr=arguments[3])==="object"&&kr!==null||(typeof Ft=="string"&&(Bt=Ft,Ft=null),typeof kr=="string"&&(Bt=kr,kr=null),typeof kr=="number"&&(Ft=kr,kr=null),xe={flags:kr,angle:Ft,align:Bt})):(A("The transform parameter of text() with a Matrix value"),ln=Pe),isNaN(U)||isNaN(ae)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return g;var M,Z="",Fe=typeof xe.lineHeightFactor=="number"?xe.lineHeightFactor:ja,We=g.internal.scaleFactor;function bt(nn){return nn=nn.split("	").join(Array(xe.TabLen||9).join(" ")),yr(nn,kr)}function mr(nn){for(var Sn,hi=nn.concat(),Ii=[],el=hi.length;el--;)typeof(Sn=hi.shift())=="string"?Ii.push(Sn):Array.isArray(nn)&&(Sn.length===1||Sn[1]===void 0&&Sn[2]===void 0)?Ii.push(Sn[0]):Ii.push([Sn[0],Sn[1],Sn[2]]);return Ii}function kn(nn,Sn){var hi;if(typeof nn=="string")hi=Sn(nn)[0];else if(Array.isArray(nn)){for(var Ii,el,Df=nn.concat(),Hu=[],np=Df.length;np--;)typeof(Ii=Df.shift())=="string"?Hu.push(Sn(Ii)[0]):Array.isArray(Ii)&&typeof Ii[0]=="string"&&(el=Sn(Ii[0],Ii[1],Ii[2]),Hu.push([el[0],el[1],el[2]]));hi=Hu}return hi}var Mr=!1,Cn=!0;if(typeof _=="string")Mr=!0;else if(Array.isArray(_)){var Oi=_.concat();$e=[];for(var fs,In=Oi.length;In--;)(typeof(fs=Oi.shift())!="string"||Array.isArray(fs)&&typeof fs[0]!="string")&&(Cn=!1);Mr=Cn}if(Mr===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var ds=de/g.internal.scaleFactor,Fa=ds*(Fe-1);switch(xe.baseline){case"bottom":ae-=Fa;break;case"top":ae+=ds-Fa;break;case"hanging":ae+=ds-2*Fa;break;case"middle":ae+=ds/2-Fa}if((qt=xe.maxWidth||0)>0&&(typeof _=="string"?_=g.splitTextToSize(_,qt):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(nn,Sn){return nn.concat(g.splitTextToSize(Sn,qt))},[]))),Ee={text:_,x:U,y:ae,options:xe,mutex:{pdfEscape:yr,activeFontKey:jt,fonts:Ke,activeFontSize:de}},Tt.publish("preProcessText",Ee),_=Ee.text,Ft=(xe=Ee.options).angle,ln instanceof Zt==0&&Ft&&typeof Ft=="number"){Ft*=Math.PI/180,xe.rotationDirection===0&&(Ft=-Ft),R===k&&(Ft=-Ft);var Qo=Math.cos(Ft),kf=Math.sin(Ft);ln=new Zt(Qo,kf,-kf,Qo,0,0)}else Ft&&Ft instanceof Zt&&(ln=Ft);R!==k||ln||(ln=en),(_t=xe.charSpace||At)!==void 0&&(Z+=C(P(_t))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(rn=xe.horizontalScale)!==void 0&&(Z+=C(100*rn)+` Tz
`),xe.lang;var Cs=-1,Zo=xe.renderingMode!==void 0?xe.renderingMode:xe.stroke,Vu=g.internal.getCurrentPageInfo().pageContext;switch(Zo){case 0:case!1:case"fill":Cs=0;break;case 1:case!0:case"stroke":Cs=1;break;case 2:case"fillThenStroke":Cs=2;break;case 3:case"invisible":Cs=3;break;case 4:case"fillAndAddForClipping":Cs=4;break;case 5:case"strokeAndAddPathForClipping":Cs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Cs=6;break;case 7:case"addToPathForClipping":Cs=7}var tp=Vu.usedRenderingMode!==void 0?Vu.usedRenderingMode:-1;Cs!==-1?Z+=Cs+` Tr
`:tp!==-1&&(Z+=`0 Tr
`),Cs!==-1&&(Vu.usedRenderingMode=Cs),Bt=xe.align||"left";var Da,Wc=de*Fe,Cf=g.internal.pageSize.getWidth(),If=Ke[jt];_t=xe.charSpace||At,qt=xe.maxWidth||0,kr=Object.assign({autoencode:!0,noBOM:!0},xe.flags);var Dl=[],Kc=function(nn){return g.getStringUnitWidth(nn,{font:If,charSpace:_t,fontSize:de,doKerning:!1})*de/We};if(Object.prototype.toString.call(_)==="[object Array]"){var na;$e=mr(_),Bt!=="left"&&(Da=$e.map(Kc));var ia,Ml=0;if(Bt==="right"){U-=Da[0],_=[],In=$e.length;for(var Jo=0;Jo<In;Jo++)Jo===0?(ia=V(U),na=pe(ae)):(ia=P(Ml-Da[Jo]),na=-Wc),_.push([$e[Jo],ia,na]),Ml=Da[Jo]}else if(Bt==="center"){U-=Da[0]/2,_=[],In=$e.length;for(var Ol=0;Ol<In;Ol++)Ol===0?(ia=V(U),na=pe(ae)):(ia=P((Ml-Da[Ol])/2),na=-Wc),_.push([$e[Ol],ia,na]),Ml=Da[Ol]}else if(Bt==="left"){_=[],In=$e.length;for(var Lf=0;Lf<In;Lf++)_.push($e[Lf])}else if(Bt==="justify"&&If.encoding==="Identity-H"){_=[],In=$e.length,qt=qt!==0?qt:Cf;for(var zu=0,ui=0;ui<In;ui++)if(na=ui===0?pe(ae):-Wc,ia=ui===0?V(U):zu,ui<In-1){var rp=P((qt-Da[ui])/($e[ui].split(" ").length-1)),No=$e[ui].split(" ");_.push([No[0]+" ",ia,na]),zu=0;for(var To=1;To<No.length;To++){var Pf=(Kc(No[To-1]+" "+No[To])-Kc(No[To]))*We+rp;To==No.length-1?_.push([No[To],Pf,0]):_.push([No[To]+" ",Pf,0]),zu-=Pf}}else _.push([$e[ui],ia,na]);_.push(["",zu,0])}else{if(Bt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],In=$e.length,qt=qt!==0?qt:Cf,ui=0;ui<In;ui++){na=ui===0?pe(ae):-Wc,ia=ui===0?V(U):0;var jf=$e[ui].split(" ").length-1,Rf=jf>0?(qt-Da[ui])/jf:0;ui<In-1?Dl.push(C(P(Rf))):Dl.push(0),_.push([$e[ui],ia,na])}}}(typeof xe.R2L=="boolean"?xe.R2L:st)===!0&&(_=kn(_,function(nn,Sn,hi){return[nn.split("").reverse().join(""),Sn,hi]})),Ee={text:_,x:U,y:ae,options:xe,mutex:{pdfEscape:yr,activeFontKey:jt,fonts:Ke,activeFontSize:de}},Tt.publish("postProcessText",Ee),_=Ee.text,M=Ee.mutex.isHex||!1;var Ff=Ke[jt].encoding;Ff!=="WinAnsiEncoding"&&Ff!=="StandardEncoding"||(_=kn(_,function(nn,Sn,hi){return[bt(nn),Sn,hi]})),$e=mr(_),_=[];for(var Bl,Ul,Vl,Gc=Array.isArray($e[0])?1:0,zl="",Yc=function(nn,Sn,hi){var Ii="";return hi instanceof Zt?(hi=typeof xe.angle=="number"?zn(hi,new Zt(1,0,0,1,nn,Sn)):zn(new Zt(1,0,0,1,nn,Sn),hi),R===k&&(hi=zn(new Zt(1,0,0,-1,0,0),hi)),Ii=hi.join(" ")+` Tm
`):Ii=C(nn)+" "+C(Sn)+` Td
`,Ii},Ma=0;Ma<$e.length;Ma++){switch(zl="",Gc){case 1:Vl=(M?"<":"(")+$e[Ma][0]+(M?">":")"),Bl=parseFloat($e[Ma][1]),Ul=parseFloat($e[Ma][2]);break;case 0:Vl=(M?"<":"(")+$e[Ma]+(M?">":")"),Bl=V(U),Ul=pe(ae)}Dl!==void 0&&Dl[Ma]!==void 0&&(zl=Dl[Ma]+` Tw
`),Ma===0?_.push(zl+Yc(Bl,Ul,ln)+Vl):Gc===0?_.push(zl+Vl):Gc===1&&_.push(zl+Yc(Bl,Ul,ln)+Vl)}_=Gc===0?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var ko=`BT
/`;return ko+=jt+" "+de+` Tf
`,ko+=C(de*Fe)+` TL
`,ko+=er+`
`,ko+=Z,ko+=_,te(ko+="ET"),p[jt]=!0,g};var Za=f.__private__.clip=f.clip=function(_){return te(_==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Za("evenodd")},f.__private__.discardPath=f.discardPath=function(){return te("n"),this};var zs=f.__private__.isValidStyle=function(_){var U=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(U=!0),U};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(_){return zs(_)&&(u=_),this};var Zn=f.__private__.getStyle=f.getStyle=function(_){var U=u;switch(_){case"D":case"S":U="S";break;case"F":U="f";break;case"FD":case"DF":U="B";break;case"f":case"f*":case"B":case"B*":U=_}return U},La=f.close=function(){return te("h"),this};f.stroke=function(){return te("S"),this},f.fill=function(_){return cs("f",_),this},f.fillEvenOdd=function(_){return cs("f*",_),this},f.fillStroke=function(_){return cs("B",_),this},f.fillStrokeEvenOdd=function(_){return cs("B*",_),this};var cs=function(_,U){pn(U)==="object"?Pl(U,_):te(_)},Pa=function(_){_===null||R===k&&_===void 0||(_=Zn(_),te(_))};function Ll(_,U,ae,xe,Pe){var Ee=new Nh(U||this.boundingBox,ae||this.xStep,xe||this.yStep,this.gState,Pe||this.matrix);Ee.stream=this.stream;var $e=_+"$$"+this.cloneIndex+++"$$";return an($e,Ee),Ee}var Pl=function(_,U){var ae=Ir[_.key],xe=Gt[ae];if(xe instanceof ru)te("q"),te(jl(U)),xe.gState&&f.setGState(xe.gState),te(_.matrix.toString()+" cm"),te("/"+ae+" sh"),te("Q");else if(xe instanceof Nh){var Pe=new Zt(1,0,0,-1,0,ar());_.matrix&&(Pe=Pe.multiply(_.matrix||en),ae=Ll.call(xe,_.key,_.boundingBox,_.xStep,_.yStep,Pe).id),te("q"),te("/Pattern cs"),te("/"+ae+" scn"),xe.gState&&f.setGState(xe.gState),te(U),te("Q")}},jl=function(_){switch(_){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ja=f.moveTo=function(_,U){return te(C(P(_))+" "+C(se(U))+" m"),this},Hs=f.lineTo=function(_,U){return te(C(P(_))+" "+C(se(U))+" l"),this},us=f.curveTo=function(_,U,ae,xe,Pe,Ee){return te([C(P(_)),C(se(U)),C(P(ae)),C(se(xe)),C(P(Pe)),C(se(Ee)),"c"].join(" ")),this};f.__private__.line=f.line=function(_,U,ae,xe,Pe){if(isNaN(_)||isNaN(U)||isNaN(ae)||isNaN(xe)||!zs(Pe))throw new Error("Invalid arguments passed to jsPDF.line");return R===S?this.lines([[ae-_,xe-U]],_,U,[1,1],Pe||"S"):this.lines([[ae-_,xe-U]],_,U,[1,1]).stroke()},f.__private__.lines=f.lines=function(_,U,ae,xe,Pe,Ee){var $e,Ft,Bt,_t,qt,kr,rn,ln,g,I,M,Z;if(typeof _=="number"&&(Z=ae,ae=U,U=_,_=Z),xe=xe||[1,1],Ee=Ee||!1,isNaN(U)||isNaN(ae)||!Array.isArray(_)||!Array.isArray(xe)||!zs(Pe)||typeof Ee!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ja(U,ae),$e=xe[0],Ft=xe[1],_t=_.length,I=U,M=ae,Bt=0;Bt<_t;Bt++)(qt=_[Bt]).length===2?(I=qt[0]*$e+I,M=qt[1]*Ft+M,Hs(I,M)):(kr=qt[0]*$e+I,rn=qt[1]*Ft+M,ln=qt[2]*$e+I,g=qt[3]*Ft+M,I=qt[4]*$e+I,M=qt[5]*Ft+M,us(kr,rn,ln,g,I,M));return Ee&&La(),Pa(Pe),this},f.path=function(_){for(var U=0;U<_.length;U++){var ae=_[U],xe=ae.c;switch(ae.op){case"m":Ja(xe[0],xe[1]);break;case"l":Hs(xe[0],xe[1]);break;case"c":us.apply(this,xe);break;case"h":La()}}return this},f.__private__.rect=f.rect=function(_,U,ae,xe,Pe){if(isNaN(_)||isNaN(U)||isNaN(ae)||isNaN(xe)||!zs(Pe))throw new Error("Invalid arguments passed to jsPDF.rect");return R===S&&(xe=-xe),te([C(P(_)),C(se(U)),C(P(ae)),C(P(xe)),"re"].join(" ")),Pa(Pe),this},f.__private__.triangle=f.triangle=function(_,U,ae,xe,Pe,Ee,$e){if(isNaN(_)||isNaN(U)||isNaN(ae)||isNaN(xe)||isNaN(Pe)||isNaN(Ee)||!zs($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-_,xe-U],[Pe-ae,Ee-xe],[_-Pe,U-Ee]],_,U,[1,1],$e,!0),this},f.__private__.roundedRect=f.roundedRect=function(_,U,ae,xe,Pe,Ee,$e){if(isNaN(_)||isNaN(U)||isNaN(ae)||isNaN(xe)||isNaN(Pe)||isNaN(Ee)||!zs($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ft=4/3*(Math.SQRT2-1);return Pe=Math.min(Pe,.5*ae),Ee=Math.min(Ee,.5*xe),this.lines([[ae-2*Pe,0],[Pe*Ft,0,Pe,Ee-Ee*Ft,Pe,Ee],[0,xe-2*Ee],[0,Ee*Ft,-Pe*Ft,Ee,-Pe,Ee],[2*Pe-ae,0],[-Pe*Ft,0,-Pe,-Ee*Ft,-Pe,-Ee],[0,2*Ee-xe],[0,-Ee*Ft,Pe*Ft,-Ee,Pe,-Ee]],_+Pe,U,[1,1],$e,!0),this},f.__private__.ellipse=f.ellipse=function(_,U,ae,xe,Pe){if(isNaN(_)||isNaN(U)||isNaN(ae)||isNaN(xe)||!zs(Pe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ee=4/3*(Math.SQRT2-1)*ae,$e=4/3*(Math.SQRT2-1)*xe;return Ja(_+ae,U),us(_+ae,U-$e,_+Ee,U-xe,_,U-xe),us(_-Ee,U-xe,_-ae,U-$e,_-ae,U),us(_-ae,U+$e,_-Ee,U+xe,_,U+xe),us(_+Ee,U+xe,_+ae,U+$e,_+ae,U),Pa(Pe),this},f.__private__.circle=f.circle=function(_,U,ae,xe){if(isNaN(_)||isNaN(U)||isNaN(ae)||!zs(xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,U,ae,ae,xe)},f.setFont=function(_,U,ae){return ae&&(U=E(U,ae)),jt=on(_,U,{disableWarning:!1}),this};var Rl=f.__private__.getFont=f.getFont=function(){return Ke[on.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var _,U,ae={};for(_ in Pt)if(Pt.hasOwnProperty(_))for(U in ae[_]=[],Pt[_])Pt[_].hasOwnProperty(U)&&ae[_].push(U);return ae},f.addFont=function(_,U,ae,xe,Pe){var Ee=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ee.indexOf(arguments[3])!==-1?Pe=arguments[3]:arguments[3]&&Ee.indexOf(arguments[3])==-1&&(ae=E(ae,xe)),Nr.call(this,_,U,ae,Pe=Pe||"Identity-H")};var ja,Ki=t.lineWidth||.200025,Fl=f.__private__.getLineWidth=f.getLineWidth=function(){return Ki},cr=f.__private__.setLineWidth=f.setLineWidth=function(_){return Ki=_,te(C(P(_))+" w"),this};f.__private__.setLineDash=ir.API.setLineDash=ir.API.setLineDashPattern=function(_,U){if(_=_||[],U=U||0,isNaN(U)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(ae){return C(P(ae))}).join(" "),U=C(P(U)),te("["+_+"] "+U+" d"),this};var eo=f.__private__.getLineHeight=f.getLineHeight=function(){return de*ja};f.__private__.getLineHeight=f.getLineHeight=function(){return de*ja};var Xo=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(ja=_),this},Ra=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return ja};Xo(t.lineHeight);var V=f.__private__.getHorizontalCoordinate=function(_){return P(_)},pe=f.__private__.getVerticalCoordinate=function(_){return R===k?_:Ye[O].mediaBox.topRightY-Ye[O].mediaBox.bottomLeftY-P(_)},je=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(_){return C(V(_))},Ve=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(_){return C(pe(_))},it=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return oe(it)},f.__private__.setStrokeColor=f.setDrawColor=function(_,U,ae,xe){return it=le({ch1:_,ch2:U,ch3:ae,ch4:xe,pdfColorType:"draw",precision:2}),te(it),this};var Qe=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return oe(Qe)},f.__private__.setFillColor=f.setFillColor=function(_,U,ae,xe){return Qe=le({ch1:_,ch2:U,ch3:ae,ch4:xe,pdfColorType:"fill",precision:2}),te(Qe),this};var er=t.textColor||"0 g",Mt=f.__private__.getTextColor=f.getTextColor=function(){return oe(er)};f.__private__.setTextColor=f.setTextColor=function(_,U,ae,xe){return er=le({ch1:_,ch2:U,ch3:ae,ch4:xe,pdfColorType:"text",precision:3}),this};var At=t.charSpace,ur=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(At||0)};f.__private__.setCharSpace=f.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return At=_,this};var Ot=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(_){var U=f.CapJoinStyles[_];if(U===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ot=U,te(U+" J"),this};var ut=0;f.__private__.setLineJoin=f.setLineJoin=function(_){var U=f.CapJoinStyles[_];if(U===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ut=U,te(U+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(C(P(_))+" M"),this},f.GState=R1,f.setGState=function(_){(_=typeof _=="string"?Qt[Jt[_]]:sr(null,_)).equals(Ur)||(te("/"+_.id+" gs"),Ur=_)};var sr=function(_,U){if(!_||!Jt[_]){var ae=!1;for(var xe in Qt)if(Qt.hasOwnProperty(xe)&&Qt[xe].equals(U)){ae=!0;break}if(ae)U=Qt[xe];else{var Pe="GS"+(Object.keys(Qt).length+1).toString(10);Qt[Pe]=U,U.id=Pe}return _&&(Jt[_]=U.id),Tt.publish("addGState",U),U}};f.addGState=function(_,U){return sr(_,U),this},f.saveGraphicsState=function(){return te("q"),pr.push({key:jt,size:de,color:er}),this},f.restoreGraphicsState=function(){te("Q");var _=pr.pop();return jt=_.key,de=_.size,er=_.color,Ur=null,this},f.setCurrentTransformationMatrix=function(_){return te(_.toString()+" cm"),this},f.comment=function(_){return te("#"+_),this};var wt=function(_,U){var ae=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(Ee){isNaN(Ee)||(ae=parseFloat(Ee))}});var xe=U||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return xe},set:function(Ee){isNaN(Ee)||(xe=parseFloat(Ee))}});var Pe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Pe},set:function(Ee){Pe=Ee.toString()}}),this},Pr=function(_,U,ae,xe){wt.call(this,_,U),this.type="rect";var Pe=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Pe},set:function($e){isNaN($e)||(Pe=parseFloat($e))}});var Ee=xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ee},set:function($e){isNaN($e)||(Ee=parseFloat($e))}}),this},Sr=function(){this.page=Wt,this.currentPage=O,this.pages=Xe.slice(0),this.pagesContext=Ye.slice(0),this.x=Dt,this.y=Hr,this.matrix=hr,this.width=ks(O),this.height=ra(O),this.outputDestination=ot,this.id="",this.objectNumber=-1};Sr.prototype.restore=function(){Wt=this.page,O=this.currentPage,Ye=this.pagesContext,Xe=this.pages,Dt=this.x,Hr=this.y,hr=this.matrix,Tr(O,this.width),Jn(O,this.height),ot=this.outputDestination};var jr=function(_,U,ae,xe,Pe){jn.push(new Sr),Wt=O=0,Xe=[],Dt=_,Hr=U,hr=Pe,tn([ae,xe])};for(var bn in f.beginFormObject=function(_,U,ae,xe,Pe){return jr(_,U,ae,xe,Pe),this},f.endFormObject=function(_){return function(U){if(xr[U])jn.pop().restore();else{var ae=new Sr,xe="Xo"+(Object.keys(br).length+1).toString(10);ae.id=xe,xr[U]=xe,br[xe]=ae,Tt.publish("addFormObject",ae),jn.pop().restore()}}(_),this},f.doFormObject=function(_,U){var ae=br[xr[_]];return te("q"),te(U.toString()+" cm"),te("/"+ae.id+" Do"),te("Q"),this},f.getFormObject=function(_){var U=br[xr[_]];return{x:U.x,y:U.y,width:U.width,height:U.height,matrix:U.matrix}},f.save=function(_,U){return _=_||"generated.pdf",(U=U||{}).returnPromise=U.returnPromise||!1,U.returnPromise===!1?(tu(Dr(yn()),_),typeof tu.unload=="function"&&dr.setTimeout&&setTimeout(tu.unload,911),this):new Promise(function(ae,xe){try{var Pe=tu(Dr(yn()),_);typeof tu.unload=="function"&&dr.setTimeout&&setTimeout(tu.unload,911),ae(Pe)}catch(Ee){xe(Ee.message)}})},ir.API)ir.API.hasOwnProperty(bn)&&(bn==="events"&&ir.API.events.length?function(_,U){var ae,xe,Pe;for(Pe=U.length-1;Pe!==-1;Pe--)ae=U[Pe][0],xe=U[Pe][1],_.subscribe.apply(_,[ae].concat(typeof xe=="function"?[xe]:xe))}(Tt,ir.API.events):f[bn]=ir.API[bn]);function ks(_){return Ye[_].mediaBox.topRightX-Ye[_].mediaBox.bottomLeftX}function Tr(_,U){Ye[_].mediaBox.topRightX=U+Ye[_].mediaBox.bottomLeftX}function ra(_){return Ye[_].mediaBox.topRightY-Ye[_].mediaBox.bottomLeftY}function Jn(_,U){Ye[_].mediaBox.topRightY=U+Ye[_].mediaBox.bottomLeftY}var hs=f.getPageWidth=function(_){return ks(_=_||O)/Rt},ei=f.setPageWidth=function(_,U){Tr(_,U*Rt)},ar=f.getPageHeight=function(_){return ra(_=_||O)/Rt},ti=f.setPageHeight=function(_,U){Jn(_,U*Rt)};return f.internal={pdfEscape:yr,getStyle:Zn,getFont:Rl,getFontSize:Ge,getCharSpace:ur,getTextColor:Mt,getLineHeight:eo,getLineHeightFactor:Ra,getLineWidth:Fl,write:ke,getHorizontalCoordinate:V,getVerticalCoordinate:pe,getCoordinateString:je,getVerticalCoordinateString:Ve,collections:{},newObject:Fr,newAdditionalObject:ie,newObjectDeferred:Qr,newObjectDeferredBegin:W,getFilters:De,putStream:Te,events:Tt,scaleFactor:Rt,pageSize:{getWidth:function(){return hs(O)},setWidth:function(_){ei(O,_)},getHeight:function(){return ar(O)},setHeight:function(_){ti(O,_)}},encryptionOptions:h,encryption:_n,getEncryptor:function(_){return h!==null?_n.encryptor(_,0):function(U){return U}},output:Ia,getNumberOfPages:Xn,get pages(){return Xe},out:te,f2:N,f3:j,getPageInfo:Vs,getPageInfoByObjId:Eo,getCurrentPageInfo:$c,getPDFVersion:y,Point:wt,Rectangle:Pr,Matrix:Zt,hasHotfix:Qn},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return hs(O)},set:function(_){ei(O,_)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return ar(O)},set:function(_){ti(O,_)},enumerable:!0,configurable:!0}),(function(_){for(var U=0,ae=me.length;U<ae;U++){var xe=Nr.call(this,_[U][0],_[U][1],_[U][2],me[U][3],!0);d===!1&&(p[xe]=!0);var Pe=_[U][0].split("-");tr({id:xe,fontName:Pe[0],fontStyle:Pe[1]||""})}Tt.publish("addFonts",{fonts:Ke,dictionary:Pt})}).call(f,me),jt="F1",Hn(i,r),Tt.publish("initialized"),f}ih.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},ih.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ih.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},ih.prototype.processOwnerPassword=function(t,e){return hv(uv(e).substr(0,5),t)},ih.prototype.encryptor=function(t,e){var r=uv(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return hv(r,n)}},R1.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||pn(t)!==pn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},ir.API={events:[]},ir.version="4.0.0";var ii=ir.API,pw=1,Fu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vr=function(t){return t.toFixed(2)},Ql=function(t){return t.toFixed(5)};ii.__acroform__={};var ta=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},nS=function(t){return t*pw},Lo=function(t){var e=new Nk,r=Kt.internal.getHeight(t)||0,n=Kt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(vr(n)),Number(vr(r))],e},HB=ii.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},qB=ii.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},$B=ii.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},yi=ii.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return $B(t,e-1)},vi=ii.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return HB(t,e-1)},wi=ii.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return qB(t,e-1)},WB=ii.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],s=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=r(i)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(i+a)||0,l.upperRight_Y=n(s)||0,[Number(vr(l.lowerLeft_X)),Number(vr(l.lowerLeft_Y)),Number(vr(l.upperRight_X)),Number(vr(l.upperRight_Y))]},KB=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=fv(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+vr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Lo(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},fv=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(N){return N.split(`
`)}):i.map(function(N){return[N]});var s=r,a=Kt.internal.getHeight(t)||0;a=a<0?-a:a;var o=Kt.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(N,j,P){if(N+1<i.length){var se=j+" "+i[N+1][0];return Xp(se,t,P).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,h,d=Xp("3",t,s).height,p=t.multiline?a-s:(a-d)/2,f=p+=2,v=0,y=0,b=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Xp(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var w="",S=0,k=0;k<i.length;k++)if(i.hasOwnProperty(k)){var R=!1;if(i[k].length!==1&&b!==i[k].length-1){if((d+2)*(S+2)+2>a)continue e;w+=i[k][b],R=!0,y=k,k--}else{w=(w+=i[k][b]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var q=parseInt(k),K=l(q,w,s),E=k>=i.length-1;if(K&&!E){w+=" ",b=0;continue}if(K||E){if(E)y=q;else if(t.multiline&&(d+2)*(S+2)+2>a)continue e}else{if(!t.multiline||(d+2)*(S+2)+2>a)continue e;y=q}}for(var C="",A=v;A<=y;A++){var D=i[A];if(t.multiline){if(A===y){C+=D[b]+" ",b=(b+1)%D.length;continue}if(A===v){C+=D[D.length-1]+" ";continue}}C+=D[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,h=Xp(C,t,s).width,t.textAlign){case"right":u=o-h-2;break;case"center":u=(o-h)/2;break;default:u=2}e+=vr(u)+" "+vr(f)+` Td
`,e+="("+Fu(C)+`) Tj
`,e+=-vr(u)+` 0 Td
`,f=-(s+2),h=0,v=R?y:y+1,S++,w=""}break}return n.text=e,n.fontSize=s,n},Xp=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},GB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},YB=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},XB=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(So.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(GB)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");pw=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Tk,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&YB(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var s=!n;for(var a in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],l=[],u=o.Rect;if(o.Rect&&(o.Rect=WB(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Kt.createDefaultAppearanceStream(o),pn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var h=KB(o);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(o.appearanceStreamContent){var d="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var f=o.appearanceStreamContent[p];if(d+="/"+p+" ",d+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var a in f)if(f.hasOwnProperty(a)){var v=f[a];typeof v=="function"&&(v=v.call(i,o)),d+="/"+a+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=f)=="function"&&(v=v.call(i,o)),d+="/"+a+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}s&&function(y,b){for(var w in y)if(y.hasOwnProperty(w)){var S=w,k=y[w];b.internal.newObjectDeferredBegin(k.objId,!0),pn(k)==="object"&&typeof k.putStream=="function"&&k.putStream(),delete y[S]}}(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},Ek=ii.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),pn(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+Fu(n(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},xx=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Fu(n(t))+")"},Bo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Bo.prototype.toString=function(){return this.objId+" 0 R"},Bo.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Bo.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:Ek(i,this.objId,this.scope)}):i instanceof Bo?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var Nk=function(){Bo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};ta(Nk,Bo);var Tk=function(){Bo.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Fu(r(t))+")"}},set:function(r){t=r}})};ta(Tk,Bo);var So=function t(){Bo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!yi(e,3)},set:function(w){w?this.F=vi(e,3):this.F=wi(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');r=w}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(w){n=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(w){n[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(w){n[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(w){n[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(w){n[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof F1)return;s="FieldObject"+t.FieldNum++}var w=function(S){return S};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Fu(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/pw:u},set:function(w){u=w}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(w){h=w}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof F1||this instanceof mu))return xx(d,this.objId,this.scope)},set:function(w){w=w.toString(),d=w}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Vi==0?xx(p,this.objId,this.scope):p},set:function(w){w=w.toString(),p=this instanceof Vi==0?w.substr(0,1)==="("?Gu(w.substr(1,w.length-2)):Gu(w):w}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vi==1?Gu(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof Vi==1?"/"+w:w}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Vi==0?xx(f,this.objId,this.scope):f},set:function(w){w=w.toString(),f=this instanceof Vi==0?w.substr(0,1)==="("?Gu(w.substr(1,w.length-2)):Gu(w):w}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vi==1?Gu(f.substr(1,f.length-1)):f},set:function(w){w=w.toString(),f=this instanceof Vi==1?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(w){w=!!w,y=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(w){v=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,1)},set:function(w){w?this.Ff=vi(this.Ff,1):this.Ff=wi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,2)},set:function(w){w?this.Ff=vi(this.Ff,2):this.Ff=wi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,3)},set:function(w){w?this.Ff=vi(this.Ff,3):this.Ff=wi(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');b=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(b){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:b=2;break;case"center":case 1:b=1;break;default:b=0}}})};ta(So,Bo);var Oh=function(){So.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Ek(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(s,a,o){o||(o=1);for(var l,u=[];l=a.exec(s);)u.push(l[o]);return u}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,18)},set:function(r){r?this.Ff=vi(this.Ff,18):this.Ff=wi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=vi(this.Ff,19):this.Ff=wi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,20)},set:function(r){r?(this.Ff=vi(this.Ff,20),e.sort()):this.Ff=wi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,22)},set:function(r){r?this.Ff=vi(this.Ff,22):this.Ff=wi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,23)},set:function(r){r?this.Ff=vi(this.Ff,23):this.Ff=wi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,27)},set:function(r){r?this.Ff=vi(this.Ff,27):this.Ff=wi(this.Ff,27)}}),this.hasAppearanceStream=!1};ta(Oh,So);var Bh=function(){Oh.call(this),this.fontName="helvetica",this.combo=!1};ta(Bh,Oh);var Uh=function(){Bh.call(this),this.combo=!0};ta(Uh,Bh);var Fm=function(){Uh.call(this),this.edit=!0};ta(Fm,Uh);var Vi=function(){So.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,15)},set:function(r){r?this.Ff=vi(this.Ff,15):this.Ff=wi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,16)},set:function(r){r?this.Ff=vi(this.Ff,16):this.Ff=wi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,17)},set:function(r){r?this.Ff=vi(this.Ff,17):this.Ff=wi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,26)},set:function(r){r?this.Ff=vi(this.Ff,26):this.Ff=wi(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+Fu(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){pn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};ta(Vi,So);var Dm=function(){Vi.call(this),this.pushButton=!0};ta(Dm,Vi);var Vh=function(){Vi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};ta(Vh,Vi);var F1=function(){var t,e;So.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),n)a.push("/"+s+" ("+Fu(i(n[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){pn(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Kt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ta(F1,So),Vh.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Vh.prototype.createOption=function(t){var e=new F1;return e.Parent=this,e.optionName=t,this.Kids.push(e),QB.call(this.scope,e),e};var Mm=function(){Vi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Kt.CheckBox.createAppearanceStream()};ta(Mm,Vi);var mu=function(){So.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,13)},set:function(e){e?this.Ff=vi(this.Ff,13):this.Ff=wi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,21)},set:function(e){e?this.Ff=vi(this.Ff,21):this.Ff=wi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,23)},set:function(e){e?this.Ff=vi(this.Ff,23):this.Ff=wi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,24)},set:function(e){e?this.Ff=vi(this.Ff,24):this.Ff=wi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,25)},set:function(e){e?this.Ff=vi(this.Ff,25):this.Ff=wi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,26)},set:function(e){e?this.Ff=vi(this.Ff,26):this.Ff=wi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ta(mu,So);var Om=function(){mu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,14)},set:function(t){t?this.Ff=vi(this.Ff,14):this.Ff=wi(this.Ff,14)}}),this.password=!0};ta(Om,mu);var Kt={CheckBox:{createAppearanceStream:function(){return{N:{On:Kt.CheckBox.YesNormal},D:{On:Kt.CheckBox.YesPushDown,Off:Kt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Lo(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=fv(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+vr(Kt.internal.getWidth(t))+" "+vr(Kt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+vr(s.fontSize)+" Tf "+i),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Lo(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],s=Kt.internal.getHeight(t),a=Kt.internal.getWidth(t),o=fv(t,t.caption);return i.push("1 g"),i.push("0 0 "+vr(a)+" "+vr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+vr(a-1)+" "+vr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+vr(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Lo(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+vr(Kt.internal.getWidth(t))+" "+vr(Kt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Kt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Kt.RadioButton.Circle.YesNormal,e.D[t]=Kt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Lo(t);e.scope=t.scope;var r=[],n=Kt.internal.getWidth(t)<=Kt.internal.getHeight(t)?Kt.internal.getWidth(t)/4:Kt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Kt.internal.Bezier_C,s=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ql(Kt.internal.getWidth(t)/2)+" "+Ql(Kt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Lo(t);e.scope=t.scope;var r=[],n=Kt.internal.getWidth(t)<=Kt.internal.getHeight(t)?Kt.internal.getWidth(t)/4:Kt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*Kt.internal.Bezier_C).toFixed(5)),a=Number((n*Kt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ql(Kt.internal.getWidth(t)/2)+" "+Ql(Kt.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ql(Kt.internal.getWidth(t)/2)+" "+Ql(Kt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Lo(t);e.scope=t.scope;var r=[],n=Kt.internal.getWidth(t)<=Kt.internal.getHeight(t)?Kt.internal.getWidth(t)/4:Kt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*Kt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ql(Kt.internal.getWidth(t)/2)+" "+Ql(Kt.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Kt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Kt.RadioButton.Cross.YesNormal,e.D[t]=Kt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Lo(t);e.scope=t.scope;var r=[],n=Kt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+vr(Kt.internal.getWidth(t)-2)+" "+vr(Kt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(vr(n.x1.x)+" "+vr(n.x1.y)+" m"),r.push(vr(n.x2.x)+" "+vr(n.x2.y)+" l"),r.push(vr(n.x4.x)+" "+vr(n.x4.y)+" m"),r.push(vr(n.x3.x)+" "+vr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Lo(t);e.scope=t.scope;var r=Kt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+vr(Kt.internal.getWidth(t))+" "+vr(Kt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+vr(Kt.internal.getWidth(t)-2)+" "+vr(Kt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(vr(r.x1.x)+" "+vr(r.x1.y)+" m"),n.push(vr(r.x2.x)+" "+vr(r.x2.y)+" l"),n.push(vr(r.x4.x)+" "+vr(r.x4.y)+" m"),n.push(vr(r.x3.x)+" "+vr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Lo(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+vr(Kt.internal.getWidth(t))+" "+vr(Kt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Kt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Kt.internal.getWidth(t),r=Kt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Kt.internal.getWidth=function(t){var e=0;return pn(t)==="object"&&(e=nS(t.Rect[2])),e},Kt.internal.getHeight=function(t){var e=0;return pn(t)==="object"&&(e=nS(t.Rect[3])),e};var QB=ii.addField=function(t){if(XB(this,t),!(t instanceof So))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ii.AcroFormChoiceField=Oh,ii.AcroFormListBox=Bh,ii.AcroFormComboBox=Uh,ii.AcroFormEditBox=Fm,ii.AcroFormButton=Vi,ii.AcroFormPushButton=Dm,ii.AcroFormRadioButton=Vh,ii.AcroFormCheckBox=Mm,ii.AcroFormTextField=mu,ii.AcroFormPasswordField=Om,ii.AcroFormAppearance=Kt,ii.AcroForm={ChoiceField:Oh,ListBox:Bh,ComboBox:Uh,EditBox:Fm,Button:Vi,PushButton:Dm,RadioButton:Vh,CheckBox:Mm,TextField:mu,PasswordField:Om,Appearance:Kt},ir.AcroForm={ChoiceField:Oh,ListBox:Bh,ComboBox:Uh,EditBox:Fm,Button:Vi,PushButton:Dm,RadioButton:Vh,CheckBox:Mm,TextField:mu,PasswordField:Om,Appearance:Kt};ir.AcroForm;function kk(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(N,j){var P,se,ge,ve,ye,he=r;if((j=j||r)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(K(N))for(ye in n)for(ge=n[ye],P=0;P<ge.length;P+=1){for(ve=!0,se=0;se<ge[P].length;se+=1)if(ge[P][se]!==void 0&&ge[P][se]!==N[se]){ve=!1;break}if(ve===!0){he=ye;break}}else for(ye in n)for(ge=n[ye],P=0;P<ge.length;P+=1){for(ve=!0,se=0;se<ge[P].length;se+=1)if(ge[P][se]!==void 0&&ge[P][se]!==N.charCodeAt(se)){ve=!1;break}if(ve===!0){he=ye;break}}return he===r&&j!==r&&(he=j),he},s=function N(j){for(var P=this.internal.write,se=this.internal.putStream,ge=(0,this.internal.getFilters)();ge.indexOf("FlateEncode")!==-1;)ge.splice(ge.indexOf("FlateEncode"),1);j.objectId=this.internal.newObject();var ve=[];if(ve.push({key:"Type",value:"/XObject"}),ve.push({key:"Subtype",value:"/Image"}),ve.push({key:"Width",value:j.width}),ve.push({key:"Height",value:j.height}),j.colorSpace===w.INDEXED?ve.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(j.palette.length/3-1)+" "+("sMask"in j&&j.sMask!==void 0?j.objectId+2:j.objectId+1)+" 0 R]"}):(ve.push({key:"ColorSpace",value:"/"+j.colorSpace}),j.colorSpace===w.DEVICE_CMYK&&ve.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ve.push({key:"BitsPerComponent",value:j.bitsPerComponent}),"decodeParameters"in j&&j.decodeParameters!==void 0&&ve.push({key:"DecodeParms",value:"<<"+j.decodeParameters+">>"}),"transparency"in j&&Array.isArray(j.transparency)&&j.transparency.length>0){for(var ye="",he=0,_e=j.transparency.length;he<_e;he++)ye+=j.transparency[he]+" "+j.transparency[he]+" ";ve.push({key:"Mask",value:"["+ye+"]"})}j.sMask!==void 0&&ve.push({key:"SMask",value:j.objectId+1+" 0 R"});var Ue=j.filter!==void 0?["/"+j.filter]:void 0;if(se({data:j.data,additionalKeyValues:ve,alreadyAppliedFilters:Ue,objectId:j.objectId}),P("endobj"),"sMask"in j&&j.sMask!==void 0){var Ie,L=(Ie=j.sMaskBitsPerComponent)!==null&&Ie!==void 0?Ie:j.bitsPerComponent,O={width:j.width,height:j.height,colorSpace:"DeviceGray",bitsPerComponent:L,data:j.sMask};"filter"in j&&(O.decodeParameters="/Predictor ".concat(j.predictor," /Colors 1 /BitsPerComponent ").concat(L," /Columns ").concat(j.width),O.filter=j.filter),N.call(this,O)}if(j.colorSpace===w.INDEXED){var B=this.internal.newObject();se({data:C(new Uint8Array(j.palette)),objectId:B}),P("endobj")}},a=function(){var N=this.internal.collections[e+"images"];for(var j in N)s.call(this,N[j])},o=function(){var N,j=this.internal.collections[e+"images"],P=this.internal.write;for(var se in j)P("/I"+(N=j[se]).index,N.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var N=this.internal.collections[e+"images"];return l.call(this),N},h=function(){return Object.keys(this.internal.collections[e+"images"]).length},d=function(N){return typeof t["process"+N.toUpperCase()]=="function"},p=function(N){return pn(N)==="object"&&N.nodeType===1},f=function(N,j){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var P=""+N.getAttribute("src");if(P.indexOf("data:image/")===0)return Rm(unescape(P).split("base64,").pop());var se=t.loadFile(P,!0);if(se!==void 0)return se}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var ge;switch(j){case"PNG":ge="image/png";break;case"WEBP":ge="image/webp";break;default:ge="image/jpeg"}return Rm(N.toDataURL(ge,1).split("base64,").pop())}},v=function(N){var j=this.internal.collections[e+"images"];if(j){for(var P in j)if(N===j[P].alias)return j[P]}},y=function(N,j,P){return N||j||(N=-96,j=-96),N<0&&(N=-1*P.width*72/N/this.internal.scaleFactor),j<0&&(j=-1*P.height*72/j/this.internal.scaleFactor),N===0&&(N=j*P.width/P.height),j===0&&(j=N*P.height/P.width),[N,j]},b=function(N,j,P,se,ge,ve){var ye=y.call(this,P,se,ge),he=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,Ue=u.call(this);if(P=ye[0],se=ye[1],Ue[ge.index]=ge,ve){ve*=Math.PI/180;var Ie=Math.cos(ve),L=Math.sin(ve),O=function(z){return z.toFixed(4)},B=[O(Ie),O(L),O(-1*L),O(Ie),0,0,"cm"]}this.internal.write("q"),ve?(this.internal.write([1,"0","0",1,he(N),_e(j+se),"cm"].join(" ")),this.internal.write(B.join(" ")),this.internal.write([he(P),"0","0",he(se),"0","0","cm"].join(" "))):this.internal.write([he(P),"0","0",he(se),he(N),_e(j+se),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ge.index+" Do"),this.internal.write("Q")},w=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=t.__addimage__.sHashCode=function(N){var j,P,se=0;if(typeof N=="string")for(P=N.length,j=0;j<P;j++)se=(se<<5)-se+N.charCodeAt(j),se|=0;else if(K(N))for(P=N.byteLength/2,j=0;j<P;j++)se=(se<<5)-se+N[j],se|=0;return se},R=t.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var j=!0;return N.length===0&&(j=!1),N.length%4!=0&&(j=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(j=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(j=!1),j},q=t.__addimage__.extractImageFromDataUrl=function(N){if(N==null||!(N=N.trim()).startsWith("data:"))return null;var j=N.indexOf(",");return j<0?null:N.substring(0,j).trim().endsWith("base64")?N.substring(j+1):null};t.__addimage__.isArrayBuffer=function(N){return N instanceof ArrayBuffer};var K=t.__addimage__.isArrayBufferView=function(N){return N instanceof Int8Array||N instanceof Uint8Array||N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array},E=t.__addimage__.binaryStringToUint8Array=function(N){for(var j=N.length,P=new Uint8Array(j),se=0;se<j;se++)P[se]=N.charCodeAt(se);return P},C=t.__addimage__.arrayBufferToBinaryString=function(N){for(var j="",P=K(N)?N:new Uint8Array(N),se=0;se<P.length;se+=8192)j+=String.fromCharCode.apply(null,P.subarray(se,se+8192));return j};t.addImage=function(){var N,j,P,se,ge,ve,ye,he,_e;if(typeof arguments[1]=="number"?(j=r,P=arguments[1],se=arguments[2],ge=arguments[3],ve=arguments[4],ye=arguments[5],he=arguments[6],_e=arguments[7]):(j=arguments[1],P=arguments[2],se=arguments[3],ge=arguments[4],ve=arguments[5],ye=arguments[6],he=arguments[7],_e=arguments[8]),pn(N=arguments[0])==="object"&&!p(N)&&"imageData"in N){var Ue=N;N=Ue.imageData,j=Ue.format||j||r,P=Ue.x||P||0,se=Ue.y||se||0,ge=Ue.w||Ue.width||ge,ve=Ue.h||Ue.height||ve,ye=Ue.alias||ye,he=Ue.compression||he,_e=Ue.rotation||Ue.angle||_e}var Ie=this.internal.getFilters();if(he===void 0&&Ie.indexOf("FlateEncode")!==-1&&(he="SLOW"),isNaN(P)||isNaN(se))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var L=A.call(this,N,j,ye,he);return b.call(this,P,se,ge,ve,L,_e),this};var A=function(N,j,P,se){var ge,ve,ye;if(typeof N=="string"&&i(N)===r){N=unescape(N);var he=D(N,!1);(he!==""||(he=t.loadFile(N,!0))!==void 0)&&(N=he)}if(p(N)&&(N=f(N,j)),j=i(N,j),!d(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(((ye=P)==null||ye.length===0)&&(P=function(_e){return typeof _e=="string"||K(_e)?k(_e):K(_e.data)?k(_e.data):null}(N)),(ge=v.call(this,P))||(N instanceof Uint8Array||j==="RGBA"||(ve=N,N=E(N)),ge=this["process"+j.toUpperCase()](N,h.call(this),P,function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in t.image_compression?_e:S.NONE}(se),ve)),!ge)throw new Error("An unknown error occurred whilst processing the image.");return ge},D=t.__addimage__.convertBase64ToBinaryString=function(N,j){j=typeof j!="boolean"||j;var P,se="";if(typeof N=="string"){var ge;P=(ge=q(N))!==null&&ge!==void 0?ge:N;try{se=Rm(P)}catch(ve){if(j)throw R(P)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ve.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return se};t.getImageProperties=function(N){var j,P,se="";if(p(N)&&(N=f(N)),typeof N=="string"&&i(N)===r&&((se=D(N,!1))===""&&(se=t.loadFile(N)||""),N=se),P=i(N),!d(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(N instanceof Uint8Array||(N=E(N)),!(j=this["process"+P.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return j.fileType=P,j}})(ir.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};ir.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,h=!1,d=0;d<u.length&&!h;d++)switch((n=u[d]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){n=u[p];var f=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(y.objId),S=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+f(w(n.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+f(w(S))+") >>",y.content=s;var k=y.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+k,n.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(y.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var R=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(v(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var q=this.annotations._nameMap[n.options.name];n.options.pageNumber=q.page,n.options.top=q.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(v(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var K=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+K+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+i),h:u(n+s)},options:a,type:"link"})},t.textWithLink=function(r,n,i,s){var a,o,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var h=this.splitTextToSize(r,o).length;a=Math.ceil(u*h)}else o=l,a=u;return this.text(r,n,i,s),i+=.2*u,s.align==="center"&&(n-=l/2),s.align==="right"&&(n-=l),this.link(n,i-u,o,a,s),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(ir.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=t.__arabicParser__.isArabicEndLetter=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(y){return a(y)&&i.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(y){var b=0,w=r,S="",k=0;for(b=0;b<y.length;b+=1)w[y.charCodeAt(b)]!==void 0?(k++,typeof(w=w[y.charCodeAt(b)])=="number"&&(S+=String.fromCharCode(w),w=r,k=0),b===y.length-1&&(w=r,S+=y.charAt(b-(k-1)),b-=k-1,k=0)):(w=r,S+=y.charAt(b-k),b-=k,k=0);return S};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(y,b,w){return a(y)?s(y)===!1?-1:!u(y)||!a(b)&&!a(w)||!a(w)&&o(b)||o(y)&&!a(b)||o(y)&&l(b)||o(y)&&o(b)?0:h(y)&&a(b)&&!o(b)&&a(w)&&u(w)?3:o(y)||!a(w)?1:2:-1},f=function(y){var b=0,w=0,S=0,k="",R="",q="",K=(y=y||"").split("\\s+"),E=[];for(b=0;b<K.length;b+=1){for(E.push(""),w=0;w<K[b].length;w+=1)k=K[b][w],R=K[b][w-1],q=K[b][w+1],a(k)?(S=p(k,R,q),E[b]+=S!==-1?String.fromCharCode(e[k.charCodeAt(0)][S]):k):E[b]+=k;E[b]=d(E[b])}return E.join(" ")},v=t.__arabicParser__.processArabic=t.processArabic=function(){var y,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(b)){var S=0;for(w=[],S=0;S<b.length;S+=1)Array.isArray(b[S])?w.push([f(b[S][0]),b[S][1],b[S][2]]):w.push([f(b[S])]);y=w}else y=f(b);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",v])}(ir.API),ir.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ir.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(y){v=y}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){n.call(this);var h=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,f=0,v=0,y=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=u.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(k,R){return k.concat(b.splitTextToSize(R,w))},[])):l=Array.isArray(l)?l:[l];for(var S=0;S<l.length;S++)f<(y=this.getStringUnitWidth(l[S],{font:d})*h)&&(f=y);return f!==0&&(v=l.length),{w:f/=p,h:Math.max((v*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,f&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,h,d,p){if(n.call(this),!h)throw new Error("No data for PDF table.");var f,v,y,b,w=[],S=[],k=[],R={},q={},K=[],E=[],C=(p=p||{}).autoSize||!1,A=p.printHeaders!==!1,D=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,N=p.margins||Object.assign({width:this.getPageWidth()},e),j=typeof p.padding=="number"?p.padding:3,P=p.headerBackgroundColor||"#c8c8c8",se=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=A,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=j,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=se,this.setFontSize(D),d==null)S=w=Object.keys(h[0]),k=w.map(function(){return"left"});else if(Array.isArray(d)&&pn(d[0])==="object")for(w=d.map(function(Ue){return Ue.name}),S=d.map(function(Ue){return Ue.prompt||Ue.name||""}),k=d.map(function(Ue){return Ue.align||"left"}),f=0;f<d.length;f+=1)q[d[f].name]=.7499990551181103*d[f].width;else Array.isArray(d)&&typeof d[0]=="string"&&(S=w=d,k=w.map(function(){return"left"}));if(C||Array.isArray(d)&&typeof d[0]=="string")for(f=0;f<w.length;f+=1){for(R[b=w[f]]=h.map(function(Ue){return Ue[b]}),this.setFont(void 0,"bold"),K.push(this.getTextDimensions(S[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=R[b],this.setFont(void 0,"normal"),y=0;y<v.length;y+=1)K.push(this.getTextDimensions(v[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[b]=Math.max.apply(null,K)+j+j,K=[]}if(A){var ge={};for(f=0;f<w.length;f+=1)ge[w[f]]={},ge[w[f]].text=S[f],ge[w[f]].align=k[f];var ve=o.call(this,ge,q);E=w.map(function(Ue){return new s(l,u,q[Ue],ve,ge[Ue].text,void 0,ge[Ue].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var ye=d.reduce(function(Ue,Ie){return Ue[Ie.name]=Ie.align,Ue},{});for(f=0;f<h.length;f+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:f,data:h[f]},this);var he=o.call(this,h[f],q);for(y=0;y<w.length;y+=1){var _e=h[f][w[y]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:f,col:y,data:_e},this),a.call(this,new s(l,u,q[w[y]],he,_e,f+2,ye[w[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var h=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(f){var v=l[f];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[f]-h-h)},this).map(function(f){return this.getLineHeightFactor()*f.length*d/p+h+h},this).reduce(function(f,v){return Math.max(f,v)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){h=this.internal.__cell__.tableHeaderRow[f].clone(),u&&(h.y=this.internal.__cell__.margins.top||0,p.push(h)),h.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,h),this.setTextColor(v)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(ir.API);var Ck={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ik=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],dv=kk(Ik),Lk=[100,200,300,400,500,600,700,800,900],ZB=kk(Lk);function yx(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Ck[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),i=function(s){return typeof dv[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function iS(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var JB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},sS={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function aS(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function oS(t){return t.trimLeft()}function eU(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function tU(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Qp,lS,cS,Yu,Zp,uS,hS,fS,vx=["times"];function dS(t,e,r,n,i){var s=4,a=mS;switch(i){case ir.API.image_compression.FAST:s=1,a=pS;break;case ir.API.image_compression.MEDIUM:s=6,a=gS;break;case ir.API.image_compression.SLOW:s=9,a=xS}t=function(l,u,h,d){for(var p,f=l.length/u,v=new Uint8Array(l.length+f),y=[rU,pS,mS,gS,xS],b=0;b<f;b+=1){var w=b*u,S=l.subarray(w,w+u);if(d)v.set(d(S,h,p),w+b);else{for(var k=y.length,R=[],q=0;q<k;q+=1)R[q]=y[q](S,h,p);var K=iU(R.concat());v.set(R[K],w+b)}p=S}return v}(t,e,Math.ceil(r*n/8),a);var o=av(t,{level:s});return ir.API.__addimage__.arrayBufferToBinaryString(o)}function rU(t){var e=Array.apply([],t);return e.unshift(0),e}function pS(t,e){var r=t.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var s=t[i-e]||0;n[i+1]=t[i]-s+256&255}return n}function mS(t,e,r){var n=t.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var a=r&&r[s]||0;i[s+1]=t[s]-a+256&255}return i}function gS(t,e,r){var n=t.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var a=t[s-e]||0,o=r&&r[s]||0;i[s+1]=t[s]+256-(a+o>>>1)&255}return i}function xS(t,e,r){var n=t.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var a=nU(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);i[s+1]=t[s]-a+256&255}return i}function nU(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),i=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=i&&n<=s?t:i<=s?e:r}function iU(t){var e=t.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function wx(t,e,r){var n=e*r,i=Math.floor(n/8),s=16-(n-8*i+r),a=(1<<r)-1;return Pk(t,i)>>s&a}function yS(t,e,r,n){var i=r*n,s=Math.floor(i/8),a=16-(i-8*s+n),o=(1<<n)-1,l=(e&o)<<a;(function(u,h,d){if(h+1<u.byteLength)u.setUint16(h,d,!1);else{var p=d>>8&255;u.setUint8(h,p)}})(t,s,Pk(t,s)&~(o<<a)&65535|l)}function Pk(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function sU(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,a=1<<1+(7&i);t[e++],t[e++];var o=null,l=null;s&&(o=e,l=a,e+=3*a);var u=!0,h=[],d=0,p=null,f=0,v=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,v=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];d=t[e++]|t[e++]<<8,p=t[e++],1&y||(p=null),f=y>>2&7,e++;break;case 254:for(;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var b=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,R=t[e++],q=R>>6&1,K=1<<1+(7&R),E=o,C=l,A=!1;R>>7&&(A=!0,E=e,C=K,e+=3*K);var D=e;for(e++;;){var N;if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}h.push({x:b,y:w,width:S,height:k,has_local_palette:A,palette_offset:E,palette_size:C,data_offset:D,data_length:e-D,transparent_index:p,interlaced:!!q,delay:d,disposal:f});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return v},this.frameInfo=function(j){if(j<0||j>=h.length)throw new Error("Frame index out of range.");return h[j]},this.decodeAndBlitFrameBGRA=function(j,P){var se=this.frameInfo(j),ge=se.width*se.height,ve=new Uint8Array(ge);vS(t,se.data_offset,ve,ge);var ye=se.palette_offset,he=se.transparent_index;he===null&&(he=256);var _e=se.width,Ue=r-_e,Ie=_e,L=4*(se.y*r+se.x),O=4*((se.y+se.height)*r+se.x),B=L,z=4*Ue;se.interlaced===!0&&(z+=4*r*7);for(var J=8,fe=0,Se=ve.length;fe<Se;++fe){var Ae=ve[fe];if(Ie===0&&(Ie=_e,(B+=z)>=O&&(z=4*Ue+4*r*(J-1),B=L+(_e+Ue)*(J<<1),J>>=1)),Ae===he)B+=4;else{var Ne=t[ye+3*Ae],Xe=t[ye+3*Ae+1],et=t[ye+3*Ae+2];P[B++]=et,P[B++]=Xe,P[B++]=Ne,P[B++]=255}--Ie}},this.decodeAndBlitFrameRGBA=function(j,P){var se=this.frameInfo(j),ge=se.width*se.height,ve=new Uint8Array(ge);vS(t,se.data_offset,ve,ge);var ye=se.palette_offset,he=se.transparent_index;he===null&&(he=256);var _e=se.width,Ue=r-_e,Ie=_e,L=4*(se.y*r+se.x),O=4*((se.y+se.height)*r+se.x),B=L,z=4*Ue;se.interlaced===!0&&(z+=4*r*7);for(var J=8,fe=0,Se=ve.length;fe<Se;++fe){var Ae=ve[fe];if(Ie===0&&(Ie=_e,(B+=z)>=O&&(z=4*Ue+4*r*(J-1),B=L+(_e+Ue)*(J<<1),J>>=1)),Ae===he)B+=4;else{var Ne=t[ye+3*Ae],Xe=t[ye+3*Ae+1],et=t[ye+3*Ae+2];P[B++]=Ne,P[B++]=Xe,P[B++]=et,P[B++]=255}--Ie}}}function vS(t,e,r,n){for(var i=t[e++],s=1<<i,a=s+1,o=a+1,l=i+1,u=(1<<l)-1,h=0,d=0,p=0,f=t[e++],v=new Int32Array(4096),y=null;;){for(;h<16&&f!==0;)d|=t[e++]<<h,h+=8,f===1?f=t[e++]:--f;if(h<l)break;var b=d&u;if(d>>=l,h-=l,b!==s){if(b===a)break;for(var w=b<o?b:y,S=0,k=w;k>s;)k=v[k]>>8,++S;var R=k;if(p+S+(w!==b?1:0)>n)return void En.log("Warning, gif stream longer than expected.");r[p++]=R;var q=p+=S;for(w!==b&&(r[p++]=R),k=w;S--;)k=v[k],r[--q]=255&k,k>>=8;y!==null&&o<4096&&(v[o++]=y<<8|R,o>=u+1&&l<12&&(++l,u=u<<1|1)),y=b}else o=a+1,u=(1<<(l=i+1))-1,y=null}return p!==n&&En.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function _x(t){var e,r,n,i,s,a=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),h=new Array(64),d=new Array(65535),p=new Array(65535),f=new Array(64),v=new Array(64),y=[],b=0,w=7,S=new Array(64),k=new Array(64),R=new Array(64),q=new Array(256),K=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],j=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ge=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ve(L,O){for(var B=0,z=0,J=new Array,fe=1;fe<=16;fe++){for(var Se=1;Se<=L[fe];Se++)J[O[z]]=[],J[O[z]][0]=B,J[O[z]][1]=fe,z++,B++;B*=2}return J}function ye(L){for(var O=L[0],B=L[1]-1;B>=0;)O&1<<B&&(b|=1<<w),B--,--w<0&&(b==255?(he(255),he(0)):he(b),w=7,b=0)}function he(L){y.push(L)}function _e(L){he(L>>8&255),he(255&L)}function Ue(L,O,B,z,J){for(var fe,Se=J[0],Ae=J[240],Ne=function(de,qe){var Ge,st,yt,Ht,be,tt,ct,St,jt,Rt,Dt=0;for(jt=0;jt<8;++jt){Ge=de[Dt],st=de[Dt+1],yt=de[Dt+2],Ht=de[Dt+3],be=de[Dt+4],tt=de[Dt+5],ct=de[Dt+6];var Hr=Ge+(St=de[Dt+7]),hr=Ge-St,Ke=st+ct,Pt=st-ct,pr=yt+tt,Gt=yt-tt,Ir=Ht+be,Qt=Ht-be,Jt=Hr+Ir,Ur=Hr-Ir,Wt=Ke+pr,Ye=Ke-pr;de[Dt]=Jt+Wt,de[Dt+4]=Jt-Wt;var Tt=.707106781*(Ye+Ur);de[Dt+2]=Ur+Tt,de[Dt+6]=Ur-Tt;var sn=.382683433*((Jt=Qt+Gt)-(Ye=Pt+hr)),br=.5411961*Jt+sn,xr=1.306562965*Ye+sn,jn=.707106781*(Wt=Gt+Pt),Zt=hr+jn,zn=hr-jn;de[Dt+5]=zn+br,de[Dt+3]=zn-br,de[Dt+1]=Zt+xr,de[Dt+7]=Zt-xr,Dt+=8}for(Dt=0,jt=0;jt<8;++jt){Ge=de[Dt],st=de[Dt+8],yt=de[Dt+16],Ht=de[Dt+24],be=de[Dt+32],tt=de[Dt+40],ct=de[Dt+48];var en=Ge+(St=de[Dt+56]),an=Ge-St,Nn=st+ct,Fr=st-ct,Qr=yt+tt,W=yt-tt,ie=Ht+be,ee=Ht-be,ne=en+ie,oe=en-ie,le=Nn+Qr,De=Nn-Qr;de[Dt]=ne+le,de[Dt+32]=ne-le;var Te=.707106781*(De+oe);de[Dt+16]=oe+Te,de[Dt+48]=oe-Te;var Re=.382683433*((ne=ee+W)-(De=Fr+an)),Me=.5411961*ne+Re,Oe=1.306562965*De+Re,ht=.707106781*(le=W+Fr),gt=an+ht,kt=an-ht;de[Dt+40]=kt+Me,de[Dt+24]=kt-Me,de[Dt+8]=gt+Oe,de[Dt+56]=gt-Oe,Dt++}for(jt=0;jt<64;++jt)Rt=de[jt]*qe[jt],f[jt]=Rt>0?Rt+.5|0:Rt-.5|0;return f}(L,O),Xe=0;Xe<64;++Xe)v[E[Xe]]=Ne[Xe];var et=v[0]-B;B=v[0],et==0?ye(z[0]):(ye(z[p[fe=32767+et]]),ye(d[fe]));for(var ot=63;ot>0&&v[ot]==0;)ot--;if(ot==0)return ye(Se),B;for(var mt,te=1;te<=ot;){for(var ke=te;v[te]==0&&te<=ot;)++te;var X=te-ke;if(X>=16){mt=X>>4;for(var me=1;me<=mt;++me)ye(Ae);X&=15}fe=32767+v[te],ye(J[(X<<4)+p[fe]]),ye(d[fe]),te++}return ot!=63&&ye(Se),B}function Ie(L){L=Math.min(Math.max(L,1),100),s!=L&&(function(O){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],z=0;z<64;z++){var J=a((B[z]*O+50)/100);J=Math.min(Math.max(J,1),255),o[E[z]]=J}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Se=0;Se<64;Se++){var Ae=a((fe[Se]*O+50)/100);Ae=Math.min(Math.max(Ae,1),255),l[E[Se]]=Ae}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Xe=0,et=0;et<8;et++)for(var ot=0;ot<8;ot++)u[Xe]=1/(o[E[Xe]]*Ne[et]*Ne[ot]*8),h[Xe]=1/(l[E[Xe]]*Ne[et]*Ne[ot]*8),Xe++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),s=L)}this.encode=function(L,O){O&&Ie(O),y=new Array,b=0,w=7,_e(65496),_e(65504),_e(16),he(74),he(70),he(73),he(70),he(0),he(1),he(1),he(0),_e(1),_e(1),he(0),he(0),function(){_e(65499),_e(132),he(0);for(var st=0;st<64;st++)he(o[st]);he(1);for(var yt=0;yt<64;yt++)he(l[yt])}(),function(st,yt){_e(65472),_e(17),he(8),_e(yt),_e(st),he(3),he(1),he(17),he(0),he(2),he(17),he(1),he(3),he(17),he(1)}(L.width,L.height),function(){_e(65476),_e(418),he(0);for(var st=0;st<16;st++)he(C[st+1]);for(var yt=0;yt<=11;yt++)he(A[yt]);he(16);for(var Ht=0;Ht<16;Ht++)he(D[Ht+1]);for(var be=0;be<=161;be++)he(N[be]);he(1);for(var tt=0;tt<16;tt++)he(j[tt+1]);for(var ct=0;ct<=11;ct++)he(P[ct]);he(17);for(var St=0;St<16;St++)he(se[St+1]);for(var jt=0;jt<=161;jt++)he(ge[jt])}(),_e(65498),_e(12),he(3),he(1),he(0),he(2),he(17),he(3),he(17),he(0),he(63),he(0);var B=0,z=0,J=0;b=0,w=7,this.encode.displayName="_encode_";for(var fe,Se,Ae,Ne,Xe,et,ot,mt,te,ke=L.data,X=L.width,me=L.height,de=4*X,qe=0;qe<me;){for(fe=0;fe<de;){for(Xe=de*qe+fe,ot=-1,mt=0,te=0;te<64;te++)et=Xe+(mt=te>>3)*de+(ot=4*(7&te)),qe+mt>=me&&(et-=de*(qe+1+mt-me)),fe+ot>=de&&(et-=fe+ot-de+4),Se=ke[et++],Ae=ke[et++],Ne=ke[et++],S[te]=(K[Se]+K[Ae+256|0]+K[Ne+512|0]>>16)-128,k[te]=(K[Se+768|0]+K[Ae+1024|0]+K[Ne+1280|0]>>16)-128,R[te]=(K[Se+1280|0]+K[Ae+1536|0]+K[Ne+1792|0]>>16)-128;B=Ue(S,u,B,e,n),z=Ue(k,h,z,r,i),J=Ue(R,h,J,r,i),fe+=32}qe+=8}if(w>=0){var Ge=[];Ge[1]=w+1,Ge[0]=(1<<w+1)-1,ye(Ge)}return _e(65497),new Uint8Array(y)},t=t||50,function(){for(var L=String.fromCharCode,O=0;O<256;O++)q[O]=L(O)}(),e=ve(C,A),r=ve(j,P),n=ve(D,N),i=ve(se,ge),function(){for(var L=1,O=2,B=1;B<=15;B++){for(var z=L;z<O;z++)p[32767+z]=B,d[32767+z]=[],d[32767+z][1]=B,d[32767+z][0]=z;for(var J=-(O-1);J<=-L;J++)p[32767+J]=B,d[32767+J]=[],d[32767+J][1]=B,d[32767+J][0]=O-1+J;L<<=1,O<<=1}}(),function(){for(var L=0;L<256;L++)K[L]=19595*L,K[L+256|0]=38470*L,K[L+512|0]=7471*L+32768,K[L+768|0]=-11059*L,K[L+1024|0]=-21709*L,K[L+1280|0]=32768*L+8421375,K[L+1536|0]=-27439*L,K[L+1792|0]=-5329*L}(),Ie(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function so(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function wS(t){function e(A){if(!A)throw Error("assert :P")}function r(A,D,N){for(var j=0;4>j;j++)if(A[D+j]!=N.charCodeAt(j))return!0;return!1}function n(A,D,N,j,P){for(var se=0;se<P;se++)A[D+se]=N[j+se]}function i(A,D,N,j){for(var P=0;P<j;P++)A[D+P]=N}function s(A){return new Int32Array(A)}function a(A,D){for(var N=[],j=0;j<A;j++)N.push(new D);return N}function o(A,D){var N=[];return function j(P,se,ge){for(var ve=ge[se],ye=0;ye<ve&&(P.push(ge.length>se+1?[]:new D),!(ge.length<se+1));ye++)j(P[ye],se+1,ge)}(N,0,A),N}var l=function(){var A=this;function D(m,x){for(var T=1<<x-1>>>0;m&T;)T>>>=1;return T?(m&T-1)+T:m}function N(m,x,T,F,H){e(!(F%T));do m[x+(F-=T)]=H;while(0<F)}function j(m,x,T,F,H){if(e(2328>=H),512>=H)var G=s(512);else if((G=s(H))==null)return 0;return function(Y,Q,re,ce,Ce,He){var ue,Le,Be=Q,Je=1<<re,ze=s(16),rt=s(16);for(e(Ce!=0),e(ce!=null),e(Y!=null),e(0<re),Le=0;Le<Ce;++Le){if(15<ce[Le])return 0;++ze[ce[Le]]}if(ze[0]==Ce)return 0;for(rt[1]=0,ue=1;15>ue;++ue){if(ze[ue]>1<<ue)return 0;rt[ue+1]=rt[ue]+ze[ue]}for(Le=0;Le<Ce;++Le)ue=ce[Le],0<ce[Le]&&(He[rt[ue]++]=Le);if(rt[15]==1)return(ce=new P).g=0,ce.value=He[0],N(Y,Be,1,Je,ce),Je;var at,xt=-1,dt=Je-1,rr=0,$t=1,Ar=1,Yt=1<<re;for(Le=0,ue=1,Ce=2;ue<=re;++ue,Ce<<=1){if($t+=Ar<<=1,0>(Ar-=ze[ue]))return 0;for(;0<ze[ue];--ze[ue])(ce=new P).g=ue,ce.value=He[Le++],N(Y,Be+rr,Ce,Yt,ce),rr=D(rr,ue)}for(ue=re+1,Ce=2;15>=ue;++ue,Ce<<=1){if($t+=Ar<<=1,0>(Ar-=ze[ue]))return 0;for(;0<ze[ue];--ze[ue]){if(ce=new P,(rr&dt)!=xt){for(Be+=Yt,at=1<<(xt=ue)-re;15>xt&&!(0>=(at-=ze[xt]));)++xt,at<<=1;Je+=Yt=1<<(at=xt-re),Y[Q+(xt=rr&dt)].g=at+re,Y[Q+xt].value=Be-Q-xt}ce.g=ue-re,ce.value=He[Le++],N(Y,Be+(rr>>re),Ce,Yt,ce),rr=D(rr,ue)}}return $t!=2*rt[15]-1?0:Je}(m,x,T,F,H,G)}function P(){this.value=this.g=0}function se(){this.value=this.g=0}function ge(){this.G=a(5,P),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Kc,se)}function ve(m,x,T,F){e(m!=null),e(x!=null),e(2147483648>F),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=x,m.pa=T,m.Jd=x,m.Yc=T+F,m.Zc=4<=F?T+F-4+1:T,Se(m)}function ye(m,x){for(var T=0;0<x--;)T|=Ne(m,128)<<x;return T}function he(m,x){var T=ye(m,x);return Ae(m)?-T:T}function _e(m,x,T,F){var H,G=0;for(e(m!=null),e(x!=null),e(4294967288>F),m.Sb=F,m.Ra=0,m.u=0,m.h=0,4<F&&(F=4),H=0;H<F;++H)G+=x[T+H]<<8*H;m.Ra=G,m.bb=F,m.oa=x,m.pa=T}function Ue(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<Ml-8>>>0,++m.bb,m.u-=8;z(m)&&(m.h=1,m.u=0)}function Ie(m,x){if(e(0<=x),!m.h&&x<=ia){var T=B(m)&na[x];return m.u+=x,Ue(m),T}return m.h=1,m.u=0}function L(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(m){return m.Ra>>>(m.u&Ml-1)>>>0}function z(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>Ml}function J(m,x){m.u=x,m.h=z(m)}function fe(m){m.u>=Jo&&(e(m.u>=Jo),Ue(m))}function Se(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function Ae(m){return ye(m,1)}function Ne(m,x){var T=m.Ca;0>m.b&&Se(m);var F=m.b,H=T*x>>>8,G=(m.I>>>F>H)+0;for(G?(T-=H,m.I-=H+1<<F>>>0):T=H+1,F=T,H=0;256<=F;)H+=8,F>>=8;return F=7^H+Ol[F],m.b-=F,m.Ca=(T<<F)-1,G}function Xe(m,x,T){m[x+0]=T>>24&255,m[x+1]=T>>16&255,m[x+2]=T>>8&255,m[x+3]=255&T}function et(m,x){return m[x+0]|m[x+1]<<8}function ot(m,x){return et(m,x)|m[x+2]<<16}function mt(m,x){return et(m,x)|et(m,x+2)<<16}function te(m,x){var T=1<<x;return e(m!=null),e(0<x),m.X=s(T),m.X==null?0:(m.Mb=32-x,m.Xa=x,1)}function ke(m,x){e(m!=null),e(x!=null),e(m.Xa==x.Xa),n(x.X,0,m.X,0,1<<x.Xa)}function X(){this.X=[],this.Xa=this.Mb=0}function me(m,x,T,F){e(T!=null),e(F!=null);var H=T[0],G=F[0];return H==0&&(H=(m*G+x/2)/x),G==0&&(G=(x*H+m/2)/m),0>=H||0>=G?0:(T[0]=H,F[0]=G,1)}function de(m,x){return m+(1<<x)-1>>>x}function qe(m,x){return((4278255360&m)+(4278255360&x)>>>0&4278255360)+((16711935&m)+(16711935&x)>>>0&16711935)>>>0}function Ge(m,x){A[x]=function(T,F,H,G,Y,Q,re){var ce;for(ce=0;ce<Y;++ce){var Ce=A[m](Q[re+ce-1],H,G+ce);Q[re+ce]=qe(T[F+ce],Ce)}}}function st(){this.ud=this.hd=this.jd=0}function yt(m,x){return((4278124286&(m^x))>>>1)+(m&x)>>>0}function Ht(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function be(m,x){return Ht(m+(m-x+.5>>1))}function tt(m,x,T){return Math.abs(x-T)-Math.abs(m-T)}function ct(m,x,T,F,H,G,Y){for(F=G[Y-1],T=0;T<H;++T)G[Y+T]=F=qe(m[x+T],F)}function St(m,x,T,F,H){var G;for(G=0;G<T;++G){var Y=m[x+G],Q=Y>>8&255,re=16711935&(re=(re=16711935&Y)+((Q<<16)+Q));F[H+G]=(4278255360&Y)+re>>>0}}function jt(m,x){x.jd=255&m,x.hd=m>>8&255,x.ud=m>>16&255}function Rt(m,x,T,F,H,G){var Y;for(Y=0;Y<F;++Y){var Q=x[T+Y],re=Q>>>8,ce=Q,Ce=255&(Ce=(Ce=Q>>>16)+((m.jd<<24>>24)*(re<<24>>24)>>>5));ce=255&(ce=(ce+=(m.hd<<24>>24)*(re<<24>>24)>>>5)+((m.ud<<24>>24)*(Ce<<24>>24)>>>5)),H[G+Y]=(4278255360&Q)+(Ce<<16)+ce}}function Dt(m,x,T,F,H){A[x]=function(G,Y,Q,re,ce,Ce,He,ue,Le){for(re=He;re<ue;++re)for(He=0;He<Le;++He)ce[Ce++]=H(Q[F(G[Y++])])},A[m]=function(G,Y,Q,re,ce,Ce,He){var ue=8>>G.b,Le=G.Ea,Be=G.K[0],Je=G.w;if(8>ue)for(G=(1<<G.b)-1,Je=(1<<ue)-1;Y<Q;++Y){var ze,rt=0;for(ze=0;ze<Le;++ze)ze&G||(rt=F(re[ce++])),Ce[He++]=H(Be[rt&Je]),rt>>=ue}else A["VP8LMapColor"+T](re,ce,Be,Je,Ce,He,Y,Q,Le)}}function Hr(m,x,T,F,H){for(T=x+T;x<T;){var G=m[x++];F[H++]=G>>16&255,F[H++]=G>>8&255,F[H++]=255&G}}function hr(m,x,T,F,H){for(T=x+T;x<T;){var G=m[x++];F[H++]=G>>16&255,F[H++]=G>>8&255,F[H++]=255&G,F[H++]=G>>24&255}}function Ke(m,x,T,F,H){for(T=x+T;x<T;){var G=(Y=m[x++])>>16&240|Y>>12&15,Y=240&Y|Y>>28&15;F[H++]=G,F[H++]=Y}}function Pt(m,x,T,F,H){for(T=x+T;x<T;){var G=(Y=m[x++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;F[H++]=G,F[H++]=Y}}function pr(m,x,T,F,H){for(T=x+T;x<T;){var G=m[x++];F[H++]=255&G,F[H++]=G>>8&255,F[H++]=G>>16&255}}function Gt(m,x,T,F,H,G){if(G==0)for(T=x+T;x<T;)Xe(F,((G=m[x++])[0]>>24|G[1]>>8&65280|G[2]<<8&16711680|G[3]<<24)>>>0),H+=32;else n(F,H,m,x,T)}function Ir(m,x){A[x][0]=A[m+"0"],A[x][1]=A[m+"1"],A[x][2]=A[m+"2"],A[x][3]=A[m+"3"],A[x][4]=A[m+"4"],A[x][5]=A[m+"5"],A[x][6]=A[m+"6"],A[x][7]=A[m+"7"],A[x][8]=A[m+"8"],A[x][9]=A[m+"9"],A[x][10]=A[m+"10"],A[x][11]=A[m+"11"],A[x][12]=A[m+"12"],A[x][13]=A[m+"13"],A[x][14]=A[m+"0"],A[x][15]=A[m+"0"]}function Qt(m){return m==e2||m==t2||m==cp||m==r2}function Jt(){this.eb=[],this.size=this.A=this.fb=0}function Ur(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Jt,this.f.kb=new Ur,this.sd=null}function Ye(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Tt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function sn(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function br(m,x){var T=m.T,F=x.ba.f.RGBA,H=F.eb,G=F.fb+m.ka*F.A,Y=Ba[x.ba.S],Q=m.y,re=m.O,ce=m.f,Ce=m.N,He=m.ea,ue=m.W,Le=x.cc,Be=x.dc,Je=x.Mc,ze=x.Nc,rt=m.ka,at=m.ka+m.T,xt=m.U,dt=xt+1>>1;for(rt==0?Y(Q,re,null,null,ce,Ce,He,ue,ce,Ce,He,ue,H,G,null,null,xt):(Y(x.ec,x.fc,Q,re,Le,Be,Je,ze,ce,Ce,He,ue,H,G-F.A,H,G,xt),++T);rt+2<at;rt+=2)Le=ce,Be=Ce,Je=He,ze=ue,Ce+=m.Rc,ue+=m.Rc,G+=2*F.A,Y(Q,(re+=2*m.fa)-m.fa,Q,re,Le,Be,Je,ze,ce,Ce,He,ue,H,G-F.A,H,G,xt);return re+=m.fa,m.j+at<m.o?(n(x.ec,x.fc,Q,re,xt),n(x.cc,x.dc,ce,Ce,dt),n(x.Mc,x.Nc,He,ue,dt),T--):1&at||Y(Q,re,null,null,ce,Ce,He,ue,ce,Ce,He,ue,H,G+F.A,null,null,xt),T}function xr(m,x,T){var F=m.F,H=[m.J];if(F!=null){var G=m.U,Y=x.ba.S,Q=Y==lp||Y==cp;x=x.ba.f.RGBA;var re=[0],ce=m.ka;re[0]=m.T,m.Kb&&(ce==0?--re[0]:(--ce,H[0]-=m.width),m.j+m.ka+m.T==m.o&&(re[0]=m.o-m.j-ce));var Ce=x.eb;ce=x.fb+ce*x.A,m=Gw(F,H[0],m.width,G,re,Ce,ce+(Q?0:3),x.A),e(T==re),m&&Qt(Y)&&Mf(Ce,ce,Q,G,re,x.A)}return 0}function jn(m){var x=m.ma,T=x.ba.S,F=11>T,H=T==ap||T==op||T==lp||T==Jg||T==12||Qt(T);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!Cf(x.Oa,m,H?11:12))return 0;if(H&&Qt(T)&&mr(),m.da)alert("todo:use_scaling");else{if(F){if(x.Ib=sn,m.Kb){if(T=m.U+1>>1,x.memory=s(m.U+2*T),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+m.U,x.Mc=x.cc,x.Nc=x.dc+T,x.Ib=br,mr()}}else alert("todo:EmitYUV");H&&(x.Jb=xr,F&&We())}if(F&&!u_){for(m=0;256>m;++m)iI[m]=89858*(m-128)+hp>>up,oI[m]=-22014*(m-128)+hp,aI[m]=-45773*(m-128),sI[m]=113618*(m-128)+hp>>up;for(m=Bf;m<s2;++m)x=76283*(m-16)+hp>>up,lI[m-Bf]=Tn(x,255),cI[m-Bf]=Tn(x+8>>4,15);u_=1}return 1}function Zt(m){var x=m.ma,T=m.U,F=m.T;return e(!(1&m.ka)),0>=T||0>=F?0:(T=x.Ib(m,x),x.Jb!=null&&x.Jb(m,x,T),x.Dc+=T,1)}function zn(m){m.ma.memory=null}function en(m,x,T,F){return Ie(m,8)!=47?0:(x[0]=Ie(m,14)+1,T[0]=Ie(m,14)+1,F[0]=Ie(m,1),Ie(m,3)!=0?0:!m.h)}function an(m,x){if(4>m)return m+1;var T=m-2>>1;return(2+(1&m)<<T)+Ie(x,T)+1}function Nn(m,x){return 120<x?x-120:1<=(T=((T=q8[x-1])>>4)*m+(8-(15&T)))?T:1;var T}function Fr(m,x,T){var F=B(T),H=m[x+=255&F].g-8;return 0<H&&(J(T,T.u+8),F=B(T),x+=m[x].value,x+=F&(1<<H)-1),J(T,T.u+m[x].g),m[x].value}function Qr(m,x,T){return T.g+=m.g,T.value+=m.value<<x>>>0,e(8>=T.g),m.g}function W(m,x,T){var F=m.xc;return e((x=F==0?0:m.vc[m.md*(T>>F)+(x>>F)])<m.Wb),m.Ya[x]}function ie(m,x,T,F){var H=m.ab,G=m.c*x,Y=m.C;x=Y+x;var Q=T,re=F;for(F=m.Ta,T=m.Ua;0<H--;){var ce=m.gc[H],Ce=Y,He=x,ue=Q,Le=re,Be=(re=F,Q=T,ce.Ea);switch(e(Ce<He),e(He<=ce.nc),ce.hc){case 2:ui(ue,Le,(He-Ce)*Be,re,Q);break;case 0:var Je=Ce,ze=He,rt=re,at=Q,xt=(Yt=ce).Ea;Je==0&&(Lf(ue,Le,null,null,1,rt,at),ct(ue,Le+1,0,0,xt-1,rt,at+1),Le+=xt,at+=xt,++Je);for(var dt=1<<Yt.b,rr=dt-1,$t=de(xt,Yt.b),Ar=Yt.K,Yt=Yt.w+(Je>>Yt.b)*$t;Je<ze;){var Vr=Ar,Li=Yt,Er=1;for(zu(ue,Le,rt,at-xt,1,rt,at);Er<xt;){var Xt=(Er&~rr)+dt;Xt>xt&&(Xt=xt),(0,jf[Vr[Li++]>>8&15])(ue,Le+ +Er,rt,at+Er-xt,Xt-Er,rt,at+Er),Er=Xt}Le+=xt,at+=xt,++Je&rr||(Yt+=$t)}He!=ce.nc&&n(re,Q-Be,re,Q+(He-Ce-1)*Be,Be);break;case 1:for(Be=ue,ze=Le,xt=(ue=ce.Ea)-(at=ue&~(rt=(Le=1<<ce.b)-1)),Je=de(ue,ce.b),dt=ce.K,ce=ce.w+(Ce>>ce.b)*Je;Ce<He;){for(rr=dt,$t=ce,Ar=new st,Yt=ze+at,Vr=ze+ue;ze<Yt;)jt(rr[$t++],Ar),Rf(Ar,Be,ze,Le,re,Q),ze+=Le,Q+=Le;ze<Vr&&(jt(rr[$t++],Ar),Rf(Ar,Be,ze,xt,re,Q),ze+=xt,Q+=xt),++Ce&rt||(ce+=Je)}break;case 3:if(ue==re&&Le==Q&&0<ce.b){for(ze=re,ue=Be=Q+(He-Ce)*Be-(at=(He-Ce)*de(ce.Ea,ce.b)),Le=re,rt=Q,Je=[],at=(xt=at)-1;0<=at;--at)Je[at]=Le[rt+at];for(at=xt-1;0<=at;--at)ze[ue+at]=Je[at];rp(ce,Ce,He,re,Be,re,Q)}else rp(ce,Ce,He,ue,Le,re,Q)}Q=F,re=T}re!=T&&n(F,T,Q,re,G)}function ee(m,x){var T=m.V,F=m.Ba+m.c*m.C,H=x-m.C;if(e(x<=m.l.o),e(16>=H),0<H){var G=m.l,Y=m.Ta,Q=m.Ua,re=G.width;if(ie(m,H,T,F),H=Q=[Q],e((T=m.C)<(F=x)),e(G.v<G.va),F>G.o&&(F=G.o),T<G.j){var ce=G.j-T;T=G.j,H[0]+=ce*re}if(T>=F?T=0:(H[0]+=4*G.v,G.ka=T-G.j,G.U=G.va-G.v,G.T=F-T,T=1),T){if(Q=Q[0],11>(T=m.ca).S){var Ce=T.f.RGBA,He=(F=T.S,H=G.U,G=G.T,ce=Ce.eb,Ce.A),ue=G;for(Ce=Ce.fb+m.Ma*Ce.A;0<ue--;){var Le=Y,Be=Q,Je=H,ze=ce,rt=Ce;switch(F){case sp:Ff(Le,Be,Je,ze,rt);break;case ap:Bl(Le,Be,Je,ze,rt);break;case e2:Bl(Le,Be,Je,ze,rt),Mf(ze,rt,0,Je,1,0);break;case t_:Gc(Le,Be,Je,ze,rt);break;case op:Gt(Le,Be,Je,ze,rt,1);break;case t2:Gt(Le,Be,Je,ze,rt,1),Mf(ze,rt,0,Je,1,0);break;case lp:Gt(Le,Be,Je,ze,rt,0);break;case cp:Gt(Le,Be,Je,ze,rt,0),Mf(ze,rt,1,Je,1,0);break;case Jg:Ul(Le,Be,Je,ze,rt);break;case r2:Ul(Le,Be,Je,ze,rt),Kw(ze,rt,Je,1,0);break;case r_:Vl(Le,Be,Je,ze,rt);break;default:e(0)}Q+=re,Ce+=He}m.Ma+=G}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=T.height)}}m.C=x,e(m.C<=m.i)}function ne(m){var x;if(0<m.ua)return 0;for(x=0;x<m.Wb;++x){var T=m.Ya[x].G,F=m.Ya[x].H;if(0<T[1][F[1]+0].g||0<T[2][F[2]+0].g||0<T[3][F[3]+0].g)return 0}return 1}function oe(m,x,T,F,H,G){if(m.Z!=0){var Y=m.qd,Q=m.rd;for(e(ql[m.Z]!=null);x<T;++x)ql[m.Z](Y,Q,F,H,F,H,G),Y=F,Q=H,H+=G;m.qd=Y,m.rd=Q}}function le(m,x){var T=m.l.ma,F=T.Z==0||T.Z==1?m.l.j:m.C;if(F=m.C<F?F:m.C,e(x<=m.l.o),x>F){var H=m.l.width,G=T.ca,Y=T.tb+H*F,Q=m.V,re=m.Ba+m.c*F,ce=m.gc;e(m.ab==1),e(ce[0].hc==3),To(ce[0],F,x,Q,re,G,Y),oe(T,F,x,G,Y,H)}m.C=m.Ma=x}function De(m,x,T,F,H,G,Y){var Q=m.$/F,re=m.$%F,ce=m.m,Ce=m.s,He=T+m.$,ue=He;H=T+F*H;var Le=T+F*G,Be=280+Ce.ua,Je=m.Pb?Q:16777216,ze=0<Ce.ua?Ce.Wa:null,rt=Ce.wc,at=He<Le?W(Ce,re,Q):null;e(m.C<G),e(Le<=H);var xt=!1;e:for(;;){for(;xt||He<Le;){var dt=0;if(Q>=Je){var rr=He-T;e((Je=m).Pb),Je.wd=Je.m,Je.xd=rr,0<Je.s.ua&&ke(Je.s.Wa,Je.s.vb),Je=Q+W8}if(re&rt||(at=W(Ce,re,Q)),e(at!=null),at.Qb&&(x[He]=at.qb,xt=!0),!xt)if(fe(ce),at.jc){dt=ce,rr=x;var $t=He,Ar=at.pd[B(dt)&Kc-1];e(at.jc),256>Ar.g?(J(dt,dt.u+Ar.g),rr[$t]=Ar.value,dt=0):(J(dt,dt.u+Ar.g-256),e(256<=Ar.value),dt=Ar.value),dt==0&&(xt=!0)}else dt=Fr(at.G[0],at.H[0],ce);if(ce.h)break;if(xt||256>dt){if(!xt)if(at.nd)x[He]=(at.qb|dt<<8)>>>0;else{if(fe(ce),xt=Fr(at.G[1],at.H[1],ce),fe(ce),rr=Fr(at.G[2],at.H[2],ce),$t=Fr(at.G[3],at.H[3],ce),ce.h)break;x[He]=($t<<24|xt<<16|dt<<8|rr)>>>0}if(xt=!1,++He,++re>=F&&(re=0,++Q,Y!=null&&Q<=G&&!(Q%16)&&Y(m,Q),ze!=null))for(;ue<He;)dt=x[ue++],ze.X[(506832829*dt&4294967295)>>>ze.Mb]=dt}else if(280>dt){if(dt=an(dt-256,ce),rr=Fr(at.G[4],at.H[4],ce),fe(ce),rr=Nn(F,rr=an(rr,ce)),ce.h)break;if(He-T<rr||H-He<dt)break e;for($t=0;$t<dt;++$t)x[He+$t]=x[He+$t-rr];for(He+=dt,re+=dt;re>=F;)re-=F,++Q,Y!=null&&Q<=G&&!(Q%16)&&Y(m,Q);if(e(He<=H),re&rt&&(at=W(Ce,re,Q)),ze!=null)for(;ue<He;)dt=x[ue++],ze.X[(506832829*dt&4294967295)>>>ze.Mb]=dt}else{if(!(dt<Be))break e;for(xt=dt-280,e(ze!=null);ue<He;)dt=x[ue++],ze.X[(506832829*dt&4294967295)>>>ze.Mb]=dt;dt=He,e(!(xt>>>(rr=ze).Xa)),x[dt]=rr.X[xt],xt=!0}xt||e(ce.h==z(ce))}if(m.Pb&&ce.h&&He<H)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&ke(m.s.vb,m.s.Wa);else{if(ce.h)break e;Y!=null&&Y(m,Q>G?G:Q),m.a=0,m.$=He-T}return 1}return m.a=3,0}function Te(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var x=m.Wa;x!=null&&(x.X=null),m.vb=null,e(m!=null)}function Re(){var m=new _t;return m==null?null:(m.a=0,m.xb=s_,Ir("Predictor","VP8LPredictors"),Ir("Predictor","VP8LPredictors_C"),Ir("PredictorAdd","VP8LPredictorsAdd"),Ir("PredictorAdd","VP8LPredictorsAdd_C"),ui=St,Rf=Rt,Ff=Hr,Bl=hr,Ul=Ke,Vl=Pt,Gc=pr,A.VP8LMapColor32b=No,A.VP8LMapColor8b=Pf,m)}function Me(m,x,T,F,H){var G=1,Y=[m],Q=[x],re=F.m,ce=F.s,Ce=null,He=0;e:for(;;){if(T)for(;G&&Ie(re,1);){var ue=Y,Le=Q,Be=F,Je=1,ze=Be.m,rt=Be.gc[Be.ab],at=Ie(ze,2);if(Be.Oc&1<<at)G=0;else{switch(Be.Oc|=1<<at,rt.hc=at,rt.Ea=ue[0],rt.nc=Le[0],rt.K=[null],++Be.ab,e(4>=Be.ab),at){case 0:case 1:rt.b=Ie(ze,3)+2,Je=Me(de(rt.Ea,rt.b),de(rt.nc,rt.b),0,Be,rt.K),rt.K=rt.K[0];break;case 3:var xt,dt=Ie(ze,8)+1,rr=16<dt?0:4<dt?1:2<dt?2:3;if(ue[0]=de(rt.Ea,rr),rt.b=rr,xt=Je=Me(dt,1,0,Be,rt.K)){var $t,Ar=dt,Yt=rt,Vr=1<<(8>>Yt.b),Li=s(Vr);if(Li==null)xt=0;else{var Er=Yt.K[0],Xt=Yt.w;for(Li[0]=Yt.K[0][0],$t=1;$t<1*Ar;++$t)Li[$t]=qe(Er[Xt+$t],Li[$t-1]);for(;$t<4*Vr;++$t)Li[$t]=0;Yt.K[0]=null,Yt.K[0]=Li,xt=1}}Je=xt;break;case 2:break;default:e(0)}G=Je}}if(Y=Y[0],Q=Q[0],G&&Ie(re,1)&&!(G=1<=(He=Ie(re,4))&&11>=He)){F.a=3;break e}var Lt;if(Lt=G)t:{var fi,wr,qr,Rn=F,Gi=Y,Is=Q,ri=He,ps=T,Ls=Rn.m,Pi=Rn.s,Yr=[null],cn=1,ni=0,un=$8[ri];r:for(;;){if(ps&&Ie(Ls,1)){var Yi=Ie(Ls,3)+2,ro=de(Gi,Yi),di=de(Is,Yi),qs=ro*di;if(!Me(ro,di,0,Rn,Yr))break r;for(Yr=Yr[0],Pi.xc=Yi,fi=0;fi<qs;++fi){var An=Yr[fi]>>8&65535;Yr[fi]=An,An>=cn&&(cn=An+1)}}if(Ls.h)break r;for(wr=0;5>wr;++wr){var ji=n_[wr];!wr&&0<ri&&(ji+=1<<ri),ni<ji&&(ni=ji)}var aa=a(cn*un,P),Ps=cn,oa=a(Ps,ge);if(oa==null)var la=null;else e(65536>=Ps),la=oa;var $s=s(ni);if(la==null||$s==null||aa==null){Rn.a=1;break r}var ca=aa;for(fi=qr=0;fi<cn;++fi){var Ln=la[fi],ua=Ln.G,no=Ln.H,Xc=0,rl=1,Xi=0;for(wr=0;5>wr;++wr){ji=n_[wr],ua[wr]=ca,no[wr]=qr,!wr&&0<ri&&(ji+=1<<ri);i:{var dp,a2=ji,pp=Rn,Uf=$s,fI=ca,dI=qr,o2=0,$l=pp.m,pI=Ie($l,1);if(i(Uf,0,0,a2),pI){var mI=Ie($l,1)+1,gI=Ie($l,1),d_=Ie($l,gI==0?1:8);Uf[d_]=1,mI==2&&(Uf[d_=Ie($l,8)]=1);var mp=1}else{var p_=s(19),m_=Ie($l,4)+4;if(19<m_){pp.a=3;var gp=0;break i}for(dp=0;dp<m_;++dp)p_[H8[dp]]=Ie($l,3);var l2=void 0,Vf=void 0,g_=pp,xI=p_,xp=a2,x_=Uf,c2=0,Wl=g_.m,y_=8,v_=a(128,P);n:for(;j(v_,0,7,xI,19);){if(Ie(Wl,1)){var yI=2+2*Ie(Wl,3);if((l2=2+Ie(Wl,yI))>xp)break n}else l2=xp;for(Vf=0;Vf<xp&&l2--;){fe(Wl);var w_=v_[0+(127&B(Wl))];J(Wl,Wl.u+w_.g);var qu=w_.value;if(16>qu)x_[Vf++]=qu,qu!=0&&(y_=qu);else{var vI=qu==16,__=qu-16,wI=V8[__],b_=Ie(Wl,U8[__])+wI;if(Vf+b_>xp)break n;for(var _I=vI?y_:0;0<b_--;)x_[Vf++]=_I}}c2=1;break n}c2||(g_.a=3),mp=c2}(mp=mp&&!$l.h)&&(o2=j(fI,dI,8,Uf,a2)),mp&&o2!=0?gp=o2:(pp.a=3,gp=0)}if(gp==0)break r;if(rl&&z8[wr]==1&&(rl=ca[qr].g==0),Xc+=ca[qr].g,qr+=gp,3>=wr){var zf,u2=$s[0];for(zf=1;zf<ji;++zf)$s[zf]>u2&&(u2=$s[zf]);Xi+=u2}}if(Ln.nd=rl,Ln.Qb=0,rl&&(Ln.qb=(ua[3][no[3]+0].value<<24|ua[1][no[1]+0].value<<16|ua[2][no[2]+0].value)>>>0,Xc==0&&256>ua[0][no[0]+0].value&&(Ln.Qb=1,Ln.qb+=ua[0][no[0]+0].value<<8)),Ln.jc=!Ln.Qb&&6>Xi,Ln.jc){var yp,nl=Ln;for(yp=0;yp<Kc;++yp){var Kl=yp,Gl=nl.pd[Kl],vp=nl.G[0][nl.H[0]+Kl];256<=vp.value?(Gl.g=vp.g+256,Gl.value=vp.value):(Gl.g=0,Gl.value=0,Kl>>=Qr(vp,8,Gl),Kl>>=Qr(nl.G[1][nl.H[1]+Kl],16,Gl),Kl>>=Qr(nl.G[2][nl.H[2]+Kl],0,Gl),Qr(nl.G[3][nl.H[3]+Kl],24,Gl))}}}Pi.vc=Yr,Pi.Wb=cn,Pi.Ya=la,Pi.yc=aa,Lt=1;break t}Lt=0}if(!(G=Lt)){F.a=3;break e}if(0<He){if(ce.ua=1<<He,!te(ce.Wa,He)){F.a=1,G=0;break e}}else ce.ua=0;var h2=F,S_=Y,bI=Q,f2=h2.s,d2=f2.xc;if(h2.c=S_,h2.i=bI,f2.md=de(S_,d2),f2.wc=d2==0?-1:(1<<d2)-1,T){F.xb=J8;break e}if((Ce=s(Y*Q))==null){F.a=1,G=0;break e}G=(G=De(F,Ce,0,Y,Q,Q,null))&&!re.h;break e}return G?(H!=null?H[0]=Ce:(e(Ce==null),e(T)),F.$=0,T||Te(ce)):Te(ce),G}function Oe(m,x){var T=m.c*m.i,F=T+x+16*x;return e(m.c<=x),m.V=s(F),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+T+x,1)}function ht(m,x){var T=m.C,F=x-T,H=m.V,G=m.Ba+m.c*T;for(e(x<=m.l.o);0<F;){var Y=16<F?16:F,Q=m.l.ma,re=m.l.width,ce=re*Y,Ce=Q.ca,He=Q.tb+re*T,ue=m.Ta,Le=m.Ua;ie(m,Y,H,G),Yw(ue,Le,Ce,He,ce),oe(Q,T,T+Y,Ce,He,re),F-=Y,H+=Y*m.c,T+=Y}e(T==x),m.C=m.Ma=x}function gt(){this.ub=this.yd=this.td=this.Rb=0}function kt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function pt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Et(){this.Yb=function(){var m=[];return function x(T,F,H){for(var G=H[F],Y=0;Y<G&&(T.push(H.length>F+1?[]:0),!(H.length<F+1));Y++)x(T[Y],F+1,H)}(m,0,[3,11]),m}()}function tr(){this.jb=s(3),this.Wc=o([4,8],Et),this.Xc=o([4,17],Et)}function Nr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function yr(){this.ld=this.La=this.dd=this.tc=0}function tn(){this.Na=this.la=0}function Hn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function li(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ci(){this.uc=this.M=this.Nb=0,this.wa=Array(new yr),this.Y=0,this.ya=Array(new li),this.aa=0,this.l=new Gr}function Xn(){this.y=s(16),this.f=s(8),this.ea=s(8)}function on(){this.cb=this.a=0,this.sc="",this.m=new L,this.Od=new gt,this.Kc=new kt,this.ed=new Nr,this.Qa=new pt,this.Ic=this.$c=this.Aa=0,this.D=new ci,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,L),this.ia=0,this.pb=a(4,Hn),this.Pa=new tr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Xn),this.Hd=0,this.rb=Array(new tn),this.sb=0,this.wa=Array(new yr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new li),this.L=this.aa=0,this.gd=o([4,2],yr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Tn(m,x){return 0>m?0:m>x?x:m}function Gr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Lr(){var m=new on;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,Of||(Of=Dr)),m}function _r(m,x,T){return m.a==0&&(m.a=x,m.sc=T,m.cb=0),0}function qn(m,x,T){return 3<=T&&m[x+0]==157&&m[x+1]==1&&m[x+2]==42}function yn(m,x){if(m==null)return 0;if(m.a=0,m.sc="OK",x==null)return _r(m,2,"null VP8Io passed to VP8GetHeaders()");var T=x.data,F=x.w,H=x.ha;if(4>H)return _r(m,7,"Truncated header.");var G=T[F+0]|T[F+1]<<8|T[F+2]<<16,Y=m.Od;if(Y.Rb=!(1&G),Y.td=G>>1&7,Y.yd=G>>4&1,Y.ub=G>>5,3<Y.td)return _r(m,3,"Incorrect keyframe parameters.");if(!Y.yd)return _r(m,4,"Frame not displayable.");F+=3,H-=3;var Q=m.Kc;if(Y.Rb){if(7>H)return _r(m,7,"cannot parse picture header");if(!qn(T,F,H))return _r(m,3,"Bad code word");Q.c=16383&(T[F+4]<<8|T[F+3]),Q.Td=T[F+4]>>6,Q.i=16383&(T[F+6]<<8|T[F+5]),Q.Ud=T[F+6]>>6,F+=7,H-=7,m.za=Q.c+15>>4,m.Ub=Q.i+15>>4,x.width=Q.c,x.height=Q.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,i((G=m.Pa).jb,0,255,G.jb.length),e((G=m.Qa)!=null),G.Cb=0,G.Bb=0,G.Fb=1,i(G.Zb,0,0,G.Zb.length),i(G.Lb,0,0,G.Lb)}if(Y.ub>H)return _r(m,7,"bad partition length");ve(G=m.m,T,F,Y.ub),F+=Y.ub,H-=Y.ub,Y.Rb&&(Q.Ld=Ae(G),Q.Kd=Ae(G)),Q=m.Qa;var re,ce=m.Pa;if(e(G!=null),e(Q!=null),Q.Cb=Ae(G),Q.Cb){if(Q.Bb=Ae(G),Ae(G)){for(Q.Fb=Ae(G),re=0;4>re;++re)Q.Zb[re]=Ae(G)?he(G,7):0;for(re=0;4>re;++re)Q.Lb[re]=Ae(G)?he(G,6):0}if(Q.Bb)for(re=0;3>re;++re)ce.jb[re]=Ae(G)?ye(G,8):255}else Q.Bb=0;if(G.Ka)return _r(m,3,"cannot parse segment header");if((Q=m.ed).zd=Ae(G),Q.Tb=ye(G,6),Q.wb=ye(G,3),Q.Pc=Ae(G),Q.Pc&&Ae(G)){for(ce=0;4>ce;++ce)Ae(G)&&(Q.vd[ce]=he(G,6));for(ce=0;4>ce;++ce)Ae(G)&&(Q.od[ce]=he(G,6))}if(m.L=Q.Tb==0?0:Q.zd?1:2,G.Ka)return _r(m,3,"cannot parse filter header");var Ce=H;if(H=re=F,F=re+Ce,Q=Ce,m.Xb=(1<<ye(m.m,2))-1,Ce<3*(ce=m.Xb))T=7;else{for(re+=3*ce,Q-=3*ce,Ce=0;Ce<ce;++Ce){var He=T[H+0]|T[H+1]<<8|T[H+2]<<16;He>Q&&(He=Q),ve(m.Jc[+Ce],T,re,He),re+=He,Q-=He,H+=3}ve(m.Jc[+ce],T,re,Q),T=re<F?0:5}if(T!=0)return _r(m,T,"cannot parse partitions");for(T=ye(re=m.m,7),H=Ae(re)?he(re,4):0,F=Ae(re)?he(re,4):0,Q=Ae(re)?he(re,4):0,ce=Ae(re)?he(re,4):0,re=Ae(re)?he(re,4):0,Ce=m.Qa,He=0;4>He;++He){if(Ce.Cb){var ue=Ce.Zb[He];Ce.Fb||(ue+=T)}else{if(0<He){m.pb[He]=m.pb[0];continue}ue=T}var Le=m.pb[He];Le.Sc[0]=n2[Tn(ue+H,127)],Le.Sc[1]=i2[Tn(ue+0,127)],Le.Eb[0]=2*n2[Tn(ue+F,127)],Le.Eb[1]=101581*i2[Tn(ue+Q,127)]>>16,8>Le.Eb[1]&&(Le.Eb[1]=8),Le.Qc[0]=n2[Tn(ue+ce,117)],Le.Qc[1]=i2[Tn(ue+re,127)],Le.lc=ue+re}if(!Y.Rb)return _r(m,4,"Not a key frame.");for(Ae(G),Y=m.Pa,T=0;4>T;++T){for(H=0;8>H;++H)for(F=0;3>F;++F)for(Q=0;11>Q;++Q)ce=Ne(G,Q8[T][H][F][Q])?ye(G,8):Y8[T][H][F][Q],Y.Wc[T][H].Yb[F][Q]=ce;for(H=0;17>H;++H)Y.Xc[T][H]=Y.Wc[T][Z8[H]]}return m.kc=Ae(G),m.kc&&(m.Bd=ye(G,8)),m.cb=1}function Dr(m,x,T,F,H,G,Y){var Q=x[H].Yb[T];for(T=0;16>H;++H){if(!Ne(m,Q[T+0]))return H;for(;!Ne(m,Q[T+1]);)if(Q=x[++H].Yb[0],T=0,H==16)return 16;var re=x[H+1].Yb;if(Ne(m,Q[T+2])){var ce=m,Ce=0;if(Ne(ce,(ue=Q)[(He=T)+3]))if(Ne(ce,ue[He+6])){for(Q=0,He=2*(Ce=Ne(ce,ue[He+8]))+(ue=Ne(ce,ue[He+9+Ce])),Ce=0,ue=K8[He];ue[Q];++Q)Ce+=Ce+Ne(ce,ue[Q]);Ce+=3+(8<<He)}else Ne(ce,ue[He+7])?(Ce=7+2*Ne(ce,165),Ce+=Ne(ce,145)):Ce=5+Ne(ce,159);else Ce=Ne(ce,ue[He+4])?3+Ne(ce,ue[He+5]):2;Q=re[2]}else Ce=1,Q=re[1];re=Y+G8[H],0>(ce=m).b&&Se(ce);var He,ue=ce.b,Le=(He=ce.Ca>>1)-(ce.I>>ue)>>31;--ce.b,ce.Ca+=Le,ce.Ca|=1,ce.I-=(He+1&Le)<<ue,G[re]=((Ce^Le)-Le)*F[(0<H)+0]}return 16}function Ia(m){var x=m.rb[m.sb-1];x.la=0,x.Na=0,i(m.zc,0,0,m.zc.length),m.ja=0}function Qn(m,x,T,F,H){H=m[x+T+32*F]+(H>>3),m[x+T+32*F]=-256&H?0>H?0:255:H}function _n(m,x,T,F,H,G){Qn(m,x,0,T,F+H),Qn(m,x,1,T,F+G),Qn(m,x,2,T,F-G),Qn(m,x,3,T,F-H)}function Vs(m){return(20091*m>>16)+m}function Eo(m,x,T,F){var H,G=0,Y=s(16);for(H=0;4>H;++H){var Q=m[x+0]+m[x+8],re=m[x+0]-m[x+8],ce=(35468*m[x+4]>>16)-Vs(m[x+12]),Ce=Vs(m[x+4])+(35468*m[x+12]>>16);Y[G+0]=Q+Ce,Y[G+1]=re+ce,Y[G+2]=re-ce,Y[G+3]=Q-Ce,G+=4,x++}for(H=G=0;4>H;++H)Q=(m=Y[G+0]+4)+Y[G+8],re=m-Y[G+8],ce=(35468*Y[G+4]>>16)-Vs(Y[G+12]),Qn(T,F,0,0,Q+(Ce=Vs(Y[G+4])+(35468*Y[G+12]>>16))),Qn(T,F,1,0,re+ce),Qn(T,F,2,0,re-ce),Qn(T,F,3,0,Q-Ce),G++,F+=32}function $c(m,x,T,F){var H=m[x+0]+4,G=35468*m[x+4]>>16,Y=Vs(m[x+4]),Q=35468*m[x+1]>>16;_n(T,F,0,H+Y,m=Vs(m[x+1]),Q),_n(T,F,1,H+G,m,Q),_n(T,F,2,H-G,m,Q),_n(T,F,3,H-Y,m,Q)}function Za(m,x,T,F,H){Eo(m,x,T,F),H&&Eo(m,x+16,T,F+4)}function zs(m,x,T,F){Yc(m,x+0,T,F,1),Yc(m,x+32,T,F+128,1)}function Zn(m,x,T,F){var H;for(m=m[x+0]+4,H=0;4>H;++H)for(x=0;4>x;++x)Qn(T,F,x,H,m)}function La(m,x,T,F){m[x+0]&&nn(m,x+0,T,F),m[x+16]&&nn(m,x+16,T,F+4),m[x+32]&&nn(m,x+32,T,F+128),m[x+48]&&nn(m,x+48,T,F+128+4)}function cs(m,x,T,F){var H,G=s(16);for(H=0;4>H;++H){var Y=m[x+0+H]+m[x+12+H],Q=m[x+4+H]+m[x+8+H],re=m[x+4+H]-m[x+8+H],ce=m[x+0+H]-m[x+12+H];G[0+H]=Y+Q,G[8+H]=Y-Q,G[4+H]=ce+re,G[12+H]=ce-re}for(H=0;4>H;++H)Y=(m=G[0+4*H]+3)+G[3+4*H],Q=G[1+4*H]+G[2+4*H],re=G[1+4*H]-G[2+4*H],ce=m-G[3+4*H],T[F+0]=Y+Q>>3,T[F+16]=ce+re>>3,T[F+32]=Y-Q>>3,T[F+48]=ce-re>>3,F+=64}function Pa(m,x,T){var F,H=x-32,G=sa,Y=255-m[H-1];for(F=0;F<T;++F){var Q,re=G,ce=Y+m[x-1];for(Q=0;Q<T;++Q)m[x+Q]=re[ce+m[H+Q]];x+=32}}function Ll(m,x){Pa(m,x,4)}function Pl(m,x){Pa(m,x,8)}function jl(m,x){Pa(m,x,16)}function Ja(m,x){var T;for(T=0;16>T;++T)n(m,x+32*T,m,x-32,16)}function Hs(m,x){var T;for(T=16;0<T;--T)i(m,x,m[x-1],16),x+=32}function us(m,x,T){var F;for(F=0;16>F;++F)i(x,T+32*F,m,16)}function Rl(m,x){var T,F=16;for(T=0;16>T;++T)F+=m[x-1+32*T]+m[x+T-32];us(F>>5,m,x)}function ja(m,x){var T,F=8;for(T=0;16>T;++T)F+=m[x-1+32*T];us(F>>4,m,x)}function Ki(m,x){var T,F=8;for(T=0;16>T;++T)F+=m[x+T-32];us(F>>4,m,x)}function Fl(m,x){us(128,m,x)}function cr(m,x,T){return m+2*x+T+2>>2}function eo(m,x){var T,F=x-32;for(F=new Uint8Array([cr(m[F-1],m[F+0],m[F+1]),cr(m[F+0],m[F+1],m[F+2]),cr(m[F+1],m[F+2],m[F+3]),cr(m[F+2],m[F+3],m[F+4])]),T=0;4>T;++T)n(m,x+32*T,F,0,F.length)}function Xo(m,x){var T=m[x-1],F=m[x-1+32],H=m[x-1+64],G=m[x-1+96];Xe(m,x+0,16843009*cr(m[x-1-32],T,F)),Xe(m,x+32,16843009*cr(T,F,H)),Xe(m,x+64,16843009*cr(F,H,G)),Xe(m,x+96,16843009*cr(H,G,G))}function Ra(m,x){var T,F=4;for(T=0;4>T;++T)F+=m[x+T-32]+m[x-1+32*T];for(F>>=3,T=0;4>T;++T)i(m,x+32*T,F,4)}function V(m,x){var T=m[x-1+0],F=m[x-1+32],H=m[x-1+64],G=m[x-1-32],Y=m[x+0-32],Q=m[x+1-32],re=m[x+2-32],ce=m[x+3-32];m[x+0+96]=cr(F,H,m[x-1+96]),m[x+1+96]=m[x+0+64]=cr(T,F,H),m[x+2+96]=m[x+1+64]=m[x+0+32]=cr(G,T,F),m[x+3+96]=m[x+2+64]=m[x+1+32]=m[x+0+0]=cr(Y,G,T),m[x+3+64]=m[x+2+32]=m[x+1+0]=cr(Q,Y,G),m[x+3+32]=m[x+2+0]=cr(re,Q,Y),m[x+3+0]=cr(ce,re,Q)}function pe(m,x){var T=m[x+1-32],F=m[x+2-32],H=m[x+3-32],G=m[x+4-32],Y=m[x+5-32],Q=m[x+6-32],re=m[x+7-32];m[x+0+0]=cr(m[x+0-32],T,F),m[x+1+0]=m[x+0+32]=cr(T,F,H),m[x+2+0]=m[x+1+32]=m[x+0+64]=cr(F,H,G),m[x+3+0]=m[x+2+32]=m[x+1+64]=m[x+0+96]=cr(H,G,Y),m[x+3+32]=m[x+2+64]=m[x+1+96]=cr(G,Y,Q),m[x+3+64]=m[x+2+96]=cr(Y,Q,re),m[x+3+96]=cr(Q,re,re)}function je(m,x){var T=m[x-1+0],F=m[x-1+32],H=m[x-1+64],G=m[x-1-32],Y=m[x+0-32],Q=m[x+1-32],re=m[x+2-32],ce=m[x+3-32];m[x+0+0]=m[x+1+64]=G+Y+1>>1,m[x+1+0]=m[x+2+64]=Y+Q+1>>1,m[x+2+0]=m[x+3+64]=Q+re+1>>1,m[x+3+0]=re+ce+1>>1,m[x+0+96]=cr(H,F,T),m[x+0+64]=cr(F,T,G),m[x+0+32]=m[x+1+96]=cr(T,G,Y),m[x+1+32]=m[x+2+96]=cr(G,Y,Q),m[x+2+32]=m[x+3+96]=cr(Y,Q,re),m[x+3+32]=cr(Q,re,ce)}function Ve(m,x){var T=m[x+0-32],F=m[x+1-32],H=m[x+2-32],G=m[x+3-32],Y=m[x+4-32],Q=m[x+5-32],re=m[x+6-32],ce=m[x+7-32];m[x+0+0]=T+F+1>>1,m[x+1+0]=m[x+0+64]=F+H+1>>1,m[x+2+0]=m[x+1+64]=H+G+1>>1,m[x+3+0]=m[x+2+64]=G+Y+1>>1,m[x+0+32]=cr(T,F,H),m[x+1+32]=m[x+0+96]=cr(F,H,G),m[x+2+32]=m[x+1+96]=cr(H,G,Y),m[x+3+32]=m[x+2+96]=cr(G,Y,Q),m[x+3+64]=cr(Y,Q,re),m[x+3+96]=cr(Q,re,ce)}function it(m,x){var T=m[x-1+0],F=m[x-1+32],H=m[x-1+64],G=m[x-1+96];m[x+0+0]=T+F+1>>1,m[x+2+0]=m[x+0+32]=F+H+1>>1,m[x+2+32]=m[x+0+64]=H+G+1>>1,m[x+1+0]=cr(T,F,H),m[x+3+0]=m[x+1+32]=cr(F,H,G),m[x+3+32]=m[x+1+64]=cr(H,G,G),m[x+3+64]=m[x+2+64]=m[x+0+96]=m[x+1+96]=m[x+2+96]=m[x+3+96]=G}function Qe(m,x){var T=m[x-1+0],F=m[x-1+32],H=m[x-1+64],G=m[x-1+96],Y=m[x-1-32],Q=m[x+0-32],re=m[x+1-32],ce=m[x+2-32];m[x+0+0]=m[x+2+32]=T+Y+1>>1,m[x+0+32]=m[x+2+64]=F+T+1>>1,m[x+0+64]=m[x+2+96]=H+F+1>>1,m[x+0+96]=G+H+1>>1,m[x+3+0]=cr(Q,re,ce),m[x+2+0]=cr(Y,Q,re),m[x+1+0]=m[x+3+32]=cr(T,Y,Q),m[x+1+32]=m[x+3+64]=cr(F,T,Y),m[x+1+64]=m[x+3+96]=cr(H,F,T),m[x+1+96]=cr(G,H,F)}function er(m,x){var T;for(T=0;8>T;++T)n(m,x+32*T,m,x-32,8)}function Mt(m,x){var T;for(T=0;8>T;++T)i(m,x,m[x-1],8),x+=32}function At(m,x,T){var F;for(F=0;8>F;++F)i(x,T+32*F,m,8)}function ur(m,x){var T,F=8;for(T=0;8>T;++T)F+=m[x+T-32]+m[x-1+32*T];At(F>>4,m,x)}function Ot(m,x){var T,F=4;for(T=0;8>T;++T)F+=m[x+T-32];At(F>>3,m,x)}function ut(m,x){var T,F=4;for(T=0;8>T;++T)F+=m[x-1+32*T];At(F>>3,m,x)}function sr(m,x){At(128,m,x)}function wt(m,x,T){var F=m[x-T],H=m[x+0],G=3*(H-F)+Zg[1020+m[x-2*T]-m[x+T]],Y=ip[112+(G+4>>3)];m[x-T]=sa[255+F+ip[112+(G+3>>3)]],m[x+0]=sa[255+H-Y]}function Pr(m,x,T,F){var H=m[x+0],G=m[x+T];return Oa[255+m[x-2*T]-m[x-T]]>F||Oa[255+G-H]>F}function Sr(m,x,T,F){return 4*Oa[255+m[x-T]-m[x+0]]+Oa[255+m[x-2*T]-m[x+T]]<=F}function jr(m,x,T,F,H){var G=m[x-3*T],Y=m[x-2*T],Q=m[x-T],re=m[x+0],ce=m[x+T],Ce=m[x+2*T],He=m[x+3*T];return 4*Oa[255+Q-re]+Oa[255+Y-ce]>F?0:Oa[255+m[x-4*T]-G]<=H&&Oa[255+G-Y]<=H&&Oa[255+Y-Q]<=H&&Oa[255+He-Ce]<=H&&Oa[255+Ce-ce]<=H&&Oa[255+ce-re]<=H}function bn(m,x,T,F){var H=2*F+1;for(F=0;16>F;++F)Sr(m,x+F,T,H)&&wt(m,x+F,T)}function ks(m,x,T,F){var H=2*F+1;for(F=0;16>F;++F)Sr(m,x+F*T,1,H)&&wt(m,x+F*T,1)}function Tr(m,x,T,F){var H;for(H=3;0<H;--H)bn(m,x+=4*T,T,F)}function ra(m,x,T,F){var H;for(H=3;0<H;--H)ks(m,x+=4,T,F)}function Jn(m,x,T,F,H,G,Y,Q){for(G=2*G+1;0<H--;){if(jr(m,x,T,G,Y))if(Pr(m,x,T,Q))wt(m,x,T);else{var re=m,ce=x,Ce=T,He=re[ce-2*Ce],ue=re[ce-Ce],Le=re[ce+0],Be=re[ce+Ce],Je=re[ce+2*Ce],ze=27*(at=Zg[1020+3*(Le-ue)+Zg[1020+He-Be]])+63>>7,rt=18*at+63>>7,at=9*at+63>>7;re[ce-3*Ce]=sa[255+re[ce-3*Ce]+at],re[ce-2*Ce]=sa[255+He+rt],re[ce-Ce]=sa[255+ue+ze],re[ce+0]=sa[255+Le-ze],re[ce+Ce]=sa[255+Be-rt],re[ce+2*Ce]=sa[255+Je-at]}x+=F}}function hs(m,x,T,F,H,G,Y,Q){for(G=2*G+1;0<H--;){if(jr(m,x,T,G,Y))if(Pr(m,x,T,Q))wt(m,x,T);else{var re=m,ce=x,Ce=T,He=re[ce-Ce],ue=re[ce+0],Le=re[ce+Ce],Be=ip[112+(4+(Je=3*(ue-He))>>3)],Je=ip[112+(Je+3>>3)],ze=Be+1>>1;re[ce-2*Ce]=sa[255+re[ce-2*Ce]+ze],re[ce-Ce]=sa[255+He+Je],re[ce+0]=sa[255+ue-Be],re[ce+Ce]=sa[255+Le-ze]}x+=F}}function ei(m,x,T,F,H,G){Jn(m,x,T,1,16,F,H,G)}function ar(m,x,T,F,H,G){Jn(m,x,1,T,16,F,H,G)}function ti(m,x,T,F,H,G){var Y;for(Y=3;0<Y;--Y)hs(m,x+=4*T,T,1,16,F,H,G)}function _(m,x,T,F,H,G){var Y;for(Y=3;0<Y;--Y)hs(m,x+=4,1,T,16,F,H,G)}function U(m,x,T,F,H,G,Y,Q){Jn(m,x,H,1,8,G,Y,Q),Jn(T,F,H,1,8,G,Y,Q)}function ae(m,x,T,F,H,G,Y,Q){Jn(m,x,1,H,8,G,Y,Q),Jn(T,F,1,H,8,G,Y,Q)}function xe(m,x,T,F,H,G,Y,Q){hs(m,x+4*H,H,1,8,G,Y,Q),hs(T,F+4*H,H,1,8,G,Y,Q)}function Pe(m,x,T,F,H,G,Y,Q){hs(m,x+4,1,H,8,G,Y,Q),hs(T,F+4,1,H,8,G,Y,Q)}function Ee(){this.ba=new Wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Tt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $e(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ft(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bt(){this.ua=0,this.Wa=new X,this.vb=new X,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ge,this.yc=new P}function _t(){this.xb=this.a=0,this.l=new Gr,this.ca=new Wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bt,this.ab=0,this.gc=a(4,Ft),this.Oc=0}function qt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Gr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function kr(m,x,T,F,H,G,Y){for(m=m==null?0:m[x+0],x=0;x<Y;++x)H[G+x]=m+T[F+x]&255,m=H[G+x]}function rn(m,x,T,F,H,G,Y){var Q;if(m==null)kr(null,null,T,F,H,G,Y);else for(Q=0;Q<Y;++Q)H[G+Q]=m[x+Q]+T[F+Q]&255}function ln(m,x,T,F,H,G,Y){if(m==null)kr(null,null,T,F,H,G,Y);else{var Q,re=m[x+0],ce=re,Ce=re;for(Q=0;Q<Y;++Q)ce=Ce+(re=m[x+Q])-ce,Ce=T[F+Q]+(-256&ce?0>ce?0:255:ce)&255,ce=re,H[G+Q]=Ce}}function g(m,x,T,F){var H=x.width,G=x.o;if(e(m!=null&&x!=null),0>T||0>=F||T+F>G)return null;if(!m.Cc){if(m.ga==null){var Y;if(m.ga=new qt,(Y=m.ga==null)||(Y=x.width*x.o,e(m.Gb.length==0),m.Gb=s(Y),m.Uc=0,m.Gb==null?Y=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,Y=1),Y=!Y),!Y){Y=m.ga;var Q=m.Fa,re=m.P,ce=m.qc,Ce=m.mb,He=m.nb,ue=re+1,Le=ce-1,Be=Y.l;if(e(Q!=null&&Ce!=null&&x!=null),ql[0]=null,ql[1]=kr,ql[2]=rn,ql[3]=ln,Y.ca=Ce,Y.tb=He,Y.c=x.width,Y.i=x.height,e(0<Y.c&&0<Y.i),1>=ce)x=0;else if(Y.$a=3&Q[re+0],Y.Z=Q[re+0]>>2&3,Y.Lc=Q[re+0]>>4&3,re=Q[re+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||re)x=0;else if(Be.put=Zt,Be.ac=jn,Be.bc=zn,Be.ma=Y,Be.width=x.width,Be.height=x.height,Be.Da=x.Da,Be.v=x.v,Be.va=x.va,Be.j=x.j,Be.o=x.o,Y.$a)e:{e(Y.$a==1),x=Re();t:for(;;){if(x==null){x=0;break e}if(e(Y!=null),Y.mc=x,x.c=Y.c,x.i=Y.i,x.l=Y.l,x.l.ma=Y,x.l.width=Y.c,x.l.height=Y.i,x.a=0,_e(x.m,Q,ue,Le),!Me(Y.c,Y.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&ne(x.s)?(Y.ic=1,Q=x.c*x.i,x.Ta=null,x.Ua=0,x.V=s(Q),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(Y.ic=0,x=Oe(x,Y.c)),!x))break t;x=1;break e}Y.mc=null,x=0}else x=Le>=Y.c*Y.i;Y=!x}if(Y)return null;m.ga.Lc!=1?m.Ga=0:F=G-T}e(m.ga!=null),e(T+F<=G);e:{if(x=(Q=m.ga).c,G=Q.l.o,Q.$a==0){if(ue=m.rc,Le=m.Vc,Be=m.Fa,re=m.P+1+T*x,ce=m.mb,Ce=m.nb+T*x,e(re<=m.P+m.qc),Q.Z!=0)for(e(ql[Q.Z]!=null),Y=0;Y<F;++Y)ql[Q.Z](ue,Le,Be,re,ce,Ce,x),ue=ce,Le=Ce,Ce+=x,re+=x;else for(Y=0;Y<F;++Y)n(ce,Ce,Be,re,x),ue=ce,Le=Ce,Ce+=x,re+=x;m.rc=ue,m.Vc=Le}else{if(e(Q.mc!=null),x=T+F,e((Y=Q.mc)!=null),e(x<=Y.i),Y.C>=x)x=1;else if(Q.ic||We(),Q.ic){Q=Y.V,ue=Y.Ba,Le=Y.c;var Je=Y.i,ze=(Be=1,re=Y.$/Le,ce=Y.$%Le,Ce=Y.m,He=Y.s,Y.$),rt=Le*Je,at=Le*x,xt=He.wc,dt=ze<at?W(He,ce,re):null;e(ze<=rt),e(x<=Je),e(ne(He));t:for(;;){for(;!Ce.h&&ze<at;){if(ce&xt||(dt=W(He,ce,re)),e(dt!=null),fe(Ce),256>(Je=Fr(dt.G[0],dt.H[0],Ce)))Q[ue+ze]=Je,++ze,++ce>=Le&&(ce=0,++re<=x&&!(re%16)&&le(Y,re));else{if(!(280>Je)){Be=0;break t}Je=an(Je-256,Ce);var rr,$t=Fr(dt.G[4],dt.H[4],Ce);if(fe(Ce),!(ze>=($t=Nn(Le,$t=an($t,Ce)))&&rt-ze>=Je)){Be=0;break t}for(rr=0;rr<Je;++rr)Q[ue+ze+rr]=Q[ue+ze+rr-$t];for(ze+=Je,ce+=Je;ce>=Le;)ce-=Le,++re<=x&&!(re%16)&&le(Y,re);ze<at&&ce&xt&&(dt=W(He,ce,re))}e(Ce.h==z(Ce))}le(Y,re>x?x:re);break t}!Be||Ce.h&&ze<rt?(Be=0,Y.a=Ce.h?5:3):Y.$=ze,x=Be}else x=De(Y,Y.V,Y.Ba,Y.c,Y.i,x,ht);if(!x){F=0;break e}}T+F>=G&&(m.Cc=1),F=1}if(!F)return null;if(m.Cc&&((F=m.ga)!=null&&(F.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+T*H}function I(m,x,T,F,H,G){for(;0<H--;){var Y,Q=m,re=x+(T?1:0),ce=m,Ce=x+(T?0:3);for(Y=0;Y<F;++Y){var He=ce[Ce+4*Y];He!=255&&(He*=32897,Q[re+4*Y+0]=Q[re+4*Y+0]*He>>23,Q[re+4*Y+1]=Q[re+4*Y+1]*He>>23,Q[re+4*Y+2]=Q[re+4*Y+2]*He>>23)}x+=G}}function M(m,x,T,F,H){for(;0<F--;){var G;for(G=0;G<T;++G){var Y=m[x+2*G+0],Q=15&(ce=m[x+2*G+1]),re=4369*Q,ce=(240&ce|ce>>4)*re>>16;m[x+2*G+0]=(240&Y|Y>>4)*re>>16&240|(15&Y|Y<<4)*re>>16>>4&15,m[x+2*G+1]=240&ce|Q}x+=H}}function Z(m,x,T,F,H,G,Y,Q){var re,ce,Ce=255;for(ce=0;ce<H;++ce){for(re=0;re<F;++re){var He=m[x+re];G[Y+4*re]=He,Ce&=He}x+=T,Y+=Q}return Ce!=255}function Fe(m,x,T,F,H){var G;for(G=0;G<H;++G)T[F+G]=m[x+G]>>8}function We(){Mf=I,Kw=M,Gw=Z,Yw=Fe}function bt(m,x,T){A[m]=function(F,H,G,Y,Q,re,ce,Ce,He,ue,Le,Be,Je,ze,rt,at,xt){var dt,rr=xt-1>>1,$t=Q[re+0]|ce[Ce+0]<<16,Ar=He[ue+0]|Le[Be+0]<<16;e(F!=null);var Yt=3*$t+Ar+131074>>2;for(x(F[H+0],255&Yt,Yt>>16,Je,ze),G!=null&&(Yt=3*Ar+$t+131074>>2,x(G[Y+0],255&Yt,Yt>>16,rt,at)),dt=1;dt<=rr;++dt){var Vr=Q[re+dt]|ce[Ce+dt]<<16,Li=He[ue+dt]|Le[Be+dt]<<16,Er=$t+Vr+Ar+Li+524296,Xt=Er+2*(Vr+Ar)>>3;Yt=Xt+$t>>1,$t=(Er=Er+2*($t+Li)>>3)+Vr>>1,x(F[H+2*dt-1],255&Yt,Yt>>16,Je,ze+(2*dt-1)*T),x(F[H+2*dt-0],255&$t,$t>>16,Je,ze+(2*dt-0)*T),G!=null&&(Yt=Er+Ar>>1,$t=Xt+Li>>1,x(G[Y+2*dt-1],255&Yt,Yt>>16,rt,at+(2*dt-1)*T),x(G[Y+2*dt+0],255&$t,$t>>16,rt,at+(2*dt+0)*T)),$t=Vr,Ar=Li}1&xt||(Yt=3*$t+Ar+131074>>2,x(F[H+xt-1],255&Yt,Yt>>16,Je,ze+(xt-1)*T),G!=null&&(Yt=3*Ar+$t+131074>>2,x(G[Y+xt-1],255&Yt,Yt>>16,rt,at+(xt-1)*T)))}}function mr(){Ba[sp]=eI,Ba[ap]=a_,Ba[t_]=tI,Ba[op]=o_,Ba[lp]=l_,Ba[Jg]=c_,Ba[r_]=rI,Ba[e2]=a_,Ba[t2]=o_,Ba[cp]=l_,Ba[r2]=c_}function kn(m){return m&-16384?0>m?0:255:m>>nI}function Mr(m,x){return kn((19077*m>>8)+(26149*x>>8)-14234)}function Cn(m,x,T){return kn((19077*m>>8)-(6419*x>>8)-(13320*T>>8)+8708)}function Oi(m,x){return kn((19077*m>>8)+(33050*x>>8)-17685)}function fs(m,x,T,F,H){F[H+0]=Mr(m,T),F[H+1]=Cn(m,x,T),F[H+2]=Oi(m,x)}function In(m,x,T,F,H){F[H+0]=Oi(m,x),F[H+1]=Cn(m,x,T),F[H+2]=Mr(m,T)}function ds(m,x,T,F,H){var G=Cn(m,x,T);x=G<<3&224|Oi(m,x)>>3,F[H+0]=248&Mr(m,T)|G>>5,F[H+1]=x}function Fa(m,x,T,F,H){var G=240&Oi(m,x)|15;F[H+0]=240&Mr(m,T)|Cn(m,x,T)>>4,F[H+1]=G}function Qo(m,x,T,F,H){F[H+0]=255,fs(m,x,T,F,H+1)}function kf(m,x,T,F,H){In(m,x,T,F,H),F[H+3]=255}function Cs(m,x,T,F,H){fs(m,x,T,F,H),F[H+3]=255}function Zo(m,x,T){A[m]=function(F,H,G,Y,Q,re,ce,Ce,He){for(var ue=Ce+(-2&He)*T;Ce!=ue;)x(F[H+0],G[Y+0],Q[re+0],ce,Ce),x(F[H+1],G[Y+0],Q[re+0],ce,Ce+T),H+=2,++Y,++re,Ce+=2*T;1&He&&x(F[H+0],G[Y+0],Q[re+0],ce,Ce)}}function Vu(m,x,T){return T==0?m==0?x==0?6:5:x==0?4:0:T}function tp(m,x,T,F,H){switch(m>>>30){case 3:Yc(x,T,F,H,0);break;case 2:Ma(x,T,F,H);break;case 1:nn(x,T,F,H)}}function Da(m,x){var T,F,H=x.M,G=x.Nb,Y=m.oc,Q=m.pc+40,re=m.oc,ce=m.pc+584,Ce=m.oc,He=m.pc+600;for(T=0;16>T;++T)Y[Q+32*T-1]=129;for(T=0;8>T;++T)re[ce+32*T-1]=129,Ce[He+32*T-1]=129;for(0<H?Y[Q-1-32]=re[ce-1-32]=Ce[He-1-32]=129:(i(Y,Q-32-1,127,21),i(re,ce-32-1,127,9),i(Ce,He-32-1,127,9)),F=0;F<m.za;++F){var ue=x.ya[x.aa+F];if(0<F){for(T=-1;16>T;++T)n(Y,Q+32*T-4,Y,Q+32*T+12,4);for(T=-1;8>T;++T)n(re,ce+32*T-4,re,ce+32*T+4,4),n(Ce,He+32*T-4,Ce,He+32*T+4,4)}var Le=m.Gd,Be=m.Hd+F,Je=ue.ad,ze=ue.Hc;if(0<H&&(n(Y,Q-32,Le[Be].y,0,16),n(re,ce-32,Le[Be].f,0,8),n(Ce,He-32,Le[Be].ea,0,8)),ue.Za){var rt=Y,at=Q-32+16;for(0<H&&(F>=m.za-1?i(rt,at,Le[Be].y[15],4):n(rt,at,Le[Be+1].y,0,4)),T=0;4>T;T++)rt[at+128+T]=rt[at+256+T]=rt[at+384+T]=rt[at+0+T];for(T=0;16>T;++T,ze<<=2)rt=Y,at=Q+h_[T],to[ue.Ob[T]](rt,at),tp(ze,Je,16*+T,rt,at)}else if(rt=Vu(F,H,ue.Ob[0]),Hl[rt](Y,Q),ze!=0)for(T=0;16>T;++T,ze<<=2)tp(ze,Je,16*+T,Y,Q+h_[T]);for(T=ue.Gc,rt=Vu(F,H,ue.Dd),tl[rt](re,ce),tl[rt](Ce,He),ze=Je,rt=re,at=ce,255&(ue=0|T)&&(170&ue?ko(ze,256,rt,at):Sn(ze,256,rt,at)),ue=Ce,ze=He,255&(T>>=8)&&(170&T?ko(Je,320,ue,ze):Sn(Je,320,ue,ze)),H<m.Ub-1&&(n(Le[Be].y,0,Y,Q+480,16),n(Le[Be].f,0,re,ce+224,8),n(Le[Be].ea,0,Ce,He+224,8)),T=8*G*m.B,Le=m.sa,Be=m.ta+16*F+16*G*m.R,Je=m.qa,ue=m.ra+8*F+T,ze=m.Ha,rt=m.Ia+8*F+T,T=0;16>T;++T)n(Le,Be+T*m.R,Y,Q+32*T,16);for(T=0;8>T;++T)n(Je,ue+T*m.B,re,ce+32*T,8),n(ze,rt+T*m.B,Ce,He+32*T,8)}}function Wc(m,x,T,F,H,G,Y,Q,re){var ce=[0],Ce=[0],He=0,ue=re!=null?re.kd:0,Le=re??new $e;if(m==null||12>T)return 7;Le.data=m,Le.w=x,Le.ha=T,x=[x],T=[T],Le.gb=[Le.gb];e:{var Be=x,Je=T,ze=Le.gb;if(e(m!=null),e(Je!=null),e(ze!=null),ze[0]=0,12<=Je[0]&&!r(m,Be[0],"RIFF")){if(r(m,Be[0]+8,"WEBP")){ze=3;break e}var rt=mt(m,Be[0]+4);if(12>rt||4294967286<rt){ze=3;break e}if(ue&&rt>Je[0]-8){ze=7;break e}ze[0]=rt,Be[0]+=12,Je[0]-=12}ze=0}if(ze!=0)return ze;for(rt=0<Le.gb[0],T=T[0];;){e:{var at=m;Je=x,ze=T;var xt=ce,dt=Ce,rr=Be=[0];if((Yt=He=[He])[0]=0,8>ze[0])ze=7;else{if(!r(at,Je[0],"VP8X")){if(mt(at,Je[0]+4)!=10){ze=3;break e}if(18>ze[0]){ze=7;break e}var $t=mt(at,Je[0]+8),Ar=1+ot(at,Je[0]+12);if(2147483648<=Ar*(at=1+ot(at,Je[0]+15))){ze=3;break e}rr!=null&&(rr[0]=$t),xt!=null&&(xt[0]=Ar),dt!=null&&(dt[0]=at),Je[0]+=18,ze[0]-=18,Yt[0]=1}ze=0}}if(He=He[0],Be=Be[0],ze!=0)return ze;if(Je=!!(2&Be),!rt&&He)return 3;if(G!=null&&(G[0]=!!(16&Be)),Y!=null&&(Y[0]=Je),Q!=null&&(Q[0]=0),Y=ce[0],Be=Ce[0],He&&Je&&re==null){ze=0;break}if(4>T){ze=7;break}if(rt&&He||!rt&&!He&&!r(m,x[0],"ALPH")){T=[T],Le.na=[Le.na],Le.P=[Le.P],Le.Sa=[Le.Sa];e:{$t=m,ze=x,rt=T;var Yt=Le.gb;xt=Le.na,dt=Le.P,rr=Le.Sa,Ar=22,e($t!=null),e(rt!=null),at=ze[0];var Vr=rt[0];for(e(xt!=null),e(rr!=null),xt[0]=null,dt[0]=null,rr[0]=0;;){if(ze[0]=at,rt[0]=Vr,8>Vr){ze=7;break e}var Li=mt($t,at+4);if(4294967286<Li){ze=3;break e}var Er=8+Li+1&-2;if(Ar+=Er,0<Yt&&Ar>Yt){ze=3;break e}if(!r($t,at,"VP8 ")||!r($t,at,"VP8L")){ze=0;break e}if(Vr[0]<Er){ze=7;break e}r($t,at,"ALPH")||(xt[0]=$t,dt[0]=at+8,rr[0]=Li),at+=Er,Vr-=Er}}if(T=T[0],Le.na=Le.na[0],Le.P=Le.P[0],Le.Sa=Le.Sa[0],ze!=0)break}T=[T],Le.Ja=[Le.Ja],Le.xa=[Le.xa];e:if(Yt=m,ze=x,rt=T,xt=Le.gb[0],dt=Le.Ja,rr=Le.xa,$t=ze[0],at=!r(Yt,$t,"VP8 "),Ar=!r(Yt,$t,"VP8L"),e(Yt!=null),e(rt!=null),e(dt!=null),e(rr!=null),8>rt[0])ze=7;else{if(at||Ar){if(Yt=mt(Yt,$t+4),12<=xt&&Yt>xt-12){ze=3;break e}if(ue&&Yt>rt[0]-8){ze=7;break e}dt[0]=Yt,ze[0]+=8,rt[0]-=8,rr[0]=Ar}else rr[0]=5<=rt[0]&&Yt[$t+0]==47&&!(Yt[$t+4]>>5),dt[0]=rt[0];ze=0}if(T=T[0],Le.Ja=Le.Ja[0],Le.xa=Le.xa[0],x=x[0],ze!=0)break;if(4294967286<Le.Ja)return 3;if(Q==null||Je||(Q[0]=Le.xa?2:1),Y=[Y],Be=[Be],Le.xa){if(5>T){ze=7;break}Q=Y,ue=Be,Je=G,m==null||5>T?m=0:5<=T&&m[x+0]==47&&!(m[x+4]>>5)?(rt=[0],Yt=[0],xt=[0],_e(dt=new O,m,x,T),en(dt,rt,Yt,xt)?(Q!=null&&(Q[0]=rt[0]),ue!=null&&(ue[0]=Yt[0]),Je!=null&&(Je[0]=xt[0]),m=1):m=0):m=0}else{if(10>T){ze=7;break}Q=Be,m==null||10>T||!qn(m,x+3,T-3)?m=0:(ue=m[x+0]|m[x+1]<<8|m[x+2]<<16,Je=16383&(m[x+7]<<8|m[x+6]),m=16383&(m[x+9]<<8|m[x+8]),1&ue||3<(ue>>1&7)||!(ue>>4&1)||ue>>5>=Le.Ja||!Je||!m?m=0:(Y&&(Y[0]=Je),Q&&(Q[0]=m),m=1))}if(!m||(Y=Y[0],Be=Be[0],He&&(ce[0]!=Y||Ce[0]!=Be)))return 3;re!=null&&(re[0]=Le,re.offset=x-re.w,e(4294967286>x-re.w),e(re.offset==re.ha-T));break}return ze==0||ze==7&&He&&re==null?(G!=null&&(G[0]|=Le.na!=null&&0<Le.na.length),F!=null&&(F[0]=Y),H!=null&&(H[0]=Be),0):ze}function Cf(m,x,T){var F=x.width,H=x.height,G=0,Y=0,Q=F,re=H;if(x.Da=m!=null&&0<m.Da,x.Da&&(Q=m.cd,re=m.bd,G=m.v,Y=m.j,11>T||(G&=-2,Y&=-2),0>G||0>Y||0>=Q||0>=re||G+Q>F||Y+re>H))return 0;if(x.v=G,x.j=Y,x.va=G+Q,x.o=Y+re,x.U=Q,x.T=re,x.da=m!=null&&0<m.da,x.da){if(!me(Q,re,T=[m.ib],G=[m.hb]))return 0;x.ib=T[0],x.hb=G[0]}return x.ob=m!=null&&m.ob,x.Kb=m==null||!m.Sd,x.da&&(x.ob=x.ib<3*F/4&&x.hb<3*H/4,x.Kb=0),1}function If(m){if(m==null)return 2;if(11>m.S){var x=m.f.RGBA;x.fb+=(m.height-1)*x.A,x.A=-x.A}else x=m.f.kb,m=m.height,x.O+=(m-1)*x.fa,x.fa=-x.fa,x.N+=(m-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(m-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(m-1)*x.lb,x.lb=-x.lb);return 0}function Dl(m,x,T,F){if(F==null||0>=m||0>=x)return 2;if(T!=null){if(T.Da){var H=T.cd,G=T.bd,Y=-2&T.v,Q=-2&T.j;if(0>Y||0>Q||0>=H||0>=G||Y+H>m||Q+G>x)return 2;m=H,x=G}if(T.da){if(!me(m,x,H=[T.ib],G=[T.hb]))return 2;m=H[0],x=G[0]}}F.width=m,F.height=x;e:{var re=F.width,ce=F.height;if(m=F.S,0>=re||0>=ce||!(m>=sp&&13>m))m=2;else{if(0>=F.Rd&&F.sd==null){Y=G=H=x=0;var Ce=(Q=re*f_[m])*ce;if(11>m||(G=(ce+1)/2*(x=(re+1)/2),m==12&&(Y=(H=re)*ce)),(ce=s(Ce+2*G+Y))==null){m=1;break e}F.sd=ce,11>m?((re=F.f.RGBA).eb=ce,re.fb=0,re.A=Q,re.size=Ce):((re=F.f.kb).y=ce,re.O=0,re.fa=Q,re.Fd=Ce,re.f=ce,re.N=0+Ce,re.Ab=x,re.Cd=G,re.ea=ce,re.W=0+Ce+G,re.Db=x,re.Ed=G,m==12&&(re.F=ce,re.J=0+Ce+2*G),re.Tc=Y,re.lb=H)}if(x=1,H=F.S,G=F.width,Y=F.height,H>=sp&&13>H)if(11>H)m=F.f.RGBA,x&=(Q=Math.abs(m.A))*(Y-1)+G<=m.size,x&=Q>=G*f_[H],x&=m.eb!=null;else{m=F.f.kb,Q=(G+1)/2,Ce=(Y+1)/2,re=Math.abs(m.fa),ce=Math.abs(m.Ab);var He=Math.abs(m.Db),ue=Math.abs(m.lb),Le=ue*(Y-1)+G;x&=re*(Y-1)+G<=m.Fd,x&=ce*(Ce-1)+Q<=m.Cd,x=(x&=He*(Ce-1)+Q<=m.Ed)&re>=G&ce>=Q&He>=Q,x&=m.y!=null,x&=m.f!=null,x&=m.ea!=null,H==12&&(x&=ue>=G,x&=Le<=m.Tc,x&=m.F!=null)}else x=0;m=x?0:2}}return m!=0||T!=null&&T.fd&&(m=If(F)),m}var Kc=64,na=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ia=24,Ml=32,Jo=8,Ol=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ge("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(m){return m},A.Predictor2=function(m,x,T){return x[T+0]},A.Predictor3=function(m,x,T){return x[T+1]},A.Predictor4=function(m,x,T){return x[T-1]},A.Predictor5=function(m,x,T){return yt(yt(m,x[T+1]),x[T+0])},A.Predictor6=function(m,x,T){return yt(m,x[T-1])},A.Predictor7=function(m,x,T){return yt(m,x[T+0])},A.Predictor8=function(m,x,T){return yt(x[T-1],x[T+0])},A.Predictor9=function(m,x,T){return yt(x[T+0],x[T+1])},A.Predictor10=function(m,x,T){return yt(yt(m,x[T-1]),yt(x[T+0],x[T+1]))},A.Predictor11=function(m,x,T){var F=x[T+0];return 0>=tt(F>>24&255,m>>24&255,(x=x[T-1])>>24&255)+tt(F>>16&255,m>>16&255,x>>16&255)+tt(F>>8&255,m>>8&255,x>>8&255)+tt(255&F,255&m,255&x)?F:m},A.Predictor12=function(m,x,T){var F=x[T+0];return(Ht((m>>24&255)+(F>>24&255)-((x=x[T-1])>>24&255))<<24|Ht((m>>16&255)+(F>>16&255)-(x>>16&255))<<16|Ht((m>>8&255)+(F>>8&255)-(x>>8&255))<<8|Ht((255&m)+(255&F)-(255&x)))>>>0},A.Predictor13=function(m,x,T){var F=x[T-1];return(be((m=yt(m,x[T+0]))>>24&255,F>>24&255)<<24|be(m>>16&255,F>>16&255)<<16|be(m>>8&255,F>>8&255)<<8|be(255&m,255&F))>>>0};var Lf=A.PredictorAdd0;A.PredictorAdd1=ct,Ge("Predictor2","PredictorAdd2"),Ge("Predictor3","PredictorAdd3"),Ge("Predictor4","PredictorAdd4"),Ge("Predictor5","PredictorAdd5"),Ge("Predictor6","PredictorAdd6"),Ge("Predictor7","PredictorAdd7"),Ge("Predictor8","PredictorAdd8"),Ge("Predictor9","PredictorAdd9"),Ge("Predictor10","PredictorAdd10"),Ge("Predictor11","PredictorAdd11"),Ge("Predictor12","PredictorAdd12"),Ge("Predictor13","PredictorAdd13");var zu=A.PredictorAdd2;Dt("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),Dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var ui,rp=A.ColorIndexInverseTransform,No=A.MapARGB,To=A.VP8LColorIndexInverseTransformAlpha,Pf=A.MapAlpha,jf=A.VP8LPredictorsAdd=[];jf.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var Rf,Ff,Bl,Ul,Vl,Gc,zl,Yc,Ma,ko,nn,Sn,hi,Ii,el,Df,Hu,np,Vw,zw,Hw,qw,$w,Ww,Mf,Kw,Gw,Yw,Xw=s(511),Qw=s(2041),Zw=s(225),Jw=s(767),e_=0,Zg=Qw,ip=Zw,sa=Jw,Oa=Xw,sp=0,ap=1,t_=2,op=3,lp=4,Jg=5,r_=6,e2=7,t2=8,cp=9,r2=10,U8=[2,3,7],V8=[3,3,11],n_=[280,256,256,256,40],z8=[0,1,1,1,0],H8=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],q8=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$8=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],W8=8,n2=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],i2=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Of=null,K8=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],G8=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],i_=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Y8=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],X8=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Q8=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Z8=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Hl=[],to=[],tl=[],J8=1,s_=2,ql=[],Ba=[];bt("UpsampleRgbLinePair",fs,3),bt("UpsampleBgrLinePair",In,3),bt("UpsampleRgbaLinePair",Cs,4),bt("UpsampleBgraLinePair",kf,4),bt("UpsampleArgbLinePair",Qo,4),bt("UpsampleRgba4444LinePair",Fa,2),bt("UpsampleRgb565LinePair",ds,2);var eI=A.UpsampleRgbLinePair,tI=A.UpsampleBgrLinePair,a_=A.UpsampleRgbaLinePair,o_=A.UpsampleBgraLinePair,l_=A.UpsampleArgbLinePair,c_=A.UpsampleRgba4444LinePair,rI=A.UpsampleRgb565LinePair,up=16,hp=1<<up-1,Bf=-227,s2=482,nI=6,u_=0,iI=s(256),sI=s(256),aI=s(256),oI=s(256),lI=s(s2-Bf),cI=s(s2-Bf);Zo("YuvToRgbRow",fs,3),Zo("YuvToBgrRow",In,3),Zo("YuvToRgbaRow",Cs,4),Zo("YuvToBgraRow",kf,4),Zo("YuvToArgbRow",Qo,4),Zo("YuvToRgba4444Row",Fa,2),Zo("YuvToRgb565Row",ds,2);var h_=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],fp=[0,2,8],uI=[8,7,6,4,4,2,2,2,1,1,1,1],hI=1;this.WebPDecodeRGBA=function(m,x,T,F,H){var G=ap,Y=new Ee,Q=new Wt;Y.ba=Q,Q.S=G,Q.width=[Q.width],Q.height=[Q.height];var re=Q.width,ce=Q.height,Ce=new Ye;if(Ce==null||m==null)var He=2;else e(Ce!=null),He=Wc(m,x,T,Ce.width,Ce.height,Ce.Pd,Ce.Qd,Ce.format,null);if(He!=0?re=0:(re!=null&&(re[0]=Ce.width[0]),ce!=null&&(ce[0]=Ce.height[0]),re=1),re){Q.width=Q.width[0],Q.height=Q.height[0],F!=null&&(F[0]=Q.width),H!=null&&(H[0]=Q.height);e:{if(F=new Gr,(H=new $e).data=m,H.w=x,H.ha=T,H.kd=1,x=[0],e(H!=null),((m=Wc(H.data,H.w,H.ha,null,null,null,x,null,H))==0||m==7)&&x[0]&&(m=4),(x=m)==0){if(e(Y!=null),F.data=H.data,F.w=H.w+H.offset,F.ha=H.ha-H.offset,F.put=Zt,F.ac=jn,F.bc=zn,F.ma=Y,H.xa){if((m=Re())==null){Y=1;break e}if(function(ue,Le){var Be=[0],Je=[0],ze=[0];t:for(;;){if(ue==null)return 0;if(Le==null)return ue.a=2,0;if(ue.l=Le,ue.a=0,_e(ue.m,Le.data,Le.w,Le.ha),!en(ue.m,Be,Je,ze)){ue.a=3;break t}if(ue.xb=s_,Le.width=Be[0],Le.height=Je[0],!Me(Be[0],Je[0],1,ue,null))break t;return 1}return e(ue.a!=0),0}(m,F)){if(F=(x=Dl(F.width,F.height,Y.Oa,Y.ba))==0){t:{F=m;r:for(;;){if(F==null){F=0;break t}if(e(F.s.yc!=null),e(F.s.Ya!=null),e(0<F.s.Wb),e((T=F.l)!=null),e((H=T.ma)!=null),F.xb!=0){if(F.ca=H.ba,F.tb=H.tb,e(F.ca!=null),!Cf(H.Oa,T,op)){F.a=2;break r}if(!Oe(F,T.width)||T.da)break r;if((T.da||Qt(F.ca.S))&&We(),11>F.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),F.ca.f.kb.F!=null&&We()),F.Pb&&0<F.s.ua&&F.s.vb.X==null&&!te(F.s.vb,F.s.Wa.Xa)){F.a=1;break r}F.xb=0}if(!De(F,F.V,F.Ba,F.c,F.i,T.o,ee))break r;H.Dc=F.Ma,F=1;break t}e(F.a!=0),F=0}F=!F}F&&(x=m.a)}else x=m.a}else{if((m=new Lr)==null){Y=1;break e}if(m.Fa=H.na,m.P=H.P,m.qc=H.Sa,yn(m,F)){if((x=Dl(F.width,F.height,Y.Oa,Y.ba))==0){if(m.Aa=0,T=Y.Oa,e((H=m)!=null),T!=null){if(0<(re=0>(re=T.Md)?0:100<re?255:255*re/100)){for(ce=Ce=0;4>ce;++ce)12>(He=H.pb[ce]).lc&&(He.ia=re*uI[0>He.lc?0:He.lc]>>3),Ce|=He.ia;Ce&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=T.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}(function(ue,Le){if(ue==null)return 0;if(Le==null)return _r(ue,2,"NULL VP8Io parameter in VP8Decode().");if(!ue.cb&&!yn(ue,Le))return 0;if(e(ue.cb),Le.ac==null||Le.ac(Le)){Le.ob&&(ue.L=0);var Be=fp[ue.L];if(ue.L==2?(ue.yb=0,ue.zb=0):(ue.yb=Le.v-Be>>4,ue.zb=Le.j-Be>>4,0>ue.yb&&(ue.yb=0),0>ue.zb&&(ue.zb=0)),ue.Va=Le.o+15+Be>>4,ue.Hb=Le.va+15+Be>>4,ue.Hb>ue.za&&(ue.Hb=ue.za),ue.Va>ue.Ub&&(ue.Va=ue.Ub),0<ue.L){var Je=ue.ed;for(Be=0;4>Be;++Be){var ze;if(ue.Qa.Cb){var rt=ue.Qa.Lb[Be];ue.Qa.Fb||(rt+=Je.Tb)}else rt=Je.Tb;for(ze=0;1>=ze;++ze){var at=ue.gd[Be][ze],xt=rt;if(Je.Pc&&(xt+=Je.vd[0],ze&&(xt+=Je.od[0])),0<(xt=0>xt?0:63<xt?63:xt)){var dt=xt;0<Je.wb&&(dt=4<Je.wb?dt>>2:dt>>1)>9-Je.wb&&(dt=9-Je.wb),1>dt&&(dt=1),at.dd=dt,at.tc=2*xt+dt,at.ld=40<=xt?2:15<=xt?1:0}else at.tc=0;at.La=ze}}}Be=0}else _r(ue,6,"Frame setup failed"),Be=ue.a;if(Be=Be==0){if(Be){ue.$c=0,0<ue.Aa||(ue.Ic=hI);t:{Be=ue.Ic,Je=4*(dt=ue.za);var rr=32*dt,$t=dt+1,Ar=0<ue.L?dt*(0<ue.Aa?2:1):0,Yt=(ue.Aa==2?2:1)*dt;if((at=Je+832+(ze=3*(16*Be+fp[ue.L])/2*rr)+(rt=ue.Fa!=null&&0<ue.Fa.length?ue.Kc.c*ue.Kc.i:0))!=at)Be=0;else{if(at>ue.Vb){if(ue.Vb=0,ue.Ec=s(at),ue.Fc=0,ue.Ec==null){Be=_r(ue,1,"no memory during frame initialization.");break t}ue.Vb=at}at=ue.Ec,xt=ue.Fc,ue.Ac=at,ue.Bc=xt,xt+=Je,ue.Gd=a(rr,Xn),ue.Hd=0,ue.rb=a($t+1,tn),ue.sb=1,ue.wa=Ar?a(Ar,yr):null,ue.Y=0,ue.D.Nb=0,ue.D.wa=ue.wa,ue.D.Y=ue.Y,0<ue.Aa&&(ue.D.Y+=dt),e(!0),ue.oc=at,ue.pc=xt,xt+=832,ue.ya=a(Yt,li),ue.aa=0,ue.D.ya=ue.ya,ue.D.aa=ue.aa,ue.Aa==2&&(ue.D.aa+=dt),ue.R=16*dt,ue.B=8*dt,dt=(rr=fp[ue.L])*ue.R,rr=rr/2*ue.B,ue.sa=at,ue.ta=xt+dt,ue.qa=ue.sa,ue.ra=ue.ta+16*Be*ue.R+rr,ue.Ha=ue.qa,ue.Ia=ue.ra+8*Be*ue.B+rr,ue.$c=0,xt+=ze,ue.mb=rt?at:null,ue.nb=rt?xt:null,e(xt+rt<=ue.Fc+ue.Vb),Ia(ue),i(ue.Ac,ue.Bc,0,Je),Be=1}}if(Be){if(Le.ka=0,Le.y=ue.sa,Le.O=ue.ta,Le.f=ue.qa,Le.N=ue.ra,Le.ea=ue.Ha,Le.Vd=ue.Ia,Le.fa=ue.R,Le.Rc=ue.B,Le.F=null,Le.J=0,!e_){for(Be=-255;255>=Be;++Be)Xw[255+Be]=0>Be?-Be:Be;for(Be=-1020;1020>=Be;++Be)Qw[1020+Be]=-128>Be?-128:127<Be?127:Be;for(Be=-112;112>=Be;++Be)Zw[112+Be]=-16>Be?-16:15<Be?15:Be;for(Be=-255;510>=Be;++Be)Jw[255+Be]=0>Be?0:255<Be?255:Be;e_=1}zl=cs,Yc=Za,ko=zs,nn=Zn,Sn=La,Ma=$c,hi=ei,Ii=ar,el=U,Df=ae,Hu=ti,np=_,Vw=xe,zw=Pe,Hw=bn,qw=ks,$w=Tr,Ww=ra,to[0]=Ra,to[1]=Ll,to[2]=eo,to[3]=Xo,to[4]=V,to[5]=je,to[6]=pe,to[7]=Ve,to[8]=Qe,to[9]=it,Hl[0]=Rl,Hl[1]=jl,Hl[2]=Ja,Hl[3]=Hs,Hl[4]=ja,Hl[5]=Ki,Hl[6]=Fl,tl[0]=ur,tl[1]=Pl,tl[2]=er,tl[3]=Mt,tl[4]=ut,tl[5]=Ot,tl[6]=sr,Be=1}else Be=0}Be&&(Be=function(Vr,Li){for(Vr.M=0;Vr.M<Vr.Va;++Vr.M){var Er,Xt=Vr.Jc[Vr.M&Vr.Xb],Lt=Vr.m,fi=Vr;for(Er=0;Er<fi.za;++Er){var wr=Lt,qr=fi,Rn=qr.Ac,Gi=qr.Bc+4*Er,Is=qr.zc,ri=qr.ya[qr.aa+Er];if(qr.Qa.Bb?ri.$b=Ne(wr,qr.Pa.jb[0])?2+Ne(wr,qr.Pa.jb[2]):Ne(wr,qr.Pa.jb[1]):ri.$b=0,qr.kc&&(ri.Ad=Ne(wr,qr.Bd)),ri.Za=!Ne(wr,145)+0,ri.Za){var ps=ri.Ob,Ls=0;for(qr=0;4>qr;++qr){var Pi,Yr=Is[0+qr];for(Pi=0;4>Pi;++Pi){Yr=X8[Rn[Gi+Pi]][Yr];for(var cn=i_[Ne(wr,Yr[0])];0<cn;)cn=i_[2*cn+Ne(wr,Yr[cn])];Yr=-cn,Rn[Gi+Pi]=Yr}n(ps,Ls,Rn,Gi,4),Ls+=4,Is[0+qr]=Yr}}else Yr=Ne(wr,156)?Ne(wr,128)?1:3:Ne(wr,163)?2:0,ri.Ob[0]=Yr,i(Rn,Gi,Yr,4),i(Is,0,Yr,4);ri.Dd=Ne(wr,142)?Ne(wr,114)?Ne(wr,183)?1:3:2:0}if(fi.m.Ka)return _r(Vr,7,"Premature end-of-partition0 encountered.");for(;Vr.ja<Vr.za;++Vr.ja){if(fi=Xt,wr=(Lt=Vr).rb[Lt.sb-1],Rn=Lt.rb[Lt.sb+Lt.ja],Er=Lt.ya[Lt.aa+Lt.ja],Gi=Lt.kc?Er.Ad:0)wr.la=Rn.la=0,Er.Za||(wr.Na=Rn.Na=0),Er.Hc=0,Er.Gc=0,Er.ia=0;else{var ni,un;if(wr=Rn,Rn=fi,Gi=Lt.Pa.Xc,Is=Lt.ya[Lt.aa+Lt.ja],ri=Lt.pb[Is.$b],qr=Is.ad,ps=0,Ls=Lt.rb[Lt.sb-1],Yr=Pi=0,i(qr,ps,0,384),Is.Za)var Yi=0,ro=Gi[3];else{cn=s(16);var di=wr.Na+Ls.Na;if(di=Of(Rn,Gi[1],di,ri.Eb,0,cn,0),wr.Na=Ls.Na=(0<di)+0,1<di)zl(cn,0,qr,ps);else{var qs=cn[0]+3>>3;for(cn=0;256>cn;cn+=16)qr[ps+cn]=qs}Yi=1,ro=Gi[0]}var An=15&wr.la,ji=15&Ls.la;for(cn=0;4>cn;++cn){var aa=1&ji;for(qs=un=0;4>qs;++qs)An=An>>1|(aa=(di=Of(Rn,ro,di=aa+(1&An),ri.Sc,Yi,qr,ps))>Yi)<<7,un=un<<2|(3<di?3:1<di?2:qr[ps+0]!=0),ps+=16;An>>=4,ji=ji>>1|aa<<7,Pi=(Pi<<8|un)>>>0}for(ro=An,Yi=ji>>4,ni=0;4>ni;ni+=2){for(un=0,An=wr.la>>4+ni,ji=Ls.la>>4+ni,cn=0;2>cn;++cn){for(aa=1&ji,qs=0;2>qs;++qs)di=aa+(1&An),An=An>>1|(aa=0<(di=Of(Rn,Gi[2],di,ri.Qc,0,qr,ps)))<<3,un=un<<2|(3<di?3:1<di?2:qr[ps+0]!=0),ps+=16;An>>=2,ji=ji>>1|aa<<5}Yr|=un<<4*ni,ro|=An<<4<<ni,Yi|=(240&ji)<<ni}wr.la=ro,Ls.la=Yi,Is.Hc=Pi,Is.Gc=Yr,Is.ia=43690&Yr?0:ri.ia,Gi=!(Pi|Yr)}if(0<Lt.L&&(Lt.wa[Lt.Y+Lt.ja]=Lt.gd[Er.$b][Er.Za],Lt.wa[Lt.Y+Lt.ja].La|=!Gi),fi.Ka)return _r(Vr,7,"Premature end-of-file encountered.")}if(Ia(Vr),Lt=Li,fi=1,Er=(Xt=Vr).D,wr=0<Xt.L&&Xt.M>=Xt.zb&&Xt.M<=Xt.Va,Xt.Aa==0)t:{if(Er.M=Xt.M,Er.uc=wr,Da(Xt,Er),fi=1,Er=(un=Xt.D).Nb,wr=(Yr=fp[Xt.L])*Xt.R,Rn=Yr/2*Xt.B,cn=16*Er*Xt.R,qs=8*Er*Xt.B,Gi=Xt.sa,Is=Xt.ta-wr+cn,ri=Xt.qa,qr=Xt.ra-Rn+qs,ps=Xt.Ha,Ls=Xt.Ia-Rn+qs,ji=(An=un.M)==0,Pi=An>=Xt.Va-1,Xt.Aa==2&&Da(Xt,un),un.uc)for(aa=(di=Xt).D.M,e(di.D.uc),un=di.yb;un<di.Hb;++un){Yi=un,ro=aa;var Ps=(oa=(Xi=di).D).Nb;ni=Xi.R;var oa=oa.wa[oa.Y+Yi],la=Xi.sa,$s=Xi.ta+16*Ps*ni+16*Yi,ca=oa.dd,Ln=oa.tc;if(Ln!=0)if(e(3<=Ln),Xi.L==1)0<Yi&&qw(la,$s,ni,Ln+4),oa.La&&Ww(la,$s,ni,Ln),0<ro&&Hw(la,$s,ni,Ln+4),oa.La&&$w(la,$s,ni,Ln);else{var ua=Xi.B,no=Xi.qa,Xc=Xi.ra+8*Ps*ua+8*Yi,rl=Xi.Ha,Xi=Xi.Ia+8*Ps*ua+8*Yi;Ps=oa.ld,0<Yi&&(Ii(la,$s,ni,Ln+4,ca,Ps),Df(no,Xc,rl,Xi,ua,Ln+4,ca,Ps)),oa.La&&(np(la,$s,ni,Ln,ca,Ps),zw(no,Xc,rl,Xi,ua,Ln,ca,Ps)),0<ro&&(hi(la,$s,ni,Ln+4,ca,Ps),el(no,Xc,rl,Xi,ua,Ln+4,ca,Ps)),oa.La&&(Hu(la,$s,ni,Ln,ca,Ps),Vw(no,Xc,rl,Xi,ua,Ln,ca,Ps))}}if(Xt.ia&&alert("todo:DitherRow"),Lt.put!=null){if(un=16*An,An=16*(An+1),ji?(Lt.y=Xt.sa,Lt.O=Xt.ta+cn,Lt.f=Xt.qa,Lt.N=Xt.ra+qs,Lt.ea=Xt.Ha,Lt.W=Xt.Ia+qs):(un-=Yr,Lt.y=Gi,Lt.O=Is,Lt.f=ri,Lt.N=qr,Lt.ea=ps,Lt.W=Ls),Pi||(An-=Yr),An>Lt.o&&(An=Lt.o),Lt.F=null,Lt.J=null,Xt.Fa!=null&&0<Xt.Fa.length&&un<An&&(Lt.J=g(Xt,Lt,un,An-un),Lt.F=Xt.mb,Lt.F==null&&Lt.F.length==0)){fi=_r(Xt,3,"Could not decode alpha data.");break t}un<Lt.j&&(Yr=Lt.j-un,un=Lt.j,e(!(1&Yr)),Lt.O+=Xt.R*Yr,Lt.N+=Xt.B*(Yr>>1),Lt.W+=Xt.B*(Yr>>1),Lt.F!=null&&(Lt.J+=Lt.width*Yr)),un<An&&(Lt.O+=Lt.v,Lt.N+=Lt.v>>1,Lt.W+=Lt.v>>1,Lt.F!=null&&(Lt.J+=Lt.v),Lt.ka=un-Lt.j,Lt.U=Lt.va-Lt.v,Lt.T=An-un,fi=Lt.put(Lt))}Er+1!=Xt.Ic||Pi||(n(Xt.sa,Xt.ta-wr,Gi,Is+16*Xt.R,wr),n(Xt.qa,Xt.ra-Rn,ri,qr+8*Xt.B,Rn),n(Xt.Ha,Xt.Ia-Rn,ps,Ls+8*Xt.B,Rn))}if(!fi)return _r(Vr,6,"Output aborted.")}return 1}(ue,Le)),Le.bc!=null&&Le.bc(Le),Be&=1}return Be?(ue.cb=0,Be):0})(m,F)||(x=m.a)}}else x=m.a}x==0&&Y.Oa!=null&&Y.Oa.fd&&(x=If(Y.ba))}Y=x}G=Y!=0?null:11>G?Q.f.RGBA.eb:Q.f.kb.y}else G=null;return G};var f_=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(A,D){for(var N="",j=0;j<4;j++)N+=String.fromCharCode(A[D++]);return N}function h(A,D){return A[D+0]|A[D+1]<<8}function d(A,D){return(A[D+0]|A[D+1]<<8|A[D+2]<<16)>>>0}function p(A,D){return(A[D+0]|A[D+1]<<8|A[D+2]<<16|A[D+3]<<24)>>>0}new l;var f=[0],v=[0],y=[],b=new l,w=t,S=function(A,D){var N={},j=0,P=!1,se=0,ge=0;if(N.frames=[],!function(L,O){for(var B=0;B<4;B++)if(L[O+B]!="RIFF".charCodeAt(B))return!0;return!1}(A,D)){for(p(A,D+=4),D+=8;D<A.length;){var ve=u(A,D),ye=p(A,D+=4);D+=4;var he=ye+(1&ye);switch(ve){case"VP8 ":case"VP8L":N.frames[j]===void 0&&(N.frames[j]={}),(Ie=N.frames[j]).src_off=P?ge:D-8,Ie.src_size=se+ye+8,j++,P&&(P=!1,se=0,ge=0);break;case"VP8X":(Ie=N.header={}).feature_flags=A[D];var _e=D+4;Ie.canvas_width=1+d(A,_e),_e+=3,Ie.canvas_height=1+d(A,_e),_e+=3;break;case"ALPH":P=!0,se=he+8,ge=D-8;break;case"ANIM":(Ie=N.header).bgcolor=p(A,D),_e=D+4,Ie.loop_count=h(A,_e),_e+=2;break;case"ANMF":var Ue,Ie;(Ie=N.frames[j]={}).offset_x=2*d(A,D),D+=3,Ie.offset_y=2*d(A,D),D+=3,Ie.width=1+d(A,D),D+=3,Ie.height=1+d(A,D),D+=3,Ie.duration=d(A,D),D+=3,Ue=A[D++],Ie.dispose=1&Ue,Ie.blend=Ue>>1&1}ve!="ANMF"&&(D+=he)}return N}}(w,0);S.response=w,S.rgbaoutput=!0,S.dataurl=!1;var k=S.header?S.header:null,R=S.frames?S.frames:null;if(k){k.loop_counter=k.loop_count,f=[k.canvas_height],v=[k.canvas_width];for(var q=0;q<R.length&&R[q].blend!=0;q++);}var K=R[0],E=b.WebPDecodeRGBA(w,K.src_off,K.src_size,v,f);K.rgba=E,K.imgwidth=v[0],K.imgheight=f[0];for(var C=0;C<v[0]*f[0]*4;C++)y[C]=E[C];return this.width=v,this.height=f,this.data=y,this}(function(t){var e,r,n,i,s,a,o,l,u,h=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new l,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new a,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new a,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new h}]);var d=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var O=L;Object.defineProperty(this,"pdf",{get:function(){return O}});var B=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return B},set:function(te){B=!!te}});var z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return z},set:function(te){z=!!te}});var J=0;Object.defineProperty(this,"posX",{get:function(){return J},set:function(te){isNaN(te)||(J=te)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(te){isNaN(te)||(fe=te)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(te){var ke;typeof te=="number"?ke=[te,te,te,te]:((ke=new Array(4))[0]=te[0],ke[1]=te.length>=2?te[1]:ke[0],ke[2]=te.length>=3?te[2]:ke[0],ke[3]=te.length>=4?te[3]:ke[1]),u.margin=ke}});var Se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Se},set:function(te){Se=te}});var Ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ae},set:function(te){Ae=te}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(te){Ne=te}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(te){te instanceof h&&(u=te)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(te){u.path=te}});var Xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Xe},set:function(te){Xe=te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(te){var ke;ke=p(te),this.ctx.fillStyle=ke.style,this.ctx.isFillTransparent=ke.a===0,this.ctx.fillOpacity=ke.a,this.pdf.setFillColor(ke.r,ke.g,ke.b,{a:ke.a}),this.pdf.setTextColor(ke.r,ke.g,ke.b,{a:ke.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(te){var ke=p(te);this.ctx.strokeStyle=ke.style,this.ctx.isStrokeTransparent=ke.a===0,this.ctx.strokeOpacity=ke.a,ke.a===0?this.pdf.setDrawColor(255,255,255):(ke.a,this.pdf.setDrawColor(ke.r,ke.g,ke.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(te){["butt","round","square"].indexOf(te)!==-1&&(this.ctx.lineCap=te,this.pdf.setLineCap(te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(te){isNaN(te)||(this.ctx.lineWidth=te,this.pdf.setLineWidth(te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(te){["bevel","round","miter"].indexOf(te)!==-1&&(this.ctx.lineJoin=te,this.pdf.setLineJoin(te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(te){isNaN(te)||(this.ctx.miterLimit=te,this.pdf.setMiterLimit(te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(te){this.ctx.textBaseline=te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(te){["right","end","center","left","start"].indexOf(te)!==-1&&(this.ctx.textAlign=te)}});var et=null,ot=null,mt=null;Object.defineProperty(this,"fontFaces",{get:function(){return mt},set:function(te){et=null,ot=null,mt=te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(te){var ke;if(this.ctx.font=te,(ke=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(te))!==null){var X=ke[1];ke[2];var me=ke[3],de=ke[4];ke[5];var qe=ke[6],Ge=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(de)[2];de=Math.floor(Ge==="px"?parseFloat(de)*this.pdf.internal.scaleFactor:Ge==="em"?parseFloat(de)*this.pdf.getFontSize():parseFloat(de)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(de);var st=function(Dt){var Hr,hr,Ke=[],Pt=Dt.trim();if(Pt==="")return vx;if(Pt in sS)return[sS[Pt]];for(;Pt!=="";){switch(hr=null,Hr=(Pt=oS(Pt)).charAt(0)){case'"':case"'":hr=eU(Pt.substring(1),Hr);break;default:hr=tU(Pt)}if(hr===null||(Ke.push(hr[0]),(Pt=oS(hr[1]))!==""&&Pt.charAt(0)!==","))return vx;Pt=Pt.replace(/^,/,"")}return Ke}(qe);if(this.fontFaces){var yt=function(Dt,Hr){var hr=Dt.getFontList(),Ke=JSON.stringify(hr);if(et===null||ot!==Ke){var Pt=function(pr){var Gt=[];return Object.keys(pr).forEach(function(Ir){pr[Ir].forEach(function(Qt){var Jt=null;switch(Qt){case"bold":Jt={family:Ir,weight:"bold"};break;case"italic":Jt={family:Ir,style:"italic"};break;case"bolditalic":Jt={family:Ir,weight:"bold",style:"italic"};break;case"":case"normal":Jt={family:Ir}}Jt!==null&&(Jt.ref={name:Ir,style:Qt},Gt.push(Jt))})}),Gt}(hr);et=function(pr){for(var Gt={},Ir=0;Ir<pr.length;++Ir){var Qt=yx(pr[Ir]),Jt=Qt.family,Ur=Qt.stretch,Wt=Qt.style,Ye=Qt.weight;Gt[Jt]=Gt[Jt]||{},Gt[Jt][Ur]=Gt[Jt][Ur]||{},Gt[Jt][Ur][Wt]=Gt[Jt][Ur][Wt]||{},Gt[Jt][Ur][Wt][Ye]=Qt}return Gt}(Pt.concat(Hr)),ot=Ke}return et}(this.pdf,this.fontFaces),Ht=st.map(function(Dt){return{family:Dt,stretch:"normal",weight:me,style:X}}),be=function(Dt,Hr,hr){for(var Ke=(hr=hr||{}).defaultFontFamily||"times",Pt=Object.assign({},JB,hr.genericFontFamilies||{}),pr=null,Gt=null,Ir=0;Ir<Hr.length;++Ir)if(Pt[(pr=yx(Hr[Ir])).family]&&(pr.family=Pt[pr.family]),Dt.hasOwnProperty(pr.family)){Gt=Dt[pr.family];break}if(!(Gt=Gt||Dt[Ke]))throw new Error("Could not find a font-family for the rule '"+aS(pr)+"' and default family '"+Ke+"'.");if(Gt=function(Qt,Jt){if(Jt[Qt])return Jt[Qt];var Ur=dv[Qt],Wt=Ur<=dv.normal?-1:1,Ye=iS(Jt,Ik,Ur,Wt);if(!Ye)throw new Error("Could not find a matching font-stretch value for "+Qt);return Ye}(pr.stretch,Gt),Gt=function(Qt,Jt){if(Jt[Qt])return Jt[Qt];for(var Ur=Ck[Qt],Wt=0;Wt<Ur.length;++Wt)if(Jt[Ur[Wt]])return Jt[Ur[Wt]];throw new Error("Could not find a matching font-style for "+Qt)}(pr.style,Gt),!(Gt=function(Qt,Jt){if(Jt[Qt])return Jt[Qt];if(Qt===400&&Jt[500])return Jt[500];if(Qt===500&&Jt[400])return Jt[400];var Ur=ZB[Qt],Wt=iS(Jt,Lk,Ur,Qt<400?-1:1);if(!Wt)throw new Error("Could not find a matching font-weight for value "+Qt);return Wt}(pr.weight,Gt)))throw new Error("Failed to resolve a font for the rule '"+aS(pr)+"'.");return Gt}(yt,Ht);this.pdf.setFont(be.ref.name,be.ref.style)}else{var tt="";(me==="bold"||parseInt(me,10)>=700||X==="bold")&&(tt="bold"),X==="italic"&&(tt+="italic"),tt.length===0&&(tt="normal");for(var ct="",St={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},jt=0;jt<st.length;jt++){if(this.pdf.internal.getFont(st[jt],tt,{noFallback:!0,disableWarning:!0})!==void 0){ct=st[jt];break}if(tt==="bolditalic"&&this.pdf.internal.getFont(st[jt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ct=st[jt],tt="bold";else if(this.pdf.internal.getFont(st[jt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ct=st[jt],tt="normal";break}}if(ct===""){for(var Rt=0;Rt<st.length;Rt++)if(St[st[Rt]]){ct=St[st[Rt]];break}}ct=ct===""?"Times":ct,this.pdf.setFont(ct,tt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(te){this.ctx.globalCompositeOperation=te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(te){this.ctx.globalAlpha=te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(te){this.ctx.lineDashOffset=te,Ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(te){this.ctx.lineDash=te,Ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(te){this.ctx.ignoreClearRect=!!te}})};d.prototype.setLineDash=function(L){this.lineDash=L},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){R.call(this,"fill",!1)},d.prototype.stroke=function(){R.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(L,O){if(isNaN(L)||isNaN(O))throw En.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var B=this.ctx.transform.applyToPoint(new a(L,O));this.path.push({type:"mt",x:B.x,y:B.y}),this.ctx.lastPoint=new a(L,O)},d.prototype.closePath=function(){var L=new a(0,0),O=0;for(O=this.path.length-1;O!==-1;O--)if(this.path[O].type==="begin"&&pn(this.path[O+1])==="object"&&typeof this.path[O+1].x=="number"){L=new a(this.path[O+1].x,this.path[O+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(L.x,L.y)},d.prototype.lineTo=function(L,O){if(isNaN(L)||isNaN(O))throw En.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var B=this.ctx.transform.applyToPoint(new a(L,O));this.path.push({type:"lt",x:B.x,y:B.y}),this.ctx.lastPoint=new a(B.x,B.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},d.prototype.quadraticCurveTo=function(L,O,B,z){if(isNaN(B)||isNaN(z)||isNaN(L)||isNaN(O))throw En.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var J=this.ctx.transform.applyToPoint(new a(B,z)),fe=this.ctx.transform.applyToPoint(new a(L,O));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:J.x,y:J.y}),this.ctx.lastPoint=new a(J.x,J.y)},d.prototype.bezierCurveTo=function(L,O,B,z,J,fe){if(isNaN(J)||isNaN(fe)||isNaN(L)||isNaN(O)||isNaN(B)||isNaN(z))throw En.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Se=this.ctx.transform.applyToPoint(new a(J,fe)),Ae=this.ctx.transform.applyToPoint(new a(L,O)),Ne=this.ctx.transform.applyToPoint(new a(B,z));this.path.push({type:"bct",x1:Ae.x,y1:Ae.y,x2:Ne.x,y2:Ne.y,x:Se.x,y:Se.y}),this.ctx.lastPoint=new a(Se.x,Se.y)},d.prototype.arc=function(L,O,B,z,J,fe){if(isNaN(L)||isNaN(O)||isNaN(B)||isNaN(z)||isNaN(J))throw En.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var Se=this.ctx.transform.applyToPoint(new a(L,O));L=Se.x,O=Se.y;var Ae=this.ctx.transform.applyToPoint(new a(0,B)),Ne=this.ctx.transform.applyToPoint(new a(0,0));B=Math.sqrt(Math.pow(Ae.x-Ne.x,2)+Math.pow(Ae.y-Ne.y,2))}Math.abs(J-z)>=2*Math.PI&&(z=0,J=2*Math.PI),this.path.push({type:"arc",x:L,y:O,radius:B,startAngle:z,endAngle:J,counterclockwise:fe})},d.prototype.arcTo=function(L,O,B,z,J){throw new Error("arcTo not implemented.")},d.prototype.rect=function(L,O,B,z){if(isNaN(L)||isNaN(O)||isNaN(B)||isNaN(z))throw En.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,O),this.lineTo(L+B,O),this.lineTo(L+B,O+z),this.lineTo(L,O+z),this.lineTo(L,O),this.lineTo(L+B,O),this.lineTo(L,O)},d.prototype.fillRect=function(L,O,B,z){if(isNaN(L)||isNaN(O)||isNaN(B)||isNaN(z))throw En.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var J={};this.lineCap!=="butt"&&(J.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(J.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,O,B,z),this.fill(),J.hasOwnProperty("lineCap")&&(this.lineCap=J.lineCap),J.hasOwnProperty("lineJoin")&&(this.lineJoin=J.lineJoin)}},d.prototype.strokeRect=function(L,O,B,z){if(isNaN(L)||isNaN(O)||isNaN(B)||isNaN(z))throw En.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(L,O,B,z),this.stroke())},d.prototype.clearRect=function(L,O,B,z){if(isNaN(L)||isNaN(O)||isNaN(B)||isNaN(z))throw En.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,O,B,z))},d.prototype.save=function(L){L=typeof L!="boolean"||L;for(var O=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("q");if(this.pdf.setPage(O),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var z=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=z}},d.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var O=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("Q");this.pdf.setPage(O),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(L){var O,B,z,J;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))O=0,B=0,z=0,J=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(fe!==null)O=parseInt(fe[1]),B=parseInt(fe[2]),z=parseInt(fe[3]),J=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)O=parseInt(fe[1]),B=parseInt(fe[2]),z=parseInt(fe[3]),J=parseFloat(fe[4]);else{if(J=1,typeof L=="string"&&L.charAt(0)!=="#"){var Se=new bk(L);L=Se.ok?Se.toHex():"#000000"}L.length===4?(O=L.substring(1,2),O+=O,B=L.substring(2,3),B+=B,z=L.substring(3,4),z+=z):(O=L.substring(1,3),B=L.substring(3,5),z=L.substring(5,7)),O=parseInt(O,16),B=parseInt(B,16),z=parseInt(z,16)}}return{r:O,g:B,b:z,a:J,style:L}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(L,O,B,z){if(isNaN(O)||isNaN(B)||typeof L!="string")throw En.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(z=isNaN(z)?void 0:z,!f.call(this)){var J=he(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;j.call(this,{text:L,x:O,y:B,scale:fe,angle:J,align:this.textAlign,maxWidth:z})}},d.prototype.strokeText=function(L,O,B,z){if(isNaN(O)||isNaN(B)||typeof L!="string")throw En.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){z=isNaN(z)?void 0:z;var J=he(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;j.call(this,{text:L,x:O,y:B,scale:fe,renderingMode:"stroke",angle:J,align:this.textAlign,maxWidth:z})}},d.prototype.measureText=function(L){if(typeof L!="string")throw En.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var O=this.pdf,B=this.pdf.internal.scaleFactor,z=O.internal.getFontSize(),J=O.getStringUnitWidth(L)*z/O.internal.scaleFactor;return new function(fe){var Se=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Se}}),this}({width:J*=Math.round(96*B/72*1e4)/1e4})},d.prototype.scale=function(L,O){if(isNaN(L)||isNaN(O))throw En.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var B=new l(L,0,0,O,0,0);this.ctx.transform=this.ctx.transform.multiply(B)},d.prototype.rotate=function(L){if(isNaN(L))throw En.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var O=new l(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(O)},d.prototype.translate=function(L,O){if(isNaN(L)||isNaN(O))throw En.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var B=new l(1,0,0,1,L,O);this.ctx.transform=this.ctx.transform.multiply(B)},d.prototype.transform=function(L,O,B,z,J,fe){if(isNaN(L)||isNaN(O)||isNaN(B)||isNaN(z)||isNaN(J)||isNaN(fe))throw En.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Se=new l(L,O,B,z,J,fe);this.ctx.transform=this.ctx.transform.multiply(Se)},d.prototype.setTransform=function(L,O,B,z,J,fe){L=isNaN(L)?1:L,O=isNaN(O)?0:O,B=isNaN(B)?0:B,z=isNaN(z)?1:z,J=isNaN(J)?0:J,fe=isNaN(fe)?0:fe,this.ctx.transform=new l(L,O,B,z,J,fe)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(L,O,B,z,J,fe,Se,Ae,Ne){var Xe=this.pdf.getImageProperties(L),et=1,ot=1,mt=1,te=1;z!==void 0&&Ae!==void 0&&(mt=Ae/z,te=Ne/J,et=Xe.width/z*Ae/z,ot=Xe.height/J*Ne/J),fe===void 0&&(fe=O,Se=B,O=0,B=0),z!==void 0&&Ae===void 0&&(Ae=z,Ne=J),z===void 0&&Ae===void 0&&(Ae=Xe.width,Ne=Xe.height);var ke=this.ctx.transform.decompose(),X=he(ke.rotate.shx),me=new l,de=(me=(me=(me=me.multiply(ke.translate)).multiply(ke.skew)).multiply(ke.scale)).applyToRectangle(new o(fe-O*mt,Se-B*te,z*et,J*ot));if(this.autoPaging){for(var qe,Ge=b.call(this,de),st=[],yt=0;yt<Ge.length;yt+=1)st.indexOf(Ge[yt])===-1&&st.push(Ge[yt]);k(st);for(var Ht=st[0],be=st[st.length-1],tt=Ht;tt<be+1;tt++){this.pdf.setPage(tt);var ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],St=tt===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Dt=tt===1?0:jt+(tt-2)*Rt;if(this.ctx.clip_path.length!==0){var Hr=this.path;qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(qe,this.posX+this.margin[3],-Dt+St+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=Hr}var hr=JSON.parse(JSON.stringify(de));hr=S([hr],this.posX+this.margin[3],-Dt+St+this.ctx.prevPageLastElemOffset)[0];var Ke=(tt>Ht||tt<be)&&y.call(this);Ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,Rt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",hr.x,hr.y,hr.w,hr.h,null,null,X),Ke&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(L,"JPEG",de.x,de.y,de.w,de.h,null,null,X)};var b=function(L,O,B){var z=[];O=O||this.pdf.internal.pageSize.width,B=B||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var J=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":z.push(Math.floor((L.y+J)/B)+1);break;case"arc":z.push(Math.floor((L.y+J-L.radius)/B)+1),z.push(Math.floor((L.y+J+L.radius)/B)+1);break;case"qct":var fe=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);z.push(Math.floor((fe.y+J)/B)+1),z.push(Math.floor((fe.y+fe.h+J)/B)+1);break;case"bct":var Se=Ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);z.push(Math.floor((Se.y+J)/B)+1),z.push(Math.floor((Se.y+Se.h+J)/B)+1);break;case"rect":z.push(Math.floor((L.y+J)/B)+1),z.push(Math.floor((L.y+L.h+J)/B)+1)}for(var Ae=0;Ae<z.length;Ae+=1)for(;this.pdf.internal.getNumberOfPages()<z[Ae];)w.call(this);return z},w=function(){var L=this.fillStyle,O=this.strokeStyle,B=this.font,z=this.lineCap,J=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=O,this.font=B,this.lineCap=z,this.lineWidth=J,this.lineJoin=fe},S=function(L,O,B){for(var z=0;z<L.length;z++)switch(L[z].type){case"bct":L[z].x2+=O,L[z].y2+=B;case"qct":L[z].x1+=O,L[z].y1+=B;default:L[z].x+=O,L[z].y+=B}return L},k=function(L){return L.sort(function(O,B){return O-B})},R=function(L,O){var B=this.fillStyle,z=this.strokeStyle,J=this.lineCap,fe=this.lineWidth,Se=Math.abs(fe*this.ctx.transform.scaleX),Ae=this.lineJoin;if(this.autoPaging){for(var Ne,Xe,et=JSON.parse(JSON.stringify(this.path)),ot=JSON.parse(JSON.stringify(this.path)),mt=[],te=0;te<ot.length;te++)if(ot[te].x!==void 0)for(var ke=b.call(this,ot[te]),X=0;X<ke.length;X+=1)mt.indexOf(ke[X])===-1&&mt.push(ke[X]);for(var me=0;me<mt.length;me++)for(;this.pdf.internal.getNumberOfPages()<mt[me];)w.call(this);k(mt);for(var de=mt[0],qe=mt[mt.length-1],Ge=de;Ge<qe+1;Ge++){this.pdf.setPage(Ge),this.fillStyle=B,this.strokeStyle=z,this.lineCap=J,this.lineWidth=Se,this.lineJoin=Ae;var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yt=Ge===1?this.posY+this.margin[0]:this.margin[0],Ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],be=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=Ge===1?0:Ht+(Ge-2)*be;if(this.ctx.clip_path.length!==0){var ct=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Ne,this.posX+this.margin[3],-tt+yt+this.ctx.prevPageLastElemOffset),q.call(this,L,!0),this.path=ct}if(Xe=JSON.parse(JSON.stringify(et)),this.path=S(Xe,this.posX+this.margin[3],-tt+yt+this.ctx.prevPageLastElemOffset),O===!1||Ge===0){var St=(Ge>de||Ge<qe)&&y.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,be,null).clip().discardPath()),q.call(this,L,O),St&&this.pdf.restoreGraphicsState()}this.lineWidth=fe}this.path=et}else this.lineWidth=Se,q.call(this,L,O),this.lineWidth=fe},q=function(L,O){if((L!=="stroke"||O||!v.call(this))&&(L==="stroke"||O||!f.call(this))){for(var B,z,J=[],fe=this.path,Se=0;Se<fe.length;Se++){var Ae=fe[Se];switch(Ae.type){case"begin":J.push({begin:!0});break;case"close":J.push({close:!0});break;case"mt":J.push({start:Ae,deltas:[],abs:[]});break;case"lt":var Ne=J.length;if(fe[Se-1]&&!isNaN(fe[Se-1].x)&&(B=[Ae.x-fe[Se-1].x,Ae.y-fe[Se-1].y],Ne>0)){for(;Ne>=0;Ne--)if(J[Ne-1].close!==!0&&J[Ne-1].begin!==!0){J[Ne-1].deltas.push(B),J[Ne-1].abs.push(Ae);break}}break;case"bct":B=[Ae.x1-fe[Se-1].x,Ae.y1-fe[Se-1].y,Ae.x2-fe[Se-1].x,Ae.y2-fe[Se-1].y,Ae.x-fe[Se-1].x,Ae.y-fe[Se-1].y],J[J.length-1].deltas.push(B);break;case"qct":var Xe=fe[Se-1].x+2/3*(Ae.x1-fe[Se-1].x),et=fe[Se-1].y+2/3*(Ae.y1-fe[Se-1].y),ot=Ae.x+2/3*(Ae.x1-Ae.x),mt=Ae.y+2/3*(Ae.y1-Ae.y),te=Ae.x,ke=Ae.y;B=[Xe-fe[Se-1].x,et-fe[Se-1].y,ot-fe[Se-1].x,mt-fe[Se-1].y,te-fe[Se-1].x,ke-fe[Se-1].y],J[J.length-1].deltas.push(B);break;case"arc":J.push({deltas:[],abs:[],arc:!0}),Array.isArray(J[J.length-1].abs)&&J[J.length-1].abs.push(Ae)}}z=O?null:L==="stroke"?"stroke":"fill";for(var X=!1,me=0;me<J.length;me++)if(J[me].arc)for(var de=J[me].abs,qe=0;qe<de.length;qe++){var Ge=de[qe];Ge.type==="arc"?C.call(this,Ge.x,Ge.y,Ge.radius,Ge.startAngle,Ge.endAngle,Ge.counterclockwise,void 0,O,!X):P.call(this,Ge.x,Ge.y),X=!0}else if(J[me].close===!0)this.pdf.internal.out("h"),X=!1;else if(J[me].begin!==!0){var st=J[me].start.x,yt=J[me].start.y;se.call(this,J[me].deltas,st,yt),X=!0}z&&A.call(this,z),O&&D.call(this)}},K=function(L){var O=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,B=O*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-B;case"top":return L+O-B;case"hanging":return L+O-2*B;case"middle":return L+O/2-B;default:return L}},E=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(O,B){this.colorStops.push([O,B])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(L,O,B,z,J,fe,Se,Ae,Ne){for(var Xe=ve.call(this,B,z,J,fe),et=0;et<Xe.length;et++){var ot=Xe[et];et===0&&(Ne?N.call(this,ot.x1+L,ot.y1+O):P.call(this,ot.x1+L,ot.y1+O)),ge.call(this,L,O,ot.x2,ot.y2,ot.x3,ot.y3,ot.x4,ot.y4)}Ae?D.call(this):A.call(this,Se)},A=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(L,O){this.pdf.internal.out(r(L)+" "+n(O)+" m")},j=function(L){var O;switch(L.align){case"right":case"end":O="right";break;case"center":O="center";break;default:O="left"}var B,z,J,fe=this.pdf.getTextDimensions(L.text),Se=K.call(this,L.y),Ae=E.call(this,Se)-fe.h,Ne=this.ctx.transform.applyToPoint(new a(L.x,Se));if(this.autoPaging){var Xe=this.ctx.transform.decompose(),et=new l;et=(et=(et=et.multiply(Xe.translate)).multiply(Xe.skew)).multiply(Xe.scale);for(var ot=this.ctx.transform.applyToRectangle(new o(L.x,Se,fe.w,fe.h)),mt=et.applyToRectangle(new o(L.x,Ae,fe.w,fe.h)),te=b.call(this,mt),ke=[],X=0;X<te.length;X+=1)ke.indexOf(te[X])===-1&&ke.push(te[X]);k(ke);for(var me=ke[0],de=ke[ke.length-1],qe=me;qe<de+1;qe++){this.pdf.setPage(qe);var Ge=qe===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[2],Ht=yt-this.margin[0],be=this.pdf.internal.pageSize.width-this.margin[1],tt=be-this.margin[3],ct=qe===1?0:st+(qe-2)*Ht;if(this.ctx.clip_path.length!==0){var St=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(B,this.posX+this.margin[3],-1*ct+Ge),q.call(this,"fill",!0),this.path=St}var jt=S([JSON.parse(JSON.stringify(mt))],this.posX+this.margin[3],-ct+Ge+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(z=this.pdf.internal.getFontSize(),this.pdf.setFontSize(z*L.scale),J=this.lineWidth,this.lineWidth=J*L.scale);var Rt=this.autoPaging!=="text";if(Rt||jt.y+jt.h<=yt){if(Rt||jt.y>=Ge&&jt.x<=be){var Dt=Rt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||be-jt.x)[0],Hr=S([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-ct+Ge+this.ctx.prevPageLastElemOffset)[0],hr=Rt&&(qe>me||qe<de)&&y.call(this);hr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,Ht,null).clip().discardPath()),this.pdf.text(Dt,Hr.x,Hr.y,{angle:L.angle,align:O,renderingMode:L.renderingMode}),hr&&this.pdf.restoreGraphicsState()}}else jt.y<yt&&(this.ctx.prevPageLastElemOffset+=yt-jt.y);L.scale>=.01&&(this.pdf.setFontSize(z),this.lineWidth=J)}}else L.scale>=.01&&(z=this.pdf.internal.getFontSize(),this.pdf.setFontSize(z*L.scale),J=this.lineWidth,this.lineWidth=J*L.scale),this.pdf.text(L.text,Ne.x+this.posX,Ne.y+this.posY,{angle:L.angle,align:O,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(z),this.lineWidth=J)},P=function(L,O,B,z){B=B||0,z=z||0,this.pdf.internal.out(r(L+B)+" "+n(O+z)+" l")},se=function(L,O,B){return this.pdf.lines(L,O,B,null,null)},ge=function(L,O,B,z,J,fe,Se,Ae){this.pdf.internal.out([e(i(B+L)),e(s(z+O)),e(i(J+L)),e(s(fe+O)),e(i(Se+L)),e(s(Ae+O)),"c"].join(" "))},ve=function(L,O,B,z){for(var J=2*Math.PI,fe=Math.PI/2;O>B;)O-=J;var Se=Math.abs(B-O);Se<J&&z&&(Se=J-Se);for(var Ae=[],Ne=z?-1:1,Xe=O;Se>1e-5;){var et=Xe+Ne*Math.min(Se,fe);Ae.push(ye.call(this,L,Xe,et)),Se-=Math.abs(et-Xe),Xe=et}return Ae},ye=function(L,O,B){var z=(B-O)/2,J=L*Math.cos(z),fe=L*Math.sin(z),Se=J,Ae=-fe,Ne=Se*Se+Ae*Ae,Xe=Ne+Se*J+Ae*fe,et=4/3*(Math.sqrt(2*Ne*Xe)-Xe)/(Se*fe-Ae*J),ot=Se-et*Ae,mt=Ae+et*Se,te=ot,ke=-mt,X=z+O,me=Math.cos(X),de=Math.sin(X);return{x1:L*Math.cos(O),y1:L*Math.sin(O),x2:ot*me-mt*de,y2:ot*de+mt*me,x3:te*me-ke*de,y3:te*de+ke*me,x4:L*Math.cos(B),y4:L*Math.sin(B)}},he=function(L){return 180*L/Math.PI},_e=function(L,O,B,z,J,fe){var Se=L+.5*(B-L),Ae=O+.5*(z-O),Ne=J+.5*(B-J),Xe=fe+.5*(z-fe),et=Math.min(L,J,Se,Ne),ot=Math.max(L,J,Se,Ne),mt=Math.min(O,fe,Ae,Xe),te=Math.max(O,fe,Ae,Xe);return new o(et,mt,ot-et,te-mt)},Ue=function(L,O,B,z,J,fe,Se,Ae){var Ne,Xe,et,ot,mt,te,ke,X,me,de,qe,Ge,st,yt,Ht=B-L,be=z-O,tt=J-B,ct=fe-z,St=Se-J,jt=Ae-fe;for(Xe=0;Xe<41;Xe++)me=(ke=(et=L+(Ne=Xe/40)*Ht)+Ne*((mt=B+Ne*tt)-et))+Ne*(mt+Ne*(J+Ne*St-mt)-ke),de=(X=(ot=O+Ne*be)+Ne*((te=z+Ne*ct)-ot))+Ne*(te+Ne*(fe+Ne*jt-te)-X),Xe==0?(qe=me,Ge=de,st=me,yt=de):(qe=Math.min(qe,me),Ge=Math.min(Ge,de),st=Math.max(st,me),yt=Math.max(yt,de));return new o(Math.round(qe),Math.round(Ge),Math.round(st-qe),Math.round(yt-Ge))},Ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,O,B=(L=this.ctx.lineDash,O=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:O}));this.prevLineDash!==B&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=B)}}})(ir.API),function(t){var e=function(a){var o,l,u,h,d,p,f,v,y,b;for(l=[],u=0,h=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;h>u;u+=4)(d=(a.charCodeAt(u)<<24)+(a.charCodeAt(u+1)<<16)+(a.charCodeAt(u+2)<<8)+a.charCodeAt(u+3))!==0?(p=(d=((d=((d=((d=(d-(b=d%85))/85)-(y=d%85))/85)-(v=d%85))/85)-(f=d%85))/85)%85,l.push(p+33,f+33,v+33,y+33,b+33)):l.push(122);return function(w,S){for(var k=S;k>0;k--)w.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(a){var o,l,u,h,d,p=String,f="length",v=255,y="charCodeAt",b="slice",w="replace";for(a[b](-2),a=a[b](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),u=[],h=0,d=(a+=o="uuuuu"[b](a[f]%5||5))[f];d>h;h+=5)l=52200625*(a[y](h)-33)+614125*(a[y](h+1)-33)+7225*(a[y](h+2)-33)+85*(a[y](h+3)-33)+(a[y](h+4)-33),u.push(v&l>>24,v&l>>16,v&l>>8,v&l);return function(S,k){for(var R=k;R>0;R--)S.pop()}(u,o[f]),p.fromCharCode.apply(p,u)},n=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",u=0;u<a.length;u+=2)l+=String.fromCharCode("0x"+(a[u]+a[u+1]));return l},s=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return(o=av(o)).reduce(function(u,h){return u+String.fromCharCode(h)},"")};t.processDataByFilters=function(a,o){var l=0,u=a||"",h=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:u,reverseChain:h.reverse().join(" ")}}}(ir.API),function(t){t.loadFile=function(e,r,n){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,u,h){var d=new XMLHttpRequest,p=0,f=function(v){var y=v.length,b=[],w=String.fromCharCode;for(p=0;p<y;p+=1)b.push(w(255&v.charCodeAt(p)));return b.join("")};if(d.open("GET",l,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?h(f(this.responseText)):h(void 0)}),d.send(null),u&&d.status===200)return f(d.responseText)}(i,s,a)}catch{}return o}(e,r,n)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile}(ir.API),function(t){function e(){return(dr.html2canvas?Promise.resolve(dr.html2canvas):Em(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(dr.DOMPurify?Promise.resolve(dr.DOMPurify):Em(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=pn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var u=document.createElement(o);for(var h in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[h]=l.style[h];return u},s=function o(l,u){for(var h=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)u!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||h.appendChild(o(d,u));return l.nodeType===1&&(l.nodeName==="CANVAS"?(h.width=l.width,h.height=l.height,h.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(h.value=l.value),h.addEventListener("load",function(){h.scrollTop=l.scrollTop,h.scrollLeft=l.scrollLeft},!0)),h},a=function o(l){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),h=o.convert(Promise.resolve(),u);return(h=h.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(r).then(function(u){return this.set({src:i("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var u=this.opt.jsPDF,h=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=h,h)for(var f=0;f<h.length;++f){var v=h[f],y=v.src.find(function(b){return b.format==="truetype"});y&&u.addFont(y.url,v.ref.name,v.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),l(this.prop.container,p)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(u){if(u in a.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var u=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(u):u})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(u,h){return Math.floor(u*h/72*96)}return this.then(function(){(o=o||ir.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,u,h){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,u,h){return this.setProgress(o?this.progress.val+o:null,l||null,u?this.progress.n+u:null,h?this.progress.stack.concat(h):null)},a.prototype.then=function(o,l){var u=this;return this.thenCore(o,l,function(h,d){return u.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,h),p}).then(h,d).then(function(p){return u.updateProgress(1),p})})},a.prototype.thenCore=function(o,l,u){u=u||Promise.prototype.then;var h=this;o&&(o=o.bind(h)),l&&(l=l.bind(h));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:a.convert(Object.assign({},h),Promise.prototype),p=u.call(d,o,l);return a.convert(p,h.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(u){l=l.thenCore(u)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,ir.getPageSize=function(o,l,u){if(pn(o)==="object"){var h=o;o=h.orientation,l=h.unit||l,u=h.format||u}l=l||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+u).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var v,y=0,b=0;if(f.hasOwnProperty(p))y=f[p][1]/d,b=f[p][0]/d;else try{y=u[1],b=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",b>y&&(v=b,b=y,y=v);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>b&&(v=b,b=y,y=v)}return{width:b,height:y,unit:l,k:d,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(yx):null;var u=new a(l);return l.worker?u:u.from(o).doCallback()}}(ir.API),ir.API.addJS=function(t){return cS=t,this.internal.events.subscribe("postPutResources",function(){Qp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Qp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),lS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+cS+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Qp!==void 0&&lS!==void 0&&this.internal.out("/Names <</JavaScript "+Qp+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=n.exec(a);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,h=[];for(s=0;s<u;s++){var d=r.internal.newObject();h.push(d);var p=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<h.length;s++)r.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,s){var a={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var a=n.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])}(ir.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,s,a,o){var l,u=this.decode.DCT_DECODE,h=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,l=function(d){for(var p,f=256*d.charCodeAt(4)+d.charCodeAt(5),v=d.length,y={width:0,height:0,numcomponents:1},b=4;b<v;b+=2){if(b+=f,e.indexOf(d.charCodeAt(b+1))!==-1){p=256*d.charCodeAt(b+5)+d.charCodeAt(b+6),y={width:256*d.charCodeAt(b+7)+d.charCodeAt(b+8),height:p,numcomponents:d.charCodeAt(b+9)};break}f=256*d.charCodeAt(b+2)+d.charCodeAt(b+3)}return y}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}h={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:i}}return h}}(ir.API),ir.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=OB(t,{checkCrc:!0}),a=s.width,o=s.height,l=s.channels,u=s.palette,h=s.depth;i=u&&l===1?function(C){for(var A=C.width,D=C.height,N=C.data,j=C.palette,P=C.depth,se=!1,ge=[],ve=[],ye=void 0,he=!1,_e=0,Ue=0;Ue<j.length;Ue++){var Ie=d3(j[Ue],4),L=Ie[0],O=Ie[1],B=Ie[2],z=Ie[3];ge.push(L,O,B),z!=null&&(z===0?(_e++,ve.length<1&&ve.push(Ue)):z<255&&(he=!0))}if(he||_e>1){se=!0,ve=void 0;var J=A*D;ye=new Uint8Array(J);for(var fe=new DataView(N.buffer),Se=0;Se<J;Se++){var Ae=wx(fe,Se,P),Ne=d3(j[Ae],4)[3];ye[Se]=Ne}}else _e===0&&(ve=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:se?8:void 0,colorBytes:N,alphaBytes:ye,needSMask:se,palette:ge,mask:ve}}(s):l===2||l===4?function(C){for(var A=C.data,D=C.width,N=C.height,j=C.channels,P=C.depth,se=j===2?"DeviceGray":"DeviceRGB",ge=j-1,ve=D*N,ye=ge,he=ve*ye,_e=1*ve,Ue=Math.ceil(he*P/8),Ie=Math.ceil(_e*P/8),L=new Uint8Array(Ue),O=new Uint8Array(Ie),B=new DataView(A.buffer),z=new DataView(L.buffer),J=new DataView(O.buffer),fe=!1,Se=0;Se<ve;Se++){for(var Ae=Se*j,Ne=0;Ne<ye;Ne++)yS(z,wx(B,Ae+Ne,P),Se*ye+Ne,P);var Xe=wx(B,Ae+ye,P);Xe<(1<<P)-1&&(fe=!0),yS(J,Xe,1*Se,P)}return{colorSpace:se,colorsPerPixel:ge,sMaskBitsPerComponent:fe?P:void 0,colorBytes:L,alphaBytes:O,needSMask:fe}}(s):function(C){var A=C.data,D=C.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:D,colorsPerPixel:D==="DeviceGray"?1:3,colorBytes:A instanceof Uint16Array?function(N){for(var j=N.length,P=new Uint8Array(2*j),se=new DataView(P.buffer,P.byteOffset,P.byteLength),ge=0;ge<j;ge++)se.setUint16(2*ge,N[ge],!1);return P}(A):A,needSMask:!1}}(s);var d,p,f,v=i,y=v.colorSpace,b=v.colorsPerPixel,w=v.sMaskBitsPerComponent,S=v.colorBytes,k=v.alphaBytes,R=v.needSMask,q=v.palette,K=v.mask,E=null;return n!==ir.API.image_compression.NONE&&typeof av=="function"?(E=function(C){var A;switch(C){case ir.API.image_compression.FAST:A=11;break;case ir.API.image_compression.MEDIUM:A=13;break;case ir.API.image_compression.SLOW:A=14;break;default:A=12}return A}(n),d=this.decode.FLATE_DECODE,p="/Predictor ".concat(E," /Colors ").concat(b," /BitsPerComponent ").concat(h," /Columns ").concat(a),t=dS(S,Math.ceil(a*b*h/8),b,h,n),R&&(f=dS(k,Math.ceil(a*w/8),1,w,n))):(d=void 0,p=void 0,t=S,R&&(f=k)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:r,data:t,index:e,filter:d,decodeParameters:p,transparency:K,palette:q,sMask:f,predictor:E,width:a,height:o,bitsPerComponent:h,sMaskBitsPerComponent:w,colorSpace:y}}},function(t){t.processGIF89A=function(e,r,n,i){var s=new sU(e),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:a,height:o},h=new _x(100).encode(u,100);return t.processJPEG.call(this,h,r,n,i)},t.processGIF87A=t.processGIF89A}(ir.API),so.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},so.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){En.log("bit decode error:"+r)}},so.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},so.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*i*4,o=s>>4,l=15&s,u=this.palette[o];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},so.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},so.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,h=n*this.width*4+4*i;this.data[h]=l,this.data[h+1]=o,this.data[h+2]=a,this.data[h+3]=u}this.pos+=t}},so.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&r)/r*255|0,u=(a>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=u,this.data[h+1]=l,this.data[h+2]=o,this.data[h+3]=255}this.pos+=t}},so.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},so.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=a}},so.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,i){var s=new so(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},u=new _x(100).encode(l,100);return t.processJPEG.call(this,u,r,n,i)}}(ir.API),wS.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,i){var s=new wS(e),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},u=new _x(100).encode(l,100);return t.processJPEG.call(this,u,r,n,i)}}(ir.API),ir.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,u=0;u<i;u+=4){var h=n[u],d=n[u+1],p=n[u+2],f=n[u+3];s[o++]=h,s[o++]=d,s[o++]=p,a[l++]=f}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:v,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ir.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Yu=ir.API,Zp=Yu.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=u.fof?u.fof:1,d=e.doKerning!==!1,p=0,f=t.length,v=0,y=o[0]||l,b=[];for(r=0;r<f;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+a*(1e3/s)||0)/1e3):(p=d&&pn(u[n])==="object"&&!isNaN(parseInt(u[n][v],10))?u[n][v]/h:0,b.push((o[n]||y)/l+p)),v=n;return b},uS=Yu.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Yu.processArabic&&(t=Yu.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:Zp.apply(this,arguments).reduce(function(s,a){return s+a},0)},hS=function(t,e,r,n){for(var i=[],s=0,a=t.length,o=0;s!==a&&o+e[s]<r;)o+=e[s],s++;i.push(t.slice(0,s));var l=s;for(o=0;s!==a;)o+e[s]>n&&(i.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},fS=function(t,e,r){r||(r={});var n,i,s,a,o,l,u,h=[],d=[h],p=r.textIndent||0,f=0,v=0,y=t.split(" "),b=Zp.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var w=Array(l).join(" "),S=[];y.map(function(R){(R=R.split(/\s*\n/)).length>1?S=S.concat(R.map(function(q,K){return(K&&q.length?`
`:"")+q})):S.push(R[0])}),y=S,l=uS.apply(this,[w,r])}for(s=0,a=y.length;s<a;s++){var k=0;if(n=y[s],l&&n[0]==`
`&&(n=n.substr(1),k=1),p+f+(v=(i=Zp.apply(this,[n,r])).reduce(function(R,q){return R+q},0))>e||k){if(v>e){for(o=hS.apply(this,[n,i,e-(p+f),e]),h.push(o.shift()),h=[o.pop()];o.length;)d.push([o.shift()]);v=i.slice(n.length-(h[0]?h[0].length:0)).reduce(function(R,q){return R+q},0)}else h=[n];d.push(h),p=v+l,f=b}else h.push(n),p+=f+v,f=b}return u=l?function(R,q){return(q?w:"")+R.join(" ")}:function(R){return R.join(" ")},d.map(u)},Yu.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var d=this.internal.getFont(h.fontName,h.fontStyle),p="Unicode";return d.metadata[p]?{widths:d.metadata[p].widths||{0:1},kerning:d.metadata[p].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=r.lineIndent;var o,l,u=[];for(o=0,l=n.length;o<l;o++)u=u.concat(fS.apply(this,[n[o],a,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[r[s]]=e[s],i[e[s]]=r[s];var a=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var f,v,y,b,w=["{"];for(var S in p){if(f=p[S],isNaN(parseInt(S,10))?v="'"+S+"'":(S=parseInt(S,10),v=(v=a(S).slice(2)).slice(0,-1)+i[v.slice(-1)]),typeof f=="number")f<0?(y=a(f).slice(3),b="-"):(y=a(f).slice(2),b=""),y=b+y.slice(0,-1)+i[y.slice(-1)];else{if(pn(f)!=="object")throw new Error("Don't know what to do with value type "+pn(f)+".");y=o(f)}w.push(v+y)}return w.push("}"),w.join("")},l=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,v,y,b,w={},S=1,k=w,R=[],q="",K="",E=p.length-1,C=1;C<E;C+=1)(b=p[C])=="'"?f?(y=f.join(""),f=void 0):f=[]:f?f.push(b):b=="{"?(R.push([k,y]),k={},y=void 0):b=="}"?((v=R.pop())[0][v[1]]=k,y=void 0,k=v[0]):b=="-"?S=-1:y===void 0?n.hasOwnProperty(b)?(q+=n[b],y=parseInt(q,16)*S,S=1,q=""):q+=b:n.hasOwnProperty(b)?(K+=n[b],k[y]=parseInt(K,16)*S,S=1,y=void 0,K=""):K+=b;return w},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var f=p.font,v=d.Unicode[f.postScriptName];v&&(f.metadata.Unicode={},f.metadata.Unicode.widths=v.widths,f.metadata.Unicode.kerning=v.kerning);var y=h.Unicode[f.postScriptName];y&&(f.metadata.Unicode.encoding=y,f.encoding=y.codePages[0])}])}(ir.API),function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=r.charCodeAt(s);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,s=r.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Rm(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,n)}}])}(ir),ir.API.addSvgAsImage=function(t,e,r,n,i,s,a,o){if(isNaN(e)||isNaN(r))throw En.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw En.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=i;var u=l.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(dr.canvg?Promise.resolve(dr.canvg):Em(()=>import("./index.es-BFMBbhMi.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(h)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),e,r,n,i,a,o)})},ir.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},ir.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],u=0,h=0,d=0;function p(v,y){var b,w=!1;for(b=0;b<v.length;b+=1)v[b]===y&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=o.length;for(d=0;d<f;d+=1)r[o[d]].value=r[o[d]].defaultValue,r[o[d]].explicitSet=!1}if(pn(t)==="object"){for(i in t)if(s=t[i],p(o,i)&&s!==void 0){if(r[i].type==="boolean"&&typeof s=="boolean")r[i].value=s;else if(r[i].type==="name"&&p(r[i].valueSet,s))r[i].value=s;else if(r[i].type==="integer"&&Number.isInteger(s))r[i].value=s;else if(r[i].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(h=0;h<s[u].length;h+=1)typeof s[u][h]!="number"&&(n=!1);n===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}r[i].value="["+l.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,y=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?y.push("/"+v+" /"+r[v].value):y.push("/"+v+" "+r[v].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+a.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(ir.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,u=["","0","00","000","0000"],h=[""],d=0,p=s.length;d<p;++d){if(o=a.metadata.characterToGlyph(s.charCodeAt(d)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(d),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return h.join("");o=o.toString(16),h.push(u[4-o.length],o)}return h.join("")},n=function(s){var a,o,l,u,h,d,p;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,p=(o=Object.keys(s).sort(function(f,v){return f-v})).length;d<p;d++)a=o[d],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(u=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+u+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,u=a.newObject,h=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var d=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),f="",v=0;v<p.length;v++)f+=String.fromCharCode(p[v]);var y=u();h({data:f,addLength1:!0,objectId:y}),l("endobj");var b=u();h({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var w=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+sh(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var S=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+sh(o.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+sh(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+S+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,u=a.newObject,h=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var d=o.metadata.rawData,p="",f=0;f<d.length;f++)p+=String.fromCharCode(d[f]);var v=u();h({data:p,addLength1:!0,objectId:v}),l("endobj");var y=u();h({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var b=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+sh(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var w=0;w<o.metadata.hmtx.widths.length;w++)o.metadata.hmtx.widths[w]=parseInt(o.metadata.hmtx.widths[w]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+sh(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",l=s.x,u=s.y,h=s.options||{},d=s.mutex||{},p=d.pdfEscape,f=d.activeFontKey,v=d.fonts,y=f,b="",w=0,S="",k=v[y].encoding;if(v[y].encoding!=="Identity-H")return{text:o,x:l,y:u,options:h,mutex:d};for(S=o,y=f,Array.isArray(o)&&(S=o[0]),w=0;w<S.length;w+=1)v[y].metadata.hasOwnProperty("cmap")&&(a=v[y].metadata.cmap.unicode.codeMap[S[w].charCodeAt(0)]),a||S[w].charCodeAt(0)<256&&v[y].metadata.hasOwnProperty("Unicode")?b+=S[w]:b+="";var R="";return parseInt(y.slice(1))<14||k==="WinAnsiEncoding"?R=p(b,y).split("").map(function(q){return q.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(R=r(b,v[y])),d.isHex=!0,{text:R,x:l,y:u,options:h,mutex:d}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?o.push([i(Object.assign({},l,{text:a[u][0]})).text,a[u][1],a[u][2]]):o.push(i(Object.assign({},l,{text:a[u]})).text);s.text=o}else s.text=i(Object.assign({},l,{text:a})).text}])}(ir),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ir.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,s,a,o,l,u,h,d=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,k=0;this.__bidiEngine__={};var R=function(N){var j=N.charCodeAt(),P=j>>8,se=y[P];return se!==void 0?d[256*se+(255&j)]:P===252||P===253?"AL":w.test(P)?"L":P===8?"R":"N"},q=function(N){for(var j,P=0;P<N.length;P++){if((j=R(N.charAt(P)))==="L")return!1;if(j==="R")return!0}return!1},K=function(N,j,P,se){var ge,ve,ye,he,_e=j[se];switch(_e){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"N":case"AN":break;case"EN":S&&(_e="AN");break;case"AL":S=!0,_e="R";break;case"WS":case"BN":_e="N";break;case"CS":se<1||se+1>=j.length||(ge=P[se-1])!=="EN"&&ge!=="AN"||(ve=j[se+1])!=="EN"&&ve!=="AN"?_e="N":S&&(ve="AN"),_e=ve===ge?ve:"N";break;case"ES":_e=(ge=se>0?P[se-1]:"B")==="EN"&&se+1<j.length&&j[se+1]==="EN"?"EN":"N";break;case"ET":if(se>0&&P[se-1]==="EN"){_e="EN";break}if(S){_e="N";break}for(ye=se+1,he=j.length;ye<he&&j[ye]==="ET";)ye++;_e=ye<he&&j[ye]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(he=j.length,ye=se+1;ye<he&&j[ye]==="NSM";)ye++;if(ye<he){var Ue=N[se],Ie=Ue>=1425&&Ue<=2303||Ue===64286;if(ge=j[ye],Ie&&(ge==="R"||ge==="AL")){_e="R";break}}}_e=se<1||(ge=j[se-1])==="B"?"N":P[se-1];break;case"B":S=!1,i=!0,_e=k;break;case"S":s=!0,_e="N"}return _e},E=function(N,j,P){var se=N.split("");return P&&C(se,P,{hiLevel:k}),se.reverse(),j&&j.reverse(),se.join("")},C=function(N,j,P){var se,ge,ve,ye,he,_e=-1,Ue=N.length,Ie=0,L=[],O=k?f:p,B=[];for(S=!1,i=!1,s=!1,ge=0;ge<Ue;ge++)B[ge]=R(N[ge]);for(ve=0;ve<Ue;ve++){if(he=Ie,L[ve]=K(N,B,L,ve),se=240&(Ie=O[he][v[L[ve]]]),Ie&=15,j[ve]=ye=O[Ie][5],se>0)if(se===16){for(ge=_e;ge<ve;ge++)j[ge]=1;_e=-1}else _e=-1;if(O[Ie][6])_e===-1&&(_e=ve);else if(_e>-1){for(ge=_e;ge<ve;ge++)j[ge]=ye;_e=-1}B[ve]==="B"&&(j[ve]=0),P.hiLevel|=ye}s&&function(z,J,fe){for(var Se=0;Se<fe;Se++)if(z[Se]==="S"){J[Se]=k;for(var Ae=Se-1;Ae>=0&&z[Ae]==="WS";Ae--)J[Ae]=k}}(B,j,Ue)},A=function(N,j,P,se,ge){if(!(ge.hiLevel<N)){if(N===1&&k===1&&!i)return j.reverse(),void(P&&P.reverse());for(var ve,ye,he,_e,Ue=j.length,Ie=0;Ie<Ue;){if(se[Ie]>=N){for(he=Ie+1;he<Ue&&se[he]>=N;)he++;for(_e=Ie,ye=he-1;_e<ye;_e++,ye--)ve=j[_e],j[_e]=j[ye],j[ye]=ve,P&&(ve=P[_e],P[_e]=P[ye],P[ye]=ve);Ie=he}Ie++}}},D=function(N,j,P){var se=N.split(""),ge={hiLevel:k};return P||(P=[]),C(se,P,ge),function(ve,ye,he){if(he.hiLevel!==0&&h)for(var _e,Ue=0;Ue<ve.length;Ue++)ye[Ue]===1&&(_e=b.indexOf(ve[Ue]))>=0&&(ve[Ue]=b[_e+1])}(se,P,ge),A(2,se,j,P,ge),A(1,se,j,P,ge),se.join("")};return this.__bidiEngine__.doBidiReorder=function(N,j,P){if(function(ge,ve){if(ve)for(var ye=0;ye<ge.length;ye++)ve[ye]=ye;o===void 0&&(o=q(ge)),u===void 0&&(u=q(ge))}(N,j),a||!l||u)if(a&&l&&o^u)k=o?1:0,N=E(N,j,P);else if(!a&&l&&u)k=o?1:0,N=D(N,j,P),N=E(N,j);else if(!a||o||l||u){if(a&&!l&&o^u)N=E(N,j),o?(k=0,N=D(N,j,P)):(k=1,N=D(N,j,P),N=E(N,j));else if(a&&o&&!l&&u)k=1,N=D(N,j,P),N=E(N,j);else if(!a&&!l&&o^u){var se=h;o?(k=1,N=D(N,j,P),k=0,h=!1,N=D(N,j,P),h=se):(k=0,N=D(N,j,P),N=E(N,j),k=1,h=!1,N=D(N,j,P),h=se,N=E(N,j))}}else k=0,N=D(N,j,P);else k=o?1:0,N=D(N,j,P);return N},this.__bidiEngine__.setOptions=function(N){N&&(a=N.isInputVisual,l=N.isOutputVisual,o=N.isInputRtl,u=N.isOutputRtl,h=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([r.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([r.doBidiReorder(i[o])]);n.text=a}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(ir),ir.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Fc(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new wU(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new aU(this.contents),this.head=new lU(this),this.name=new dU(this),this.cmap=new jk(this),this.toUnicode={},this.hhea=new cU(this),this.maxp=new pU(this),this.hmtx=new mU(this),this.post=new hU(this),this.os2=new uU(this),this.loca=new vU(this),this.glyf=new gU(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,u;for(u=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Ao,Fc=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,s,a,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*s+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,s;for(s=[],n=0,i=e.length;n<i;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),aU=function(){var t;function e(r){var n,i,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,s,a,o,l,u,h,d,p,f,v,y;for(y in f=Object.keys(r).length,l=Math.log(2),d=16*Math.floor(Math.log(f)/l),a=Math.floor(d/l),h=16*f-d,(i=new Fc).writeInt(this.scalarType),i.writeShort(f),i.writeShort(d),i.writeShort(a),i.writeShort(h),s=16*f,u=i.pos+s,o=null,v=[],r)for(p=r[y],i.writeString(y),i.writeInt(t(p)),i.writeInt(u),i.writeInt(p.length),v=v.concat(p),y==="head"&&(o=u),u+=p.length;u%4;)v.push(0),u++;return i.write(v),n=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(n),i.data},t=function(r){var n,i,s,a;for(r=Rk.call(r);r.length%4;)r.push(0);for(s=new Fc(r),i=0,n=0,a=r.length;n<a;n=n+=4)i+=s.readUInt32();return 4294967295&i},e}(),oU={}.hasOwnProperty,Yo=function(t,e){for(var r in e)oU.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Ao=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var lU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yo(t,Ao),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new Fc).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),_S=function(){function t(e,r){var n,i,s,a,o,l,u,h,d,p,f,v,y,b,w,S,k;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),p=f/2,e.pos+=6,s=function(){var R,q;for(q=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)q.push(e.readUInt16());return q}(),e.pos+=2,y=function(){var R,q;for(q=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)q.push(e.readUInt16());return q}(),u=function(){var R,q;for(q=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)q.push(e.readUInt16());return q}(),h=function(){var R,q;for(q=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)q.push(e.readUInt16());return q}(),i=(this.length-e.pos+this.offset)/2,o=function(){var R,q;for(q=[],l=R=0;0<=i?R<i:R>i;l=0<=i?++R:--R)q.push(e.readUInt16());return q}(),l=w=0,k=s.length;w<k;l=++w)for(b=s[l],n=S=v=y[l];v<=b?S<=b:S>=b;n=v<=b?++S:--S)h[l]===0?a=n+u[l]:(a=o[h[l]/2+(n-v)-(p-l)]||0)!==0&&(a+=u[l]),this.codeMap[n]=65535&a}e.pos=d}return t.encode=function(e,r){var n,i,s,a,o,l,u,h,d,p,f,v,y,b,w,S,k,R,q,K,E,C,A,D,N,j,P,se,ge,ve,ye,he,_e,Ue,Ie,L,O,B,z,J,fe,Se,Ae,Ne,Xe,et;switch(se=new Fc,a=Object.keys(e).sort(function(ot,mt){return ot-mt}),r){case"macroman":for(y=0,b=function(){var ot=[];for(v=0;v<256;++v)ot.push(0);return ot}(),S={0:0},s={},ge=0,_e=a.length;ge<_e;ge++)S[Ae=e[i=a[ge]]]==null&&(S[Ae]=++y),s[i]={old:e[i],new:S[e[i]]},b[i]=S[e[i]];return se.writeUInt16(1),se.writeUInt16(0),se.writeUInt32(12),se.writeUInt16(0),se.writeUInt16(262),se.writeUInt16(0),se.write(b),{charMap:s,subtable:se.data,maxGlyphID:y+1};case"unicode":for(j=[],d=[],k=0,S={},n={},w=u=null,ve=0,Ue=a.length;ve<Ue;ve++)S[q=e[i=a[ve]]]==null&&(S[q]=++k),n[i]={old:q,new:S[q]},o=S[q]-i,w!=null&&o===u||(w&&d.push(w),j.push(i),u=o),w=i;for(w&&d.push(w),d.push(65535),j.push(65535),D=2*(A=j.length),C=2*Math.pow(Math.log(A)/Math.LN2,2),p=Math.log(C/2)/Math.LN2,E=2*A-C,l=[],K=[],f=[],v=ye=0,Ie=j.length;ye<Ie;v=++ye){if(N=j[v],h=d[v],N===65535){l.push(0),K.push(0);break}if(N-(P=n[N].new)>=32768)for(l.push(0),K.push(2*(f.length+A-v)),i=he=N;N<=h?he<=h:he>=h;i=N<=h?++he:--he)f.push(n[i].new);else l.push(P-N),K.push(0)}for(se.writeUInt16(3),se.writeUInt16(1),se.writeUInt32(12),se.writeUInt16(4),se.writeUInt16(16+8*A+2*f.length),se.writeUInt16(0),se.writeUInt16(D),se.writeUInt16(C),se.writeUInt16(p),se.writeUInt16(E),fe=0,L=d.length;fe<L;fe++)i=d[fe],se.writeUInt16(i);for(se.writeUInt16(0),Se=0,O=j.length;Se<O;Se++)i=j[Se],se.writeUInt16(i);for(Ne=0,B=l.length;Ne<B;Ne++)o=l[Ne],se.writeUInt16(o);for(Xe=0,z=K.length;Xe<z;Xe++)R=K[Xe],se.writeUInt16(R);for(et=0,J=f.length;et<J;et++)y=f[et],se.writeUInt16(y);return{charMap:n,subtable:se.data,maxGlyphID:k+1}}},t}(),jk=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yo(t,Ao),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new _S(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,i;return r==null&&(r="macroman"),n=_S.encode(e,r),(i=new Fc).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),cU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yo(t,Ao),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),uU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yo(t,Ao),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),hU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yo(t,Ao),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)r=e.readByte(),i.push(this.names.push(e.readString(r)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var a,o,l;for(l=[],s=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;s=0<=o?++a:--a)l.push(e.readUInt32());return l}).call(this)}},t}(),fU=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},dU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yo(t,Ao),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,i,s,a,o,l,u,h,d,p;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},s=h=0,d=n.length;h<d;s=++h)i=n[s],e.pos=i.offset,u=e.readString(i.length),a=new fU(u,i),l[p=i.nameID]==null&&(l[p]=[]),l[i.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),pU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yo(t,Ao),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),mU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yo(t,Ao),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,i,s,a,o,l;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)h.push(e.readInt16());return h}(),this.widths=(function(){var u,h,d,p;for(p=[],u=0,h=(d=this.metrics).length;u<h;u++)s=d[u],p.push(s.advance);return p}).call(this),n=this.widths[this.widths.length-1],l=[],r=a=0;0<=i?a<i:a>i;r=0<=i?++a:--a)l.push(this.widths.push(n));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Rk=[].slice,gU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yo(t,Ao),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,i,s,a,o,l,u,h,d;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,a=(o=new Fc(r.read(i))).readShort(),u=o.readShort(),d=o.readShort(),l=o.readShort(),h=o.readShort(),this.cache[e]=a===-1?new yU(o,u,d,l,h):new xU(o,a,u,d,l,h),this.cache[e]))},t.prototype.encode=function(e,r,n){var i,s,a,o,l;for(a=[],s=[],o=0,l=r.length;o<l;o++)i=e[r[o]],s.push(a.length),i&&(a=a.concat(i.encode(n)));return s.push(a.length),{table:a,offsets:s}},t}(),xU=function(){function t(e,r,n,i,s,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),yU=function(){function t(e,r,n,i,s){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Fc(Rk.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),vU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yo(t,Ao),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,a=0;a<n.length;++a)if(n[a]=i,s<r.length&&r[s]==a){++s,n[a]=i;var o=this.offsets[a],l=this.offsets[a+1]-o;l>0&&(i+=l)}for(var u=new Array(4*n.length),h=0;h<n.length;++h)u[4*h+3]=255&n[h],u[4*h+2]=(65280&n[h])>>8,u[4*h+1]=(16711680&n[h])>>16,u[4*h]=(4278190080&n[h])>>24;return u},t}(),wU=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,s;for(r in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,s,a,o,l;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in r=[],i)(n=i[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in l=this.glyphsFor(r))n=l[s],i[s]=n;return i},t.prototype.encode=function(e,r){var n,i,s,a,o,l,u,h,d,p,f,v,y,b,w;for(i in n=jk.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),f={0:0},w=n.charMap)f[(l=w[i]).old]=l.new;for(v in p=n.maxGlyphID,a)v in f||(f[v]=p++);return h=function(S){var k,R;for(k in R={},S)R[S[k]]=k;return R}(f),d=Object.keys(h).sort(function(S,k){return S-k}),y=function(){var S,k,R;for(R=[],S=0,k=d.length;S<k;S++)o=d[S],R.push(h[o]);return R}(),s=this.font.glyf.encode(a,y,f),u=this.font.loca.encode(s.offsets,y),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},t}();ir.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,s,a;if(Array.isArray(r))return"["+function(){var o,l,u;for(u=[],o=0,l=r.length;o<l;o++)n=r[o],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in s=["<<"],r)a=r[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+r},e}();function Fk(t,e,r,n,i){n=n||{};var s=1.15,a=i.internal.scaleFactor,o=i.internal.getFontSize()/a,l=i.getLineHeightFactor?i.getLineHeightFactor():s,u=o*l,h=/\r\n|\r|\n/g,d="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(d=typeof t=="string"?t.split(h):t,p=d.length||1),r+=o*(2-s),n.valign==="middle"?r-=p/2*u:n.valign==="bottom"&&(r-=p*u),n.halign==="center"||n.halign==="right"){var f=o;if(n.halign==="center"&&(f*=.5),d&&p>=1){for(var v=0;v<d.length;v++)i.text(d[v],e-i.getStringUnitWidth(d[v])*f,r),r+=u;return i}e-=i.getStringUnitWidth(t)*f}return n.halign==="justify"?i.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(t,e,r),i}var bS={},zh=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:bS=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,i,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,l=a.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var h=t.unifyColor(e.fillColor);h&&(n=this.jsPDFDocument).setFillColor.apply(n,h),h=t.unifyColor(e.textColor),h&&(i=this.jsPDFDocument).setTextColor.apply(i,h),h=t.unifyColor(e.lineColor),h&&(s=this.jsPDFDocument).setDrawColor.apply(s,h),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,i,s){return this.jsPDFDocument.rect(e,r,n,i,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return bS||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),pv=function(t,e){return pv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},pv(t,e)};function Dk(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");pv(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Mk=function(t){Dk(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function _U(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function bU(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function D1(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],i=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,a){return Math.max(s,a)},0);return i}function Ok(t,e,r,n){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:s});var a=Bk(i,!1);a&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,a)}function Bk(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function zg(t,e){var r,n,i,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function Uk(t,e){var r=zg(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function SU(t,e,r,n,i){var s={},a=1.3333333333333333,o=bx(e,function(k){return i.getComputedStyle(k).backgroundColor});o!=null&&(s.fillColor=o);var l=bx(e,function(k){return i.getComputedStyle(k).color});l!=null&&(s.textColor=l);var u=EU(n,r);u&&(s.cellPadding=u);var h="borderTopColor",d=a*r,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var f=(parseFloat(p)||0)/d;f&&(s.lineWidth=f)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/d,right:(parseFloat(n.borderRightWidth)||0)/d,bottom:(parseFloat(n.borderBottomWidth)||0)/d,left:(parseFloat(n.borderLeftWidth)||0)/d},s.lineWidth.top||(s.lineWidth.right?h="borderRightColor":s.lineWidth.bottom?h="borderBottomColor":s.lineWidth.left&&(h="borderLeftColor"));var v=bx(e,function(k){return i.getComputedStyle(k)[h]});v!=null&&(s.lineColor=v);var y=["left","right","center","justify"];y.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),y=["middle","bottom","top"],y.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(s.fontSize=b/a);var w=AU(n);w&&(s.fontStyle=w);var S=(n.fontFamily||"").toLowerCase();return t.indexOf(S)!==-1&&(s.font=S),s}function AU(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function bx(t,e){var r=Vk(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function Vk(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:Vk(t.parentElement,e):r}function EU(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(o){return parseInt(o||"0")/n}),a=zg(s,0);return i>a.top&&(a.top=i),i>a.bottom&&(a.bottom=i),a}function zk(t,e,r,n,i){var s,a;n===void 0&&(n=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),h=[],d=[],p=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:h,body:d,foot:p};for(var f=0;f<o.rows.length;f++){var v=o.rows[f],y=(a=(s=v==null?void 0:v.parentElement)===null||s===void 0?void 0:s.tagName)===null||a===void 0?void 0:a.toLowerCase(),b=NU(l,u,r,v,n,i);b&&(y==="thead"?h.push(b):y==="tfoot"?p.push(b):d.push(b))}return{head:h,body:d,foot:p}}function NU(t,e,r,n,i,s){for(var a=new Mk(n),o=0;o<n.cells.length;o++){var l=n.cells[o],u=r.getComputedStyle(l);if(i||u.display!=="none"){var h=void 0;s&&(h=SU(t,l,e,u,r)),a.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:h,_element:l,content:TU(l)})}}var d=r.getComputedStyle(n);if(a.length>0&&(i||d.display!=="none"))return a}function TU(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function kU(t,e,r){for(var n=0,i=[t,e,r];n<i.length;n++){var s=i[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function dl(t,e,r,n,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function Hk(t,e){var r=new zh(t),n=r.getDocumentOptions(),i=r.getGlobalOptions();kU(i,n,e);var s=dl({},i,n,e),a;typeof window<"u"&&(a=window);var o=CU(i,n,e),l=IU(i,n,e),u=LU(r,s),h=jU(r,s,a);return{id:e.tableId,content:h,hooks:l,styles:o,settings:u}}function CU(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var u=t[l],h=e[l],d=r[l];n.columnStyles=dl({},u,h,d)}else{var p=[t,e,r],f=p.map(function(v){return v[l]||{}});n[l]=dl({},f[0],f[1],f[2])}},s=0,a=Object.keys(n);s<a.length;s++){var o=a[s];i(o)}return n}function IU(t,e,r){for(var n=[t,e,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,a=n;s<a.length;s++){var o=a[s];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function LU(t,e){var r,n,i,s,a,o,l,u,h,d,p,f,v=zg(e.margin,40/t.scaleFactor()),y=(r=PU(t,e.startY))!==null&&r!==void 0?r:v.top,b;e.showFoot===!0?b="everyPage":e.showFoot===!1?b="never":b=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var w;e.showHead===!0?w="everyPage":e.showHead===!1?w="never":w=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var S=(s=e.useCss)!==null&&s!==void 0?s:!1,k=e.theme||(S?"plain":"striped"),R=!!e.horizontalPageBreak,q=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:S,theme:k,startY:y,margin:v,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(h=e.tableWidth)!==null&&h!==void 0?h:"auto",showHead:w,showFoot:b,tableLineWidth:(d=e.tableLineWidth)!==null&&d!==void 0?d:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:R,horizontalPageBreakRepeat:q,horizontalPageBreakBehaviour:(f=e.horizontalPageBreakBehaviour)!==null&&f!==void 0?f:"afterAllRows"}}function PU(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),i=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var a=r.startPageNumber+r.pageNumber-1;s=a===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function jU(t,e,r){var n=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(r){var o=zk(t,e.html,r,a,e.useCss)||{};n=o.head||n,i=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||RU(n,i,s);return{columns:l,head:n,body:i,foot:s}}function RU(t,e,r){var n=t[0]||e[0]||r[0]||[],i=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var a=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(a=(o==null?void 0:o.colSpan)||1);for(var l=0;l<a;l++){var u=void 0;Array.isArray(n)?u=i.length:u=s+(l>0?"_".concat(l):"");var h={dataKey:u};i.push(h)}}),i}var mv=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),FU=function(t){Dk(e,t);function e(r,n,i,s,a,o){var l=t.call(this,r,n,o)||this;return l.cell=i,l.row=s,l.column=a,l.section=s.section,l}return e}(mv),DU=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,i,s,a){for(var o=0,l=r;o<l.length;o++){var u=l[o],h=new FU(e,this,n,i,s,a),d=u(h)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],d)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var s=i[n];s(new mv(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var s=i[n];s(new mv(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),qk=function(){function t(e,r,n,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof Mk&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=i,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,i){var s;return Math.max(n,((s=r.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var i=r.cells[n.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(i,s){var a=n.cells[s.index];if(!a)return 0;var o=r.getLineHeight(a.styles.fontSize),l=a.padding("vertical"),u=l+o;return u>i?u:i},0)},t}(),$k=function(){function t(e,r,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*r,s=n*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=zg(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),MU=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,i=e.allRows();n<i.length;n++){var s=i[n],a=s.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(r=Math.max(r,a.styles.cellWidth))}return r},t}();function OU(t,e){BU(t,e);var r=[],n=0;e.columns.forEach(function(s){var a=s.getMaxCustomCellWidth(e);a?s.width=a:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var i=e.getWidth(t.pageSize().width)-n;i&&(i=gv(r,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=gv(r,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.log("Of the table content, ".concat(i," units width could not fit page"))),VU(e),zU(e,t),UU(e)}function BU(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,i=Uk(t,e);e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],u=s.cells[l.index];if(u){var h=e.hooks.didParseCell;e.callCellHooks(t,h,u,s,l,null);var d=u.padding("horizontal");u.contentWidth=D1(u.text,u.styles,t)+d;var p=D1(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var f=10/r;u.minWidth=u.styles.minCellWidth||f,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var h=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},d=h.cellWidth||h.minCellWidth;d&&typeof d=="number"&&(l.minWidth=d,l.wrappedWidth=d)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function gv(t,e,r){for(var n=e,i=t.reduce(function(f,v){return f+v.wrappedWidth},0),s=0;s<t.length;s++){var a=t[s],o=a.wrappedWidth/i,l=n*o,u=a.width+l,h=r(a),d=u<h?h:u;e-=d-a.width,a.width=d}if(e=Math.round(e*1e10)/1e10,e){var p=t.filter(function(f){return e<0?f.width>r(f):!0});p.length&&(e=gv(p,e,r))}return e}function UU(t){for(var e={},r=1,n=t.allRows(),i=0;i<n.length;i++)for(var s=n[i],a=0,o=t.columns;a<o.length;a++){var l=o[a],u=e[l.index];if(r>1)r--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var h=s.cells[l.index];if(!h)continue;if(h.height=s.height,h.rowSpan>1){var d=n.length-i,p=h.rowSpan>d?d:h.rowSpan;e[l.index]={cell:h,left:p,row:s}}}}}function VU(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],i=null,s=0,a=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(a-=1,a>1&&t.columns[o+1])s+=l.width,delete n.cells[l.index];else if(i){var u=i;delete n.cells[l.index],i=null,u.width=l.width+s}else{var u=n.cells[l.index];if(!u)continue;if(a=u.colSpan,s=0,u.colSpan>1){i=u,s+=l.width;continue}u.width=l.width+s}}}function zU(t,e){for(var r={count:0,height:0},n=0,i=t.allRows();n<i.length;n++){for(var s=i[n],a=0,o=t.columns;a<o.length;a++){var l=o[a],u=s.cells[l.index];if(u){e.applyStyles(u.styles,!0);var h=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,h+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=SS(u.text,h,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=SS(u.text,h,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var d=u.styles.overflow(u.text,h);typeof d=="string"?u.text=[d]:u.text=d}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<p*u.rowSpan?r={height:p,count:u.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>s.height&&(s.height=p)}}r.count--}}function SS(t,e,r,n,i){return t.map(function(s){return HU(s,e,r,n,i)})}function HU(t,e,r,n,i){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=D1(t,r,n))return t;for(;e<D1(t+i,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function Wk(t,e){var r=new zh(t),n=qU(e,r.scaleFactor()),i=new DU(e,n);return OU(r,i),r.applyStyles(r.userStyles),i}function qU(t,e){var r=t.content,n=WU(r.columns);if(r.head.length===0){var i=AS(n,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=AS(n,"foot");i&&r.foot.push(i)}var s=t.settings.theme,a=t.styles;return{columns:n,head:Sx("head",r.head,n,a,s,e),body:Sx("body",r.body,n,a,s,e),foot:Sx("foot",r.foot,n,a,s,e)}}function Sx(t,e,r,n,i,s){var a={},o=e.map(function(l,u){for(var h=0,d={},p=0,f=0,v=0,y=r;v<y.length;v++){var b=y[v];if(a[b.index]==null||a[b.index].left===0)if(f===0){var w=void 0;Array.isArray(l)?w=l[b.index-p-h]:w=l[b.dataKey];var S={};typeof w=="object"&&!Array.isArray(w)&&(S=(w==null?void 0:w.styles)||{});var k=KU(t,b,u,i,n,s,S),R=new $k(w,k,t);d[b.dataKey]=R,d[b.index]=R,f=R.colSpan-1,a[b.index]={left:R.rowSpan-1,times:f}}else f--,p++;else a[b.index].left--,f=a[b.index].times,h++}return new qk(l,u,t,d)});return o}function AS(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var i=$U(e,n.raw);i!=null&&(r[n.dataKey]=i)}}),Object.keys(r).length>0?r:null}function $U(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function WU(t){return t.map(function(e,r){var n,i;return typeof e=="object"?i=(n=e.dataKey)!==null&&n!==void 0?n:r:i=r,new MU(i,e,r)})}function KU(t,e,r,n,i,s,a){var o=bU(n),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var u=dl({},o.table,o[t],i.styles,l),h=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},d=t==="body"?h:{},p=t==="body"&&r%2===0?dl({},o.alternateRow,i.alternateRowStyles):{},f=_U(s),v=dl({},f,u,p,d);return dl(v,a)}function GU(t,e,r){var n;r===void 0&&(r={});var i=Uk(t,e),s=new Map,a=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var f=e.columns.find(function(v){return v.dataKey===p||v.index===p});f&&!s.has(f.index)&&(s.set(f.index,!0),a.push(f.index),o.push(e.columns[f.index]),i-=f.wrappedWidth)});for(var u=!0,h=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;h<e.columns.length;){if(s.has(h)){h++;continue}var d=e.columns[h].wrappedWidth;if(u||i>=d)u=!1,a.push(h),o.push(e.columns[h]),i-=d;else break;h++}return{colIndexes:a,columns:o,lastIndex:h-1}}function YU(t,e){for(var r=[],n=0;n<e.columns.length;n++){var i=GU(t,e,{start:n});i.columns.length&&(r.push(i),n=i.lastIndex)}return r}function Kk(t,e){var r=e.settings,n=r.startY,i=r.margin,s={x:i.left,y:n},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+i.bottom+a;if(r.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(p,f){return p+f.height},0);o+=u}var h=new zh(t);(r.pageBreak==="always"||r.startY!=null&&o>h.pageSize().height)&&(Yk(h),s.y=i.top),e.callWillDrawPageHooks(h,s);var d=dl({},s);e.startPageNumber=h.pageNumber(),r.horizontalPageBreak?XU(h,e,d,s):(h.applyStyles(h.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(p){return El(h,e,p,s,e.columns)}),h.applyStyles(h.userStyles),e.body.forEach(function(p,f){var v=f===e.body.length-1;M1(h,e,p,v,d,s,e.columns)}),h.applyStyles(h.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(p){return El(h,e,p,s,e.columns)})),Ok(h,e,d,s),e.callEndPageHooks(h,s),e.finalY=s.y,t.lastAutoTable=e,h.applyStyles(h.userStyles)}function XU(t,e,r,n){var i=YU(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,h){t.applyStyles(t.userStyles),h>0?Fd(t,e,r,n,u.columns,!0):ES(t,e,n,u.columns),QU(t,e,r,n,u.columns),Ax(t,e,n,u.columns)});else for(var a=-1,o=i[0],l=function(){var u=a;if(o){t.applyStyles(t.userStyles);var h=o.columns;a>=0?Fd(t,e,r,n,h,!0):ES(t,e,n,h),u=NS(t,e,a+1,n,h),Ax(t,e,n,h)}var d=u-a;i.slice(1).forEach(function(p){t.applyStyles(t.userStyles),Fd(t,e,r,n,p.columns,!0),NS(t,e,a+1,n,p.columns,d),Ax(t,e,n,p.columns)}),a=u};a<e.body.length-1;)l()}function ES(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return El(t,e,s,r,n)})}function QU(t,e,r,n,i){t.applyStyles(t.userStyles),e.body.forEach(function(s,a){var o=a===e.body.length-1;M1(t,e,s,o,r,n,i)})}function NS(t,e,r,n,i,s){t.applyStyles(t.userStyles),s=s??e.body.length;var a=Math.min(r+s,e.body.length),o=-1;return e.body.slice(r,a).forEach(function(l,u){var h=r+u===e.body.length-1,d=Gk(t,e,h,n);l.canEntireRowFit(d,i)&&(El(t,e,l,n,i),o=r+u)}),o}function Ax(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return El(t,e,s,r,n)})}function ZU(t,e,r){var n=r.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),s=Math.floor((e-i)/n);return Math.max(0,s)}function JU(t,e,r,n){var i={};t.spansMultiplePages=!0,t.height=0;for(var s=0,a=0,o=r.columns;a<o.length;a++){var l=o[a],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var h=new $k(u.raw,u.styles,u.section);h=dl(h,u),h.text=[];var d=ZU(u,e,n);u.text.length>d&&(h.text=u.text.splice(d,u.text.length));var p=n.scaleFactor(),f=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,f),u.contentHeight>=e&&(u.contentHeight=e,h.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),h.contentHeight=h.getContentHeight(p,f),h.contentHeight>s&&(s=h.contentHeight),i[l.index]=h}}var v=new qk(t.raw,-1,t.section,i,!0);v.height=s;for(var y=0,b=r.columns;y<b.length;y++){var l=b[y],h=v.cells[l.index];h&&(h.height=v.height);var u=t.cells[l.index];u&&(u.height=t.height)}return v}function eV(t,e,r,n){var i=t.pageSize().height,s=n.settings.margin,a=s.top+s.bottom,o=i-a;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),u=l<r;if(l>o)return console.log("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var h=e.hasRowSpan(n.columns),d=e.getMaxCellHeight(n.columns)>o;return d?(h&&console.log("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(h||n.settings.rowPageBreak==="avoid")}function M1(t,e,r,n,i,s,a){var o=Gk(t,e,n,s);if(r.canEntireRowFit(o,a))El(t,e,r,s,a);else if(eV(t,r,o,e)){var l=JU(r,o,e,t);El(t,e,r,s,a),Fd(t,e,i,s,a),M1(t,e,l,n,i,s,a)}else Fd(t,e,i,s,a),M1(t,e,r,n,i,s,a)}function El(t,e,r,n,i){n.x=e.settings.margin.left;for(var s=0,a=i;s<a.length;s++){var o=a[s],l=r.cells[o.index];if(!l){n.x+=o.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,r,o,n);if(u===!1){n.x+=o.width;continue}tV(t,l,n);var h=l.getTextPos();Fk(l.text,h.x,h.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function tV(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=Bk(n.lineWidth,n.fillColor);i&&t.rect(e.x,r.y,e.width,e.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),rV(t,e,r,n.lineWidth))}function rV(t,e,r,n){var i,s,a,o;n.top&&(i=r.x,s=r.y,a=r.x+e.width,o=r.y,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),l(n.top,i,s,a,o)),n.bottom&&(i=r.x,s=r.y+e.height,a=r.x+e.width,o=r.y+e.height,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),l(n.bottom,i,s,a,o)),n.left&&(i=r.x,s=r.y,a=r.x,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,i,s,a,o)),n.right&&(i=r.x+e.width,s=r.y,a=r.x+e.width,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,i,s,a,o));function l(u,h,d,p,f){t.getDocument().setLineWidth(u),t.getDocument().line(h,d,p,f,"S")}}function Gk(t,e,r,n){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-i}function Fd(t,e,r,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(o){return El(t,e,o,n,i)}),e.callEndPageHooks(t,n);var a=e.settings.margin;Ok(t,e,r,n),Yk(t),e.pageNumber++,n.x=a.left,n.y=a.top,r.y=a.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return El(t,e,o,n,i)}),t.applyStyles(t.userStyles))}function Yk(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function nV(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],i=Hk(this,n),s=Wk(this,i);return Kk(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,i){Fk(e,r,n,i,this)},t.API.autoTableSetDefaults=function(e){return zh.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){zh.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new zh(this),s=zk(i,e,window,r,!1),a=s.head,o=s.body,l=((n=a[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var Ex;function rd(t,e){var r=Hk(t,e),n=Wk(t,r);Kk(t,n)}try{if(typeof window<"u"&&window){var TS=window,kS=TS.jsPDF||((Ex=TS.jspdf)===null||Ex===void 0?void 0:Ex.jsPDF);kS&&nV(kS)}}catch(t){console.error("Could not apply autoTable plugin",t)}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var O1={};O1.version="0.18.5";var Xk=1252,iV=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Qk=function(t){iV.indexOf(t)!=-1&&(Xk=t)};function sV(){Qk(1252)}var _0=function(t){Qk(t)};function aV(){_0(1200),sV()}var Jp=function(e){return String.fromCharCode(e)},CS=function(e){return String.fromCharCode(e)},B1,hc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function b0(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0,l=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),a=(r&3)<<4|n>>4,i=t.charCodeAt(u++),o=(n&15)<<2|i>>6,l=i&63,isNaN(n)?o=l=64:isNaN(i)&&(l=64),e+=hc.charAt(s)+hc.charAt(a)+hc.charAt(o)+hc.charAt(l);return e}function Nl(t){var e="",r=0,n=0,i=0,s=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=hc.indexOf(t.charAt(u++)),a=hc.indexOf(t.charAt(u++)),r=s<<2|a>>4,e+=String.fromCharCode(r),o=hc.indexOf(t.charAt(u++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=hc.indexOf(t.charAt(u++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var Jr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Il=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Tu(t){return Jr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function IS(t){return Jr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var po=function(e){return Jr?Il(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Hg(t){if(typeof ArrayBuffer>"u")return po(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Y0(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function oV(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var rs=Jr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Il(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),i=0;for(e=0,r=0;e<t.length;r+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function lV(t){for(var e=[],r=0,n=t.length+250,i=Tu(t.length+255),s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a<128)i[r++]=a;else if(a<2048)i[r++]=192|a>>6&31,i[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++s)&1023;i[r++]=240|a>>8&7,i[r++]=128|a>>2&63,i[r++]=128|o>>6&15|(a&3)<<4,i[r++]=128|o&63}else i[r++]=224|a>>12&15,i[r++]=128|a>>6&63,i[r++]=128|a&63;r>n&&(e.push(i.slice(0,r)),r=0,i=Tu(65535),n=65530)}return e.push(i.slice(0,r)),rs(e)}var Dd=/\u0000/g,em=/[\u0001-\u0006]/g;function Hh(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function mo(t,e){var r=""+t;return r.length>=e?r:ai("0",e-r.length)+r}function mw(t,e){var r=""+t;return r.length>=e?r:ai(" ",e-r.length)+r}function U1(t,e){var r=""+t;return r.length>=e?r:r+ai(" ",e-r.length)}function cV(t,e){var r=""+Math.round(t);return r.length>=e?r:ai("0",e-r.length)+r}function uV(t,e){var r=""+t;return r.length>=e?r:ai("0",e-r.length)+r}var LS=Math.pow(2,32);function Xu(t,e){if(t>LS||t<-LS)return cV(t,e);var r=Math.round(t);return uV(r,e)}function V1(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var PS=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Nx=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function hV(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var oi={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},jS={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},fV={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function z1(t,e,r){for(var n=t<0?-1:1,i=t*n,s=0,a=1,o=0,l=1,u=0,h=0,d=Math.floor(i);u<e&&(d=Math.floor(i),o=d*a+s,h=d*u+l,!(i-d<5e-8));)i=1/(i-d),s=a,a=o,l=u,u=h;if(h>e&&(u>e?(h=l,o=s):(h=u,o=a)),!r)return[0,n*o,h];var p=Math.floor(n*o/h);return[p,n*o-p*h,h]}function tm(t,e,r){if(t>2958465||t<0)return null;var n=t|0,i=Math.floor(86400*(t-n)),s=0,a=[],o={D:n,T:i,u:86400*(t-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=vV(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var Zk=new Date(1899,11,31,0,0,0),dV=Zk.getTime(),pV=new Date(1900,2,1,0,0,0);function Jk(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=pV&&(r+=24*60*60*1e3),(r-(dV+(t.getTimezoneOffset()-Zk.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function gw(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function mV(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function gV(t){var e=t<0?12:11,r=gw(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function xV(t){var e=gw(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function yV(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=gV(t):e===10?r=t.toFixed(10).substr(0,12):r=xV(t),gw(mV(r.toUpperCase()))}function xv(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):yV(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Dc(14,Jk(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function vV(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function wV(t,e,r,n){var i="",s=0,a=0,o=r.y,l,u=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,u=e.length;break;case 3:return Nx[r.m-1][1];case 5:return Nx[r.m-1][0];default:return Nx[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,u=e.length;break;case 3:return PS[r.q][0];default:return PS[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?mo(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,s=Math.round(a*(r.S+r.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=mo(s,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var h=u>0?mo(l,u):"";return h}function fc(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var eC=/%/g;function _V(t,e,r){var n=e.replace(eC,""),i=e.length-n.length;return ml(t,n,r*Math.pow(10,2*i))+ai("%",i)}function bV(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return ml(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function tC(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+tC(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,h){return l+u+h.substr(0,(i+s)%i)+"."+h.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var rC=/# (\?+)( ?)\/( ?)(\d+)/;function SV(t,e,r){var n=parseInt(t[4],10),i=Math.round(e*n),s=Math.floor(i/n),a=i-s*n,o=n;return r+(s===0?"":""+s)+" "+(a===0?ai(" ",t[1].length+1+t[4].length):mw(a,t[1].length)+t[2]+"/"+t[3]+mo(o,t[4].length))}function AV(t,e,r){return r+(e===0?"":""+e)+ai(" ",t[1].length+2+t[4].length)}var nC=/^#*0*\.([0#]+)/,iC=/\).*[0#]/,sC=/\(###\) ###\\?-####/;function Rs(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function RS(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function FS(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function EV(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function NV(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Va(t,e,r){if(t.charCodeAt(0)===40&&!e.match(iC)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Va("n",n,r):"("+Va("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return bV(t,e,r);if(e.indexOf("%")!==-1)return _V(t,e,r);if(e.indexOf("E")!==-1)return tC(e,r);if(e.charCodeAt(0)===36)return"$"+Va(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Xu(l,e.length);if(e.match(/^[#?]+$/))return i=Xu(r,0),i==="0"&&(i=""),i.length>e.length?i:Rs(e.substr(0,e.length-i.length))+i;if(s=e.match(rC))return SV(s,l,u);if(e.match(/^#+0+$/))return u+Xu(l,e.length-e.indexOf("0"));if(s=e.match(nC))return i=RS(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Rs(s[1])).replace(/\.$/,"."+Rs(s[1])).replace(/\.(\d*)$/,function(v,y){return"."+y+ai("0",Rs(s[1]).length-y.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+RS(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+fc(Xu(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Va(t,e,-r):fc(""+(Math.floor(r)+EV(r,s[1].length)))+"."+mo(FS(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Va(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Hh(Va(t,e.replace(/[\\-]/g,""),r)),a=0,Hh(Hh(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<i.length?i.charAt(a++):v==="0"?"0":""}));if(e.match(sC))return i=Va(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=z1(l,Math.pow(10,a)-1,!1),i=""+u,h=ml("n",s[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+s[2]+"/"+s[3],h=U1(o[2],a),h.length<s[4].length&&(h=Rs(s[4].substr(s[4].length-h.length))+h),i+=h,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=z1(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?mw(o[1],a)+s[2]+"/"+s[3]+U1(o[2],a):ai(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=Xu(r,0),e.length<=i.length?i:Rs(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,p=e.length-i.length-d;return Rs(e.substr(0,d)+i+e.substr(e.length-p))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=FS(r,s[1].length),r<0?"-"+Va(t,e,-r):fc(NV(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?mo(0,3-v.length):"")+v})+"."+mo(a,s[1].length);switch(e){case"###,##0.00":return Va(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var f=fc(Xu(l,0));return f!=="0"?u+f:"";case"###,###.00":return Va(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Va(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function TV(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return ml(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function kV(t,e,r){var n=e.replace(eC,""),i=e.length-n.length;return ml(t,n,r*Math.pow(10,2*i))+ai("%",i)}function aC(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+aC(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,h){return l+u+h.substr(0,(i+s)%i)+"."+h.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Po(t,e,r){if(t.charCodeAt(0)===40&&!e.match(iC)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Po("n",n,r):"("+Po("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return TV(t,e,r);if(e.indexOf("%")!==-1)return kV(t,e,r);if(e.indexOf("E")!==-1)return aC(e,r);if(e.charCodeAt(0)===36)return"$"+Po(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+mo(l,e.length);if(e.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>e.length?i:Rs(e.substr(0,e.length-i.length))+i;if(s=e.match(rC))return AV(s,l,u);if(e.match(/^#+0+$/))return u+mo(l,e.length-e.indexOf("0"));if(s=e.match(nC))return i=(""+r).replace(/^([^\.]+)$/,"$1."+Rs(s[1])).replace(/\.$/,"."+Rs(s[1])),i=i.replace(/\.(\d*)$/,function(v,y){return"."+y+ai("0",Rs(s[1]).length-y.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+fc(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Po(t,e,-r):fc(""+r)+"."+ai("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Po(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Hh(Po(t,e.replace(/[\\-]/g,""),r)),a=0,Hh(Hh(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<i.length?i.charAt(a++):v==="0"?"0":""}));if(e.match(sC))return i=Po(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=z1(l,Math.pow(10,a)-1,!1),i=""+u,h=ml("n",s[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+s[2]+"/"+s[3],h=U1(o[2],a),h.length<s[4].length&&(h=Rs(s[4].substr(s[4].length-h.length))+h),i+=h,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=z1(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?mw(o[1],a)+s[2]+"/"+s[3]+U1(o[2],a):ai(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+r,e.length<=i.length?i:Rs(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,p=e.length-i.length-d;return Rs(e.substr(0,d)+i+e.substr(e.length-p))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Po(t,e,-r):fc(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?mo(0,3-v.length):"")+v})+"."+mo(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var f=fc(""+l);return f!=="0"?u+f:"";default:if(e.match(/\.[0#?]*$/))return Po(t,e.slice(0,e.lastIndexOf(".")),r)+Rs(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function ml(t,e,r){return(r|0)===r?Po(t,e,r):Va(t,e,r)}function CV(t){for(var e=[],r=!1,n=0,i=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(i,n-i),i=n+1}if(e[e.length]=t.substr(i),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var oC=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function lC(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":V1(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(oC))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function IV(t,e,r,n){for(var i=[],s="",a=0,o="",l="t",u,h,d,p="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!V1(t,a))throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(d=t.charCodeAt(++a))!==34&&a<t.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++a;break;case"\\":var f=t.charAt(++a),v=f==="("||f===")"?f:"t";i[i.length]={t:v,v:f},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(u==null&&(u=tm(e,r,t.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=tm(e,r),u==null))return"";for(s=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var y={t:o,v:o};if(u==null&&(u=tm(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",p="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",a+=5,p="h"):t.substr(a,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",a+=5,p="h"):(y.t="t",++a),u==null&&y.t==="T")return"";i[i.length]=y,l=o;break;case"[":for(s=o;t.charAt(a++)!=="]"&&a<t.length;)s+=t.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(oC)){if(u==null&&(u=tm(e,r),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",lC(t)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<t.length&&(o=t.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;t.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)s+=t.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"t",v:o},++a;break}var b=0,w=0,S;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=p,l="h",b<1&&(b=1);break;case"s":(S=i[a].v.match(/\.0+$/))&&(w=Math.max(w,S[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=i[a].t;break;case"m":l==="s"&&(i[a].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&i[a].v.match(/[Hh]/)&&(b=1),b<2&&i[a].v.match(/[Mm]/)&&(b=2),b<3&&i[a].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var k="",R;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=wV(i[a].t.charCodeAt(0),i[a].v,u,w),i[a].t="t";break;case"n":case"?":for(R=a+1;i[R]!=null&&((o=i[R].t)==="?"||o==="D"||(o===" "||o==="t")&&i[R+1]!=null&&(i[R+1].t==="?"||i[R+1].t==="t"&&i[R+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[R].v==="/"||i[R].v===" "&&i[R+1]!=null&&i[R+1].t=="?"));)i[a].v+=i[R].v,i[R]={v:"",t:";"},++R;k+=i[a].v,a=R-1;break;case"G":i[a].t="t",i[a].v=xv(e,r);break}var q="",K,E;if(k.length>0){k.charCodeAt(0)==40?(K=e<0&&k.charCodeAt(0)===45?-e:e,E=ml("n",k,K)):(K=e<0&&n>1?-e:e,E=ml("n",k,K),K<0&&i[0]&&i[0].t=="t"&&(E=E.substr(1),i[0].v="-"+i[0].v)),R=E.length-1;var C=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){C=a;break}var A=i.length;if(C===i.length&&E.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(R>=i[a].v.length-1?(R-=i[a].v.length,i[a].v=E.substr(R+1,i[a].v.length)):R<0?i[a].v="":(i[a].v=E.substr(0,R+1),R=-1),i[a].t="t",A=a);R>=0&&A<i.length&&(i[A].v=E.substr(0,R+1)+i[A].v)}else if(C!==i.length&&E.indexOf("E")===-1){for(R=E.indexOf(".")-1,a=C;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(h=i[a].v.indexOf(".")>-1&&a===C?i[a].v.indexOf(".")-1:i[a].v.length-1,q=i[a].v.substr(h+1);h>=0;--h)R>=0&&(i[a].v.charAt(h)==="0"||i[a].v.charAt(h)==="#")&&(q=E.charAt(R--)+q);i[a].v=q,i[a].t="t",A=a}for(R>=0&&A<i.length&&(i[A].v=E.substr(0,R+1)+i[A].v),R=E.indexOf(".")+1,a=C;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==C)){for(h=i[a].v.indexOf(".")>-1&&a===C?i[a].v.indexOf(".")+1:0,q=i[a].v.substr(0,h);h<i[a].v.length;++h)R<E.length&&(q+=E.charAt(R++));i[a].v=q,i[a].t="t",A=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(K=n>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=ml(i[a].t,i[a].v,K),i[a].t="t");var D="";for(a=0;a!==i.length;++a)i[a]!=null&&(D+=i[a].v);return D}var DS=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function MS(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function LV(t,e){var r=CV(t),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(DS),o=r[1].match(DS);return MS(e,a)?[n,r[0]]:MS(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,s]}function Dc(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:oi)[t],n==null&&(n=r.table&&r.table[jS[t]]||oi[jS[t]]),n==null&&(n=fV[t]||"General");break}if(V1(n,0))return xv(e,r);e instanceof Date&&(e=Jk(e,r.date1904));var i=LV(n,e);if(V1(i[1]))return xv(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return IV(i[1],e,r,i[0])}function cC(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(oi[r]==null){e<0&&(e=r);continue}if(oi[r]==t){e=r;break}}e<0&&(e=391)}return oi[e]=t,e}function qg(t){for(var e=0;e!=392;++e)t[e]!==void 0&&cC(t[e],e)}function $g(){oi=hV()}var uC=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function PV(t){var e=typeof t=="number"?oi[t]:t;return e=e.replace(uC,"(\\d+)"),new RegExp("^"+e+"$")}function jV(t,e,r){var n=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(e.match(uC)||[]).forEach(function(d,p){var f=parseInt(r[p+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=f;break;case"d":s=f;break;case"h":a=f;break;case"s":l=f;break;case"m":a>=0?o=f:i=f;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var h=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?u:n==-1&&i==-1&&s==-1?h:u+"T"+h}var RV=function(){var t={};t.version="1.2.0";function e(){for(var E=0,C=new Array(256),A=0;A!=256;++A)E=A,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,C[A]=E;return typeof Int32Array<"u"?new Int32Array(C):C}var r=e();function n(E){var C=0,A=0,D=0,N=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)N[D]=E[D];for(D=0;D!=256;++D)for(A=E[D],C=256+D;C<4096;C+=256)A=N[C]=A>>>8^E[A&255];var j=[];for(D=1;D!=16;++D)j[D-1]=typeof Int32Array<"u"?N.subarray(D*256,D*256+256):N.slice(D*256,D*256+256);return j}var i=n(r),s=i[0],a=i[1],o=i[2],l=i[3],u=i[4],h=i[5],d=i[6],p=i[7],f=i[8],v=i[9],y=i[10],b=i[11],w=i[12],S=i[13],k=i[14];function R(E,C){for(var A=C^-1,D=0,N=E.length;D<N;)A=A>>>8^r[(A^E.charCodeAt(D++))&255];return~A}function q(E,C){for(var A=C^-1,D=E.length-15,N=0;N<D;)A=k[E[N++]^A&255]^S[E[N++]^A>>8&255]^w[E[N++]^A>>16&255]^b[E[N++]^A>>>24]^y[E[N++]]^v[E[N++]]^f[E[N++]]^p[E[N++]]^d[E[N++]]^h[E[N++]]^u[E[N++]]^l[E[N++]]^o[E[N++]]^a[E[N++]]^s[E[N++]]^r[E[N++]];for(D+=15;N<D;)A=A>>>8^r[(A^E[N++])&255];return~A}function K(E,C){for(var A=C^-1,D=0,N=E.length,j=0,P=0;D<N;)j=E.charCodeAt(D++),j<128?A=A>>>8^r[(A^j)&255]:j<2048?(A=A>>>8^r[(A^(192|j>>6&31))&255],A=A>>>8^r[(A^(128|j&63))&255]):j>=55296&&j<57344?(j=(j&1023)+64,P=E.charCodeAt(D++)&1023,A=A>>>8^r[(A^(240|j>>8&7))&255],A=A>>>8^r[(A^(128|j>>2&63))&255],A=A>>>8^r[(A^(128|P>>6&15|(j&3)<<4))&255],A=A>>>8^r[(A^(128|P&63))&255]):(A=A>>>8^r[(A^(224|j>>12&15))&255],A=A>>>8^r[(A^(128|j>>6&63))&255],A=A>>>8^r[(A^(128|j&63))&255]);return~A}return t.table=r,t.bstr=R,t.buf=q,t.str=K,t}(),vn=function(){var e={};e.version="1.2.1";function r(W,ie){for(var ee=W.split("/"),ne=ie.split("/"),oe=0,le=0,De=Math.min(ee.length,ne.length);oe<De;++oe){if(le=ee[oe].length-ne[oe].length)return le;if(ee[oe]!=ne[oe])return ee[oe]<ne[oe]?-1:1}return ee.length-ne.length}function n(W){if(W.charAt(W.length-1)=="/")return W.slice(0,-1).indexOf("/")===-1?W:n(W.slice(0,-1));var ie=W.lastIndexOf("/");return ie===-1?W:W.slice(0,ie+1)}function i(W){if(W.charAt(W.length-1)=="/")return i(W.slice(0,-1));var ie=W.lastIndexOf("/");return ie===-1?W:W.slice(ie+1)}function s(W,ie){typeof ie=="string"&&(ie=new Date(ie));var ee=ie.getHours();ee=ee<<6|ie.getMinutes(),ee=ee<<5|ie.getSeconds()>>>1,W.write_shift(2,ee);var ne=ie.getFullYear()-1980;ne=ne<<4|ie.getMonth()+1,ne=ne<<5|ie.getDate(),W.write_shift(2,ne)}function a(W){var ie=W.read_shift(2)&65535,ee=W.read_shift(2)&65535,ne=new Date,oe=ee&31;ee>>>=5;var le=ee&15;ee>>>=4,ne.setMilliseconds(0),ne.setFullYear(ee+1980),ne.setMonth(le-1),ne.setDate(oe);var De=ie&31;ie>>>=5;var Te=ie&63;return ie>>>=6,ne.setHours(ie),ne.setMinutes(Te),ne.setSeconds(De<<1),ne}function o(W){ma(W,0);for(var ie={},ee=0;W.l<=W.length-4;){var ne=W.read_shift(2),oe=W.read_shift(2),le=W.l+oe,De={};switch(ne){case 21589:ee=W.read_shift(1),ee&1&&(De.mtime=W.read_shift(4)),oe>5&&(ee&2&&(De.atime=W.read_shift(4)),ee&4&&(De.ctime=W.read_shift(4))),De.mtime&&(De.mt=new Date(De.mtime*1e3));break}W.l=le,ie[ne]=De}return ie}var l;function u(){return l||(l={})}function h(W,ie){if(W[0]==80&&W[1]==75)return Jt(W,ie);if((W[0]|32)==109&&(W[1]|32)==105)return Zt(W,ie);if(W.length<512)throw new Error("CFB file size "+W.length+" < 512");var ee=3,ne=512,oe=0,le=0,De=0,Te=0,Re=0,Me=[],Oe=W.slice(0,512);ma(Oe,0);var ht=d(Oe);switch(ee=ht[0],ee){case 3:ne=512;break;case 4:ne=4096;break;case 0:if(ht[1]==0)return Jt(W,ie);default:throw new Error("Major Version: Expected 3 or 4 saw "+ee)}ne!==512&&(Oe=W.slice(0,ne),ma(Oe,28));var gt=W.slice(0,ne);p(Oe,ee);var kt=Oe.read_shift(4,"i");if(ee===3&&kt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+kt);Oe.l+=4,De=Oe.read_shift(4,"i"),Oe.l+=4,Oe.chk("00100000","Mini Stream Cutoff Size: "),Te=Oe.read_shift(4,"i"),oe=Oe.read_shift(4,"i"),Re=Oe.read_shift(4,"i"),le=Oe.read_shift(4,"i");for(var pt=-1,Et=0;Et<109&&(pt=Oe.read_shift(4,"i"),!(pt<0));++Et)Me[Et]=pt;var tr=f(W,ne);b(Re,le,tr,ne,Me);var Nr=S(tr,De,Me,ne);Nr[De].name="!Directory",oe>0&&Te!==P&&(Nr[Te].name="!MiniFAT"),Nr[Me[0]].name="!FAT",Nr.fat_addrs=Me,Nr.ssz=ne;var yr={},tn=[],Hn=[],li=[];k(De,Nr,tr,tn,oe,yr,Hn,Te),v(Hn,li,tn),tn.shift();var ci={FileIndex:Hn,FullPaths:li};return ie&&ie.raw&&(ci.raw={header:gt,sectors:tr}),ci}function d(W){if(W[W.l]==80&&W[W.l+1]==75)return[0,0];W.chk(se,"Header Signature: "),W.l+=16;var ie=W.read_shift(2,"u");return[W.read_shift(2,"u"),ie]}function p(W,ie){var ee=9;switch(W.l+=2,ee=W.read_shift(2)){case 9:if(ie!=3)throw new Error("Sector Shift: Expected 9 saw "+ee);break;case 12:if(ie!=4)throw new Error("Sector Shift: Expected 12 saw "+ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ee)}W.chk("0600","Mini Sector Shift: "),W.chk("000000000000","Reserved: ")}function f(W,ie){for(var ee=Math.ceil(W.length/ie)-1,ne=[],oe=1;oe<ee;++oe)ne[oe-1]=W.slice(oe*ie,(oe+1)*ie);return ne[ee-1]=W.slice(ee*ie),ne}function v(W,ie,ee){for(var ne=0,oe=0,le=0,De=0,Te=0,Re=ee.length,Me=[],Oe=[];ne<Re;++ne)Me[ne]=Oe[ne]=ne,ie[ne]=ee[ne];for(;Te<Oe.length;++Te)ne=Oe[Te],oe=W[ne].L,le=W[ne].R,De=W[ne].C,Me[ne]===ne&&(oe!==-1&&Me[oe]!==oe&&(Me[ne]=Me[oe]),le!==-1&&Me[le]!==le&&(Me[ne]=Me[le])),De!==-1&&(Me[De]=ne),oe!==-1&&ne!=Me[ne]&&(Me[oe]=Me[ne],Oe.lastIndexOf(oe)<Te&&Oe.push(oe)),le!==-1&&ne!=Me[ne]&&(Me[le]=Me[ne],Oe.lastIndexOf(le)<Te&&Oe.push(le));for(ne=1;ne<Re;++ne)Me[ne]===ne&&(le!==-1&&Me[le]!==le?Me[ne]=Me[le]:oe!==-1&&Me[oe]!==oe&&(Me[ne]=Me[oe]));for(ne=1;ne<Re;++ne)if(W[ne].type!==0){if(Te=ne,Te!=Me[Te])do Te=Me[Te],ie[ne]=ie[Te]+"/"+ie[ne];while(Te!==0&&Me[Te]!==-1&&Te!=Me[Te]);Me[ne]=-1}for(ie[0]+="/",ne=1;ne<Re;++ne)W[ne].type!==2&&(ie[ne]+="/")}function y(W,ie,ee){for(var ne=W.start,oe=W.size,le=[],De=ne;ee&&oe>0&&De>=0;)le.push(ie.slice(De*j,De*j+j)),oe-=j,De=nu(ee,De*4);return le.length===0?Ze(0):rs(le).slice(0,W.size)}function b(W,ie,ee,ne,oe){var le=P;if(W===P){if(ie!==0)throw new Error("DIFAT chain shorter than expected")}else if(W!==-1){var De=ee[W],Te=(ne>>>2)-1;if(!De)return;for(var Re=0;Re<Te&&(le=nu(De,Re*4))!==P;++Re)oe.push(le);b(nu(De,ne-4),ie-1,ee,ne,oe)}}function w(W,ie,ee,ne,oe){var le=[],De=[];oe||(oe=[]);var Te=ne-1,Re=0,Me=0;for(Re=ie;Re>=0;){oe[Re]=!0,le[le.length]=Re,De.push(W[Re]);var Oe=ee[Math.floor(Re*4/ne)];if(Me=Re*4&Te,ne<4+Me)throw new Error("FAT boundary crossed: "+Re+" 4 "+ne);if(!W[Oe])break;Re=nu(W[Oe],Me)}return{nodes:le,data:$S([De])}}function S(W,ie,ee,ne){var oe=W.length,le=[],De=[],Te=[],Re=[],Me=ne-1,Oe=0,ht=0,gt=0,kt=0;for(Oe=0;Oe<oe;++Oe)if(Te=[],gt=Oe+ie,gt>=oe&&(gt-=oe),!De[gt]){Re=[];var pt=[];for(ht=gt;ht>=0;){pt[ht]=!0,De[ht]=!0,Te[Te.length]=ht,Re.push(W[ht]);var Et=ee[Math.floor(ht*4/ne)];if(kt=ht*4&Me,ne<4+kt)throw new Error("FAT boundary crossed: "+ht+" 4 "+ne);if(!W[Et]||(ht=nu(W[Et],kt),pt[ht]))break}le[gt]={nodes:Te,data:$S([Re])}}return le}function k(W,ie,ee,ne,oe,le,De,Te){for(var Re=0,Me=ne.length?2:0,Oe=ie[W].data,ht=0,gt=0,kt;ht<Oe.length;ht+=128){var pt=Oe.slice(ht,ht+128);ma(pt,64),gt=pt.read_shift(2),kt=_w(pt,0,gt-Me),ne.push(kt);var Et={name:kt,type:pt.read_shift(1),color:pt.read_shift(1),L:pt.read_shift(4,"i"),R:pt.read_shift(4,"i"),C:pt.read_shift(4,"i"),clsid:pt.read_shift(16),state:pt.read_shift(4,"i"),start:0,size:0},tr=pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2);tr!==0&&(Et.ct=R(pt,pt.l-8));var Nr=pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2);Nr!==0&&(Et.mt=R(pt,pt.l-8)),Et.start=pt.read_shift(4,"i"),Et.size=pt.read_shift(4,"i"),Et.size<0&&Et.start<0&&(Et.size=Et.type=0,Et.start=P,Et.name=""),Et.type===5?(Re=Et.start,oe>0&&Re!==P&&(ie[Re].name="!StreamData")):Et.size>=4096?(Et.storage="fat",ie[Et.start]===void 0&&(ie[Et.start]=w(ee,Et.start,ie.fat_addrs,ie.ssz)),ie[Et.start].name=Et.name,Et.content=ie[Et.start].data.slice(0,Et.size)):(Et.storage="minifat",Et.size<0?Et.size=0:Re!==P&&Et.start!==P&&ie[Re]&&(Et.content=y(Et,ie[Re].data,(ie[Te]||{}).data))),Et.content&&ma(Et.content,0),le[kt]=Et,De.push(Et)}}function R(W,ie){return new Date((xa(W,ie+4)/1e7*Math.pow(2,32)+xa(W,ie)/1e7-11644473600)*1e3)}function q(W,ie){return u(),h(l.readFileSync(W),ie)}function K(W,ie){var ee=ie&&ie.type;switch(ee||Jr&&Buffer.isBuffer(W)&&(ee="buffer"),ee||"base64"){case"file":return q(W,ie);case"base64":return h(po(Nl(W)),ie);case"binary":return h(po(W),ie)}return h(W,ie)}function E(W,ie){var ee=ie||{},ne=ee.root||"Root Entry";if(W.FullPaths||(W.FullPaths=[]),W.FileIndex||(W.FileIndex=[]),W.FullPaths.length!==W.FileIndex.length)throw new Error("inconsistent CFB structure");W.FullPaths.length===0&&(W.FullPaths[0]=ne+"/",W.FileIndex[0]={name:ne,type:5}),ee.CLSID&&(W.FileIndex[0].clsid=ee.CLSID),C(W)}function C(W){var ie="Sh33tJ5";if(!vn.find(W,"/"+ie)){var ee=Ze(4);ee[0]=55,ee[1]=ee[3]=50,ee[2]=54,W.FileIndex.push({name:ie,type:2,content:ee,size:4,L:69,R:69,C:69}),W.FullPaths.push(W.FullPaths[0]+ie),A(W)}}function A(W,ie){E(W);for(var ee=!1,ne=!1,oe=W.FullPaths.length-1;oe>=0;--oe){var le=W.FileIndex[oe];switch(le.type){case 0:ne?ee=!0:(W.FileIndex.pop(),W.FullPaths.pop());break;case 1:case 2:case 5:ne=!0,isNaN(le.R*le.L*le.C)&&(ee=!0),le.R>-1&&le.L>-1&&le.R==le.L&&(ee=!0);break;default:ee=!0;break}}if(!(!ee&&!ie)){var De=new Date(1987,1,19),Te=0,Re=Object.create?Object.create(null):{},Me=[];for(oe=0;oe<W.FullPaths.length;++oe)Re[W.FullPaths[oe]]=!0,W.FileIndex[oe].type!==0&&Me.push([W.FullPaths[oe],W.FileIndex[oe]]);for(oe=0;oe<Me.length;++oe){var Oe=n(Me[oe][0]);ne=Re[Oe],ne||(Me.push([Oe,{name:i(Oe).replace("/",""),type:1,clsid:ve,ct:De,mt:De,content:null}]),Re[Oe]=!0)}for(Me.sort(function(kt,pt){return r(kt[0],pt[0])}),W.FullPaths=[],W.FileIndex=[],oe=0;oe<Me.length;++oe)W.FullPaths[oe]=Me[oe][0],W.FileIndex[oe]=Me[oe][1];for(oe=0;oe<Me.length;++oe){var ht=W.FileIndex[oe],gt=W.FullPaths[oe];if(ht.name=i(gt).replace("/",""),ht.L=ht.R=ht.C=-(ht.color=1),ht.size=ht.content?ht.content.length:0,ht.start=0,ht.clsid=ht.clsid||ve,oe===0)ht.C=Me.length>1?1:-1,ht.size=0,ht.type=5;else if(gt.slice(-1)=="/"){for(Te=oe+1;Te<Me.length&&n(W.FullPaths[Te])!=gt;++Te);for(ht.C=Te>=Me.length?-1:Te,Te=oe+1;Te<Me.length&&n(W.FullPaths[Te])!=n(gt);++Te);ht.R=Te>=Me.length?-1:Te,ht.type=1}else n(W.FullPaths[oe+1]||"")==n(gt)&&(ht.R=oe+1),ht.type=2}}}function D(W,ie){var ee=ie||{};if(ee.fileType=="mad")return zn(W,ee);switch(A(W),ee.fileType){case"zip":return Wt(W,ee)}var ne=function(kt){for(var pt=0,Et=0,tr=0;tr<kt.FileIndex.length;++tr){var Nr=kt.FileIndex[tr];if(Nr.content){var yr=Nr.content.length;yr>0&&(yr<4096?pt+=yr+63>>6:Et+=yr+511>>9)}}for(var tn=kt.FullPaths.length+3>>2,Hn=pt+7>>3,li=pt+127>>7,ci=Hn+Et+tn+li,Xn=ci+127>>7,on=Xn<=109?0:Math.ceil((Xn-109)/127);ci+Xn+on+127>>7>Xn;)on=++Xn<=109?0:Math.ceil((Xn-109)/127);var Tn=[1,on,Xn,li,tn,Et,pt,0];return kt.FileIndex[0].size=pt<<6,Tn[7]=(kt.FileIndex[0].start=Tn[0]+Tn[1]+Tn[2]+Tn[3]+Tn[4]+Tn[5])+(Tn[6]+7>>3),Tn}(W),oe=Ze(ne[7]<<9),le=0,De=0;{for(le=0;le<8;++le)oe.write_shift(1,ge[le]);for(le=0;le<8;++le)oe.write_shift(2,0);for(oe.write_shift(2,62),oe.write_shift(2,3),oe.write_shift(2,65534),oe.write_shift(2,9),oe.write_shift(2,6),le=0;le<3;++le)oe.write_shift(2,0);for(oe.write_shift(4,0),oe.write_shift(4,ne[2]),oe.write_shift(4,ne[0]+ne[1]+ne[2]+ne[3]-1),oe.write_shift(4,0),oe.write_shift(4,4096),oe.write_shift(4,ne[3]?ne[0]+ne[1]+ne[2]-1:P),oe.write_shift(4,ne[3]),oe.write_shift(-4,ne[1]?ne[0]-1:P),oe.write_shift(4,ne[1]),le=0;le<109;++le)oe.write_shift(-4,le<ne[2]?ne[1]+le:-1)}if(ne[1])for(De=0;De<ne[1];++De){for(;le<236+De*127;++le)oe.write_shift(-4,le<ne[2]?ne[1]+le:-1);oe.write_shift(-4,De===ne[1]-1?P:De+1)}var Te=function(kt){for(De+=kt;le<De-1;++le)oe.write_shift(-4,le+1);kt&&(++le,oe.write_shift(-4,P))};for(De=le=0,De+=ne[1];le<De;++le)oe.write_shift(-4,ye.DIFSECT);for(De+=ne[2];le<De;++le)oe.write_shift(-4,ye.FATSECT);Te(ne[3]),Te(ne[4]);for(var Re=0,Me=0,Oe=W.FileIndex[0];Re<W.FileIndex.length;++Re)Oe=W.FileIndex[Re],Oe.content&&(Me=Oe.content.length,!(Me<4096)&&(Oe.start=De,Te(Me+511>>9)));for(Te(ne[6]+7>>3);oe.l&511;)oe.write_shift(-4,ye.ENDOFCHAIN);for(De=le=0,Re=0;Re<W.FileIndex.length;++Re)Oe=W.FileIndex[Re],Oe.content&&(Me=Oe.content.length,!(!Me||Me>=4096)&&(Oe.start=De,Te(Me+63>>6)));for(;oe.l&511;)oe.write_shift(-4,ye.ENDOFCHAIN);for(le=0;le<ne[4]<<2;++le){var ht=W.FullPaths[le];if(!ht||ht.length===0){for(Re=0;Re<17;++Re)oe.write_shift(4,0);for(Re=0;Re<3;++Re)oe.write_shift(4,-1);for(Re=0;Re<12;++Re)oe.write_shift(4,0);continue}Oe=W.FileIndex[le],le===0&&(Oe.start=Oe.size?Oe.start-1:P);var gt=le===0&&ee.root||Oe.name;if(Me=2*(gt.length+1),oe.write_shift(64,gt,"utf16le"),oe.write_shift(2,Me),oe.write_shift(1,Oe.type),oe.write_shift(1,Oe.color),oe.write_shift(-4,Oe.L),oe.write_shift(-4,Oe.R),oe.write_shift(-4,Oe.C),Oe.clsid)oe.write_shift(16,Oe.clsid,"hex");else for(Re=0;Re<4;++Re)oe.write_shift(4,0);oe.write_shift(4,Oe.state||0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,Oe.start),oe.write_shift(4,Oe.size),oe.write_shift(4,0)}for(le=1;le<W.FileIndex.length;++le)if(Oe=W.FileIndex[le],Oe.size>=4096)if(oe.l=Oe.start+1<<9,Jr&&Buffer.isBuffer(Oe.content))Oe.content.copy(oe,oe.l,0,Oe.size),oe.l+=Oe.size+511&-512;else{for(Re=0;Re<Oe.size;++Re)oe.write_shift(1,Oe.content[Re]);for(;Re&511;++Re)oe.write_shift(1,0)}for(le=1;le<W.FileIndex.length;++le)if(Oe=W.FileIndex[le],Oe.size>0&&Oe.size<4096)if(Jr&&Buffer.isBuffer(Oe.content))Oe.content.copy(oe,oe.l,0,Oe.size),oe.l+=Oe.size+63&-64;else{for(Re=0;Re<Oe.size;++Re)oe.write_shift(1,Oe.content[Re]);for(;Re&63;++Re)oe.write_shift(1,0)}if(Jr)oe.l=oe.length;else for(;oe.l<oe.length;)oe.write_shift(1,0);return oe}function N(W,ie){var ee=W.FullPaths.map(function(Re){return Re.toUpperCase()}),ne=ee.map(function(Re){var Me=Re.split("/");return Me[Me.length-(Re.slice(-1)=="/"?2:1)]}),oe=!1;ie.charCodeAt(0)===47?(oe=!0,ie=ee[0].slice(0,-1)+ie):oe=ie.indexOf("/")!==-1;var le=ie.toUpperCase(),De=oe===!0?ee.indexOf(le):ne.indexOf(le);if(De!==-1)return W.FileIndex[De];var Te=!le.match(em);for(le=le.replace(Dd,""),Te&&(le=le.replace(em,"!")),De=0;De<ee.length;++De)if((Te?ee[De].replace(em,"!"):ee[De]).replace(Dd,"")==le||(Te?ne[De].replace(em,"!"):ne[De]).replace(Dd,"")==le)return W.FileIndex[De];return null}var j=64,P=-2,se="d0cf11e0a1b11ae1",ge=[208,207,17,224,161,177,26,225],ve="00000000000000000000000000000000",ye={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:P,FREESECT:-1,HEADER_SIGNATURE:se,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ve,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function he(W,ie,ee){u();var ne=D(W,ee);l.writeFileSync(ie,ne)}function _e(W){for(var ie=new Array(W.length),ee=0;ee<W.length;++ee)ie[ee]=String.fromCharCode(W[ee]);return ie.join("")}function Ue(W,ie){var ee=D(W,ie);switch(ie&&ie.type||"buffer"){case"file":return u(),l.writeFileSync(ie.filename,ee),ee;case"binary":return typeof ee=="string"?ee:_e(ee);case"base64":return b0(typeof ee=="string"?ee:_e(ee));case"buffer":if(Jr)return Buffer.isBuffer(ee)?ee:Il(ee);case"array":return typeof ee=="string"?po(ee):ee}return ee}var Ie;function L(W){try{var ie=W.InflateRaw,ee=new ie;if(ee._processChunk(new Uint8Array([3,0]),ee._finishFlushFlag),ee.bytesRead)Ie=W;else throw new Error("zlib does not expose bytesRead")}catch(ne){console.error("cannot use native zlib: "+(ne.message||ne))}}function O(W,ie){if(!Ie)return Ir(W,ie);var ee=Ie.InflateRaw,ne=new ee,oe=ne._processChunk(W.slice(W.l),ne._finishFlushFlag);return W.l+=ne.bytesRead,oe}function B(W){return Ie?Ie.deflateRawSync(W):Rt(W)}var z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],fe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Se(W){var ie=(W<<1|W<<11)&139536|(W<<5|W<<15)&558144;return(ie>>16|ie>>8|ie)&255}for(var Ae=typeof Uint8Array<"u",Ne=Ae?new Uint8Array(256):[],Xe=0;Xe<256;++Xe)Ne[Xe]=Se(Xe);function et(W,ie){var ee=Ne[W&255];return ie<=8?ee>>>8-ie:(ee=ee<<8|Ne[W>>8&255],ie<=16?ee>>>16-ie:(ee=ee<<8|Ne[W>>16&255],ee>>>24-ie))}function ot(W,ie){var ee=ie&7,ne=ie>>>3;return(W[ne]|(ee<=6?0:W[ne+1]<<8))>>>ee&3}function mt(W,ie){var ee=ie&7,ne=ie>>>3;return(W[ne]|(ee<=5?0:W[ne+1]<<8))>>>ee&7}function te(W,ie){var ee=ie&7,ne=ie>>>3;return(W[ne]|(ee<=4?0:W[ne+1]<<8))>>>ee&15}function ke(W,ie){var ee=ie&7,ne=ie>>>3;return(W[ne]|(ee<=3?0:W[ne+1]<<8))>>>ee&31}function X(W,ie){var ee=ie&7,ne=ie>>>3;return(W[ne]|(ee<=1?0:W[ne+1]<<8))>>>ee&127}function me(W,ie,ee){var ne=ie&7,oe=ie>>>3,le=(1<<ee)-1,De=W[oe]>>>ne;return ee<8-ne||(De|=W[oe+1]<<8-ne,ee<16-ne)||(De|=W[oe+2]<<16-ne,ee<24-ne)||(De|=W[oe+3]<<24-ne),De&le}function de(W,ie,ee){var ne=ie&7,oe=ie>>>3;return ne<=5?W[oe]|=(ee&7)<<ne:(W[oe]|=ee<<ne&255,W[oe+1]=(ee&7)>>8-ne),ie+3}function qe(W,ie,ee){var ne=ie&7,oe=ie>>>3;return ee=(ee&1)<<ne,W[oe]|=ee,ie+1}function Ge(W,ie,ee){var ne=ie&7,oe=ie>>>3;return ee<<=ne,W[oe]|=ee&255,ee>>>=8,W[oe+1]=ee,ie+8}function st(W,ie,ee){var ne=ie&7,oe=ie>>>3;return ee<<=ne,W[oe]|=ee&255,ee>>>=8,W[oe+1]=ee&255,W[oe+2]=ee>>>8,ie+16}function yt(W,ie){var ee=W.length,ne=2*ee>ie?2*ee:ie+5,oe=0;if(ee>=ie)return W;if(Jr){var le=IS(ne);if(W.copy)W.copy(le);else for(;oe<W.length;++oe)le[oe]=W[oe];return le}else if(Ae){var De=new Uint8Array(ne);if(De.set)De.set(W);else for(;oe<ee;++oe)De[oe]=W[oe];return De}return W.length=ne,W}function Ht(W){for(var ie=new Array(W),ee=0;ee<W;++ee)ie[ee]=0;return ie}function be(W,ie,ee){var ne=1,oe=0,le=0,De=0,Te=0,Re=W.length,Me=Ae?new Uint16Array(32):Ht(32);for(le=0;le<32;++le)Me[le]=0;for(le=Re;le<ee;++le)W[le]=0;Re=W.length;var Oe=Ae?new Uint16Array(Re):Ht(Re);for(le=0;le<Re;++le)Me[oe=W[le]]++,ne<oe&&(ne=oe),Oe[le]=0;for(Me[0]=0,le=1;le<=ne;++le)Me[le+16]=Te=Te+Me[le-1]<<1;for(le=0;le<Re;++le)Te=W[le],Te!=0&&(Oe[le]=Me[Te+16]++);var ht=0;for(le=0;le<Re;++le)if(ht=W[le],ht!=0)for(Te=et(Oe[le],ne)>>ne-ht,De=(1<<ne+4-ht)-1;De>=0;--De)ie[Te|De<<ht]=ht&15|le<<4;return ne}var tt=Ae?new Uint16Array(512):Ht(512),ct=Ae?new Uint16Array(32):Ht(32);if(!Ae){for(var St=0;St<512;++St)tt[St]=0;for(St=0;St<32;++St)ct[St]=0}(function(){for(var W=[],ie=0;ie<32;ie++)W.push(5);be(W,ct,32);var ee=[];for(ie=0;ie<=143;ie++)ee.push(8);for(;ie<=255;ie++)ee.push(9);for(;ie<=279;ie++)ee.push(7);for(;ie<=287;ie++)ee.push(8);be(ee,tt,288)})();var jt=function(){for(var ie=Ae?new Uint8Array(32768):[],ee=0,ne=0;ee<fe.length-1;++ee)for(;ne<fe[ee+1];++ne)ie[ne]=ee;for(;ne<32768;++ne)ie[ne]=29;var oe=Ae?new Uint8Array(259):[];for(ee=0,ne=0;ee<J.length-1;++ee)for(;ne<J[ee+1];++ne)oe[ne]=ee;function le(Te,Re){for(var Me=0;Me<Te.length;){var Oe=Math.min(65535,Te.length-Me),ht=Me+Oe==Te.length;for(Re.write_shift(1,+ht),Re.write_shift(2,Oe),Re.write_shift(2,~Oe&65535);Oe-- >0;)Re[Re.l++]=Te[Me++]}return Re.l}function De(Te,Re){for(var Me=0,Oe=0,ht=Ae?new Uint16Array(32768):[];Oe<Te.length;){var gt=Math.min(65535,Te.length-Oe);if(gt<10){for(Me=de(Re,Me,+(Oe+gt==Te.length)),Me&7&&(Me+=8-(Me&7)),Re.l=Me/8|0,Re.write_shift(2,gt),Re.write_shift(2,~gt&65535);gt-- >0;)Re[Re.l++]=Te[Oe++];Me=Re.l*8;continue}Me=de(Re,Me,+(Oe+gt==Te.length)+2);for(var kt=0;gt-- >0;){var pt=Te[Oe];kt=(kt<<5^pt)&32767;var Et=-1,tr=0;if((Et=ht[kt])&&(Et|=Oe&-32768,Et>Oe&&(Et-=32768),Et<Oe))for(;Te[Et+tr]==Te[Oe+tr]&&tr<250;)++tr;if(tr>2){pt=oe[tr],pt<=22?Me=Ge(Re,Me,Ne[pt+1]>>1)-1:(Ge(Re,Me,3),Me+=5,Ge(Re,Me,Ne[pt-23]>>5),Me+=3);var Nr=pt<8?0:pt-4>>2;Nr>0&&(st(Re,Me,tr-J[pt]),Me+=Nr),pt=ie[Oe-Et],Me=Ge(Re,Me,Ne[pt]>>3),Me-=3;var yr=pt<4?0:pt-2>>1;yr>0&&(st(Re,Me,Oe-Et-fe[pt]),Me+=yr);for(var tn=0;tn<tr;++tn)ht[kt]=Oe&32767,kt=(kt<<5^Te[Oe])&32767,++Oe;gt-=tr-1}else pt<=143?pt=pt+48:Me=qe(Re,Me,1),Me=Ge(Re,Me,Ne[pt]),ht[kt]=Oe&32767,++Oe}Me=Ge(Re,Me,0)-1}return Re.l=(Me+7)/8|0,Re.l}return function(Re,Me){return Re.length<8?le(Re,Me):De(Re,Me)}}();function Rt(W){var ie=Ze(50+Math.floor(W.length*1.1)),ee=jt(W,ie);return ie.slice(0,ee)}var Dt=Ae?new Uint16Array(32768):Ht(32768),Hr=Ae?new Uint16Array(32768):Ht(32768),hr=Ae?new Uint16Array(128):Ht(128),Ke=1,Pt=1;function pr(W,ie){var ee=ke(W,ie)+257;ie+=5;var ne=ke(W,ie)+1;ie+=5;var oe=te(W,ie)+4;ie+=4;for(var le=0,De=Ae?new Uint8Array(19):Ht(19),Te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Re=1,Me=Ae?new Uint8Array(8):Ht(8),Oe=Ae?new Uint8Array(8):Ht(8),ht=De.length,gt=0;gt<oe;++gt)De[z[gt]]=le=mt(W,ie),Re<le&&(Re=le),Me[le]++,ie+=3;var kt=0;for(Me[0]=0,gt=1;gt<=Re;++gt)Oe[gt]=kt=kt+Me[gt-1]<<1;for(gt=0;gt<ht;++gt)(kt=De[gt])!=0&&(Te[gt]=Oe[kt]++);var pt=0;for(gt=0;gt<ht;++gt)if(pt=De[gt],pt!=0){kt=Ne[Te[gt]]>>8-pt;for(var Et=(1<<7-pt)-1;Et>=0;--Et)hr[kt|Et<<pt]=pt&7|gt<<3}var tr=[];for(Re=1;tr.length<ee+ne;)switch(kt=hr[X(W,ie)],ie+=kt&7,kt>>>=3){case 16:for(le=3+ot(W,ie),ie+=2,kt=tr[tr.length-1];le-- >0;)tr.push(kt);break;case 17:for(le=3+mt(W,ie),ie+=3;le-- >0;)tr.push(0);break;case 18:for(le=11+X(W,ie),ie+=7;le-- >0;)tr.push(0);break;default:tr.push(kt),Re<kt&&(Re=kt);break}var Nr=tr.slice(0,ee),yr=tr.slice(ee);for(gt=ee;gt<286;++gt)Nr[gt]=0;for(gt=ne;gt<30;++gt)yr[gt]=0;return Ke=be(Nr,Dt,286),Pt=be(yr,Hr,30),ie}function Gt(W,ie){if(W[0]==3&&!(W[1]&3))return[Tu(ie),2];for(var ee=0,ne=0,oe=IS(ie||1<<18),le=0,De=oe.length>>>0,Te=0,Re=0;!(ne&1);){if(ne=mt(W,ee),ee+=3,ne>>>1)ne>>1==1?(Te=9,Re=5):(ee=pr(W,ee),Te=Ke,Re=Pt);else{ee&7&&(ee+=8-(ee&7));var Me=W[ee>>>3]|W[(ee>>>3)+1]<<8;if(ee+=32,Me>0)for(!ie&&De<le+Me&&(oe=yt(oe,le+Me),De=oe.length);Me-- >0;)oe[le++]=W[ee>>>3],ee+=8;continue}for(;;){!ie&&De<le+32767&&(oe=yt(oe,le+32767),De=oe.length);var Oe=me(W,ee,Te),ht=ne>>>1==1?tt[Oe]:Dt[Oe];if(ee+=ht&15,ht>>>=4,!(ht>>>8&255))oe[le++]=ht;else{if(ht==256)break;ht-=257;var gt=ht<8?0:ht-4>>2;gt>5&&(gt=0);var kt=le+J[ht];gt>0&&(kt+=me(W,ee,gt),ee+=gt),Oe=me(W,ee,Re),ht=ne>>>1==1?ct[Oe]:Hr[Oe],ee+=ht&15,ht>>>=4;var pt=ht<4?0:ht-2>>1,Et=fe[ht];for(pt>0&&(Et+=me(W,ee,pt),ee+=pt),!ie&&De<kt&&(oe=yt(oe,kt+100),De=oe.length);le<kt;)oe[le]=oe[le-Et],++le}}}return ie?[oe,ee+7>>>3]:[oe.slice(0,le),ee+7>>>3]}function Ir(W,ie){var ee=W.slice(W.l||0),ne=Gt(ee,ie);return W.l+=ne[1],ne[0]}function Qt(W,ie){if(W)typeof console<"u"&&console.error(ie);else throw new Error(ie)}function Jt(W,ie){var ee=W;ma(ee,0);var ne=[],oe=[],le={FileIndex:ne,FullPaths:oe};E(le,{root:ie.root});for(var De=ee.length-4;(ee[De]!=80||ee[De+1]!=75||ee[De+2]!=5||ee[De+3]!=6)&&De>=0;)--De;ee.l=De+4,ee.l+=4;var Te=ee.read_shift(2);ee.l+=6;var Re=ee.read_shift(4);for(ee.l=Re,De=0;De<Te;++De){ee.l+=20;var Me=ee.read_shift(4),Oe=ee.read_shift(4),ht=ee.read_shift(2),gt=ee.read_shift(2),kt=ee.read_shift(2);ee.l+=8;var pt=ee.read_shift(4),Et=o(ee.slice(ee.l+ht,ee.l+ht+gt));ee.l+=ht+gt+kt;var tr=ee.l;ee.l=pt+4,Ur(ee,Me,Oe,le,Et),ee.l=tr}return le}function Ur(W,ie,ee,ne,oe){W.l+=2;var le=W.read_shift(2),De=W.read_shift(2),Te=a(W);if(le&8257)throw new Error("Unsupported ZIP encryption");for(var Re=W.read_shift(4),Me=W.read_shift(4),Oe=W.read_shift(4),ht=W.read_shift(2),gt=W.read_shift(2),kt="",pt=0;pt<ht;++pt)kt+=String.fromCharCode(W[W.l++]);if(gt){var Et=o(W.slice(W.l,W.l+gt));(Et[21589]||{}).mt&&(Te=Et[21589].mt),((oe||{})[21589]||{}).mt&&(Te=oe[21589].mt)}W.l+=gt;var tr=W.slice(W.l,W.l+Me);switch(De){case 8:tr=O(W,Oe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+De)}var Nr=!1;le&8&&(Re=W.read_shift(4),Re==134695760&&(Re=W.read_shift(4),Nr=!0),Me=W.read_shift(4),Oe=W.read_shift(4)),Me!=ie&&Qt(Nr,"Bad compressed size: "+ie+" != "+Me),Oe!=ee&&Qt(Nr,"Bad uncompressed size: "+ee+" != "+Oe),an(ne,kt,tr,{unsafe:!0,mt:Te})}function Wt(W,ie){var ee=ie||{},ne=[],oe=[],le=Ze(1),De=ee.compression?8:0,Te=0,Re=0,Me=0,Oe=0,ht=0,gt=W.FullPaths[0],kt=gt,pt=W.FileIndex[0],Et=[],tr=0;for(Re=1;Re<W.FullPaths.length;++Re)if(kt=W.FullPaths[Re].slice(gt.length),pt=W.FileIndex[Re],!(!pt.size||!pt.content||kt=="Sh33tJ5")){var Nr=Oe,yr=Ze(kt.length);for(Me=0;Me<kt.length;++Me)yr.write_shift(1,kt.charCodeAt(Me)&127);yr=yr.slice(0,yr.l),Et[ht]=RV.buf(pt.content,0);var tn=pt.content;De==8&&(tn=B(tn)),le=Ze(30),le.write_shift(4,67324752),le.write_shift(2,20),le.write_shift(2,Te),le.write_shift(2,De),pt.mt?s(le,pt.mt):le.write_shift(4,0),le.write_shift(-4,Et[ht]),le.write_shift(4,tn.length),le.write_shift(4,pt.content.length),le.write_shift(2,yr.length),le.write_shift(2,0),Oe+=le.length,ne.push(le),Oe+=yr.length,ne.push(yr),Oe+=tn.length,ne.push(tn),le=Ze(46),le.write_shift(4,33639248),le.write_shift(2,0),le.write_shift(2,20),le.write_shift(2,Te),le.write_shift(2,De),le.write_shift(4,0),le.write_shift(-4,Et[ht]),le.write_shift(4,tn.length),le.write_shift(4,pt.content.length),le.write_shift(2,yr.length),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(4,0),le.write_shift(4,Nr),tr+=le.l,oe.push(le),tr+=yr.length,oe.push(yr),++ht}return le=Ze(22),le.write_shift(4,101010256),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(2,ht),le.write_shift(2,ht),le.write_shift(4,tr),le.write_shift(4,Oe),le.write_shift(2,0),rs([rs(ne),rs(oe),le])}var Ye={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Tt(W,ie){if(W.ctype)return W.ctype;var ee=W.name||"",ne=ee.match(/\.([^\.]+)$/);return ne&&Ye[ne[1]]||ie&&(ne=(ee=ie).match(/[\.\\]([^\.\\])+$/),ne&&Ye[ne[1]])?Ye[ne[1]]:"application/octet-stream"}function sn(W){for(var ie=b0(W),ee=[],ne=0;ne<ie.length;ne+=76)ee.push(ie.slice(ne,ne+76));return ee.join(`\r
`)+`\r
`}function br(W){var ie=W.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Me){var Oe=Me.charCodeAt(0).toString(16).toUpperCase();return"="+(Oe.length==1?"0"+Oe:Oe)});ie=ie.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ie.charAt(0)==`
`&&(ie="=0D"+ie.slice(1)),ie=ie.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ee=[],ne=ie.split(`\r
`),oe=0;oe<ne.length;++oe){var le=ne[oe];if(le.length==0){ee.push("");continue}for(var De=0;De<le.length;){var Te=76,Re=le.slice(De,De+Te);Re.charAt(Te-1)=="="?Te--:Re.charAt(Te-2)=="="?Te-=2:Re.charAt(Te-3)=="="&&(Te-=3),Re=le.slice(De,De+Te),De+=Te,De<le.length&&(Re+="="),ee.push(Re)}}return ee.join(`\r
`)}function xr(W){for(var ie=[],ee=0;ee<W.length;++ee){for(var ne=W[ee];ee<=W.length&&ne.charAt(ne.length-1)=="=";)ne=ne.slice(0,ne.length-1)+W[++ee];ie.push(ne)}for(var oe=0;oe<ie.length;++oe)ie[oe]=ie[oe].replace(/[=][0-9A-Fa-f]{2}/g,function(le){return String.fromCharCode(parseInt(le.slice(1),16))});return po(ie.join(`\r
`))}function jn(W,ie,ee){for(var ne="",oe="",le="",De,Te=0;Te<10;++Te){var Re=ie[Te];if(!Re||Re.match(/^\s*$/))break;var Me=Re.match(/^(.*?):\s*([^\s].*)$/);if(Me)switch(Me[1].toLowerCase()){case"content-location":ne=Me[2].trim();break;case"content-type":le=Me[2].trim();break;case"content-transfer-encoding":oe=Me[2].trim();break}}switch(++Te,oe.toLowerCase()){case"base64":De=po(Nl(ie.slice(Te).join("")));break;case"quoted-printable":De=xr(ie.slice(Te));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+oe)}var Oe=an(W,ne.slice(ee.length),De,{unsafe:!0});le&&(Oe.ctype=le)}function Zt(W,ie){if(_e(W.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ee=ie&&ie.root||"",ne=(Jr&&Buffer.isBuffer(W)?W.toString("binary"):_e(W)).split(`\r
`),oe=0,le="";for(oe=0;oe<ne.length;++oe)if(le=ne[oe],!!/^Content-Location:/i.test(le)&&(le=le.slice(le.indexOf("file")),ee||(ee=le.slice(0,le.lastIndexOf("/")+1)),le.slice(0,ee.length)!=ee))for(;ee.length>0&&(ee=ee.slice(0,ee.length-1),ee=ee.slice(0,ee.lastIndexOf("/")+1),le.slice(0,ee.length)!=ee););var De=(ne[1]||"").match(/boundary="(.*?)"/);if(!De)throw new Error("MAD cannot find boundary");var Te="--"+(De[1]||""),Re=[],Me=[],Oe={FileIndex:Re,FullPaths:Me};E(Oe);var ht,gt=0;for(oe=0;oe<ne.length;++oe){var kt=ne[oe];kt!==Te&&kt!==Te+"--"||(gt++&&jn(Oe,ne.slice(ht,oe),ee),ht=oe)}return Oe}function zn(W,ie){var ee=ie||{},ne=ee.boundary||"SheetJS";ne="------="+ne;for(var oe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ne.slice(2)+'"',"","",""],le=W.FullPaths[0],De=le,Te=W.FileIndex[0],Re=1;Re<W.FullPaths.length;++Re)if(De=W.FullPaths[Re].slice(le.length),Te=W.FileIndex[Re],!(!Te.size||!Te.content||De=="Sh33tJ5")){De=De.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(tr){return"_x"+tr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(tr){return"_u"+tr.charCodeAt(0).toString(16)+"_"});for(var Me=Te.content,Oe=Jr&&Buffer.isBuffer(Me)?Me.toString("binary"):_e(Me),ht=0,gt=Math.min(1024,Oe.length),kt=0,pt=0;pt<=gt;++pt)(kt=Oe.charCodeAt(pt))>=32&&kt<128&&++ht;var Et=ht>=gt*4/5;oe.push(ne),oe.push("Content-Location: "+(ee.root||"file:///C:/SheetJS/")+De),oe.push("Content-Transfer-Encoding: "+(Et?"quoted-printable":"base64")),oe.push("Content-Type: "+Tt(Te,De)),oe.push(""),oe.push(Et?br(Oe):sn(Oe))}return oe.push(ne+`--\r
`),oe.join(`\r
`)}function en(W){var ie={};return E(ie,W),ie}function an(W,ie,ee,ne){var oe=ne&&ne.unsafe;oe||E(W);var le=!oe&&vn.find(W,ie);if(!le){var De=W.FullPaths[0];ie.slice(0,De.length)==De?De=ie:(De.slice(-1)!="/"&&(De+="/"),De=(De+ie).replace("//","/")),le={name:i(ie),type:2},W.FileIndex.push(le),W.FullPaths.push(De),oe||vn.utils.cfb_gc(W)}return le.content=ee,le.size=ee?ee.length:0,ne&&(ne.CLSID&&(le.clsid=ne.CLSID),ne.mt&&(le.mt=ne.mt),ne.ct&&(le.ct=ne.ct)),le}function Nn(W,ie){E(W);var ee=vn.find(W,ie);if(ee){for(var ne=0;ne<W.FileIndex.length;++ne)if(W.FileIndex[ne]==ee)return W.FileIndex.splice(ne,1),W.FullPaths.splice(ne,1),!0}return!1}function Fr(W,ie,ee){E(W);var ne=vn.find(W,ie);if(ne){for(var oe=0;oe<W.FileIndex.length;++oe)if(W.FileIndex[oe]==ne)return W.FileIndex[oe].name=i(ee),W.FullPaths[oe]=ee,!0}return!1}function Qr(W){A(W,!0)}return e.find=N,e.read=K,e.parse=h,e.write=Ue,e.writeFile=he,e.utils={cfb_new:en,cfb_add:an,cfb_del:Nn,cfb_mov:Fr,cfb_gc:Qr,ReadShift:Od,CheckField:kC,prep_blob:ma,bconcat:rs,use_zlib:L,_deflateRaw:Rt,_inflateRaw:Ir,consts:ye},e}();function FV(t){return typeof t=="string"?Hg(t):Array.isArray(t)?oV(t):t}function X0(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=Hg(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?A0(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var i=new Blob([FV(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=t,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Y0(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function ls(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function OS(t,e){for(var r=[],n=ls(t),i=0;i!==n.length;++i)r[t[n[i]][e]]==null&&(r[t[n[i]][e]]=n[i]);return r}function xw(t){for(var e=[],r=ls(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function Wg(t){for(var e=[],r=ls(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function DV(t){for(var e=[],r=ls(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var H1=new Date(1899,11,30,0,0,0);function Js(t,e){var r=t.getTime(),n=H1.getTime()+(t.getTimezoneOffset()-H1.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var hC=new Date,MV=H1.getTime()+(hC.getTimezoneOffset()-H1.getTimezoneOffset())*6e4,BS=hC.getTimezoneOffset();function fC(t){var e=new Date;return e.setTime(t*24*60*60*1e3+MV),e.getTimezoneOffset()!==BS&&e.setTime(e.getTime()+(e.getTimezoneOffset()-BS)*6e4),e}var US=new Date("2017-02-19T19:06:09.000Z"),dC=isNaN(US.getFullYear())?new Date("2/19/17"):US,OV=dC.getFullYear()==2017;function Os(t,e){var r=new Date(t);if(OV)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(dC.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Kg(t,e){if(Jr&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],i=0;i!=t.length;++i)n.push(String.fromCharCode(t[i]));return n.join("")}function ea(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ea(t[r]));return e}function ai(t,e){for(var r="";r.length<e;)r+=t;return r}function gl(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var BV=["january","february","march","april","may","june","july","august","september","october","november","december"];function S0(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&BV.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}function Cr(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Jr?n=Il(r):n=lV(r),vn.utils.cfb_add(t,e,n)}vn.utils.cfb_add(t,e,r)}else t.file(e,r)}function yw(){return vn.utils.cfb_new()}var Ci=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,UV={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},vw=xw(UV),ww=/[&<>'"]/g,VV=/[\u0000-\u0008\u000b-\u001f]/g;function mn(t){var e=t+"";return e.replace(ww,function(r){return vw[r]}).replace(VV,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function VS(t){return mn(t).replace(/ /g,"_x0020_")}var pC=/[\u0000-\u001f]/g;function zV(t){var e=t+"";return e.replace(ww,function(r){return vw[r]}).replace(/\n/g,"<br/>").replace(pC,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function HV(t){var e=t+"";return e.replace(ww,function(r){return vw[r]}).replace(pC,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function qV(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function $V(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Tx(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(i=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|s&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function zS(t){var e=Tu(2*t.length),r,n,i=1,s=0,a=0,o;for(n=0;n<t.length;n+=i)i=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),i=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),i=3):(i=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function HS(t){return Il(t,"binary").toString("utf8")}var rm="foo bar baz",Md=Jr&&(HS(rm)==Tx(rm)&&HS||zS(rm)==Tx(rm)&&zS)||Tx,A0=Jr?function(t){return Il(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,i=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},WV=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)n=n.replace(t[i][0],t[i][1]);return n}}(),mC=/(^\s|\s$|\n)/;function ns(t,e){return"<"+t+(e.match(mC)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function E0(t){return ls(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Nt(t,e,r){return"<"+t+(r!=null?E0(r):"")+(e!=null?(e.match(mC)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function yv(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function KV(t,e){switch(typeof t){case"string":var r=Nt("vt:lpwstr",mn(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Nt((t|0)==t?"vt:i4":"vt:r8",mn(String(t)));case"boolean":return Nt("vt:bool",t?"true":"false")}if(t instanceof Date)return Nt("vt:filetime",yv(t));throw new Error("Unable to serialize "+t)}var Hi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Af=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ga={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function GV(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function YV(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=n?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)t[r+o]=s&255;t[r+6]=(i&15)<<4|s&15,t[r+7]=i>>4|n}var qS=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var i=0,s=t[0][n].length;i<s;i+=r)e.push.apply(e,t[0][n].slice(i,i+r));return e},$S=Jr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Il(e)})):qS(t)}:qS,WS=function(t,e,r){for(var n=[],i=e;i<r;i+=2)n.push(String.fromCharCode(hd(t,i)));return n.join("").replace(Dd,"")},_w=Jr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(Dd,""):WS(t,e,r)}:WS,KS=function(t,e,r){for(var n=[],i=e;i<e+r;++i)n.push(("0"+t[i].toString(16)).slice(-2));return n.join("")},gC=Jr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):KS(t,e,r)}:KS,GS=function(t,e,r){for(var n=[],i=e;i<r;i++)n.push(String.fromCharCode(ah(t,i)));return n.join("")},Q0=Jr?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):GS(e,r,n)}:GS,xC=function(t,e){var r=xa(t,e);return r>0?Q0(t,e+4,e+4+r-1):""},yC=xC,vC=function(t,e){var r=xa(t,e);return r>0?Q0(t,e+4,e+4+r-1):""},wC=vC,_C=function(t,e){var r=2*xa(t,e);return r>0?Q0(t,e+4,e+4+r-1):""},bC=_C,SC=function(e,r){var n=xa(e,r);return n>0?_w(e,r+4,r+4+n):""},AC=SC,EC=function(t,e){var r=xa(t,e);return r>0?Q0(t,e+4,e+4+r):""},NC=EC,TC=function(t,e){return GV(t,e)},q1=TC,bw=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Jr&&(yC=function(e,r){if(!Buffer.isBuffer(e))return xC(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},wC=function(e,r){if(!Buffer.isBuffer(e))return vC(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},bC=function(e,r){if(!Buffer.isBuffer(e))return _C(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},AC=function(e,r){if(!Buffer.isBuffer(e))return SC(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},NC=function(e,r){if(!Buffer.isBuffer(e))return EC(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},q1=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):TC(e,r)},bw=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var ah=function(t,e){return t[e]},hd=function(t,e){return t[e+1]*256+t[e]},XV=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},xa=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},nu=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},QV=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Od(t,e){var r="",n,i,s=[],a,o,l,u;switch(e){case"dbcs":if(u=this.l,Jr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(hd(this,u)),u+=2;t*=2;break;case"utf8":r=Q0(this,this.l,this.l+t);break;case"utf16le":t*=2,r=_w(this,this.l,this.l+t);break;case"wstr":return Od.call(this,t,"dbcs");case"lpstr-ansi":r=yC(this,this.l),t=4+xa(this,this.l);break;case"lpstr-cp":r=wC(this,this.l),t=4+xa(this,this.l);break;case"lpwstr":r=bC(this,this.l),t=4+2*xa(this,this.l);break;case"lpp4":t=4+xa(this,this.l),r=AC(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+xa(this,this.l),r=NC(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=ah(this,this.l+t++))!==0;)s.push(Jp(a));r=s.join("");break;case"_wstr":for(t=0,r="";(a=hd(this,this.l+t))!==0;)s.push(Jp(a)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=ah(this,u),this.l=u+1,o=Od.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Jp(hd(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=ah(this,u),this.l=u+1,o=Od.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Jp(ah(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=ah(this,this.l),this.l++,n;case 2:return n=(e==="i"?XV:hd)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?nu:QV)(this,this.l),this.l+=4,n):(i=xa(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=q1(this,this.l):i=q1([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:r=gC(this,this.l,t);break}}return this.l+=t,r}var ZV=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},JV=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},ez=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function tz(t,e,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=e.length;++i)ez(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(r==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,ZV(this,e,this.l);break;case 8:if(n=8,r==="f"){YV(this,e,this.l);break}case 16:break;case-4:n=4,JV(this,e,this.l);break}return this.l+=n,this}function kC(t,e){var r=gC(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function ma(t,e){t.l=e,t.read_shift=Od,t.chk=kC,t.write_shift=tz}function Ko(t,e){t.l+=e}function Ze(t){var e=Tu(t);return ma(e,0),e}function Zs(){var t=[],e=Jr?256:2048,r=function(u){var h=Ze(u);return ma(h,0),h},n=r(e),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(i(),n=r(Math.max(u+1,e)))},a=function(){return i(),rs(t)},o=function(u){i(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:a,_bufs:t}}function ft(t,e,r,n){var i=+e,s;if(!isNaN(i)){n||(n=GK[i].p||(r||[]).length||0),s=1+(i>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var a=t.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&bw(r)&&t.push(r)}}function Bd(t,e,r){var n=ea(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function YS(t,e,r){var n=ea(t);return n.s=Bd(n.s,e.s,r),n.e=Bd(n.e,e.s,r),n}function Ud(t,e){if(t.cRel&&t.c<0)for(t=ea(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ea(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=xn(t);return!t.cRel&&t.cRel!=null&&(r=iz(r)),!t.rRel&&t.rRel!=null&&(r=rz(r)),r}function kx(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Es(t.s.c)+":"+(t.e.cRel?"":"$")+Es(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+ss(t.s.r)+":"+(t.e.rRel?"":"$")+ss(t.e.r):Ud(t.s,e.biff)+":"+Ud(t.e,e.biff)}function Sw(t){return parseInt(nz(t),10)-1}function ss(t){return""+(t+1)}function rz(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function nz(t){return t.replace(/\$(\d+)$/,"$1")}function Aw(t){for(var e=sz(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Es(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function iz(t){return t.replace(/^([A-Z])/,"$$$1")}function sz(t){return t.replace(/^\$([A-Z])/,"$1")}function az(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function qi(t){for(var e=0,r=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:e-1}}function xn(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Ta(t){var e=t.indexOf(":");return e==-1?{s:qi(t),e:qi(t)}:{s:qi(t.slice(0,e)),e:qi(t.slice(e+1))}}function ki(t,e){return typeof e>"u"||typeof e=="number"?ki(t.s,t.e):(typeof t!="string"&&(t=xn(t)),typeof e!="string"&&(e=xn(e)),t==e?t:t+":"+e)}function Bn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,s=t.length;for(r=0;n<s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.s.c=--r,r=0;n<s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(e.s.r=--r,n===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.e.c=--r,r=0;n!=s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return e.e.r=--r,e}function XS(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Dc(t.z,r?Js(e):e)}catch{}try{return t.w=Dc((t.XF||{}).numFmtId||(r?14:0),r?Js(e):e)}catch{return""+e}}function Tl(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Z0[t.v]||t.v:e==null?XS(t,t.v):XS(t,e))}function Du(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function CC(t,e,r){var n=r||{},i=t?Array.isArray(t):n.dense,s=t||(i?[]:{}),a=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?qi(n.origin):n.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var h=Bn(s["!ref"]);u.s.c=h.s.c,u.s.r=h.s.r,u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),a==-1&&(u.e.r=a=h.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=e[d].length;++p)if(!(typeof e[d][p]>"u")){var f={v:e[d][p]},v=a+d,y=o+p;if(u.s.r>v&&(u.s.r=v),u.s.c>y&&(u.s.c=y),u.e.r<v&&(u.e.r=v),u.e.c<y&&(u.e.c=y),e[d][p]&&typeof e[d][p]=="object"&&!Array.isArray(e[d][p])&&!(e[d][p]instanceof Date))f=e[d][p];else if(Array.isArray(f.v)&&(f.f=e[d][p][1],f.v=f.v[0]),f.v===null)if(f.f)f.t="n";else if(n.nullError)f.t="e",f.v=0;else if(n.sheetStubs)f.t="z";else continue;else typeof f.v=="number"?f.t="n":typeof f.v=="boolean"?f.t="b":f.v instanceof Date?(f.z=n.dateNF||oi[14],n.cellDates?(f.t="d",f.w=Dc(f.z,Js(f.v))):(f.t="n",f.v=Js(f.v),f.w=Dc(f.z,f.v))):f.t="s";if(i)s[v]||(s[v]=[]),s[v][y]&&s[v][y].z&&(f.z=s[v][y].z),s[v][y]=f;else{var b=xn({c:y,r:v});s[b]&&s[b].z&&(f.z=s[b].z),s[b]=f}}}return u.s.c<1e7&&(s["!ref"]=ki(u)),s}function Ef(t,e){return CC(null,t,e)}function oz(t){return t.read_shift(4,"i")}function yo(t,e){return e||(e=Ze(4)),e.write_shift(4,t),e}function Ns(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function $i(t,e){var r=!1;return e==null&&(r=!0,e=Ze(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function lz(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function cz(t,e){return e||(e=Ze(4)),e.write_shift(2,0),e.write_shift(2,0),e}function Ew(t,e){var r=t.l,n=t.read_shift(1),i=Ns(t),s=[],a={t:i,h:i};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)s.push(lz(t));a.r=s}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}function uz(t,e){var r=!1;return e==null&&(r=!0,e=Ze(15+4*t.t.length)),e.write_shift(1,0),$i(t.t,e),r?e.slice(0,e.l):e}var hz=Ew;function fz(t,e){var r=!1;return e==null&&(r=!0,e=Ze(23+4*t.t.length)),e.write_shift(1,1),$i(t.t,e),e.write_shift(4,1),cz({},e),r?e.slice(0,e.l):e}function Qa(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Mu(t,e){return e==null&&(e=Ze(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Ou(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Bu(t,e){return e==null&&(e=Ze(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var dz=Ns,IC=$i;function Nw(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function $1(t,e){var r=!1;return e==null&&(r=!0,e=Ze(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var pz=Ns,vv=Nw,Tw=$1;function LC(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var i=n===0?q1([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):nu(e,0)>>2;return r?i/100:i}function PC(t,e){e==null&&(e=Ze(4));var r=0,n=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?i:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function jC(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function mz(t,e){return e||(e=Ze(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Uu=jC,Nf=mz;function Tf(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function ku(t,e){return(e||Ze(8)).write_shift(8,t,"f")}function gz(t){var e={},r=t.read_shift(1),n=r>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var u=Ez[i];u&&(e.rgb=oA(u));break;case 2:e.rgb=oA([a,o,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function W1(t,e){if(e||(e=Ze(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function xz(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function yz(t,e){e||(e=Ze(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}var RC=2,da=3,nm=11,K1=19,im=64,vz=65,wz=71,_z=4108,bz=4126,Ji=80,QS={1:{n:"CodePage",t:RC},2:{n:"Category",t:Ji},3:{n:"PresentationFormat",t:Ji},4:{n:"ByteCount",t:da},5:{n:"LineCount",t:da},6:{n:"ParagraphCount",t:da},7:{n:"SlideCount",t:da},8:{n:"NoteCount",t:da},9:{n:"HiddenCount",t:da},10:{n:"MultimediaClipCount",t:da},11:{n:"ScaleCrop",t:nm},12:{n:"HeadingPairs",t:_z},13:{n:"TitlesOfParts",t:bz},14:{n:"Manager",t:Ji},15:{n:"Company",t:Ji},16:{n:"LinksUpToDate",t:nm},17:{n:"CharacterCount",t:da},19:{n:"SharedDoc",t:nm},22:{n:"HyperlinksChanged",t:nm},23:{n:"AppVersion",t:da,p:"version"},24:{n:"DigSig",t:vz},26:{n:"ContentType",t:Ji},27:{n:"ContentStatus",t:Ji},28:{n:"Language",t:Ji},29:{n:"Version",t:Ji},255:{},2147483648:{n:"Locale",t:K1},2147483651:{n:"Behavior",t:K1},1919054434:{}},ZS={1:{n:"CodePage",t:RC},2:{n:"Title",t:Ji},3:{n:"Subject",t:Ji},4:{n:"Author",t:Ji},5:{n:"Keywords",t:Ji},6:{n:"Comments",t:Ji},7:{n:"Template",t:Ji},8:{n:"LastAuthor",t:Ji},9:{n:"RevNumber",t:Ji},10:{n:"EditTime",t:im},11:{n:"LastPrinted",t:im},12:{n:"CreatedDate",t:im},13:{n:"ModifiedDate",t:im},14:{n:"PageCount",t:da},15:{n:"WordCount",t:da},16:{n:"CharCount",t:da},17:{n:"Thumbnail",t:wz},18:{n:"Application",t:Ji},19:{n:"DocSecurity",t:da},255:{},2147483648:{n:"Locale",t:K1},2147483651:{n:"Behavior",t:K1},1919054434:{}};function Sz(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Az=Sz([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Ez=ea(Az),Z0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Nz={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},sm={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function FC(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function DC(t,e){var r=DV(Nz),n=[],i;n[n.length]=Ci,n[n.length]=Nt("Types",null,{xmlns:Hi.CT,"xmlns:xsd":Hi.xsd,"xmlns:xsi":Hi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Nt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(i=t[l][0],n[n.length]=Nt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:sm[l][e.bookType]||sm[l].xlsx}))},a=function(l){(t[l]||[]).forEach(function(u){n[n.length]=Nt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:sm[l][e.bookType]||sm[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(u){n[n.length]=Nt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Zr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function MC(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function qh(t){var e=[Ci,Nt("Relationships",null,{xmlns:Hi.RELS})];return ls(t["!id"]).forEach(function(r){e[e.length]=Nt("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function dn(t,e,r,n,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=n,i.Target=r,[Zr.HLINK,Zr.XPATH,Zr.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}function Tz(t){var e=[Ci];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function JS(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function kz(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Cz(t){var e=[Ci];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(JS(t[r][0],t[r][1])),e.push(kz("",t[r][0]));return e.push(JS("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function OC(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+O1.version+"</meta:generator></office:meta></office:document-meta>"}var gu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Cx(t,e,r,n,i){i[t]!=null||e==null||e===""||(i[t]=e,e=mn(e),n[n.length]=r?Nt(t,e,r):ns(t,e))}function BC(t,e){var r=e||{},n=[Ci,Nt("cp:coreProperties",null,{"xmlns:cp":Hi.CORE_PROPS,"xmlns:dc":Hi.dc,"xmlns:dcterms":Hi.dcterms,"xmlns:dcmitype":Hi.dcmitype,"xmlns:xsi":Hi.xsi})],i={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&Cx("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:yv(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),t.ModifiedDate!=null&&Cx("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:yv(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var s=0;s!=gu.length;++s){var a=gu[s],o=r.Props&&r.Props[a[1]]!=null?r.Props[a[1]]:t?t[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&Cx(a[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var $h=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],UC=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function VC(t){var e=[],r=Nt;return t||(t={}),t.Application="SheetJS",e[e.length]=Ci,e[e.length]=Nt("Properties",null,{xmlns:Hi.EXT_PROPS,"xmlns:vt":Hi.vt}),$h.forEach(function(n){if(t[n[1]]!==void 0){var i;switch(n[2]){case"string":i=mn(String(t[n[1]]));break;case"bool":i=t[n[1]]?"true":"false";break}i!==void 0&&(e[e.length]=r(n[0],i))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+mn(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function zC(t){var e=[Ci,Nt("Properties",null,{xmlns:Hi.CUST_PROPS,"xmlns:vt":Hi.vt})];if(!t)return e.join("");var r=1;return ls(t).forEach(function(i){++r,e[e.length]=Nt("property",KV(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:mn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var eA={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Iz(t,e){var r=[];return ls(eA).map(function(n){for(var i=0;i<gu.length;++i)if(gu[i][1]==n)return gu[i];for(i=0;i<$h.length;++i)if($h[i][1]==n)return $h[i];throw n}).forEach(function(n){if(t[n[1]]!=null){var i=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(ns(eA[n[1]]||n[1],i))}}),Nt("DocumentProperties",r.join(""),{xmlns:ga.o})}function Lz(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return t&&ls(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var a=0;a<gu.length;++a)if(s==gu[a][1])return;for(a=0;a<$h.length;++a)if(s==$h[a][1])return;for(a=0;a<r.length;++a)if(s==r[a])return;var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(Nt(VS(s),o,{"dt:dt":l}))}}),e&&ls(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(Nt(VS(s),a,{"dt:dt":o}))}}),"<"+n+' xmlns="'+ga.o+'">'+i.join("")+"</"+n+">"}function Pz(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),i=(r-n)/Math.pow(2,32);n*=1e7,i*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),i+=s);var a=Ze(8);return a.write_shift(4,n),a.write_shift(4,i),a}function tA(t,e){var r=Ze(4),n=Ze(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Ze(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=Pz(e);break;case 31:case 80:for(n=Ze(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return rs([r,n])}var HC=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function jz(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function rA(t,e,r){var n=Ze(8),i=[],s=[],a=8,o=0,l=Ze(8),u=Ze(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),i.push(u),a+=8+l.length,!e){u=Ze(8),u.write_shift(4,0),i.unshift(u);var h=[Ze(4)];for(h[0].write_shift(4,t.length),o=0;o<t.length;++o){var d=t[o][0];for(l=Ze(8+2*(d.length+1)+(d.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);h.push(l)}l=rs(h),s.unshift(l),a+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(HC.indexOf(t[o][0])>-1||UC.indexOf(t[o][0])>-1)&&t[o][1]!=null){var p=t[o][1],f=0;if(e){f=+e[t[o][0]];var v=r[f];if(v.p=="version"&&typeof p=="string"){var y=p.split(".");p=(+y[0]<<16)+(+y[1]||0)}l=tA(v.t,p)}else{var b=jz(p);b==-1&&(b=31,p=String(p)),l=tA(b,p)}s.push(l),u=Ze(8),u.write_shift(4,e?f:2+o),i.push(u),a+=8+l.length}var w=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,w),w+=s[o].length;return n.write_shift(4,a),n.write_shift(4,s.length),rs([n].concat(i).concat(s))}function nA(t,e,r,n,i,s){var a=Ze(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,vn.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var l=rA(t,r,n);if(o.push(l),i){var u=rA(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(u)}return rs(o)}function Rz(t,e){e||(e=Ze(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function Fz(t,e){return t.read_shift(e)===1}function Fs(t,e){return e||(e=Ze(2)),e.write_shift(2,+!!t),e}function qC(t){return t.read_shift(2,"u")}function za(t,e){return e||(e=Ze(2)),e.write_shift(2,t),e}function $C(t,e,r){return r||(r=Ze(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function WC(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var a=n?t.read_shift(n,i):"";return a}function Dz(t){var e=t.t||"",r=Ze(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Ze(2*e.length);n.write_shift(2*e.length,e,"utf16le");var i=[r,n];return rs(i)}function Mz(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Oz(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Mz(t,n,r)}function Bz(t,e,r){if(r.biff>5)return Oz(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function KC(t,e,r){return r||(r=Ze(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function iA(t,e){e||(e=Ze(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function Uz(t){var e=Ze(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),s=i>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(r=0;r<a.length;++r)e.write_shift(4,a[r]);if(s==28)n=n.slice(1),iA(n,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));var o=i>-1?n.slice(0,i):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),s&8&&iA(i>-1?n.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function Cu(t,e,r,n){return n||(n=Ze(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function Vz(t,e,r){var n=r.biff>8?4:2,i=t.read_shift(n),s=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[i,s,a]}function zz(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);return{s:{c:n,r:e},e:{c:i,r}}}function GC(t,e){return e||(e=Ze(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function kw(t,e,r){var n=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ze(i);return s.write_shift(2,n),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Hz(t,e){var r=!e||e.biff==8,n=Ze(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function qz(t,e){var r=!e||e.biff>=8?2:1,n=Ze(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function $z(t,e){var r=Ze(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],i=0;i<t.length;++i)n[i]=Dz(t[i]);var s=rs([r].concat(n));return s.parts=[r.length].concat(n.map(function(a){return a.length})),s}function Wz(){var t=Ze(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Kz(t){var e=Ze(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Gz(t,e){var r=t.name||"Arial",n=e&&e.biff==5,i=n?15+r.length:16+2*r.length,s=Ze(i);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function Yz(t,e,r,n){var i=Ze(10);return Cu(t,e,n,i),i.write_shift(4,r),i}function Xz(t,e,r,n,i){var s=!i||i.biff==8,a=Ze(8+ +s+(1+s)*r.length);return Cu(t,e,n,a),a.write_shift(2,r.length),s&&a.write_shift(1,1),a.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),a}function Qz(t,e,r,n){var i=r&&r.biff==5;n||(n=Ze(i?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(i?1:2,e.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}function Zz(t,e){var r=e.biff==8||!e.biff?4:2,n=Ze(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function sA(t,e,r,n){var i=r&&r.biff==5;n||(n=Ze(i?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function Jz(t){var e=Ze(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function eH(t,e,r,n,i,s){var a=Ze(8);return Cu(t,e,n,a),$C(r,s,a),a}function tH(t,e,r,n){var i=Ze(14);return Cu(t,e,n,i),ku(r,i),i}function rH(t,e,r){if(r.biff<8)return nH(t,e,r);for(var n=[],i=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(Vz(t,r.biff>8?12:6,r));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return n}function nH(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=WC(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function iH(t){var e=Ze(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)GC(t[r],e);return e}function sH(t){var e=Ze(24),r=qi(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(n[i],16));return rs([e,Uz(t[1])])}function aH(t){var e=t[1].Tooltip,r=Ze(10+2*(e.length+1));r.write_shift(2,2048);var n=qi(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<e.length;++i)r.write_shift(2,e.charCodeAt(i));return r.write_shift(2,0),r}function oH(t){return t||(t=Ze(4)),t.write_shift(2,1),t.write_shift(2,1),t}function lH(t,e,r){if(!r.cellStyles)return Ko(t,e);var n=r&&r.biff>=12?4:2,i=t.read_shift(n),s=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function cH(t,e){var r=Ze(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function uH(t){for(var e=Ze(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}function hH(t,e,r){var n=Ze(15);return ep(n,t,e),n.write_shift(8,r,"f"),n}function fH(t,e,r){var n=Ze(9);return ep(n,t,e),n.write_shift(2,r),n}var dH=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=xw({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],h=Tu(1);switch(l.type){case"base64":h=po(Nl(o));break;case"binary":h=po(o);break;case"buffer":case"array":h=o;break}ma(h,0);var d=h.read_shift(1),p=!!(d&136),f=!1,v=!1;switch(d){case 2:break;case 3:break;case 48:f=!0,p=!0;break;case 49:f=!0,p=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var y=0,b=521;d==2&&(y=h.read_shift(2)),h.l+=3,d!=2&&(y=h.read_shift(4)),y>1048576&&(y=1e6),d!=2&&(b=h.read_shift(2));var w=h.read_shift(2),S=l.codepage||1252;d!=2&&(h.l+=16,h.read_shift(1),h[h.l]!==0&&(S=t[h[h.l]]),h.l+=1,h.l+=2),v&&(h.l+=36);for(var k=[],R={},q=Math.min(h.length,d==2?521:b-10-(f?264:0)),K=v?32:11;h.l<q&&h[h.l]!=13;)switch(R={},R.name=B1.utils.decode(S,h.slice(h.l,h.l+K)).replace(/[\u0000\r\n].*$/g,""),h.l+=K,R.type=String.fromCharCode(h.read_shift(1)),d!=2&&!v&&(R.offset=h.read_shift(4)),R.len=h.read_shift(1),d==2&&(R.offset=h.read_shift(2)),R.dec=h.read_shift(1),R.name.length&&k.push(R),d!=2&&(h.l+=v?13:14),R.type){case"B":(!f||R.len!=8)&&l.WTF&&console.log("Skipping "+R.name+":"+R.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+R.name+":"+R.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+R.type)}if(h[h.l]!==13&&(h.l=b-1),h.read_shift(1)!==13)throw new Error("DBF Terminator not found "+h.l+" "+h[h.l]);h.l=b;var E=0,C=0;for(u[0]=[],C=0;C!=k.length;++C)u[0][C]=k[C].name;for(;y-- >0;){if(h[h.l]===42){h.l+=w;continue}for(++h.l,u[++E]=[],C=0,C=0;C!=k.length;++C){var A=h.slice(h.l,h.l+k[C].len);h.l+=k[C].len,ma(A,0);var D=B1.utils.decode(S,A);switch(k[C].type){case"C":D.trim().length&&(u[E][C]=D.replace(/\s+$/,""));break;case"D":D.length===8?u[E][C]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):u[E][C]=D;break;case"F":u[E][C]=parseFloat(D.trim());break;case"+":case"I":u[E][C]=v?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":u[E][C]=!0;break;case"N":case"F":u[E][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));u[E][C]="##MEMO##"+(v?parseInt(D.trim(),10):A.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(u[E][C]=+D||0);break;case"@":u[E][C]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":u[E][C]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":u[E][C]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][C]=-A.read_shift(-8,"f");break;case"B":if(f&&k[C].len==8){u[E][C]=A.read_shift(8,"f");break}case"G":case"P":A.l+=k[C].len;break;case"0":if(k[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+k[C].type)}}}if(d!=2&&h.l<h.length&&h[h.l++]!=26)throw new Error("DBF EOF Marker missing "+(h.l-1)+" of "+h.length+" "+h[h.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=k,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var h=Ef(r(o,u),u);return h["!cols"]=u.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete u.DBF,h}function i(o,l){try{return Du(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var u=l||{};if(+u.codepage>=0&&_0(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var h=Zs(),d=Z1(o,{header:1,raw:!0,cellDates:!0}),p=d[0],f=d.slice(1),v=o["!cols"]||[],y=0,b=0,w=0,S=1;for(y=0;y<p.length;++y){if(((v[y]||{}).DBF||{}).name){p[y]=v[y].DBF.name,++w;continue}if(p[y]!=null){if(++w,typeof p[y]=="number"&&(p[y]=p[y].toString(10)),typeof p[y]!="string")throw new Error("DBF Invalid column name "+p[y]+" |"+typeof p[y]+"|");if(p.indexOf(p[y])!==y){for(b=0;b<1024;++b)if(p.indexOf(p[y]+"_"+b)==-1){p[y]+="_"+b;break}}}}var k=Bn(o["!ref"]),R=[],q=[],K=[];for(y=0;y<=k.e.c-k.s.c;++y){var E="",C="",A=0,D=[];for(b=0;b<f.length;++b)f[b][y]!=null&&D.push(f[b][y]);if(D.length==0||p[y]==null){R[y]="?";continue}for(b=0;b<D.length;++b){switch(typeof D[b]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=D[b]instanceof Date?"D":"C";break;default:C="C"}A=Math.max(A,String(D[b]).length),E=E&&E!=C?"C":C}A>250&&(A=250),C=((v[y]||{}).DBF||{}).type,C=="C"&&v[y].DBF.len>A&&(A=v[y].DBF.len),E=="B"&&C=="N"&&(E="N",K[y]=v[y].DBF.dec,A=v[y].DBF.len),q[y]=E=="C"||C=="N"?A:s[E]||0,S+=q[y],R[y]=E}var N=h.next(32);for(N.write_shift(4,318902576),N.write_shift(4,f.length),N.write_shift(2,296+32*w),N.write_shift(2,S),y=0;y<4;++y)N.write_shift(4,0);for(N.write_shift(4,0|(+e[Xk]||3)<<8),y=0,b=0;y<p.length;++y)if(p[y]!=null){var j=h.next(32),P=(p[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);j.write_shift(1,P,"sbcs"),j.write_shift(1,R[y]=="?"?"C":R[y],"sbcs"),j.write_shift(4,b),j.write_shift(1,q[y]||s[R[y]]||0),j.write_shift(1,K[y]||0),j.write_shift(1,2),j.write_shift(4,0),j.write_shift(1,0),j.write_shift(4,0),j.write_shift(4,0),b+=q[y]||s[R[y]]||0}var se=h.next(264);for(se.write_shift(4,13),y=0;y<65;++y)se.write_shift(4,0);for(y=0;y<f.length;++y){var ge=h.next(S);for(ge.write_shift(1,0),b=0;b<p.length;++b)if(p[b]!=null)switch(R[b]){case"L":ge.write_shift(1,f[y][b]==null?63:f[y][b]?84:70);break;case"B":ge.write_shift(8,f[y][b]||0,"f");break;case"N":var ve="0";for(typeof f[y][b]=="number"&&(ve=f[y][b].toFixed(K[b]||0)),w=0;w<q[b]-ve.length;++w)ge.write_shift(1,32);ge.write_shift(1,ve,"sbcs");break;case"D":f[y][b]?(ge.write_shift(4,("0000"+f[y][b].getFullYear()).slice(-4),"sbcs"),ge.write_shift(2,("00"+(f[y][b].getMonth()+1)).slice(-2),"sbcs"),ge.write_shift(2,("00"+f[y][b].getDate()).slice(-2),"sbcs")):ge.write_shift(8,"00000000","sbcs");break;case"C":var ye=String(f[y][b]!=null?f[y][b]:"").slice(0,q[b]);for(ge.write_shift(1,ye,"sbcs"),w=0;w<q[b]-ye.length;++w)ge.write_shift(1,32);break}}return h.next(1).write_shift(1,26),h.end()}return{to_workbook:i,to_sheet:n,from_sheet:a}}(),pH=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ls(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,f){var v=t[f];return typeof v=="number"?CS(v):v},n=function(p,f,v){var y=f.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return y==59?p:CS(y)};t["|"]=254;function i(p,f){switch(f.type){case"base64":return s(Nl(p),f);case"binary":return s(p,f);case"buffer":return s(Jr&&Buffer.isBuffer(p)?p.toString("binary"):Y0(p),f);case"array":return s(Kg(p),f)}throw new Error("Unrecognized type "+f.type)}function s(p,f){var v=p.split(/[\n\r]+/),y=-1,b=-1,w=0,S=0,k=[],R=[],q=null,K={},E=[],C=[],A=[],D=0,N;for(+f.codepage>=0&&_0(+f.codepage);w!==v.length;++w){D=0;var j=v[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),P=j.replace(/;;/g,"\0").split(";").map(function(z){return z.replace(/\u0000/g,";")}),se=P[0],ge;if(j.length>0)switch(se){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":P[1].charAt(0)=="P"&&R.push(j.slice(3).replace(/;;/g,";"));break;case"C":var ve=!1,ye=!1,he=!1,_e=!1,Ue=-1,Ie=-1;for(S=1;S<P.length;++S)switch(P[S].charAt(0)){case"A":break;case"X":b=parseInt(P[S].slice(1))-1,ye=!0;break;case"Y":for(y=parseInt(P[S].slice(1))-1,ye||(b=0),N=k.length;N<=y;++N)k[N]=[];break;case"K":ge=P[S].slice(1),ge.charAt(0)==='"'?ge=ge.slice(1,ge.length-1):ge==="TRUE"?ge=!0:ge==="FALSE"?ge=!1:isNaN(gl(ge))?isNaN(S0(ge).getDate())||(ge=Os(ge)):(ge=gl(ge),q!==null&&lC(q)&&(ge=fC(ge))),ve=!0;break;case"E":_e=!0;var L=fq(P[S].slice(1),{r:y,c:b});k[y][b]=[k[y][b],L];break;case"S":he=!0,k[y][b]=[k[y][b],"S5S"];break;case"G":break;case"R":Ue=parseInt(P[S].slice(1))-1;break;case"C":Ie=parseInt(P[S].slice(1))-1;break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+j)}if(ve&&(k[y][b]&&k[y][b].length==2?k[y][b][0]=ge:k[y][b]=ge,q=null),he){if(_e)throw new Error("SYLK shared formula cannot have own formula");var O=Ue>-1&&k[Ue][Ie];if(!O||!O[1])throw new Error("SYLK shared formula cannot find base");k[y][b][1]=dq(O[1],{r:y-Ue,c:b-Ie})}break;case"F":var B=0;for(S=1;S<P.length;++S)switch(P[S].charAt(0)){case"X":b=parseInt(P[S].slice(1))-1,++B;break;case"Y":for(y=parseInt(P[S].slice(1))-1,N=k.length;N<=y;++N)k[N]=[];break;case"M":D=parseInt(P[S].slice(1))/20;break;case"F":break;case"G":break;case"P":q=R[parseInt(P[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=P[S].slice(1).split(" "),N=parseInt(A[0],10);N<=parseInt(A[1],10);++N)D=parseInt(A[2],10),C[N-1]=D===0?{hidden:!0}:{wch:D},Cw(C[N-1]);break;case"C":b=parseInt(P[S].slice(1))-1,C[b]||(C[b]={});break;case"R":y=parseInt(P[S].slice(1))-1,E[y]||(E[y]={}),D>0?(E[y].hpt=D,E[y].hpx=JC(D)):D===0&&(E[y].hidden=!0);break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+j)}B<1&&(q=null);break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+j)}}return E.length>0&&(K["!rows"]=E),C.length>0&&(K["!cols"]=C),f&&f.sheetRows&&(k=k.slice(0,f.sheetRows)),[k,K]}function a(p,f){var v=i(p,f),y=v[0],b=v[1],w=Ef(y,f);return ls(b).forEach(function(S){w[S]=b[S]}),w}function o(p,f){return Du(a(p,f),f)}function l(p,f,v,y){var b="C;Y"+(v+1)+";X"+(y+1)+";K";switch(p.t){case"n":b+=p.v||0,p.f&&!p.F&&(b+=";E"+Lw(p.f,{r:v,c:y}));break;case"b":b+=p.v?"TRUE":"FALSE";break;case"e":b+=p.w||p.v;break;case"d":b+='"'+(p.w||p.v)+'"';break;case"s":b+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function u(p,f){f.forEach(function(v,y){var b="F;W"+(y+1)+" "+(y+1)+" ";v.hidden?b+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=G1(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=Y1(v.wpx)),typeof v.wch=="number"&&(b+=Math.round(v.wch))),b.charAt(b.length-1)!=" "&&p.push(b)})}function h(p,f){f.forEach(function(v,y){var b="F;";v.hidden?b+="M0;":v.hpt?b+="M"+20*v.hpt+";":v.hpx&&(b+="M"+20*X1(v.hpx)+";"),b.length>2&&p.push(b+"R"+(y+1))})}function d(p,f){var v=["ID;PWXL;N;E"],y=[],b=Bn(p["!ref"]),w,S=Array.isArray(p),k=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),p["!cols"]&&u(v,p["!cols"]),p["!rows"]&&h(v,p["!rows"]),v.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var R=b.s.r;R<=b.e.r;++R)for(var q=b.s.c;q<=b.e.c;++q){var K=xn({r:R,c:q});w=S?(p[R]||[])[q]:p[K],!(!w||w.v==null&&(!w.f||w.F))&&y.push(l(w,p,R,q))}return v.join(k)+k+y.join(k)+k+"E"+k}return{to_workbook:o,to_sheet:a,from_sheet:d}}(),mH=function(){function t(s,a){switch(a.type){case"base64":return e(Nl(s),a);case"binary":return e(s,a);case"buffer":return e(Jr&&Buffer.isBuffer(s)?s.toString("binary"):Y0(s),a);case"array":return e(Kg(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),l=-1,u=-1,h=0,d=[];h!==o.length;++h){if(o[h].trim()==="BOT"){d[++l]=[],u=0;continue}if(!(l<0)){var p=o[h].trim().split(","),f=p[0],v=p[1];++h;for(var y=o[h]||"";(y.match(/["]/g)||[]).length&1&&h<o.length-1;)y+=`
`+o[++h];switch(y=y.trim(),+f){case-1:if(y==="BOT"){d[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?d[l][u]=!0:y==="FALSE"?d[l][u]=!1:isNaN(gl(v))?isNaN(S0(v).getDate())?d[l][u]=v:d[l][u]=Os(v):d[l][u]=gl(v),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),d[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function r(s,a){return Ef(t(s,a),a)}function n(s,a){return Du(r(s,a),a)}var i=function(){var s=function(l,u,h,d,p){l.push(u),l.push(h+","+d),l.push('"'+p.replace(/"/g,'""')+'"')},a=function(l,u,h,d){l.push(u+","+h),l.push(u==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var u=[],h=Bn(l["!ref"]),d,p=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,h.e.r-h.s.r+1,""),s(u,"TUPLES",0,h.e.c-h.s.c+1,""),s(u,"DATA",0,0,"");for(var f=h.s.r;f<=h.e.r;++f){a(u,-1,0,"BOT");for(var v=h.s.c;v<=h.e.c;++v){var y=xn({r:f,c:v});if(d=p?(l[f]||[])[v]:l[y],!d){a(u,1,0,"");continue}switch(d.t){case"n":var b=d.w;!b&&d.v!=null&&(b=d.v),b==null?d.f&&!d.F?a(u,1,0,"="+d.f):a(u,1,0,""):a(u,0,b,"V");break;case"b":a(u,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=Dc(d.z||oi[14],Js(Os(d.v)))),a(u,0,d.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var w=`\r
`,S=u.join(w);return S}}();return{to_workbook:n,to_sheet:r,from_sheet:i}}(),YC=function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,p){for(var f=d.split(`
`),v=-1,y=-1,b=0,w=[];b!==f.length;++b){var S=f[b].trim().split(":");if(S[0]==="cell"){var k=qi(S[1]);if(w.length<=k.r)for(v=w.length;v<=k.r;++v)w[v]||(w[v]=[]);switch(v=k.r,y=k.c,S[2]){case"t":w[v][y]=t(S[3]);break;case"v":w[v][y]=+S[3];break;case"vtf":var R=S[S.length-1];case"vtc":switch(S[3]){case"nl":w[v][y]=!!+S[4];break;default:w[v][y]=+S[4];break}S[2]=="vtf"&&(w[v][y]=[w[v][y],R])}}}return p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),w}function n(d,p){return Ef(r(d,p),p)}function i(d,p){return Du(n(d,p),p)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(d){if(!d||!d["!ref"])return"";for(var p=[],f=[],v,y="",b=Ta(d["!ref"]),w=Array.isArray(d),S=b.s.r;S<=b.e.r;++S)for(var k=b.s.c;k<=b.e.c;++k)if(y=xn({r:S,c:k}),v=w?(d[S]||[])[k]:d[y],!(!v||v.v==null||v.t==="z")){switch(f=["cell",y,"t"],v.t){case"s":case"str":f.push(e(v.v));break;case"n":v.f?(f[2]="vtf",f[3]="n",f[4]=v.v,f[5]=e(v.f)):(f[2]="v",f[3]=v.v);break;case"b":f[2]="vt"+(v.f?"f":"c"),f[3]="nl",f[4]=v.v?"1":"0",f[5]=e(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var R=Js(Os(v.v));f[2]="vtc",f[3]="nd",f[4]=""+R,f[5]=v.w||Dc(v.z||oi[14],R);break;case"e":continue}p.push(f.join(":"))}return p.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function h(d){return[s,a,o,a,u(d),l].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:h}}(),gH=function(){function t(h,d,p,f,v){v.raw?d[p][f]=h:h===""||(h==="TRUE"?d[p][f]=!0:h==="FALSE"?d[p][f]=!1:isNaN(gl(h))?isNaN(S0(h).getDate())?d[p][f]=h:d[p][f]=Os(h):d[p][f]=gl(h))}function e(h,d){var p=d||{},f=[];if(!h||h.length===0)return f;for(var v=h.split(/[\r\n]/),y=v.length-1;y>=0&&v[y].length===0;)--y;for(var b=10,w=0,S=0;S<=y;++S)w=v[S].indexOf(" "),w==-1?w=v[S].length:w++,b=Math.max(b,w);for(S=0;S<=y;++S){f[S]=[];var k=0;for(t(v[S].slice(0,b).trim(),f,S,k,p),k=1;k<=(v[S].length-b)/10+1;++k)t(v[S].slice(b+(k-1)*10,b+k*10).trim(),f,S,k,p)}return p.sheetRows&&(f=f.slice(0,p.sheetRows)),f}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(h){for(var d={},p=!1,f=0,v=0;f<h.length;++f)(v=h.charCodeAt(f))==34?p=!p:!p&&v in r&&(d[v]=(d[v]||0)+1);v=[];for(f in d)Object.prototype.hasOwnProperty.call(d,f)&&v.push([d[f],f]);if(!v.length){d=n;for(f in d)Object.prototype.hasOwnProperty.call(d,f)&&v.push([d[f],f])}return v.sort(function(y,b){return y[0]-b[0]||n[y[1]]-n[b[1]]}),r[v.pop()[1]]||44}function s(h,d){var p=d||{},f="",v=p.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};h.slice(0,4)=="sep="?h.charCodeAt(5)==13&&h.charCodeAt(6)==10?(f=h.charAt(4),h=h.slice(7)):h.charCodeAt(5)==13||h.charCodeAt(5)==10?(f=h.charAt(4),h=h.slice(6)):f=i(h.slice(0,1024)):p&&p.FS?f=p.FS:f=i(h.slice(0,1024));var b=0,w=0,S=0,k=0,R=0,q=f.charCodeAt(0),K=!1,E=0,C=h.charCodeAt(0);h=h.replace(/\r\n/mg,`
`);var A=p.dateNF!=null?PV(p.dateNF):null;function D(){var N=h.slice(k,R),j={};if(N.charAt(0)=='"'&&N.charAt(N.length-1)=='"'&&(N=N.slice(1,-1).replace(/""/g,'"')),N.length===0)j.t="z";else if(p.raw)j.t="s",j.v=N;else if(N.trim().length===0)j.t="s",j.v=N;else if(N.charCodeAt(0)==61)N.charCodeAt(1)==34&&N.charCodeAt(N.length-1)==34?(j.t="s",j.v=N.slice(2,-1).replace(/""/g,'"')):pq(N)?(j.t="n",j.f=N.slice(1)):(j.t="s",j.v=N);else if(N=="TRUE")j.t="b",j.v=!0;else if(N=="FALSE")j.t="b",j.v=!1;else if(!isNaN(S=gl(N)))j.t="n",p.cellText!==!1&&(j.w=N),j.v=S;else if(!isNaN(S0(N).getDate())||A&&N.match(A)){j.z=p.dateNF||oi[14];var P=0;A&&N.match(A)&&(N=jV(N,p.dateNF,N.match(A)||[]),P=1),p.cellDates?(j.t="d",j.v=Os(N,P)):(j.t="n",j.v=Js(Os(N,P))),p.cellText!==!1&&(j.w=Dc(j.z,j.v instanceof Date?Js(j.v):j.v)),p.cellNF||delete j.z}else j.t="s",j.v=N;if(j.t=="z"||(p.dense?(v[b]||(v[b]=[]),v[b][w]=j):v[xn({c:w,r:b})]=j),k=R+1,C=h.charCodeAt(k),y.e.c<w&&(y.e.c=w),y.e.r<b&&(y.e.r=b),E==q)++w;else if(w=0,++b,p.sheetRows&&p.sheetRows<=b)return!0}e:for(;R<h.length;++R)switch(E=h.charCodeAt(R)){case 34:C===34&&(K=!K);break;case q:case 10:case 13:if(!K&&D())break e;break}return R-k>0&&D(),v["!ref"]=ki(y),v}function a(h,d){return!(d&&d.PRN)||d.FS||h.slice(0,4)=="sep="||h.indexOf("	")>=0||h.indexOf(",")>=0||h.indexOf(";")>=0?s(h,d):Ef(e(h,d),d)}function o(h,d){var p="",f=d.type=="string"?[0,0,0,0]:kG(h,d);switch(d.type){case"base64":p=Nl(h);break;case"binary":p=h;break;case"buffer":d.codepage==65001?p=h.toString("utf8"):d.codepage&&typeof B1<"u"||(p=Jr&&Buffer.isBuffer(h)?h.toString("binary"):Y0(h));break;case"array":p=Kg(h);break;case"string":p=h;break;default:throw new Error("Unrecognized type "+d.type)}return f[0]==239&&f[1]==187&&f[2]==191?p=Md(p.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?p=Md(p):d.type=="binary"&&typeof B1<"u",p.slice(0,19)=="socialcalc:version:"?YC.to_sheet(d.type=="string"?p:Md(p),d):a(p,d)}function l(h,d){return Du(o(h,d),d)}function u(h){for(var d=[],p=Bn(h["!ref"]),f,v=Array.isArray(h),y=p.s.r;y<=p.e.r;++y){for(var b=[],w=p.s.c;w<=p.e.c;++w){var S=xn({r:y,c:w});if(f=v?(h[y]||[])[w]:h[S],!f||f.v==null){b.push("          ");continue}for(var k=(f.w||(Tl(f),f.w)||"").slice(0,10);k.length<10;)k+=" ";b.push(k+(w===0?" ":""))}d.push(b.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}(),aA=function(){function t(L,O,B){if(L){ma(L,L.l||0);for(var z=B.Enum||Ue;L.l<L.length;){var J=L.read_shift(2),fe=z[J]||z[65535],Se=L.read_shift(2),Ae=L.l+Se,Ne=fe.f&&fe.f(L,Se,B);if(L.l=Ae,O(Ne,fe,J))return}}}function e(L,O){switch(O.type){case"base64":return r(po(Nl(L)),O);case"binary":return r(po(L),O);case"buffer":case"array":return r(L,O)}throw"Unsupported type "+O.type}function r(L,O){if(!L)return L;var B=O||{},z=B.dense?[]:{},J="Sheet1",fe="",Se=0,Ae={},Ne=[],Xe=[],et={s:{r:0,c:0},e:{r:0,c:0}},ot=B.sheetRows||0;if(L[2]==0&&(L[3]==8||L[3]==9)&&L.length>=16&&L[14]==5&&L[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(L[2]==2)B.Enum=Ue,t(L,function(X,me,de){switch(de){case 0:B.vers=X,X>=4096&&(B.qpro=!0);break;case 6:et=X;break;case 204:X&&(fe=X);break;case 222:fe=X;break;case 15:case 51:B.qpro||(X[1].v=X[1].v.slice(1));case 13:case 14:case 16:de==14&&(X[2]&112)==112&&(X[2]&15)>1&&(X[2]&15)<15&&(X[1].z=B.dateNF||oi[14],B.cellDates&&(X[1].t="d",X[1].v=fC(X[1].v))),B.qpro&&X[3]>Se&&(z["!ref"]=ki(et),Ae[J]=z,Ne.push(J),z=B.dense?[]:{},et={s:{r:0,c:0},e:{r:0,c:0}},Se=X[3],J=fe||"Sheet"+(Se+1),fe="");var qe=B.dense?(z[X[0].r]||[])[X[0].c]:z[xn(X[0])];if(qe){qe.t=X[1].t,qe.v=X[1].v,X[1].z!=null&&(qe.z=X[1].z),X[1].f!=null&&(qe.f=X[1].f);break}B.dense?(z[X[0].r]||(z[X[0].r]=[]),z[X[0].r][X[0].c]=X[1]):z[xn(X[0])]=X[1];break}},B);else if(L[2]==26||L[2]==14)B.Enum=Ie,L[2]==14&&(B.qpro=!0,L.l=0),t(L,function(X,me,de){switch(de){case 204:J=X;break;case 22:X[1].v=X[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(X[3]>Se&&(z["!ref"]=ki(et),Ae[J]=z,Ne.push(J),z=B.dense?[]:{},et={s:{r:0,c:0},e:{r:0,c:0}},Se=X[3],J="Sheet"+(Se+1)),ot>0&&X[0].r>=ot)break;B.dense?(z[X[0].r]||(z[X[0].r]=[]),z[X[0].r][X[0].c]=X[1]):z[xn(X[0])]=X[1],et.e.c<X[0].c&&(et.e.c=X[0].c),et.e.r<X[0].r&&(et.e.r=X[0].r);break;case 27:X[14e3]&&(Xe[X[14e3][0]]=X[14e3][1]);break;case 1537:Xe[X[0]]=X[1],X[0]==Se&&(J=X[1]);break}},B);else throw new Error("Unrecognized LOTUS BOF "+L[2]);if(z["!ref"]=ki(et),Ae[fe||J]=z,Ne.push(fe||J),!Xe.length)return{SheetNames:Ne,Sheets:Ae};for(var mt={},te=[],ke=0;ke<Xe.length;++ke)Ae[Ne[ke]]?(te.push(Xe[ke]||Ne[ke]),mt[Xe[ke]]=Ae[Xe[ke]]||Ae[Ne[ke]]):(te.push(Xe[ke]),mt[Xe[ke]]={"!ref":"A1"});return{SheetNames:te,Sheets:mt}}function n(L,O){var B=O||{};if(+B.codepage>=0&&_0(+B.codepage),B.type=="string")throw new Error("Cannot write WK1 to JS string");var z=Zs(),J=Bn(L["!ref"]),fe=Array.isArray(L),Se=[];Ct(z,0,s(1030)),Ct(z,6,l(J));for(var Ae=Math.min(J.e.r,8191),Ne=J.s.r;Ne<=Ae;++Ne)for(var Xe=ss(Ne),et=J.s.c;et<=J.e.c;++et){Ne===J.s.r&&(Se[et]=Es(et));var ot=Se[et]+Xe,mt=fe?(L[Ne]||[])[et]:L[ot];if(!(!mt||mt.t=="z"))if(mt.t=="n")(mt.v|0)==mt.v&&mt.v>=-32768&&mt.v<=32767?Ct(z,13,f(Ne,et,mt.v)):Ct(z,14,y(Ne,et,mt.v));else{var te=Tl(mt);Ct(z,15,d(Ne,et,te.slice(0,239)))}}return Ct(z,1),z.end()}function i(L,O){var B=O||{};if(+B.codepage>=0&&_0(+B.codepage),B.type=="string")throw new Error("Cannot write WK3 to JS string");var z=Zs();Ct(z,0,a(L));for(var J=0,fe=0;J<L.SheetNames.length;++J)(L.Sheets[L.SheetNames[J]]||{})["!ref"]&&Ct(z,27,_e(L.SheetNames[J],fe++));var Se=0;for(J=0;J<L.SheetNames.length;++J){var Ae=L.Sheets[L.SheetNames[J]];if(!(!Ae||!Ae["!ref"])){for(var Ne=Bn(Ae["!ref"]),Xe=Array.isArray(Ae),et=[],ot=Math.min(Ne.e.r,8191),mt=Ne.s.r;mt<=ot;++mt)for(var te=ss(mt),ke=Ne.s.c;ke<=Ne.e.c;++ke){mt===Ne.s.r&&(et[ke]=Es(ke));var X=et[ke]+te,me=Xe?(Ae[mt]||[])[ke]:Ae[X];if(!(!me||me.t=="z"))if(me.t=="n")Ct(z,23,D(mt,ke,Se,me.v));else{var de=Tl(me);Ct(z,22,E(mt,ke,Se,de.slice(0,239)))}}++Se}}return Ct(z,1),z.end()}function s(L){var O=Ze(2);return O.write_shift(2,L),O}function a(L){var O=Ze(26);O.write_shift(2,4096),O.write_shift(2,4),O.write_shift(4,0);for(var B=0,z=0,J=0,fe=0;fe<L.SheetNames.length;++fe){var Se=L.SheetNames[fe],Ae=L.Sheets[Se];if(!(!Ae||!Ae["!ref"])){++J;var Ne=Ta(Ae["!ref"]);B<Ne.e.r&&(B=Ne.e.r),z<Ne.e.c&&(z=Ne.e.c)}}return B>8191&&(B=8191),O.write_shift(2,B),O.write_shift(1,J),O.write_shift(1,z),O.write_shift(2,0),O.write_shift(2,0),O.write_shift(1,1),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(4,0),O}function o(L,O,B){var z={s:{c:0,r:0},e:{c:0,r:0}};return O==8&&B.qpro?(z.s.c=L.read_shift(1),L.l++,z.s.r=L.read_shift(2),z.e.c=L.read_shift(1),L.l++,z.e.r=L.read_shift(2),z):(z.s.c=L.read_shift(2),z.s.r=L.read_shift(2),O==12&&B.qpro&&(L.l+=2),z.e.c=L.read_shift(2),z.e.r=L.read_shift(2),O==12&&B.qpro&&(L.l+=2),z.s.c==65535&&(z.s.c=z.e.c=z.s.r=z.e.r=0),z)}function l(L){var O=Ze(8);return O.write_shift(2,L.s.c),O.write_shift(2,L.s.r),O.write_shift(2,L.e.c),O.write_shift(2,L.e.r),O}function u(L,O,B){var z=[{c:0,r:0},{t:"n",v:0},0,0];return B.qpro&&B.vers!=20768?(z[0].c=L.read_shift(1),z[3]=L.read_shift(1),z[0].r=L.read_shift(2),L.l+=2):(z[2]=L.read_shift(1),z[0].c=L.read_shift(2),z[0].r=L.read_shift(2)),z}function h(L,O,B){var z=L.l+O,J=u(L,O,B);if(J[1].t="s",B.vers==20768){L.l++;var fe=L.read_shift(1);return J[1].v=L.read_shift(fe,"utf8"),J}return B.qpro&&L.l++,J[1].v=L.read_shift(z-L.l,"cstr"),J}function d(L,O,B){var z=Ze(7+B.length);z.write_shift(1,255),z.write_shift(2,O),z.write_shift(2,L),z.write_shift(1,39);for(var J=0;J<z.length;++J){var fe=B.charCodeAt(J);z.write_shift(1,fe>=128?95:fe)}return z.write_shift(1,0),z}function p(L,O,B){var z=u(L,O,B);return z[1].v=L.read_shift(2,"i"),z}function f(L,O,B){var z=Ze(7);return z.write_shift(1,255),z.write_shift(2,O),z.write_shift(2,L),z.write_shift(2,B,"i"),z}function v(L,O,B){var z=u(L,O,B);return z[1].v=L.read_shift(8,"f"),z}function y(L,O,B){var z=Ze(13);return z.write_shift(1,255),z.write_shift(2,O),z.write_shift(2,L),z.write_shift(8,B,"f"),z}function b(L,O,B){var z=L.l+O,J=u(L,O,B);if(J[1].v=L.read_shift(8,"f"),B.qpro)L.l=z;else{var fe=L.read_shift(2);R(L.slice(L.l,L.l+fe),J),L.l+=fe}return J}function w(L,O,B){var z=O&32768;return O&=-32769,O=(z?L:0)+(O>=8192?O-16384:O),(z?"":"$")+(B?Es(O):ss(O))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},k=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function R(L,O){ma(L,0);for(var B=[],z=0,J="",fe="",Se="",Ae="";L.l<L.length;){var Ne=L[L.l++];switch(Ne){case 0:B.push(L.read_shift(8,"f"));break;case 1:fe=w(O[0].c,L.read_shift(2),!0),J=w(O[0].r,L.read_shift(2),!1),B.push(fe+J);break;case 2:{var Xe=w(O[0].c,L.read_shift(2),!0),et=w(O[0].r,L.read_shift(2),!1);fe=w(O[0].c,L.read_shift(2),!0),J=w(O[0].r,L.read_shift(2),!1),B.push(Xe+et+":"+fe+J)}break;case 3:if(L.l<L.length){console.error("WK1 premature formula end");return}break;case 4:B.push("("+B.pop()+")");break;case 5:B.push(L.read_shift(2));break;case 6:{for(var ot="";Ne=L[L.l++];)ot+=String.fromCharCode(Ne);B.push('"'+ot.replace(/"/g,'""')+'"')}break;case 8:B.push("-"+B.pop());break;case 23:B.push("+"+B.pop());break;case 22:B.push("NOT("+B.pop()+")");break;case 20:case 21:Ae=B.pop(),Se=B.pop(),B.push(["AND","OR"][Ne-20]+"("+Se+","+Ae+")");break;default:if(Ne<32&&k[Ne])Ae=B.pop(),Se=B.pop(),B.push(Se+k[Ne]+Ae);else if(S[Ne]){if(z=S[Ne][1],z==69&&(z=L[L.l++]),z>B.length){console.error("WK1 bad formula parse 0x"+Ne.toString(16)+":|"+B.join("|")+"|");return}var mt=B.slice(-z);B.length-=z,B.push(S[Ne][0]+"("+mt.join(",")+")")}else return Ne<=7?console.error("WK1 invalid opcode "+Ne.toString(16)):Ne<=24?console.error("WK1 unsupported op "+Ne.toString(16)):Ne<=30?console.error("WK1 invalid opcode "+Ne.toString(16)):Ne<=115?console.error("WK1 unsupported function opcode "+Ne.toString(16)):console.error("WK1 unrecognized opcode "+Ne.toString(16))}}B.length==1?O[1].f=""+B[0]:console.error("WK1 bad formula parse |"+B.join("|")+"|")}function q(L){var O=[{c:0,r:0},{t:"n",v:0},0];return O[0].r=L.read_shift(2),O[3]=L[L.l++],O[0].c=L[L.l++],O}function K(L,O){var B=q(L);return B[1].t="s",B[1].v=L.read_shift(O-4,"cstr"),B}function E(L,O,B,z){var J=Ze(6+z.length);J.write_shift(2,L),J.write_shift(1,B),J.write_shift(1,O),J.write_shift(1,39);for(var fe=0;fe<z.length;++fe){var Se=z.charCodeAt(fe);J.write_shift(1,Se>=128?95:Se)}return J.write_shift(1,0),J}function C(L,O){var B=q(L);B[1].v=L.read_shift(2);var z=B[1].v>>1;if(B[1].v&1)switch(z&7){case 0:z=(z>>3)*5e3;break;case 1:z=(z>>3)*500;break;case 2:z=(z>>3)/20;break;case 3:z=(z>>3)/200;break;case 4:z=(z>>3)/2e3;break;case 5:z=(z>>3)/2e4;break;case 6:z=(z>>3)/16;break;case 7:z=(z>>3)/64;break}return B[1].v=z,B}function A(L,O){var B=q(L),z=L.read_shift(4),J=L.read_shift(4),fe=L.read_shift(2);if(fe==65535)return z===0&&J===3221225472?(B[1].t="e",B[1].v=15):z===0&&J===3489660928?(B[1].t="e",B[1].v=42):B[1].v=0,B;var Se=fe&32768;return fe=(fe&32767)-16446,B[1].v=(1-Se*2)*(J*Math.pow(2,fe+32)+z*Math.pow(2,fe)),B}function D(L,O,B,z){var J=Ze(14);if(J.write_shift(2,L),J.write_shift(1,B),J.write_shift(1,O),z==0)return J.write_shift(4,0),J.write_shift(4,0),J.write_shift(2,65535),J;var fe=0,Se=0,Ae=0,Ne=0;return z<0&&(fe=1,z=-z),Se=Math.log2(z)|0,z/=Math.pow(2,Se-31),Ne=z>>>0,Ne&2147483648||(z/=2,++Se,Ne=z>>>0),z-=Ne,Ne|=2147483648,Ne>>>=0,z*=Math.pow(2,32),Ae=z>>>0,J.write_shift(4,Ae),J.write_shift(4,Ne),Se+=16383+(fe?32768:0),J.write_shift(2,Se),J}function N(L,O){var B=A(L);return L.l+=O-14,B}function j(L,O){var B=q(L),z=L.read_shift(4);return B[1].v=z>>6,B}function P(L,O){var B=q(L),z=L.read_shift(8,"f");return B[1].v=z,B}function se(L,O){var B=P(L);return L.l+=O-10,B}function ge(L,O){return L[L.l+O-1]==0?L.read_shift(O,"cstr"):""}function ve(L,O){var B=L[L.l++];B>O-1&&(B=O-1);for(var z="";z.length<B;)z+=String.fromCharCode(L[L.l++]);return z}function ye(L,O,B){if(!(!B.qpro||O<21)){var z=L.read_shift(1);L.l+=17,L.l+=1,L.l+=2;var J=L.read_shift(O-21,"cstr");return[z,J]}}function he(L,O){for(var B={},z=L.l+O;L.l<z;){var J=L.read_shift(2);if(J==14e3){for(B[J]=[0,""],B[J][0]=L.read_shift(2);L[L.l];)B[J][1]+=String.fromCharCode(L[L.l]),L.l++;L.l++}}return B}function _e(L,O){var B=Ze(5+L.length);B.write_shift(2,14e3),B.write_shift(2,O);for(var z=0;z<L.length;++z){var J=L.charCodeAt(z);B[B.l++]=J>127?95:J}return B[B.l++]=0,B}var Ue={0:{n:"BOF",f:qC},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ge},222:{n:"SHEETNAMELP",f:ve},65535:{n:""}},Ie={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:K},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:N},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:he},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:j},38:{n:"??"},39:{n:"NUMBER27",f:P},40:{n:"FORMULA28",f:se},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ge},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ye},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}}(),xH=/^\s|\s$|[\t\n\r]/;function XC(t,e){if(!e.bookSST)return"";var r=[Ci];r[r.length]=Nt("sst",null,{xmlns:Af[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var i=t[n],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(xH)&&(s+=' xml:space="preserve"'),s+=">"+mn(i.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function yH(t){return[t.read_shift(4),t.read_shift(4)]}function vH(t,e){return e||(e=Ze(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var wH=uz;function _H(t){var e=Zs();ft(e,159,vH(t));for(var r=0;r<t.length;++r)ft(e,19,wH(t[r]));return ft(e,160),e.end()}function bH(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function QC(t){var e=0,r,n=bH(t),i=n.length+1,s,a,o,l,u;for(r=Tu(i),r[0]=n.length,s=1;s!=i;++s)r[s]=n[s-1];for(s=i-1;s>=0;--s)a=r[s],o=e&16384?1:0,l=e<<1&32767,u=o|l,e=u^a;return e^52811}var SH=function(){function t(i,s){switch(s.type){case"base64":return e(Nl(i),s);case"binary":return e(i,s);case"buffer":return e(Jr&&Buffer.isBuffer(i)?i.toString("binary"):Y0(i),s);case"array":return e(Kg(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(h,d){Array.isArray(o)&&(o[d]=[]);for(var p=/\\\w+\b/g,f=0,v,y=-1;v=p.exec(h);){switch(v[0]){case"\\cell":var b=h.slice(f,p.lastIndex-v[0].length);if(b[0]==" "&&(b=b.slice(1)),++y,b.length){var w={v:b,t:"s"};Array.isArray(o)?o[d][y]=w:o[xn({r:d,c:y})]=w}break}f=p.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=ki(u),o}function r(i,s){return Du(t(i,s),s)}function n(i){for(var s=["{\\rtf1\\ansi"],a=Bn(i["!ref"]),o,l=Array.isArray(i),u=a.s.r;u<=a.e.r;++u){s.push("\\trowd\\trautofit1");for(var h=a.s.c;h<=a.e.c;++h)s.push("\\cellx"+(h+1));for(s.push("\\pard\\intbl"),h=a.s.c;h<=a.e.c;++h){var d=xn({r:u,c:h});o=l?(i[u]||[])[h]:i[d],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(Tl(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function oA(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}var AH=6,xl=AH;function G1(t){return Math.floor((t+Math.round(128/xl)/256)*xl)}function Y1(t){return Math.floor((t-5)/xl*100+.5)/100}function wv(t){return Math.round((t*xl+5)/xl*256)/256}function Cw(t){t.width?(t.wpx=G1(t.width),t.wch=Y1(t.wpx),t.MDW=xl):t.wpx?(t.wch=Y1(t.wpx),t.width=wv(t.wch),t.MDW=xl):typeof t.wch=="number"&&(t.width=wv(t.wch),t.wpx=G1(t.width),t.MDW=xl),t.customWidth&&delete t.customWidth}var EH=96,ZC=EH;function X1(t){return t*96/ZC}function JC(t){return t*ZC/96}function NH(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Nt("numFmt",null,{numFmtId:n,formatCode:mn(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Nt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function TH(t){var e=[];return e[e.length]=Nt("cellXfs",null),t.forEach(function(r){e[e.length]=Nt("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Nt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function e8(t,e){var r=[Ci,Nt("styleSheet",null,{xmlns:Af[0],"xmlns:vt":Hi.vt})],n;return t.SSF&&(n=NH(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=TH(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function kH(t,e){var r=t.read_shift(2),n=Ns(t);return[r,n]}function CH(t,e,r){r||(r=Ze(6+4*e.length)),r.write_shift(2,t),$i(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function IH(t,e,r){var n={};n.sz=t.read_shift(2)/20;var i=xz(t);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=gz(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Ns(t),n}function LH(t,e){e||(e=Ze(25+4*32)),e.write_shift(2,t.sz*20),yz(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),W1(t.color,e);var n=0;return n=2,e.write_shift(1,n),$i(t.name,e),e.length>e.l?e.slice(0,e.l):e}var PH=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Ix,jH=Ko;function lA(t,e){e||(e=Ze(4*3+8*7+16*1)),Ix||(Ix=xw(PH));var r=Ix[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(W1({auto:1},e),W1({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function RH(t,e){var r=t.l+e,n=t.read_shift(2),i=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:i}}function t8(t,e,r){r||(r=Ze(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function nd(t,e){return e||(e=Ze(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var FH=Ko;function DH(t,e){return e||(e=Ze(51)),e.write_shift(1,0),nd(null,e),nd(null,e),nd(null,e),nd(null,e),nd(null,e),e.length>e.l?e.slice(0,e.l):e}function MH(t,e){return e||(e=Ze(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),$1(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function OH(t,e,r){var n=Ze(2052);return n.write_shift(4,t),$1(e,n),$1(r,n),n.length>n.l?n.slice(0,n.l):n}function BH(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&++r}),r!=0&&(ft(t,615,yo(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&ft(t,44,CH(i,e[i]))}),ft(t,616))}}function UH(t){var e=1;ft(t,611,yo(e)),ft(t,43,LH({sz:12,color:{theme:1},name:"Calibri",family:2})),ft(t,612)}function VH(t){var e=2;ft(t,603,yo(e)),ft(t,45,lA({patternType:"none"})),ft(t,45,lA({patternType:"gray125"})),ft(t,604)}function zH(t){var e=1;ft(t,613,yo(e)),ft(t,46,DH()),ft(t,614)}function HH(t){var e=1;ft(t,626,yo(e)),ft(t,47,t8({numFmtId:0},65535)),ft(t,627)}function qH(t,e){ft(t,617,yo(e.length)),e.forEach(function(r){ft(t,47,t8(r,0))}),ft(t,618)}function $H(t){var e=1;ft(t,619,yo(e)),ft(t,48,MH({xfId:0,name:"Normal"})),ft(t,620)}function WH(t){var e=0;ft(t,505,yo(e)),ft(t,506)}function KH(t){var e=0;ft(t,508,OH(e,"TableStyleMedium9","PivotStyleMedium4")),ft(t,509)}function GH(t,e){var r=Zs();return ft(r,278),BH(r,t.SSF),UH(r),VH(r),zH(r),HH(r),qH(r,e.cellXfs),$H(r),WH(r),KH(r),ft(r,279),r.end()}function r8(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Ci];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function YH(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Ns(t)}}function XH(t){var e=Ze(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),$i(t.name,e),e.slice(0,e.l)}function QH(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function ZH(t){var e=Ze(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function JH(t,e){var r=Ze(8+2*e.length);return r.write_shift(4,t),$i(e,r),r.slice(0,r.l)}function eq(t){return t.l+=4,t.read_shift(4)!=0}function tq(t,e){var r=Ze(8);return r.write_shift(4,t),r.write_shift(4,1),r}function rq(){var t=Zs();return ft(t,332),ft(t,334,yo(1)),ft(t,335,XH({name:"XLDAPR",version:12e4,flags:3496657072})),ft(t,336),ft(t,339,JH(1,"XLDAPR")),ft(t,52),ft(t,35,yo(514)),ft(t,4096,yo(0)),ft(t,4097,za(1)),ft(t,36),ft(t,53),ft(t,340),ft(t,337,tq(1)),ft(t,51,ZH([[1,0]])),ft(t,338),ft(t,333),t.end()}function n8(){var t=[Ci];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function nq(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=xn(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var Th=1024;function i8(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[Nt("xml",null,{"xmlns:v":ga.v,"xmlns:o":ga.o,"xmlns:x":ga.x,"xmlns:mv":ga.mv}).replace(/\/>/,">"),Nt("o:shapelayout",Nt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Nt("v:shapetype",[Nt("v:stroke",null,{joinstyle:"miter"}),Nt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Th<t*1e3;)Th+=1e3;return e.forEach(function(s){var a=qi(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Nt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Nt("v:fill",l,o),h={on:"t",obscured:"t"};++Th,i=i.concat(["<v:shape"+E0({id:"_x0000_s"+Th,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Nt("v:shadow",null,h),Nt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ns("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),ns("x:AutoFill","False"),ns("x:Row",String(a.r)),ns("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function s8(t){var e=[Ci,Nt("comments",null,{xmlns:Af[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(i){var s=mn(i.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var i=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(i=r.indexOf(mn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(ns("t",mn(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(ns("t",mn(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function iq(t,e,r){var n=[Ci,Nt("ThreadedComments",null,{xmlns:Hi.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(Nt("threadedComment",ns("text",a.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function sq(t){var e=[Ci,Nt("personList",null,{xmlns:Hi.TCMNT,"xmlns:x":Af[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Nt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function aq(t){var e={};e.iauthor=t.read_shift(4);var r=Uu(t);return e.rfx=r.s,e.ref=xn(r.s),t.l+=16,e}function oq(t,e){return e==null&&(e=Ze(36)),e.write_shift(4,t[1].iauthor),Nf(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var lq=Ns;function cq(t){return $i(t.slice(0,54))}function uq(t){var e=Zs(),r=[];return ft(e,628),ft(e,630),t.forEach(function(n){n[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),ft(e,632,cq(i.a)))})}),ft(e,631),ft(e,633),t.forEach(function(n){n[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var s={s:qi(n[0]),e:qi(n[0])};ft(e,635,oq([s,i])),i.t&&i.t.length>0&&ft(e,637,fz(i)),ft(e,636),delete i.iauthor})}),ft(e,634),ft(e,629),e.end()}function hq(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&vn.utils.cfb_add(t,i,e.FileIndex[n].content)}})}var a8=["xlsb","xlsm","xlam","biff8","xla"],fq=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,h=a.length>0?parseInt(a,10)|0:0;return o?h+=e.c:--h,l?u+=e.r:--u,i+(o?"":"$")+Es(h)+(l?"":"$")+ss(u)}return function(i,s){return e=s,i.replace(t,r)}}(),Iw=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Lw=function(){return function(e,r){return e.replace(Iw,function(n,i,s,a,o,l){var u=Aw(a)-(s?0:r.c),h=Sw(l)-(o?0:r.r),d=h==0?"":o?h+1:"["+h+"]",p=u==0?"":s?u+1:"["+u+"]";return i+"R"+d+"C"+p})}}();function dq(t,e){return t.replace(Iw,function(r,n,i,s,a,o){return n+(i=="$"?i+s:Es(Aw(s)+e.c))+(a=="$"?a+o:ss(Sw(o)+e.r))})}function pq(t){return t.length!=1}function bi(t){t.l+=1}function Mc(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function o8(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return l8(t);r.biff==12&&(n=4)}var i=t.read_shift(n),s=t.read_shift(n),a=Mc(t),o=Mc(t);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function l8(t){var e=Mc(t),r=Mc(t),n=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function mq(t,e,r){if(r.biff<8)return l8(t);var n=t.read_shift(r.biff==12?4:2),i=t.read_shift(r.biff==12?4:2),s=Mc(t),a=Mc(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function c8(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return gq(t);var n=t.read_shift(r&&r.biff==12?4:2),i=Mc(t);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function gq(t){var e=Mc(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function xq(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function yq(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return vq(t);var i=t.read_shift(n>=12?4:2),s=t.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function vq(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:i,rRel:n}}function wq(t,e,r){var n=(t[t.l++]&96)>>5,i=o8(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function _q(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var a=o8(t,s,r);return[n,i,a]}function bq(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Sq(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,i]}function Aq(t,e,r){var n=(t[t.l++]&96)>>5,i=mq(t,e-1,r);return[n,i]}function Eq(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function cA(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function Nq(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),i=[],s=0;s<=n;++s)i.push(t.read_shift(r&&r.biff==2?1:2));return i}function Tq(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function kq(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Cq(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function Iq(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function u8(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function Lq(t){return t.read_shift(2),u8(t)}function Pq(t){return t.read_shift(2),u8(t)}function jq(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=c8(t,0,r);return[n,i]}function Rq(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=yq(t,0,r);return[n,i]}function Fq(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=c8(t,0,r);return[n,i,s]}function Dq(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(r&&r.biff<=3?1:2);return[D$[i],d8[i],n]}function Mq(t,e,r){var n=t[t.l++],i=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:Oq(t);return[i,(s[0]===0?d8:F$)[s[1]]]}function Oq(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Bq(t,e,r){t.l+=r&&r.biff==2?3:4}function Uq(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function Vq(t){return t.l++,Z0[t.read_shift(1)]}function zq(t){return t.l++,t.read_shift(2)}function Hq(t){return t.l++,t.read_shift(1)!==0}function qq(t){return t.l++,Tf(t)}function $q(t,e,r){return t.l++,WC(t,e-1,r)}function Wq(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Fz(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Z0[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Tf(t);break;case 2:r[1]=Bz(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Kq(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),i=[],s=0;s!=n;++s)i.push((r.biff==12?Uu:zz)(t));return i}function Gq(t,e,r){var n=0,i=0;r.biff==12?(n=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var s=0,a=[];s!=n&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=Wq(t,r.biff);return a}function Yq(t,e,r){var n=t.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,s=t.read_shift(i);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function Xq(t,e,r){if(r.biff==5)return Qq(t);var n=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[n,i,s]}function Qq(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Zq(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function Jq(t,e,r){var n=t.read_shift(1)>>>5&3,i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function e$(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function t$(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,i]}var r$=Ko,n$=Ko,i$=Ko;function J0(t,e,r){return t.l+=2,[xq(t)]}function Pw(t){return t.l+=6,[]}var s$=J0,a$=Pw,o$=Pw,l$=J0;function h8(t){return t.l+=2,[qC(t),t.read_shift(2)&1]}var c$=J0,u$=h8,h$=Pw,f$=J0,d$=J0,p$=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function m$(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),a=p$[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:i,C:s}}function g$(t){return t.l+=2,[t.read_shift(4)]}function x$(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function y$(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function v$(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function w$(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function _$(t){return t.l+=4,[0,0]}var uA={1:{n:"PtgExp",f:Uq},2:{n:"PtgTbl",f:i$},3:{n:"PtgAdd",f:bi},4:{n:"PtgSub",f:bi},5:{n:"PtgMul",f:bi},6:{n:"PtgDiv",f:bi},7:{n:"PtgPower",f:bi},8:{n:"PtgConcat",f:bi},9:{n:"PtgLt",f:bi},10:{n:"PtgLe",f:bi},11:{n:"PtgEq",f:bi},12:{n:"PtgGe",f:bi},13:{n:"PtgGt",f:bi},14:{n:"PtgNe",f:bi},15:{n:"PtgIsect",f:bi},16:{n:"PtgUnion",f:bi},17:{n:"PtgRange",f:bi},18:{n:"PtgUplus",f:bi},19:{n:"PtgUminus",f:bi},20:{n:"PtgPercent",f:bi},21:{n:"PtgParen",f:bi},22:{n:"PtgMissArg",f:bi},23:{n:"PtgStr",f:$q},26:{n:"PtgSheet",f:x$},27:{n:"PtgEndSheet",f:y$},28:{n:"PtgErr",f:Vq},29:{n:"PtgBool",f:Hq},30:{n:"PtgInt",f:zq},31:{n:"PtgNum",f:qq},32:{n:"PtgArray",f:Eq},33:{n:"PtgFunc",f:Dq},34:{n:"PtgFuncVar",f:Mq},35:{n:"PtgName",f:Yq},36:{n:"PtgRef",f:jq},37:{n:"PtgArea",f:wq},38:{n:"PtgMemArea",f:Zq},39:{n:"PtgMemErr",f:r$},40:{n:"PtgMemNoMem",f:n$},41:{n:"PtgMemFunc",f:Jq},42:{n:"PtgRefErr",f:e$},43:{n:"PtgAreaErr",f:bq},44:{n:"PtgRefN",f:Rq},45:{n:"PtgAreaN",f:Aq},46:{n:"PtgMemAreaN",f:v$},47:{n:"PtgMemNoMemN",f:w$},57:{n:"PtgNameX",f:Xq},58:{n:"PtgRef3d",f:Fq},59:{n:"PtgArea3d",f:_q},60:{n:"PtgRefErr3d",f:t$},61:{n:"PtgAreaErr3d",f:Sq},255:{}},b$={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},S$={1:{n:"PtgElfLel",f:h8},2:{n:"PtgElfRw",f:f$},3:{n:"PtgElfCol",f:s$},6:{n:"PtgElfRwV",f:d$},7:{n:"PtgElfColV",f:l$},10:{n:"PtgElfRadical",f:c$},11:{n:"PtgElfRadicalS",f:h$},13:{n:"PtgElfColS",f:a$},15:{n:"PtgElfColSV",f:o$},16:{n:"PtgElfRadicalLel",f:u$},25:{n:"PtgList",f:m$},29:{n:"PtgSxName",f:g$},255:{}},A$={0:{n:"PtgAttrNoop",f:_$},1:{n:"PtgAttrSemi",f:Iq},2:{n:"PtgAttrIf",f:kq},4:{n:"PtgAttrChoose",f:Nq},8:{n:"PtgAttrGoto",f:Tq},16:{n:"PtgAttrSum",f:Bq},32:{n:"PtgAttrBaxcel",f:cA},33:{n:"PtgAttrBaxcel",f:cA},64:{n:"PtgAttrSpace",f:Lq},65:{n:"PtgAttrSpaceSemi",f:Pq},128:{n:"PtgAttrIfError",f:Cq},255:{}};function E$(t,e,r,n){if(n.biff<8)return Ko(t,e);for(var i=t.l+e,s=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=Gq(t,0,n),s.push(r[a][1]);break;case"PtgMemArea":r[a][2]=Kq(t,r[a][1],n),s.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),s.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=i-t.l,e!==0&&s.push(Ko(t,e)),s}function N$(t,e,r){for(var n=t.l+e,i,s,a=[];n!=t.l;)e=n-t.l,s=t[t.l],i=uA[s]||uA[b$[s]],(s===24||s===25)&&(i=(s===24?S$:A$)[t[t.l+1]]),!i||!i.f?Ko(t,e):a.push([i.n,i.f(t,e,r)]);return a}function T$(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],i=[],s=0;s<n.length;++s){var a=n[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var k$={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function C$(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function f8(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(t[n[0]][0]){case 357:return i=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(i=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function hA(t,e,r){var n=f8(t,e,r);return n=="#REF"?n:C$(n,r)}function cf(t,e,r,n,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,u,h,d=0,p=0,f,v="";if(!t[0]||!t[0][0])return"";for(var y=-1,b="",w=0,S=t[0].length;w<S;++w){var k=t[0][w];switch(k[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),y>=0){switch(t[0][y][1][0]){case 0:b=ai(" ",t[0][y][1][1]);break;case 1:b=ai("\r",t[0][y][1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}u=u+b,y=-1}o.push(u+k$[k[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":h=Bd(k[1][1],a,i),o.push(Ud(h,s));break;case"PtgRefN":h=r?Bd(k[1][1],r,i):k[1][1],o.push(Ud(h,s));break;case"PtgRef3d":d=k[1][1],h=Bd(k[1][2],a,i),v=hA(n,d,i),o.push(v+"!"+Ud(h,s));break;case"PtgFunc":case"PtgFuncVar":var R=k[1][0],q=k[1][1];R||(R=0),R&=127;var K=R==0?[]:o.slice(-R);o.length-=R,q==="User"&&(q=K.shift()),o.push(q+"("+K.join(",")+")");break;case"PtgBool":o.push(k[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(k[1]);break;case"PtgNum":o.push(String(k[1]));break;case"PtgStr":o.push('"'+k[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(k[1]);break;case"PtgAreaN":f=YS(k[1][1],r?{s:r}:a,i),o.push(kx(f,i));break;case"PtgArea":f=YS(k[1][1],a,i),o.push(kx(f,i));break;case"PtgArea3d":d=k[1][1],f=k[1][2],v=hA(n,d,i),o.push(v+"!"+kx(f,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=k[1][2];var E=(n.names||[])[p-1]||(n[0]||[])[p],C=E?E.Name:"SH33TJSNAME"+String(p);C&&C.slice(0,6)=="_xlfn."&&!i.xlfn&&(C=C.slice(6)),o.push(C);break;case"PtgNameX":var A=k[1][1];p=k[1][2];var D;if(i.biff<=5)A<0&&(A=-A),n[A]&&(D=n[A][p]);else{var N="";if(((n[A]||[])[0]||[])[0]==14849||(((n[A]||[])[0]||[])[0]==1025?n[A][p]&&n[A][p].itab>0&&(N=n.SheetNames[n[A][p].itab-1]+"!"):N=n.SheetNames[p-1]+"!"),n[A]&&n[A][p])N+=n[A][p].Name;else if(n[0]&&n[0][p])N+=n[0][p].Name;else{var j=(f8(n,A,i)||"").split(";;");j[p-1]?N=j[p-1]:N+="SH33TJSERRX"}o.push(N);break}D||(D={Name:"SH33TJSERRY"}),o.push(D.Name);break;case"PtgParen":var P="(",se=")";if(y>=0){switch(b="",t[0][y][1][0]){case 2:P=ai(" ",t[0][y][1][1])+P;break;case 3:P=ai("\r",t[0][y][1][1])+P;break;case 4:se=ai(" ",t[0][y][1][1])+se;break;case 5:se=ai("\r",t[0][y][1][1])+se;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}y=-1}o.push(P+o.pop()+se);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":h={c:k[1][1],r:k[1][0]};var ge={c:r.c,r:r.r};if(n.sharedf[xn(h)]){var ve=n.sharedf[xn(h)];o.push(cf(ve,a,ge,n,i))}else{var ye=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(h.c<u[0].s.c||h.c>u[0].e.c)&&!(h.r<u[0].s.r||h.r>u[0].e.r)){o.push(cf(u[1],a,ge,n,i)),ye=!0;break}ye||o.push(k[1])}break;case"PtgArray":o.push("{"+T$(k[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+k[1].idx+"[#"+k[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(k));default:throw new Error("Unrecognized Formula Token: "+String(k))}var he=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&y>=0&&he.indexOf(t[0][w][0])==-1){k=t[0][y];var _e=!0;switch(k[1][0]){case 4:_e=!1;case 0:b=ai(" ",k[1][1]);break;case 5:_e=!1;case 1:b=ai("\r",k[1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+k[1][0])}o.push((_e?b:"")+o.pop()+(_e?"":b)),y=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function I$(t){if(t==null){var e=Ze(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return ku(t);return ku(0)}function L$(t,e,r,n,i){var s=Cu(e,r,i),a=I$(t.v),o=Ze(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=Ze(t.bf.length),h=0;h<t.bf.length;++h)u[h]=t.bf[h];var d=rs([s,a,o,u]);return d}function Gg(t,e,r){var n=t.read_shift(4),i=N$(t,n,r),s=t.read_shift(4),a=s>0?E$(t,s,i,r):null;return[i,a]}var P$=Gg,Yg=Gg,j$=Gg,R$=Gg,F$={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},d8={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},D$={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function M$(t){var e="of:="+t.replace(Iw,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function O$(t){return t.replace(/\./,"!")}var Vd=typeof Map<"u";function jw(t,e,r){var n=0,i=t.length;if(r){if(Vd?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=Vd?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<i;++n)if(t[n].t===e)return t.Count++,n;return t[i]={t:e},t.Count++,t.Unique++,r&&(Vd?(r.has(e)||r.set(e,[]),r.get(e).push(i)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(i))),i}function Xg(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(xl=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=Y1(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=wv(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function p8(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function qc(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(n==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){cC(e.z,i),r.ssf[i]=e.z,r.revssf[e.z]=n=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===n)return i;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function B$(t,e,r){if(t&&t["!ref"]){var n=Bn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function U$(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+ki(t[r])+'"/>';return e+"</mergeCells>"}function V$(t,e,r,n,i){var s=!1,a={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}s=!0,a.codeName=A0(mn(l))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+Nt("outlinePr",null,u)}!s&&!o||(i[i.length]=Nt("sheetPr",o,a))}var z$=["objects","scenarios","selectLockedCells","selectUnlockedCells"],H$=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function q$(t){var e={sheet:1};return z$.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),H$.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=QC(t.password).toString(16).toUpperCase()),Nt("sheetProtection",null,e)}function $$(t){return p8(t),Nt("pageMargins",null,t)}function W$(t,e){for(var r=["<cols>"],n,i=0;i!=e.length;++i)(n=e[i])&&(r[r.length]=Nt("col",null,Xg(i,n)));return r[r.length]="</cols>",r.join("")}function K$(t,e,r,n){var i=typeof t.ref=="string"?t.ref:ki(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,a=Ta(i);a.s.r==a.e.r&&(a.e.r=Ta(e["!ref"]).e.r,i=ki(a));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Nt("autoFilter",null,{ref:i})}function G$(t,e,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Nt("sheetViews",Nt("sheetView",null,i),{})}function Y$(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",s=t.t,a=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=Z0[t.v];break;case"d":n&&n.cellDates?i=Os(t.v,-1).toISOString():(t=ea(t),t.t="n",i=""+(t.v=Js(Os(t.v)))),typeof t.z>"u"&&(t.z=oi[14]);break;default:i=t.v;break}var o=ns("v",mn(i)),l={r:e},u=qc(n.cellXfs,t,n);switch(u!==0&&(l.s=u),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=ns("v",""+jw(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=a),typeof t.f=="string"&&t.f){var h=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Nt("f",mn(t.f),h)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Nt("c",o,l)}function X$(t,e,r,n){var i=[],s=[],a=Bn(t["!ref"]),o="",l,u="",h=[],d=0,p=0,f=t["!rows"],v=Array.isArray(t),y={r:u},b,w=-1;for(p=a.s.c;p<=a.e.c;++p)h[p]=Es(p);for(d=a.s.r;d<=a.e.r;++d){for(s=[],u=ss(d),p=a.s.c;p<=a.e.c;++p){l=h[p]+u;var S=v?(t[d]||[])[p]:t[l];S!==void 0&&(o=Y$(S,l,t,e))!=null&&s.push(o)}(s.length>0||f&&f[d])&&(y={r:u},f&&f[d]&&(b=f[d],b.hidden&&(y.hidden=1),w=-1,b.hpx?w=X1(b.hpx):b.hpt&&(w=b.hpt),w>-1&&(y.ht=w,y.customHeight=1),b.level&&(y.outlineLevel=b.level)),i[i.length]=Nt("row",s.join(""),y))}if(f)for(;d<f.length;++d)f&&f[d]&&(y={r:d+1},b=f[d],b.hidden&&(y.hidden=1),w=-1,b.hpx?w=X1(b.hpx):b.hpt&&(w=b.hpt),w>-1&&(y.ht=w,y.customHeight=1),b.level&&(y.outlineLevel=b.level),i[i.length]=Nt("row","",y));return i.join("")}function m8(t,e,r,n){var i=[Ci,Nt("worksheet",null,{xmlns:Af[0],"xmlns:r":Hi.r})],s=r.SheetNames[t],a=0,o="",l=r.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",h=Bn(u);if(h.e.c>16383||h.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575),u=ki(h)}n||(n={}),l["!comments"]=[];var d=[];V$(l,r,t,e,i),i[i.length]=Nt("dimension",null,{ref:u}),i[i.length]=G$(l,e,t,r),e.sheetFormat&&(i[i.length]=Nt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=W$(l,l["!cols"])),i[a=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=X$(l,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),l["!protect"]&&(i[i.length]=q$(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=K$(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=U$(l["!merges"]));var p=-1,f,v=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(f={ref:y[0]},y[1].Target.charAt(0)!="#"&&(v=dn(n,-1,mn(y[1].Target).replace(/#.*$/,""),Zr.HLINK),f["r:id"]="rId"+v),(p=y[1].Target.indexOf("#"))>-1&&(f.location=mn(y[1].Target.slice(p+1))),y[1].Tooltip&&(f.tooltip=mn(y[1].Tooltip)),i[i.length]=Nt("hyperlink",null,f))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=$$(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=ns("ignoredErrors",Nt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),d.length>0&&(v=dn(n,-1,"../drawings/drawing"+(t+1)+".xml",Zr.DRAW),i[i.length]=Nt("drawing",null,{"r:id":"rId"+v}),l["!drawing"]=d),l["!comments"].length>0&&(v=dn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Zr.VML),i[i.length]=Nt("legacyDrawing",null,{"r:id":"rId"+v}),l["!legacy"]=v),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function Q$(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=i/20),r}function Z$(t,e,r){var n=Ze(145),i=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;i.hpx?s=X1(i.hpx)*20:i.hpt&&(s=i.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:t,c:0},h=0;h<16;++h)if(!(e.s.c>h+1<<10||e.e.c<h<<10)){for(var d=-1,p=-1,f=h<<10;f<h+1<<10;++f){u.c=f;var v=Array.isArray(r)?(r[u.r]||[])[u.c]:r[xn(u)];v&&(d<0&&(d=f),p=f)}d<0||(++o,n.write_shift(4,d),n.write_shift(4,p))}var y=n.l;return n.l=l,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function J$(t,e,r,n){var i=Z$(n,r,e);(i.length>17||(e["!rows"]||[])[n])&&ft(t,0,i)}var eW=Uu,tW=Nf;function rW(){}function nW(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=dz(t),r}function iW(t,e,r){r==null&&(r=Ze(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return W1({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),IC(t,r),r.slice(0,r.l)}function sW(t){var e=Qa(t);return[e]}function aW(t,e,r){return r==null&&(r=Ze(8)),Mu(e,r)}function oW(t){var e=Ou(t);return[e]}function lW(t,e,r){return r==null&&(r=Ze(4)),Bu(e,r)}function cW(t){var e=Qa(t),r=t.read_shift(1);return[e,r,"b"]}function uW(t,e,r){return r==null&&(r=Ze(9)),Mu(e,r),r.write_shift(1,t.v?1:0),r}function hW(t){var e=Ou(t),r=t.read_shift(1);return[e,r,"b"]}function fW(t,e,r){return r==null&&(r=Ze(5)),Bu(e,r),r.write_shift(1,t.v?1:0),r}function dW(t){var e=Qa(t),r=t.read_shift(1);return[e,r,"e"]}function pW(t,e,r){return r==null&&(r=Ze(9)),Mu(e,r),r.write_shift(1,t.v),r}function mW(t){var e=Ou(t),r=t.read_shift(1);return[e,r,"e"]}function gW(t,e,r){return r==null&&(r=Ze(8)),Bu(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function xW(t){var e=Qa(t),r=t.read_shift(4);return[e,r,"s"]}function yW(t,e,r){return r==null&&(r=Ze(12)),Mu(e,r),r.write_shift(4,e.v),r}function vW(t){var e=Ou(t),r=t.read_shift(4);return[e,r,"s"]}function wW(t,e,r){return r==null&&(r=Ze(8)),Bu(e,r),r.write_shift(4,e.v),r}function _W(t){var e=Qa(t),r=Tf(t);return[e,r,"n"]}function bW(t,e,r){return r==null&&(r=Ze(16)),Mu(e,r),ku(t.v,r),r}function SW(t){var e=Ou(t),r=Tf(t);return[e,r,"n"]}function AW(t,e,r){return r==null&&(r=Ze(12)),Bu(e,r),ku(t.v,r),r}function EW(t){var e=Qa(t),r=LC(t);return[e,r,"n"]}function NW(t,e,r){return r==null&&(r=Ze(12)),Mu(e,r),PC(t.v,r),r}function TW(t){var e=Ou(t),r=LC(t);return[e,r,"n"]}function kW(t,e,r){return r==null&&(r=Ze(8)),Bu(e,r),PC(t.v,r),r}function CW(t){var e=Qa(t),r=Ew(t);return[e,r,"is"]}function IW(t){var e=Qa(t),r=Ns(t);return[e,r,"str"]}function LW(t,e,r){return r==null&&(r=Ze(12+4*t.v.length)),Mu(e,r),$i(t.v,r),r.length>r.l?r.slice(0,r.l):r}function PW(t){var e=Ou(t),r=Ns(t);return[e,r,"str"]}function jW(t,e,r){return r==null&&(r=Ze(8+4*t.v.length)),Bu(e,r),$i(t.v,r),r.length>r.l?r.slice(0,r.l):r}function RW(t,e,r){var n=t.l+e,i=Qa(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"b"];if(r.cellFormula){t.l+=2;var o=Yg(t,n-t.l,r);a[3]=cf(o,null,i,r.supbooks,r)}else t.l=n;return a}function FW(t,e,r){var n=t.l+e,i=Qa(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"e"];if(r.cellFormula){t.l+=2;var o=Yg(t,n-t.l,r);a[3]=cf(o,null,i,r.supbooks,r)}else t.l=n;return a}function DW(t,e,r){var n=t.l+e,i=Qa(t);i.r=r["!row"];var s=Tf(t),a=[i,s,"n"];if(r.cellFormula){t.l+=2;var o=Yg(t,n-t.l,r);a[3]=cf(o,null,i,r.supbooks,r)}else t.l=n;return a}function MW(t,e,r){var n=t.l+e,i=Qa(t);i.r=r["!row"];var s=Ns(t),a=[i,s,"str"];if(r.cellFormula){t.l+=2;var o=Yg(t,n-t.l,r);a[3]=cf(o,null,i,r.supbooks,r)}else t.l=n;return a}var OW=Uu,BW=Nf;function UW(t,e){return e==null&&(e=Ze(4)),e.write_shift(4,t),e}function VW(t,e){var r=t.l+e,n=Uu(t),i=Nw(t),s=Ns(t),a=Ns(t),o=Ns(t);t.l=r;var l={rfx:n,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function zW(t,e){var r=Ze(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Nf({s:qi(t[0]),e:qi(t[0])},r),Tw("rId"+e,r);var n=t[1].Target.indexOf("#"),i=n==-1?"":t[1].Target.slice(n+1);return $i(i||"",r),$i(t[1].Tooltip||"",r),$i("",r),r.slice(0,r.l)}function HW(){}function qW(t,e,r){var n=t.l+e,i=jC(t),s=t.read_shift(1),a=[i];if(a[2]=s,r.cellFormula){var o=P$(t,n-t.l,r);a[1]=o}else t.l=n;return a}function $W(t,e,r){var n=t.l+e,i=Uu(t),s=[i];if(r.cellFormula){var a=R$(t,n-t.l,r);s[1]=a,t.l=n}else t.l=n;return s}function WW(t,e,r){r==null&&(r=Ze(18));var n=Xg(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),r.write_shift(2,i),r}var g8=["left","right","top","bottom","header","footer"];function KW(t){var e={};return g8.forEach(function(r){e[r]=Tf(t)}),e}function GW(t,e){return e==null&&(e=Ze(6*8)),p8(t),g8.forEach(function(r){ku(t[r],e)}),e}function YW(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function XW(t,e,r){r==null&&(r=Ze(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function QW(t){var e=Ze(24);return e.write_shift(4,4),e.write_shift(4,1),Nf(t,e),e}function ZW(t,e){return e==null&&(e=Ze(16*4+2)),e.write_shift(2,t.password?QC(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function JW(){}function eK(){}function tK(t,e,r,n,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ea(e),e.z=e.z||oi[14],e.v=Js(Os(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=qc(i.cellXfs,e,i),e.l&&s["!links"].push([xn(l),e.l]),e.c&&s["!comments"].push([xn(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=jw(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,a?ft(t,18,wW(e,l)):ft(t,7,yW(e,l))):(l.t="str",a?ft(t,17,jW(e,l)):ft(t,6,LW(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?ft(t,13,kW(e,l)):ft(t,2,NW(e,l)):a?ft(t,16,AW(e,l)):ft(t,5,bW(e,l)),!0;case"b":return l.t="b",a?ft(t,15,fW(e,l)):ft(t,4,uW(e,l)),!0;case"e":return l.t="e",a?ft(t,14,gW(e,l)):ft(t,3,pW(e,l)),!0}return a?ft(t,12,lW(e,l)):ft(t,1,aW(e,l)),!0}function rK(t,e,r,n){var i=Bn(e["!ref"]||"A1"),s,a="",o=[];ft(t,145);var l=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var h=i.s.r;h<=u;++h){a=ss(h),J$(t,e,i,h);var d=!1;if(h<=i.e.r)for(var p=i.s.c;p<=i.e.c;++p){h===i.s.r&&(o[p]=Es(p)),s=o[p]+a;var f=l?(e[h]||[])[p]:e[s];if(!f){d=!1;continue}d=tK(t,f,h,p,n,e,d)}}ft(t,146)}function nK(t,e){!e||!e["!merges"]||(ft(t,177,UW(e["!merges"].length)),e["!merges"].forEach(function(r){ft(t,176,BW(r))}),ft(t,178))}function iK(t,e){!e||!e["!cols"]||(ft(t,390),e["!cols"].forEach(function(r,n){r&&ft(t,60,WW(n,r))}),ft(t,391))}function sK(t,e){!e||!e["!ref"]||(ft(t,648),ft(t,649,QW(Bn(e["!ref"]))),ft(t,650))}function aK(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var i=dn(r,-1,n[1].Target.replace(/#.*$/,""),Zr.HLINK);ft(t,494,zW(n,i))}}),delete e["!links"]}function oK(t,e,r,n){if(e["!comments"].length>0){var i=dn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Zr.VML);ft(t,551,Tw("rId"+i)),e["!legacy"]=i}}function lK(t,e,r,n){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:ki(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,o=Ta(s);o.s.r==o.e.r&&(o.e.r=Ta(e["!ref"]).e.r,s=ki(o));for(var l=0;l<a.length;++l){var u=a[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),ft(t,161,Nf(Bn(s))),ft(t,162)}}function cK(t,e,r){ft(t,133),ft(t,137,XW(e,r)),ft(t,138),ft(t,134)}function uK(t,e){e["!protect"]&&ft(t,535,ZW(e["!protect"]))}function hK(t,e,r,n){var i=Zs(),s=r.SheetNames[t],a=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=Bn(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],ft(i,129),(r.vbaraw||a["!outline"])&&ft(i,147,iW(o,a["!outline"])),ft(i,148,tW(l)),cK(i,a,r.Workbook),iK(i,a),rK(i,a,t,e),uK(i,a),lK(i,a,r,t),nK(i,a),aK(i,a,n),a["!margins"]&&ft(i,476,GW(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&sK(i,a),oK(i,a,t,n),ft(i,130),i.end()}function fK(t,e){t.l+=10;var r=Ns(t);return{name:r}}var dK=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function pK(t){return!t.Workbook||!t.Workbook.WBProps?"false":$V(t.Workbook.WBProps.date1904)?"true":"false"}var mK="][*?/\\".split("");function x8(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return mK.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function gK(t,e,r){t.forEach(function(n,i){x8(n);for(var s=0;s<i;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var a=e&&e[i]&&e[i].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function xK(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];gK(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)B$(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}function y8(t){var e=[Ci];e[e.length]=Nt("workbook",null,{xmlns:Af[0],"xmlns:r":Hi.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(dK.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Nt("workbookPr",null,n);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var a={name:mn(t.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=Nt("sheet",null,a)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Nt("definedName",mn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function yK(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=vv(t),r.name=Ns(t),r}function vK(t,e){return e||(e=Ze(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),Tw(t.strRelID,e),$i(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function wK(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var i=e>8?Ns(t):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function _K(t,e){e||(e=Ze(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),IC(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function bK(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),s=pz(t),a=j$(t,0,r),o=Nw(t);t.l=n;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function SK(t,e){ft(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,i={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};ft(t,156,vK(i))}ft(t,144)}function AK(t,e){e||(e=Ze(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return $i("SheetJS",e),$i(O1.version,e),$i(O1.version,e),$i("7262",e),e.length>e.l?e.slice(0,e.l):e}function EK(t,e){e||(e=Ze(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function NK(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,i=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&i==-1?i=n:r[n].Hidden==1&&s==-1&&(s=n);s>i||(ft(t,135),ft(t,158,EK(i)),ft(t,136))}}function TK(t,e){var r=Zs();return ft(r,131),ft(r,128,AK()),ft(r,153,_K(t.Workbook&&t.Workbook.WBProps||null)),NK(r,t),SK(r,t),ft(r,132),r.end()}function kK(t,e,r){return(e.slice(-4)===".bin"?TK:y8)(t)}function CK(t,e,r,n,i){return(e.slice(-4)===".bin"?hK:m8)(t,r,n,i)}function IK(t,e,r){return(e.slice(-4)===".bin"?GH:e8)(t,r)}function LK(t,e,r){return(e.slice(-4)===".bin"?_H:XC)(t,r)}function PK(t,e,r){return(e.slice(-4)===".bin"?uq:s8)(t)}function jK(t){return(t.slice(-4)===".bin"?rq:n8)()}function RK(t,e){var r=[];return t.Props&&r.push(Iz(t.Props,e)),t.Custprops&&r.push(Lz(t.Props,t.Custprops)),r.join("")}function FK(){return""}function DK(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,i){var s=[];s.push(Nt("NumberFormat",null,{"ss:Format":mn(oi[n.numFmtId])}));var a={"ss:ID":"s"+(21+i)};r.push(Nt("Style",s.join(""),a))}),Nt("Styles",r.join(""))}function v8(t){return Nt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+Lw(t.Ref,{r:0,c:0})})}function MK(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var i=e[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(v8(i)))}return Nt("Names",r.join(""))}function OK(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(v8(o)))}return s.join("")}function BK(t,e,r,n){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(Nt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(Nt("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(Nt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(Nt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(ns("ProtectContents","True")),t["!protect"].objects&&i.push(ns("ProtectObjects","True")),t["!protect"].scenarios&&i.push(ns("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(ns("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(ns("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){t["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":Nt("WorksheetOptions",i.join(""),{xmlns:ga.x})}function UK(t){return t.map(function(e){var r=qV(e.t||""),n=Nt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Nt("Comment",n,{"ss:Author":e.a})}).join("")}function VK(t,e,r,n,i,s,a){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+mn(Lw(t.f,a))),t.F&&t.F.slice(0,e.length)==e){var l=qi(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=mn(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=mn(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],h=0;h!=u.length;++h)u[h].s.c!=a.c||u[h].s.r!=a.r||(u[h].e.c>u[h].s.c&&(o["ss:MergeAcross"]=u[h].e.c-u[h].s.c),u[h].e.r>u[h].s.r&&(o["ss:MergeDown"]=u[h].e.r-u[h].s.r));var d="",p="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":d="Number",p=String(t.v);break;case"b":d="Boolean",p=t.v?"1":"0";break;case"e":d="Error",p=Z0[t.v];break;case"d":d="DateTime",p=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||oi[14]);break;case"s":d="String",p=HV(t.v||"");break}var f=qc(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+f),o["ss:Index"]=a.c+1;var v=t.v!=null?p:"",y=t.t=="z"?"":'<Data ss:Type="'+d+'">'+v+"</Data>";return(t.c||[]).length>0&&(y+=UK(t.c)),Nt("Cell",y,o)}function zK(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=JC(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function HK(t,e,r,n){if(!t["!ref"])return"";var i=Bn(t["!ref"]),s=t["!merges"]||[],a=0,o=[];t["!cols"]&&t["!cols"].forEach(function(b,w){Cw(b);var S=!!b.width,k=Xg(w,b),R={"ss:Index":w+1};S&&(R["ss:Width"]=G1(k.width)),b.hidden&&(R["ss:Hidden"]="1"),o.push(Nt("Column",null,R))});for(var l=Array.isArray(t),u=i.s.r;u<=i.e.r;++u){for(var h=[zK(u,(t["!rows"]||[])[u])],d=i.s.c;d<=i.e.c;++d){var p=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>d)&&!(s[a].s.r>u)&&!(s[a].e.c<d)&&!(s[a].e.r<u)){(s[a].s.c!=d||s[a].s.r!=u)&&(p=!0);break}if(!p){var f={r:u,c:d},v=xn(f),y=l?(t[u]||[])[d]:t[v];h.push(VK(y,v,t,e,r,n,f))}}h.push("</Row>"),h.length>2&&o.push(h.join(""))}return o.join("")}function qK(t,e,r){var n=[],i=r.SheetNames[t],s=r.Sheets[i],a=s?OK(s,e,t,r):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=s?HK(s,e,t,r):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(BK(s,e,t,r)),n.join("")}function $K(t,e){e||(e={}),t.SSF||(t.SSF=ea(oi)),t.SSF&&($g(),qg(t.SSF),e.revssf=Wg(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],qc(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(RK(t,e)),r.push(FK()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Nt("Worksheet",qK(n,e,t),{"ss:Name":mn(t.SheetNames[n])}));return r[2]=DK(t,e),r[3]=MK(t),Ci+Nt("Workbook",r.join(""),{xmlns:ga.ss,"xmlns:o":ga.o,"xmlns:x":ga.x,"xmlns:ss":ga.ss,"xmlns:dt":ga.dt,"xmlns:html":ga.html})}var Lx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function WK(t,e){var r=[],n=[],i=[],s=0,a,o=OS(QS,"n"),l=OS(ZS,"n");if(t.Props)for(a=ls(t.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(l,a[s])?n:i).push([a[s],t.Props[a[s]]]);if(t.Custprops)for(a=ls(t.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(l,a[s])?n:i).push([a[s],t.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)HC.indexOf(i[s][0])>-1||UC.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);n.length&&vn.utils.cfb_add(e,"/SummaryInformation",nA(n,Lx.SI,l,ZS)),(r.length||u.length)&&vn.utils.cfb_add(e,"/DocumentSummaryInformation",nA(r,Lx.DSI,o,QS,u.length?u:null,Lx.UDI))}function KK(t,e){var r=e||{},n=vn.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return vn.utils.cfb_add(n,i,w8(t,r)),r.biff==8&&(t.Props||t.Custprops)&&WK(t,n),r.biff==8&&t.vbaraw&&hq(n,vn.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var GK={0:{f:Q$},1:{f:sW},2:{f:EW},3:{f:dW},4:{f:cW},5:{f:_W},6:{f:IW},7:{f:xW},8:{f:MW},9:{f:DW},10:{f:RW},11:{f:FW},12:{f:oW},13:{f:TW},14:{f:mW},15:{f:hW},16:{f:SW},17:{f:PW},18:{f:vW},19:{f:Ew},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:bK},40:{},42:{},43:{f:IH},44:{f:kH},45:{f:jH},46:{f:FH},47:{f:RH},48:{},49:{f:oz},50:{},51:{f:QH},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:lH},62:{f:CW},63:{f:nq},64:{f:JW},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ko,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:YW},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:nW},148:{f:eW,p:16},151:{f:HW},152:{},153:{f:wK},154:{},155:{},156:{f:yK},157:{},158:{},159:{T:1,f:yH},160:{T:-1},161:{T:1,f:Uu},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:OW},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:YH},336:{T:-1},337:{f:eq,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:vv},357:{},358:{},359:{},360:{T:1},361:{},362:{f:rH},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:qW},427:{f:$W},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:KW},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:rW},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:VW},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:vv},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:lq},633:{T:1},634:{T:-1},635:{T:1,f:aq},636:{T:-1},637:{f:hz},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:fK},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:eK},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ct(t,e,r,n){var i=e;if(!isNaN(i)){var s=n||(r||[]).length||0,a=t.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&bw(r)&&t.push(r)}}function YK(t,e,r,n){var i=(r||[]).length||0;if(i<=8224)return Ct(t,e,r,i);var s=e;if(!isNaN(s)){for(var a=r.parts||[],o=0,l=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var h=t.next(4);for(h.write_shift(2,s),h.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u;l<i;){for(h=t.next(4),h.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;h.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u}}}function ep(t,e,r){return t||(t=Ze(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function XK(t,e,r,n){var i=Ze(9);return ep(i,t,e),$C(r,n||"b",i),i}function QK(t,e,r){var n=Ze(8+2*r.length);return ep(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function ZK(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Js(Os(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?Ct(t,2,fH(r,n,i)):Ct(t,3,hH(r,n,i));return;case"b":case"e":Ct(t,5,XK(r,n,e.v,e.t));return;case"s":case"str":Ct(t,4,QK(r,n,(e.v||"").slice(0,255)));return}Ct(t,1,ep(null,r,n))}function JK(t,e,r,n){var i=Array.isArray(e),s=Bn(e["!ref"]||"A1"),a,o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=ki(s)}for(var u=s.s.r;u<=s.e.r;++u){o=ss(u);for(var h=s.s.c;h<=s.e.c;++h){u===s.s.r&&(l[h]=Es(h)),a=l[h]+o;var d=i?(e[u]||[])[h]:e[a];d&&ZK(t,d,u,h)}}}function eG(t,e){for(var r=e||{},n=Zs(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(i=s);if(i==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Ct(n,r.biff==4?1033:r.biff==3?521:9,kw(t,16,r)),JK(n,t.Sheets[t.SheetNames[i]],i,r),Ct(n,10),n.end()}function tG(t,e,r){Ct(t,49,Gz({sz:12,name:"Arial"},r))}function rG(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&Ct(t,1054,Qz(i,e[i],r))})}function nG(t,e){var r=Ze(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Ct(t,2151,r),r=Ze(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),GC(Bn(e["!ref"]||"A1"),r),r.write_shift(4,4),Ct(t,2152,r)}function iG(t,e){for(var r=0;r<16;++r)Ct(t,224,sA({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Ct(t,224,sA(n,0,e))})}function sG(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Ct(t,440,sH(n)),n[1].Tooltip&&Ct(t,2048,aH(n))}delete e["!links"]}function aG(t,e){if(e){var r=0;e.forEach(function(n,i){++r<=256&&n&&Ct(t,125,cH(Xg(i,n),i))})}}function oG(t,e,r,n,i){var s=16+qc(i.cellXfs,e,i);if(e.v==null&&!e.bf){Ct(t,513,Cu(r,n,s));return}if(e.bf)Ct(t,6,L$(e,r,n,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?Js(Os(e.v)):e.v;Ct(t,515,tH(r,n,a,s));break;case"b":case"e":Ct(t,517,eH(r,n,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=jw(i.Strings,e.v,i.revStrings);Ct(t,253,Yz(r,n,o,s))}else Ct(t,516,Xz(r,n,(e.v||"").slice(0,255),s,i));break;default:Ct(t,513,Cu(r,n,s))}}function lG(t,e,r){var n=Zs(),i=r.SheetNames[t],s=r.Sheets[i]||{},a=(r||{}).Workbook||{},o=(a.Sheets||[])[t]||{},l=Array.isArray(s),u=e.biff==8,h,d="",p=[],f=Bn(s["!ref"]||"A1"),v=u?65536:16384;if(f.e.c>255||f.e.r>=v){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,v-1)}Ct(n,2057,kw(r,16,e)),Ct(n,13,za(1)),Ct(n,12,za(100)),Ct(n,15,Fs(!0)),Ct(n,17,Fs(!1)),Ct(n,16,ku(.001)),Ct(n,95,Fs(!0)),Ct(n,42,Fs(!1)),Ct(n,43,Fs(!1)),Ct(n,130,za(1)),Ct(n,128,Jz()),Ct(n,131,Fs(!1)),Ct(n,132,Fs(!1)),u&&aG(n,s["!cols"]),Ct(n,512,Zz(f,e)),u&&(s["!links"]=[]);for(var y=f.s.r;y<=f.e.r;++y){d=ss(y);for(var b=f.s.c;b<=f.e.c;++b){y===f.s.r&&(p[b]=Es(b)),h=p[b]+d;var w=l?(s[y]||[])[b]:s[h];w&&(oG(n,w,y,b,e),u&&w.l&&s["!links"].push([h,w.l]))}}var S=o.CodeName||o.name||i;return u&&Ct(n,574,Kz((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&Ct(n,229,iH(s["!merges"])),u&&sG(n,s),Ct(n,442,KC(S)),u&&nG(n,s),Ct(n,10),n.end()}function cG(t,e,r){var n=Zs(),i=(t||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=r.biff==8,l=r.biff==5;if(Ct(n,2057,kw(t,5,r)),r.bookType=="xla"&&Ct(n,135),Ct(n,225,o?za(1200):null),Ct(n,193,Rz(2)),l&&Ct(n,191),l&&Ct(n,192),Ct(n,226),Ct(n,92,Hz("SheetJS",r)),Ct(n,66,za(o?1200:1252)),o&&Ct(n,353,za(0)),o&&Ct(n,448),Ct(n,317,uH(t.SheetNames.length)),o&&t.vbaraw&&Ct(n,211),o&&t.vbaraw){var u=a.CodeName||"ThisWorkbook";Ct(n,442,KC(u))}Ct(n,156,za(17)),Ct(n,25,Fs(!1)),Ct(n,18,Fs(!1)),Ct(n,19,za(0)),o&&Ct(n,431,Fs(!1)),o&&Ct(n,444,za(0)),Ct(n,61,Wz()),Ct(n,64,Fs(!1)),Ct(n,141,za(0)),Ct(n,34,Fs(pK(t)=="true")),Ct(n,14,Fs(!0)),o&&Ct(n,439,Fs(!1)),Ct(n,218,za(0)),tG(n,t,r),rG(n,t.SSF,r),iG(n,r),o&&Ct(n,352,Fs(!1));var h=n.end(),d=Zs();o&&Ct(d,140,oH()),o&&r.Strings&&YK(d,252,$z(r.Strings)),Ct(d,10);var p=d.end(),f=Zs(),v=0,y=0;for(y=0;y<t.SheetNames.length;++y)v+=(o?12:11)+(o?2:1)*t.SheetNames[y].length;var b=h.length+v+p.length;for(y=0;y<t.SheetNames.length;++y){var w=s[y]||{};Ct(f,133,qz({pos:b,hs:w.Hidden||0,dt:0,name:t.SheetNames[y]},r)),b+=e[y].length}var S=f.end();if(v!=S.length)throw new Error("BS8 "+v+" != "+S.length);var k=[];return h.length&&k.push(h),S.length&&k.push(S),p.length&&k.push(p),rs(k)}function uG(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ea(oi)),t&&t.SSF&&($g(),qg(t.SSF),r.revssf=Wg(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,Rw(r),r.cellXfs=[],qc(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)n[n.length]=lG(i,r,t);return n.unshift(cG(t,n,r)),rs(n)}function w8(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var i=Ta(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return uG(t,e);case 4:case 3:case 2:return eG(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function hG(t,e,r,n){for(var i=t["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,u=0;u<i.length;++u)if(!(i[u].s.r>r||i[u].s.c>a)&&!(i[u].e.r<r||i[u].e.c<a)){if(i[u].s.r<r||i[u].s.c<a){o=-1;break}o=i[u].e.r-i[u].s.r+1,l=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var h=xn({r,c:a}),d=n.dense?(t[r]||[])[a]:t[h],p=d&&d.v!=null&&(d.h||zV(d.w||(Tl(d),d.w)||""))||"",f={};o>1&&(f.rowspan=o),l>1&&(f.colspan=l),n.editable?p='<span contenteditable="true">'+p+"</span>":d&&(f["data-t"]=d&&d.t||"z",d.v!=null&&(f["data-v"]=d.v),d.z!=null&&(f["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+d.l.Target+'">'+p+"</a>")),f.id=(n.id||"sjs")+"-"+h,s.push(Nt("td",p,f))}}var v="<tr>";return v+s.join("")+"</tr>"}var fG='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',dG="</body></html>";function pG(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function _8(t,e){var r=e||{},n=r.header!=null?r.header:fG,i=r.footer!=null?r.footer:dG,s=[n],a=Ta(t["!ref"]);r.dense=Array.isArray(t),s.push(pG(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)s.push(hG(t,a,o,r));return s.push("</table>"+i),s.join("")}function b8(t,e,r){var n=r||{},i=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var a=typeof n.origin=="string"?qi(n.origin):n.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(t["!ref"]){var h=Ta(t["!ref"]);u.s.r=Math.min(u.s.r,h.s.r),u.s.c=Math.min(u.s.c,h.s.c),u.e.r=Math.max(u.e.r,h.e.r),u.e.c=Math.max(u.e.c,h.e.c),i==-1&&(u.e.r=i=h.e.r+1)}var d=[],p=0,f=t["!rows"]||(t["!rows"]=[]),v=0,y=0,b=0,w=0,S=0,k=0;for(t["!cols"]||(t["!cols"]=[]);v<o.length&&y<l;++v){var R=o[v];if(fA(R)){if(n.display)continue;f[y]={hidden:!0}}var q=R.children;for(b=w=0;b<q.length;++b){var K=q[b];if(!(n.display&&fA(K))){var E=K.hasAttribute("data-v")?K.getAttribute("data-v"):K.hasAttribute("v")?K.getAttribute("v"):WV(K.innerHTML),C=K.getAttribute("data-z")||K.getAttribute("z");for(p=0;p<d.length;++p){var A=d[p];A.s.c==w+s&&A.s.r<y+i&&y+i<=A.e.r&&(w=A.e.c+1-s,p=-1)}k=+K.getAttribute("colspan")||1,((S=+K.getAttribute("rowspan")||1)>1||k>1)&&d.push({s:{r:y+i,c:w+s},e:{r:y+i+(S||1)-1,c:w+s+(k||1)-1}});var D={t:"s",v:E},N=K.getAttribute("data-t")||K.getAttribute("t")||"";E!=null&&(E.length==0?D.t=N||"z":n.raw||E.trim().length==0||N=="s"||(E==="TRUE"?D={t:"b",v:!0}:E==="FALSE"?D={t:"b",v:!1}:isNaN(gl(E))?isNaN(S0(E).getDate())||(D={t:"d",v:Os(E)},n.cellDates||(D={t:"n",v:Js(D.v)}),D.z=n.dateNF||oi[14]):D={t:"n",v:gl(E)})),D.z===void 0&&C!=null&&(D.z=C);var j="",P=K.getElementsByTagName("A");if(P&&P.length)for(var se=0;se<P.length&&!(P[se].hasAttribute("href")&&(j=P[se].getAttribute("href"),j.charAt(0)!="#"));++se);j&&j.charAt(0)!="#"&&(D.l={Target:j}),n.dense?(t[y+i]||(t[y+i]=[]),t[y+i][w+s]=D):t[xn({c:w+s,r:y+i})]=D,u.e.c<w+s&&(u.e.c=w+s),w+=k}}++y}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),u.e.r=Math.max(u.e.r,y-1+i),t["!ref"]=ki(u),y>=l&&(t["!fullref"]=ki((u.e.r=o.length-v+y-1+i,u))),t}function S8(t,e){var r=e||{},n=r.dense?[]:{};return b8(n,t,e)}function mG(t,e){return Du(S8(t,e),e)}function fA(t){var e="",r=gG(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function gG(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var xG=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+E0({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Ci+e}}(),dA=function(){var t=function(s){return mn(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,a,o){var l=[];l.push('      <table:table table:name="'+mn(a.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,h=0,d=Ta(s["!ref"]||"A1"),p=s["!merges"]||[],f=0,v=Array.isArray(s);if(s["!cols"])for(h=0;h<=d.e.c;++h)l.push("        <table:table-column"+(s["!cols"][h]?' table:style-name="co'+s["!cols"][h].ods+'"':"")+`></table:table-column>
`);var y="",b=s["!rows"]||[];for(u=0;u<d.s.r;++u)y=b[u]?' table:style-name="ro'+b[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=d.e.r;++u){for(y=b[u]?' table:style-name="ro'+b[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),h=0;h<d.s.c;++h)l.push(e);for(;h<=d.e.c;++h){var w=!1,S={},k="";for(f=0;f!=p.length;++f)if(!(p[f].s.c>h)&&!(p[f].s.r>u)&&!(p[f].e.c<h)&&!(p[f].e.r<u)){(p[f].s.c!=h||p[f].s.r!=u)&&(w=!0),S["table:number-columns-spanned"]=p[f].e.c-p[f].s.c+1,S["table:number-rows-spanned"]=p[f].e.r-p[f].s.r+1;break}if(w){l.push(r);continue}var R=xn({r:u,c:h}),q=v?(s[u]||[])[h]:s[R];if(q&&q.f&&(S["table:formula"]=mn(M$(q.f)),q.F&&q.F.slice(0,R.length)==R)){var K=Ta(q.F);S["table:number-matrix-columns-spanned"]=K.e.c-K.s.c+1,S["table:number-matrix-rows-spanned"]=K.e.r-K.s.r+1}if(!q){l.push(e);continue}switch(q.t){case"b":k=q.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=q.v?"true":"false";break;case"n":k=q.w||String(q.v||0),S["office:value-type"]="float",S["office:value"]=q.v||0;break;case"s":case"str":k=q.v==null?"":q.v,S["office:value-type"]="string";break;case"d":k=q.w||Os(q.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=Os(q.v).toISOString(),S["table:style-name"]="ce1";break;default:l.push(e);continue}var E=t(k);if(q.l&&q.l.Target){var C=q.l.Target;C=C.charAt(0)=="#"?"#"+O$(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),E=Nt("text:a",E,{"xlink:href":C.replace(/&/g,"&amp;")})}l.push("          "+Nt("table:table-cell",Nt("text:p",E,{}),S)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var h=0;h<u["!cols"].length;++h)if(u["!cols"][h]){var d=u["!cols"][h];if(d.width==null&&d.wpx==null&&d.wch==null)continue;Cw(d),d.ods=o;var p=u["!cols"][h].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var h=0;h<u["!rows"].length;++h)if(u["!rows"][h]){u["!rows"][h].ods=l;var d=u["!rows"][h].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var l=[Ci],u=E0({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),h=E0({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+h+`>
`),l.push(OC().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),i(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var d=0;d!=a.SheetNames.length;++d)l.push(n(a.Sheets[a.SheetNames[d]],a,d));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function A8(t,e){if(e.bookType=="fods")return dA(t,e);var r=yw(),n="",i=[],s=[];return n="mimetype",Cr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Cr(r,n,dA(t,e)),i.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Cr(r,n,xG(t,e)),i.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Cr(r,n,Ci+OC()),i.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Cr(r,n,Cz(s)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Cr(r,n,Tz(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Q1(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function yG(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):po(A0(t))}function vG(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function Oc(t){var e=t.reduce(function(i,s){return i+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(i){r.set(i,n),n+=i.length}),r}function wG(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=r>=0?0:128}function N0(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function fn(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Wh(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Ri(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],i=N0(t,r),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=N0(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(n))}var u={data:o,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function Qi(t){var e=[];return t.forEach(function(r,n){r.forEach(function(i){i.data&&(e.push(fn(n*8+i.type)),i.type==2&&e.push(fn(i.data.length)),e.push(i.data))})}),Oc(e)}function ao(t){for(var e,r=[],n=[0];n[0]<t.length;){var i=N0(t,n),s=Ri(t.slice(n[0],n[0]+i));n[0]+=i;var a={id:Wh(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=Ri(o.data),u=Wh(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(a.merge=Wh(s[3][0].data)>>>0>0),r.push(a)}return r}function Qu(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:fn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:fn(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:fn(a.data.length)}],n[2].push({data:Qi(a.meta),type:2})});var s=Qi(n);e.push(fn(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),Oc(e)}function _G(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=N0(e,r),i=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}i.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),i=[Oc(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(i.push(i[0].slice(-l)),u-=l;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-l,-l+u))}}var h=Oc(i);if(h.length!=n)throw new Error("Unexpected length: ".concat(h.length," != ").concat(n));return h}function oo(t){for(var e=[],r=0;r<t.length;){var n=t[r++],i=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(_G(n,t.slice(r,r+i))),r+=i}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Oc(e)}function Zu(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),i=new Uint8Array(4);e.push(i);var s=fn(n),a=s.length;e.push(s),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),a+=n,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,r+=n}return Oc(e)}function Px(t,e){var r=new Uint8Array(32),n=Q1(r),i=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,wG(r,i,t.v),s|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(i,e.indexOf(t.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,i)}function jx(t,e){var r=new Uint8Array(32),n=Q1(r),i=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(i,e.indexOf(t.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,i)}function Zl(t){var e=Ri(t);return N0(e[1][0].data)}function bG(t,e,r){var n,i,s,a;if(!((n=t[6])!=null&&n[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=t[8])==null?void 0:s[0])==null?void 0:a.data)&&Wh(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=Q1(t[7][0].data),h=0,d=[],p=Q1(t[4][0].data),f=0,v=[],y=0;y<e.length;++y){if(e[y]==null){u.setUint16(y*2,65535,!0),p.setUint16(y*2,65535);continue}u.setUint16(y*2,h,!0),p.setUint16(y*2,f,!0);var b,w;switch(typeof e[y]){case"string":b=Px({t:"s",v:e[y]},r),w=jx({t:"s",v:e[y]},r);break;case"number":b=Px({t:"n",v:e[y]},r),w=jx({t:"n",v:e[y]},r);break;case"boolean":b=Px({t:"b",v:e[y]},r),w=jx({t:"b",v:e[y]},r);break;default:throw new Error("Unsupported value "+e[y])}d.push(b),h+=b.length,v.push(w),f+=w.length,++l}for(t[2][0].data=fn(l);y<t[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),p.setUint16(y*2,65535,!0);return t[6][0].data=Oc(d),t[3][0].data=Oc(v),l}function SG(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Ta(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(ki(n)));var s=Z1(r,{range:n,header:1}),a=["~Sh33tJ5~"];s.forEach(function(O){return O.forEach(function(B){typeof B=="string"&&a.push(B)})});var o={},l=[],u=vn.read(e.numbers,{type:"base64"});u.FileIndex.map(function(O,B){return[O,u.FullPaths[B]]}).forEach(function(O){var B=O[0],z=O[1];if(B.type==2&&B.name.match(/\.iwa/)){var J=B.content,fe=oo(J),Se=ao(fe);Se.forEach(function(Ae){l.push(Ae.id),o[Ae.id]={deps:[],location:z,type:Wh(Ae.messages[0].meta[1][0].data)}})}}),l.sort(function(O,B){return O-B});var h=l.filter(function(O){return O>1}).map(function(O){return[O,fn(O)]});u.FileIndex.map(function(O,B){return[O,u.FullPaths[B]]}).forEach(function(O){var B=O[0];if(O[1],!!B.name.match(/\.iwa/)){var z=ao(oo(B.content));z.forEach(function(J){J.messages.forEach(function(fe){h.forEach(function(Se){J.messages.some(function(Ae){return Wh(Ae.meta[1][0].data)!=11006&&vG(Ae.data,Se[1])})&&o[Se[0]].deps.push(J.id)})})})}});for(var d=vn.find(u,o[1].location),p=ao(oo(d.content)),f,v=0;v<p.length;++v){var y=p[v];y.id==1&&(f=y)}var b=Zl(Ri(f.messages[0].data)[1][0].data);for(d=vn.find(u,o[b].location),p=ao(oo(d.content)),v=0;v<p.length;++v)y=p[v],y.id==b&&(f=y);for(b=Zl(Ri(f.messages[0].data)[2][0].data),d=vn.find(u,o[b].location),p=ao(oo(d.content)),v=0;v<p.length;++v)y=p[v],y.id==b&&(f=y);for(b=Zl(Ri(f.messages[0].data)[2][0].data),d=vn.find(u,o[b].location),p=ao(oo(d.content)),v=0;v<p.length;++v)y=p[v],y.id==b&&(f=y);var w=Ri(f.messages[0].data);{w[6][0].data=fn(n.e.r+1),w[7][0].data=fn(n.e.c+1);var S=Zl(w[46][0].data),k=vn.find(u,o[S].location),R=ao(oo(k.content));{for(var q=0;q<R.length&&R[q].id!=S;++q);if(R[q].id!=S)throw"Bad ColumnRowUIDMapArchive";var K=Ri(R[q].messages[0].data);K[1]=[],K[2]=[],K[3]=[];for(var E=0;E<=n.e.c;++E){var C=[];C[1]=C[2]=[{type:0,data:fn(E+420690)}],K[1].push({type:2,data:Qi(C)}),K[2].push({type:0,data:fn(E)}),K[3].push({type:0,data:fn(E)})}K[4]=[],K[5]=[],K[6]=[];for(var A=0;A<=n.e.r;++A)C=[],C[1]=C[2]=[{type:0,data:fn(A+726270)}],K[4].push({type:2,data:Qi(C)}),K[5].push({type:0,data:fn(A)}),K[6].push({type:0,data:fn(A)});R[q].messages[0].data=Qi(K)}k.content=Zu(Qu(R)),k.size=k.content.length,delete w[46];var D=Ri(w[4][0].data);{D[7][0].data=fn(n.e.r+1);var N=Ri(D[1][0].data),j=Zl(N[2][0].data);k=vn.find(u,o[j].location),R=ao(oo(k.content));{if(R[0].id!=j)throw"Bad HeaderStorageBucket";var P=Ri(R[0].messages[0].data);for(A=0;A<s.length;++A){var se=Ri(P[2][0].data);se[1][0].data=fn(A),se[4][0].data=fn(s[A].length),P[2][A]={type:P[2][0].type,data:Qi(se)}}R[0].messages[0].data=Qi(P)}k.content=Zu(Qu(R)),k.size=k.content.length;var ge=Zl(D[2][0].data);k=vn.find(u,o[ge].location),R=ao(oo(k.content));{if(R[0].id!=ge)throw"Bad HeaderStorageBucket";for(P=Ri(R[0].messages[0].data),E=0;E<=n.e.c;++E)se=Ri(P[2][0].data),se[1][0].data=fn(E),se[4][0].data=fn(n.e.r+1),P[2][E]={type:P[2][0].type,data:Qi(se)};R[0].messages[0].data=Qi(P)}k.content=Zu(Qu(R)),k.size=k.content.length;var ve=Zl(D[4][0].data);(function(){for(var O=vn.find(u,o[ve].location),B=ao(oo(O.content)),z,J=0;J<B.length;++J){var fe=B[J];fe.id==ve&&(z=fe)}var Se=Ri(z.messages[0].data);{Se[3]=[];var Ae=[];a.forEach(function(et,ot){Ae[1]=[{type:0,data:fn(ot)}],Ae[2]=[{type:0,data:fn(1)}],Ae[3]=[{type:2,data:yG(et)}],Se[3].push({type:2,data:Qi(Ae)})})}z.messages[0].data=Qi(Se);var Ne=Qu(B),Xe=Zu(Ne);O.content=Xe,O.size=O.content.length})();var ye=Ri(D[3][0].data);{var he=ye[1][0];delete ye[2];var _e=Ri(he.data);{var Ue=Zl(_e[2][0].data);(function(){for(var O=vn.find(u,o[Ue].location),B=ao(oo(O.content)),z,J=0;J<B.length;++J){var fe=B[J];fe.id==Ue&&(z=fe)}var Se=Ri(z.messages[0].data);{delete Se[6],delete ye[7];var Ae=new Uint8Array(Se[5][0].data);Se[5]=[];for(var Ne=0,Xe=0;Xe<=n.e.r;++Xe){var et=Ri(Ae);Ne+=bG(et,s[Xe],a),et[1][0].data=fn(Xe),Se[5].push({data:Qi(et),type:2})}Se[1]=[{type:0,data:fn(n.e.c+1)}],Se[2]=[{type:0,data:fn(n.e.r+1)}],Se[3]=[{type:0,data:fn(Ne)}],Se[4]=[{type:0,data:fn(n.e.r+1)}]}z.messages[0].data=Qi(Se);var ot=Qu(B),mt=Zu(ot);O.content=mt,O.size=O.content.length})()}he.data=Qi(_e)}D[3][0].data=Qi(ye)}w[4][0].data=Qi(D)}f.messages[0].data=Qi(w);var Ie=Qu(p),L=Zu(Ie);return d.content=L,d.size=d.content.length,u}function AG(t){return function(r){for(var n=0;n!=t.length;++n){var i=t[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function Rw(t){AG([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function EG(t,e){return e.bookType=="ods"?A8(t,e):e.bookType=="numbers"?SG(t,e):e.bookType=="xlsb"?NG(t,e):TG(t,e)}function NG(t,e){Th=1024,t&&!t.SSF&&(t.SSF=ea(oi)),t&&t.SSF&&($g(),qg(t.SSF),e.revssf=Wg(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Vd?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=a8.indexOf(e.bookType)>-1,i=FC();Rw(e=e||{});var s=yw(),a="",o=0;if(e.cellXfs=[],qc(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",Cr(s,a,BC(t.Props,e)),i.coreprops.push(a),dn(e.rels,2,a,Zr.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Cr(s,a,VC(t.Props)),i.extprops.push(a),dn(e.rels,3,a,Zr.EXT_PROPS),t.Custprops!==t.Props&&ls(t.Custprops||{}).length>0&&(a="docProps/custom.xml",Cr(s,a,zC(t.Custprops)),i.custprops.push(a),dn(e.rels,4,a,Zr.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},d=t.Sheets[t.SheetNames[o-1]],p=(d||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,Cr(s,a,CK(o-1,a,e,t,h)),i.sheets.push(a),dn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,Zr.WS[0])}if(d){var f=d["!comments"],v=!1,y="";f&&f.length>0&&(y="xl/comments"+o+"."+r,Cr(s,y,PK(f,y)),i.comments.push(y),dn(h,-1,"../comments"+o+"."+r,Zr.CMNT),v=!0),d["!legacy"]&&v&&Cr(s,"xl/drawings/vmlDrawing"+o+".vml",i8(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}h["!id"].rId1&&Cr(s,MC(a),qh(h))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,Cr(s,a,LK(e.Strings,a,e)),i.strs.push(a),dn(e.wbrels,-1,"sharedStrings."+r,Zr.SST)),a="xl/workbook."+r,Cr(s,a,kK(t,a)),i.workbooks.push(a),dn(e.rels,1,a,Zr.WB),a="xl/theme/theme1.xml",Cr(s,a,r8(t.Themes,e)),i.themes.push(a),dn(e.wbrels,-1,"theme/theme1.xml",Zr.THEME),a="xl/styles."+r,Cr(s,a,IK(t,a,e)),i.styles.push(a),dn(e.wbrels,-1,"styles."+r,Zr.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",Cr(s,a,t.vbaraw),i.vba.push(a),dn(e.wbrels,-1,"vbaProject.bin",Zr.VBA)),a="xl/metadata."+r,Cr(s,a,jK(a)),i.metadata.push(a),dn(e.wbrels,-1,"metadata."+r,Zr.XLMETA),Cr(s,"[Content_Types].xml",DC(i,e)),Cr(s,"_rels/.rels",qh(e.rels)),Cr(s,"xl/_rels/workbook."+r+".rels",qh(e.wbrels)),delete e.revssf,delete e.ssf,s}function TG(t,e){Th=1024,t&&!t.SSF&&(t.SSF=ea(oi)),t&&t.SSF&&($g(),qg(t.SSF),e.revssf=Wg(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Vd?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=a8.indexOf(e.bookType)>-1,i=FC();Rw(e=e||{});var s=yw(),a="",o=0;if(e.cellXfs=[],qc(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",Cr(s,a,BC(t.Props,e)),i.coreprops.push(a),dn(e.rels,2,a,Zr.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Cr(s,a,VC(t.Props)),i.extprops.push(a),dn(e.rels,3,a,Zr.EXT_PROPS),t.Custprops!==t.Props&&ls(t.Custprops||{}).length>0&&(a="docProps/custom.xml",Cr(s,a,zC(t.Custprops)),i.custprops.push(a),dn(e.rels,4,a,Zr.CUST_PROPS));var h=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],f=(p||{})["!type"]||"sheet";switch(f){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,Cr(s,a,m8(o-1,e,t,d)),i.sheets.push(a),dn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,Zr.WS[0])}if(p){var v=p["!comments"],y=!1,b="";if(v&&v.length>0){var w=!1;v.forEach(function(S){S[1].forEach(function(k){k.T==!0&&(w=!0)})}),w&&(b="xl/threadedComments/threadedComment"+o+"."+r,Cr(s,b,iq(v,h,e)),i.threadedcomments.push(b),dn(d,-1,"../threadedComments/threadedComment"+o+"."+r,Zr.TCMNT)),b="xl/comments"+o+"."+r,Cr(s,b,s8(v)),i.comments.push(b),dn(d,-1,"../comments"+o+"."+r,Zr.CMNT),y=!0}p["!legacy"]&&y&&Cr(s,"xl/drawings/vmlDrawing"+o+".vml",i8(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}d["!id"].rId1&&Cr(s,MC(a),qh(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,Cr(s,a,XC(e.Strings,e)),i.strs.push(a),dn(e.wbrels,-1,"sharedStrings."+r,Zr.SST)),a="xl/workbook."+r,Cr(s,a,y8(t)),i.workbooks.push(a),dn(e.rels,1,a,Zr.WB),a="xl/theme/theme1.xml",Cr(s,a,r8(t.Themes,e)),i.themes.push(a),dn(e.wbrels,-1,"theme/theme1.xml",Zr.THEME),a="xl/styles."+r,Cr(s,a,e8(t,e)),i.styles.push(a),dn(e.wbrels,-1,"styles."+r,Zr.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",Cr(s,a,t.vbaraw),i.vba.push(a),dn(e.wbrels,-1,"vbaProject.bin",Zr.VBA)),a="xl/metadata."+r,Cr(s,a,n8()),i.metadata.push(a),dn(e.wbrels,-1,"metadata."+r,Zr.XLMETA),h.length>1&&(a="xl/persons/person.xml",Cr(s,a,sq(h)),i.people.push(a),dn(e.wbrels,-1,"persons/person.xml",Zr.PEOPLE)),Cr(s,"[Content_Types].xml",DC(i,e)),Cr(s,"_rels/.rels",qh(e.rels)),Cr(s,"xl/_rels/workbook."+r+".rels",qh(e.wbrels)),delete e.revssf,delete e.ssf,s}function kG(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Nl(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function E8(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return X0(e.file,vn.write(t,{type:Jr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return vn.write(t,e)}function CG(t,e){var r=ea(e||{}),n=EG(t,r);return IG(n,r)}function IG(t,e){var r={},n=Jr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?vn.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(Hg(i))}return e.password&&typeof encrypt_agile<"u"?E8(encrypt_agile(i,e.password),e):e.type==="file"?X0(e.file,i):e.type=="string"?Md(i):i}function LG(t,e){var r=e||{},n=KK(t,r);return E8(n,r)}function jo(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return b0(A0(n));case"binary":return A0(n);case"string":return t;case"file":return X0(e.file,n,"utf8");case"buffer":return Jr?Il(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):jo(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function PG(t,e){switch(e.type){case"base64":return b0(t);case"binary":return t;case"string":return t;case"file":return X0(e.file,t,"binary");case"buffer":return Jr?Il(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function am(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?b0(r):e.type=="string"?Md(r):r;case"file":return X0(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function N8(t,e){aV(),xK(t);var r=ea(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=N8(t,r);return r.type="array",Hg(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=t.SheetNames.indexOf(r.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return jo($K(t,r),r);case"slk":case"sylk":return jo(pH.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"htm":case"html":return jo(_8(t.Sheets[t.SheetNames[i]],r),r);case"txt":return PG(T8(t.Sheets[t.SheetNames[i]],r),r);case"csv":return jo(Fw(t.Sheets[t.SheetNames[i]],r),r,"\uFEFF");case"dif":return jo(mH.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"dbf":return am(dH.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"prn":return jo(gH.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"rtf":return jo(SH.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"eth":return jo(YC.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"fods":return jo(A8(t,r),r);case"wk1":return am(aA.sheet_to_wk1(t.Sheets[t.SheetNames[i]],r),r);case"wk3":return am(aA.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),am(w8(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),LG(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return CG(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function jG(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function RG(t,e,r){var n={};return n.type="file",n.file=e,jG(n),N8(t,n)}function FG(t,e,r,n,i,s,a,o){var l=ss(r),u=o.defval,h=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,p=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!a||t[r])for(var f=e.s.c;f<=e.e.c;++f){var v=a?t[r][f]:t[n[f]+l];if(v===void 0||v.t===void 0){if(u===void 0)continue;s[f]!=null&&(p[s[f]]=u);continue}var y=v.v;switch(v.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(s[f]!=null){if(y==null)if(v.t=="e"&&y===null)p[s[f]]=null;else if(u!==void 0)p[s[f]]=u;else if(h&&y===null)p[s[f]]=null;else continue;else p[s[f]]=h&&(v.t!=="n"||v.t==="n"&&o.rawNumbers!==!1)?y:Tl(v,y,o);y!=null&&(d=!1)}}return{row:p,isempty:d}}function Z1(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},h=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof h){case"string":l=Bn(h);break;case"number":l=Bn(t["!ref"]),l.s.r=h;break;default:l=h}n>0&&(i=0);var d=ss(l.s.r),p=[],f=[],v=0,y=0,b=Array.isArray(t),w=l.s.r,S=0,k={};b&&!t[w]&&(t[w]=[]);var R=u.skipHidden&&t["!cols"]||[],q=u.skipHidden&&t["!rows"]||[];for(S=l.s.c;S<=l.e.c;++S)if(!(R[S]||{}).hidden)switch(p[S]=Es(S),r=b?t[w][S]:t[p[S]+d],n){case 1:s[S]=S-l.s.c;break;case 2:s[S]=p[S];break;case 3:s[S]=u.header[S-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=Tl(r,null,u),y=k[a]||0,!y)k[a]=1;else{do o=a+"_"+y++;while(k[o]);k[a]=y,k[o]=1}s[S]=o}for(w=l.s.r+i;w<=l.e.r;++w)if(!(q[w]||{}).hidden){var K=FG(t,l,w,p,n,s,b,u);(K.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(f[v++]=K.row)}return f.length=v,f}var pA=/"/g;function DG(t,e,r,n,i,s,a,o){for(var l=!0,u=[],h="",d=ss(r),p=e.s.c;p<=e.e.c;++p)if(n[p]){var f=o.dense?(t[r]||[])[p]:t[n[p]+d];if(f==null)h="";else if(f.v!=null){l=!1,h=""+(o.rawNumbers&&f.t=="n"?f.v:Tl(f,null,o));for(var v=0,y=0;v!==h.length;++v)if((y=h.charCodeAt(v))===i||y===s||y===34||o.forceQuotes){h='"'+h.replace(pA,'""')+'"';break}h=="ID"&&(h='"ID"')}else f.f!=null&&!f.F?(l=!1,h="="+f.f,h.indexOf(",")>=0&&(h='"'+h.replace(pA,'""')+'"')):h="";u.push(h)}return o.blankrows===!1&&l?null:u.join(a)}function Fw(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var i=Bn(t["!ref"]),s=n.FS!==void 0?n.FS:",",a=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),h="",d=[];n.dense=Array.isArray(t);for(var p=n.skipHidden&&t["!cols"]||[],f=n.skipHidden&&t["!rows"]||[],v=i.s.c;v<=i.e.c;++v)(p[v]||{}).hidden||(d[v]=Es(v));for(var y=0,b=i.s.r;b<=i.e.r;++b)(f[b]||{}).hidden||(h=DG(t,i,b,d,a,l,s,n),h!=null&&(n.strip&&(h=h.replace(u,"")),(h||n.blankrows!==!1)&&r.push((y++?o:"")+h)));return delete n.dense,r.join("")}function T8(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=Fw(t,e);return r}function MG(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var i=Bn(t["!ref"]),s="",a=[],o,l=[],u=Array.isArray(t);for(o=i.s.c;o<=i.e.c;++o)a[o]=Es(o);for(var h=i.s.r;h<=i.e.r;++h)for(s=ss(h),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,r=u?(t[h]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function k8(t,e,r){var n=r||{},i=+!n.skipHeader,s=t||{},a=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?qi(n.origin):n.origin;a=l.r,o=l.c}var u,h={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var d=Bn(s["!ref"]);h.e.c=Math.max(h.e.c,d.e.c),h.e.r=Math.max(h.e.r,d.e.r),a==-1&&(a=d.e.r+1,h.e.r=a+e.length-1+i)}else a==-1&&(a=0,h.e.r=e.length-1+i);var p=n.header||[],f=0;e.forEach(function(y,b){ls(y).forEach(function(w){(f=p.indexOf(w))==-1&&(p[f=p.length]=w);var S=y[w],k="z",R="",q=xn({c:o+f,r:a+b+i});u=T0(s,q),S&&typeof S=="object"&&!(S instanceof Date)?s[q]=S:(typeof S=="number"?k="n":typeof S=="boolean"?k="b":typeof S=="string"?k="s":S instanceof Date?(k="d",n.cellDates||(k="n",S=Js(S)),R=n.dateNF||oi[14]):S===null&&n.nullError&&(k="e",S=0),u?(u.t=k,u.v=S,delete u.w,delete u.R,R&&(u.z=R)):s[q]=u={t:k,v:S},R&&(u.z=R))})}),h.e.c=Math.max(h.e.c,o+p.length-1);var v=ss(a);if(i)for(f=0;f<p.length;++f)s[Es(f+o)+v]={t:"s",v:p[f]};return s["!ref"]=ki(h),s}function OG(t,e){return k8(null,t,e)}function T0(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=qi(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?T0(t,xn(e)):T0(t,xn({r:e,c:r||0}))}function BG(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function UG(){return{SheetNames:[],Sheets:{}}}function VG(t,e,r,n){var i=1;if(!r)for(;i<=65535&&t.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||r;for(++i;i<=65535&&t.SheetNames.indexOf(r=a+i)!=-1;++i);}if(x8(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function zG(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=BG(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function HG(t,e){return t.z=e,t}function C8(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function qG(t,e,r){return C8(t,"#"+e,r)}function $G(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function WG(t,e,r,n){for(var i=typeof e!="string"?e:Bn(e),s=typeof e=="string"?e:ki(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=T0(t,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=r,n&&(l.D=!0))}return t}var fa={encode_col:Es,encode_row:ss,encode_cell:xn,encode_range:ki,decode_col:Aw,decode_row:Sw,split_cell:az,decode_cell:qi,decode_range:Ta,format_cell:Tl,sheet_add_aoa:CC,sheet_add_json:k8,sheet_add_dom:b8,aoa_to_sheet:Ef,json_to_sheet:OG,table_to_sheet:S8,table_to_book:mG,sheet_to_csv:Fw,sheet_to_txt:T8,sheet_to_json:Z1,sheet_to_html:_8,sheet_to_formulae:MG,sheet_to_row_object_array:Z1,sheet_get_cell:T0,book_new:UG,book_append_sheet:VG,book_set_sheet_visibility:zG,cell_set_number_format:HG,cell_set_hyperlink:C8,cell_set_internal_link:qG,cell_add_comment:$G,sheet_set_array_formula:WG,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},I8={exports:{}};(function(t,e){(function(r,n){n()})(Hf,function(){function r(u,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function n(u,h,d){var p=new XMLHttpRequest;p.open("GET",u),p.responseType="blob",p.onload=function(){l(p.response,h,d)},p.onerror=function(){console.error("could not download file")},p.send()}function i(u){var h=new XMLHttpRequest;h.open("HEAD",u,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function s(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(h)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Hf=="object"&&Hf.global===Hf?Hf:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(u,h,d){var p=a.URL||a.webkitURL,f=document.createElement("a");h=h||u.name||"download",f.download=h,f.rel="noopener",typeof u=="string"?(f.href=u,f.origin===location.origin?s(f):i(f.href)?n(u,h,d):s(f,f.target="_blank")):(f.href=p.createObjectURL(u),setTimeout(function(){p.revokeObjectURL(f.href)},4e4),setTimeout(function(){s(f)},0))}:"msSaveOrOpenBlob"in navigator?function(u,h,d){if(h=h||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(r(u,d),h);else if(i(u))n(u,h,d);else{var p=document.createElement("a");p.href=u,p.target="_blank",setTimeout(function(){s(p)})}}:function(u,h,d,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof u=="string")return n(u,h,d);var f=u.type==="application/octet-stream",v=/constructor/i.test(a.HTMLElement)||a.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||f&&v||o)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var k=b.result;k=y?k:k.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=k:location=k,p=null},b.readAsDataURL(u)}else{var w=a.URL||a.webkitURL,S=w.createObjectURL(u);p?p.location=S:location.href=S,p=null,setTimeout(function(){w.revokeObjectURL(S)},4e4)}});a.saveAs=l.saveAs=l,t.exports=l})})(I8);var KG=I8.exports;const GG=t=>{const{project:e,hierarchies:r,zones:n,assignments:i,doors:s,standard:a,generatedAt:o}=t,l=new ir({orientation:"portrait",unit:"mm",format:"a4"});l.setFontSize(20),l.text("Master Key System",105,20,{align:"center"}),l.setFontSize(12),l.text("Keying Schedule & Documentation",105,30,{align:"center"}),l.setFontSize(10),l.text(`Generated: ${new Date(o).toLocaleString()}`,105,40,{align:"center"}),l.text(`Standard: ${a.name} ${a.version}`,105,47,{align:"center"}),l.setFontSize(14),l.text("Project Information",14,60),l.setFontSize(10);const u=[["Standard",a.name],["Version",a.version],["Region",a.region],["Pin Configuration",`${a.pinConfig.pins} pins, ${a.pinConfig.depths} depths, MACS ${a.pinConfig.macs}`],["Max Differs Available",a.maxDiffers.toLocaleString()],["Differs Used",(e.differsUsed||0).toLocaleString()],["Keying Approach",e.keyingApproach||"zone_based"]];rd(l,{startY:65,head:[["Property","Value"]],body:u,theme:"grid",headStyles:{fillColor:[79,70,229]}}),l.addPage(),l.setFontSize(14),l.text("Hierarchy Structure",14,20);const h=r.sort((v,y)=>v.order-y.order).map((v,y)=>[y+1,v.keySymbol,v.levelName,v.levelType,v.description||"-"]);if(rd(l,{startY:25,head:[["#","Symbol","Level Name","Type","Description"]],body:h,theme:"striped",headStyles:{fillColor:[79,70,229]}}),n.length>0){l.addPage(),l.setFontSize(14),l.text("Zones Defined",14,20);const v=n.map((y,b)=>[b+1,y.zoneName,y.doorCount||0,y.color]);rd(l,{startY:25,head:[["#","Zone Name","Door Count","Color"]],body:v,theme:"striped",headStyles:{fillColor:[79,70,229]}})}l.addPage(),l.setFontSize(14),l.text("Door Assignments",14,20);const d=i.map((v,y)=>{const b=s.find(S=>S.id===v.doorId),w=r.find(S=>S.hierarchyId===v.hierarchyId);return[y+1,(b==null?void 0:b.mark)||"Unknown",(b==null?void 0:b.use)||"-",(b==null?void 0:b.zone)||"-",(b==null?void 0:b.level)||"-",(w==null?void 0:w.keySymbol)||"-",(w==null?void 0:w.levelName)||"-"]});rd(l,{startY:25,head:[["#","Door Mark","Use","Zone","Floor","Key Symbol","Key Level"]],body:d,theme:"striped",headStyles:{fillColor:[79,70,229]},styles:{fontSize:8}}),l.addPage(),l.setFontSize(14),l.text("Statistics Summary",14,20);const p=[["Total Doors",s.length],["Assigned Doors",i.length],["Unassigned Doors",s.length-i.length],["Hierarchy Levels",r.length],["Zones Defined",n.length],["Differs Used",e.differsUsed||0],["Differs Remaining",(e.maxDiffersAvailable||0)-(e.differsUsed||0)]];rd(l,{startY:25,head:[["Metric","Value"]],body:p,theme:"grid",headStyles:{fillColor:[79,70,229]}});const f=`master_key_schedule_${new Date().getTime()}.pdf`;return l.save(f),f},YG=t=>{const{project:e,hierarchies:r,zones:n,assignments:i,doors:s,standard:a,generatedAt:o}=t,l=fa.book_new(),u=[["Master Key System - Project Information"],[""],["Generated",new Date(o).toLocaleString()],["Standard",a.name],["Version",a.version],["Region",a.region],["Pin Configuration",`${a.pinConfig.pins} pins, ${a.pinConfig.depths} depths, MACS ${a.pinConfig.macs}`],["Max Differs Available",a.maxDiffers],["Differs Used",e.differsUsed||0],["Differs Remaining",(e.maxDiffersAvailable||0)-(e.differsUsed||0)],["Keying Approach",e.keyingApproach||"zone_based"]],h=fa.aoa_to_sheet(u);fa.book_append_sheet(l,h,"Project Info");const d=[["#","Key Symbol","Level Name","Level Type","Order","Description"],...r.sort((q,K)=>q.order-K.order).map((q,K)=>[K+1,q.keySymbol,q.levelName,q.levelType,q.order,q.description||"-"])],p=fa.aoa_to_sheet(d);if(fa.book_append_sheet(l,p,"Hierarchy"),n.length>0){const q=[["#","Zone Name","Door Count","Color"],...n.map((E,C)=>[C+1,E.zoneName,E.doorCount||0,E.color])],K=fa.aoa_to_sheet(q);fa.book_append_sheet(l,K,"Zones")}const f=[["#","Door Mark","Use","Zone","Floor","Key Symbol","Key Level","Hardware","Fire Rating","ADA"],...i.map((q,K)=>{const E=s.find(A=>A.id===q.doorId),C=r.find(A=>A.hierarchyId===q.hierarchyId);return[K+1,(E==null?void 0:E.mark)||"Unknown",(E==null?void 0:E.use)||"-",(E==null?void 0:E.zone)||"-",(E==null?void 0:E.level)||"-",(C==null?void 0:C.keySymbol)||"-",(C==null?void 0:C.levelName)||"-",(E==null?void 0:E.hardware)||"-",(E==null?void 0:E.fireRating)||"-",E!=null&&E.ada?"Yes":"No"]})],v=fa.aoa_to_sheet(f);fa.book_append_sheet(l,v,"Keying Schedule");const y={};i.forEach(q=>{const K=r.find(E=>E.hierarchyId===q.hierarchyId);K&&(y[K.keySymbol]||(y[K.keySymbol]={symbol:K.keySymbol,level:K.levelName,count:0}),y[K.keySymbol].count++)});const b=[["Key Symbol","Key Level","Quantity Needed"],...Object.values(y).map(q=>[q.symbol,q.level,q.count])],w=fa.aoa_to_sheet(b);fa.book_append_sheet(l,w,"Cutting List");const S=[["Master Key System - Statistics"],[""],["Metric","Value"],["Total Doors",s.length],["Assigned Doors",i.length],["Unassigned Doors",s.length-i.length],["Hierarchy Levels",r.length],["Zones Defined",n.length],["Differs Used",e.differsUsed||0],["Differs Remaining",(e.maxDiffersAvailable||0)-(e.differsUsed||0)],["Utilization %",`${((e.differsUsed||0)/(e.maxDiffersAvailable||1)*100).toFixed(2)}%`]],k=fa.aoa_to_sheet(S);fa.book_append_sheet(l,k,"Statistics");const R=`master_key_schedule_${new Date().getTime()}.xlsx`;return RG(l,R),R},XG=t=>{const{hierarchies:e,assignments:r,doors:n}=t,s=[["Door Mark","Use","Zone","Floor","Hardware","Fire Rating","ADA","Key Symbol","Key Level"],...r.map(l=>{const u=n.find(d=>d.id===l.doorId),h=e.find(d=>d.hierarchyId===l.hierarchyId);return[(u==null?void 0:u.mark)||"Unknown",(u==null?void 0:u.use)||"-",(u==null?void 0:u.zone)||"-",(u==null?void 0:u.level)||"-",(u==null?void 0:u.hardware)||"-",(u==null?void 0:u.fireRating)||"-",u!=null&&u.ada?"Yes":"No",(h==null?void 0:h.keySymbol)||"-",(h==null?void 0:h.levelName)||"-"]})].map(l=>l.join(",")).join(`
`),a=new Blob([s],{type:"text/csv;charset=utf-8;"}),o=`master_key_schedule_${new Date().getTime()}.csv`;return KG.saveAs(a,o),o},QG=(t,e)=>{try{let r;switch(t){case"pdf":r=GG(e);break;case"excel":r=YG(e);break;case"csv":r=XG(e);break;default:throw new Error(`Unsupported export format: ${t}`)}return{success:!0,filename:r}}catch(r){return console.error("Export failed:",r),{success:!1,error:r.message}}},ZG=({onNext:t,onBack:e,projectDoors:r=[],onExportComplete:n,showNotice:i})=>{const{mkProject:s,hierarchies:a,zones:o,assignments:l,generateExport:u}=Go(),[h,d]=we.useState("pdf"),[p,f]=we.useState(!1),[v,y]=we.useState(!1),b=[{id:"pdf",name:"PDF Document",description:"Professional keying schedule with visual hierarchy tree",icon:ev,color:"red",features:["Complete keying schedule","Visual hierarchy tree","Door assignments table","Standards compliance report"]},{id:"excel",name:"Excel Workbook",description:"Spreadsheet with multiple sheets for analysis",icon:C1,color:"green",features:["Keying schedule sheet","Cutting list sheet","Statistics sheet","Sortable and filterable"]},{id:"csv",name:"CSV Files",description:"Simple text files for custom processing",icon:X9,color:"blue",features:["Keying schedule CSV","Door assignments CSV","Hierarchy levels CSV","Compatible with all systems"]}],w=b.find(k=>k.id===h),S=async()=>{f(!0),y(!1);try{const k=await u(h,{includeHierarchy:!0,includeZones:!0,includeCuttingList:!0},r);console.log("Export data generated:",k);const R=QG(h,k);if(R.success)y(!0),n&&n(),setTimeout(async()=>{i&&await i("Export Successful",`${w.name} generated successfully!

File: ${R.filename}

Your keying schedule has been downloaded and is ready to share with locksmiths and facility managers.`)},500);else throw new Error(R.error||"Export failed")}catch(k){console.error("Export error:",k),i&&await i("Export Failed",`Export failed: ${k.message}

Please ensure all required packages are installed:
npm install jspdf jspdf-autotable xlsx file-saver`)}finally{f(!1)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-emerald-100 rounded-full mb-4",children:c.jsx(t3,{className:"w-8 h-8 text-emerald-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Export & Download"}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Generate professional keying schedules and cutting lists in your preferred format."})]}),c.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-2 border-emerald-300 rounded-xl p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center",children:c.jsx(Au,{className:"w-8 h-8 text-emerald-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-emerald-900 mb-1",children:"Master Key System Complete!"}),c.jsx("p",{className:"text-sm text-emerald-700",children:"You've successfully designed a professional master key system. Download your keying schedule below."})]})]})}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Project Summary"}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Doors"}),c.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.length})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Hierarchy Levels"}),c.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:a.length})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Zones Defined"}),c.jsx("div",{className:"text-2xl font-bold text-purple-600",children:o.length})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:"Select Export Format"}),c.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:b.map(k=>{const R=k.icon,q=h===k.id;return c.jsxs("button",{onClick:()=>d(k.id),className:`p-6 border-2 rounded-xl text-left transition-all ${q?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300 bg-white"}`,children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${q?"bg-indigo-100":"bg-gray-100"}`,children:c.jsx(R,{size:24,className:q?"text-indigo-600":"text-gray-600"})}),q&&c.jsx(Wa,{className:"text-indigo-600",size:20})]}),c.jsx("div",{className:"font-bold text-gray-900 mb-1",children:k.name}),c.jsx("div",{className:"text-sm text-gray-600 mb-3",children:k.description}),c.jsx("ul",{className:"text-xs text-gray-500 space-y-1",children:k.features.map((K,E)=>c.jsxs("li",{children:[" ",K]},E))})]},k.id)})})]}),w&&c.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex-shrink-0",children:su.createElement(w.icon,{size:24,className:"text-indigo-600"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"font-semibold text-indigo-900 mb-1",children:["Ready to export as ",w.name]}),c.jsxs("div",{className:"text-sm text-indigo-700",children:["Your export will include: ",w.features.join(", ")]})]})]})}),c.jsx("div",{className:"flex justify-center pt-4",children:c.jsx("button",{onClick:S,disabled:p,className:"px-8 py-4 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-3 shadow-lg text-lg font-semibold",children:p?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-6 h-6 border-3 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):c.jsxs(c.Fragment,{children:[c.jsx(t3,{size:24}),"Generate & Download"]})})}),v&&c.jsx("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-6",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Wa,{className:"flex-shrink-0 text-emerald-600 mt-0.5",size:24}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-emerald-900 mb-2",children:"Export Generated Successfully!"}),c.jsxs("div",{className:"text-sm text-emerald-700 mb-3",children:["Your ",w.name.toLowerCase()," has been downloaded and is ready to share."]}),c.jsx("div",{className:"text-xs text-emerald-600",children:"Check your Downloads folder for the exported file."})]})]})}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"What's Next:"})," Share your keying schedule with locksmiths and facility managers. You can always return to edit your master key system design."]})})]})},JG=({projectDoors:t=[],projectName:e="Untitled Project",projectStandard:r="ANSI_BHMA",showNotice:n,showConfirm:i})=>{const[s,a]=we.useState(0),[o,l]=we.useState(!1),{mkProject:u,loading:h,updateStandard:d}=Go();su.useEffect(()=>{u&&r&&u.standard!==r&&d(r)},[r]);const p=[{id:0,title:"Introduction",shortLabel:"INTRO",component:xM},{id:1,title:"Hierarchy Planning",shortLabel:"PLAN",component:yM},{id:2,title:"Hierarchy Setup",shortLabel:"SETUP",component:SM},{id:3,title:"Zone Definition",shortLabel:"ZONES",component:AM},{id:4,title:"Door Assignment",shortLabel:"ASSIGN",component:LM},{id:5,title:"Validation",shortLabel:"VALIDATE",component:PM},{id:6,title:"Export",shortLabel:"EXPORT",component:ZG}],f=p[s],v=f.component,y=()=>{s<p.length-1&&a(s+1)},b=()=>{s>0&&a(s-1)},w=S=>{a(S)};return h?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):u?c.jsxs("div",{className:"animate-slideUp",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Master Key System Design"}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Step ",s+1," of ",p.length,": ",f.title]})]}),c.jsxs("div",{className:"text-sm text-gray-500",children:["Project: ",c.jsx("span",{className:"font-semibold text-gray-900",children:e})]})]}),c.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:c.jsxs("div",{className:"max-w-5xl mx-auto",children:[c.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:p.map((S,k)=>{const R=s===k&&!o,q=s>k||s===6&&o;return c.jsx("div",{className:"flex flex-col items-center",children:c.jsx("button",{onClick:()=>w(k),className:`text-xs font-bold uppercase tracking-wide transition-colors mb-2 ${R?"text-purple-700":q?"text-emerald-700":"text-gray-400"}`,children:S.shortLabel})},S.id)})}),c.jsx("div",{className:"relative h-2 bg-gray-300 rounded-full overflow-hidden mb-3",children:c.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-purple-600 to-indigo-600 transition-all duration-700 ease-out",style:{width:`${o?100:s*100/7+(s===6?14:0)}%`},children:c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-25",style:{animation:"shimmer 2s infinite",transform:"translateX(-100%)"}})})}),c.jsx("div",{className:"relative -mt-7 mb-4",children:c.jsx("div",{className:"grid grid-cols-7 gap-2",children:p.map((S,k)=>{const R=s===k&&!o,q=s>k||s===6&&o;return c.jsx("div",{className:"flex justify-center",children:c.jsx("button",{onClick:()=>w(k),className:"focus:outline-none",children:c.jsx("div",{className:`w-8 h-8 rounded-full border-3 flex items-center justify-center transition-all duration-300 ${R?"bg-purple-600 border-white shadow-lg scale-110":q?"bg-emerald-500 border-white shadow-md":"bg-white border-gray-300 hover:border-purple-400 hover:scale-105"}`,children:q&&c.jsx(eu,{size:16,strokeWidth:3,className:"text-white"})})})},S.id)})})}),c.jsx("div",{className:"text-center",children:c.jsxs("span",{className:"inline-block px-4 py-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white text-xs font-bold rounded-full shadow-md",children:[o?100:Math.round(s*100/7+(s===6?14:0)),"% Complete"]})})]})}),c.jsx("style",{jsx:!0,children:`
          @keyframes progress-animation {
            0% {
              background-position: 0 0;
            }
            100% {
              background-position: 40px 0;
            }
          }

          @keyframes shimmer {
            0% {
              transform: translateX(-100%);
            }
            100% {
              transform: translateX(200%);
            }
          }

          @keyframes bounce-slow {
            0%, 100% {
              transform: translateY(0);
            }
            50% {
              transform: translateY(-4px);
            }
          }

          @keyframes pulse-slow {
            0%, 100% {
              opacity: 1;
            }
            50% {
              opacity: 0.8;
            }
          }

          .animate-bounce-slow {
            animation: bounce-slow 2s infinite;
          }

          .animate-pulse-slow {
            animation: pulse-slow 2s infinite;
          }
        `})]}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:c.jsx(v,{onNext:y,onBack:b,projectDoors:t,projectName:e,showNotice:n,showConfirm:i,onExportComplete:()=>l(!0)})}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("button",{onClick:b,disabled:s===0,className:`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ${s===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c.jsx(L9,{size:20}),"Back"]}),c.jsxs("div",{className:"text-sm text-gray-500",children:["Step ",s+1," / ",p.length]}),c.jsxs("button",{onClick:y,disabled:s===p.length-1,className:`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ${s===p.length-1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 shadow-md"}`,children:[s===p.length-1?"Finish":"Continue",c.jsx(P9,{size:20})]})]})]}):c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[c.jsx("div",{className:"text-gray-400 mb-4",children:c.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Master Key System Not Enabled"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please enable the Master Key System in Step 0 (Project Setup) to access this wizard."}),c.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Refresh Page"})]})},Rx={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BETA_ACCESS_CODE:"INSTAspecbeta@2025",VITE_FB_API_KEY:"AIzaSyCrUZenvUEPbAsZ2zXh27SuZAoBArvos5E",VITE_FB_APP_ID:"1:847536725528:web:0d10c3c1d405a292482d6d",VITE_FB_AUTH_DOMAIN:"instaspec-dev.firebaseapp.com",VITE_FB_MESSAGING_SENDER_ID:"847536725528",VITE_FB_PROJECT_ID:"instaspec-dev",VITE_FB_STORAGE_BUCKET:"instaspec-dev.firebasestorage.app"};var om={};const lm=t=>typeof t!="string"?!1:t.toLowerCase()==="on"||t.toLowerCase()==="true",eY=()=>{try{if(typeof import.meta<"u"&&(Rx!=null&&Rx.VITE_STANDARDS_TRACE))return lm(void 0)}catch{}if(typeof process<"u"&&(om!=null&&om.STANDARDS_TRACE))return lm(om.STANDARDS_TRACE);if(typeof window<"u"&&window.STANDARDS_TRACE)return lm(window.STANDARDS_TRACE);if(typeof localStorage<"u"){const t=localStorage.getItem("STANDARDS_TRACE");if(t)return lm(t)}return!1},L8=eY(),tY=t=>{L8&&typeof console<"u"&&console.debug&&console.debug("[STANDARDS_TRACE]",t)},Dw=(t,e,r={})=>{tY({subject:t||"unknown",stage:e,detail:r,at:new Date().toISOString()})},Mw=(t,e,r={})=>{Dw(t||"set-unknown",e,r)},rY=(t,e=Mw)=>{if(!t)return[];const r=[],n=t.doors||[];return(t.sets||[]).forEach(i=>{const s=n.filter(u=>(i.doors||[]).includes(u.id)),a=s.some(u=>u.fire>0),o=s.some(u=>(u.use||"").toLowerCase().includes("stair")||(u.use||"").toLowerCase().includes("exit")),l=s.some(u=>u.material==="Glass");if(a){if(!(i.items||[]).some(d=>d.category==="Closers")){const d=`Fire Rated set ${i.id} is missing a Door Closer.`;r.push({set:i.id,type:"critical",msg:d}),e(i.id,"validation",{rule:"fire-door-closer",msg:d})}if(!(i.items||[]).some(d=>d.category==="Seals")){const d=`Fire Rated set ${i.id} requires perimeter/drop seals.`;r.push({set:i.id,type:"critical",msg:d}),e(i.id,"validation",{rule:"fire-door-seal",msg:d})}}if(o&&!(i.items||[]).some(h=>(h.type||"").toLowerCase().includes("panic"))){const h=`Stair/Exit set ${i.id} is missing Panic Hardware.`;r.push({set:i.id,type:"critical",msg:h}),e(i.id,"validation",{rule:"egress-panic",msg:h})}if(l&&!(i.items||[]).some(h=>(h.type||"").toLowerCase().includes("patch")||(h.type||"").toLowerCase().includes("rail"))){const h=`Glass door set ${i.id} might need Patch Fittings or Rails.`;r.push({set:i.id,type:"warning",msg:h}),e(i.id,"validation",{rule:"glass-support",msg:h})}}),r},oh=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,5),P8=(t=[],e="D-001")=>{const r=new Set(t.map(s=>s.mark));if(!r.has(e))return e;let n=2,i=`${e}-${String(n).padStart(2,"0")}`;for(;r.has(i);)n+=1,i=`${e}-${String(n).padStart(2,"0")}`;return i},iu={"Commercial Office":{usages:["Office / Passage","Meeting Room","Director Cabin","Corridor / Circulation","Stairwell / Exit","Restroom","Storage / Service","Server / IT","Main Entrance","Fire Door (Cross-Corridor)","Prayer / Quiet Room"]},"Hospital / Healthcare":{usages:["Patient Room","Operating Theatre","Consultation / Exam","Corridor / Circulation","Stairwell / Exit","Restroom","Clean / Dirty Utility","Main Entrance","Radiation Protection","Prayer / Quiet Room"]},"Education / School":{usages:["Classroom","Assembly / Hall","Staff Office","Corridor / Circulation","Stairwell / Exit","Restroom","Storage / Service","Main Entrance","Gymnasium","Music Room"]},"Airport / Transport":{usages:["Terminal Entry","Security / Checkpoint","Boarding Gate","Corridor / Circulation","Stairwell / Exit","Restroom","Staff Only / Service","Baggage / Logistics","Prayer / Quiet Room"]},"Hospitality / Hotel":{usages:["Guest Room Entry","Connecting Door","Ballroom / Assembly","Kitchen / Service","Corridor / Circulation","Stairwell / Exit","Restroom","Back of House","Main Entrance"]},Residential:{usages:["Unit Entrance (Fire Rated)","Bedroom / Internal","Bathroom / Privacy","Kitchen","Balcony / External","Common Corridor","Stairwell / Exit","Service / Utility"]}},mA={"Meeting Room":40,"Director Cabin":40,"Conference Room":45,"Patient Room":35,"Consultation / Exam":40,Classroom:35,"Music Room":50,"Prayer / Quiet Room":45,"Server / IT":40,"Guest Room Entry":42,"Unit Entrance (Fire Rated)":35,Restroom:30},j8=["Timber","Metal","Glass","Aluminum"],nY=["Single","Double"],iY=["LH","RH","LHR","RHR"],R8=Array.from(new Set(Object.values(iu).flatMap(t=>t.usages)));R8.length*j8.length*nY.length*iY.length;const sc=[{id:"profiles",value:1216,metric:"Doorset Profiles",subtext:"Ready-to-configure templates for fast project setup.",icon:K0},{id:"scenarios",value:R8.length,metric:"Use Case Scenarios",subtext:"Preset rules based on building function.",icon:C9},{id:"facilities",value:Object.keys(iu).length,metric:"Facility Types",subtext:"Office, Healthcare, Education, Airport, Hotel, Residential.",icon:I9},{id:"materials",value:j8.length,metric:"Door Materials",subtext:"Timber, Metal, Glass, Aluminum.",icon:k1},{id:"exports",value:3,metric:"Export Formats",subtext:"BIM, PDF, XLSX deliverables in one click.",icon:C1},{id:"standards",value:2,metric:"Global Standards",subtext:"EN and ANSI compliance support.",icon:D9},{id:"dashboard",value:1,metric:"Project Dashboard",subtext:"All projects in one clean, central view.",icon:I1}],sY=[{label:"Live Insights",title:"Compliance Pulse",body:"Provides real-time checks against commonly referenced safety and accessibility criteria. Specify with confidence."},{label:"Adaptive Visuals",title:"Material Intelligence",body:"Switch between door materials from Timber  Glass  Aluminum and see hardware visuals transform in real-time."}],cm=[{title:"Project Setup",body:"Define facility, fire-rating, and jurisdiction rules -- the rule engine tunes itself instantly."},{title:"Door Schedule",body:"Capture dimensions, STC, ADA, and access logic. Additional locations auto-adjust quantity."},{title:"Hardware Sets",body:"Door Hardware Layout Preview shows hinges, closers, maglocks, and panic trim before specification."},{title:"Validation & Review",body:"Compliance Pulse verifies life-safety, then exports BIM, PDF, and Excel packages in one click."}],Ju=["Project Setup","Door Schedule","Hardware Sets","Validation & Review","Master Key Design"],gA=["SETUP","SCHEDULE","PREVIEW","GENERATE","MASTER KEY"],aY=[{title:"Compliance Support",body:"Helps align hardware with common safety standards.",icon:L1},{title:"Hardware Library",body:"Central library of locks, hinges, closers, and access devices.",icon:rM},{title:"Team Alignment",body:"Keeps door, hardware, and export data in sync.",icon:Ld}],um="Notice: All auto-generated door hardware content must be reviewed and approved by a qualified subject-matter expert before it is shared or issued. Proceed only if you acknowledge this requirement.",F8="Code Check: Main entrance fire rating must be verified per local code based on building height and occupancy.",Bm=["1BHK","2BHK","3BHK"],J1={"1BHK":0,"2BHK":4,"3BHK":0},xA={"1BHK":{bedrooms:1,bathrooms:1},"2BHK":{bedrooms:2,bathrooms:2},"3BHK":{bedrooms:3,bathrooms:3}},D8=(t="")=>String(t).toLowerCase().includes("main entrance"),oY=({doors:t=[]})=>t.some(r=>D8(r.use)&&Number(r.fire)===0)?c.jsxs("div",{className:"mb-3 rounded-lg border border-blue-200 bg-blue-50 px-4 py-3 text-sm text-blue-800 flex items-center gap-3",children:[c.jsx(Jy,{size:16}),c.jsx("span",{children:F8})]}):null,lY={Residential:{floors:4,unitsPerFloor:4,unitMix:{...J1}},"Education / School":{floors:3,classroomsPerFloor:6,toiletsPerFloor:2,hasAdminLabs:!0},"Commercial Office":{floors:6,openLayout:!0,meetingRooms:4,hasServiceAreas:!0},"Airport / Transport":{floors:2,concourses:1,gatesPerConcourse:6,securityZones:2,hasInternationalZone:!0},"Hospital / Healthcare":{floors:5,patientRoomsPerFloor:12,operatingRooms:4,icuRoomsPerFloor:2,hasEmergencyDept:!0},"Hospitality / Hotel":{floors:10,roomsPerFloor:18,suitesPerFloor:2,hasBallroom:!0,hasServiceZones:!0}},k0=()=>JSON.parse(JSON.stringify(lY)),cY=(t,e)=>{const r=k0(),n=(t==null?void 0:t.instantInputs)||{};return{...r[e],...n[e]||{}}},uo={Hanging:["Hinges"],Securing:["Locks","Cylinders","Electrified"],Controlling:["Closers","Stops","Handles"],Protecting:["Seals","Accessories","Protecting"]},Fx=30,yA=t=>{if(typeof structuredClone=="function")return structuredClone(t);try{return JSON.parse(JSON.stringify(t))}catch{return t}},uY=[{id:"Hanging",label:"Hanging",description:"Hinges, pivots and fittings",categories:uo.Hanging,accent:"from-amber-500 to-orange-500",hint:"Edge & hinge zone"},{id:"Securing",label:"Securing",description:"Locks, bolts and electrified hardware",categories:uo.Securing,accent:"from-sky-500 to-indigo-500",hint:"Center lockface"},{id:"Controlling",label:"Controlling",description:"Closers, holders and motion control hardware",categories:uo.Controlling,accent:"from-emerald-500 to-emerald-700",hint:"Top frame / closer"},{id:"Protecting",label:"Protecting",description:"Kick plates, seals and protective accessories",categories:uo.Protecting,accent:"from-slate-500 to-slate-700",hint:"Bottom/kick zone"}],hY=(t=[])=>t.reduce((e,r)=>{var s;const n=eg[r];if(!((s=n==null?void 0:n.types)!=null&&s.length))return e;const i=n.types.map(a=>({...a,category:r,csi:n.csi||"",description:(a.styles||[]).slice(0,2).join(", ")}));return e.concat(i)},[]),fY=t=>["Hinges"].includes(t)?"Hanging the Door":["Locks","Cylinders","Electrified"].includes(t)?"Securing the Door":["Closers","Stops","Handles","Auto Operator"].includes(t)?"Controlling the Door":["Seals","Accessories","Protecting","Kick Plate","Threshold"].includes(t)?"Protecting the Door":"Other Hardware",eg={Hinges:{csi:"08 71 10",types:[{name:"Butt Hinge",styles:["Ball Bearing","Plain Bearing","Concealed Bearing","Spring Hinge"]},{name:"Concealed Hinge",styles:["3D Adjustable","Spring Concealed"]},{name:"Pivot Set",styles:["Offset Pivot","Center Hung","Intermediate Pivot"]},{name:"Continuous Hinge",styles:["Geared Aluminum","Pin & Barrel Stainless"]},{name:"Patch Fitting",styles:["Top Patch","Bottom Patch","Overpanel Patch"]}]},Locks:{csi:"08 71 50",types:[{name:"Mortise Lock",styles:["Sashlock","Deadlock","Latch","Bathroom Lock","Nightlatch"],ansiStyles:["Passage","Privacy","Classroom","Storeroom","Entrance","Office","Apartment","Dormitory","Institutional"],enStyles:["Sashlock","Deadlock","Latch","Bathroom Lock","Nightlatch"]},{name:"Cylindrical Lock",styles:["Leverset","Knobset","Interconnected"]},{name:"Hotel Lock",styles:["RFID Mortise","Mobile Key"]},{name:"Panic Bar",styles:["Rim Type","Surface Vertical Rod","Concealed Vertical Rod","Mortise Type"]},{name:"Electric Strike",styles:["Fail Safe","Fail Secure"]},{name:"Magnetic Lock",styles:["Surface Mount","Shear Lock","Recessed"]},{name:"Patch Lock",styles:["Corner Patch Lock","Center Patch Lock"]}]},Closers:{csi:"08 71 60",types:[{name:"Overhead Closer",styles:["Rack & Pinion","Cam Action","Slide Arm"]},{name:"Concealed Closer",styles:["Overhead Concealed","Chain Concealed"]},{name:"Floor Spring",styles:["Double Action","Single Action"]},{name:"Auto Operator",styles:["Electro-Mechanical","Electro-Hydraulic"]}]},Handles:{csi:"08 71 70",types:[{name:"Lever Handle",styles:["Return to Door","Straight","Flat Bar","Anti-Ligature"]},{name:"Pull Handle",styles:["D-Pull","T-Bar","Offset Pull","Flush Pull"]},{name:"Push Plate",styles:["Square Corner","Radius Corner"]},{name:"Panic Push Pull Handle",styles:["L-Shaped","Tube Pull"]}]},Stops:{csi:"08 71 80",types:[{name:"Door Stop",styles:["Floor Mounted Dome","Wall Mounted Projection","Skirting Mounted"]},{name:"Overhead Stop",styles:["Surface Mounted","Concealed"]}]},Seals:{csi:"08 71 90",types:[{name:"Drop Seal",styles:["Mortised","Surface Mounted"]},{name:"Perimeter Seal",styles:["Batwing","Bulb","Brush"]},{name:"Acoustic Perimeter Seal",styles:["STC-40 Compression","STC-45 Magnetic"]},{name:"Automatic Door Bottom",styles:["Acoustic Drop","Medium Duty"]},{name:"Vision/Louver Gasket",styles:["High Density","Intumescent Acoustic"]},{name:"Threshold",styles:["Low Profile (ADA)","Saddle","Panic Type"]}]},Cylinders:{csi:"08 71 50",types:[{name:"Cylinder",styles:["Euro Profile","Oval Profile","Rim Cylinder","Mortise Cylinder"]}]},Accessories:{csi:"08 71 00",types:[{name:"Kick Plate",styles:["Satin Stainless","Polished Stainless","Brass"]},{name:"Flush Bolt",styles:["Lever Action","Slide Action"]},{name:"Door Viewer",styles:["Wide Angle","Electronic"]}]},Protecting:{csi:"08 79 00",types:[{name:"Signage",styles:["Disc","Rectangular"]}]},Electrified:{csi:"08 74 00",types:[{name:"Magnetic Lock",styles:["Fail-Safe","Fail-Secure"],requiresRelease:!0},{name:"Electric Strike",styles:["Fail-Safe","Fail-Secure"],requiresTrim:!0},{name:"Electromechanical Mortise",styles:["Fail-Safe","Fail-Secure"],requiresTrim:!0},{name:"Door Contact",styles:["Surface","Recessed"]},{name:"Push Button",styles:["Request-to-Exit","Emergency"]},{name:"Power Supply",styles:["12/24V Auto","Dedicated"]},{name:"Card Reader",styles:["Surface Mount","Flush Mount"]}]}},dY=uY.map(t=>({...t,items:hY(t.categories)})),hm={Timber:["Mortise Lock","Cylindrical Lock","Hotel Lock","Panic Bar","Electric Strike","Magnetic Lock"],Metal:["Mortise Lock","Panic Bar","Electric Strike","Magnetic Lock"],Aluminum:["Mortise Lock","Electric Strike","Magnetic Lock"],Glass:["Patch Lock","Panic Bar","Magnetic Lock"],default:["Mortise Lock","Cylindrical Lock","Hotel Lock","Panic Bar","Electric Strike","Magnetic Lock"]},pY=(t=[])=>{if(!t.length)return hm.default;let e=null;return t.forEach(r=>{const n=hm[r]||hm.default;e===null?e=new Set(n):e=new Set([...e].filter(i=>n.includes(i)))}),!e||e.size===0?hm.default:Array.from(e)},fm={Timber:["Magnetic Lock","Electric Strike","Card Reader"],Metal:["Magnetic Lock","Electric Strike","Electromechanical Mortise","Card Reader"],Aluminum:["Magnetic Lock","Electric Strike","Card Reader"],Glass:["Magnetic Lock","Card Reader"],default:["Magnetic Lock","Electric Strike","Card Reader"]},mY=(t=[])=>{if(!t.length)return fm.default;let e=null;return t.forEach(r=>{const n=fm[r]||fm.default;e===null?e=new Set(n):e=new Set([...e].filter(i=>n.includes(i)))}),!e||e.size===0?fm.default:Array.from(e)},gY=["stair","exit","corridor","assembly","classroom","retail","auditorium","public","egress"],xY=["stair","exit","assembly","auditorium","arena","stadium","retail","public"],yY=["main entrance","security","server","it","data","lab","lobby","reception","turnstile","access","checkpoint","guest room","guestroom","hotel"],vY=[{id:"Mechanical",label:"Mechanical Package",desc:"Mortise/cylindrical locks, manual key control, free-egress lever trim."},{id:"Electromechanical",label:"Electromechanical Package",desc:"Electric strikes or maglocks with power, REX, and monitoring accessories."}],Qg=(t={})=>{const e=(t.use||"").toLowerCase(),r=(t.notes||"").toLowerCase(),n=yY.some(s=>e.includes(s)),i=["card","access","controlled","turnstile"].some(s=>r.includes(s));return n||i?"Electromechanical":"Mechanical"},rc=t=>{const e=(t.additionalLocations||[]).map(n=>({zone:(n==null?void 0:n.zone)||t.zone||"",level:(n==null?void 0:n.level)||t.level||"",roomName:(n==null?void 0:n.roomName)||t.roomName||""})),r=1+e.length;return{...t,use:t.use||t.roomName||"",hardwareIntent:t.hardwareIntent||Qg(t),additionalLocations:e,qty:r,thicknessAuto:t.thicknessAuto!==!1,weightAuto:t.weightAuto!==!1,ada:t.ada===!0}},wY=(t={})=>{const e={};let r=0;return Bm.forEach(n=>{const i=Math.max(0,parseInt(t==null?void 0:t[n],10)||0);e[n]=i,r+=i}),r>0?e:{...J1}},_Y=(t,e)=>{const r=wY(t.unitMix),n=Object.values(r).reduce((s,a)=>s+a,0),i=Math.max(1,t.unitsPerFloor||n||1);return[{id:"default",label:"Typical Floor",floors:e,unitsPerFloor:Math.max(n,i),unitMix:r}]},bY={Residential:(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=_Y(t,e),n=[],i=r[0],s=i.unitMix||{},a=i.label.trim(),o=a&&a.toLowerCase()!=="typical floor"?`${a} - `:"";if(Object.entries(s).filter(([,h])=>h>0).forEach(([h,d])=>{const p=xA[h]||xA["2BHK"],f=d*i.floors;if(f<=0)return;const v=`Auto-generated residential ${a||h}`;n.push({roomName:`${o}${h} Entry`,use:"Unit Entrance (Fire Rated)",qty:f,width:950,height:2150,material:"Timber",fire:60,notes:v}),n.push({roomName:`${o}${h} Bedroom`,use:"Bedroom / Internal",qty:f*p.bedrooms,width:900,height:2100,notes:v}),n.push({roomName:`${o}${h} Bathroom`,use:"Bathroom / Privacy",qty:f*p.bathrooms,width:800,height:2100,material:"Timber",notes:`Privacy lockset recommended for ${h}`})}),n.length===0)return[];const l=Math.max(1,e*2),u=Math.max(1,e);return n.push({roomName:"Corridor Core",use:"Corridor / Circulation",qty:l,width:1e3,height:2150,fire:0,ada:!0,notes:"Auto-generated corridor door"}),n.push({roomName:"Restroom Core",use:"Restroom",qty:l,width:900,height:2100,ada:!0,notes:"Auto-generated restroom core"}),n.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:l,width:1e3,height:2150,material:"Metal",fire:60,notes:"Stair door (code guidance)"}),n.push({roomName:"Service / Utility",use:"Service / Utility",qty:u,width:900,height:2100,material:"Metal",fire:30,notes:"Service doors on each floor stack"}),n},"Education / School":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(0,parseInt(t.classroomsPerFloor,10)||0),n=Math.max(0,parseInt(t.toiletsPerFloor,10)||0),i=!!t.hasAdminLabs,s=[];return r>0&&s.push({roomName:"Classroom",use:"Classroom",qty:e*r,width:950,height:2150,material:"Timber"}),n>0&&s.push({roomName:"Restroom",use:"Restroom",qty:e*n,width:900,height:2100,material:"Timber",notes:"Privacy indicator set"}),i&&s.push({roomName:"Admin / Lab",use:"Admin / Lab",qty:e*2,width:950,height:2150,material:"Metal",fire:30}),s.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:Math.max(1,e)*2,width:1e3,height:2150,material:"Metal",fire:60}),s},"Commercial Office":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(0,parseInt(t.meetingRooms,10)||0),n=!!t.openLayout,i=!!t.hasServiceAreas,s=[];return s.push({roomName:"Main Lobby",use:"Main Entrance",qty:2,width:1100,height:2400,material:"Glass",notes:"Paired glass entry"}),s.push({roomName:"Open Office",use:"Office / Passage",qty:e*(n?2:4),width:950,height:2150}),r>0&&s.push({roomName:"Meeting Room",use:"Meeting Room",qty:e*r,width:1e3,height:2150,stc:40,notes:"Acoustic seals recommended"}),s.push({roomName:"Restroom",use:"Restroom",qty:e*2,width:900,height:2100}),i&&s.push({roomName:"Service / BOH",use:"Service / Utility",qty:e,width:950,height:2150,material:"Metal",fire:30}),s},"Hospital / Healthcare":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(0,parseInt(t.patientRoomsPerFloor,10)||0),n=Math.max(0,parseInt(t.icuRoomsPerFloor,10)||0),i=Math.max(0,parseInt(t.operatingRooms,10)||0),s=!!t.hasEmergencyDept,a=[];return r>0&&a.push({roomName:"Patient Room",use:"Patient Room",qty:e*r,width:950,height:2150,material:"Timber",notes:"Auto-generated for patient rooms"}),n>0&&a.push({roomName:"ICU / Isolation",use:"Patient Room",qty:e*n,width:1e3,height:2150,material:"Metal",notes:"Isolation-ready leaf with seals",stc:40}),i>0&&a.push({roomName:"Operating Theatre",use:"Operating Theatre",qty:Math.max(1,i),width:1200,height:2400,material:"Metal",fire:60,hardwareIntent:"Electromechanical",notes:"Pairs with automatic operator"}),a.push({roomName:"Consult / Exam",use:"Consultation / Exam",qty:e*2,width:1e3,height:2150}),a.push({roomName:"Clean Utility",use:"Clean / Dirty Utility",qty:e,width:950,height:2150,material:"Metal",fire:30}),a.push({roomName:"Restroom",use:"Restroom",qty:e*2,width:900,height:2100}),a.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:e*2,width:1e3,height:2150,material:"Metal",fire:90}),s&&a.push({roomName:"Emergency Entry",use:"Main Entrance",qty:2,width:1200,height:2400,material:"Glass",hardwareIntent:"Electromechanical",notes:"Dedicated emergency access"}),a},"Airport / Transport":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(1,parseInt(t.concourses,10)||1),n=Math.max(1,parseInt(t.gatesPerConcourse,10)||1),i=Math.max(1,parseInt(t.securityZones,10)||1),s=!!t.hasInternationalZone,a=r*n,o=[];return o.push({roomName:"Terminal Entry",use:"Terminal Entry",qty:Math.max(2,r*2),width:1200,height:2600,material:"Glass",notes:"Airside / landside entry pairs"}),o.push({roomName:"Security Checkpoint",use:"Security / Checkpoint",qty:i*r,width:1100,height:2400,material:"Metal",hardwareIntent:"Electromechanical",notes:"Controlled access openings"}),o.push({roomName:"Boarding Gate",use:"Boarding Gate",qty:a,width:1100,height:2400,material:"Glass"}),o.push({roomName:"Restroom",use:"Restroom",qty:e*4,width:900,height:2100}),o.push({roomName:"Staff / Service",use:"Staff Only / Service",qty:r*2,width:1e3,height:2150,material:"Metal",fire:30}),o.push({roomName:"Baggage / Logistics",use:"Baggage / Logistics",qty:r,width:1100,height:2400,material:"Metal",fire:60}),o.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:e*2,width:1e3,height:2150,material:"Metal",fire:90}),s&&o.push({roomName:"International Zone",use:"Corridor / Circulation",qty:r,width:1100,height:2400,hardwareIntent:"Electromechanical",notes:"Immigration / customs separation"}),o},"Hospitality / Hotel":(t={})=>{const e=Math.max(1,parseInt(t.floors,10)||1),r=Math.max(0,parseInt(t.roomsPerFloor,10)||0),n=Math.max(0,parseInt(t.suitesPerFloor,10)||0),i=!!t.hasBallroom,s=!!t.hasServiceZones,a=[];return r>0&&a.push({roomName:"Guest Room Entry",use:"Guest Room Entry",qty:e*r,width:950,height:2150,material:"Timber",fire:30,ada:!0,hardwareIntent:"Electromechanical",stc:42,notes:"Smart-lock ready leaf"}),n>0&&a.push({roomName:"Suite Connector",use:"Connecting Door",qty:e*n,width:900,height:2150,material:"Timber",notes:"Privacy bolt + closer"}),a.push({roomName:"Corridor",use:"Corridor / Circulation",qty:e*2,width:1e3,height:2150,fire:60,ada:!0}),a.push({roomName:"Restroom Core",use:"Restroom",qty:e*2,width:900,height:2100,ada:!0}),a.push({roomName:"Stair / Exit",use:"Stairwell / Exit",qty:e*2,width:1e3,height:2150,material:"Metal",fire:60}),i&&a.push({roomName:"Ballroom",use:"Ballroom / Assembly",qty:4,width:1200,height:2600,config:"Double",notes:"Paired entry with panic hardware"}),s&&a.push({roomName:"Back of House",use:"Back of House",qty:e,width:1e3,height:2150,material:"Metal",fire:30}),a}},SY=(t,e=(t==null?void 0:t.doors)||[])=>{if(!t)return[];const r=bY[t.type];if(!r)return[];const n=k0(),s=(t.instantInputs||n)[t.type]||n[t.type]||{},a=r(s,t).filter(u=>u&&u.qty>0);let o=[...e];const l=[];return a.forEach((u,h)=>{const d=u.markBase||`D-${String(o.length+h+1).padStart(3,"0")}`,p=P8(o,d),f=Math.max(1,u.qty||1),v=Array.from({length:f-1},(w,S)=>({zone:u.zone||"Tower A",level:u.level||String((h+S)%10+1).padStart(2,"0"),roomName:`${u.roomName||u.use||"Door"} #${S+2}`})),y={id:oh(),mark:p,zone:u.zone||"Tower A",level:u.level||String(h%10+1).padStart(2,"0"),roomName:u.roomName||u.use||`Generated Door ${h+1}`,width:u.width||900,height:u.height||2100,thickness:u.thickness||45,weight:u.weight||45,fire:u.fire||0,use:u.use||u.roomName||"",material:u.material||"Timber",config:u.config||"Single",handing:u.handing||"RH",stc:u.stc||35,ada:u.ada||!1,notes:u.notes||"",hardwareIntent:u.hardwareIntent||Qg(u),additionalLocations:v},b=rc(y);l.push(b),o=[...o,b]}),l},AY=t=>{const e=(t.use||"").toLowerCase(),r=t.material||"Timber",n=gY.some(l=>e.includes(l)),i=xY.some(l=>e.includes(l)),s=parseInt(t.fire,10)>0,a=t.hardwareIntent||Qg(t),o={material:r,isEscapeRoute:n,requiresPanic:i,isFireRated:s,requiresFailSafe:n||s,hardwareIntent:a};return Dw(t.id||t.mark||"door-unknown","classifyDoor",{use:t.use,fire:t.fire,result:o}),o},vA=(t=[])=>{if(!t.length)return{materials:["Timber"],isEscapeRoute:!1,requiresPanic:!1,isFireRated:!1,requiresFailSafe:!1,requiresADA:!1};const e=t.map(AY),r=Array.from(new Set(e.map(n=>n.hardwareIntent||"Mechanical")));return{materials:Array.from(new Set(e.map(n=>n.material))),isEscapeRoute:e.some(n=>n.isEscapeRoute),requiresPanic:e.some(n=>n.requiresPanic),isFireRated:e.some(n=>n.isFireRated),requiresFailSafe:e.some(n=>n.requiresFailSafe),requiresADA:t.some(n=>n.ada),packageIntent:r.includes("Electromechanical")?"Electromechanical":"Mechanical"}},EY=(t,e)=>{const r=t.name||"Preview Door",n=e.materials[0]||"Timber",i=e.isFireRated;return{id:`preview-${t.id}`,mark:t.id,zone:"Preview",level:"00",roomName:r,qty:1,width:900,height:2100,weight:50,fire:i?60:0,use:r,material:n,config:"Single",thickness:45,thicknessAuto:!0,visionPanel:!1,handing:"RH",stc:35,ada:e.requiresADA,hardwareIntent:e.packageIntent,additionalLocations:[]}},NY=(t,e)=>{const r=[],n=t.items.filter(d=>d.category==="Locks"),i=t.items.filter(d=>d.category==="Electrified"),s=t.items.filter(d=>d.category==="Handles"),a=n.filter(d=>(d.type||"").toLowerCase().includes("panic")),o=[...n,...i].filter(d=>(d.type||"").toLowerCase().includes("magnetic")),l=[...n,...i].filter(d=>(d.type||"").toLowerCase().includes("electric strike")),h=n.some(d=>(d.type||"").toLowerCase().includes("hotel lock"))||o.length>0||i.some(d=>!tg.includes(d.type));if(e.requiresPanic&&a.length===0&&r.push("Panic hardware is required for this escape route door (EN 1125 / NFPA 101)."),a.length>0&&s.length>0&&r.push("Remove lever/pull trim on the egress side when panic hardware is used to maintain single-motion exit."),a.length>0&&n.some(d=>!d.type.toLowerCase().includes("panic"))&&r.push("Panic hardware should be the sole locking mechanism on the egress side."),o.length>0){const d=tg.filter(y=>!i.some(b=>(b.type||"").toLowerCase()===y.toLowerCase())),f=i.some(y=>y.autoTag==="card-reader-kit"||(y.type||"").toLowerCase()==="card reader")?d.filter(y=>y.toLowerCase()!=="push button"):d;f.length>0&&r.push(`Magnetic locks require a release package (REX sensor, emergency button, fire alarm interface). Missing: ${f.join(", ")}.`);const v=o.some(y=>(y.style||"").toLowerCase().includes("fail-secure"));e.requiresFailSafe&&v&&r.push("Escape route doors must use fail-safe magnetic locks.")}return l.length>0&&!n.some(d=>{const p=(d.type||"").toLowerCase();return p.includes("mortise")||p.includes("cylindrical")||p.includes("panic")})&&r.push("Electric strikes must pair with a mortise/cylindrical latch or panic device that provides the latch bolt."),e.packageIntent==="Electromechanical"&&!h&&r.push("Door was scheduled as an electrified package but no electrified locking has been added."),e.packageIntent==="Mechanical"&&h&&r.push("Door was scheduled as a mechanical package; confirm electrified hardware is intentional."),e.requiresADA&&(a.length>0||s.some(p=>(p.type||"").toLowerCase().includes("lever"))||r.push("ADA-labeled doors require lever hardware or panic devices that allow single-hand operation.")),e.materials.includes("Glass")&&(s.some(p=>(p.type||"").toLowerCase().includes("lever"))&&(n.some(f=>(f.type||"").toLowerCase()==="patch lock"&&(f.style||"").toLowerCase().includes("center"))||r.push("Glass doors with lever handles must pair with a center patch lock that supports lever trim.")),e.requiresPanic&&(s.some(f=>(f.type||"").toLowerCase().includes("panic push pull"))||r.push("Glass escape doors require an L-shaped panic push/pull handle instead of a traditional panic bar."))),r},_v={ANSI:["630 (Satin Stainless)","629 (Polished Stainless)","626 (Satin Chrome)","605 (Polished Brass)","613 (Oil Rubbed Bronze)","622 (Matte Black)"],EN:["SSS (Satin Stainless)","PSS (Polished Stainless)","SCP (Satin Chrome Plate)","PB (Polished Brass)","RAL 9005 (Black)","RAL 9016 (White)"]},TY={Cylinders:{ANSI:["SNP (Satin Nickel Plate)","Natural Brass","PB (Polished Brass)","622 (Matte Black)"],EN:["SNP (Satin Nickel Plate)","Natural Brass","PB (Polished Brass)","RAL 9005 (Black)"]}},kY={Hinges:"H",Locks:"L",Closers:"D",Handles:"H",Stops:"S",Seals:"GS",Cylinders:"C",Accessories:"A",Protecting:"P",Electrified:"E"},Ow=(t,e="ANSI")=>{const r=TY[t];return r&&(r[e]||r.default)||null},Bw=(t="ANSI")=>{const e=_v[t]||_v.ANSI;return(e==null?void 0:e[0])||"630 (Satin Stainless)"},wA=(t,e="ANSI")=>{const r=Ow(t,e);return r!=null&&r.length?r[0]:Bw(e)},CY=(t,e)=>{var i;const r=eg[t],n=r==null?void 0:r.types.find(s=>s.name===e);return((i=n==null?void 0:n.styles)==null?void 0:i[0])||""},Kh=(t=[],e)=>{const r=kY[e]||"X";let n=1;const i=new Set(t.map(a=>a.ref));let s=`${r}${String(n).padStart(2,"0")}`;for(;i.has(s);)n+=1,s=`${r}${String(n).padStart(2,"0")}`;return s},M8=[{type:"Door Contact",style:"Surface",spec:"Status monitor contact",qty:"1",autoTag:"maglock-door-contact"},{type:"Push Button",style:"Request-to-Exit",spec:"Illuminated REX button",qty:"1",autoTag:"maglock-push-button"},{type:"Power Supply",style:"12/24V Auto",spec:"Fail-safe rated supply",qty:"1",autoTag:"maglock-power-supply"}],lh={type:"Card Reader",style:"Surface Mount",spec:"Access control card reader",qty:"1"},tg=M8.map(t=>t.type),O8=40,IY=t=>t==="Double"?"double leaf":"single leaf",Dx=813,_A=38,LY=(t=[],e="ANSI",r={})=>{const n=Bw(e),i=t.some(v=>(v.type||"").toLowerCase().includes("magnetic lock")),s=t.some(v=>(v.type||"").toLowerCase().includes("electric strike")),a=!i&&!s;let o=t.filter(v=>(v.type||"").toLowerCase()!=="maglock release package");a&&(o=o.filter(v=>v.autoTag!=="maglock-kit"&&v.autoTag!=="card-reader-kit"));const l=new Set(r.removedAutoTags||[]),u=o.find(v=>v.autoTag==="card-reader-kit"),h=!!u;u&&(u.type,lh.type);const p=(i||s)&&!l.has("card-reader-kit")&&!h,f=h||p;return i&&M8.forEach(v=>{var w;const y=v.autoTag||"maglock-kit";if(l.has("maglock-kit")||l.has(y)||(w=v.type)!=null&&w.toLowerCase().includes("push button")&&f)return;o.some(S=>S.category==="Electrified"&&S.type===v.type)||o.push({category:"Electrified",ref:Kh(o,"Electrified"),type:v.type,style:v.style||CY("Electrified",v.type),spec:v.spec,qty:v.qty,finish:n,autoTag:y})}),p&&o.push({category:"Electrified",ref:Kh(o,"Electrified"),type:lh.type,style:lh.style,spec:lh.spec,qty:lh.qty,finish:n,autoTag:"card-reader-kit"}),o},B8=[...tg,lh.type],PY=(t=[])=>{let e=!1;return t.filter(r=>r.category!=="Hinges"?!0:e?!1:(e=!0,!0))},jY=(t=[],e={})=>{const{needsAcoustic:r=!1,isDouble:n=!1,hasVision:i=!1,hasLouver:s=!1}=e;let a=[...t];if(!r)return a.filter(u=>u.autoTag!=="acoustic-package");const o=Bw(e.standard||"ANSI"),l=(u,h)=>{a.some(p=>p.autoTag==="acoustic-package"&&p.spec===u)||a.push(h)};return l("AP-40",{category:"Seals",ref:Kh(a,"Seals"),type:"Acoustic Perimeter Seal",style:"STC-40 Compression",spec:"AP-40 perimeter seal set",qty:n?"2 Sets":"1 Set",finish:o,autoTag:"acoustic-package",acousticContribution:"STC-rated"}),l("ADB-45",{category:"Seals",ref:Kh(a,"Seals"),type:"Automatic Door Bottom",style:"Acoustic Drop",spec:"ADB-45 mortised automatic bottom",qty:n?"2":"1",finish:o,autoTag:"acoustic-package",acousticContribution:"STC-rated"}),(i||s)&&l("GKT-40",{category:"Seals",ref:Kh(a,"Seals"),type:"Vision/Louver Gasket",style:"High Density",spec:"GKT-40 acoustic glazing/louver kit",qty:"1 Set",finish:o,autoTag:"acoustic-package",acousticContribution:"STC-rated"}),a},ch=(t=[],e=[])=>{const r=t.some(o=>parseInt(o.stc,10)>=O8),n=t.some(o=>o.config==="Double"),i=t.some(o=>o.visionPanel),s=e.some(o=>(o.type||"").toLowerCase().includes("louver")),a={needsAcoustic:r,isDouble:n,hasVision:i,hasLouver:s};return Mw("context","computeSetContext",{doors:t.map(o=>o.id||o.mark||"door-unknown"),...a}),a},RY=(t=[],e="ANSI")=>t.map(r=>{const n=Ow(r.category,e);return n!=null&&n.length&&!n.includes(r.finish)?{...r,finish:n[0]}:r}),uh=(t=[],e="ANSI",r={})=>{const n=LY(t,e),i=PY(n),s=jY(i,{...r,standard:e}),a=RY(s,e);return Mw(r.setId||"set-unknown","sanitizeHardwareItems",{standard:e,autoTags:a.filter(o=>o.autoTag).map(o=>o.autoTag),total:a.length}),a},Uw=()=>{const[t,e]=we.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return we.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia("(prefers-reduced-motion: reduce)"),n=()=>e(r.matches);return r.addEventListener?r.addEventListener("change",n):r.addListener(n),()=>{r.removeEventListener?r.removeEventListener("change",n):r.removeListener(n)}},[]),t},FY="rounded-3xl border border-white/10 bg-gradient-to-b from-slate-900/80 to-slate-900/30 text-white shadow-lg shadow-black/30 backdrop-blur-sm",bA=({value:t=0,duration:e=1200,className:r=""})=>{const n=Uw(),[i,s]=we.useState(n?t:0);return we.useEffect(()=>{if(n){s(t);return}let a,o;const l=u=>{a||(a=u);const h=Math.min((u-a)/e,1),d=1-Math.pow(1-h,3);s(Math.round(d*t)),h<1&&(o=requestAnimationFrame(l))};return o=requestAnimationFrame(l),()=>o&&cancelAnimationFrame(o)},[t,e,n]),c.jsx("span",{className:r,children:i.toLocaleString()})},fd=({children:t,className:e="",delay:r=0,ariaLabel:n,paddingClass:i="p-5"})=>{const s=Uw(),[a,o]=we.useState(s);we.useEffect(()=>{if(s){o(!0);return}o(!1);const u=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(u)},[s,r]);const l=s?"":a?"opacity-100 translate-y-0":"opacity-0 translate-y-3";return c.jsx("div",{"aria-label":n,className:`${FY} ${i} ${l} transition-all duration-500 ease-out motion-safe:hover:-translate-y-1 motion-safe:hover:shadow-[0_25px_60px_rgba(7,89,133,0.35)] ${e}`,children:t})},DY=({steps:t=[]})=>{const e=Uw(),[r,n]=we.useState(e);return we.useEffect(()=>{if(e){n(!0);return}const i=window.setTimeout(()=>n(!0),120);return()=>window.clearTimeout(i)},[e]),c.jsxs("div",{className:"relative mt-2",children:[c.jsx("div",{className:"absolute left-5 sm:left-6 top-2 bottom-2 w-px bg-white/15 origin-top rounded-full",style:{transform:r?"scaleY(1)":"scaleY(0)",transition:e?"none":"transform 900ms ease 150ms"},"aria-hidden":"true"}),c.jsx("div",{className:"space-y-6",children:t.map((i,s)=>{const a=i.stepNumber??s+1,o=!!i.isActive;return c.jsxs("div",{className:"relative pl-12 sm:pl-16 group",children:[c.jsx("div",{className:`absolute left-5 sm:left-6 top-6 bottom-6 w-px rounded-full pointer-events-none transition-opacity duration-300 ${o?"opacity-90":"opacity-0 group-hover:opacity-80"}`,style:{backgroundColor:"rgba(56,189,248,0.65)"},"aria-hidden":"true"}),c.jsx("div",{className:"absolute left-0 sm:left-1 top-1/2 -translate-y-1/2",children:c.jsx("div",{className:`flex items-center justify-center w-9 h-9 sm:w-10 sm:h-10 rounded-full border-2 text-sm sm:text-base font-semibold transition-all duration-300 shadow-lg ${o?"bg-sky-400 text-slate-950 border-sky-200 shadow-sky-500/40":"bg-slate-950 text-white border-white/25 group-hover:bg-sky-300 group-hover:text-slate-950 group-hover:border-sky-200"}`,children:a})}),c.jsx(fd,{delay:s*120,ariaLabel:`${a} ${i.title}`,className:`pl-4 sm:pl-6 overflow-visible transition-transform duration-300 group-hover:scale-[1.02] ${o?"ring-1 ring-sky-400/50 shadow-sky-500/40":""}`,children:c.jsxs("div",{className:"space-y-1","aria-current":o?"step":void 0,children:[c.jsx("div",{className:"text-white font-semibold text-lg",children:i.title}),c.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:i.body})]})})]},i.title)})})]})},MY=(t=[])=>t.some(r=>r.category==="Electrified"&&!tg.includes(r.type)||r.category==="Locks"&&(r.type||"").toLowerCase().includes("magnetic"))?"Electromechanical":"Mechanical",OY=t=>{if(!t)return t;const e=(t.doors||[]).map(rc),r=(t.sets||[]).map(s=>{const a=e.filter(h=>(s.doors||[]).includes(h.id)),o=s.items||[],l={...ch(a,o),removedAutoTags:s.removedAutoTags||[],setId:s.id},u=uh(o,t.standard,l);return{...s,intent:s.intent||MY(u),items:u,removedAutoTags:s.removedAutoTags||[]}}),n=k0(),i={...n,...t.instantInputs||{}};return Object.keys(n).forEach(s=>{i[s]={...n[s],...i[s]||{}}}),{...t,doors:e,sets:r,instantInputs:i,instantSchedulingEnabled:!!t.instantSchedulingEnabled,mkSystemEnabled:t.mkSystemEnabled!==void 0?!!t.mkSystemEnabled:!1}},SA=({category:t})=>t==="Hinges"?c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("rect",{x:"8",y:"2",width:"8",height:"20",rx:"1"}),c.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}):t==="Locks"?c.jsx(MT,{size:16}):t==="Closers"?c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("rect",{x:"2",y:"4",width:"10",height:"6"}),c.jsx("path",{d:"M12 7h8v10"})]}):t==="Handles"?c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M4 10h10a2 2 0 0 1 2 2v6"}),c.jsx("circle",{cx:"4",cy:"12",r:"2"})]}):t==="Stops"?c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M12 22a8 8 0 0 0 0-16 8 8 0 0 0 0 16z"}),c.jsx("circle",{cx:"12",cy:"14",r:"3"})]}):t==="Seals"?c.jsx(BT,{size:16}):t==="Protecting"||t==="Accessories"?c.jsx(Bg,{size:16}):c.jsx(k1,{size:16}),BY=({options:t,value:e,onChange:r,placeholder:n})=>{const[i,s]=we.useState(!1),[a,o]=we.useState(""),l=we.useRef(null);we.useEffect(()=>{const h=d=>{l.current&&!l.current.contains(d.target)&&s(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const u=t.filter(h=>h.toLowerCase().includes(a.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:l,children:[c.jsxs("div",{className:"w-full p-2.5 border border-gray-300 rounded-md bg-white flex items-center justify-between cursor-pointer hover:border-indigo-500 transition-colors",onClick:()=>s(!i),children:[c.jsx("span",{className:e?"text-gray-900":"text-gray-400",children:e||n}),c.jsx(Id,{size:16,className:`text-gray-500 transition-transform ${i?"rotate-180":""}`})]}),i&&c.jsxs("div",{className:"absolute top-full left-0 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-60 flex flex-col z-50",children:[c.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white rounded-t-md",children:c.jsxs("div",{className:"relative",children:[c.jsx(OT,{size:14,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400"}),c.jsx("input",{type:"text",className:"w-full pl-8 p-1.5 text-sm border border-gray-200 rounded bg-gray-50 focus:outline-none focus:border-indigo-500",placeholder:"Search...",value:a,onChange:h=>o(h.target.value),autoFocus:!0})]})}),c.jsx("div",{className:"overflow-y-auto flex-1",children:u.length>0?u.map(h=>c.jsx("div",{className:`px-4 py-2 text-sm cursor-pointer hover:bg-indigo-50 ${e===h?"bg-indigo-50 text-indigo-600 font-medium":"text-gray-700"}`,onClick:()=>{r(h),s(!1),o("")},children:h},h)):c.jsxs("div",{className:"px-4 py-2 text-sm text-indigo-600 cursor-pointer hover:bg-indigo-50 font-medium border-t border-gray-100",onClick:()=>{r(a),s(!1),o("")},children:['Use "',a,'"']})})]})]})},AA=({x:t,side:e})=>{const r="#000";return e==="left"?c.jsx("path",{d:`M ${t+10} 40 H ${t} V 60 H ${t+10}`,fill:"none",stroke:r,strokeWidth:"2"}):c.jsx("path",{d:`M ${t-10} 40 H ${t} V 60 H ${t-10}`,fill:"none",stroke:r,strokeWidth:"2"})},UY=()=>c.jsx("text",{x:"50",y:"20",textAnchor:"middle",fontSize:"10",fill:"#333",fontWeight:"bold",children:"INSIDE"}),VY=({mode:t})=>{const e="white",r="black";let n=null,i=null;return t==="LH"?(n=c.jsx("rect",{x:"12",y:"38",width:"60",height:"6",transform:"rotate(-15 12 41)",fill:e,stroke:r,strokeWidth:"2"}),i=c.jsx("circle",{cx:"70",cy:"30",r:"3",fill:"red"})):t==="RH"?(n=c.jsx("rect",{x:"28",y:"38",width:"60",height:"6",transform:"rotate(15 88 41)",fill:e,stroke:r,strokeWidth:"2"}),i=c.jsx("circle",{cx:"30",cy:"30",r:"3",fill:"red"})):t==="LHR"?(n=c.jsx("rect",{x:"12",y:"56",width:"60",height:"6",transform:"rotate(15 12 59)",fill:e,stroke:r,strokeWidth:"2"}),i=c.jsx("circle",{cx:"70",cy:"78",r:"3",fill:"red"})):t==="RHR"&&(n=c.jsx("rect",{x:"28",y:"56",width:"60",height:"6",transform:"rotate(-15 88 59)",fill:e,stroke:r,strokeWidth:"2"}),i=c.jsx("circle",{cx:"30",cy:"78",r:"3",fill:"red"})),c.jsxs("g",{children:[c.jsx(UY,{}),c.jsx(AA,{x:10,side:"left"}),c.jsx(AA,{x:90,side:"right"}),n,i]})},zY=({mode:t})=>{const e="white",r="black";let n=null,i=null,s=null;const a=c.jsx("rect",{x:"10",y:"45",width:"80",height:"10",fill:"#e2e8f0"});return t==="ISO 5 (Left)"?(s=c.jsx("circle",{cx:"15",cy:"50",r:"4",fill:"black"}),n=c.jsx("rect",{x:"15",y:"50",width:"8",height:"40",fill:e,stroke:r,rx:"1"}),i=c.jsx("path",{d:"M 55 50 A 40 40 0 0 1 15 90",fill:"none",stroke:"blue",strokeWidth:"1",strokeDasharray:"2,2"})):t==="ISO 6 (Right)"&&(s=c.jsx("circle",{cx:"85",cy:"50",r:"4",fill:"black"}),n=c.jsx("rect",{x:"77",y:"50",width:"8",height:"40",fill:e,stroke:r,rx:"1"}),i=c.jsx("path",{d:"M 45 50 A 40 40 0 0 0 85 90",fill:"none",stroke:"blue",strokeWidth:"1",strokeDasharray:"2,2"})),c.jsxs("g",{children:[a,n,i,s,c.jsx("text",{x:"50",y:"20",textAnchor:"middle",fontSize:"10",fill:"#666",children:"PULL SIDE VIEW"})]})},HY=({value:t,onChange:e,standard:r})=>{const s=r==="EN"?[{id:"LH",label:"ISO 5 (Left)",desc:"Hinges on Left (Pull Side)"},{id:"RH",label:"ISO 6 (Right)",desc:"Hinges on Right (Pull Side)"}]:[{id:"LH",label:"Left Hand (LH)",desc:"Hinges left, opens in"},{id:"RH",label:"Right Hand (RH)",desc:"Hinges right, opens in"},{id:"LHR",label:"Left Hand Reverse (LHR)",desc:"Hinges left, opens out"},{id:"RHR",label:"Right Hand Reverse (RHR)",desc:"Hinges right, opens out"}];return c.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.map(a=>c.jsxs("div",{onClick:()=>e(a.id==="LH"||a.id==="ISO 5 (Left)"?"LH":a.id==="RH"||a.id==="ISO 6 (Right)"?"RH":a.id),className:`border rounded p-2 flex items-center gap-2 cursor-pointer transition-colors ${t===(a.id.includes("Left")?"LH":a.id.includes("Right")?"RH":a.id)?"border-indigo-600 bg-indigo-50 ring-1 ring-indigo-600":"hover:bg-gray-50 border-gray-200"}`,children:[c.jsx("svg",{width:"60",height:"60",viewBox:"0 0 100 100",className:"text-gray-600 shrink-0 bg-white border border-gray-100 rounded",children:r==="EN"?c.jsx(zY,{mode:a.label}):c.jsx(VY,{mode:a.id})}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:`text-xs font-bold ${t===a.id?"text-indigo-700":"text-gray-700"}`,children:a.label}),c.jsx("span",{className:"text-[10px] text-gray-500",children:a.desc})]})]},a.id))})},qY=({door:t,hardwareSet:e})=>{const r=t.config==="Double",n=parseInt(t.fire,10)>0,i=r&&n,s=(t.use||t.roomName||"").toLowerCase().includes("guest room"),a=t.material||"Timber",o=s?"Timber":a,l=o==="Glass",u=o==="Aluminum",h=o==="Metal",d=o==="Timber",p=t.visionPanel;let f="#d6a15c",v="#a9744f",y="#7c4f2f",b="#5b391f",w="#f0c999";l?(f="rgba(224,242,254,0.9)",v="#7dd3fc",y="#94a3b8",b="#475569",w="#bae6fd"):u?(f="#e5e7eb",v="#94a3b8",y="#6b7280",b="#475569",w="#f8fafc"):h&&(f="#d1d5db",v="#9ca3af",y="#4b5563",b="#1f2937",w="#e5e7eb");const S=12,k=r?280:170,R=240,q=12,K=3,E=r?i?0:6:0,C=k+S*2,A=R+60,D=S,N=S,j=D+q,P=N+q,se=k-q*2,ge=R-q,ve=P+K,ye=ge-K*2,he=se-K*2,_e=(se-K*2-E)/2,Ue=N+R+6,Ie="#94a3b8",L="#64748b",O="#cfd6e3",B="#d9dee7",z="#f8fafc",J=(e==null?void 0:e.items)||[],fe=(Ye=J,Tt)=>Ye.some(sn=>`${sn.type||""} ${sn.style||""} ${sn.category||""}`.toLowerCase().includes(Tt)),Se=Ye=>J.filter(Tt=>Tt.category===Ye),Ae=Se("Handles"),Ne=Se("Locks"),Xe=Se("Electrified"),et=Se("Accessories"),ot=Se("Closers"),mt=Se("Stops"),te=Se("Seals"),X=Se("Protecting").filter(Ye=>(Ye.type||"").toLowerCase()==="signage"),me=Se("Hinges"),de=me.map(Ye=>`${Ye.name||""} ${Ye.type||""} ${Ye.style||""}`).join(" ").toLowerCase(),qe=(()=>{var xr;const Ye=de;if(Ye.includes("continuous"))return 0;const Tt=Ye.includes("patch")||Ye.includes("pivot")||l?2:3,sn=parseInt((xr=me[0])==null?void 0:xr.qty,10);if(!sn||sn<=0)return Tt;const br=sn/(r?2:1);return Math.max(Tt,Math.round(br))})(),Ge=fe([...Ae,...Ne],"panic"),st=fe([...Ne,...Xe],"magnetic lock");st||Xe.some(Ye=>!B8.includes(Ye.type));const yt=fe(Xe,"push button"),Ht=fe(Xe,"card reader"),be=fe(Ae,"pull"),tt=fe(Ae,"lever"),ct=fe(Ae,"push"),St=fe(et,"kick plate"),jt=ot.some(Ye=>!`${Ye.type||""} ${Ye.style||""}`.toLowerCase().includes("floor spring")),Rt=ot.some(Ye=>`${Ye.type||""} ${Ye.style||""}`.toLowerCase().includes("floor spring")),Dt=ot.some(Ye=>`${Ye.name||""} ${Ye.type||""} ${Ye.style||""}`.toLowerCase().includes("auto")),Hr=fe(et,"louver"),hr=fe(et,"viewer"),Ke=fe(et.concat(Ne),"flush bolt"),Pt=mt[0],pr=Pt?`${Pt.type||""} ${Pt.style||""}`.toLowerCase():"",Gt=Pt?pr.includes("floor")?"floor":pr.includes("wall")?"wall":"general":null,Ir=!!Pt,Qt=fe(te,"drop")||fe(te,"automatic bottom"),Jt=fe(te,"threshold"),Ur=t.handing||"RH",Wt=({x:Ye,width:Tt,leafHanding:sn,isInactive:br})=>{const xr=sn==="LH",jn=6,Zt=5,zn=xr?Ye+Tt-14:Ye+14,en=ve+ye*.55,an=xr?Ye:Ye+Tt,Nn=xr?Ye+Tt:Ye,Fr=xr?an-10:an+10,Qr=xr,ie=(Gr=>{if(Gr<2)return[ve+ye/2];const Lr=30,qn=ye-Lr-30;return Array.from({length:Gr},(yn,Dr)=>ve+Lr+qn*Dr/(Gr-1))})(qe||3),ee=K+6,ne=xr?Ye-K:Ye+Tt-2,oe=Math.min(Tt*.4,60),le=Math.min(ye*.45,90),De=Ye+Tt/2-oe/2,Te=ve+ye*.2,Re=26,Me=34,Oe=10,ht=Dt?1.2:1,gt=Me*ht,kt=Oe*ht,pt=xr?Ye+6:Ye+Tt-gt-6,Et=ve+4,tr=12,Nr=22,yr=Qr?Math.min(D+k+4,C-tr-2):Math.max(2,D-tr-4),tn=ve+ye*.45-Nr/2,Hn=18,li=32,ci=Qr?Math.min(D+k+6,C-Hn-4):Math.max(4,D-Hn-6),Xn=ve+ye*.28;let on="butt";de.includes("continuous")?on="continuous":de.includes("concealed")?on="concealed":de.includes("pivot")?on="pivot":de.includes("patch")?on="patch":de.includes("butt")&&(on="butt"),!me.length&&l&&(on="patch"),l&&on!=="patch"&&(on="patch"),!l&&on==="patch"&&(on="butt");const Tn=()=>{if(on==="continuous"){const Lr=xr?Ye-1:Ye+Tt-3;return c.jsxs("g",{children:[c.jsx("rect",{x:Lr,y:ve+6,width:"4",height:ye-12,rx:"2",fill:"#cbd4de",stroke:"#7b8596",strokeWidth:"0.8"}),[ve+20,ve+ye/2,ve+ye-20].map((_r,qn)=>c.jsx("circle",{cx:Lr+2,cy:_r,r:"1.5",fill:"#7b8596"},`continuous-screw-${qn}`))]})}if(on==="pivot"){const Lr=xr?Ye-4:Ye+Tt-4,_r=xr?Ye-.5:Ye+Tt-1.5;return c.jsxs("g",{children:[c.jsx("rect",{x:Lr,y:ve-4,width:"8",height:"8",rx:"1",fill:"#cfd4de",stroke:"#6b7280",strokeWidth:"0.8"}),c.jsx("circle",{cx:Lr+4,cy:ve,r:"1.5",fill:"#7b8596"}),c.jsx("rect",{x:Lr,y:ve+ye-4,width:"8",height:"8",rx:"1",fill:"#cfd4de",stroke:"#6b7280",strokeWidth:"0.8"}),c.jsx("circle",{cx:Lr+4,cy:ve+ye,r:"1.5",fill:"#7b8596"}),c.jsx("rect",{x:_r,y:ve+8,width:"2",height:ye-16,fill:"#94a3b8"})]})}return(on==="patch"?[ie[0],ie[ie.length-1]]:ie).map((Lr,_r)=>{if(on==="concealed"){const yn=xr?Ye:Ye+Tt-6;return c.jsx("rect",{x:yn,y:Lr-1,width:"6",height:"12",rx:"1",fill:"#dfe3ec",stroke:"#7b8596",strokeWidth:"0.6"},`concealed-${_r}`)}if(on==="patch"){const yn=xr?Ye-3:Ye+Tt-7;return c.jsx("rect",{x:yn,y:Lr-4,width:"10",height:"16",rx:"2",fill:"#94a3b8",stroke:"#475569",strokeWidth:"0.8"},`patch-${_r}`)}const qn=ne+(ee-6)/2;return c.jsxs("g",{children:[c.jsx("rect",{x:qn,y:Lr-1.5,width:6,height:"13",rx:"2",fill:"#cfd4de",stroke:"#8b93a5",strokeWidth:"0.8"}),[2.5,6.5,10.5].map(yn=>c.jsx("line",{x1:qn,x2:qn+6,y1:Lr-1.5+yn,y2:Lr-1.5+yn,stroke:"#9aa5b6",strokeWidth:"0.6"},`knuckle-line-${_r}-${yn}`))]},`hinge-${_r}`)})};return c.jsxs("g",{children:[u?c.jsxs(c.Fragment,{children:[c.jsx("rect",{x:Ye,y:ve,width:Tt,height:ye,rx:"3",fill:"#cbd5e1",stroke:"#6b7280",strokeWidth:"2"}),c.jsx("rect",{x:Ye+Tt*.1,y:ve+ye*.1,width:Tt*.8,height:ye*.8,rx:"2",fill:"rgba(224,242,254,0.9)",stroke:"#93c5fd",strokeWidth:"1.5"})]}):c.jsx("rect",{x:Ye,y:ve,width:Tt,height:ye,rx:l?4:2,fill:f,stroke:v,strokeWidth:"1.5"}),d&&!u&&[.2,.5,.8].map((Gr,Lr)=>c.jsx("line",{x1:Ye+Tt*Gr,x2:Ye+Tt*Gr,y1:ve+6,y2:ve+ye-6,stroke:"rgba(255,255,255,0.3)",strokeWidth:"1"},`grain-${Lr}`)),!d&&!l&&!u&&c.jsx("rect",{x:Ye+4,y:ve+6,width:Tt-8,height:ye-12,fill:"none",stroke:"rgba(255,255,255,0.25)",strokeWidth:"1"}),l&&c.jsxs(c.Fragment,{children:[c.jsx("rect",{x:Ye,y:ve,width:Tt,height:14,fill:"#cbd5e1",opacity:"0.6"}),c.jsx("rect",{x:Ye,y:ve+ye-14,width:Tt,height:14,fill:"#cbd5e1",opacity:"0.6"})]}),c.jsx("rect",{x:xr?Ye:Ye+Tt-jn,y:ve,width:jn,height:ye,fill:"rgba(0,0,0,0.08)"}),c.jsx("rect",{x:xr?Ye+Tt-Zt:Ye,y:ve,width:Zt,height:ye,fill:w,opacity:"0.35"}),i&&r&&c.jsx("rect",{x:xr?Ye+Tt-4:Ye,y:ve+2,width:"4",height:ye-4,fill:"rgba(0,0,0,0.12)",opacity:"0.7"}),p&&!l&&!u&&c.jsx("rect",{x:De,y:Te,width:oe,height:le,fill:"#e0f2fe",stroke:"#64748b",strokeWidth:"1",rx:"2"}),Hr&&!p&&c.jsxs("g",{opacity:"0.65",children:[c.jsx("rect",{x:Ye+10,y:ve+ye-Re-12,width:Tt-20,height:Re,fill:"none",stroke:"#6b7280"}),[5,11,17,23].map(Gr=>c.jsx("line",{x1:Ye+12,x2:Ye+Tt-12,y1:ve+ye-Re-12+Gr,y2:ve+ye-Re-12+Gr,stroke:"#6b7280"},`louver-${Gr}`))]}),br&&r&&c.jsx("rect",{x:xr?Ye+Tt-3:Ye,y:ve,width:"3",height:ye,fill:L,opacity:"0.4"}),r&&Ke&&br&&c.jsxs(c.Fragment,{children:[c.jsx("rect",{x:Nn-2,y:ve+10,width:"4",height:"16",rx:"1",fill:Ie}),c.jsx("rect",{x:Nn-2,y:ve+ye-26,width:"4",height:"16",rx:"1",fill:Ie})]}),!br&&X.length>0&&X.map((Gr,Lr)=>{const _r=(Gr.style||"").toLowerCase(),qn=ve+54+Lr*18,yn=Ye+Tt/2;return _r.includes("disc")?c.jsx("circle",{cx:yn,cy:qn,r:"10.5",fill:"#4b5563",stroke:"#1f2937",strokeWidth:"1",opacity:"0.85"},`sign-disc-${Lr}`):c.jsx("rect",{x:yn-15,y:qn-9,width:"30",height:"18",rx:"2",fill:"#4b5563",stroke:"#1f2937",strokeWidth:"1",opacity:"0.85"},`sign-rect-${Lr}`)}),hr&&!l&&!br&&c.jsx("circle",{cx:Ye+Tt/2,cy:ve+36,r:"3",fill:"#dbeafe",stroke:L,strokeWidth:"0.8"}),Tn(),jt&&!br&&c.jsx("rect",{x:pt,y:Et,width:gt,height:kt,rx:"2",fill:O,stroke:Ie,strokeWidth:"1"}),st&&!br&&c.jsx("rect",{x:xr?Ye+Tt-28:Ye+4,y:ve+6,width:"24",height:"8",rx:"2",fill:"#94a3b8",stroke:"#475569",strokeWidth:"0.8"}),yt&&!br&&c.jsxs("g",{children:[c.jsx("rect",{x:yr,y:tn,width:tr,height:Nr,rx:"3",fill:"#e5e7eb",stroke:"#4b5563",strokeWidth:"0.8"}),c.jsx("circle",{cx:yr+tr/2,cy:tn+Nr/2,r:"4",fill:"#cbd5e1",stroke:"#334155",strokeWidth:"0.8"})]}),Ht&&!br&&c.jsxs("g",{children:[c.jsx("rect",{x:ci,y:Xn,width:Hn,height:li,rx:"3",fill:"#0f172a",stroke:"#1f2937",strokeWidth:"1"}),c.jsx("rect",{x:ci+3,y:Xn+6,width:Hn-6,height:14,rx:"2",fill:"#94a3b8",opacity:"0.9"}),c.jsx("circle",{cx:ci+Hn/2,cy:Xn+li-12,r:"3",fill:"#0ea5e9",stroke:"#1e3a8a",strokeWidth:"0.8"}),c.jsx("circle",{cx:ci+Hn/2,cy:Xn+li-6,r:"1.3",fill:"#22c55e"})]}),Rt&&!br&&c.jsx("rect",{x:xr?Ye+6:Ye+Tt-40,y:ve+ye-10,width:"34",height:"7",rx:"2.5",fill:B,stroke:Ie,strokeWidth:"1"}),Ge?c.jsx("rect",{x:Ye+12,y:en-6,width:Tt-24,height:"12",rx:"3",fill:"#cbd5e1",stroke:L,strokeWidth:"1"}):be?c.jsx("rect",{x:zn-2,y:en-20,width:"4",height:"40",rx:"2",fill:L}):ct?c.jsx("rect",{x:zn-10,y:en-23,width:"20",height:"46",rx:"3",fill:"#e5e7eb",stroke:L,strokeWidth:"1"}):c.jsxs("g",{children:[c.jsx("circle",{cx:zn,cy:en,r:"6",fill:"#e2e8f0",stroke:L,strokeWidth:"1"}),tt?c.jsx("rect",{x:xr?zn-16:zn+4,y:en-2,width:"14",height:"4",rx:"2",fill:L}):c.jsx("circle",{cx:xr?zn-8:zn+8,cy:en,r:"2.5",fill:L})]}),St&&c.jsx("rect",{x:Ye+10,y:ve+ye-30,width:Tt-20,height:"24",fill:"#9ca3af",opacity:"0.7",stroke:L,strokeWidth:"1"}),Qt&&c.jsx("rect",{x:Ye+6,y:ve+ye-5,width:Tt-12,height:"3",rx:"1.5",fill:"#94a3b8"}),Ir&&!br&&(Gt==="floor"?c.jsxs("g",{children:[c.jsx("rect",{x:Fr-4,y:Ue-5,width:"8",height:"2",fill:"#6b7280"}),c.jsx("circle",{cx:Fr,cy:Ue-7,r:"3",fill:"#e2e8f0",stroke:"#6b7280",strokeWidth:"0.8"})]}):c.jsx("rect",{x:Fr-2,y:en-6,width:"4",height:"12",rx:"2",fill:"#cbd5e1",stroke:Ie,strokeWidth:"0.6"}))]})};return c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsxs("svg",{width:r?320:240,height:"320",viewBox:`0 0 ${C} ${A}`,className:"bg-white rounded-lg border border-gray-100 shadow-sm p-2",children:[c.jsx("rect",{x:D,y:N,width:q,height:R,fill:y,stroke:b,strokeWidth:"1"}),c.jsx("rect",{x:D+k-q,y:N,width:q,height:R,fill:y,stroke:b,strokeWidth:"1"}),c.jsx("rect",{x:D,y:N,width:k,height:q,fill:y,stroke:b,strokeWidth:"1"}),c.jsx("rect",{x:j,y:P,width:se,height:ge,fill:z,stroke:b,strokeWidth:"0.5"}),r&&c.jsx("rect",{x:j+K+_e,y:ve,width:E,height:ye,fill:z}),r?c.jsxs(c.Fragment,{children:[c.jsx(Wt,{x:j+K,width:_e,leafHanding:"LH",isInactive:!0}),c.jsx(Wt,{x:j+K+_e+E,width:_e,leafHanding:"RH"})]}):c.jsx(Wt,{x:j+K,width:he,leafHanding:Ur.includes("L")?"LH":"RH"}),Jt&&c.jsx("rect",{x:j+K/2,y:Ue-5,width:se-K,height:"3",rx:"1.5",fill:"#b0bec5"}),c.jsx("line",{x1:D,y1:Ue,x2:D+k,y2:Ue,stroke:"#111827",strokeWidth:"2.5",strokeLinecap:"round"})]}),c.jsxs("div",{className:"mt-2 text-xs text-gray-500 font-medium text-center",children:[t.config," ",t.material," ",c.jsx("br",{}),c.jsx("span",{className:"text-indigo-600 font-bold",children:Ur})," ",p?"+ Lite Kit":"",r&&c.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:i?"Rebated meeting stile (fire-rated pair)":"Flush meeting stile"})]})]})},$Y=({onStart:t,hasProjects:e,isAdmin:r,onOpenAdmin:n,isAdminOpen:i,onCloseAdmin:s,showNotice:a})=>{const{user:o,logout:l}=W0(),[u,h]=we.useState(!1),d=()=>{o?t():h(!0)};return c.jsxs("div",{className:"relative w-full min-h-screen bg-slate-950 text-white overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"absolute inset-0 pointer-events-none","aria-hidden":"true",children:[c.jsx("div",{className:"absolute -top-32 -left-20 w-80 h-80 bg-indigo-600/30 blur-3xl"}),c.jsx("div",{className:"absolute bottom-0 right-0 w-[450px] h-[450px] bg-sky-500/20 blur-[180px]"})]}),c.jsxs("nav",{className:"relative z-20 px-6 md:px-10 lg:px-12 py-5 flex items-center justify-between",children:[c.jsxs("button",{onClick:()=>setView("landing"),className:"flex items-center gap-3 focus:outline-none w-full sm:w-auto text-left",children:[c.jsx("div",{className:"bg-white/10 rounded-2xl p-2.5 backdrop-blur flex items-center justify-center",children:c.jsx(uu,{className:"text-sky-300 w-7 h-7"})}),c.jsxs("div",{className:"flex flex-col leading-tight",children:[c.jsx("span",{className:"text-xl md:text-2xl font-black tracking-tight",children:"InstaSpec"}),c.jsx("span",{className:"text-[11px] md:text-sm font-semibold text-white/70 whitespace-nowrap",children:"Design Faster. Build Smarter."})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[o&&r&&c.jsx("button",{onClick:n,className:"px-4 py-2 rounded-full border border-indigo-300 text-sm font-semibold text-indigo-50 hover:bg-indigo-500/20 transition",children:"Beta Admin"}),c.jsx("button",{onClick:()=>a==null?void 0:a("Coming Soon","Product tour coming soon."),className:"hidden sm:inline-flex px-4 py-2 rounded-full border border-white/10 text-sm font-semibold text-white/80 hover:bg-white/5 transition",children:"Product Tour"}),c.jsx("button",{onClick:d,className:"px-4 md:px-6 py-2 rounded-full bg-indigo-500 hover:bg-indigo-400 text-sm md:text-base font-semibold shadow-lg shadow-indigo-500/40 transition",children:o?e?"Open Dashboard":"Start Configuring":"Beta Login"})]})]}),c.jsx("main",{className:"relative z-10 flex-1 w-full flex flex-col",children:c.jsx("div",{className:"w-full max-w-6xl mx-auto px-6 md:px-12 py-10 md:py-16",children:c.jsxs("div",{className:"grid gap-12 lg:gap-14 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,420px)] items-start",children:[c.jsxs("section",{className:"order-1 lg:col-start-1 lg:row-start-1 space-y-8",children:[c.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/5 text-[10px] sm:text-xs uppercase tracking-[0.35em] text-white/70 whitespace-nowrap",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),c.jsx("span",{className:"tracking-[0.25em]",children:"FOR ARCHITECTS"}),c.jsx("span",{className:"text-white/40",children:"/"}),c.jsx("span",{className:"tracking-[0.25em]",children:"CONSULTANTS"}),c.jsx("span",{className:"text-white/40",children:"/"}),c.jsx("span",{className:"tracking-[0.25em]",children:"SPECIFIERS"})]}),c.jsxs("div",{children:[c.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-black leading-tight text-white",children:["Specify door hardware with confidence in ",c.jsx("span",{className:"text-sky-300",children:"minutes"}),", not days."]}),c.jsx("p",{className:"mt-4 text-lg md:text-xl text-white/70 max-w-2xl",children:"InstaSpec unifies code compliance, hardware libraries, and visual coordination into a single premium workspace. Build ANSI/EN ready schedules, visualize door sets, and export polished specs instantly."})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("button",{onClick:d,className:"px-8 py-4 bg-sky-400 text-slate-950 font-bold rounded-xl shadow-xl shadow-sky-500/30 flex items-center justify-center gap-2 text-lg hover:bg-sky-300 transition",children:["Start Configuring ",c.jsx(Cd,{className:"w-5 h-5"})]}),c.jsx("button",{onClick:()=>a==null?void 0:a("Coming Soon","Demo replay coming soon."),className:"px-8 py-4 border border-white/20 rounded-xl font-semibold text-lg text-white/80 hover:bg-white/10 transition flex items-center justify-center gap-2",children:"View Demo"})]})]}),c.jsxs("aside",{className:"order-2 lg:col-start-2 lg:row-span-2 space-y-10 lg:space-y-12 flex flex-col h-full",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-xs uppercase tracking-[0.4em] text-white/50",children:"Specification Intelligence"}),c.jsx("div",{className:"space-y-4",children:sY.map((p,f)=>c.jsxs(fd,{delay:f*90,ariaLabel:`${p.label} - ${p.title}`,className:"min-h-[160px]",children:[c.jsx("div",{className:"text-xs uppercase tracking-[0.3em] text-white/60",children:p.label}),c.jsx("div",{className:"text-white font-semibold text-2xl mt-2",children:p.title}),c.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:p.body})]},p.title))})]}),c.jsxs("div",{className:"space-y-4 flex-1 flex flex-col",children:[c.jsx("div",{className:"text-xs uppercase tracking-[0.4em] text-white/50",children:"Workflow Snapshot"}),c.jsx(DY,{steps:cm})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-xs uppercase tracking-[0.4em] text-white/50",children:"Why InstaSpec?"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:aY.map((p,f)=>{const v=p.icon||Bg,y=f===2?"sm:col-span-2 sm:max-w-xs sm:mx-auto lg:col-span-1 lg:max-w-none lg:mx-0":"";return c.jsxs(fd,{delay:(f+cm.length)*90,ariaLabel:p.title,paddingClass:"px-4 py-4",className:`min-h-[140px] flex flex-col items-start justify-start gap-3 transition-transform duration-300 overflow-visible ${y}`,children:[c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("div",{className:"p-2 rounded-2xl bg-white/10 text-sky-200 flex-shrink-0",children:c.jsx(v,{className:"w-5 h-5","aria-hidden":"true"})})}),c.jsxs("div",{className:"space-y-1 w-full",children:[c.jsx("div",{className:"text-lg md:text-base font-semibold leading-tight text-white whitespace-normal break-normal hyphens-none",children:p.title}),c.jsx("p",{className:"text-sm md:text-xs text-white/80 leading-snug whitespace-normal break-words",children:p.body})]})]},p.title)})})]})]}),c.jsxs("section",{className:"order-3 lg:col-start-1 lg:row-start-2 space-y-6",children:[c.jsx("div",{children:c.jsx("div",{className:"text-xs uppercase tracking-[0.4em] text-white/50",children:"Highlights"})}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:sc.slice(0,6).map((p,f)=>{const v=p.icon||K0;return c.jsxs(fd,{delay:(f+cm.length)*70,className:"flex flex-col gap-4 min-h-[190px]",ariaLabel:`${p.value} ${p.metric}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 rounded-2xl bg-white/10 text-sky-200",children:c.jsx(v,{className:"w-5 h-5","aria-hidden":"true"})}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-2",children:[c.jsx(bA,{value:Number(p.value),className:"text-3xl font-black leading-none text-white"}),c.jsx("span",{className:"text-sm font-semibold uppercase tracking-wide text-white/70",children:p.metric})]})]}),c.jsx("p",{className:"text-sm text-white/70 leading-relaxed break-normal",children:p.subtext}),c.jsx("div",{className:"mt-auto h-1.5 w-full rounded-full bg-white/10 overflow-hidden",children:c.jsx("div",{className:"h-full w-full bg-gradient-to-r from-sky-400 to-indigo-500"})})]},p.id)})}),(()=>{const p=sc[6],f=p.icon||I1;return c.jsxs(fd,{delay:(sc.length+cm.length)*70,ariaLabel:"1 Project Dashboard -- All projects in one clean, central view",className:"w-full flex flex-col gap-4 min-h-[170px]",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 rounded-2xl bg-white/10 text-sky-200",children:c.jsx(f,{className:"w-5 h-5","aria-hidden":"true"})}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-2",children:[c.jsx(bA,{value:Number(p.value),className:"text-3xl font-black leading-none text-white"}),c.jsx("span",{className:"text-sm font-semibold uppercase tracking-wide text-white/70",children:p.metric})]})]}),c.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:p.subtext}),c.jsx("div",{className:"mt-auto h-1.5 w-full rounded-full bg-white/10 overflow-hidden",children:c.jsx("div",{className:"h-full w-full bg-gradient-to-r from-sky-400 to-indigo-500"})})]})})()]})]})})}),c.jsxs("footer",{className:"relative z-10 w-full border-t border-white/5 bg-slate-950/80 px-6 md:px-10 lg:px-12 py-6 text-center text-sm text-white/60",children:["Engineered with care by"," ",c.jsx("a",{href:"https://techarix.com",target:"_blank",rel:"noreferrer",className:"text-white font-semibold underline underline-offset-2 decoration-white/40 hover:text-sky-300",children:"Techarix"})]}),c.jsx(N9,{isOpen:u,onClose:()=>h(!1),onSuccess:t}),r&&c.jsx(UT,{isOpen:i,onClose:s})]})},WY=({facilityType:t,onNavigate:e})=>{const{mkSystemEnabled:r}=Go();return c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-slideUp",children:[c.jsx(gM,{facilityType:t}),r&&c.jsx("div",{className:"mt-6 flex justify-center",children:c.jsxs("button",{onClick:e,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl hover:from-indigo-700 hover:to-purple-700 font-bold flex items-center justify-center gap-3 shadow-xl text-lg transition-all hover:scale-105",children:[c.jsx(x0,{size:24})," Design the MKS",c.jsx(Cd,{size:24})]})})]})},KY=()=>{var Hs,us,Rl,ja,Ki,Fl,cr,eo,Xo,Ra;const{user:t,logout:e}=W0(),[r,n]=we.useState(!1),[i,s]=we.useState(!1),[a,o]=we.useState(!1),[l,u]=we.useState(!1),h=t?o9(t.email):!1,[d,p]=we.useState(!1),[f,v]=we.useState(""),[y,b]=we.useState(!1),w=we.useRef(null),[S,k]=we.useState("landing"),[R,q]=we.useState(0),[K,E]=we.useState([]),C=we.useRef(!1),[A,D]=we.useState(()=>({past:[],present:yA([]),future:[]})),[N,j]=we.useState(()=>typeof window>"u"?!0:window.matchMedia("(min-width: 1024px)").matches),[P,se]=we.useState(null),[ge,ve]=we.useState(!1),[ye,he]=we.useState("Architect"),[_e,Ue]=we.useState([]),[Ie,L]=we.useState(!1),[O,B]=we.useState(""),[z,J]=we.useState({}),fe=we.useRef({}),[Se,Ae]=we.useState(""),Ne=10,[Xe,et]=we.useState({count:0,limit:Ne}),[ot,mt]=we.useState(null),te=we.useRef(null),[ke,X]=we.useState(!1),[me,de]=we.useState(null),[qe,Ge]=we.useState(!1),st=we.useRef(!1),yt=A.past.length>0,Ht=A.future.length>0,be=we.useCallback(()=>{D(V=>{if(!V.past.length)return V;const pe=V.past[V.past.length-1];C.current=!0,E(pe);const je=V.past.slice(0,-1),Ve=[V.present,...V.future].slice(0,Fx);return{past:je,present:pe,future:Ve}})},[E]),tt=we.useCallback(()=>{D(V=>{if(!V.future.length)return V;const pe=V.future[0];C.current=!0,E(pe);const je=[...V.past,V.present].slice(-Fx),Ve=V.future.slice(1);return{past:je,present:pe,future:Ve}})},[E]),ct=we.useCallback((V={})=>new Promise(pe=>{te.current=pe,mt({title:"Please Confirm",message:"",confirmLabel:V.showCancel===!1?"OK":"Continue",cancelLabel:"Cancel",showCancel:V.showCancel!==!1,tone:"default",...V})}),[]),St=we.useCallback(V=>{te.current&&(te.current(V),te.current=null),mt(null)},[]),jt=we.useCallback(()=>{ct({title:"Project saved locally.",message:"Thanks for helping us test InstaSpec!",showCancel:!1,confirmLabel:"Close"})},[ct]),Rt=we.useCallback((V,pe,je="Close")=>ct({title:V,message:pe,showCancel:!1,confirmLabel:je}),[ct]),Dt=we.useCallback((V,pe,je="Continue",Ve="Cancel")=>ct({title:V,message:pe,showCancel:!0,confirmLabel:je,cancelLabel:Ve}),[ct]),Hr=we.useCallback(V=>{J(pe=>({...pe,[V]:!0})),fe.current[V]&&clearTimeout(fe.current[V]),fe.current[V]=setTimeout(()=>{J(pe=>{const je={...pe};return delete je[V],je}),delete fe.current[V]},4e3)},[]),hr=ot?c.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:c.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-white p-6 shadow-2xl",children:[ot.title&&c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:ot.title}),ot.message&&c.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-line",children:ot.message}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[ot.showCancel&&c.jsx("button",{type:"button",onClick:()=>St(!1),className:"rounded-lg border border-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:ot.cancelLabel||"Cancel"}),c.jsx("button",{type:"button",onClick:()=>St(!0),className:`rounded-lg px-4 py-2 text-sm font-semibold text-white ${ot.tone==="danger"?"bg-red-600 hover:bg-red-700":"bg-indigo-600 hover:bg-indigo-700"}`,children:ot.confirmLabel||"OK"})]})]})}):null,[Ke,Pt]=we.useState({id:"",mark:"",zone:"Tower A",level:"01",roomName:"",qty:1,width:900,height:2100,weight:45,fire:0,use:"",material:"Timber",config:"Single",thickness:45,visionPanel:!1,handing:"RH",stc:35,ada:!1,notes:"",hardwareIntent:"Mechanical",additionalLocations:[]}),[pr,Gt]=we.useState({}),[Ir,Qt]=we.useState(""),[Jt,Ur]=we.useState(null),[Wt,Ye]=we.useState({isOpen:!1,setId:null}),[Tt,sn]=we.useState(null),[br,xr]=we.useState({isOpen:!1,templateId:"",markPrefix:"",locationsText:""}),[jn,Zt]=we.useState(!1),[zn,en]=we.useState("Saved"),[an,Nn]=we.useState({isOpen:!1,doors:[]}),[Fr,Qr]=we.useState(null),W=Qg(Ke),ie=parseInt(Ke.width,10)||0,ee=Math.max(0,ie-_A),ne=Ke.ada&&(ie<Dx||ee<Dx),oe=ne?`Door width ${ie||0}mm provides ${ee}mm clear opening; ADA requires ${Dx}mm (32").`:"",le=!!(t&&(t.plan==="beta_tester"||t.plan==="beta_admin")),De=!t||t.plan==="beta_admin"?null:Xe.count;we.useEffect(()=>{if(!y)return;const V=pe=>{w.current&&!w.current.contains(pe.target)&&b(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[y]),we.useEffect(()=>{if(typeof window>"u")return;const V=window.matchMedia("(min-width: 1024px)"),pe=je=>j(je.matches);return V.addEventListener?V.addEventListener("change",pe):V.addListener(pe),()=>{V.removeEventListener?V.removeEventListener("change",pe):V.removeListener(pe)}},[]),we.useEffect(()=>{if(typeof window>"u")return;const V=pe=>{if(!N||!pe.ctrlKey||pe.metaKey)return;const je=pe.key.toLowerCase();je==="z"&&!pe.shiftKey&&yt?(pe.preventDefault(),be()):(je==="y"||je==="z"&&pe.shiftKey)&&Ht&&(pe.preventDefault(),tt())};return window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)},[N,be,tt,yt,Ht]),we.useEffect(()=>{if(C.current){C.current=!1;return}const V=yA(K);D(pe=>({past:[...pe.past,pe.present].slice(-Fx),present:V,future:[]}))},[K]),we.useEffect(()=>{if(!(t!=null&&t.email)){E([]),se(null);return}(async()=>{try{const pe=await s3(t.email);E(pe.map(OY))}catch(pe){console.error("Failed to load projects from Firestore",pe)}})()},[t==null?void 0:t.email]),we.useEffect(()=>{let V=!0;return(async()=>{if(!t||t.plan==="beta_admin"){V&&et({count:0,limit:Ne});return}try{const je=await jT(t.email);V&&et(je)}catch(je){console.error("Failed to load download usage",je)}})(),()=>{V=!1}},[t==null?void 0:t.email]),we.useEffect(()=>{!t&&S!=="landing"&&k("landing")},[t,S]),we.useEffect(()=>{if(!(t!=null&&t.email))return;en("Saving..."),(async()=>{try{for(const pe of K)await Jf(t.email,pe);en("Saved")}catch(pe){console.error("Failed to save projects",pe),en("Error saving")}})()},[K,t==null?void 0:t.email]),we.useEffect(()=>{if(typeof window>"u")return;window.history.replaceState({view:S},""),st.current=!1;const V=pe=>{var Ve;const je=((Ve=pe.state)==null?void 0:Ve.view)||"landing";st.current=!0,k(je)};return window.addEventListener("popstate",V),()=>window.removeEventListener("popstate",V)},[]),we.useEffect(()=>{if(st.current){st.current=!1;return}typeof window>"u"||window.history.pushState({view:S},"")},[S]),we.useEffect(()=>{ge&&(Dr(),yn(),Ke.material==="Glass"&&Ke.visionPanel&&Pt(V=>({...V,visionPanel:!1})))},[Ke.fire,Ke.use,Ke.width,Ke.height,Ke.thickness,Ke.location,Ke.material]),we.useEffect(()=>{if(!t||!t.expiresAt){v("");return}const V=()=>{const je=t.expiresAt-Date.now();if(je<=0){v("Expired");return}const Ve=Math.round(je/6e4),it=Math.floor(Ve/60),Qe=Ve%60;it>0?v(`Expires in ${it}h ${Qe}m`):v(`Expires in ${Qe}m`)};V();const pe=setInterval(V,6e4);return()=>clearInterval(pe)},[t]),we.useEffect(()=>{h&&Ae("")},[h]);const Te=()=>K.find(V=>V.id===P),Re=we.useCallback(V=>{var it,Qe;const pe=Te();if(!pe)return!1;const je=Array.isArray(pe.doors)&&pe.doors.length>0,Ve=Array.isArray(pe.sets)&&pe.sets.length>0;switch(V){case 0:return!!((it=pe.name)!=null&&it.trim())&&!!pe.type&&!!pe.standard&&!!((Qe=pe.details)!=null&&Qe.jurisdiction);case 1:return je;case 2:return je&&Ve;case 3:return je&&Ve&&qe;default:return!1}},[K,P,qe]),Me=we.useCallback(V=>{if(V==null||V<=0)return!0;for(let pe=0;pe<V;pe+=1)if(!Re(pe))return!1;return!0},[Re]),Oe=we.useCallback(V=>{if(!(typeof V!="number"||V===R)){if(V>R&&!Me(V)){de(V);const pe=Ju[V-1]||"previous step",je=Ju[V]||"next step";Rt(V===1?"Finish Setup to Continue":"Finish previous step",`Complete ${pe} before moving to ${je}.`);return}de(null),q(V)}},[R,Me,Rt]),ht=we.useCallback(()=>{Ge(!0),Oe(3)},[Oe]);we.useEffect(()=>{me!==null&&Me(me)&&de(null)},[me,Me]),we.useEffect(()=>{Ge(!1)},[P]),we.useEffect(()=>{R<3&&qe&&Ge(!1)},[R,qe]);const gt=(V,pe)=>{const je={timestamp:new Date().toISOString(),user:ye,action:pe};E(Ve=>Ve.map(it=>it.id===V?{...it,auditLog:[je,...it.auditLog||[]]}:it))},kt=()=>{const V=oh(),pe={id:V,name:"",type:"Commercial Office",standard:"ANSI",details:{client:"",architect:"",jurisdiction:"IBC 2021",address:""},doors:[],sets:[],auditLog:[],instantInputs:k0(),instantSchedulingEnabled:!1,mkSystemEnabled:!1};E([...K,pe]),pt(V)},pt=V=>{se(V),de(null),q(0),k("wizard")},Et=async(V,pe)=>{if(pe.stopPropagation(),!!await ct({title:"Delete project?",message:"Are you sure you want to delete this project?",confirmLabel:"Delete",tone:"danger"}))try{await a3(V),E(K.filter(Ve=>Ve.id!==V)),P===V&&(se(null),k("dashboard"))}catch(Ve){console.error("Failed to delete project",Ve),await Rt("Something went wrong","Unable to delete project. Please try again.")}},tr=async()=>{if(await ct({title:"Reset workspace?",message:"This will clear all data for this user. Are you sure?",confirmLabel:"Reset",tone:"danger"})){if(!(t!=null&&t.email)){E([]),k("landing");return}try{const pe=await s3(t.email);await Promise.all(pe.map(je=>a3(je.id)))}catch(pe){console.error("Failed to reset projects",pe)}E([]),se(null),de(null),q(0),k("landing")}},Nr=(V,pe)=>{E(je=>je.map(Ve=>{if(Ve.id!==P)return Ve;const Qe={...k0(),...Ve.instantInputs||{}},er=Ve.type;return{...Ve,instantInputs:{...Qe,[er]:{...Qe[er],[V]:pe}}}}))},yr=V=>{E(pe=>pe.map(je=>je.id===P?{...je,instantSchedulingEnabled:!!V}:je))},tn=async()=>{const V=Te();if(!V)return;if(!V.instantSchedulingEnabled){await Rt("Enable Instant Scheduling","Turn on Instant Door Scheduling in Step 1 to generate starter doors.");return}const pe=SY(V);if(!pe.length){await Rt("Need more info","Add more Instant Door Scheduling info in Step 1 to auto-generate doors.");return}V.doors.length>0&&!await ct({title:"Append doors?",message:"Append generated doors to your existing schedule?",confirmLabel:"Append"})||Nn({isOpen:!0,doors:pe})},Hn=()=>{if(!an.doors.length){Nn({isOpen:!1,doors:[]});return}if(!Te())return;const pe=K.map(je=>je.id===P?{...je,doors:[...je.doors,...an.doors]}:je);E(pe),gt(P,`Auto-generated ${an.doors.length} doors`),Nn({isOpen:!1,doors:[]})},li=async(V,pe,je,Ve)=>{const it=K.map(Qe=>Qe.id===P?{...Qe,name:V,type:pe,standard:je,details:Ve}:Qe);if(E(it),gt(P,`Updated project details: ${V}`),t!=null&&t.email){const Qe=it.find(er=>er.id===P);Qe&&await Jf(t.email,Qe)}},ci=()=>{L(!0)},Xn=async()=>{if(Object.keys(pr).length>0)return;const V=K.map(pe=>{if(pe.id===P){const je=[...pe.doors],Ve=Ke.id||oh(),it=(Ke.additionalLocations||[]).filter(Mt=>Mt.zone||Mt.level||Mt.roomName),Qe=rc({...Ke,id:Ve,additionalLocations:it}),er=je.findIndex(Mt=>Mt.id===Ke.id);return er>=0?je[er]=Qe:je.push(Qe),{...pe,doors:je}}return pe});if(E(V),gt(P,`Saved door: ${Ke.mark}`),ve(!1),t!=null&&t.email){const pe=V.find(je=>je.id===P);pe&&await Jf(t.email,pe)}},on=async V=>{const pe=K.map(je=>je.id===P?{...je,doors:je.doors.filter(Ve=>Ve.id!==V)}:je);if(E(pe),gt(P,`Deleted door ID: ${V}`),t!=null&&t.email){const je=pe.find(Ve=>Ve.id===P);je&&await Jf(t.email,je)}},Tn=async V=>{const je=Te().doors.find(Mt=>Mt.id===V),Ve=prompt("How many copies do you want to create?","1"),it=parseInt(Ve)||1,Qe=[];for(let Mt=0;Mt<it;Mt++)Qe.push(rc({...je,id:oh(),mark:`${je.mark}-CP${Mt+1}`}));const er=K.map(Mt=>Mt.id===P?{...Mt,doors:[...Mt.doors,...Qe]}:Mt);if(E(er),gt(P,`Bulk duplicated door ${je.mark} (${it} times)`),t!=null&&t.email){const Mt=er.find(At=>At.id===P);Mt&&await Jf(t.email,Mt)}},Gr=(V,pe)=>{E(je=>je.map(Ve=>{if(Ve.id!==P)return Ve;const it=Ve.doors.map(Qe=>{if(Qe.id!==V)return Qe;const er=[...Qe.additionalLocations||[]],Mt=pe(er,Qe)||[];return rc({...Qe,additionalLocations:Mt})});return{...Ve,doors:it}}))},Lr=V=>{var je;const pe=(je=Te())==null?void 0:je.doors.find(Ve=>Ve.id===V);pe&&Gr(V,Ve=>[...Ve,{zone:pe.zone,level:pe.level,roomName:`${pe.roomName} #${Ve.length+2}`}])},_r=(V,pe,je,Ve)=>{Gr(V,it=>{const Qe=[...it];return Qe[pe]={...Qe[pe],[je]:Ve},Qe})},qn=(V,pe)=>{Gr(V,je=>{const Ve=[...je];return Ve.splice(pe,1),Ve})},yn=()=>{let V=45;if(Ke.material==="Glass")V=12;else{const At=parseInt(Ke.fire);At===0||At===20||At===30?V=45:At===45||At===60?V=54:At>=90&&(V=64)}let pe=45;const je=Ke.height/1e3,Ve=Ke.width/1e3,it=V/1e3,Qe=je*Ve*it,er=je*Ve;if(Ke.material==="Timber"){const At=parseInt(Ke.fire)>0?800:600;pe=Math.round(Qe*At)}else if(Ke.material==="Glass")pe=Math.round(Qe*2500);else if(Ke.material==="Metal"){const At=parseInt(Ke.fire)>0?45:35;pe=Math.round(er*At)}else pe=Math.round(er*30);pe=Math.ceil(pe/5)*5;let Mt=30;for(const[At,ur]of Object.entries(mA))if(Ke.use.includes(At)||Ke.roomName&&Ke.roomName.includes(At)){Mt=ur;break}Pt(At=>({...At,thickness:At.thicknessAuto===!1?At.thickness:V,thicknessAuto:At.thicknessAuto===void 0?!0:At.thicknessAuto,weight:At.weightAuto===!1?At.weight:pe,weightAuto:At.weightAuto===void 0?!0:At.weightAuto,stc:Mt}))},Dr=()=>{let V=null;const pe=Ke.use.toLowerCase(),je=Ke.fire>0;(pe.includes("stair")||pe.includes("exit"))&&!je?V={type:"warning",msg:"Code Alert: Stairwell/Exit doors typically require a Fire Rating (e.g., 60min/90min per NFPA 80 / EN 1634)."}:(pe.includes("unit")||pe.includes("guest"))&&!je?V={type:"warning",msg:"Code Alert: Unit Entry doors usually require a fire rating (e.g., FD30/20min)."}:Ke.width<850&&(pe.includes("patient")||pe.includes("accessible")||pe.includes("entrance"))?V={type:"info",msg:"Accessibility Note: Clear opening width might be too narrow for wheelchair access (Recommend >900mm)."}:pe.includes("corridor")&&!je&&(V={type:"info",msg:"Cross-corridor doors often require smoke/fire control."}),V&&L8&&Dw(Ke.id||Ke.mark||"door-form","checkCompliance",{use:Ke.use,fire:Ke.fire,note:V}),Ur(V)},Ia=(V,pe)=>{const je={...pr};let Ve="";const it=parseInt(pe)||0;if(V==="width"||V==="all"){const Qe=V==="all"?Ke.width:it;Qe>0&&(Qe<600||Qe>1300)?je.width="Width must be 600-1300mm":delete je.width,Qe>1100&&(Ve="Info: Wide (>1100mm). HD Closers suggested.")}if(V==="height"||V==="all"){const Qe=V==="all"?Ke.height:it;Qe>0&&(Qe<1900||Qe>3e3)?je.height="Height must be 1900-3000mm":delete je.height}(V==="weight"||V==="all")&&(V==="all"?Ke.weight:it)>150&&(Ve="Info: Heavy (>150kg). Pivot Sets suggested."),Gt(je),Qt(Ve)},Qn=(V=null)=>{var Ve;const pe=Te(),je=((Ve=iu[pe.type])==null?void 0:Ve.usages)||iu["Commercial Office"].usages;Pt(rc(V?{...V}:{id:"",mark:`D-${(pe.doors.length+1).toString().padStart(3,"0")}`,zone:"Tower A",level:"01",roomName:"",qty:1,width:900,height:2100,weight:45,fire:0,use:je[0],material:"Timber",config:"Single",thickness:45,thicknessAuto:!0,visionPanel:!1,handing:"RH",stc:35,ada:!1,notes:"",weightAuto:!0,additionalLocations:[]})),Gt({}),Qt(""),Ur(null),Ye({isOpen:!1,setId:null}),ve(!0)},_n=(V,pe)=>{const je=new Blob([V],{type:"text/csv;charset=utf-8;"}),Ve=document.createElement("a");if(Ve.download!==void 0){const it=URL.createObjectURL(je);Ve.setAttribute("href",it),Ve.setAttribute("download",pe),Ve.style.visibility="hidden",document.body.appendChild(Ve),Ve.click(),document.body.removeChild(Ve)}},Vs=async()=>{if(B("Generating..."),!await ct({title:"Review Notice",message:um,confirmLabel:"I Understand"})){B("");return}try{const pe=await Em(()=>import("https://cdn.sheetjs.com/xlsx-0.20.1/package/xlsx.mjs"),[]),je=Te(),Ve=pe.utils.book_new(),it=(At,ur)=>{var sr,wt,Pr;const Ot=[[`PROJECT: ${je.name}`],[`CLIENT: ${((sr=je.details)==null?void 0:sr.client)||""}`,`ARCHITECT: ${((wt=je.details)==null?void 0:wt.architect)||""}`],[`FACILITY: ${je.type}`,`JURISDICTION: ${((Pr=je.details)==null?void 0:Pr.jurisdiction)||""}`],[`STANDARD: ${je.standard}`,`DATE: ${new Date().toLocaleDateString()}`],[]],ut=pe.utils.json_to_sheet(At,{origin:"A6"});pe.utils.sheet_add_aoa(ut,Ot,{origin:"A1"}),pe.utils.book_append_sheet(Ve,ut,ur)},Qe=je.doors.map(At=>{var ur;return{Mark:At.mark,Zone:At.zone,Level:At.level,Room:At.roomName,Qty:At.qty,Width:At.width,Height:At.height,Thk:At.thickness,Fire:At.fire>0?`${At.fire} min`:"NFR",Acoustic:At.stc?`${At.stc} dB`:"N/A",Material:At.material,Config:At.config,Handing:At.handing,"HW Set":((ur=je.sets.find(Ot=>Ot.doors.includes(At.id)))==null?void 0:ur.id)||"None"}});it(Qe,"Door Schedule");const er=[];je.sets.forEach(At=>{const Ot=je.doors.filter(ut=>At.doors.includes(ut.id)).some(ut=>ut.config==="Double")?"Double":"Single";(At.items||[]).forEach(ut=>{er.push({Set:At.id,"Set Name":At.name,"Door Config":Ot,Ref:ut.ref,Category:ut.category,Type:ut.type,Style:ut.style,Finish:ut.finish,Spec:ut.spec,Qty:ut.qty,"Acoustic Contribution":ut.acousticContribution||""})})}),it(er,"Hardware Specs");const Mt={};je.sets.forEach(At=>{const ur=je.doors.filter(Ot=>At.doors.includes(Ot.id)).reduce((Ot,ut)=>Ot+ut.qty,0);(At.items||[]).forEach(Ot=>{const ut=`${Ot.category}_${Ot.type}_${Ot.spec}_${Ot.finish}`;Mt[ut]||(Mt[ut]={Category:Ot.category,Type:Ot.type,Style:Ot.style,Spec:Ot.spec,Finish:Ot.finish,"Total Qty":0});let sr=parseFloat(Ot.qty);isNaN(sr)&&(sr=1),Mt[ut]["Total Qty"]+=sr*ur})}),it(Object.values(Mt),"Bill of Materials"),pe.writeFile(Ve,`${je.name.replace(/\s+/g,"_")}_Schedule_v2.xlsx`),B(""),en("Exported!")}catch(pe){console.error("Export failed:",pe),await Rt("Export failed","Failed to generate Excel file. Please check your internet connection (loading external engine)."),B(""),en("Error")}},Eo=async()=>{if(!await ct({title:"Review Notice",message:um,confirmLabel:"I Understand"}))return;const pe=Te(),je=pe.doors.map(Qe=>{var er;return{Mark:Qe.mark,IfcDoorStyle:Qe.config,Width:Qe.width,Height:Qe.height,FireRating:Qe.fire,AcousticRating:Qe.stc||"N/A",HardwareSet:((er=pe.sets.find(Mt=>Mt.doors.includes(Qe.id)))==null?void 0:er.id)||"None"}}),Ve=Object.keys(je[0]),it=[Ve.join(","),...je.map(Qe=>Ve.map(er=>`"${(Qe[er]||"").toString().replace(/"/g,'""')}"`).join(","))].join(`
`);_n(it,`${pe.name.replace(/\s+/g,"_")}_BIM_SharedParams.csv`)},$c=async()=>{await ct({title:"Review Notice",message:um,confirmLabel:"I Understand"})&&window.print()},Za=async V=>{if(!t){await Rt("Sign in required","Please log in to download documents.");return}if(t.plan==="beta_admin"){await Promise.resolve(V());return}try{const pe=await b9(t.email,Ne);if(!pe.allowed){const je="Youve reached the 10-download limit for this beta. Please contact your InstaSpec admin to increase your download allowance.";Ae(je),await Rt("Download limit",je),et({count:pe.count,limit:pe.limit});return}et(pe),Ae(""),await Promise.resolve(V())}catch(pe){console.error("Failed to increment download usage",pe),await Rt("Download check failed","Unable to verify download limit. Please try again shortly.")}},zs=async()=>{const V=Te();if(!V)return;if(!V.doors.length){await Rt("Door schedule missing","Finish the Door scheduling before proceeding to the next step.");return}const pe={};V.doors.forEach(it=>{const Qe=`${it.use}|${it.fire}|${it.config}|${it.material}|${it.stc}|${it.hardwareIntent||"Mechanical"}`;pe[Qe]||(pe[Qe]=[]),pe[Qe].push(it)});const je=Object.entries(pe).map(([it,Qe],er)=>{const Mt=vA(Qe),[At,ur,Ot,ut,sr,wt]=it.split("|"),Pr=parseInt(ur),Sr=Qe.reduce((_t,qt)=>_t.weight>qt.weight?_t:qt),jr=wt==="Electromechanical"?"Electromechanical":"Mechanical",bn=Qe.some(_t=>_t.ada),ks=`HW-${String(er+1).padStart(2,"0")}`,Tr=Ot==="Double",ra=Tr?"2":"1",Jn=(At||"").toLowerCase(),hs=Jn.includes("guest room");let ei=[];const ar=(_t,qt,kr,rn,ln,g)=>{const I=wA(_t,V.standard);ei.push({category:_t,ref:qt,type:kr,style:rn,spec:ln,qty:g,finish:I})};let ti=3;Sr.height>2300&&(ti=4),Sr.weight>120&&(ti=4),Sr.height>2300&&Sr.weight>120&&(ti=5);const _=ti*(Tr?2:1),U=_t=>Tr?`${_t} (Active Leaf)`:_t,ae=_t=>Tr?`${_t} (Inactive Leaf)`:_t;if(ut==="Glass"){ar("Hinges","P01","Patch Fitting","Top Patch","Top/Bottom patch kit",Tr?"2":"1"),ar("Locks","L01","Patch Lock","Corner Patch Lock",U("Euro Cylinder Type"),"1");const qt=Mt.requiresPanic?"Panic Push Pull Handle":"Pull Handle",kr=Mt.requiresPanic?"L-Shaped":"D-Pull",rn=Mt.requiresPanic?U("L-shaped panic pull for tempered glass"):U("600mm ctc");ar("Handles","H01",qt,kr,rn,"1 Pr"),ar("Closers","D01","Floor Spring","Double Action",U("EN 1-4"),"1"),Tr&&ar("Closers","D02","Floor Spring","Double Action",ae("EN 1-4"),"1")}else{const _t=V.standard==="ANSI"?"4.5x4.5":"102x76x3";ar("Hinges","H01","Butt Hinge","Ball Bearing",`${_t}, SS`,_.toString()),Jn.includes("stair")?ar("Locks","L01","Panic Bar","Rim Type",U("Fire Rated Exit Device"),"1"):hs?(ar("Locks","L01","Hotel Lock","RFID Mortise",U("Mobile key / RFID ready hotel lock"),"1"),ar("Cylinders","C01","Cylinder","Mortise Cylinder",U("Emergency override cylinder"),ra),ar("Handles","H02","Lever Handle","Return to Door","Interior privacy lever trim","1 Pr"),ar("Accessories","A02","Door Viewer","Wide Angle","180 guest room viewer","1"),ar("Accessories","A03","Kick Plate","Satin Stainless",U("Corridor protection plate"),ra)):(ar("Locks","L01","Mortise Lock","Sashlock",U("Cylinder Function"),"1"),ar("Cylinders","C01","Cylinder","Euro Profile",U("Key/Turn"),"1"),ar("Handles","H02","Lever Handle","Return to Door",U("19mm dia"),"1 Pr")),ar("Closers","D01","Overhead Closer","Rack & Pinion",U("EN 2-5, Backcheck"),"1"),Tr&&ar("Closers","D02","Overhead Closer","Rack & Pinion",ae("EN 2-5, Backcheck"),"1"),ar("Stops","S01","Door Stop","Floor Mounted Dome","Rubber Buffer","1"),Pr>0&&(ar("Seals","GS01","Perimeter Seal","Intumescent","Head & jambs, 3 sides","1 Set"),ar("Seals","GS02","Drop Seal","Automatic","Under door smoke seal","1")),Tr&&ar("Accessories","A01","Leaf Assignment","Active/Inactive","Inactive leaf held closed without locking hardware","1")}Pr>0&&ut==="Glass"&&(ar("Seals","GS01","Perimeter Seal","Intumescent","Glass intumescent gasketing","1 Set"),ar("Seals","GS02","Drop Seal","Automatic","Smoke seal at threshold","1")),jr==="Electromechanical"&&(hs?ar("Electrified","E02","Door Contact","Surface",U("Online monitoring contact"),ra):ar("Electrified","E01","Electric Strike",Pr>0?"Fail-Safe":"Fail-Secure",U("Access control interface"),"1"));const xe=[];Pr>0?xe.push(`Fire door to ${Pr}min with ${IY(Ot)} configuration`):xe.push(`${Ot} door, non-fire rated`),jr==="Electromechanical"?xe.push("Electrified access control with fail-safe release"):xe.push("Mechanical locking with free egress"),ei.some(_t=>(_t.type||"").toLowerCase().includes("panic"))&&xe.push("Single-motion exit via panic hardware"),ei.some(_t=>_t.category==="Seals")&&xe.push("Perimeter and bottom seals included"),bn&&xe.push("Meets ADA 813mm clear opening with accessible hardware");const $e=xe.join(". ")+".",Ft=ch(Qe,ei),Bt=uh(ei,V.standard,{...Ft,removedAutoTags:[],setId:ks});return{id:ks,name:`${At} Door (${ut}) - ${Pr>0?Pr+"min":"NFR"}`,doors:Qe.map(_t=>_t.id),intent:jr,items:Bt,operation:$e,removedAutoTags:[]}}),Ve=K.map(it=>it.id===P?{...it,sets:je}:it);E(Ve),Oe(2),await ct({title:"Review Notice",message:um,confirmLabel:"I Understand",showCancel:!1})},Zn=(V,pe,je,Ve)=>{const it=K.map(Qe=>{if(Qe.id===P){const er=Qe.sets.map(Mt=>{if(Mt.id===V){const At=[...Mt.items];At[pe]={...At[pe],[je]:Ve};const ur=Qe.doors.filter(sr=>Mt.doors.includes(sr.id)),Ot=ch(ur,At),ut=Mt.removedAutoTags?[...Mt.removedAutoTags]:[];return{...Mt,items:uh(At,Qe.standard,{...Ot,removedAutoTags:ut,setId:V}),removedAutoTags:ut}}return Mt});return{...Qe,sets:er}}return Qe});E(it)},La=V=>{const pe={...V,id:`LIB-${oh()}`,name:`${V.name} (Template)`};Ue([..._e,pe]),Rt("Library updated","Hardware Set saved to Global Library!","Great!")},cs=V=>{const pe=Te(),je=`HW-${String(pe.sets.length+1).padStart(2,"0")}`,Ve={...V,id:je,doors:[]},it={...ch([],Ve.items||[]),removedAutoTags:Ve.removedAutoTags||[],setId:je},Qe={...Ve,items:uh(Ve.items||[],pe.standard,it),removedAutoTags:Ve.removedAutoTags||[]},er=K.map(Mt=>Mt.id===P?{...Mt,sets:[...Mt.sets,Qe]}:Mt);E(er),gt(P,`Loaded set ${V.name} from Library`)},Pa=V=>{Ye({isOpen:!0,setId:V})},Ll=(V,pe)=>{const je=Te();if(!je)return;const Ve=eg[V],it=Ve==null?void 0:Ve.types.find(ur=>ur.name===pe),Qe=it?it.styles[0]:"",er=je.sets.find(ur=>ur.id===Wt.setId);if(!er)return;if(V==="Hinges"&&er.items.some(ur=>ur.category==="Hinges")){Rt("One at a time","Only one hanging product can be specified per hardware set.");return}if(V==="Locks"&&er.items.some(ur=>ur.category==="Locks")){Rt("One at a time","Only one locking product can be specified per hardware set.");return}const Mt=Kh(er.items,V),At=K.map(ur=>{if(ur.id===P){const Ot=ur.sets.map(ut=>{if(ut.id===Wt.setId){const sr={category:V,ref:Mt,type:pe,style:Qe,spec:"",qty:"1",finish:wA(V,je.standard)},wt=ur.doors.filter(jr=>ut.doors.includes(jr.id)),Pr=ch(wt,[...ut.items,sr]),Sr=ut.removedAutoTags||[];return{...ut,items:uh([...ut.items,sr],ur.standard,{...Pr,removedAutoTags:Sr,setId:ut.id}),removedAutoTags:Sr}}return ut});return{...ur,sets:Ot}}return ur});E(At),Ye({isOpen:!1,setId:null})},Pl=()=>{const V=Te(),pe=V==null?void 0:V.doors.find(Ot=>Ot.id===br.templateId);if(!V||!pe){Rt("Template needed","Select a template door.");return}const je=br.locationsText.split(`
`).map(Ot=>Ot.trim()).filter(Boolean);if(!je.length){Rt("Locations missing","Provide at least one location.");return}const Ve=je.map(Ot=>{const ut=Ot.split("|").map(sr=>sr.trim());return{zone:ut[0]||pe.zone||"",level:ut[1]||pe.level||"",roomName:ut[2]||pe.roomName||""}}),[it,...Qe]=Ve,er=br.markPrefix||pe.mark||`D-${String(V.doors.length+1).padStart(3,"0")}`,Mt=P8(V.doors,er),At=rc({...pe,id:oh(),mark:Mt,zone:it.zone,level:it.level,roomName:it.roomName,additionalLocations:Qe,qty:Ve.length}),ur=K.map(Ot=>Ot.id===P?{...Ot,doors:[...Ot.doors,At]}:Ot);E(ur),gt(P,`Bulk created door ${Mt} (${Ve.length} locations)`),xr({isOpen:!1,templateId:"",markPrefix:"",locationsText:""})},jl=(V,pe)=>{const je=K.map(Ve=>{if(Ve.id===P){const it=Ve.sets.map(Qe=>{if(Qe.id===V){const er=[...Qe.items];er.splice(pe,1);const Mt=Ve.doors.filter(ut=>Qe.doors.includes(ut.id)),At=ch(Mt,er),ur=Qe.removedAutoTags?[...Qe.removedAutoTags]:[],Ot=Qe.items[pe];return Ot!=null&&Ot.autoTag&&!ur.includes(Ot.autoTag)&&ur.push(Ot.autoTag),{...Qe,items:uh(er,Ve.standard,{...At,removedAutoTags:ur,setId:V}),removedAutoTags:ur}}return Qe});return{...Ve,sets:it}}return Ve});E(je)},Ja=()=>{const V=Te();return rY(V)};return S==="landing"?c.jsxs(c.Fragment,{children:[c.jsx($Y,{onStart:()=>k("dashboard"),hasProjects:K.length>0,isAdmin:h,onOpenAdmin:()=>s(!0),isAdminOpen:i,onCloseAdmin:()=>s(!1),showNotice:Rt}),hr]}):Ie?c.jsxs("div",{className:"bg-white min-h-screen text-black p-8 font-serif",children:[c.jsxs("div",{className:"flex justify-between items-center mb-8 border-b-2 border-black pb-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold uppercase tracking-wider",children:((Hs=Te().name)==null?void 0:Hs.trim())||"New Project"}),c.jsx("p",{className:"text-sm",children:"Architectural Door Hardware Schedule"})]}),c.jsxs("div",{className:"text-right text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Client:"})," ",((us=Te().details)==null?void 0:us.client)||"N/A"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Architect:"})," ",((Rl=Te().details)==null?void 0:Rl.architect)||"N/A"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Date:"})," ",new Date().toLocaleDateString()]})]})]}),Te().sets.map(V=>{const pe=Te().doors.find(je=>V.doors.includes(je.id));return c.jsxs("div",{className:"mb-10 break-inside-avoid",children:[c.jsxs("div",{className:"flex justify-between items-end border-b border-black mb-2 pb-1",children:[c.jsxs("h2",{className:"text-xl font-bold",children:[V.id,": ",V.name]}),c.jsx("span",{className:"text-sm font-mono",children:pe?`${pe.fire>0?`FD${pe.fire}`:"NFR"} | ${pe.material} | ${pe.config}`:""})]}),c.jsx("div",{className:"mb-4 text-sm italic text-gray-700",children:V.operation}),c.jsxs("table",{className:"w-full text-sm border-collapse",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-100 border-b border-gray-400",children:[c.jsx("th",{className:"text-left p-2",children:"Category"}),c.jsx("th",{className:"text-left p-2",children:"Item"}),c.jsx("th",{className:"text-left p-2",children:"Description"}),c.jsx("th",{className:"text-left p-2",children:"Finish"}),c.jsx("th",{className:"text-left p-2",children:"Acoustic"}),c.jsx("th",{className:"text-center p-2",children:"Qty"})]})}),c.jsxs("tbody",{children:[Object.keys(uo).map(je=>{const Ve=V.items.filter(it=>uo[je].includes(it.category));return Ve.length===0?null:c.jsxs(su.Fragment,{children:[c.jsx("tr",{className:"bg-gray-50",children:c.jsx("td",{colSpan:"6",className:"p-1 pl-2 font-bold text-xs uppercase text-gray-500 border-b",children:je})}),Ve.map((it,Qe)=>c.jsxs("tr",{className:"border-b border-gray-200",children:[c.jsx("td",{className:"p-2 text-xs text-gray-400",children:it.category}),c.jsx("td",{className:"p-2 font-bold",children:it.type}),c.jsxs("td",{className:"p-2",children:[it.style," - ",it.spec]}),c.jsx("td",{className:"p-2",children:it.finish}),c.jsx("td",{className:"p-2",children:it.acousticContribution||""}),c.jsx("td",{className:"text-center p-2",children:it.qty})]},Qe))]},je)}),V.items.filter(je=>!Object.values(uo).flat().includes(je.category)).map((je,Ve)=>c.jsxs("tr",{className:"border-b border-gray-200",children:[c.jsx("td",{className:"p-2 text-xs text-gray-400",children:je.category}),c.jsx("td",{className:"p-2 font-bold",children:je.type}),c.jsxs("td",{className:"p-2",children:[je.style," - ",je.spec]}),c.jsx("td",{className:"p-2",children:je.finish}),c.jsx("td",{className:"p-2",children:je.acousticContribution||""}),c.jsx("td",{className:"text-center p-2",children:je.qty})]},`other-${Ve}`))]})]}),c.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[c.jsx("strong",{children:"Locations:"})," ",Te().doors.filter(je=>V.doors.includes(je.id)).map(je=>`${je.mark} (${je.roomName})`).join(", ")]})]},V.id)}),c.jsxs("div",{className:"fixed top-4 right-4 print:hidden",children:[c.jsxs("button",{onClick:()=>Za($c),className:"px-4 py-2 bg-black text-white rounded shadow-lg flex items-center gap-2",children:[c.jsx($9,{size:16})," Print PDF"]}),c.jsx("button",{onClick:()=>L(!1),className:"ml-2 px-4 py-2 bg-gray-200 text-black rounded shadow-lg",children:"Close"})]})]}):c.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 text-gray-900 font-sans",children:[c.jsx("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center px-4 md:px-8 sticky top-0 z-40",children:c.jsxs("div",{className:"w-full flex items-center gap-3",children:[c.jsxs("button",{onClick:()=>k("landing"),className:"flex items-center gap-2 font-bold text-lg md:text-xl text-gray-900 focus:outline-none",children:[c.jsx(uu,{className:"text-indigo-600"}),c.jsx("span",{children:"InstaSpec"}),c.jsx("span",{className:"text-xs text-gray-400 font-normal ml-1",children:"v1.5 Beta"})]}),t&&c.jsx("div",{className:"flex-1 hidden md:flex items-center justify-center",children:c.jsxs("div",{className:"inline-flex items-center gap-3 rounded-full border border-gray-200 bg-white px-4 py-1.5 shadow-sm",children:[c.jsx(J4,{size:18,className:"text-indigo-500"}),c.jsxs("select",{value:ye,onChange:V=>he(V.target.value),className:"bg-transparent border-none text-sm font-semibold focus:ring-0 cursor-pointer",children:[c.jsx("option",{value:"Architect",children:"Architect View"}),c.jsx("option",{value:"Contractor",disabled:!0,children:"Contractor View (Coming Soon)"})]})]})}),t&&c.jsxs("div",{className:"hidden md:flex items-center gap-3 ml-4",children:[le&&c.jsx("button",{onClick:()=>o(!0),className:"text-xs md:text-sm px-3 py-1.5 rounded-full border border-amber-200 text-amber-700 hover:bg-amber-50",children:"Share Feedback"}),h&&c.jsx("button",{onClick:()=>s(!0),className:`text-xs md:text-sm px-3 py-1.5 rounded-full border border-indigo-200\r
                             text-indigo-600 hover:bg-indigo-50`,children:"Beta Admin"}),S==="dashboard"&&K.length>0&&c.jsxs("button",{onClick:tr,className:"text-gray-400 hover:text-red-500 text-sm flex items-center gap-1",title:"Clear All Data",children:[c.jsx(tv,{size:16}),c.jsx("span",{className:"hidden md:inline",children:"Reset"})]}),c.jsxs("button",{onClick:()=>k("dashboard"),className:"text-gray-500 hover:text-gray-900 flex items-center gap-2 text-sm md:text-base",children:[c.jsx(I1,{size:18}),c.jsx("span",{className:"hidden md:inline",children:"Dashboard"})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>p(V=>!V),className:`px-3 py-1.5 rounded-full bg-indigo-600 text-white text-xs md:text-sm\r
                             flex items-center gap-2 shadow-sm hover:bg-indigo-700 transition`,children:[c.jsx("span",{className:"max-w-[140px] truncate",children:t.email}),f&&c.jsx("span",{className:`text-[10px] md:text-[11px] px-2 py-0.5 rounded-full\r
                                 bg-indigo-500/80 border border-white/20 whitespace-nowrap`,children:f}),c.jsx(Id,{size:12,className:"opacity-80"})]}),d&&c.jsx("div",{className:`absolute right-0 mt-2 w-40 bg-white rounded-xl shadow-lg\r
                               ring-1 ring-black/5 py-1 text-sm animate-[fadeInUp_0.18s_ease-out] origin-top-right`,children:c.jsx("button",{onClick:()=>{e(),p(!1)},className:`w-full text-left px-3 py-2 text-gray-700\r
                                 hover:bg-indigo-50 hover:text-indigo-700`,children:"Logout"})})]})]}),t&&c.jsxs("div",{className:"ml-auto md:hidden relative",ref:w,children:[c.jsxs("button",{type:"button",onClick:()=>b(V=>!V),className:"flex items-center gap-2 rounded-lg border border-gray-200 px-3 py-1.5 text-sm font-medium text-gray-700",children:[c.jsx(J4,{size:16,className:"text-gray-500"}),c.jsx("span",{children:ye==="Architect"?"Architect View":"Contractor View"}),c.jsx(Id,{size:14,className:`transition-transform ${y?"rotate-180":""}`})]}),y&&c.jsxs("div",{className:"absolute right-0 mt-3 w-64 rounded-2xl bg-white shadow-2xl ring-1 ring-black/5 py-3 z-50",children:[c.jsxs("div",{className:"px-4 pb-2",children:[c.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:t.email}),f&&c.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:f})]}),c.jsx("div",{className:"border-t border-gray-100 my-2"}),c.jsx("div",{className:"px-4 text-[11px] font-semibold text-gray-500 uppercase tracking-wide mb-1",children:"View Mode"}),c.jsxs("button",{type:"button",onClick:()=>{he("Architect"),b(!1)},className:"w-full px-4 py-2 text-sm flex items-center justify-between text-gray-800 hover:bg-indigo-50",children:[c.jsx("span",{children:"Architect View"}),ye==="Architect"&&c.jsx(eu,{size:14,className:"text-indigo-600"})]}),c.jsxs("button",{type:"button",disabled:!0,className:"w-full px-4 py-2 text-sm flex items-center justify-between text-gray-400 cursor-not-allowed",children:[c.jsx("span",{children:"Contractor View"}),c.jsx("span",{className:"text-[10px] uppercase",children:"Soon"})]}),c.jsx("div",{className:"border-t border-gray-100 my-2"}),c.jsx("div",{className:"px-4 text-[11px] font-semibold text-gray-500 uppercase tracking-wide mb-1",children:"Actions"}),c.jsxs("button",{type:"button",onClick:()=>{k("dashboard"),b(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-indigo-50 flex items-center gap-2",children:[c.jsx(I1,{size:16,className:"text-gray-400"}),"Dashboard"]}),le&&c.jsxs("button",{type:"button",onClick:()=>{o(!0),b(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-indigo-50 flex items-center gap-2",children:[c.jsx(V9,{size:16,className:"text-amber-500"}),"Share Feedback"]}),h&&c.jsxs("button",{type:"button",onClick:()=>{s(!0),b(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-indigo-50 flex items-center gap-2",children:[c.jsx(L1,{size:16,className:"text-indigo-500"}),"Beta Admin"]}),S==="dashboard"&&K.length>0&&c.jsxs("button",{type:"button",onClick:()=>{tr(),b(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-red-50 flex items-center gap-2",children:[c.jsx(tv,{size:16,className:"text-red-400"}),"Reset Workspace"]}),c.jsx("div",{className:"border-t border-gray-100 my-2"}),c.jsxs("button",{type:"button",onClick:()=>{e(),b(!1)},className:"w-full px-4 py-2 text-sm text-left text-gray-800 hover:bg-indigo-50 flex items-center gap-2",children:[c.jsx(q9,{size:16,className:"text-gray-400"}),"Logout"]})]})]})]})}),S==="wizard"&&Te()&&c.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 md:px-8 py-3 flex flex-col md:flex-row items-start md:items-center justify-between sticky top-16 z-30 shadow-sm gap-3",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4",children:[c.jsx("span",{className:"font-bold text-base md:text-lg",children:((ja=Te().name)==null?void 0:ja.trim())||"New Project"}),c.jsx("span",{className:"px-2 py-0.5 border rounded text-xs md:text-sm text-gray-500 bg-white whitespace-nowrap",children:Te().standard}),c.jsx("span",{className:"px-2 py-0.5 border rounded text-xs md:text-sm text-gray-500 bg-white whitespace-nowrap",children:Te().type})]}),c.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-end items-center",children:[c.jsxs("button",{onClick:()=>Zt(!jn),className:"px-3 py-1.5 bg-white border border-gray-200 rounded hover:bg-gray-50 flex items-center gap-2 text-xs md:text-sm",children:[c.jsx(n3,{size:16})," History"]}),c.jsxs("button",{onClick:()=>{li(Te().name,Te().type,Te().standard,Te().details),jt()},className:"px-3 py-1.5 bg-white border border-gray-200 rounded hover:bg-gray-50 flex items-center gap-2 text-xs md:text-sm",children:[c.jsx(W9,{size:16})," Save"]}),c.jsxs("button",{onClick:()=>k("dashboard"),className:"px-3 py-1.5 bg-white border border-gray-200 rounded hover:bg-gray-50 flex items-center gap-2 text-xs md:text-sm",children:[c.jsx(ll,{size:16})," Close"]}),c.jsx("span",{className:"text-[11px] md:text-xs text-gray-500 border border-transparent rounded-full px-2 py-0.5 bg-gray-100 whitespace-nowrap",children:O||zn})]})]}),jn&&Te()&&c.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[c.jsx("div",{onClick:()=>Zt(!1),className:"absolute inset-0 bg-black/20 backdrop-blur-sm"}),c.jsxs("div",{className:"relative w-80 bg-white shadow-2xl h-full overflow-y-auto p-6 animate-slideLeft",children:[c.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[c.jsx(n3,{size:20})," Audit Trail"]}),c.jsxs("div",{className:"space-y-4",children:[(Ki=Te().auditLog)==null?void 0:Ki.map((V,pe)=>c.jsxs("div",{className:"text-sm border-l-2 border-indigo-200 pl-3",children:[c.jsx("div",{className:"font-bold text-gray-800",children:V.action}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex justify-between",children:[c.jsx("span",{children:V.user}),c.jsx("span",{children:new Date(V.timestamp).toLocaleTimeString()})]})]},pe)),(!Te().auditLog||Te().auditLog.length===0)&&c.jsx("p",{className:"text-gray-400 text-sm",children:"No history yet."})]})]})]}),c.jsxs("main",{className:"flex-1 p-4 md:p-8 max-w-7xl mx-auto w-full",children:[S==="dashboard"&&c.jsxs("div",{className:"animate-slideUp",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Projects"}),c.jsx("p",{className:"text-gray-500",children:"Manage your door specifications."})]}),c.jsxs("button",{onClick:kt,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2 font-medium shadow-sm w-full md:w-auto justify-center",children:[c.jsx(X2,{size:18})," New Project"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:K.map(V=>c.jsxs("div",{onClick:()=>pt(V.id),className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md hover:border-indigo-500 transition-all cursor-pointer group relative",children:[c.jsx("div",{className:"w-12 h-12 bg-indigo-50 text-indigo-600 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:c.jsx(F9,{size:24})}),c.jsx("h3",{className:"font-bold text-lg mb-2",children:V.name}),c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded text-xs font-medium",children:V.type}),c.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded text-xs font-medium",children:V.standard})]}),c.jsxs("p",{className:"text-sm text-gray-400",children:[V.doors.length," Doors Defined"]}),c.jsx("button",{onClick:pe=>Et(V.id,pe),className:"absolute top-4 right-4 text-gray-300 hover:text-red-500 p-2",children:c.jsx(Dh,{size:18})})]},V.id))})]}),S==="wizard"&&Te()&&c.jsxs("div",{children:[c.jsx("div",{className:"mb-6 md:mb-10",children:c.jsxs("div",{className:"bg-white/90 border border-gray-200 rounded-2xl px-3 py-4 shadow-sm",children:[c.jsx("div",{className:"hidden md:flex items-center gap-3",children:(()=>{var pe;return((pe=Te())!=null&&pe.mkSystemEnabled?Ju:Ju.slice(0,4)).map((je,Ve,it)=>{const Qe=R===Ve,er=Re(Ve),Mt=me===Ve&&Ve>R;return c.jsxs(su.Fragment,{children:[c.jsxs("button",{type:"button",onClick:()=>Oe(Ve),className:"flex flex-col items-center gap-2 min-w-[130px] text-center focus:outline-none",children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold border-2 transition-all ${Qe?"bg-indigo-600 border-indigo-600 text-white shadow":er?"bg-emerald-500 border-emerald-500 text-white":Mt?"bg-orange-50 border-orange-400 text-orange-500":"bg-white border-gray-300 text-gray-400"}`,children:er?c.jsx(eu,{size:16}):Ve+1}),c.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${Qe?"text-indigo-600":"text-gray-400"}`,children:je})]}),Ve<it.length-1&&c.jsx("div",{className:`flex-1 h-0.5 rounded-full ${me===Ve+1?"bg-orange-400":Re(Ve)?"bg-emerald-400":"bg-gray-200"}`})]},`desktop-step-${je}`)})})()}),c.jsx("div",{className:"md:hidden",children:c.jsx("div",{className:"flex items-center justify-between gap-2",children:(()=>{var je,Ve;const V=(je=Te())!=null&&je.mkSystemEnabled?gA:gA.slice(0,4),pe=(Ve=Te())!=null&&Ve.mkSystemEnabled?Ju:Ju.slice(0,4);return V.map((it,Qe,er)=>{const Mt=pe[Qe],At=R===Qe,ur=Re(Qe),Ot=me===Qe&&Qe>R;return c.jsxs(su.Fragment,{children:[c.jsxs("button",{type:"button",onClick:()=>Oe(Qe),className:"flex flex-col items-center gap-0.5 text-center focus:outline-none bg-transparent",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border-2 transition-all ${At?"bg-indigo-600 border-indigo-600 text-white shadow":ur?"bg-emerald-500 border-emerald-500 text-white":Ot?"bg-orange-50 border-orange-400 text-orange-500":"bg-white border-gray-300 text-gray-400"}`,children:ur?c.jsx(eu,{size:14}):Qe+1}),c.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider leading-tight ${At?"text-indigo-600":"text-gray-500"}`,children:it}),c.jsx("span",{className:"sr-only",children:Mt})]}),Qe<er.length-1&&c.jsx("div",{className:"flex-1",children:c.jsx("div",{className:`h-0.5 rounded-full ${me===Qe+1?"bg-orange-400":Re(Qe)?"bg-emerald-400":"bg-gray-200"}`})})]},`mobile-step-${it}`)})})()})})]})}),R===0&&P&&c.jsx(ex,{projectId:P,projectDoors:Te().doors||[],children:(()=>{var At,ur,Ot;const V=Te();console.log("Step 0 rendering, mkSystemEnabled:",V.mkSystemEnabled);const pe=V.type,je=cY(V,pe),Ve=!!V.instantSchedulingEnabled,it=(ut,sr,wt=0)=>c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:ut}),c.jsx("input",{type:"number",min:wt,value:je[sr]??"",onChange:Pr=>Nr(sr,Math.max(wt,parseInt(Pr.target.value,10)||0)),className:"w-full p-2 border rounded"})]}),Qe=(ut,sr)=>c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:ut}),c.jsxs("select",{value:je[sr]?"yes":"no",onChange:wt=>Nr(sr,wt.target.value==="yes"),className:"w-full p-2 border rounded bg-white",children:[c.jsx("option",{value:"yes",children:"Yes"}),c.jsx("option",{value:"no",children:"No"})]})]}),er=(ut,sr)=>{const wt=Math.max(0,parseInt(sr,10)||0),Pr={...je.unitMix||J1};Pr[ut]=wt,Nr("unitMix",Pr);const Sr=Bm.reduce((jr,bn)=>jr+(Pr[bn]||0),0);Nr("unitsPerFloor",Sr)},Mt=()=>{if(pe==="Residential"){const ut=je.unitMix||J1,sr=Math.max(1,Bm.reduce((wt,Pr)=>wt+(ut[Pr]||0),0));return c.jsxs(c.Fragment,{children:[it("Number of Floors","floors",1),c.jsxs("div",{className:"col-span-full space-y-2",children:[c.jsx("p",{className:"text-[11px] text-gray-500",children:"How many of each unit type sit on a typical floor? This helps group the hardware intent by usage automatically."}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:Bm.map(wt=>c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:[wt," units / floor"]}),c.jsx("input",{type:"number",min:0,value:ut[wt]??0,onChange:Pr=>er(wt,Pr.target.value),className:"w-full p-2 border rounded"})]},wt))}),c.jsxs("div",{className:"text-[11px] text-gray-500",children:["Total units per floor: ",sr]})]})]})}return pe==="Education / School"?c.jsxs(c.Fragment,{children:[it("Number of Floors","floors",1),it("Classrooms per Floor","classroomsPerFloor",0),it("Toilets per Floor","toiletsPerFloor",0),Qe("Admin / Lab Rooms","hasAdminLabs")]}):pe==="Commercial Office"?c.jsxs(c.Fragment,{children:[it("Number of Floors","floors",1),Qe("Open Office Layout","openLayout"),it("Meeting Rooms per Floor","meetingRooms",0),Qe("Service / Back-of-House Areas","hasServiceAreas")]}):pe==="Hospital / Healthcare"?c.jsxs(c.Fragment,{children:[it("Number of Floors","floors",1),it("Patient Rooms per Floor","patientRoomsPerFloor",1),it("Operating Rooms","operatingRooms",0),it("ICU / Isolation Rooms per Floor","icuRoomsPerFloor",0),Qe("Emergency Department","hasEmergencyDept")]}):pe==="Airport / Transport"?c.jsxs(c.Fragment,{children:[it("Number of Floors","floors",1),it("Concourses / Wings","concourses",1),it("Gates per Concourse","gatesPerConcourse",1),it("Security Checkpoints","securityZones",1),Qe("International / Customs Zone","hasInternationalZone")]}):pe==="Hospitality / Hotel"?c.jsxs(c.Fragment,{children:[it("Number of Floors","floors",1),it("Guest Rooms per Floor","roomsPerFloor",1),it("Suites per Floor","suitesPerFloor",0),Qe("Ballroom / Event Spaces","hasBallroom"),Qe("Service / Back-of-House Areas","hasServiceZones")]}):c.jsxs(c.Fragment,{children:[it("Number of Floors","floors",1),it("Typical Rooms per Floor","roomsPerFloor",0)]})};return c.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-sm border border-gray-200 p-6 md:p-8 animate-slideUp",children:[c.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[c.jsx(Y9,{size:24})," Project Context"]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-600",children:["Project Name ",c.jsx("span",{className:"text-xs text-red-500",children:"*"})]}),c.jsx("input",{type:"text",placeholder:"New Project",value:V.name,onChange:ut=>{const sr=K.map(wt=>wt.id===P?{...wt,name:ut.target.value}:wt);E(sr)},className:"p-2.5 border rounded-md placeholder-gray-400"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-600",children:["Facility Type ",c.jsx("span",{className:"text-xs text-red-500",children:"*"})]}),c.jsx("select",{value:V.type,onChange:ut=>{const sr=K.map(wt=>wt.id===P?{...wt,type:ut.target.value}:wt);E(sr)},className:"p-2.5 border rounded-md bg-white",children:Object.keys(iu).map(ut=>c.jsx("option",{value:ut,children:ut},ut))})]})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-3",children:"Architectural Details"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:["Client / Owner ",c.jsx("span",{className:"text-[9px] text-gray-500",children:"(optional)"})]}),c.jsx("input",{type:"text",placeholder:"e.g. Acme Corp",value:((At=V.details)==null?void 0:At.client)||"",onChange:ut=>{const sr=K.map(wt=>wt.id===P?{...wt,details:{...wt.details,client:ut.target.value}}:wt);E(sr)},className:"w-full p-2 border rounded"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:["Architect ",c.jsx("span",{className:"text-[9px] text-gray-500",children:"(optional)"})]}),c.jsx("input",{type:"text",placeholder:"e.g. Design Studio",value:((ur=V.details)==null?void 0:ur.architect)||"",onChange:ut=>{const sr=K.map(wt=>wt.id===P?{...wt,details:{...wt.details,architect:ut.target.value}}:wt);E(sr)},className:"w-full p-2 border rounded"})]}),ye!=="Owner"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:["Hardware Standard ",c.jsx("span",{className:"text-xs text-red-500",children:"*"})]}),c.jsxs("select",{value:V.standard,onChange:ut=>{var Sr;const sr=ut.target.value;let wt=(Sr=V.details)==null?void 0:Sr.jurisdiction;sr.includes("ANSI")?wt="NFPA 101 (Life Safety Code)":sr.includes("EN")&&(wt="IBC 2021 (International Building Code)");const Pr=K.map(jr=>jr.id===P?{...jr,standard:sr,details:{...jr.details,jurisdiction:wt}}:jr);E(Pr)},className:"w-full p-2 border rounded bg-white",children:[c.jsx("option",{value:"ANSI",children:"ANSI / BHMA (US)"}),c.jsx("option",{value:"EN",children:"EN / ISO (EU)"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500",children:["Code Jurisdiction ",c.jsx("span",{className:"text-xs text-red-500",children:"*"})]}),c.jsxs("select",{value:((Ot=V.details)==null?void 0:Ot.jurisdiction)||"IBC 2021",onChange:ut=>{const sr=K.map(wt=>wt.id===P?{...wt,details:{...wt.details,jurisdiction:ut.target.value}}:wt);E(sr)},className:"w-full p-2 border rounded bg-white",children:[c.jsx("option",{children:"IBC 2021 (International Building Code)"}),c.jsx("option",{children:"NFPA 101 (Life Safety Code)"}),c.jsx("option",{children:"Local / Municipal Code"})]})]})]})]})]}),c.jsxs("div",{className:"border-t pt-6",children:[c.jsxs("div",{className:"flex flex-col gap-1 mb-4",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"Instant Door Scheduling (Optional)"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Would you like us to prep a starter schedule automatically?"})]}),c.jsxs("div",{className:"flex items-center gap-3 self-start",children:[c.jsx("span",{className:"text-[11px] font-semibold text-gray-500 uppercase tracking-wide whitespace-nowrap",children:Ve?"Instant scheduling ON":"Instant scheduling OFF"}),c.jsx("button",{type:"button",role:"switch","aria-checked":Ve,onClick:()=>yr(!Ve),className:`relative inline-flex h-5 w-10 shrink-0 items-center rounded-full transition-colors ${Ve?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition ${Ve?"translate-x-[22px]":"translate-x-1"}`})})]})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"Toggle ON if you'd like to answer a few quick questions and auto-populate a starting door schedule."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:`col-span-full text-xs font-bold uppercase tracking-wide rounded px-3 py-2 border ${Ve?"text-indigo-700 bg-indigo-50 border-indigo-100":"text-gray-500 bg-gray-50 border-gray-200"}`,children:["Facility: ",pe]}),Ve?Mt():c.jsx("div",{className:"col-span-full text-sm text-gray-500 border border-dashed border-gray-300 rounded-lg px-3 py-4 bg-gray-50",children:"Instant Door Scheduling is currently turned off. Flip the toggle above if you want Instaspec to generate a starter list based on your building inputs."})]})]}),c.jsx("div",{className:"flex justify-end mt-6",children:c.jsxs("button",{onClick:()=>Oe(1),className:"w-full md:w-auto px-6 py-2.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-medium flex items-center justify-center gap-2",children:["Save & Continue ",c.jsx(Cd,{size:18})]})})]})]})})()}),R===1&&c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6 animate-slideUp",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Door Schedule"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 w-full sm:w-auto",children:[c.jsxs("button",{onClick:()=>Qn(),className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-medium flex items-center justify-center gap-2 whitespace-nowrap",children:[c.jsx(X2,{size:18}),c.jsx("span",{children:"Add Door"})]}),c.jsx("button",{onClick:()=>{const V=Te();if(!(V!=null&&V.doors.length)){Rt("Add a door first","Add at least one door to use bulk assignment.");return}const pe=V.doors[0].id;xr({isOpen:!0,templateId:pe,markPrefix:V.doors[0].mark,locationsText:""})},className:"flex-1 px-4 py-2 border border-indigo-200 text-indigo-700 rounded-md hover:bg-indigo-50 font-medium",children:"Bulk Assign"}),((Fl=Te())==null?void 0:Fl.instantSchedulingEnabled)&&c.jsxs("button",{onClick:tn,className:"flex-1 px-4 py-2 border border-amber-200 text-amber-700 rounded-md hover:bg-amber-50 font-medium flex items-center justify-center gap-2 whitespace-nowrap",title:"Not sure where to begin? Generate a starter door list based on your building.",children:[c.jsx(nM,{size:18})," Instant Door Schedule"]})]})]}),Te().doors.length===0?c.jsxs("div",{className:"text-center py-20 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[c.jsx("p",{className:"text-gray-500",children:"No doors defined yet."}),c.jsx("button",{onClick:()=>Qn(),className:"mt-4 text-indigo-600 font-bold hover:underline",children:"Click to add your first door"})]}):c.jsxs("div",{className:"overflow-x-auto border border-gray-200 rounded-lg hardware-scroll",children:[c.jsx(oY,{doors:Te().doors}),c.jsxs("table",{className:"w-full table-clean min-w-[1000px]",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left p-3 border-b",children:"Mark"}),c.jsx("th",{className:"text-left p-3 border-b",children:"Location (Zone - Lvl - Room)"}),c.jsx("th",{className:"text-left p-3 border-b",children:"Qty"}),c.jsx("th",{className:"text-left p-3 border-b",children:"WxH (mm)"}),c.jsx("th",{className:"text-left p-3 border-b",children:"Fire"}),c.jsx("th",{className:"text-left p-3 border-b",children:"Acoustic"}),c.jsx("th",{className:"text-left p-3 border-b",children:"Type"}),c.jsx("th",{className:"text-left p-3 border-b",children:"Actions"})]})}),c.jsx("tbody",{children:Te().doors.map(V=>{var pe,je;return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"p-3 border-b font-bold text-indigo-600",children:V.mark}),c.jsxs("td",{className:"p-3 border-b align-top",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:V.roomName}),c.jsxs("div",{className:"text-xs text-gray-400",children:[V.zone,"  Lvl ",V.level]}),c.jsxs("div",{className:"text-[11px] text-indigo-600 font-semibold mt-1 relative",children:[c.jsx("button",{onClick:()=>Qr(Fr===V.id?null:V.id),className:"hover:underline",children:Fr===V.id?"Hide locations":(pe=V.additionalLocations)!=null&&pe.length?`+${V.additionalLocations.length} more locations`:"Add additional locations"}),Fr===V.id&&c.jsxs("div",{className:"mt-2 border border-indigo-200 bg-white rounded-lg shadow-xl p-3 text-xs text-gray-600 space-y-2",children:[(je=V.additionalLocations)!=null&&je.length?V.additionalLocations.map((Ve,it)=>c.jsxs("div",{className:"grid grid-cols-[1fr_80px_1fr_auto] gap-2 items-center",children:[c.jsx("input",{type:"text",value:Ve.zone,onChange:Qe=>_r(V.id,it,"zone",Qe.target.value),className:"p-1 border rounded",placeholder:"Zone"}),c.jsx("input",{type:"text",value:Ve.level,onChange:Qe=>_r(V.id,it,"level",Qe.target.value),className:"p-1 border rounded",placeholder:"Lvl"}),c.jsx("input",{type:"text",value:Ve.roomName,onChange:Qe=>_r(V.id,it,"roomName",Qe.target.value),className:"p-1 border rounded",placeholder:"Room"}),c.jsx("button",{onClick:()=>qn(V.id,it),className:"text-red-500 hover:text-red-700 text-[11px]",children:"Remove"})]},it)):c.jsx("p",{className:"text-[11px] text-gray-500",children:"No additional locations yet."}),c.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100",children:[c.jsx("button",{onClick:()=>Lr(V.id),className:"text-indigo-600 hover:underline text-[11px]",children:"+ Add Location"}),c.jsx("button",{onClick:()=>Qr(null),className:"text-gray-500 hover:text-gray-700 text-[11px]",children:"Close"})]})]})]})]}),c.jsx("td",{className:"p-3 border-b",children:V.qty}),c.jsxs("td",{className:"p-3 border-b",children:[V.width," x ",V.height]}),c.jsx("td",{className:"p-3 border-b",children:c.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${V.fire>0?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600"}`,children:[V.fire," min"]})}),c.jsx("td",{className:"p-3 border-b text-sm text-gray-500",children:V.stc?c.jsxs("div",{className:"flex flex-col gap-0.5",children:[c.jsxs("span",{children:[V.stc," dB"]}),parseInt(V.stc,10)>=O8&&c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 text-[10px] font-semibold",children:"STC Package"})]}):"-"}),c.jsx("td",{className:"p-3 border-b text-sm",children:c.jsxs("div",{className:"flex flex-col gap-0.5",children:[c.jsxs("span",{children:[V.material," / ",V.config]}),V.ada&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-teal-50 text-teal-700 text-[10px] font-semibold w-fit",children:[c.jsx(Q4,{size:12})," ADA"]})]})}),c.jsx("td",{className:"p-3 border-b",children:c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>Tn(V.id),className:"p-2 hover:bg-gray-100 rounded text-gray-500",title:"Bulk Duplicate",children:c.jsx(DT,{size:16})}),c.jsx("button",{onClick:()=>Qn(V),className:"p-2 hover:bg-gray-100 rounded text-gray-500",title:"Edit",children:c.jsx(z9,{size:16})}),c.jsx("button",{onClick:()=>on(V.id),className:"p-2 hover:bg-red-50 rounded text-red-500",title:"Delete",children:c.jsx(Dh,{size:16})})]})})]},V.id)})})]})]}),c.jsxs("div",{className:"flex justify-between mt-6",children:[c.jsxs("button",{type:"button",onClick:()=>Oe(0),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50",children:[c.jsx(Z4,{size:16}),"Back"]}),c.jsxs("button",{onClick:zs,className:"w-full md:w-auto px-6 py-2.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-medium flex items-center justify-center gap-2",children:["Generate Hardware Sets ",c.jsx(Cd,{size:18})]})]})]}),R===2&&c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-auto lg:h-[700px] animate-slideUp",children:[c.jsxs("div",{className:"w-full lg:w-72 bg-white border border-gray-200 rounded-xl overflow-hidden flex flex-col shrink-0 h-48 lg:h-auto",children:[c.jsx("div",{className:"bg-gray-50 p-4 border-b border-gray-200 font-bold text-gray-500 uppercase text-xs tracking-wider",children:"Hardware Sets"}),_e.length>0&&ye!=="Owner"&&c.jsxs("div",{className:"p-2 bg-indigo-50 border-b border-indigo-100",children:[c.jsx("div",{className:"text-xs font-bold text-indigo-700 mb-1 px-2",children:"Library Templates"}),_e.map(V=>c.jsxs("button",{onClick:()=>cs(V),className:"w-full text-left text-xs px-2 py-1 text-gray-600 hover:text-indigo-600 hover:bg-indigo-100 rounded",children:["+ ",V.name]},V.id))]}),c.jsx("div",{className:"overflow-y-auto flex-1",children:Te().sets.map(V=>c.jsxs("div",{className:"p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer group",children:[c.jsx("div",{className:"font-bold text-gray-900",children:V.id}),c.jsx("div",{className:"text-sm text-gray-500 truncate",children:V.name})]},V.id))})]}),c.jsxs("div",{className:"flex-1 bg-white border border-gray-200 rounded-xl flex flex-col overflow-hidden min-h-[500px]",children:[c.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:Te().sets.map(V=>{const pe=Te().doors.find(ut=>V.doors.includes(ut.id)),je=Te().doors.filter(ut=>V.doors.includes(ut.id)),Ve=je.length>0&&je.every(ut=>ut.material==="Glass");Array.from(new Set(je.map(ut=>ut.material)));const it=vA(je),Qe=pe||EY(V,it),Mt=V.items.filter(ut=>ut.category==="Handles").some(ut=>(ut.type||"").toLowerCase().includes("lever")),At=Ve&&Mt,ur=Ve&&it.requiresPanic,Ot=NY(V,it);return c.jsxs("div",{className:"mb-12",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-2",children:[c.jsxs("h2",{className:"text-xl font-bold",children:[V.id,": ",V.name]}),c.jsxs("div",{className:"flex gap-2",children:[ye!=="Owner"&&c.jsxs("button",{onClick:()=>La(V),className:"text-xs flex items-center gap-1 text-indigo-600 bg-indigo-50 px-2 py-1 rounded hover:bg-indigo-100",title:"Save to Library",children:[c.jsx(B9,{size:12})," Save Template"]}),c.jsxs("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm font-bold",children:[Te().doors.filter(ut=>V.doors.includes(ut.id)).length," Doors"]})]})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[c.jsx("div",{className:"shrink-0",children:c.jsx(qY,{door:Qe,hardwareSet:V})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-4 overflow-x-auto hardware-scroll",children:c.jsxs("div",{className:"min-w-[900px]",children:[c.jsxs("div",{className:"grid grid-cols-[40px_80px_80px_160px_160px_120px_1.2fr_140px_80px_50px] bg-gray-50 border-b border-gray-200 px-4 py-3 text-xs font-bold text-gray-500 uppercase gap-3",children:[c.jsx("div",{}),c.jsx("div",{children:"Ref"}),c.jsx("div",{children:"CSI"}),c.jsx("div",{children:"Product Type"}),c.jsx("div",{children:"Style"}),c.jsx("div",{children:"Finish"}),c.jsx("div",{children:"Specification"}),c.jsx("div",{children:"Acoustic"}),c.jsx("div",{children:"Qty"}),c.jsx("div",{})]}),Object.keys(uo).map(ut=>{const sr=V.items.filter(wt=>uo[ut].includes(wt.category));return sr.length===0?null:c.jsxs(su.Fragment,{children:[c.jsx("div",{className:"bg-gray-100 p-1 pl-2 font-bold text-xs text-gray-500 uppercase border-b border-gray-200 col-span-full",style:{gridColumn:"1 / -1"},children:fY(sr[0].category)}),sr.map((wt,Pr)=>{var xe,Pe;const Sr=V.items.indexOf(wt),jr=wt.category||"Hinges",bn=eg[jr],ks=_v[Te().standard];let Tr=(bn==null?void 0:bn.types)||[];const ra=wt.autoTag==="card-reader-kit",Jn=`${V.id}-${Sr}`;let ei=!!z[Jn]?"Lock type reset: previous lock not compatible with selected material.":null;jr==="Hinges"&&(Ve?Tr=Tr.filter(Ee=>Ee.name==="Patch Fitting"):Tr=Tr.filter(Ee=>Ee.name!=="Patch Fitting"));let ar=wt.type;if(jr==="Hinges"&&ye!=="Owner"){if(Ve&&ar!=="Patch Fitting"){const Ee="Patch Fitting";Tr.some($e=>$e.name===Ee)&&(setTimeout(()=>Zn(V.id,Sr,"type",Ee),0),ar=Ee)}else if(!Ve&&ar==="Patch Fitting"){const Ee=(xe=Tr[0])==null?void 0:xe.name;Ee&&Ee!==ar&&(setTimeout(()=>Zn(V.id,Sr,"type",Ee),0),ar=Ee)}}if(jr==="Locks"){let Ee=pY(it.materials);if(it.requiresPanic?Ee=Ve?["Patch Lock"]:["Panic Bar"]:it.isEscapeRoute&&(Ee=Ee.filter($e=>!$e.toLowerCase().includes("deadbolt"))),Ee.length||(Ee=Tr.map($e=>$e.name)),Tr=Tr.filter($e=>Ee.includes($e.name)),!Tr.some($e=>$e.name===ar)&&Tr.length>0){const $e=Tr[0].name;setTimeout(()=>{Zn(V.id,Sr,"type",$e),Hr(Jn),sn({title:"Lock type reset",message:"The previously selected lock wasn't compatible with this door material, so the type was updated."})},0),ar=$e,ei="Lock type reset: previous lock not compatible with selected material/use."}if(At){const $e="Patch Lock",Ft="Center Patch Lock";ar!==$e&&Tr.some(Bt=>Bt.name===$e)&&(setTimeout(()=>Zn(V.id,Sr,"type",$e),0),ar=$e),(wt.style||"")!==Ft&&setTimeout(()=>Zn(V.id,Sr,"style",Ft),0),ei||(ei="Glass lever handles require a center patch lock with lever prep.")}}if(jr==="Electrified"){let Ee=mY(it.materials);const $e=new Set([...Ee,...B8]);if(Tr=Tr.filter(_t=>$e.has(_t.name)),!Tr.some(_t=>_t.name===ar)&&Tr.length>0){const _t=Tr[0].name;setTimeout(()=>{Zn(V.id,Sr,"type",_t),Hr(Jn)},0),ar=_t,ei="Electrified option reset for compliance."}const Ft=new Set(V.items.filter(_t=>_t.category==="Electrified"&&_t!==wt).map(_t=>_t.type)),Bt=new Set(["Magnetic Lock","Electric Strike"]);if(Tr=Tr.filter(_t=>!(Bt.has(_t.name)&&Ft.has(_t.name)&&_t.name!==ar)),ra){const _t=["Card Reader","Push Button"];Tr=Tr.filter(qt=>_t.includes(qt.name))}}if(jr==="Handles"&&ur){const Ee="Panic Push Pull Handle";ar!==Ee&&Tr.some($e=>$e.name===Ee)&&(setTimeout(()=>Zn(V.id,Sr,"type",Ee),0),ar=Ee),ei||(ei="Glass escape routes require L-shaped panic push/pull hardware.")}const ti=bn==null?void 0:bn.types.find(Ee=>Ee.name===ar),_=Te().standard||"ANSI";let U=(ti||{styles:[]}).styles||[],ae=U;if(jr==="Locks"&&ar==="Mortise Lock"&&ti)if(_==="ANSI"&&ti.ansiStyles){U=ti.ansiStyles,ae=ti.ansiStyles;const Ee=((Pe=V.name)==null?void 0:Pe.toLowerCase())||"";let $e=null;Ee.includes("classroom")||Ee.includes("lecture")?$e="Classroom":Ee.includes("storeroom")||Ee.includes("storage")||Ee.includes("warehouse")?$e="Storeroom":Ee.includes("office")?$e="Office":Ee.includes("entrance")||Ee.includes("lobby")||Ee.includes("main")?$e="Entrance":Ee.includes("restroom")||Ee.includes("bathroom")||Ee.includes("toilet")?$e="Privacy":Ee.includes("corridor")||Ee.includes("passage")||Ee.includes("hallway")?$e="Passage":Ee.includes("apartment")||Ee.includes("unit")?$e="Apartment":Ee.includes("dormitory")||Ee.includes("dorm")||Ee.includes("hostel")?$e="Dormitory":(Ee.includes("hospital")||Ee.includes("clinic")||Ee.includes("medical"))&&($e="Institutional"),$e&&wt.style!==$e&&setTimeout(()=>Zn(V.id,Sr,"style",$e),0)}else _==="EN"&&ti.enStyles&&(U=ti.enStyles,ae=ti.enStyles);if(jr==="Electrified"&&it.requiresFailSafe){const Ee=U.filter($e=>$e.toLowerCase().includes("fail-safe")||$e.toLowerCase().includes("rex"));Ee.length>0&&(ae=Ee)}if(jr==="Cylinders"&&ar==="Cylinder")if(_==="ANSI"){ae=U.filter($e=>$e==="Rim Cylinder"||$e==="Mortise Cylinder");const Ee=V.items.find($e=>$e.category==="Locks");Ee&&Ee.type==="Mortise Lock"&&wt.style!=="Mortise Cylinder"&&setTimeout(()=>Zn(V.id,Sr,"style","Mortise Cylinder"),0)}else _==="EN"&&(ae=U.filter(Ee=>Ee==="Euro Profile"||Ee==="Oval Profile"));return c.jsxs("div",{className:"grid grid-cols-[40px_80px_80px_160px_160px_120px_1.2fr_140px_80px_50px] border-b border-gray-100 px-4 py-2 items-center gap-3 hover:bg-gray-50 relative",children:[c.jsx("div",{className:"flex justify-center text-gray-400",children:c.jsx(SA,{category:jr})}),ye==="Owner"?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:wt.ref}),c.jsx("div",{className:"text-xs text-gray-400",children:(bn==null?void 0:bn.csi)||""}),c.jsx("div",{className:"text-sm text-gray-600",children:ar}),c.jsx("div",{className:"text-sm text-gray-600",children:wt.style}),c.jsx("div",{className:"text-sm text-gray-600",children:wt.finish}),c.jsx("div",{className:"text-sm text-gray-500",children:wt.spec}),c.jsx("div",{className:"text-xs text-gray-600",children:wt.acousticContribution||""}),c.jsx("div",{className:"text-sm text-gray-900",children:wt.qty}),c.jsx("div",{})]}):c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"text",value:wt.ref,onChange:Ee=>Zn(V.id,Sr,"ref",Ee.target.value),className:"w-full p-1 border rounded text-xs"}),c.jsx("div",{className:"text-xs text-gray-400",children:(bn==null?void 0:bn.csi)||""}),c.jsxs("div",{className:"flex flex-col gap-0.5",children:[c.jsx("select",{value:ar,onChange:Ee=>Zn(V.id,Sr,"type",Ee.target.value),className:"w-full p-1 border rounded text-xs bg-white",children:Tr.map(Ee=>c.jsx("option",{value:Ee.name,children:Ee.name},Ee.name))}),(jr==="Locks"||jr==="Electrified")&&ei&&c.jsx("span",{className:"text-[10px] text-orange-600",children:ei})]}),c.jsx("select",{value:wt.style,onChange:Ee=>Zn(V.id,Sr,"style",Ee.target.value),className:"w-full p-1 border rounded text-xs bg-white",children:ae.map(Ee=>c.jsx("option",{value:Ee,children:Ee},Ee))}),c.jsx("select",{value:wt.finish,onChange:Ee=>Zn(V.id,Sr,"finish",Ee.target.value),className:"w-full p-1 border rounded text-xs bg-white",children:(Ow(jr,Te().standard)||ks).map(Ee=>c.jsx("option",{value:Ee,children:Ee},Ee))}),c.jsx("input",{type:"text",value:wt.spec,onChange:Ee=>Zn(V.id,Sr,"spec",Ee.target.value),className:"w-full p-1 border rounded text-xs"}),c.jsx("div",{className:"flex justify-start",children:wt.acousticContribution?c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-[10px] font-semibold",children:wt.acousticContribution}):c.jsx("span",{className:"text-gray-300 text-[10px]",children:"-"})}),c.jsx("input",{type:"text",value:wt.qty,onChange:Ee=>Zn(V.id,Sr,"qty",Ee.target.value),className:"w-full p-1 border rounded text-xs"}),c.jsx("button",{onClick:()=>jl(V.id,Sr),className:"text-red-400 hover:text-red-600 flex justify-center p-2",children:c.jsx(Dh,{size:14})})]})]},Pr)})]},ut)}),V.items.filter(ut=>!Object.keys(uo).some(sr=>uo[sr].includes(ut.category))).map((ut,sr)=>c.jsxs("div",{className:"grid grid-cols-[30px_60px_60px_140px_140px_100px_1fr_120px_60px_40px] border-b border-gray-100 p-2 items-center hover:bg-gray-50 relative",children:[c.jsx("div",{className:"flex justify-center text-gray-400",children:c.jsx(SA,{category:ut.category})}),c.jsx("input",{type:"text",value:ut.ref,className:"w-full p-1 border rounded text-xs",disabled:!0}),c.jsx("div",{className:"text-xs text-gray-400"}),c.jsx("div",{className:"text-sm text-gray-600",children:ut.type}),c.jsx("div",{className:"text-sm text-gray-600",children:ut.style}),c.jsx("div",{className:"text-sm text-gray-600",children:ut.finish}),c.jsx("div",{className:"text-sm text-gray-500",children:ut.spec}),c.jsx("div",{className:"text-xs text-gray-600",children:ut.acousticContribution||""}),c.jsx("div",{className:"text-sm text-gray-900",children:ut.qty})]},"other-"+sr))]})}),ye!=="Owner"&&c.jsxs("button",{onClick:()=>Pa(V.id),className:"text-sm font-medium text-indigo-600 hover:underline flex items-center gap-1 mb-4 px-2 py-1",children:[c.jsx(X2,{size:14})," Add Item"]}),Ot.length>0&&c.jsx("div",{className:"mt-2 text-sm text-orange-700 bg-orange-50 border border-orange-200 rounded p-2",children:Ot.map((ut,sr)=>c.jsxs("div",{children:[" ",ut]},sr))}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Operational Description"}),c.jsx("textarea",{value:V.operation,readOnly:ye==="Owner",onChange:ut=>{const sr=K.map(wt=>wt.id===P?{...wt,sets:wt.sets.map(Pr=>Pr.id===V.id?{...Pr,operation:ut.target.value}:Pr)}:wt);E(sr)},rows:2,className:"w-full p-2 border border-gray-300 rounded text-sm bg-gray-50"})]})]})]})]},V.id)})}),c.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-between",children:[c.jsxs("button",{onClick:()=>Oe(1),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded hover:bg-gray-100 flex items-center gap-2",children:[c.jsx(Z4,{size:16})," Back"]}),c.jsxs("button",{onClick:ht,className:"px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-2 font-medium",children:["Finish & Review ",c.jsx(Cd,{size:16})]})]})]})]}),R===3&&c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 md:p-8 animate-slideUp",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Specification Review"}),c.jsxs("div",{className:"w-full md:w-auto flex flex-col gap-3",children:[c.jsxs("div",{className:"hidden md:flex gap-3",children:[ye!=="Owner"&&c.jsxs("button",{onClick:()=>Za(Eo),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 font-bold flex items-center justify-center gap-2 shadow-sm text-sm",children:[c.jsx(k1,{size:18})," Export BIM Data"]}),c.jsxs("button",{onClick:ci,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-bold flex items-center justify-center gap-2 shadow-sm text-sm",children:[c.jsx(ev,{size:18})," Print Spec Sheet"]}),c.jsxs("button",{onClick:()=>Za(Vs),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-bold flex items-center justify-center gap-2 shadow-sm",children:[c.jsx(C1,{size:18})," Export Schedule"]}),t&&c.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 border border-red-200 text-red-600 rounded-lg hover:bg-red-50 font-semibold flex items-center justify-center gap-2 shadow-sm text-sm",children:[c.jsx(fo,{size:18})," Report an Error"]})]}),c.jsxs("div",{className:"md:hidden",children:[c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[c.jsxs("button",{type:"button",onClick:()=>X(V=>!V),className:"w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-gray-700 bg-white",children:[c.jsx("span",{children:"Download Files"}),c.jsx(Id,{size:18,className:`transition-transform ${ke?"rotate-180":""}`})]}),ke&&c.jsxs("div",{className:"border-t border-gray-200 bg-gray-50 px-4 py-3 space-y-2",children:[ye!=="Owner"&&c.jsxs("button",{onClick:()=>{Za(Eo),X(!1)},className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg text-sm font-semibold flex items-center justify-center gap-2",children:[c.jsx(k1,{size:16})," Export BIM Data"]}),c.jsxs("button",{onClick:()=>{ci(),X(!1)},className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-semibold flex items-center justify-center gap-2",children:[c.jsx(ev,{size:16})," Print Spec Sheet"]}),c.jsxs("button",{onClick:()=>{Za(Vs),X(!1)},className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-semibold flex items-center justify-center gap-2",children:[c.jsx(C1,{size:16})," Export Schedule"]})]})]}),t&&c.jsxs("button",{onClick:()=>u(!0),className:"w-full mt-3 px-4 py-2 border border-red-200 text-red-600 rounded-lg hover:bg-red-50 font-semibold flex items-center justify-center gap-2 shadow-sm text-sm",children:[c.jsx(fo,{size:18})," Report an Error"]})]}),!h&&t&&c.jsxs("div",{className:"text-xs text-gray-500",children:["Downloads used: ",De??0," / ",Ne]}),Se&&c.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2",children:Se})]})]}),Ja().length>0?c.jsxs("div",{className:"mb-8 p-4 bg-red-50 border border-red-200 rounded-xl",children:[c.jsxs("h3",{className:"font-bold text-red-700 flex items-center gap-2 mb-2",children:[c.jsx(Eh,{size:20})," Code Compliance Warnings"]}),c.jsx("div",{className:"space-y-2",children:Ja().map((V,pe)=>c.jsxs("div",{className:"flex gap-2 text-sm text-red-800 items-start",children:[c.jsxs("span",{className:"font-bold shrink-0",children:["[",V.set,"]"]}),c.jsx("span",{children:V.msg})]},pe))})]}):c.jsxs("div",{className:"mb-8 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center gap-3 text-green-800",children:[c.jsx(eu,{size:24}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold",children:"Code Compliance Verified"}),c.jsx("div",{className:"text-sm",children:"All fire and egress logic checks passed."})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[c.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Total Doors"}),c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:Te().doors.length})]}),c.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[c.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Hardware Sets"}),c.jsx("div",{className:"text-3xl font-bold text-indigo-600",children:Te().sets.length})]}),c.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[c.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Jurisdiction"}),c.jsx("div",{className:"text-lg font-bold text-gray-800",children:((cr=Te().details)==null?void 0:cr.jurisdiction)||"Standard"})]})]}),c.jsx(ex,{projectId:P,projectDoors:Te().doors||[],children:c.jsx(WY,{facilityType:Te().type,onNavigate:()=>q(5)})})]})]}),R===5&&P&&c.jsx(ex,{projectId:P,projectDoors:Te().doors||[],children:c.jsx(JG,{projectDoors:Te().doors||[],projectName:Te().name||"Untitled Project",projectStandard:Te().mkStandard||"ANSI_BHMA",showNotice:Rt,showConfirm:Dt})})]}),S==="wizard"&&c.jsx("footer",{className:"bg-slate-900/95 text-white px-4 md:px-8 py-8 shadow-inner",children:c.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col gap-4",children:[c.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[c.jsx("div",{className:"hidden md:flex gap-3 justify-center items-stretch",children:sc.map(V=>c.jsxs("div",{className:"flex-1 min-w-[160px] bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-center",children:[c.jsx("div",{className:"text-lg font-extrabold tracking-tight",children:Number(V.value).toLocaleString()}),c.jsx("div",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:V.metric})]},`wizard-stat-desktop-${V.id}`))}),c.jsxs("div",{className:"md:hidden",children:[c.jsx("div",{className:"grid grid-cols-2 gap-3",children:sc.slice(0,6).map(V=>c.jsxs("div",{className:"flex flex-col items-center justify-center bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-center min-h-[90px]",children:[c.jsx("div",{className:"text-xl font-extrabold tracking-tight",children:Number(V.value).toLocaleString()}),c.jsx("div",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:V.metric})]},`wizard-stat-mobile-${V.id}`))}),sc[6]&&c.jsxs("div",{className:"mt-3 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-center",children:[c.jsx("div",{className:"text-xl font-extrabold tracking-tight",children:Number(sc[6].value).toLocaleString()}),c.jsx("div",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:sc[6].metric})]})]})]}),c.jsxs("div",{className:"text-center text-xs text-white/60",children:["Engineered with care by"," ",c.jsx("a",{href:"https://techarix.com",target:"_blank",rel:"noreferrer",className:"text-white font-semibold underline underline-offset-2 decoration-white/40 hover:text-sky-300",children:"Techarix"})]})]})}),S==="dashboard"&&c.jsx("footer",{className:"bg-slate-900 text-white border-t border-gray-200 px-4 md:px-8 py-10",children:c.jsxs("div",{className:"max-w-7xl mx-auto w-full space-y-6",children:[c.jsx("h3",{className:"font-bold text-white/70 uppercase text-sm mb-4 tracking-[0.3em]",children:"Coming Soon Features"}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 p-6 border border-white/10 rounded-2xl flex flex-col items-center justify-center text-white/80 bg-white/5 shadow-inner",children:[c.jsx(Z9,{size:24,className:"mb-2 text-sky-300"}),c.jsx("span",{className:"font-bold",children:"Upload Floor Plan"}),c.jsx("span",{className:"text-xs text-white/60",children:"AI Extraction"})]}),c.jsxs("div",{className:"flex-1 p-6 border border-white/10 rounded-2xl flex flex-col items-center justify-center text-white/80 bg-white/5 shadow-inner",children:[c.jsx(eM,{size:24,className:"mb-2 text-indigo-300"}),c.jsx("span",{className:"font-bold",children:"Instant Schedule"}),c.jsx("span",{className:"text-xs text-white/60",children:"One-click Generation"})]})]}),c.jsxs("div",{className:"text-center text-xs text-white/60",children:["Engineered with care by"," ",c.jsx("a",{href:"https://techarix.com",target:"_blank",rel:"noreferrer",className:"text-white font-semibold underline underline-offset-2 decoration-white/40 hover:text-sky-300",children:"Techarix"})]})]})}),ge&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 sm:p-6",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[c.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-100 flex justify-between items-center shrink-0",children:[c.jsx("h3",{className:"text-xl font-bold",children:"Edit Door"}),c.jsx("button",{onClick:()=>ve(!1),className:"text-gray-400 hover:text-gray-600 p-2",children:c.jsx(ll,{size:24})})]}),c.jsxs("div",{className:"p-4 md:p-6 space-y-6 overflow-y-auto flex-1",children:[c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-3",children:"Architectural Location"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Zone / Building"}),c.jsx("input",{type:"text",value:Ke.zone,onChange:V=>Pt({...Ke,zone:V.target.value}),className:"p-2 border rounded",placeholder:"e.g. Tower A"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Level / Floor"}),c.jsx("input",{type:"text",value:Ke.level,onChange:V=>Pt({...Ke,level:V.target.value}),className:"p-2 border rounded",placeholder:"e.g. 01"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Room Name"}),c.jsx(BY,{options:((eo=iu[Te().type])==null?void 0:eo.usages)||[],value:Ke.roomName,onChange:V=>Pt({...Ke,roomName:V,use:V||Ke.use}),placeholder:"Select or type..."})]})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500 mb-1 block",children:"Additional Locations"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Manage locations directly from the door schedule by expanding the +N more locations dropdown."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Door Mark / ID"}),c.jsx("input",{type:"text",value:Ke.mark,onChange:V=>Pt({...Ke,mark:V.target.value}),className:"p-2.5 border rounded"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Qty"}),c.jsx("input",{type:"number",value:1+(((Xo=Ke.additionalLocations)==null?void 0:Xo.length)||0),readOnly:!0,className:"p-2.5 border rounded bg-gray-100 text-gray-500"}),c.jsx("span",{className:"text-[10px] text-gray-500",children:"Calculated from location list"})]})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsx("div",{className:"text-xs font-bold uppercase text-gray-400 mb-4",children:"Dimensions & Performance"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Width (mm)"}),c.jsx("input",{type:"number",value:Ke.width,onChange:V=>{Pt({...Ke,width:V.target.value}),Ia("width",V.target.value)},className:`w-full p-2.5 border rounded ${pr.width?"border-red-300 bg-red-50":""}`}),pr.width&&c.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[c.jsx(fo,{size:12})," ",pr.width]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Height (mm)"}),c.jsx("input",{type:"number",value:Ke.height,onChange:V=>{Pt({...Ke,height:V.target.value}),Ia("height",V.target.value)},className:`w-full p-2.5 border rounded ${pr.height?"border-red-300 bg-red-50":""}`}),pr.height&&c.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[c.jsx(fo,{size:12})," ",pr.height]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Thickness (mm)"}),c.jsx("input",{type:"number",value:Ke.thickness,onChange:V=>Pt({...Ke,thickness:parseInt(V.target.value)||0,thicknessAuto:!1}),className:"w-full p-2.5 border rounded"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Weight (kg) - Auto"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"number",value:Ke.weight,onChange:V=>{Pt({...Ke,weight:parseInt(V.target.value)||0,weightAuto:!1})},className:"w-full p-2.5 border rounded"}),c.jsx(K9,{size:14,className:"absolute right-3 top-3.5 text-gray-400"})]}),c.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:"Estimated weight; verify with manufacturer"})]})]}),ne&&c.jsxs("div",{className:"mt-2 text-sm text-amber-800 bg-amber-50 border border-amber-200 rounded p-3 flex items-start gap-2",children:[c.jsx(Eh,{size:16,className:"mt-0.5"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold",children:"ADA Clearance Warning"}),c.jsx("div",{children:oe}),c.jsxs("div",{className:"text-[11px] text-amber-700 mt-1",children:["Clear opening assumes ",_A,"mm deduction for hinges/handles."]})]})]}),Ir&&c.jsxs("div",{className:"mt-2 text-orange-600 text-sm bg-orange-50 p-2 rounded border border-orange-100 flex items-center gap-2",children:[c.jsx(Eh,{size:14})," ",Ir]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 border-t pt-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Acoustic Rating (STC/dB)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(BT,{size:16,className:"text-gray-400"}),c.jsx("input",{type:"number",value:Ke.stc,onChange:V=>Pt({...Ke,stc:V.target.value}),className:"w-full p-2.5 border rounded",placeholder:"35"})]}),c.jsxs("div",{className:"text-[10px] text-indigo-600 mt-1",children:["Recommended for ",Ke.roomName||"Selected Room",": ",mA[Ke.roomName]||30," dB"]})]}),c.jsx("div",{className:"flex items-center pt-6",children:c.jsxs("div",{onClick:()=>Pt({...Ke,ada:!Ke.ada}),className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("div",{className:`w-5 h-5 border rounded flex items-center justify-center ${Ke.ada?"bg-blue-600 border-blue-600 text-white":""}`,children:Ke.ada&&c.jsx(eu,{size:14})}),c.jsxs("span",{className:"text-sm font-bold text-blue-700 flex items-center gap-1",children:[c.jsx(Q4,{size:16})," ADA Compliant"]})]})})]}),c.jsxs("div",{className:"mt-4 border-t pt-4",children:[c.jsxs("label",{className:"text-xs font-bold uppercase text-gray-500 mb-2 block",children:["Door Handing (",Te().standard," / Standard)"]}),c.jsx(HY,{value:Ke.handing,standard:Te().standard,onChange:V=>Pt({...Ke,handing:V})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500 mb-2 block",children:"Material"}),c.jsxs("select",{value:Ke.material,onChange:V=>Pt({...Ke,material:V.target.value}),className:"w-full p-2.5 border rounded bg-white",children:[c.jsx("option",{value:"Timber",children:"Timber / Wood"}),c.jsx("option",{value:"Metal",children:"Hollow Metal"}),c.jsx("option",{value:"Glass",children:"Glass"}),c.jsx("option",{value:"Aluminum",children:"Aluminum"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500 mb-2 block",children:"Configuration"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{onClick:()=>Pt({...Ke,config:"Single"}),className:`flex-1 border rounded p-2 flex flex-col items-center gap-1 cursor-pointer ${Ke.config==="Single"?"border-indigo-600 bg-indigo-50 text-indigo-600 ring-1 ring-indigo-600":"hover:bg-gray-50"}`,children:[c.jsx(uu,{size:20})," ",c.jsx("span",{className:"text-sm",children:"Single"})]}),c.jsxs("div",{onClick:()=>Pt({...Ke,config:"Double"}),className:`flex-1 border rounded p-2 flex flex-col items-center gap-1 cursor-pointer ${Ke.config==="Double"?"border-indigo-600 bg-indigo-50 text-indigo-600 ring-1 ring-indigo-600":"hover:bg-gray-50"}`,children:[c.jsx(Jy,{size:20})," ",c.jsx("span",{className:"text-sm",children:"Double"})]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsx("div",{onClick:()=>Ke.material!=="Glass"&&Pt({...Ke,visionPanel:!Ke.visionPanel}),className:`w-5 h-5 border rounded cursor-pointer flex items-center justify-center ${Ke.visionPanel?"bg-indigo-600 border-indigo-600 text-white":"bg-white"} ${Ke.material==="Glass"?"opacity-50 cursor-not-allowed bg-gray-100":""}`,children:Ke.visionPanel&&c.jsx(eu,{size:14})}),c.jsx("label",{className:`text-sm font-medium cursor-pointer ${Ke.material==="Glass"?"text-gray-400":"text-gray-700"}`,onClick:()=>Ke.material!=="Glass"&&Pt({...Ke,visionPanel:!Ke.visionPanel}),children:Ke.material==="Glass"?"Vision Panel N/A for Glass Doors":"Include Vision Panel / Glazing"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Fire Rating"}),c.jsx("select",{value:Ke.fire,onChange:V=>Pt({...Ke,fire:parseInt(V.target.value)}),className:"w-full p-2.5 border rounded bg-white",children:Te().standard==="ANSI"?c.jsxs(c.Fragment,{children:[c.jsx("option",{value:"0",children:"Non-Rated"}),c.jsx("option",{value:"20",children:"20 min"}),c.jsx("option",{value:"45",children:"45 min"}),c.jsx("option",{value:"60",children:"60 min"}),c.jsx("option",{value:"90",children:"90 min"}),c.jsx("option",{value:"180",children:"3 Hour"})]}):c.jsxs(c.Fragment,{children:[c.jsx("option",{value:"0",children:"None"}),c.jsx("option",{value:"30",children:"30 min"}),c.jsx("option",{value:"60",children:"60 min"}),c.jsx("option",{value:"90",children:"90 min"}),c.jsx("option",{value:"120",children:"120 min"})]})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Usage Type"}),c.jsx("select",{value:Ke.use,onChange:V=>Pt({...Ke,use:V.target.value}),className:"w-full p-2.5 border rounded bg-white",children:(Ra=iu[Te().type])==null?void 0:Ra.usages.map(V=>c.jsx("option",{value:V,children:V},V))})]})]}),D8(Ke.use)&&Number(Ke.fire)===0&&c.jsxs("div",{className:"mt-3 rounded border border-blue-200 bg-blue-50 px-3 py-2 text-xs text-blue-800 flex items-center gap-2",children:[c.jsx(Jy,{size:14}),F8]}),Ke.config==="Double"&&c.jsx("div",{className:"text-[11px] text-gray-500",children:Ke.fire>0?"Fire-rated pairs default to rebated meeting stiles per EN 1634 / ANSI UL10C.":"Non-rated pairs use a flush meeting stile between leaves."}),Jt&&c.jsxs("div",{className:`mt-4 p-3 rounded-lg border flex gap-3 items-start ${Jt.type==="warning"?"bg-orange-50 border-orange-200 text-orange-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:[Jt.type==="warning"?c.jsx(R9,{size:18,className:"shrink-0 mt-0.5"}):c.jsx(tM,{size:18,className:"shrink-0 mt-0.5"}),c.jsxs("div",{className:"text-sm leading-relaxed",children:[c.jsx("strong",{children:"Code Check:"})," ",Jt.msg]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white mt-4",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 flex-wrap",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Hardware Control Strategy"}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Based on ",c.jsx("span",{className:"font-semibold",children:Ke.use||Ke.roomName||"this use"})," we recommend a"," ",c.jsx("span",{className:"font-semibold text-indigo-600",children:W})," package."]})]}),c.jsx("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 rounded-full px-2 py-0.5",children:"ANSI / EN Guidance"})]}),c.jsx("div",{className:"grid sm:grid-cols-2 gap-3 mt-3",children:vY.map(V=>{const pe=Ke.hardwareIntent===V.id,je=W===V.id;return c.jsxs("button",{type:"button",onClick:()=>Pt({...Ke,hardwareIntent:V.id}),className:`text-left border rounded-lg p-3 transition-all ${pe?"border-indigo-600 bg-indigo-50 shadow-sm":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold mb-1",children:[c.jsx("span",{className:pe?"text-indigo-700":"text-gray-800",children:V.label}),je&&c.jsx("span",{className:"text-[10px] text-green-600 bg-green-50 px-2 py-0.5 rounded-full font-bold",children:"Recommended"})]}),c.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:V.desc})]},V.id)})}),c.jsx("p",{className:"text-[11px] text-gray-500 mt-3",children:"Electromechanical openings pair ANSI/BHMA A156-grade locks with electric strikes or maglocks, REX sensors, and fail-safe release per EN 1125 / NFPA 101."}),Ke.hardwareIntent!==W&&c.jsxs("div",{className:"mt-2 text-[11px] text-orange-600",children:["You selected a ",Ke.hardwareIntent," package even though the usage leans ",W,". Confirm this is intentional for the project scope."]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Spec Notes / Remarks"}),c.jsx("textarea",{value:Ke.notes,onChange:V=>Pt({...Ke,notes:V.target.value}),className:"w-full p-2 border rounded h-20 text-sm",placeholder:"Enter specific installation notes or requirements..."})]})]}),c.jsx("div",{className:"p-4 md:p-6 border-t border-gray-100 flex justify-end shrink-0 bg-gray-50 rounded-b-xl",children:c.jsx("button",{onClick:Xn,className:"w-full md:w-auto px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 font-bold",children:"Save Door"})})]})}),Wt.isOpen&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 sm:p-6",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-5xl flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50 rounded-t-xl shrink-0",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Add Hardware Item"}),c.jsx("button",{type:"button",onClick:()=>Ye({isOpen:!1,setId:null}),className:"text-gray-400 hover:text-gray-600",children:c.jsx(ll,{size:20})})]}),c.jsxs("div",{className:"p-4 md:p-6 overflow-hidden flex-1 flex flex-col",children:[c.jsxs("div",{className:"bg-orange-50 border border-orange-100 rounded-lg p-3 mb-6 flex gap-3 items-start",children:[c.jsx(Eh,{className:"text-orange-600 shrink-0 mt-0.5",size:18}),c.jsxs("p",{className:"text-xs text-orange-800 leading-relaxed",children:[c.jsx("strong",{children:"Code Compliance Warning:"})," Adding manual items may affect the fire rating."]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto",children:[c.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-500 mb-4",children:"Choose a category below"}),c.jsx("div",{className:"grid gap-4 xl:grid-cols-4 lg:grid-cols-2",children:dY.map(V=>c.jsxs("div",{className:"flex flex-col h-full rounded-3xl border border-gray-100 bg-white shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[c.jsx("div",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:V.label}),c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:V.description})]}),c.jsx("div",{className:"flex-1 px-3 py-3 space-y-3 overflow-y-auto",children:V.items.length===0?c.jsx("p",{className:"text-xs text-gray-500",children:"No entries yet."}):V.items.map(pe=>c.jsxs("button",{type:"button",onClick:()=>Ll(pe.category,pe.name),className:"w-full text-left rounded-2xl border border-gray-100 px-3 py-2 transition hover:border-indigo-200 hover:bg-indigo-50",children:[c.jsx("div",{className:"text-sm font-semibold text-gray-900",children:pe.name}),c.jsx("div",{className:"text-[11px] text-gray-500",children:pe.description||"Layman-friendly details"}),c.jsx("div",{className:"text-[10px] text-gray-400 font-mono mt-1",children:pe.csi})]},`${pe.category}-${pe.name}`))})]},V.id))})]})]})]})}),Tt&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40 px-4",children:c.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-white p-6 shadow-2xl text-gray-900 relative",children:[c.jsx("button",{type:"button",onClick:()=>sn(null),className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:c.jsx(ll,{size:16})}),c.jsx("h4",{className:"text-lg font-bold mb-2",children:Tt.title||"Notice"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Tt.message}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"button",onClick:()=>sn(null),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg hover:bg-indigo-700",children:"Close"})})]})}),br.isOpen&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 sm:p-6",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl flex flex-col",children:[c.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50 rounded-t-xl",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Bulk Assign Door Specification"}),c.jsx("button",{onClick:()=>xr({isOpen:!1,templateId:"",markPrefix:"",locationsText:""}),className:"text-gray-400 hover:text-gray-600",children:c.jsx(ll,{size:20})})]}),c.jsxs("div",{className:"p-4 md:p-6 space-y-4 overflow-y-auto",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Select a template door and provide locations (zone | level | room) to replicate its specification."}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Template Door"}),c.jsx("select",{value:br.templateId,onChange:V=>{const pe=Te().doors.find(je=>je.id===V.target.value);xr(je=>({...je,templateId:V.target.value,markPrefix:(pe==null?void 0:pe.mark)||je.markPrefix}))},className:"w-full p-2 border rounded bg-white",children:Te().doors.map(V=>c.jsxs("option",{value:V.id,children:[V.mark," - ",V.roomName]},V.id))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Mark Prefix"}),c.jsx("input",{type:"text",value:br.markPrefix,onChange:V=>xr(pe=>({...pe,markPrefix:V.target.value})),className:"w-full p-2 border rounded",placeholder:"e.g. D-100"}),c.jsx("p",{className:"text-[11px] text-gray-400 mt-1",children:"Unique marks will be generated from this prefix."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Locations"}),c.jsx("textarea",{value:br.locationsText,onChange:V=>xr(pe=>({...pe,locationsText:V.target.value})),className:"w-full p-2 border rounded h-32",placeholder:`Tower A | Lvl 02 | Meeting Room
Tower B | Lvl 05 | Boardroom`}),c.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:'Provide one location per line using "Zone | Level | Room" format. Leave a part blank to reuse the template value.'})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:()=>xr({isOpen:!1,templateId:"",markPrefix:"",locationsText:""}),className:"px-4 py-2 text-sm border rounded",children:"Cancel"}),c.jsx("button",{onClick:()=>Pl(),className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Create Doors"})]})]})]})}),an.isOpen&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 sm:p-6",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl flex flex-col",children:[c.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50 rounded-t-xl",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold",children:"Instant Door Schedule Preview"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Review and confirm the generated door list before inserting."})]}),c.jsx("button",{onClick:()=>Nn({isOpen:!1,doors:[]}),className:"text-gray-400 hover:text-gray-600",children:c.jsx(ll,{size:20})})]}),c.jsxs("div",{className:"p-4 md:p-6 overflow-y-auto max-h-[60vh]",children:[an.doors.length===0?c.jsx("div",{className:"text-sm text-gray-500",children:"No doors generated."}):c.jsxs("table",{className:"w-full text-sm border-collapse",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[c.jsx("th",{className:"text-left p-2",children:"Mark"}),c.jsx("th",{className:"text-left p-2",children:"Usage"}),c.jsx("th",{className:"text-left p-2",children:"Qty"}),c.jsx("th",{className:"text-left p-2",children:"Material"}),c.jsx("th",{className:"text-left p-2",children:"Fire Rating"})]})}),c.jsx("tbody",{children:an.doors.map(V=>c.jsxs("tr",{className:"border-b border-gray-100",children:[c.jsx("td",{className:"p-2 font-semibold text-indigo-600",children:V.mark}),c.jsxs("td",{className:"p-2",children:[c.jsx("div",{className:"font-medium text-gray-800",children:V.use}),c.jsx("div",{className:"text-xs text-gray-500",children:V.roomName})]}),c.jsx("td",{className:"p-2",children:V.qty}),c.jsx("td",{className:"p-2",children:V.material}),c.jsx("td",{className:"p-2",children:V.fire>0?`${V.fire} min`:"NFR"})]},V.id))})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Need to undo? Simply delete the generated doors from the schedule later."})]}),c.jsxs("div",{className:"p-4 md:p-6 border-t border-gray-100 flex justify-end gap-2 bg-gray-50 rounded-b-xl",children:[c.jsx("button",{onClick:()=>Nn({isOpen:!1,doors:[]}),className:"px-4 py-2 text-sm border rounded",children:"Cancel"}),c.jsx("button",{onClick:Hn,className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-2",children:"Confirm & Insert"})]})]})}),h&&c.jsx(UT,{isOpen:i,onClose:()=>s(!1)}),c.jsx(sM,{isOpen:a,onClose:()=>o(!1)}),c.jsx(lM,{isOpen:l,onClose:()=>u(!1)}),hr]})};Mx.createRoot(document.getElementById("root")).render(c.jsx(su.StrictMode,{children:c.jsx(E9,{children:c.jsx(KY,{})})}));export{pn as _,Hf as c,EI as g};
